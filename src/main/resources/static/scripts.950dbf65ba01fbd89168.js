!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("global/window"),require("global/document")):"function"==typeof define&&define.amd?define(["global/window","global/document"],e):t.videojs=e(t.window,t.document)}(this,function(t,e){t=t&&t.hasOwnProperty("default")?t.default:t,e=e&&e.hasOwnProperty("default")?e.default:e;var n="7.3.0";function r(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e,n){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var a=new(Function.bind.apply(t,r));return n&&i(a,n.prototype),a}).apply(null,arguments)}function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return e||(e=t.slice(0)),t.raw=e,t}var u=[],l=function e(n){var r,i,a,o="info",s=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r("log",o,e)};return i=n,a=s,r=function(e,n,r){var o=a.levels[n],s=new RegExp("^("+o+")$");if("log"!==e&&r.unshift(e.toUpperCase()+":"),r.unshift(i+":"),u&&u.push([].concat(r)),t.console){var l=t.console[e];l||"debug"!==e||(l=t.console.info||t.console.log),l&&o&&s.test(e)&&l[Array.isArray(r)?"apply":"call"](t.console,r)}},s.createLogger=function(t){return e(n+": "+t)},s.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:o},s.level=function(t){if("string"==typeof t){if(!s.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');o=t}return o},(s.history=function(){return u?[].concat(u):[]}).filter=function(t){return(u||[]).filter(function(e){return new RegExp(".*"+t+".*").test(e[0])})},s.history.clear=function(){u&&(u.length=0)},s.history.disable=function(){null!==u&&(u.length=0,u=null)},s.history.enable=function(){null===u&&(u=[])},s.error=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r("error",o,e)},s.warn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r("warn",o,e)},s.debug=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return r("debug",o,e)},s}("VIDEOJS"),c=l.createLogger,h=function(t){for(var e="",n=0;n<arguments.length;n++)e+=t[n].replace(/\n\r?\s*/g,"")+(arguments[n+1]||"");return e},f=Object.prototype.toString,d=function(t){return v(t)?Object.keys(t):[]};function p(t,e){d(t).forEach(function(n){return e(t[n],n)})}function g(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Object.assign?Object.assign.apply(Object,[t].concat(n)):(n.forEach(function(e){e&&p(e,function(e,n){t[n]=e})}),t)}function v(t){return!!t&&"object"==typeof t}function m(t){return v(t)&&"[object Object]"===f.call(t)&&t.constructor===Object}function y(e,n){if(!e||!n)return"";if("function"!=typeof t.getComputedStyle)return"";var r=t.getComputedStyle(e);return r?r[n]:""}function _(){var t=s(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]);return _=function(){return t},t}function b(t){return"string"==typeof t&&/\S/.test(t)}function x(t){if(/\s/.test(t))throw new Error("class has illegal whitespace characters")}function w(){return e===t.document}function S(t){return v(t)&&1===t.nodeType}function T(){try{return t.parent!==t.self}catch(t){return!0}}function O(t){return function(n,r){if(!b(n))return e[t](null);b(r)&&(r=e.querySelector(r));var i=S(r)?r:e;return i[t]&&i[t](n)}}function M(t,n,r,i){void 0===t&&(t="div"),void 0===n&&(n={}),void 0===r&&(r={});var a=e.createElement(t);return Object.getOwnPropertyNames(n).forEach(function(t){var e=n[t];-1!==t.indexOf("aria-")||"role"===t||"type"===t?(l.warn(h(_(),t,e)),a.setAttribute(t,e)):"textContent"===t?k(a,e):a[t]=e}),Object.getOwnPropertyNames(r).forEach(function(t){a.setAttribute(t,r[t])}),i&&q(a,i),a}function k(t,e){return void 0===t.textContent?t.innerText=e:t.textContent=e,t}function C(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function E(t,e){return x(e),t.classList?t.classList.contains(e):(n=e,new RegExp("(^|\\s)"+n+"($|\\s)")).test(t.className);var n}function A(t,e){return t.classList?t.classList.add(e):E(t,e)||(t.className=(t.className+" "+e).trim()),t}function I(t,e){return t.classList?t.classList.remove(e):(x(e),t.className=t.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),t}function P(t,e,n){var r=E(t,e);if("function"==typeof n&&(n=n(t,e)),"boolean"!=typeof n&&(n=!r),n!==r)return n?A(t,e):I(t,e),t}function L(t,e){Object.getOwnPropertyNames(e).forEach(function(n){var r=e[n];null===r||void 0===r||!1===r?t.removeAttribute(n):t.setAttribute(n,!0===r?"":r)})}function D(t){var e={};if(t&&t.attributes&&0<t.attributes.length)for(var n=t.attributes,r=n.length-1;0<=r;r--){var i=n[r].name,a=n[r].value;"boolean"!=typeof t[i]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+i+",")||(a=null!==a),e[i]=a}return e}function j(t,e){return t.getAttribute(e)}function R(t,e,n){t.setAttribute(e,n)}function N(t,e){t.removeAttribute(e)}function B(){e.body.focus(),e.onselectstart=function(){return!1}}function F(){e.onselectstart=function(){return!0}}function U(t){if(t&&t.getBoundingClientRect&&t.parentNode){var e=t.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(function(t){void 0!==e[t]&&(n[t]=e[t])}),n.height||(n.height=parseFloat(y(t,"height"))),n.width||(n.width=parseFloat(y(t,"width"))),n}}function z(n){var r;if(n.getBoundingClientRect&&n.parentNode&&(r=n.getBoundingClientRect()),!r)return{left:0,top:0};var i=e.documentElement,a=e.body,o=r.top+(t.pageYOffset||a.scrollTop)-(i.clientTop||a.clientTop||0);return{left:Math.round(r.left+(t.pageXOffset||a.scrollLeft)-(i.clientLeft||a.clientLeft||0)),top:Math.round(o)}}function V(t,e){var n={},r=z(t),i=t.offsetWidth,a=t.offsetHeight,o=r.left,s=e.pageY,u=e.pageX;return e.changedTouches&&(u=e.changedTouches[0].pageX,s=e.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(r.top-s+a)/a)),n.x=Math.max(0,Math.min(1,(u-o)/i)),n}function H(t){return v(t)&&3===t.nodeType}function G(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function W(t){return"function"==typeof t&&(t=t()),(Array.isArray(t)?t:[t]).map(function(t){return"function"==typeof t&&(t=t()),S(t)||H(t)?t:"string"==typeof t&&/\S/.test(t)?e.createTextNode(t):void 0}).filter(function(t){return t})}function q(t,e){return W(e).forEach(function(e){return t.appendChild(e)}),t}function Y(t,e){return q(G(t),e)}function X(t){return void 0===t.button&&void 0===t.buttons||0===t.button&&void 0===t.buttons||0===t.button&&1===t.buttons}var $=O("querySelector"),Z=O("querySelectorAll"),Q=Object.freeze({isReal:w,isEl:S,isInFrame:T,createEl:M,textContent:k,prependTo:C,hasClass:E,addClass:A,removeClass:I,toggleClass:P,setAttributes:L,getAttributes:D,getAttribute:j,setAttribute:R,removeAttribute:N,blockTextSelection:B,unblockTextSelection:F,getBoundingClientRect:U,findPosition:z,getPointerPosition:V,isTextNode:H,emptyEl:G,normalizeContent:W,appendContent:q,insertContent:Y,isSingleLeftClick:X,$:$,$$:Z}),K=1;function J(){return K++}var tt={},et="vdata"+(new Date).getTime();function nt(t){var e=t[et];return e||(e=t[et]=J()),tt[e]||(tt[e]={}),tt[e]}function rt(t){var e=t[et];return!!e&&!!Object.getOwnPropertyNames(tt[e]).length}function it(t){var e=t[et];if(e){delete tt[e];try{delete t[et]}catch(e){t.removeAttribute?t.removeAttribute(et):t[et]=null}}}function at(t,e){var n=nt(t);0===n.handlers[e].length&&(delete n.handlers[e],t.removeEventListener?t.removeEventListener(e,n.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&it(t)}function ot(t,e,n,r){n.forEach(function(n){t(e,n,r)})}function st(n){function r(){return!0}function i(){return!1}if(!n||!n.isPropagationStopped){var a=n||t.event;for(var o in n={},a)"layerX"!==o&&"layerY"!==o&&"keyLocation"!==o&&"webkitMovementX"!==o&&"webkitMovementY"!==o&&("returnValue"===o&&a.preventDefault||(n[o]=a[o]));if(n.target||(n.target=n.srcElement||e),n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.preventDefault=function(){a.preventDefault&&a.preventDefault(),n.returnValue=!1,a.returnValue=!1,n.defaultPrevented=!0},n.defaultPrevented=!1,n.stopPropagation=function(){a.stopPropagation&&a.stopPropagation(),n.cancelBubble=!0,a.cancelBubble=!0,n.isPropagationStopped=r},n.isPropagationStopped=i,n.stopImmediatePropagation=function(){a.stopImmediatePropagation&&a.stopImmediatePropagation(),n.isImmediatePropagationStopped=r,n.stopPropagation()},n.isImmediatePropagationStopped=i,null!==n.clientX&&void 0!==n.clientX){var s=e.documentElement,u=e.body;n.pageX=n.clientX+(s&&s.scrollLeft||u&&u.scrollLeft||0)-(s&&s.clientLeft||u&&u.clientLeft||0),n.pageY=n.clientY+(s&&s.scrollTop||u&&u.scrollTop||0)-(s&&s.clientTop||u&&u.clientTop||0)}n.which=n.charCode||n.keyCode,null!==n.button&&void 0!==n.button&&(n.button=1&n.button?0:4&n.button?1:2&n.button?2:0)}return n}var ut=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function(){ut=!0}});t.addEventListener("test",null,e),t.removeEventListener("test",null,e)}catch(e){}}();var lt=["touchstart","touchmove"];function ct(t,e,n){if(Array.isArray(e))return ot(ct,t,e,n);var r=nt(t);if(r.handlers||(r.handlers={}),r.handlers[e]||(r.handlers[e]=[]),n.guid||(n.guid=J()),r.handlers[e].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(e,n){if(!r.disabled){e=st(e);var i=r.handlers[e.type];if(i)for(var a=i.slice(0),o=0,s=a.length;o<s&&!e.isImmediatePropagationStopped();o++)try{a[o].call(t,e,n)}catch(e){l.error(e)}}}),1===r.handlers[e].length)if(t.addEventListener){var i=!1;ut&&-1<lt.indexOf(e)&&(i={passive:!0}),t.addEventListener(e,r.dispatcher,i)}else t.attachEvent&&t.attachEvent("on"+e,r.dispatcher)}function ht(t,e,n){if(rt(t)){var r=nt(t);if(r.handlers){if(Array.isArray(e))return ot(ht,t,e,n);var i=function(t,e){r.handlers[e]=[],at(t,e)};if(void 0!==e){var a=r.handlers[e];if(a)if(n){if(n.guid)for(var o=0;o<a.length;o++)a[o].guid===n.guid&&a.splice(o--,1);at(t,e)}else i(t,e)}else for(var s in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},s)&&i(t,s)}}}function ft(t,e,n){var r=rt(t)?nt(t):{},i=t.parentNode||t.ownerDocument;if("string"==typeof e?e={type:e,target:t}:e.target||(e.target=t),e=st(e),r.dispatcher&&r.dispatcher.call(t,e,n),i&&!e.isPropagationStopped()&&!0===e.bubbles)ft.call(null,i,e,n);else if(!i&&!e.defaultPrevented){var a=nt(e.target);e.target[e.type]&&(a.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),a.disabled=!1)}return!e.defaultPrevented}function dt(t,e,n){if(Array.isArray(e))return ot(dt,t,e,n);var r=function r(){ht(t,e,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||J(),ct(t,e,r)}var pt,gt=Object.freeze({fixEvent:st,on:ct,off:ht,trigger:ft,one:dt}),vt=!1,mt=function(){if(w()&&!1!==pt.options.autoSetup){var t=Array.prototype.slice.call(e.getElementsByTagName("video")),n=Array.prototype.slice.call(e.getElementsByTagName("audio")),r=Array.prototype.slice.call(e.getElementsByTagName("video-js")),i=t.concat(n,r);if(i&&0<i.length)for(var a=0,o=i.length;a<o;a++){var s=i[a];if(!s||!s.getAttribute){yt(1);break}void 0===s.player&&null!==s.getAttribute("data-setup")&&pt(s)}else vt||yt(1)}};function yt(e,n){n&&(pt=n),t.setTimeout(mt,e)}w()&&"complete"===e.readyState?vt=!0:dt(t,"load",function(){vt=!0});var _t,bt=function(t){var n=e.createElement("style");return n.className=t,n},xt=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e},wt=function(t,e,n){e.guid||(e.guid=J());var r=function(){return e.apply(t,arguments)};return r.guid=n?n+"_"+e.guid:e.guid,r},St=function(t,e){var n=Date.now();return function(){var r=Date.now();e<=r-n&&(t.apply(void 0,arguments),n=r)}},Tt=function(){};Tt.prototype.allowedEvents_={},Tt.prototype.addEventListener=Tt.prototype.on=function(t,e){var n=this.addEventListener;this.addEventListener=function(){},ct(this,t,e),this.addEventListener=n},Tt.prototype.removeEventListener=Tt.prototype.off=function(t,e){ht(this,t,e)},Tt.prototype.one=function(t,e){var n=this.addEventListener;this.addEventListener=function(){},dt(this,t,e),this.addEventListener=n},Tt.prototype.dispatchEvent=Tt.prototype.trigger=function(t){var e=t.type||t;"string"==typeof t&&(t={type:e}),t=st(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),ft(this,t)},Tt.prototype.queueTrigger=function(e){var n=this;_t||(_t=new Map);var r=e.type||e,i=_t.get(this);i||(i=new Map,_t.set(this,i));var a=i.get(r);i.delete(r),t.clearTimeout(a);var o=t.setTimeout(function(){0===i.size&&(i=null,_t.delete(n)),n.trigger(e)},0);i.set(r,o)};var Ot=function(t){return t instanceof Tt||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(e){return"function"==typeof t[e]})},Mt=function(t){return"string"==typeof t&&/\S/.test(t)||Array.isArray(t)&&!!t.length},kt=function(t){if(!t.nodeName&&!Ot(t))throw new Error("Invalid target; must be a DOM node or evented object.")},Ct=function(t){if(!Mt(t))throw new Error("Invalid event type; must be a non-empty string or array.")},Et=function(t){if("function"!=typeof t)throw new Error("Invalid listener; must be a function.")},At=function(t,e){var n,r,i,a=e.length<3||e[0]===t||e[0]===t.eventBusEl_;return i=a?(n=t.eventBusEl_,3<=e.length&&e.shift(),r=e[0],e[1]):(n=e[0],r=e[1],e[2]),kt(n),Ct(r),Et(i),{isTargetingSelf:a,target:n,type:r,listener:i=wt(t,i)}},It=function(t,e,n,r){kt(t),t.nodeName?gt[e](t,n,r):t[e](n,r)},Pt={on:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=At(this,n),a=i.isTargetingSelf,o=i.target,s=i.type,u=i.listener;if(It(o,"on",s,u),!a){var l=function(){return t.off(o,s,u)};l.guid=u.guid;var c=function(){return t.off("dispose",l)};c.guid=u.guid,It(this,"on","dispose",l),It(o,"on","dispose",c)}},one:function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=At(this,n),a=i.target,o=i.type,s=i.listener;if(i.isTargetingSelf)It(a,"one",o,s);else{var u=function e(){t.off(a,o,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];s.apply(null,r)};u.guid=s.guid,It(a,"one",o,u)}},off:function(t,e,n){if(!t||Mt(t))ht(this.eventBusEl_,t,e);else{var r=t,i=e;kt(r),Ct(i),Et(n),n=wt(this,n),this.off("dispose",n),r.nodeName?(ht(r,i,n),ht(r,"dispose",n)):Ot(r)&&(r.off(i,n),r.off("dispose",n))}},trigger:function(t,e){return ft(this.eventBusEl_,t,e)}};function Lt(e,n){void 0===n&&(n={});var r=n.eventBusKey;if(r){if(!e[r].nodeName)throw new Error('The eventBusKey "'+r+'" does not refer to an element.');e.eventBusEl_=e[r]}else e.eventBusEl_=M("span",{className:"vjs-event-bus"});return g(e,Pt),e.on("dispose",function(){e.off(),t.setTimeout(function(){e.eventBusEl_=null},0)}),e}var Dt={state:{},setState:function(t){var e,n=this;return"function"==typeof t&&(t=t()),p(t,function(t,r){n.state[r]!==t&&((e=e||{})[r]={from:n.state[r],to:t}),n.state[r]=t}),e&&Ot(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function jt(t,e){return g(t,Dt),t.state=g({},t.state,e),"function"==typeof t.handleStateChanged&&Ot(t)&&t.on("statechanged",t.handleStateChanged),t}function Rt(t){return"string"!=typeof t?t:t.charAt(0).toUpperCase()+t.slice(1)}function Nt(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach(function(e){e&&p(e,function(e,n){m(e)?(m(t[n])||(t[n]={}),t[n]=Nt(t[n],e)):t[n]=e})}),t}var Bt=function(){function e(t,e,n){if(this.player_=!t&&this.play?t=this:t,this.options_=Nt({},this.options_),e=this.options_=Nt(this.options_,e),this.id_=e.id||e.el&&e.el.id,!this.id_){var r=t&&t.id&&t.id()||"no_player";this.id_=r+"_component_"+J()}this.name_=e.name||null,e.el?this.el_=e.el:!1!==e.createEl&&(this.el_=this.createEl()),!1!==e.evented&&Lt(this,{eventBusKey:this.el_?"el_":null}),jt(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},!(this.childNameIndex_={})!==e.initChildren&&this.initChildren(),this.ready(n),!1!==e.reportTouchActivity&&this.enableTouchActivity()}var n=e.prototype;return n.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var t=this.children_.length-1;0<=t;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),it(this.el_),this.el_=null),this.player_=null},n.player=function(){return this.player_},n.options=function(t){return l.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),t&&(this.options_=Nt(this.options_,t)),this.options_},n.el=function(){return this.el_},n.createEl=function(t,e,n){return M(t,e,n)},n.localize=function(t,e,n){void 0===n&&(n=t);var r=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),a=i&&i[r],o=r&&r.split("-")[0],s=i&&i[o],u=n;return a&&a[t]?u=a[t]:s&&s[t]&&(u=s[t]),e&&(u=u.replace(/\{(\d+)\}/g,function(t,n){var r=e[n-1],i=r;return void 0===r&&(i=t),i})),u},n.contentEl=function(){return this.contentEl_||this.el_},n.id=function(){return this.id_},n.name=function(){return this.name_},n.children=function(){return this.children_},n.getChildById=function(t){return this.childIndex_[t]},n.getChild=function(t){if(t)return t=Rt(t),this.childNameIndex_[t]},n.addChild=function(t,n,r){var i,a;if(void 0===n&&(n={}),void 0===r&&(r=this.children_.length),"string"==typeof t){a=Rt(t);var o=n.componentClass||a;n.name=a;var s=e.getComponent(o);if(!s)throw new Error("Component "+o+" does not exist");if("function"!=typeof s)return null;i=new s(this.player_||this,n)}else i=t;if(this.children_.splice(r,0,i),"function"==typeof i.id&&(this.childIndex_[i.id()]=i),(a=a||i.name&&Rt(i.name()))&&(this.childNameIndex_[a]=i),"function"==typeof i.el&&i.el()){var u=this.contentEl().children[r]||null;this.contentEl().insertBefore(i.el(),u)}return i},n.removeChild=function(t){if("string"==typeof t&&(t=this.getChild(t)),t&&this.children_){for(var e=!1,n=this.children_.length-1;0<=n;n--)if(this.children_[n]===t){e=!0,this.children_.splice(n,1);break}if(e){this.childIndex_[t.id()]=null,this.childNameIndex_[t.name()]=null;var r=t.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}}},n.initChildren=function(){var t=this,n=this.options_.children;if(n){var r,i=this.options_,a=e.getComponent("Tech");(r=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter(function(t){return!r.some(function(e){return"string"==typeof e?t===e:t===e.name})})).map(function(e){var r,i;return i="string"==typeof e?n[r=e]||t.options_[r]||{}:(r=e.name,e),{name:r,opts:i}}).filter(function(t){var n=e.getComponent(t.opts.componentClass||Rt(t.name));return n&&!a.isTech(n)}).forEach(function(e){var n=e.name,r=e.opts;if(void 0!==i[n]&&(r=i[n]),!1!==r){!0===r&&(r={}),r.playerOptions=t.options_.playerOptions;var a=t.addChild(n,r);a&&(t[n]=a)}})}},n.buildCSSClass=function(){return""},n.ready=function(t,e){if(void 0===e&&(e=!1),t)return this.isReady_?void(e?t.call(this):this.setTimeout(t,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(t))},n.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var t=this.readyQueue_;this.readyQueue_=[],t&&0<t.length&&t.forEach(function(t){t.call(this)},this),this.trigger("ready")},1)},n.$=function(t,e){return $(t,e||this.contentEl())},n.$$=function(t,e){return Z(t,e||this.contentEl())},n.hasClass=function(t){return E(this.el_,t)},n.addClass=function(t){A(this.el_,t)},n.removeClass=function(t){I(this.el_,t)},n.toggleClass=function(t,e){P(this.el_,t,e)},n.show=function(){this.removeClass("vjs-hidden")},n.hide=function(){this.addClass("vjs-hidden")},n.lockShowing=function(){this.addClass("vjs-lock-showing")},n.unlockShowing=function(){this.removeClass("vjs-lock-showing")},n.getAttribute=function(t){return j(this.el_,t)},n.setAttribute=function(t,e){R(this.el_,t,e)},n.removeAttribute=function(t){N(this.el_,t)},n.width=function(t,e){return this.dimension("width",t,e)},n.height=function(t,e){return this.dimension("height",t,e)},n.dimensions=function(t,e){this.width(t,!0),this.height(e)},n.dimension=function(t,e,n){if(void 0!==e)return null!==e&&e==e||(e=0),this.el_.style[t]=-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?e:"auto"===e?"":e+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var r=this.el_.style[t],i=r.indexOf("px");return-1!==i?parseInt(r.slice(0,i),10):parseInt(this.el_["offset"+Rt(t)],10)},n.currentDimension=function(e){var n=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if("function"==typeof t.getComputedStyle){var r=t.getComputedStyle(this.el_);n=r.getPropertyValue(e)||r[e]}if(0===(n=parseFloat(n))){var i="offset"+Rt(e);n=this.el_[i]}return n},n.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},n.currentWidth=function(){return this.currentDimension("width")},n.currentHeight=function(){return this.currentDimension("height")},n.focus=function(){this.el_.focus()},n.blur=function(){this.el_.blur()},n.emitTapEvents=function(){var t,e=0,n=null;this.on("touchstart",function(r){1===r.touches.length&&(n={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},e=(new Date).getTime(),t=!0)}),this.on("touchmove",function(e){if(1<e.touches.length)t=!1;else if(n){var r=e.touches[0].pageX-n.pageX,i=e.touches[0].pageY-n.pageY;10<Math.sqrt(r*r+i*i)&&(t=!1)}});var r=function(){t=!1};this.on("touchleave",r),this.on("touchcancel",r),this.on("touchend",function(r){!(n=null)===t&&(new Date).getTime()-e<200&&(r.preventDefault(),this.trigger("tap"))})},n.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t,e=wt(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){e(),this.clearInterval(t),t=this.setInterval(e,250)});var n=function(n){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}},n.setTimeout=function(e,n){var r,i,a=this;return e=wt(this,e),r=t.setTimeout(function(){a.off("dispose",i),e()},n),(i=function(){return a.clearTimeout(r)}).guid="vjs-timeout-"+r,this.on("dispose",i),r},n.clearTimeout=function(e){t.clearTimeout(e);var n=function(){};return n.guid="vjs-timeout-"+e,this.off("dispose",n),e},n.setInterval=function(e,n){var r=this;e=wt(this,e);var i=t.setInterval(e,n),a=function(){return r.clearInterval(i)};return a.guid="vjs-interval-"+i,this.on("dispose",a),i},n.clearInterval=function(e){t.clearInterval(e);var n=function(){};return n.guid="vjs-interval-"+e,this.off("dispose",n),e},n.requestAnimationFrame=function(e){var n,r,i=this;return this.supportsRaf_?(e=wt(this,e),n=t.requestAnimationFrame(function(){i.off("dispose",r),e()}),(r=function(){return i.cancelAnimationFrame(n)}).guid="vjs-raf-"+n,this.on("dispose",r),n):this.setTimeout(e,1e3/60)},n.cancelAnimationFrame=function(e){if(this.supportsRaf_){t.cancelAnimationFrame(e);var n=function(){};return n.guid="vjs-raf-"+e,this.off("dispose",n),e}return this.clearTimeout(e)},e.registerComponent=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var r=e.getComponent("Tech"),i=r&&r.isTech(n),a=e===n||e.prototype.isPrototypeOf(n.prototype);if(i||!a)throw new Error('Illegal component, "'+t+'"; '+(i?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");t=Rt(t),e.components_||(e.components_={});var o=e.getComponent("Player");if("Player"===t&&o&&o.players){var s=o.players,u=Object.keys(s);if(s&&0<u.length&&u.map(function(t){return s[t]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=n},e.getComponent=function(t){if(t)return t=Rt(t),e.components_&&e.components_[t]?e.components_[t]:void 0},e}();Bt.prototype.supportsRaf_="function"==typeof t.requestAnimationFrame&&"function"==typeof t.cancelAnimationFrame,Bt.registerComponent("Component",Bt);var Ft,Ut,zt,Vt,Ht=t.navigator&&t.navigator.userAgent||"",Gt=/AppleWebKit\/([\d.]+)/i.exec(Ht),Wt=Gt?parseFloat(Gt.pop()):null,qt=/iPad/i.test(Ht),Yt=/iPhone/i.test(Ht)&&!qt,Xt=/iPod/i.test(Ht),$t=Yt||qt||Xt,Zt=(Ft=Ht.match(/OS (\d+)_/i))&&Ft[1]?Ft[1]:null,Qt=/Android/i.test(Ht),Kt=function(){var t=Ht.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),n=t[2]&&parseFloat(t[2]);return e&&n?parseFloat(t[1]+"."+t[2]):e||null}(),Jt=Qt&&Kt<5&&Wt<537,te=/Firefox/i.test(Ht),ee=/Edge/i.test(Ht),ne=!ee&&(/Chrome/i.test(Ht)||/CriOS/i.test(Ht)),re=(Ut=Ht.match(/(Chrome|CriOS)\/(\d+)/))&&Ut[2]?parseFloat(Ut[2]):null,ie=(!(Vt=(zt=/MSIE\s(\d+)\.\d/.exec(Ht))&&parseFloat(zt[1]))&&/Trident\/7.0/i.test(Ht)&&/rv:11.0/.test(Ht)&&(Vt=11),Vt),ae=/Safari/i.test(Ht)&&!ne&&!Qt&&!ee,oe=(ae||$t)&&!ne,se=w()&&("ontouchstart"in t||t.navigator.maxTouchPoints||t.DocumentTouch&&t.document instanceof t.DocumentTouch),ue=Object.freeze({IS_IPAD:qt,IS_IPHONE:Yt,IS_IPOD:Xt,IS_IOS:$t,IOS_VERSION:Zt,IS_ANDROID:Qt,ANDROID_VERSION:Kt,IS_NATIVE_ANDROID:Jt,IS_FIREFOX:te,IS_EDGE:ee,IS_CHROME:ne,CHROME_VERSION:re,IE_VERSION:ie,IS_SAFARI:ae,IS_ANY_SAFARI:oe,TOUCH_ENABLED:se});function le(t,e,n,r){return function(t,e,n){if("number"!=typeof r||r<0||n<r)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+r+") is non-numeric or out of bounds (0-"+n+").")}(t,0,n.length-1),n[r][e]}function ce(t){return void 0===t||0===t.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:le.bind(null,"start",0,t),end:le.bind(null,"end",1,t)}}function he(t,e){return Array.isArray(t)?ce(t):void 0===t||void 0===e?ce():ce([[t,e]])}function fe(t,e){var n,r,i=0;if(!e)return 0;t&&t.length||(t=he(0,0));for(var a=0;a<t.length;a++)n=t.start(a),e<(r=t.end(a))&&(r=e),i+=r-n;return i/e}for(var de,pe={},ge=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],ve=ge[0],me=0;me<ge.length;me++)if(ge[me][1]in e){de=ge[me];break}if(de)for(var ye=0;ye<de.length;ye++)pe[ve[ye]]=de[ye];function _e(t){if(t instanceof _e)return t;"number"==typeof t?this.code=t:"string"==typeof t?this.message=t:v(t)&&("number"==typeof t.code&&(this.code=t.code),g(this,t)),this.message||(this.message=_e.defaultMessages[this.code]||"")}_e.prototype.code=0,_e.prototype.message="",_e.prototype.status=null,_e.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],_e.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var be=0;be<_e.errorTypes.length;be++)_e[_e.errorTypes[be]]=be,_e.prototype[_e.errorTypes[be]]=be;function xe(t){return null!=t&&"function"==typeof t.then}function we(t){xe(t)&&t.then(null,function(t){})}var Se=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(e,n,r){return t[n]&&(e[n]=t[n]),e},{cues:t.cues&&Array.prototype.map.call(t.cues,function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}})})},Te="vjs-modal-dialog",Oe=function(n){function i(t,e){var r;return(r=n.call(this,t,e)||this).opened_=r.hasBeenOpened_=r.hasBeenFilled_=!1,r.closeable(!r.options_.uncloseable),r.content(r.options_.content),r.contentEl_=M("div",{className:Te+"-content"},{role:"document"}),r.descEl_=M("p",{className:Te+"-description vjs-control-text",id:r.el().getAttribute("aria-describedby")}),k(r.descEl_,r.description()),r.el_.appendChild(r.descEl_),r.el_.appendChild(r.contentEl_),r}r(i,n);var a=i.prototype;return a.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},a.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,n.prototype.dispose.call(this)},a.buildCSSClass=function(){return Te+" vjs-hidden "+n.prototype.buildCSSClass.call(this)},a.handleKeyPress=function(t){27===t.which&&this.closeable()&&this.close()},a.label=function(){return this.localize(this.options_.label||"Modal Window")},a.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},a.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",wt(this,this.handleKeyPress)),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},a.opened=function(t){return"boolean"==typeof t&&this[t?"open":"close"](),this.opened_},a.close=function(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",wt(this,this.handleKeyPress)),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},a.closeable=function(t){if("boolean"==typeof t){var e=this.closeable_=!!t,n=this.getChild("closeButton");if(e&&!n){var r=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=r,this.on(n,"close",this.close)}!e&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())}return this.closeable_},a.fill=function(){this.fillWith(this.content())},a.fillWith=function(t){var e=this.contentEl(),n=e.parentNode,r=e.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(e),this.empty(),Y(e,t),this.trigger("modalfill"),r?n.insertBefore(e,r):n.appendChild(e);var i=this.getChild("closeButton");i&&n.appendChild(i.el_)},a.empty=function(){this.trigger("beforemodalempty"),G(this.contentEl()),this.trigger("modalempty")},a.content=function(t){return void 0!==t&&(this.content_=t),this.content_},a.conditionalFocus_=function(){var t=e.activeElement,n=this.player_.el_;this.previouslyActiveEl_=null,(n.contains(t)||n===t)&&(this.previouslyActiveEl_=t,this.focus(),this.on(e,"keydown",this.handleKeyDown))},a.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null),this.off(e,"keydown",this.handleKeyDown)},a.handleKeyDown=function(t){if(9===t.which){for(var n,r=this.focusableEls_(),i=this.el_.querySelector(":focus"),a=0;a<r.length;a++)if(i===r[a]){n=a;break}e.activeElement===this.el_&&(n=0),t.shiftKey&&0===n?(r[r.length-1].focus(),t.preventDefault()):t.shiftKey||n!==r.length-1||(r[0].focus(),t.preventDefault())}},a.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(e){return(e instanceof t.HTMLAnchorElement||e instanceof t.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof t.HTMLInputElement||e instanceof t.HTMLSelectElement||e instanceof t.HTMLTextAreaElement||e instanceof t.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof t.HTMLIFrameElement||e instanceof t.HTMLObjectElement||e instanceof t.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})},i}(Bt);Oe.prototype.options_={pauseOnOpen:!0,temporary:!0},Bt.registerComponent("ModalDialog",Oe);var Me=function(t){function e(e){var n;void 0===e&&(e=[]),(n=t.call(this)||this).tracks_=[],Object.defineProperty(o(o(n)),"length",{get:function(){return this.tracks_.length}});for(var r=0;r<e.length;r++)n.addTrack(e[r]);return n}r(e,t);var n=e.prototype;return n.addTrack=function(t){var e=this.tracks_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.tracks_[e]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack"}))},n.removeTrack=function(t){for(var e,n=0,r=this.length;n<r;n++)if(this[n]===t){(e=this[n]).off&&e.off(),this.tracks_.splice(n,1);break}e&&this.trigger({track:e,type:"removetrack"})},n.getTrackById=function(t){for(var e=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===t){e=i;break}}return e},e}(Tt);for(var ke in Me.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},Me.prototype.allowedEvents_)Me.prototype["on"+ke]=null;var Ce=function(t,e){for(var n=0;n<t.length;n++)Object.keys(t[n]).length&&e.id!==t[n].id&&(t[n].enabled=!1)},Ee=function(t){function e(e){var n;void 0===e&&(e=[]);for(var r=e.length-1;0<=r;r--)if(e[r].enabled){Ce(e,e[r]);break}return(n=t.call(this,e)||this).changing_=!1,n}return r(e,t),e.prototype.addTrack=function(e){var n=this;e.enabled&&Ce(this,e),t.prototype.addTrack.call(this,e),e.addEventListener&&e.addEventListener("enabledchange",function(){n.changing_||(n.changing_=!0,Ce(n,e),n.changing_=!1,n.trigger("change"))})},e}(Me),Ae=function(t,e){for(var n=0;n<t.length;n++)Object.keys(t[n]).length&&e.id!==t[n].id&&(t[n].selected=!1)},Ie=function(t){function e(e){var n;void 0===e&&(e=[]);for(var r=e.length-1;0<=r;r--)if(e[r].selected){Ae(e,e[r]);break}return(n=t.call(this,e)||this).changing_=!1,Object.defineProperty(o(o(n)),"selectedIndex",{get:function(){for(var t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set:function(){}}),n}return r(e,t),e.prototype.addTrack=function(e){var n=this;e.selected&&Ae(this,e),t.prototype.addTrack.call(this,e),e.addEventListener&&e.addEventListener("selectedchange",function(){n.changing_||(n.changing_=!0,Ae(n,e),n.changing_=!1,n.trigger("change"))})},e}(Me),Pe=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.addTrack=function(e){t.prototype.addTrack.call(this,e),e.addEventListener("modechange",wt(this,function(){this.queueTrigger("change")})),-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",wt(this,function(){this.trigger("selectedlanguagechange")}))},e}(Me),Le=function(){function t(t){void 0===t&&(t=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var e=0,n=t.length;e<n;e++)this.addTrackElement_(t[e])}var e=t.prototype;return e.addTrackElement_=function(t){var e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.trackElements_[e]}}),-1===this.trackElements_.indexOf(t)&&this.trackElements_.push(t)},e.getTrackElementByTrack_=function(t){for(var e,n=0,r=this.trackElements_.length;n<r;n++)if(t===this.trackElements_[n].track){e=this.trackElements_[n];break}return e},e.removeTrackElement_=function(t){for(var e=0,n=this.trackElements_.length;e<n;e++)if(t===this.trackElements_[e]){this.trackElements_.splice(e,1);break}},t}(),De=function(){function t(e){t.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=t.prototype;return e.setCues_=function(t){var e=this.length||0,n=0,r=t.length;this.cues_=t,this.length_=t.length;var i=function(t){""+t in this||Object.defineProperty(this,""+t,{get:function(){return this.cues_[t]}})};if(e<r)for(n=e;n<r;n++)i.call(this,n)},e.getCueById=function(t){for(var e=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===t){e=i;break}}return e},t}(),je={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Re={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Ne={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Be={disabled:"disabled",hidden:"hidden",showing:"showing"},Fe=function(t){function e(e){var n;void 0===e&&(e={}),n=t.call(this)||this;var r={id:e.id||"vjs_track_"+J(),kind:e.kind||"",label:e.label||"",language:e.language||""},i=function(t){Object.defineProperty(o(o(n)),t,{get:function(){return r[t]},set:function(){}})};for(var a in r)i(a);return n}return r(e,t),e}(Tt),Ue=function(n){var r=["protocol","hostname","port","pathname","search","hash","host"],i=e.createElement("a");i.href=n;var a,o=""===i.host&&"file:"!==i.protocol;o&&((a=e.createElement("div")).innerHTML='<a href="'+n+'"></a>',i=a.firstChild,a.setAttribute("style","display:none; position:absolute;"),e.body.appendChild(a));for(var s={},u=0;u<r.length;u++)s[r[u]]=i[r[u]];return"http:"===s.protocol&&(s.host=s.host.replace(/:80$/,"")),"https:"===s.protocol&&(s.host=s.host.replace(/:443$/,"")),s.protocol||(s.protocol=t.location.protocol),o&&e.body.removeChild(a),s},ze=function(t){if(!t.match(/^https?:\/\//)){var n=e.createElement("div");n.innerHTML='<a href="'+t+'">x</a>',t=n.firstChild.href}return t},Ve=function(t){if("string"==typeof t){var e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(t);if(e)return e.pop().toLowerCase()}return""},He=function(e){var n=t.location,r=Ue(e);return(":"===r.protocol?n.protocol:r.protocol)+r.host!==n.protocol+n.host},Ge=Object.freeze({parseUrl:Ue,getAbsoluteURL:ze,getFileExtension:Ve,isCrossOrigin:He}),We=function(t){var e=qe.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)},qe=Object.prototype.toString;function Ye(t,e){return t(e={exports:{}},e.exports),e.exports}"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Xe=Ye(function(t,e){(e=t.exports=function(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}}),$e=Function.prototype.toString,Ze=/^\s*class\b/,Qe=function(t){try{var e=$e.call(t);return Ze.test(e)}catch(t){return!1}},Ke=Object.prototype.toString,Je="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,tn=Object.prototype.toString,en=Object.prototype.hasOwnProperty,nn=function(t){if(!t)return{};var e={};return function(t,e,n){if(!function(t){if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if("function"==typeof t&&!t.prototype)return!0;if(Je)return function(t){try{return!Qe(t)&&($e.call(t),!0)}catch(t){return!1}}(t);if(Qe(t))return!1;var e=Ke.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e}(e))throw new TypeError("iterator must be a function");var r;3<=arguments.length&&(r=n),"[object Array]"===tn.call(t)?function(t,e,n){for(var r=0,i=t.length;r<i;r++)en.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))}(t,e,r):"string"==typeof t?function(t,e,n){for(var r=0,i=t.length;r<i;r++)null==n?e(t.charAt(r),r,t):e.call(n,t.charAt(r),r,t)}(t,e,r):function(t,e,n){for(var r in t)en.call(t,r)&&(null==n?e(t[r],r,t):e.call(n,t[r],r,t))}(t,e,r)}(Xe(t).split("\n"),function(t){var n=t.indexOf(":"),r=Xe(t.slice(0,n)).toLowerCase(),i=Xe(t.slice(n+1));void 0===e[r]?e[r]=i:"[object Array]"===Object.prototype.toString.call(e[r])?e[r].push(i):e[r]=[e[r],i]}),e},rn=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)an.call(n,r)&&(t[r]=n[r])}return t},an=Object.prototype.hasOwnProperty,on=un;function sn(t,e,n){var r=t;return We(e)?(n=e,"string"==typeof t&&(r={uri:t})):r=rn(e,{uri:t}),r.callback=n,r}function un(t,e,n){return ln(e=sn(t,e,n))}function ln(t){if(void 0===t.callback)throw new Error("callback argument missing");var e=!1,n=function(n,r,i){e||(e=!0,t.callback(n,r,i))};function r(t){return clearTimeout(u),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,n(t,g)}function i(){if(!o){var e;clearTimeout(u);var r=g,i=null;return 0!==(e=t.useXDR&&void 0===s.status?200:1223===s.status?204:s.status)?(r={body:function(){var t=void 0;if(t=s.response?s.response:s.responseText||("document"===s.responseType?s.responseXML:""!==s.responseType||s.responseXML&&"parsererror"===s.responseXML.documentElement.nodeName?null:s.responseXML),p)try{t=JSON.parse(t)}catch(t){}return t}(),statusCode:e,method:c,headers:{},url:l,rawRequest:s},s.getAllResponseHeaders&&(r.headers=nn(s.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),n(i,r,r.body)}}var a,o,s=t.xhr||null;s||(s=t.cors||t.useXDR?new un.XDomainRequest:new un.XMLHttpRequest);var u,l=s.url=t.uri||t.url,c=s.method=t.method||"GET",h=t.body||t.data,f=s.headers=t.headers||{},d=!!t.sync,p=!1,g={body:void 0,headers:{},statusCode:0,method:c,url:l,rawRequest:s};if("json"in t&&!1!==t.json&&(p=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==c&&"HEAD"!==c&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),h=JSON.stringify(!0===t.json?h:t.json))),s.onreadystatechange=function(){4===s.readyState&&setTimeout(i,0)},s.onload=i,s.onerror=r,s.onprogress=function(){},s.onabort=function(){o=!0},s.ontimeout=r,s.open(c,l,!d,t.username,t.password),d||(s.withCredentials=!!t.withCredentials),!d&&0<t.timeout&&(u=setTimeout(function(){if(!o){o=!0,s.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",r(t)}},t.timeout)),s.setRequestHeader)for(a in f)f.hasOwnProperty(a)&&s.setRequestHeader(a,f[a]);else if(t.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(s.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(s),s.send(h||null),s}un.XMLHttpRequest=t.XMLHttpRequest||function(){},un.XDomainRequest="withCredentials"in new un.XMLHttpRequest?un.XMLHttpRequest:t.XDomainRequest,function(t,e){for(var n=0;n<t.length;n++)e(t[n])}(["get","put","post","patch","head","delete"],function(t){un["delete"===t?"del":t]=function(e,n,r){return(n=sn(e,n,r)).method=t.toUpperCase(),ln(n)}});var cn=function(e,n){var r=new t.WebVTT.Parser(t,t.vttjs,t.WebVTT.StringDecoder()),i=[];r.oncue=function(t){n.addCue(t)},r.onparsingerror=function(t){i.push(t)},r.onflush=function(){n.trigger({type:"loadeddata",target:n})},r.parse(e),0<i.length&&(t.console&&t.console.groupCollapsed&&t.console.groupCollapsed("Text Track parsing errors for "+n.src),i.forEach(function(t){return l.error(t)}),t.console&&t.console.groupEnd&&t.console.groupEnd()),r.flush()},hn=function(e){function n(n){var r;if(void 0===n&&(n={}),!n.tech)throw new Error("A tech was not provided.");var i=Nt(n,{kind:Ne[n.kind]||"subtitles",language:n.language||n.srclang||""}),a=Be[i.mode]||"disabled",s=i.default;"metadata"!==i.kind&&"chapters"!==i.kind||(a="hidden"),(r=e.call(this,i)||this).tech_=i.tech,r.cues_=[],r.activeCues_=[];var u=new De(r.cues_),c=new De(r.activeCues_),h=!1,f=wt(o(o(r)),function(){this.activeCues=this.activeCues,h&&(this.trigger("cuechange"),h=!1)});return"disabled"!==a&&r.tech_.ready(function(){r.tech_.on("timeupdate",f)},!0),Object.defineProperties(o(o(r)),{default:{get:function(){return s},set:function(){}},mode:{get:function(){return a},set:function(t){var e=this;Be[t]&&("disabled"!==(a=t)?this.tech_.ready(function(){e.tech_.on("timeupdate",f)},!0):this.tech_.off("timeupdate",f),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?u:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return c;for(var t=this.tech_.currentTime(),e=[],n=0,r=this.cues.length;n<r;n++){var i=this.cues[n];i.startTime<=t&&i.endTime>=t?e.push(i):i.startTime===i.endTime&&i.startTime<=t&&i.startTime+.5>=t&&e.push(i)}if(h=!1,e.length!==this.activeCues_.length)h=!0;else for(var a=0;a<e.length;a++)-1===this.activeCues_.indexOf(e[a])&&(h=!0);return this.activeCues_=e,c.setCues_(this.activeCues_),c},set:function(){}}}),i.src?(r.src=i.src,function(e,n){var r={uri:e},i=He(e);i&&(r.cors=i),on(r,wt(this,function(e,r,i){if(e)return l.error(e,r);if(n.loaded_=!0,"function"!=typeof t.WebVTT){if(n.tech_){var a=function(){return cn(i,n)};n.tech_.on("vttjsloaded",a),n.tech_.on("vttjserror",function(){l.error("vttjs failed to load, stopping trying to process "+n.src),n.tech_.off("vttjsloaded",a)})}}else cn(i,n)}))}(i.src,o(o(r)))):r.loaded_=!0,r}r(n,e);var i=n.prototype;return i.addCue=function(e){var n=e;if(t.vttjs&&!(e instanceof t.vttjs.VTTCue)){for(var r in n=new t.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)r in n||(n[r]=e[r]);n.id=e.id,n.originalCue_=e}for(var i=this.tech_.textTracks(),a=0;a<i.length;a++)i[a]!==this&&i[a].removeCue(n);this.cues_.push(n),this.cues.setCues_(this.cues_)},i.removeCue=function(t){for(var e=this.cues_.length;e--;){var n=this.cues_[e];if(n===t||n.originalCue_&&n.originalCue_===t){this.cues_.splice(e,1),this.cues.setCues_(this.cues_);break}}},n}(Fe);hn.prototype.allowedEvents_={cuechange:"cuechange"};var fn=function(t){function e(e){var n;void 0===e&&(e={});var r=Nt(e,{kind:Re[e.kind]||""});n=t.call(this,r)||this;var i=!1;return Object.defineProperty(o(o(n)),"enabled",{get:function(){return i},set:function(t){"boolean"==typeof t&&t!==i&&(i=t,this.trigger("enabledchange"))}}),r.enabled&&(n.enabled=r.enabled),n.loaded_=!0,n}return r(e,t),e}(Fe),dn=function(t){function e(e){var n;void 0===e&&(e={});var r=Nt(e,{kind:je[e.kind]||""});n=t.call(this,r)||this;var i=!1;return Object.defineProperty(o(o(n)),"selected",{get:function(){return i},set:function(t){"boolean"==typeof t&&t!==i&&(i=t,this.trigger("selectedchange"))}}),r.selected&&(n.selected=r.selected),n}return r(e,t),e}(Fe),pn=function(t){function e(e){var n,r;void 0===e&&(e={}),n=t.call(this)||this;var i=new hn(e);return n.kind=i.kind,n.src=i.src,n.srclang=i.language,n.label=i.label,n.default=i.default,Object.defineProperties(o(o(n)),{readyState:{get:function(){return r}},track:{get:function(){return i}}}),r=0,i.addEventListener("loadeddata",function(){r=2,n.trigger({type:"load",target:o(o(n))})}),n}return r(e,t),e}(Tt);pn.prototype.allowedEvents_={load:"load"},pn.NONE=0,pn.LOADING=1,pn.LOADED=2,pn.ERROR=3;var gn={audio:{ListClass:Ee,TrackClass:fn,capitalName:"Audio"},video:{ListClass:Ie,TrackClass:dn,capitalName:"Video"},text:{ListClass:Pe,TrackClass:hn,capitalName:"Text"}};Object.keys(gn).forEach(function(t){gn[t].getterName=t+"Tracks",gn[t].privateName=t+"Tracks_"});var vn={remoteText:{ListClass:Pe,TrackClass:hn,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Le,TrackClass:pn,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},mn=Nt(gn,vn);vn.names=Object.keys(vn),gn.names=Object.keys(gn),mn.names=[].concat(vn.names).concat(gn.names);var yn=Object.create||function(){function t(){}return function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function _n(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}function bn(t){function e(t,e,n,r){return 3600*(0|t)+60*(0|e)+(0|n)+(0|r)/1e3}var n=t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):59<n[1]?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}function xn(){this.values=yn(null)}function wn(t,e,n,r){var i=r?t.split(r):[t];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(n);2===o.length&&e(o[0],o[1])}}function Sn(t,e,n){var r,i,a,o=t;function s(){var e=bn(t);if(null===e)throw new _n(_n.Errors.BadTimeStamp,"Malformed timestamp: "+o);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function u(){t=t.replace(/^\s+/,"")}if(u(),e.startTime=s(),u(),"--\x3e"!==t.substr(0,3))throw new _n(_n.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+o);t=t.substr(3),u(),e.endTime=s(),u(),r=t,i=e,a=new xn,wn(r,function(t,e){switch(t){case"region":for(var r=n.length-1;0<=r;r--)if(n[r].id===e){a.set(t,n[r].region);break}break;case"vertical":a.alt(t,e,["rl","lr"]);break;case"line":var i=e.split(","),o=i[0];a.integer(t,o),a.percent(t,o)&&a.set("snapToLines",!1),a.alt(t,o,["auto"]),2===i.length&&a.alt("lineAlign",i[1],["start","middle","end"]);break;case"position":i=e.split(","),a.percent(t,i[0]),2===i.length&&a.alt("positionAlign",i[1],["start","middle","end"]);break;case"size":a.percent(t,e);break;case"align":a.alt(t,e,["start","middle","end","left","right"])}},/:/,/\s/),i.region=a.get("region",null),i.vertical=a.get("vertical",""),i.line=a.get("line","auto"),i.lineAlign=a.get("lineAlign","start"),i.snapToLines=a.get("snapToLines",!0),i.size=a.get("size",100),i.align=a.get("align","middle"),i.position=a.get("position",{start:0,left:0,middle:50,end:100,right:100},i.align),i.positionAlign=a.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},i.align)}((_n.prototype=yn(Error.prototype)).constructor=_n).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},xn.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var r=0;r<n.length;++r)if(e===n[r]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(e=parseFloat(e))&&e<=100)&&(this.set(t,e),!0)}};var Tn={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"\u200e","&rlm;":"\u200f","&nbsp;":"\xa0"},On={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Mn={v:"title",lang:"lang"},kn={rt:"ruby"};function Cn(t,e){function n(){if(!e)return null;var t,n=e.match(/^([^<]*)(<[^>]*>?)?/);return e=e.substr((t=n[1]?n[1]:n[2]).length),t}function r(t){return Tn[t]}function i(t){for(;d=t.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)t=t.replace(d[0],r);return t}function a(e,n){var r=On[e];if(!r)return null;var i=t.document.createElement(r);i.localName=r;var a=Mn[e];return a&&n&&(i[a]=n.trim()),i}for(var o,s,u=t.document.createElement("div"),l=u,c=[];null!==(o=n());)if("<"!==o[0])l.appendChild(t.document.createTextNode(i(o)));else{if("/"===o[1]){c.length&&c[c.length-1]===o.substr(2).replace(">","")&&(c.pop(),l=l.parentNode);continue}var h,f=bn(o.substr(1,o.length-2));if(f){h=t.document.createProcessingInstruction("timestamp",f),l.appendChild(h);continue}var d=o.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!d)continue;if(!(h=a(d[1],d[3])))continue;if(kn[(s=h).localName]&&kn[s.localName]!==l.localName)continue;d[2]&&(h.className=d[2].substr(1).replace("."," ")),c.push(d[1]),l.appendChild(h),l=h}return u}var En=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function An(t){for(var e=0;e<En.length;e++){var n=En[e];if(t>=n[0]&&t<=n[1])return!0}return!1}function In(){}function Pn(t,e,n){In.call(this),this.cue=e,this.cueDiv=Cn(t,e.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=t.document.createElement("div"),r={direction:function(t){var e=[],n="";if(!t||!t.childNodes)return"ltr";function r(t,e){for(var n=e.childNodes.length-1;0<=n;n--)t.push(e.childNodes[n])}function i(t){if(!t||!t.length)return null;var e=t.pop(),n=e.textContent||e.innerText;if(n){var a=n.match(/^.*(\n|\r)/);return a?a[t.length=0]:n}return"ruby"===e.tagName?i(t):e.childNodes?(r(t,e),i(t)):void 0}for(r(e,t);n=i(e);)for(var a=0;a<n.length;a++)if(An(n.charCodeAt(a)))return"rtl";return"ltr"}(this.cueDiv),writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===e.align?"center":e.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var i=0;switch(e.positionAlign){case"start":i=e.position;break;case"middle":i=e.position-e.size/2;break;case"end":i=e.position-e.size}this.applyStyles(""===e.vertical?{left:this.formatStyle(i,"%"),width:this.formatStyle(e.size,"%")}:{top:this.formatStyle(i,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(t){this.applyStyles({top:this.formatStyle(t.top,"px"),bottom:this.formatStyle(t.bottom,"px"),left:this.formatStyle(t.left,"px"),right:this.formatStyle(t.right,"px"),height:this.formatStyle(t.height,"px"),width:this.formatStyle(t.width,"px")})}}function Ln(t){var e,n,r,i;if(t.div){n=t.div.offsetHeight,r=t.div.offsetWidth,i=t.div.offsetTop;var a=(a=t.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();t=t.div.getBoundingClientRect(),e=a?Math.max(a[0]&&a[0].height||0,t.height/a.length):0}this.left=t.left,this.right=t.right,this.top=t.top||i,this.height=t.height||n,this.bottom=t.bottom||i+(t.height||n),this.width=t.width||r,this.lineHeight=void 0!==e?e:t.lineHeight}function Dn(t,e,n,r){var i=new Ln(e),a=e.cue,o=function(t){if("number"==typeof t.line&&(t.snapToLines||0<=t.line&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,n=e.textTrackList,r=0,i=0;i<n.length&&n[i]!==e;i++)"showing"===n[i].mode&&r++;return-1*++r}(a),s=[];if(a.snapToLines){var u;switch(a.vertical){case"":s=["+y","-y"],u="height";break;case"rl":s=["+x","-x"],u="width";break;case"lr":s=["-x","+x"],u="width"}var l=i.lineHeight,c=l*Math.round(o),h=n[u]+l,f=s[0];Math.abs(c)>h&&(c=c<0?-1:1,c*=Math.ceil(h/l)*l),o<0&&(c+=""===a.vertical?n.height:n.width,s=s.reverse()),i.move(f,c)}else{var d=i.lineHeight/n.height*100;switch(a.lineAlign){case"middle":o-=d/2;break;case"end":o-=d}switch(a.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")})}s=["+y","-x","+x","-y"],i=new Ln(e)}var p=function(t,e){for(var i,a=new Ln(t),o=1,s=0;s<e.length;s++){for(;t.overlapsOppositeAxis(n,e[s])||t.within(n)&&t.overlapsAny(r);)t.move(e[s]);if(t.within(n))return t;var u=t.intersectPercentage(n);u<o&&(i=new Ln(t),o=u),t=new Ln(a)}return i||a}(i,s);e.move(p.toCSSCompatValues(n))}function jn(){}In.prototype.applyStyles=function(t,e){for(var n in e=e||this.div,t)t.hasOwnProperty(n)&&(e.style[n]=t[n])},In.prototype.formatStyle=function(t,e){return 0===t?0:t+e},(Pn.prototype=yn(In.prototype)).constructor=Pn,Ln.prototype.move=function(t,e){switch(e=void 0!==e?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e}},Ln.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top},Ln.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1},Ln.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right},Ln.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}},Ln.prototype.intersectPercentage=function(t){return Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left))*Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top))/(this.height*this.width)},Ln.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}},Ln.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,n=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,r=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;return{left:(t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t).left,right:t.right,top:t.top||r,height:t.height||e,bottom:t.bottom||r+(t.height||e),width:t.width||n}},jn.StringDecoder=function(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}},jn.convertCueToDOMTree=function(t,e){return t&&e?Cn(t,e):null},jn.processCues=function(t,e,n){if(!t||!e||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var r=t.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",n.appendChild(r),function(t){for(var e=0;e<t.length;e++)if(t[e].hasBeenReset||!t[e].displayState)return!0;return!1}(e)){var i=[],a=Ln.getSimpleBoxPosition(r),o={font:Math.round(.05*a.height*100)/100+"px sans-serif"};!function(){for(var n,s,u=0;u<e.length;u++)n=new Pn(t,s=e[u],o),r.appendChild(n.div),Dn(0,n,a,i),s.displayState=n.div,i.push(Ln.getSimpleBoxPosition(n))}()}else for(var s=0;s<e.length;s++)r.appendChild(e[s].displayState)},(jn.Parser=function(t,e,n){n||(n=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]}).prototype={reportOrThrowError:function(t){if(!(t instanceof _n))throw t;this.onparsingerror&&this.onparsingerror(t)},parse:function(t){var e=this;function n(){for(var t=e.buffer,n=0;n<t.length&&"\r"!==t[n]&&"\n"!==t[n];)++n;var r=t.substr(0,n);return"\r"===t[n]&&++n,"\n"===t[n]&&++n,e.buffer=t.substr(n),r}function r(t){t.match(/X-TIMESTAMP-MAP/)?wn(t,function(t,n){switch(t){case"X-TIMESTAMP-MAP":r=n,i=new xn,wn(r,function(t,e){switch(t){case"MPEGT":i.integer(t+"S",e);break;case"LOCA":i.set(t+"L",bn(e))}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:i.get("MPEGTS"),LOCAL:i.get("LOCAL")})}var r,i},/=/):wn(t,function(t,n){switch(t){case"Region":!function(t){var n=new xn;if(wn(t,function(t,e){switch(t){case"id":n.set(t,e);break;case"width":n.percent(t,e);break;case"lines":n.integer(t,e);break;case"regionanchor":case"viewportanchor":var r=e.split(",");if(2!==r.length)break;var i=new xn;if(i.percent("x",r[0]),i.percent("y",r[1]),!i.has("x")||!i.has("y"))break;n.set(t+"X",i.get("x")),n.set(t+"Y",i.get("y"));break;case"scroll":n.alt(t,e,["up"])}},/=/,/\s/),n.has("id")){var r=new(e.vttjs.VTTRegion||e.window.VTTRegion);r.width=n.get("width",100),r.lines=n.get("lines",3),r.regionAnchorX=n.get("regionanchorX",0),r.regionAnchorY=n.get("regionanchorY",100),r.viewportAnchorX=n.get("viewportanchorX",0),r.viewportAnchorY=n.get("viewportanchorY",100),r.scroll=n.get("scroll",""),e.onregion&&e.onregion(r),e.regionList.push({id:n.get("id"),region:r})}}(n)}},/:/)}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var i;if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var a=(i=n()).match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new _n(_n.Errors.BadSignature);e.state="HEADER"}for(var o=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(o?o=!1:i=n(),e.state){case"HEADER":/:/.test(i)?r(i):i||(e.state="ID");continue;case"NOTE":i||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){e.state="NOTE";break}if(!i)continue;if(e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,""),e.state="CUE",-1===i.indexOf("--\x3e")){e.cue.id=i;continue}case"CUE":try{Sn(i,e.cue,e.regionList)}catch(t){e.reportOrThrowError(t),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var s=-1!==i.indexOf("--\x3e");if(!i||s&&(o=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+="\n"),e.cue.text+=i;continue;case"BADCUE":i||(e.state="ID");continue}}}catch(t){e.reportOrThrowError(t),"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new _n(_n.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}};var Rn=jn,Nn={"":1,lr:1,rl:1},Bn={start:1,middle:1,end:1,left:1,right:1};function Fn(t){return"string"==typeof t&&!!Bn[t.toLowerCase()]&&t.toLowerCase()}function Un(t,e,n){this.hasBeenReset=!1;var r="",i=!1,a=t,o=e,s=n,u=null,l="",c=!0,h="auto",f="start",d=50,p="middle",g=50,v="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return r},set:function(t){r=""+t}},pauseOnExit:{enumerable:!0,get:function(){return i},set:function(t){i=!!t}},startTime:{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");a=t,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return o},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");o=t,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return s},set:function(t){s=""+t,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(t){u=t,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return l},set:function(t){var e,n="string"==typeof(e=t)&&!!Nn[e.toLowerCase()]&&e.toLowerCase();if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");l=n,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(t){c=!!t,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return h},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");h=t,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return f},set:function(t){var e=Fn(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");f=e,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return d},set:function(t){if(t<0||100<t)throw new Error("Position must be between 0 and 100.");d=t,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return p},set:function(t){var e=Fn(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");p=e,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return g},set:function(t){if(t<0||100<t)throw new Error("Size must be between 0 and 100.");g=t,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return v},set:function(t){var e=Fn(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");v=e,this.hasBeenReset=!0}}}),this.displayState=void 0}Un.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var zn=Un,Vn={"":!0,up:!0};function Hn(t){return"number"==typeof t&&0<=t&&t<=100}var Gn=function(){var t=100,e=3,n=0,r=100,i=0,a=100,o="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!Hn(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return e},set:function(t){if("number"!=typeof t)throw new TypeError("Lines must be set to a number.");e=t}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(t){if(!Hn(t))throw new Error("RegionAnchorX must be between 0 and 100.");r=t}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(t){if(!Hn(t))throw new Error("RegionAnchorY must be between 0 and 100.");n=t}},viewportAnchorY:{enumerable:!0,get:function(){return a},set:function(t){if(!Hn(t))throw new Error("ViewportAnchorY must be between 0 and 100.");a=t}},viewportAnchorX:{enumerable:!0,get:function(){return i},set:function(t){if(!Hn(t))throw new Error("ViewportAnchorX must be between 0 and 100.");i=t}},scroll:{enumerable:!0,get:function(){return o},set:function(t){var e,n="string"==typeof(e=t)&&!!Vn[e.toLowerCase()]&&e.toLowerCase();if(!1===n)throw new SyntaxError("An invalid or illegal string was specified.");o=n}}})},Wn=Ye(function(e){var n=e.exports={WebVTT:Rn,VTTCue:zn,VTTRegion:Gn};t.vttjs=n,t.WebVTT=n.WebVTT;var r=n.VTTCue,i=n.VTTRegion,a=t.VTTCue,o=t.VTTRegion;n.shim=function(){t.VTTCue=r,t.VTTRegion=i},n.restore=function(){t.VTTCue=a,t.VTTRegion=o},t.VTTCue||n.shim()}),qn=function(n){function i(t,e){var r;return void 0===t&&(t={}),void 0===e&&(e=function(){}),t.reportTouchActivity=!1,(r=n.call(this,null,t,e)||this).hasStarted_=!1,r.on("playing",function(){this.hasStarted_=!0}),r.on("loadstart",function(){this.hasStarted_=!1}),mn.names.forEach(function(e){var n=mn[e];t&&t[n.getterName]&&(r[n.privateName]=t[n.getterName])}),r.featuresProgressEvents||r.manualProgressOn(),r.featuresTimeupdateEvents||r.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(e){!1===t["native"+e+"Tracks"]&&(r["featuresNative"+e+"Tracks"]=!1)}),!1===t.nativeCaptions||!1===t.nativeTextTracks?r.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(r.featuresNativeTextTracks=!0),r.featuresNativeTextTracks||r.emulateTextTracks(),r.autoRemoteTextTracks_=new mn.text.ListClass,r.initTrackListeners(),t.nativeControlsForTouch||r.emitTapEvents(),r.constructor&&(r.name_=r.constructor.name||"Unknown Tech"),r}r(i,n);var a=i.prototype;return a.triggerSourceset=function(t){var e=this;this.isReady_||this.one("ready",function(){return e.setTimeout(function(){return e.triggerSourceset(t)},1)}),this.trigger({src:t,type:"sourceset"})},a.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},a.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},a.trackProgress=function(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(wt(this,function(){var t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),1===(this.bufferedPercent_=t)&&this.stopTrackingProgress()}),500)},a.onDurationChange=function(t){this.duration_=this.duration()},a.buffered=function(){return he(0,0)},a.bufferedPercent=function(){return fe(this.buffered(),this.duration_)},a.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},a.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},a.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},a.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},a.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},a.dispose=function(){this.clearTracks(gn.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),n.prototype.dispose.call(this)},a.clearTracks=function(t){var e=this;(t=[].concat(t)).forEach(function(t){for(var n=e[t+"Tracks"]()||[],r=n.length;r--;){var i=n[r];"text"===t&&e.removeRemoteTextTrack(i),n.removeTrack(i)}})},a.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],e=t.length;e--;)this.removeRemoteTextTrack(t[e])},a.reset=function(){},a.error=function(t){return void 0!==t&&(this.error_=new _e(t),this.trigger("error")),this.error_},a.played=function(){return this.hasStarted_?he(0,0):he()},a.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},a.initTrackListeners=function(){var t=this;gn.names.forEach(function(e){var n=function(){t.trigger(e+"trackchange")},r=t[gn[e].getterName]();r.addEventListener("removetrack",n),r.addEventListener("addtrack",n),t.on("dispose",function(){r.removeEventListener("removetrack",n),r.removeEventListener("addtrack",n)})})},a.addWebVttScript_=function(){var n=this;if(!t.WebVTT)if(e.body.contains(this.el())){if(!this.options_["vtt.js"]&&m(Wn)&&0<Object.keys(Wn).length)return void this.trigger("vttjsloaded");var r=e.createElement("script");r.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",r.onload=function(){n.trigger("vttjsloaded")},r.onerror=function(){n.trigger("vttjserror")},this.on("dispose",function(){r.onload=null,r.onerror=null}),t.WebVTT=!0,this.el().parentNode.appendChild(r)}else this.ready(this.addWebVttScript_)},a.emulateTextTracks=function(){var t=this,e=this.textTracks(),n=this.remoteTextTracks(),r=function(t){return e.addTrack(t.track)},i=function(t){return e.removeTrack(t.track)};n.on("addtrack",r),n.on("removetrack",i),this.addWebVttScript_();var a=function(){return t.trigger("texttrackchange")},o=function(){a();for(var t=0;t<e.length;t++){var n=e[t];n.removeEventListener("cuechange",a),"showing"===n.mode&&n.addEventListener("cuechange",a)}};o(),e.addEventListener("change",o),e.addEventListener("addtrack",o),e.addEventListener("removetrack",o),this.on("dispose",function(){n.off("addtrack",r),n.off("removetrack",i),e.removeEventListener("change",o),e.removeEventListener("addtrack",o),e.removeEventListener("removetrack",o);for(var t=0;t<e.length;t++)e[t].removeEventListener("cuechange",a)})},a.addTextTrack=function(t,e,n){if(!t)throw new Error("TextTrack kind is required but was not provided");return function(t,e,n,r,i){void 0===i&&(i={});var a=t.textTracks();i.kind=e,n&&(i.label=n),r&&(i.language=r),i.tech=t;var o=new mn.text.TrackClass(i);return a.addTrack(o),o}(this,t,e,n)},a.createRemoteTextTrack=function(t){var e=Nt(t,{tech:this});return new vn.remoteTextEl.TrackClass(e)},a.addRemoteTextTrack=function(t,e){var n=this;void 0===t&&(t={});var r=this.createRemoteTextTrack(t);return!0!==e&&!1!==e&&(l.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),e=!0),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),!0!==e&&this.ready(function(){return n.autoRemoteTextTracks_.addTrack(r.track)}),r},a.removeRemoteTextTrack=function(t){var e=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(e),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},a.getVideoPlaybackQuality=function(){return{}},a.setPoster=function(){},a.playsinline=function(){},a.setPlaysinline=function(){},a.overrideNativeAudioTracks=function(){},a.overrideNativeVideoTracks=function(){},a.canPlayType=function(){return""},i.canPlayType=function(){return""},i.canPlaySource=function(t,e){return i.canPlayType(t.type)},i.isTech=function(t){return t.prototype instanceof i||t instanceof i||t===i},i.registerTech=function(t,e){if(i.techs_||(i.techs_={}),!i.isTech(e))throw new Error("Tech "+t+" must be a Tech");if(!i.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!i.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=Rt(t),i.techs_[t]=e,"Tech"!==t&&i.defaultTechOrder_.push(t),e},i.getTech=function(e){if(e)return e=Rt(e),i.techs_&&i.techs_[e]?i.techs_[e]:t&&t.videojs&&t.videojs[e]?(l.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),t.videojs[e]):void 0},i}(Bt);mn.names.forEach(function(t){var e=mn[t];qn.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}}),qn.prototype.featuresVolumeControl=!0,qn.prototype.featuresMuteControl=!0,qn.prototype.featuresFullscreenResize=!1,qn.prototype.featuresPlaybackRate=!1,qn.prototype.featuresProgressEvents=!1,qn.prototype.featuresSourceset=!1,qn.prototype.featuresTimeupdateEvents=!1,qn.prototype.featuresNativeTextTracks=!1,qn.withSourceHandlers=function(t){t.registerSourceHandler=function(e,n){var r=t.sourceHandlers;r||(r=t.sourceHandlers=[]),void 0===n&&(n=r.length),r.splice(n,0,e)},t.canPlayType=function(e){for(var n,r=t.sourceHandlers||[],i=0;i<r.length;i++)if(n=r[i].canPlayType(e))return n;return""},t.selectSourceHandler=function(e,n){for(var r=t.sourceHandlers||[],i=0;i<r.length;i++)if(r[i].canHandleSource(e,n))return r[i];return null},t.canPlaySource=function(e,n){var r=t.selectSourceHandler(e,n);return r?r.canHandleSource(e,n):""},["seekable","seeking","duration"].forEach(function(t){var e=this[t];"function"==typeof e&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):e.apply(this,arguments)})},t.prototype),t.prototype.setSource=function(e){var n=t.selectSourceHandler(e,this.options_);n||(t.nativeSourceHandler?n=t.nativeSourceHandler:l.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),n!==t.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=n.handleSource(e,this,this.options_),this.on("dispose",this.disposeSourceHandler)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Bt.registerComponent("Tech",qn),qn.registerTech("Tech",qn),qn.defaultTechOrder_=[];var Yn={},Xn={},$n={};function Zn(t,e,n,r){void 0===r&&(r=null);var i="call"+Rt(n),a=t.reduce(tr(i),r),o=a===$n,s=o?null:e[n](a);return function(t,e,n,r){for(var i=t.length-1;0<=i;i--){var a=t[i];a[e]&&a[e](r,n)}}(t,n,s,o),s}var Qn={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},Kn={setCurrentTime:1},Jn={play:1,pause:1};function tr(t){return function(e,n){return e===$n?$n:n[t]?n[t](e):e}}var er={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"},nr=function(t){void 0===t&&(t="");var e=Ve(t);return er[e.toLowerCase()]||""};function rr(t){var e=nr(t.src);return!t.type&&e&&(t.type=e),t}var ir=function(t){function e(e,n,r){var i,a=Nt({createEl:!1},n);if(i=t.call(this,e,a,r)||this,n.playerOptions.sources&&0!==n.playerOptions.sources.length)e.src(n.playerOptions.sources);else for(var o=0,s=n.playerOptions.techOrder;o<s.length;o++){var u=Rt(s[o]),l=qn.getTech(u);if(u||(l=Bt.getComponent(u)),l&&l.isSupported()){e.loadTech_(u);break}}return i}return r(e,t),e}(Bt);Bt.registerComponent("MediaLoader",ir);var ar=function(t){function n(e,n){var r;return(r=t.call(this,e,n)||this).emitTapEvents(),r.enable(),r}r(n,t);var i=n.prototype;return i.createEl=function(e,n,r){void 0===e&&(e="div"),void 0===n&&(n={}),void 0===r&&(r={}),n=g({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},n),"button"===e&&l.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),r=g({role:"button"},r),this.tabIndex_=n.tabIndex;var i=t.prototype.createEl.call(this,e,n,r);return this.createControlTextEl(i),i},i.dispose=function(){this.controlTextEl_=null,t.prototype.dispose.call(this)},i.createControlTextEl=function(t){return this.controlTextEl_=M("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},i.controlText=function(t,e){if(void 0===e&&(e=this.el()),void 0===t)return this.controlText_||"Need Text";var n=this.localize(t);this.controlText_=t,k(this.controlTextEl_,n),this.nonIconControl||e.setAttribute("title",n)},i.buildCSSClass=function(){return"vjs-control vjs-button "+t.prototype.buildCSSClass.call(this)},i.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))},i.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off(["tap","click"],this.handleClick),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur)},i.handleClick=function(t){},i.handleFocus=function(t){ct(e,"keydown",wt(this,this.handleKeyPress))},i.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.trigger("click")):t.prototype.handleKeyPress&&t.prototype.handleKeyPress.call(this,e)},i.handleBlur=function(t){ht(e,"keydown",wt(this,this.handleKeyPress))},n}(Bt);Bt.registerComponent("ClickableComponent",ar);var or=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).update(),e.on("posterchange",wt(o(o(r)),r.update)),r}r(e,t);var n=e.prototype;return n.dispose=function(){this.player().off("posterchange",this.update),t.prototype.dispose.call(this)},n.createEl=function(){return M("div",{className:"vjs-poster",tabIndex:-1})},n.update=function(t){var e=this.player().poster();this.setSrc(e),e?this.show():this.hide()},n.setSrc=function(t){var e="";t&&(e='url("'+t+'")'),this.el_.style.backgroundImage=e},n.handleClick=function(t){this.player_.controls()&&(this.player_.paused()?we(this.player_.play()):this.player_.pause())},e}(ar);Bt.registerComponent("PosterImage",or);var sr="#222",ur={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function lr(t,e){var n;if(4===t.length)n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else{if(7!==t.length)throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");n=t.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+e+")"}function cr(t,e,n){try{t.style[e]=n}catch(t){return}}var hr=function(e){function n(n,r,i){var a;a=e.call(this,n,r,i)||this;var s=wt(o(o(a)),a.updateDisplay);return n.on("loadstart",wt(o(o(a)),a.toggleDisplay)),n.on("texttrackchange",s),n.on("loadstart",wt(o(o(a)),a.preselectTrack)),n.ready(wt(o(o(a)),function(){if(n.tech_&&n.tech_.featuresNativeTextTracks)this.hide();else{n.on("fullscreenchange",s),n.on("playerresize",s),t.addEventListener("orientationchange",s),n.on("dispose",function(){return t.removeEventListener("orientationchange",s)});for(var e=this.options_.playerOptions.tracks||[],r=0;r<e.length;r++)this.player_.addRemoteTextTrack(e[r],!0);this.preselectTrack()}})),a}r(n,e);var i=n.prototype;return i.preselectTrack=function(){for(var t,e,n,r={captions:1,subtitles:1},i=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,o=0;o<i.length;o++){var s=i[o];a&&a.enabled&&a.language===s.language?s.kind===a.kind?n=s:n||(n=s):a&&!a.enabled?e=t=n=null:s.default&&("descriptions"!==s.kind||t?s.kind in r&&!e&&(e=s):t=s)}n?n.mode="showing":e?e.mode="showing":t&&(t.mode="showing")},i.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},i.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},i.clearDisplay=function(){"function"==typeof t.WebVTT&&t.WebVTT.processCues(t,[],this.el_)},i.updateDisplay=function(){var t=this.player_.textTracks();this.clearDisplay();for(var e=null,n=null,r=t.length;r--;){var i=t[r];"showing"===i.mode&&("descriptions"===i.kind?e=i:n=i)}n?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(n)):e&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(e))},i.updateForTrack=function(e){if("function"==typeof t.WebVTT&&e.activeCues){for(var n=[],r=0;r<e.activeCues.length;r++)n.push(e.activeCues[r]);if(t.WebVTT.processCues(t,n,this.el_),this.player_.textTrackSettings)for(var i=this.player_.textTrackSettings.getValues(),a=n.length;a--;){var o=n[a];if(o){var s=o.displayState;if(i.color&&(s.firstChild.style.color=i.color),i.textOpacity&&cr(s.firstChild,"color",lr(i.color||"#fff",i.textOpacity)),i.backgroundColor&&(s.firstChild.style.backgroundColor=i.backgroundColor),i.backgroundOpacity&&cr(s.firstChild,"backgroundColor",lr(i.backgroundColor||"#000",i.backgroundOpacity)),i.windowColor&&(i.windowOpacity?cr(s,"backgroundColor",lr(i.windowColor,i.windowOpacity)):s.style.backgroundColor=i.windowColor),i.edgeStyle&&("dropshadow"===i.edgeStyle?s.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+sr:"raised"===i.edgeStyle?s.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+sr:"depressed"===i.edgeStyle?s.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+sr:"uniform"===i.edgeStyle&&(s.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+sr)),i.fontPercent&&1!==i.fontPercent){var u=t.parseFloat(s.style.fontSize);s.style.fontSize=u*i.fontPercent+"px",s.style.height="auto",s.style.top="auto",s.style.bottom="2px"}i.fontFamily&&"default"!==i.fontFamily&&("small-caps"===i.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=ur[i.fontFamily])}}}},n}(Bt);Bt.registerComponent("TextTrackDisplay",hr);var fr=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.createEl=function(){var e=this.player_.isAudio(),n=this.localize(e?"Audio Player":"Video Player"),r=M("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[n])}),i=t.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(r),i},e}(Bt);Bt.registerComponent("LoadingSpinner",fr);var dr=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.createEl=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={}),e=g({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},e),n=g({type:"button"},n);var r=Bt.prototype.createEl.call(this,"button",e,n);return this.createControlTextEl(r),r},n.addChild=function(t,e){return void 0===e&&(e={}),l.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead."),Bt.prototype.addChild.call(this,t,e)},n.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyPress=function(e){32!==e.which&&13!==e.which&&t.prototype.handleKeyPress.call(this,e)},e}(ar);Bt.registerComponent("Button",dr);var pr=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).mouseused_=!1,r.on("mousedown",r.handleMouseDown),r}r(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(t){var e=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY)we(e);else{var n=this.player_.getChild("controlBar"),r=n&&n.getChild("playToggle");if(r){var i=function(){return r.focus()};xe(e)?e.then(i,function(){}):this.setTimeout(i,1)}else this.player_.focus()}},n.handleKeyPress=function(e){this.mouseused_=!1,t.prototype.handleKeyPress.call(this,e)},n.handleMouseDown=function(t){this.mouseused_=!0},e}(dr);pr.prototype.controlText_="Play Video",Bt.registerComponent("BigPlayButton",pr);var gr=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).controlText(n&&n.controlText||r.localize("Close")),r}r(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+t.prototype.buildCSSClass.call(this)},n.handleClick=function(t){this.trigger({type:"close",bubbles:!1})},e}(dr);Bt.registerComponent("CloseButton",gr);var vr=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).on(e,"play",r.handlePlay),r.on(e,"pause",r.handlePause),r.on(e,"ended",r.handleEnded),r}r(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+t.prototype.buildCSSClass.call(this)},n.handleClick=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},n.handlePlay=function(t){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},e}(dr);vr.prototype.controlText_="Play",Bt.registerComponent("PlayToggle",vr);var mr=function(t,e){t=t<0?0:t;var n=Math.floor(t%60),r=Math.floor(t/60%60),i=Math.floor(t/3600),a=Math.floor(e/60%60),o=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(i=r=n="-"),(i=0<i||0<o?i+":":"")+(r=((i||10<=a)&&r<10?"0"+r:r)+":")+(n<10?"0"+n:n)},yr=mr;function _r(t,e){return void 0===e&&(e=t),yr(t,e)}var br=function(t){function n(e,n){var r;return(r=t.call(this,e,n)||this).throttledUpdateContent=St(wt(o(o(r)),r.updateContent),25),r.on(e,"timeupdate",r.throttledUpdateContent),r}r(n,t);var i=n.prototype;return i.createEl=function(e){var n=this.buildCSSClass(),r=t.prototype.createEl.call(this,"div",{className:n+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+"\xa0</span>"});return this.contentEl_=M("span",{className:n+"-display"},{"aria-live":"off"}),this.updateTextNode_(),r.appendChild(this.contentEl_),r},i.dispose=function(){this.contentEl_=null,this.textNode_=null,t.prototype.dispose.call(this)},i.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=e.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},i.formatTime_=function(t){return _r(t)},i.updateFormattedTime_=function(t){var e=this.formatTime_(t);e!==this.formattedTime_&&(this.formattedTime_=e,this.requestAnimationFrame(this.updateTextNode_))},i.updateContent=function(t){},n}(Bt);br.prototype.labelText_="Time",br.prototype.controlText_="Time",Bt.registerComponent("TimeDisplay",br);var xr=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).on(e,"ended",r.handleEnded),r}r(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(t){var e=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(e)},n.handleEnded=function(t){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},e}(br);xr.prototype.labelText_="Current Time",xr.prototype.controlText_="Current Time",Bt.registerComponent("CurrentTimeDisplay",xr);var wr=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).on(e,"durationchange",r.updateContent),r.on(e,"loadedmetadata",r.throttledUpdateContent),r}r(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(t){var e=this.player_.duration();e&&this.duration_!==e&&(this.duration_=e,this.updateFormattedTime_(e))},e}(br);wr.prototype.labelText_="Duration",wr.prototype.controlText_="Duration",Bt.registerComponent("DurationDisplay",wr);var Sr=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},e}(Bt);Bt.registerComponent("TimeDivider",Sr);var Tr=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).on(e,"durationchange",r.throttledUpdateContent),r.on(e,"ended",r.handleEnded),r}r(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.formatTime_=function(e){return"-"+t.prototype.formatTime_.call(this,e)},n.updateContent=function(t){this.player_.duration()&&this.updateFormattedTime_(this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime())},n.handleEnded=function(t){this.player_.duration()&&this.updateFormattedTime_(0)},e}(br);Tr.prototype.labelText_="Remaining Time",Tr.prototype.controlText_="Remaining Time",Bt.registerComponent("RemainingTimeDisplay",Tr);var Or=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).updateShowing(),r.on(r.player(),"durationchange",r.updateShowing),r}r(e,t);var n=e.prototype;return n.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=M("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"\xa0</span>"+this.localize("LIVE")},{"aria-live":"off"}),e.appendChild(this.contentEl_),e},n.dispose=function(){this.contentEl_=null,t.prototype.dispose.call(this)},n.updateShowing=function(t){this.player().duration()===1/0?this.show():this.hide()},e}(Bt);Bt.registerComponent("LiveDisplay",Or);var Mr=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).bar=r.getChild(r.options_.barName),r.vertical(!!r.options_.vertical),r.enable(),r}r(e,t);var n=e.prototype;return n.enabled=function(){return this.enabled_},n.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},n.disable=function(){if(this.enabled()){var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("focus",this.handleFocus),this.off("blur",this.handleBlur),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},n.createEl=function(e,n,r){return void 0===n&&(n={}),void 0===r&&(r={}),n.className=n.className+" vjs-slider",n=g({tabIndex:0},n),r=g({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},r),t.prototype.createEl.call(this,e,n,r)},n.handleMouseDown=function(t){var e=this.bar.el_.ownerDocument;"mousedown"===t.type&&t.preventDefault(),"touchstart"!==t.type||ne||t.preventDefault(),B(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(e,"mousemove",this.handleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchmove",this.handleMouseMove),this.on(e,"touchend",this.handleMouseUp),this.handleMouseMove(t)},n.handleMouseMove=function(t){},n.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;F(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchmove",this.handleMouseMove),this.off(t,"touchend",this.handleMouseUp),this.update()},n.update=function(){if(this.el_){var t=this.getPercent(),e=this.bar;if(e){("number"!=typeof t||t!=t||t<0||t===1/0)&&(t=0);var n=(100*t).toFixed(2)+"%",r=e.el().style;return this.vertical()?r.height=n:r.width=n,t}}},n.calculateDistance=function(t){var e=V(this.el_,t);return this.vertical()?e.y:e.x},n.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},n.handleKeyPress=function(t){37===t.which||40===t.which?(t.preventDefault(),this.stepBack()):38!==t.which&&39!==t.which||(t.preventDefault(),this.stepForward())},n.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},n.handleClick=function(t){t.stopImmediatePropagation(),t.preventDefault()},n.vertical=function(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.addClass(this.vertical_?"vjs-slider-vertical":"vjs-slider-horizontal")},e}(Bt);Bt.registerComponent("Slider",Mr);var kr=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).partEls_=[],r.on(e,"progress",r.update),r}r(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},n.dispose=function(){this.partEls_=null,t.prototype.dispose.call(this)},n.update=function(t){var e=this.player_.buffered(),n=this.player_.duration(),r=this.player_.bufferedEnd(),i=this.partEls_,a=function(t,e){var n=t/e||0;return 100*(1<=n?1:n)+"%"};this.el_.style.width=a(r,n);for(var o=0;o<e.length;o++){var s=e.start(o),u=e.end(o),l=i[o];l||(l=this.el_.appendChild(M()),i[o]=l),l.style.left=a(s,r),l.style.width=a(u-s,r)}for(var c=i.length;c>e.length;c--)this.el_.removeChild(i[c-1]);i.length=e.length},e}(Bt);Bt.registerComponent("LoadProgressBar",kr);var Cr=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"})},n.update=function(t,e,n){var r=U(this.el_),i=U(this.player_.el()),a=t.width*e;if(i&&r){var o=t.left-i.left+a,s=t.width-a+(i.right-t.right),u=r.width/2;o<u?u+=u-o:s<u&&(u=s),u<0?u=0:u>r.width&&(u=r.width),this.el_.style.right="-"+u+"px",k(this.el_,n)}},e}(Bt);Bt.registerComponent("TimeTooltip",Cr);var Er=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})},n.update=function(t,e){var n=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var r=_r(n.player_.scrubbing()?n.player_.getCache().currentTime:n.player_.currentTime(),n.player_.duration()),i=n.getChild("timeTooltip");i&&i.update(t,e,r)})},e}(Bt);Er.prototype.options_={children:[]},$t||Qt||Er.prototype.options_.children.push("timeTooltip"),Bt.registerComponent("PlayProgressBar",Er);var Ar=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).update=St(wt(o(o(r)),r.update),25),r}r(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(t,e){var n=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame(function(){var r=n.player_.duration(),i=_r(e*r,r);n.el_.style.left=t.width*e+"px",n.getChild("timeTooltip").update(t,e,i)})},e}(Bt);Ar.prototype.options_={children:["timeTooltip"]},Bt.registerComponent("MouseTimeDisplay",Ar);var Ir=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).setEventHandlers_(),r}r(e,t);var n=e.prototype;return n.setEventHandlers_=function(){var t=this;this.update=St(wt(this,this.update),30),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.updateInterval=null,this.on(this.player_,["playing"],function(){t.clearInterval(t.updateInterval),t.updateInterval=t.setInterval(function(){t.requestAnimationFrame(function(){t.update()})},30)}),this.on(this.player_,["ended","pause","waiting"],function(){t.clearInterval(t.updateInterval)}),this.on(this.player_,["timeupdate","ended"],this.update)},n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},n.update_=function(t,e){var n=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*e).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[_r(t,n),_r(n,n)],"{1} of {2}")),this.bar.update(U(this.el_),e)},n.update=function(e){var n=t.prototype.update.call(this);return this.update_(this.getCurrentTime_(),n),n},n.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},n.handleEnded=function(t){this.update_(this.player_.duration(),1)},n.getPercent=function(){var t=this.getCurrentTime_()/this.player_.duration();return 1<=t?1:t||0},n.handleMouseDown=function(e){X(e)&&(e.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),t.prototype.handleMouseDown.call(this,e))},n.handleMouseMove=function(t){if(X(t)){var e=this.calculateDistance(t)*this.player_.duration();e===this.player_.duration()&&(e-=.1),this.player_.currentTime(e)}},n.enable=function(){t.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},n.disable=function(){t.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},n.handleMouseUp=function(e){t.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&we(this.player_.play())},n.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},n.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},n.handleAction=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.handleAction(e)):t.prototype.handleKeyPress&&t.prototype.handleKeyPress.call(this,e)},e}(Mr);Ir.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},$t||Qt||Ir.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Ir.prototype.playerEvent="timeupdate",Bt.registerComponent("SeekBar",Ir);var Pr=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).handleMouseMove=St(wt(o(o(r)),r.handleMouseMove),25),r.throttledHandleMouseSeek=St(wt(o(o(r)),r.handleMouseSeek),25),r.enable(),r}r(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(t){var e=this.getChild("seekBar");if(e){var n=e.getChild("mouseTimeDisplay"),r=e.el(),i=U(r),a=V(r,t).x;1<a?a=1:a<0&&(a=0),n&&n.update(i,a)}},n.handleMouseSeek=function(t){var e=this.getChild("seekBar");e&&e.handleMouseMove(t)},n.enabled=function(){return this.enabled_},n.disable=function(){this.children().forEach(function(t){return t.disable&&t.disable()}),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},n.enable=function(){this.children().forEach(function(t){return t.enable&&t.enable()}),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.handleMouseDown=function(t){var e=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(t),this.on(e,"mousemove",this.throttledHandleMouseSeek),this.on(e,"touchmove",this.throttledHandleMouseSeek),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchend",this.handleMouseUp)},n.handleMouseUp=function(t){var e=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseUp(t),this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchend",this.handleMouseUp)},e}(Bt);Pr.prototype.options_={children:["seekBar"]},Bt.registerComponent("ProgressControl",Pr);var Lr=function(t){function n(n,r){var i;return(i=t.call(this,n,r)||this).on(n,"fullscreenchange",i.handleFullscreenChange),!1===e[pe.fullscreenEnabled]&&i.disable(),i}r(n,t);var i=n.prototype;return i.buildCSSClass=function(){return"vjs-fullscreen-control "+t.prototype.buildCSSClass.call(this)},i.handleFullscreenChange=function(t){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},i.handleClick=function(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},n}(dr);Lr.prototype.controlText_="Fullscreen",Bt.registerComponent("FullscreenToggle",Lr);var Dr=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},e}(Bt);Bt.registerComponent("VolumeLevel",Dr);var jr=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).on("slideractive",r.updateLastVolume_),r.on(e,"volumechange",r.updateARIAAttributes),e.ready(function(){return r.updateARIAAttributes()}),r}r(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(e){X(e)&&t.prototype.handleMouseDown.call(this,e)},n.handleMouseMove=function(t){X(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(t){var e=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",e),this.el_.setAttribute("aria-valuetext",e+"%")},n.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},n.updateLastVolume_=function(){var t=this,e=this.player_.volume();this.one("sliderinactive",function(){0===t.player_.volume()&&t.player_.lastVolume_(e)})},e}(Mr);jr.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},jr.prototype.playerEvent="volumechange",Bt.registerComponent("VolumeBar",jr);var Rr=function(t){function e(e,n){var r,i,a;return void 0===n&&(n={}),n.vertical=n.vertical||!1,(void 0===n.volumeBar||m(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),r=t.call(this,e,n)||this,i=o(o(r)),(a=e).tech_&&!a.tech_.featuresVolumeControl&&i.addClass("vjs-hidden"),i.on(a,"loadstart",function(){a.tech_.featuresVolumeControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")}),r.throttledHandleMouseMove=St(wt(o(o(r)),r.handleMouseMove),25),r.on("mousedown",r.handleMouseDown),r.on("touchstart",r.handleMouseDown),r.on(r.volumeBar,["focus","slideractive"],function(){r.volumeBar.addClass("vjs-slider-active"),r.addClass("vjs-slider-active"),r.trigger("slideractive")}),r.on(r.volumeBar,["blur","sliderinactive"],function(){r.volumeBar.removeClass("vjs-slider-active"),r.removeClass("vjs-slider-active"),r.trigger("sliderinactive")}),r}r(e,t);var n=e.prototype;return n.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},n.handleMouseDown=function(t){var e=this.el_.ownerDocument;this.on(e,"mousemove",this.throttledHandleMouseMove),this.on(e,"touchmove",this.throttledHandleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchend",this.handleMouseUp)},n.handleMouseUp=function(t){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseMove),this.off(e,"touchmove",this.throttledHandleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchend",this.handleMouseUp)},n.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},e}(Bt);Rr.prototype.options_={children:["volumeBar"]},Bt.registerComponent("VolumeControl",Rr);var Nr=function(t){function e(e,n){var r,i,a;return r=t.call(this,e,n)||this,i=o(o(r)),(a=e).tech_&&!a.tech_.featuresMuteControl&&i.addClass("vjs-hidden"),i.on(a,"loadstart",function(){a.tech_.featuresMuteControl?i.removeClass("vjs-hidden"):i.addClass("vjs-hidden")}),r.on(e,["loadstart","volumechange"],r.update),r}r(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+t.prototype.buildCSSClass.call(this)},n.handleClick=function(t){var e=this.player_.volume(),n=this.player_.lastVolume_();0===e?(this.player_.volume(n<.1?.1:n),this.player_.muted(!1)):this.player_.muted(!this.player_.muted())},n.update=function(t){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var t=this.player_.volume(),e=3;$t&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?e=0:t<.33?e=1:t<.67&&(e=2);for(var n=0;n<4;n++)I(this.el_,"vjs-vol-"+n);A(this.el_,"vjs-vol-"+e)},n.updateControlText_=function(){var t=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)},e}(dr);Nr.prototype.controlText_="Mute",Bt.registerComponent("MuteToggle",Nr);var Br=function(t){function e(e,n){var r;return void 0===n&&(n={}),n.inline=void 0===n.inline||n.inline,(void 0===n.volumeControl||m(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),(r=t.call(this,e,n)||this).on(e,["loadstart"],r.volumePanelState_),r.on(r.volumeControl,["slideractive"],r.sliderActive_),r.on(r.volumeControl,["sliderinactive"],r.sliderInactive_),r}r(e,t);var n=e.prototype;return n.sliderActive_=function(){this.addClass("vjs-slider-active")},n.sliderInactive_=function(){this.removeClass("vjs-slider-active")},n.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},n.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},e}(Bt);Br.prototype.options_={children:["muteToggle","volumeControl"]},Bt.registerComponent("VolumePanel",Br);var Fr=function(t){function e(e,n){var r;return r=t.call(this,e,n)||this,n&&(r.menuButton_=n.menuButton),r.focusedChild_=-1,r.on("keydown",r.handleKeyPress),r}r(e,t);var n=e.prototype;return n.addItem=function(t){this.addChild(t),t.on("click",wt(this,function(e){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==t.name()&&this.menuButton_.focus())}))},n.createEl=function(){this.contentEl_=M(this.options_.contentElType||"ul",{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var e=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return e.appendChild(this.contentEl_),ct(e,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),e},n.dispose=function(){this.contentEl_=null,t.prototype.dispose.call(this)},n.handleKeyPress=function(t){37===t.which||40===t.which?(t.preventDefault(),this.stepForward()):38!==t.which&&39!==t.which||(t.preventDefault(),this.stepBack())},n.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},n.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},n.focus=function(t){void 0===t&&(t=0);var e=this.children().slice();e.length&&e[0].className&&/vjs-menu-title/.test(e[0].className)&&e.shift(),0<e.length&&(t<0?t=0:t>=e.length&&(t=e.length-1),e[this.focusedChild_=t].el_.focus())},e}(Bt);Bt.registerComponent("Menu",Fr);var Ur=function(t){function n(e,n){var r;void 0===n&&(n={}),(r=t.call(this,e,n)||this).menuButton_=new dr(e,n),r.menuButton_.controlText(r.controlText_),r.menuButton_.el_.setAttribute("aria-haspopup","true");var i=dr.prototype.buildCSSClass();return r.menuButton_.el_.className=r.buildCSSClass()+" "+i,r.menuButton_.removeClass("vjs-control"),r.addChild(r.menuButton_),r.update(),r.enabled_=!0,r.on(r.menuButton_,"tap",r.handleClick),r.on(r.menuButton_,"click",r.handleClick),r.on(r.menuButton_,"focus",r.handleFocus),r.on(r.menuButton_,"blur",r.handleBlur),r.on("keydown",r.handleSubmenuKeyPress),r}r(n,t);var i=n.prototype;return i.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},i.createMenu=function(){var t=new Fr(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var e=M("li",{className:"vjs-menu-title",innerHTML:Rt(this.options_.title),tabIndex:-1});this.hideThreshold_+=1,t.children_.unshift(e),C(e,t.contentEl())}if(this.items=this.createItems(),this.items)for(var n=0;n<this.items.length;n++)t.addItem(this.items[n]);return t},i.createItems=function(){},i.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},i.buildWrapperCSSClass=function(){var e="vjs-menu-button";return"vjs-menu-button "+(e+=!0===this.options_.inline?"-inline":"-popup")+" "+dr.prototype.buildCSSClass()+" "+t.prototype.buildCSSClass.call(this)},i.buildCSSClass=function(){var e="vjs-menu-button";return"vjs-menu-button "+(e+=!0===this.options_.inline?"-inline":"-popup")+" "+t.prototype.buildCSSClass.call(this)},i.controlText=function(t,e){return void 0===e&&(e=this.menuButton_.el()),this.menuButton_.controlText(t,e)},i.handleClick=function(t){this.one(this.menu.contentEl(),"mouseleave",wt(this,function(t){this.unpressButton(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},i.focus=function(){this.menuButton_.focus()},i.blur=function(){this.menuButton_.blur()},i.handleFocus=function(){ct(e,"keydown",wt(this,this.handleKeyPress))},i.handleBlur=function(){ht(e,"keydown",wt(this,this.handleKeyPress))},i.handleKeyPress=function(t){27===t.which||9===t.which?(this.buttonPressed_&&this.unpressButton(),9!==t.which&&(t.preventDefault(),this.menuButton_.el_.focus())):38!==t.which&&40!==t.which||this.buttonPressed_||(this.pressButton(),t.preventDefault())},i.handleSubmenuKeyPress=function(t){27!==t.which&&9!==t.which||(this.buttonPressed_&&this.unpressButton(),9!==t.which&&(t.preventDefault(),this.menuButton_.el_.focus()))},i.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),$t&&T())return;this.menu.focus()}},i.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},i.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},i.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},n}(Bt);Bt.registerComponent("MenuButton",Ur);var zr=function(t){function e(e,n){var r,i=n.tracks;if((r=t.call(this,e,n)||this).items.length<=1&&r.hide(),!i)return o(r);var a=wt(o(o(r)),r.update);return i.addEventListener("removetrack",a),i.addEventListener("addtrack",a),r.player_.on("ready",a),r.player_.on("dispose",function(){i.removeEventListener("removetrack",a),i.removeEventListener("addtrack",a)}),r}return r(e,t),e}(Ur);Bt.registerComponent("TrackButton",zr);var Vr=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).selectable=n.selectable,r.isSelected_=n.selected||!1,r.multiSelectable=n.multiSelectable,r.selected(r.isSelected_),r.el_.setAttribute("role",r.selectable?r.multiSelectable?"menuitemcheckbox":"menuitemradio":"menuitem"),r}r(e,t);var n=e.prototype;return n.createEl=function(e,n,r){return this.nonIconControl=!0,t.prototype.createEl.call(this,"li",g({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},n),r)},n.handleClick=function(t){this.selected(!0)},n.selected=function(t){this.selectable&&(this.isSelected_=t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),!1))},e}(ar);Bt.registerComponent("MenuItem",Vr);var Hr=function(n){function i(r,i){var a,s=i.track,u=r.textTracks();i.label=s.label||s.language||"Unknown",i.selected="showing"===s.mode,(a=n.call(this,r,i)||this).track=s;var l,c=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];a.handleTracksChange.apply(o(o(a)),e)},h=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];a.handleSelectedLanguageChange.apply(o(o(a)),e)};return r.on(["loadstart","texttrackchange"],c),u.addEventListener("change",c),u.addEventListener("selectedlanguagechange",h),a.on("dispose",function(){r.off(["loadstart","texttrackchange"],c),u.removeEventListener("change",c),u.removeEventListener("selectedlanguagechange",h)}),void 0===u.onchange&&a.on(["tap","click"],function(){if("object"!=typeof t.Event)try{l=new t.Event("change")}catch(t){}l||(l=e.createEvent("Event")).initEvent("change",!0,!0),u.dispatchEvent(l)}),a.handleTracksChange(),a}r(i,n);var a=i.prototype;return a.handleClick=function(t){var e=this.track.kind,r=this.track.kinds,i=this.player_.textTracks();if(r||(r=[e]),n.prototype.handleClick.call(this,t),i)for(var a=0;a<i.length;a++){var o=i[a];o===this.track&&-1<r.indexOf(o.kind)?"showing"!==o.mode&&(o.mode="showing"):"disabled"!==o.mode&&(o.mode="disabled")}},a.handleTracksChange=function(t){var e="showing"===this.track.mode;e!==this.isSelected_&&this.selected(e)},a.handleSelectedLanguageChange=function(t){if("showing"===this.track.mode){var e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},a.dispose=function(){this.track=null,n.prototype.dispose.call(this)},i}(Vr);Bt.registerComponent("TextTrackMenuItem",Hr);var Gr=function(t){function e(e,n){return n.track={player:e,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.track.label=n.label?n.label:n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,t.call(this,e,n)||this}r(e,t);var n=e.prototype;return n.handleTracksChange=function(t){for(var e=this.player().textTracks(),n=!0,r=0,i=e.length;r<i;r++){var a=e[r];if(-1<this.options_.kinds.indexOf(a.kind)&&"showing"===a.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},n.handleSelectedLanguageChange=function(t){for(var e=this.player().textTracks(),n=!0,r=0,i=e.length;r<i;r++){var a=e[r];if(-1<["captions","descriptions","subtitles"].indexOf(a.kind)&&"showing"===a.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(Hr);Bt.registerComponent("OffTextTrackMenuItem",Gr);var Wr=function(t){function e(e,n){return void 0===n&&(n={}),n.tracks=e.textTracks(),t.call(this,e,n)||this}return r(e,t),e.prototype.createItems=function(t,e){var n;void 0===t&&(t=[]),void 0===e&&(e=Hr),this.label_&&(n=this.label_+" off"),t.push(new Gr(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var r=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var i=0;i<r.length;i++){var a=r[i];if(-1<this.kinds_.indexOf(a.kind)){var o=new e(this.player_,{track:a,selectable:!0,multiSelectable:!1});o.addClass("vjs-"+a.kind+"-menu-item"),t.push(o)}}return t},e}(zr);Bt.registerComponent("TextTrackButton",Wr);var qr=function(t){function e(e,n){var r,i=n.track,a=n.cue,s=e.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=a.text,n.selected=a.startTime<=s&&s<a.endTime,(r=t.call(this,e,n)||this).track=i,r.cue=a,i.addEventListener("cuechange",wt(o(o(r)),r.update)),r}r(e,t);var n=e.prototype;return n.handleClick=function(e){t.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},n.update=function(t){var e=this.cue,n=this.player_.currentTime();this.selected(e.startTime<=n&&n<e.endTime)},e}(Vr);Bt.registerComponent("ChaptersTrackMenuItem",qr);var Yr=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}r(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildWrapperCSSClass.call(this)},n.update=function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack()),t.prototype.update.call(this)},n.setTrack=function(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},n.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],e=t.length-1;0<=e;e--){var n=t[e];if(n.kind===this.kind_)return n}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Rt(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),t.prototype.createMenu.call(this)},n.createItems=function(){var t=[];if(!this.track_)return t;var e=this.track_.cues;if(!e)return t;for(var n=0,r=e.length;n<r;n++){var i=new qr(this.player_,{track:this.track_,cue:e[n]});t.push(i)}return t},e}(Wr);Yr.prototype.kind_="chapters",Yr.prototype.controlText_="Chapters",Bt.registerComponent("ChaptersButton",Yr);var Xr=function(t){function e(e,n,r){var i;i=t.call(this,e,n,r)||this;var a=e.textTracks(),s=wt(o(o(i)),i.handleTracksChange);return a.addEventListener("change",s),i.on("dispose",function(){a.removeEventListener("change",s)}),i}r(e,t);var n=e.prototype;return n.handleTracksChange=function(t){for(var e=this.player().textTracks(),n=!1,r=0,i=e.length;r<i;r++){var a=e[r];if(a.kind!==this.kind_&&"showing"===a.mode){n=!0;break}}n?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(Wr);Xr.prototype.kind_="descriptions",Xr.prototype.controlText_="Descriptions",Bt.registerComponent("DescriptionsButton",Xr);var $r=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}r(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(Wr);$r.prototype.kind_="subtitles",$r.prototype.controlText_="Subtitles",Bt.registerComponent("SubtitlesButton",$r);var Zr=function(t){function e(e,n){var r;return n.track={player:e,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",(r=t.call(this,e,n)||this).addClass("vjs-texttrack-settings"),r.controlText(", opens "+n.kind+" settings dialog"),r}return r(e,t),e.prototype.handleClick=function(t){this.player().getChild("textTrackSettings").open()},e}(Hr);Bt.registerComponent("CaptionSettingsMenuItem",Zr);var Qr=function(t){function e(e,n,r){return t.call(this,e,n,r)||this}r(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+t.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Zr(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,e)},e}(Wr);Qr.prototype.kind_="captions",Qr.prototype.controlText_="Captions",Bt.registerComponent("CaptionsButton",Qr);var Kr=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.createEl=function(e,n,r){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),t.prototype.createEl.call(this,e,g({innerHTML:i+="</span>"},n),r)},e}(Hr);Bt.registerComponent("SubsCapsMenuItem",Kr);var Jr=function(t){function e(e,n){var r;return void 0===n&&(n={}),(r=t.call(this,e,n)||this).label_="subtitles",-1<["en","en-us","en-ca","fr-ca"].indexOf(r.player_.language_)&&(r.label_="captions"),r.menuButton_.controlText(Rt(r.label_)),r}r(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Zr(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,e,Kr)},e}(Wr);Jr.prototype.kinds_=["captions","subtitles"],Jr.prototype.controlText_="Subtitles",Bt.registerComponent("SubsCapsButton",Jr);var ti=function(t){function e(e,n){var r,i=n.track,a=e.audioTracks();n.label=i.label||i.language||"Unknown",n.selected=i.enabled,(r=t.call(this,e,n)||this).track=i,r.addClass("vjs-"+i.kind+"-menu-item");var s=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r.handleTracksChange.apply(o(o(r)),e)};return a.addEventListener("change",s),r.on("dispose",function(){a.removeEventListener("change",s)}),r}r(e,t);var n=e.prototype;return n.createEl=function(e,n,r){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),t.prototype.createEl.call(this,e,g({innerHTML:i+="</span>"},n),r)},n.handleClick=function(e){var n=this.player_.audioTracks();t.prototype.handleClick.call(this,e);for(var r=0;r<n.length;r++){var i=n[r];i.enabled=i===this.track}},n.handleTracksChange=function(t){this.selected(this.track.enabled)},e}(Vr);Bt.registerComponent("AudioTrackMenuItem",ti);var ei=function(t){function e(e,n){return void 0===n&&(n={}),n.tracks=e.audioTracks(),t.call(this,e,n)||this}r(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+t.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(t){void 0===t&&(t=[]),this.hideThreshold_=1;for(var e=this.player_.audioTracks(),n=0;n<e.length;n++)t.push(new ti(this.player_,{track:e[n],selectable:!0,multiSelectable:!1}));return t},e}(zr);ei.prototype.controlText_="Audio Track",Bt.registerComponent("AudioTrackButton",ei);var ni=function(t){function e(e,n){var r,i=n.rate,a=parseFloat(i,10);return n.label=i,n.selected=1===a,n.selectable=!0,n.multiSelectable=!1,(r=t.call(this,e,n)||this).label=i,r.rate=a,r.on(e,"ratechange",r.update),r}r(e,t);var n=e.prototype;return n.handleClick=function(e){t.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(t){this.selected(this.player().playbackRate()===this.rate)},e}(Vr);ni.prototype.contentElType="button",Bt.registerComponent("PlaybackRateMenuItem",ni);var ri=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).updateVisibility(),r.updateLabel(),r.on(e,"loadstart",r.updateVisibility),r.on(e,"ratechange",r.updateLabel),r}r(e,t);var n=e.prototype;return n.createEl=function(){var e=t.prototype.createEl.call(this);return this.labelEl_=M("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),e.appendChild(this.labelEl_),e},n.dispose=function(){this.labelEl_=null,t.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildWrapperCSSClass.call(this)},n.createMenu=function(){var t=new Fr(this.player()),e=this.playbackRates();if(e)for(var n=e.length-1;0<=n;n--)t.addChild(new ni(this.player(),{rate:e[n]+"x"}));return t},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(t){for(var e=this.player().playbackRate(),n=this.playbackRates(),r=n[0],i=0;i<n.length;i++)if(n[i]>e){r=n[i];break}this.player().playbackRate(r)},n.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length},n.updateVisibility=function(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(t){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},e}(Ur);ri.prototype.controlText_="Playback Rate",Bt.registerComponent("PlaybackRateMenuButton",ri);var ii=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},e}(Bt);Bt.registerComponent("Spacer",ii);var ai=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},n.createEl=function(){var e=t.prototype.createEl.call(this,{className:this.buildCSSClass()});return e.innerHTML="\xa0",e},e}(ii);Bt.registerComponent("CustomControlSpacer",ai);var oi=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(Bt);oi.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},Bt.registerComponent("ControlBar",oi);var si=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).on(e,"error",r.open),r}r(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+t.prototype.buildCSSClass.call(this)},n.content=function(){var t=this.player().error();return t?this.localize(t.message):""},e}(Oe);si.prototype.options_=Nt(Oe.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Bt.registerComponent("ErrorDisplay",si);var ui="vjs-text-track-settings",li=["#000","Black"],ci=["#00F","Blue"],hi=["#0FF","Cyan"],fi=["#0F0","Green"],di=["#F0F","Magenta"],pi=["#F00","Red"],gi=["#FFF","White"],vi=["#FF0","Yellow"],mi=["1","Opaque"],yi=["0.5","Semi-Transparent"],_i=["0","Transparent"],bi={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[li,gi,pi,fi,ci,vi,di,hi]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[mi,yi,_i]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[gi,li,pi,fi,ci,vi,di,hi]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(t){return"1.00"===t?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[mi,yi]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[_i,yi,mi]}};function xi(t,e){if(e&&(t=e(t)),t&&"none"!==t)return t}bi.windowColor.options=bi.backgroundColor.options;var wi=function(n){function i(t,e){var r;return e.temporary=!1,(r=n.call(this,t,e)||this).updateDisplay=wt(o(o(r)),r.updateDisplay),r.fill(),r.hasBeenOpened_=r.hasBeenFilled_=!0,r.endDialog=M("p",{className:"vjs-control-text",textContent:r.localize("End of dialog window.")}),r.el().appendChild(r.endDialog),r.setDefaults(),void 0===e.persistTextTrackSettings&&(r.options_.persistTextTrackSettings=r.options_.playerOptions.persistTextTrackSettings),r.on(r.$(".vjs-done-button"),"click",function(){r.saveSettings(),r.close()}),r.on(r.$(".vjs-default-button"),"click",function(){r.setDefaults(),r.updateDisplay()}),p(bi,function(t){r.on(r.$(t.selector),"change",r.updateDisplay)}),r.options_.persistTextTrackSettings&&r.restoreSettings(),r}r(i,n);var a=i.prototype;return a.dispose=function(){this.endDialog=null,n.prototype.dispose.call(this)},a.createElSelect_=function(t,e,n){var r=this;void 0===e&&(e=""),void 0===n&&(n="label");var i=bi[t],a=i.id.replace("%s",this.id_),o=[e,a].join(" ").trim();return["<"+n+' id="'+a+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(i.label),"</"+n+">",'<select aria-labelledby="'+o+'">'].concat(i.options.map(function(t){var e=a+"-"+t[1].replace(/\W+/g,"");return['<option id="'+e+'" value="'+t[0]+'" ','aria-labelledby="'+o+" "+e+'">',r.localize(t[1]),"</option>"].join("")})).concat("</select>").join("")},a.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},a.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},a.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},a.createElColors_=function(){return M("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},a.createElFont_=function(){return M("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},a.createElControls_=function(){var t=this.localize("restore all settings to the default values");return M("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},a.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},a.label=function(){return this.localize("Caption Settings Dialog")},a.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},a.buildCSSClass=function(){return n.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},a.getValues=function(){var t,e,n,r=this;return e=function(t,e,n){var i,a=xi((i=r.$(e.selector)).options[i.options.selectedIndex].value,e.parser);return void 0!==a&&(t[n]=a),t},void 0===(n={})&&(n=0),d(t=bi).reduce(function(n,r){return e(n,t[r],r)},n)},a.setValues=function(t){var e=this;p(bi,function(n,r){!function(t,e,n){if(e)for(var r=0;r<t.options.length;r++)if(xi(t.options[r].value,n)===e){t.selectedIndex=r;break}}(e.$(n.selector),t[r],n.parser)})},a.setDefaults=function(){var t=this;p(bi,function(e){var n=e.hasOwnProperty("default")?e.default:0;t.$(e.selector).selectedIndex=n})},a.restoreSettings=function(){var e;try{e=JSON.parse(t.localStorage.getItem(ui))}catch(e){l.warn(e)}e&&this.setValues(e)},a.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?t.localStorage.setItem(ui,JSON.stringify(e)):t.localStorage.removeItem(ui)}catch(e){l.warn(e)}}},a.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},a.conditionalBlur_=function(){this.previouslyActiveEl_=null,this.off(e,"keydown",this.handleKeyDown);var t=this.player_.controlBar,n=t&&t.subsCapsButton,r=t&&t.captionsButton;n?n.focus():r&&r.focus()},i}(Oe);Bt.registerComponent("TextTrackSettings",wi);var Si=function(e){function n(n,r){var i,a=r.ResizeObserver||t.ResizeObserver;null===r.ResizeObserver&&(a=!1);var s=Nt({createEl:!a,reportTouchActivity:!1},r);return(i=e.call(this,n,s)||this).ResizeObserver=r.ResizeObserver||t.ResizeObserver,i.loadListener_=null,i.resizeObserver_=null,i.debouncedHandler_=function(e,n,r,i){var a;void 0===i&&(i=t);var o=function(){var t=this,n=arguments,r=function(){r=a=null,e.apply(t,n)};i.clearTimeout(a),a=i.setTimeout(r,100)};return o.cancel=function(){i.clearTimeout(a),a=null},o}(function(){i.resizeHandler()},0,0,o(o(i))),a?(i.resizeObserver_=new i.ResizeObserver(i.debouncedHandler_),i.resizeObserver_.observe(n.el())):(i.loadListener_=function(){i.el_&&i.el_.contentWindow&&ct(i.el_.contentWindow,"resize",i.debouncedHandler_)},i.one("load",i.loadListener_)),i}r(n,e);var i=n.prototype;return i.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager"})},i.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},i.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.el_&&this.el_.contentWindow&&ht(this.el_.contentWindow,"resize",this.debouncedHandler_),this.loadListener_&&this.off("load",this.loadListener_),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null},n}(Bt);Bt.registerComponent("ResizeManager",Si);var Ti=function(t){var e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;var n=t.$$("source"),r=[],i="";if(!n.length)return!1;for(var a=0;a<n.length;a++){var o=n[a].src;o&&-1===r.indexOf(o)&&r.push(o)}return!!r.length&&(1===r.length&&(i=r[0]),t.triggerSourceset(i),!0)},Oi=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(n){var r=e.createElement(this.nodeName.toLowerCase());r.innerHTML=n;for(var i=e.createDocumentFragment();r.childNodes.length;)i.appendChild(r.childNodes[0]);return this.innerText="",t.Element.prototype.appendChild.call(this,i),this.innerHTML}}),Mi=function(t,e){for(var n={},r=0;r<t.length&&!((n=Object.getOwnPropertyDescriptor(t[r],e))&&n.set&&n.get);r++);return n.enumerable=!0,n.configurable=!0,n},ki=function(e){var n=e.el();if(!n.resetSourceWatch_){var r={},i=Mi([e.el(),t.HTMLMediaElement.prototype,t.Element.prototype,Oi],"innerHTML"),a=function(t){return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=t.apply(n,i);return Ti(e),o}};["append","appendChild","insertAdjacentHTML"].forEach(function(t){n[t]&&(r[t]=n[t],n[t]=a(r[t]))}),Object.defineProperty(n,"innerHTML",Nt(i,{set:a(i.set)})),n.resetSourceWatch_=function(){n.resetSourceWatch_=null,Object.keys(r).forEach(function(t){n[t]=r[t]}),Object.defineProperty(n,"innerHTML",i)},e.one("sourceset",n.resetSourceWatch_)}},Ci=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?ze(t.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return t.Element.prototype.setAttribute.call(this,"src",e),e}});function Ei(){var t=s(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]);return Ei=function(){return t},t}var Ai=function(n){function i(t,e){var r;r=n.call(this,t,e)||this;var i=t.source,a=!1;if(i&&(r.el_.currentSrc!==i.src||t.tag&&3===t.tag.initNetworkState_)?r.setSource(i):r.handleLateInit_(r.el_),t.enableSourceset&&r.setupSourcesetHandling_(),r.el_.hasChildNodes()){for(var o=r.el_.childNodes,s=o.length,u=[];s--;){var c=o[s];"track"===c.nodeName.toLowerCase()&&(r.featuresNativeTextTracks?(r.remoteTextTrackEls().addTrackElement_(c),r.remoteTextTracks().addTrack(c.track),r.textTracks().addTrack(c.track),a||r.el_.hasAttribute("crossorigin")||!He(c.src)||(a=!0)):u.push(c))}for(var f=0;f<u.length;f++)r.el_.removeChild(u[f])}return r.proxyNativeTracks_(),r.featuresNativeTextTracks&&a&&l.warn(h(Ei())),r.restoreMetadataTracksInIOSNativePlayer_(),(se||Yt||Jt)&&!0===t.nativeControlsForTouch&&r.setControls(!0),r.proxyWebkitFullscreen_(),r.triggerReady(),r}r(i,n);var a=i.prototype;return a.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),i.disposeMediaElement(this.el_),this.options_=null,n.prototype.dispose.call(this)},a.setupSourcesetHandling_=function(){!function(e){if(e.featuresSourceset){var n=e.el();if(!n.resetSourceset_){var r=Mi([e.el(),t.HTMLMediaElement.prototype,Ci],"src"),i=n.setAttribute,a=n.load;Object.defineProperty(n,"src",Nt(r,{set:function(t){var i=r.set.call(n,t);return e.triggerSourceset(n.src),i}})),n.setAttribute=function(t,r){var a=i.call(n,t,r);return/src/i.test(t)&&e.triggerSourceset(n.src),a},n.load=function(){var t=a.call(n);return Ti(e)||(e.triggerSourceset(""),ki(e)),t},n.currentSrc?e.triggerSourceset(n.currentSrc):Ti(e)||ki(e),n.resetSourceset_=function(){n.resetSourceset_=null,n.load=a,n.setAttribute=i,Object.defineProperty(n,"src",r),n.resetSourceWatch_&&n.resetSourceWatch_()}}}}(this)},a.restoreMetadataTracksInIOSNativePlayer_=function(){var t,e=this.textTracks(),n=function(){t=[];for(var n=0;n<e.length;n++){var r=e[n];"metadata"===r.kind&&t.push({track:r,storedMode:r.mode})}};n(),e.addEventListener("change",n),this.on("dispose",function(){return e.removeEventListener("change",n)});var r=function n(){for(var r=0;r<t.length;r++){var i=t[r];"disabled"===i.track.mode&&i.track.mode!==i.storedMode&&(i.track.mode=i.storedMode)}e.removeEventListener("change",n)};this.on("webkitbeginfullscreen",function(){e.removeEventListener("change",n),e.removeEventListener("change",r),e.addEventListener("change",r)}),this.on("webkitendfullscreen",function(){e.removeEventListener("change",n),e.addEventListener("change",n),e.removeEventListener("change",r)})},a.overrideNative_=function(t,e){var n=this;if(e===this["featuresNative"+t+"Tracks"]){var r=t.toLowerCase();this[r+"TracksListeners_"]&&Object.keys(this[r+"TracksListeners_"]).forEach(function(t){n.el()[r+"Tracks"].removeEventListener(t,n[r+"TracksListeners_"][t])}),this["featuresNative"+t+"Tracks"]=!e,this[r+"TracksListeners_"]=null,this.proxyNativeTracksForType_(r)}},a.overrideNativeAudioTracks=function(t){this.overrideNative_("Audio",t)},a.overrideNativeVideoTracks=function(t){this.overrideNative_("Video",t)},a.proxyNativeTracksForType_=function(t){var e=this,n=gn[t],r=this.el()[n.getterName],i=this[n.getterName]();if(this["featuresNative"+n.capitalName+"Tracks"]&&r&&r.addEventListener){var a={change:function(t){i.trigger({type:"change",target:i,currentTarget:i,srcElement:i})},addtrack:function(t){i.addTrack(t.track)},removetrack:function(t){i.removeTrack(t.track)}},o=function(){for(var t=[],e=0;e<i.length;e++){for(var n=!1,a=0;a<r.length;a++)if(r[a]===i[e]){n=!0;break}n||t.push(i[e])}for(;t.length;)i.removeTrack(t.shift())};this[n.getterName+"Listeners_"]=a,Object.keys(a).forEach(function(t){var n=a[t];r.addEventListener(t,n),e.on("dispose",function(e){return r.removeEventListener(t,n)})}),this.on("loadstart",o),this.on("dispose",function(t){return e.off("loadstart",o)})}},a.proxyNativeTracks_=function(){var t=this;gn.names.forEach(function(e){t.proxyNativeTracksForType_(e)})},a.createEl=function(){var t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){var n=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(n,t),i.disposeMediaElement(t),t=n}else{t=e.createElement("video");var r=Nt({},this.options_.tag&&D(this.options_.tag));se&&!0===this.options_.nativeControlsForTouch||delete r.controls,L(t,g(r,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}void 0!==this.options_.preload&&R(t,"preload",this.options_.preload);for(var a=["loop","muted","playsinline","autoplay"],o=0;o<a.length;o++){var s=a[o],u=this.options_[s];void 0!==u&&(u?R(t,s,s):N(t,s),t[s]=u)}return t},a.handleLateInit_=function(t){if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){var e=!1,n=function(){e=!0};this.on("loadstart",n);var r=function(){e||this.trigger("loadstart")};return this.on("loadedmetadata",r),void this.ready(function(){this.off("loadstart",n),this.off("loadedmetadata",r),e||this.trigger("loadstart")})}var i=["loadstart"];i.push("loadedmetadata"),2<=t.readyState&&i.push("loadeddata"),3<=t.readyState&&i.push("canplay"),4<=t.readyState&&i.push("canplaythrough"),this.ready(function(){i.forEach(function(t){this.trigger(t)},this)})}},a.setCurrentTime=function(t){try{this.el_.currentTime=t}catch(t){l(t,"Video is not ready. (Video.js)")}},a.duration=function(){var t=this;return this.el_.duration===1/0&&Qt&&ne&&0===this.el_.currentTime?(this.on("timeupdate",function e(){0<t.el_.currentTime&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))}),NaN):this.el_.duration||NaN},a.width=function(){return this.el_.offsetWidth},a.height=function(){return this.el_.offsetHeight},a.proxyWebkitFullscreen_=function(){var t=this;if("webkitDisplayingFullscreen"in this.el_){var e=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",function(){t.off("webkitbeginfullscreen",n),t.off("webkitendfullscreen",e)})}},a.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=t.navigator&&t.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},a.enterFullScreen=function(){var t=this.el_;t.paused&&t.networkState<=t.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){t.pause(),t.webkitEnterFullScreen()},0)):t.webkitEnterFullScreen()},a.exitFullScreen=function(){this.el_.webkitExitFullScreen()},a.src=function(t){if(void 0===t)return this.el_.src;this.setSrc(t)},a.reset=function(){i.resetMediaElement(this.el_)},a.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},a.setControls=function(t){this.el_.controls=!!t},a.addTextTrack=function(t,e,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,e,r):n.prototype.addTextTrack.call(this,t,e,r)},a.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return n.prototype.createRemoteTextTrack.call(this,t);var r=e.createElement("track");return t.kind&&(r.kind=t.kind),t.label&&(r.label=t.label),(t.language||t.srclang)&&(r.srclang=t.language||t.srclang),t.default&&(r.default=t.default),t.id&&(r.id=t.id),t.src&&(r.src=t.src),r},a.addRemoteTextTrack=function(t,e){var r=n.prototype.addRemoteTextTrack.call(this,t,e);return this.featuresNativeTextTracks&&this.el().appendChild(r),r},a.removeRemoteTextTrack=function(t){if(n.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var e=this.$$("track"),r=e.length;r--;)t!==e[r]&&t!==e[r].track||this.el().removeChild(e[r])},a.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),t.performance&&"function"==typeof t.performance.now?e.creationTime=t.performance.now():t.performance&&t.performance.timing&&"number"==typeof t.performance.timing.navigationStart&&(e.creationTime=t.Date.now()-t.performance.timing.navigationStart),e},i}(qn);if(w()){Ai.TEST_VID=e.createElement("video");var Ii=e.createElement("track");Ii.kind="captions",Ii.srclang="en",Ii.label="English",Ai.TEST_VID.appendChild(Ii)}Ai.isSupported=function(){try{Ai.TEST_VID.volume=.5}catch(t){return!1}return!(!Ai.TEST_VID||!Ai.TEST_VID.canPlayType)},Ai.canPlayType=function(t){return Ai.TEST_VID.canPlayType(t)},Ai.canPlaySource=function(t,e){return Ai.canPlayType(t.type)},Ai.canControlVolume=function(){try{var t=Ai.TEST_VID.volume;return Ai.TEST_VID.volume=t/2+.1,t!==Ai.TEST_VID.volume}catch(t){return!1}},Ai.canMuteVolume=function(){try{var t=Ai.TEST_VID.muted;return Ai.TEST_VID.muted=!t,Ai.TEST_VID.muted?R(Ai.TEST_VID,"muted","muted"):N(Ai.TEST_VID,"muted"),t!==Ai.TEST_VID.muted}catch(t){return!1}},Ai.canControlPlaybackRate=function(){if(Qt&&ne&&re<58)return!1;try{var t=Ai.TEST_VID.playbackRate;return Ai.TEST_VID.playbackRate=t/2+.1,t!==Ai.TEST_VID.playbackRate}catch(t){return!1}},Ai.canOverrideAttributes=function(){try{var t=function(){};Object.defineProperty(e.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(e.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(e.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(e.createElement("audio"),"innerHTML",{get:t,set:t})}catch(t){return!1}return!0},Ai.supportsNativeTextTracks=function(){return oe||$t&&ne},Ai.supportsNativeVideoTracks=function(){return!(!Ai.TEST_VID||!Ai.TEST_VID.videoTracks)},Ai.supportsNativeAudioTracks=function(){return!(!Ai.TEST_VID||!Ai.TEST_VID.audioTracks)},Ai.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],Ai.prototype.featuresVolumeControl=Ai.canControlVolume(),Ai.prototype.featuresMuteControl=Ai.canMuteVolume(),Ai.prototype.featuresPlaybackRate=Ai.canControlPlaybackRate(),Ai.prototype.featuresSourceset=Ai.canOverrideAttributes(),Ai.prototype.movingMediaElementInDOM=!$t,Ai.prototype.featuresFullscreenResize=!0,Ai.prototype.featuresProgressEvents=!0,Ai.prototype.featuresTimeupdateEvents=!0,Ai.prototype.featuresNativeTextTracks=Ai.supportsNativeTextTracks(),Ai.prototype.featuresNativeVideoTracks=Ai.supportsNativeVideoTracks(),Ai.prototype.featuresNativeAudioTracks=Ai.supportsNativeAudioTracks();var Pi=Ai.TEST_VID&&Ai.TEST_VID.constructor.prototype.canPlayType,Li=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;function Di(){var t=s(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]);return Di=function(){return t},t}Ai.patchCanPlayType=function(){4<=Kt&&!te&&!ne&&(Ai.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&Li.test(t)?"maybe":Pi.call(this,t)})},Ai.unpatchCanPlayType=function(){var t=Ai.TEST_VID.constructor.prototype.canPlayType;return Ai.TEST_VID.constructor.prototype.canPlayType=Pi,t},Ai.patchCanPlayType(),Ai.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},Ai.resetMediaElement=function(t){if(t){for(var e=t.querySelectorAll("source"),n=e.length;n--;)t.removeChild(e[n]);t.removeAttribute("src"),"function"==typeof t.load&&function(){try{t.load()}catch(t){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(t){Ai.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(t){Ai.prototype["set"+Rt(t)]=function(e){(this.el_[t]=e)?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(function(t){Ai.prototype[t]=function(){return this.el_[t]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(function(t){Ai.prototype["set"+Rt(t)]=function(e){this.el_[t]=e}}),["pause","load","play"].forEach(function(t){Ai.prototype[t]=function(){return this.el_[t]()}}),qn.withSourceHandlers(Ai),Ai.nativeSourceHandler={},Ai.nativeSourceHandler.canPlayType=function(t){try{return Ai.TEST_VID.canPlayType(t)}catch(t){return""}},Ai.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return Ai.nativeSourceHandler.canPlayType(t.type);if(t.src){var n=Ve(t.src);return Ai.nativeSourceHandler.canPlayType("video/"+n)}return""},Ai.nativeSourceHandler.handleSource=function(t,e,n){e.setSrc(t.src)},Ai.nativeSourceHandler.dispose=function(){},Ai.registerSourceHandler(Ai.nativeSourceHandler),qn.registerTech("Html5",Ai);var ji=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Ri={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Ni=["tiny","xsmall","small","medium","large","xlarge","huge"],Bi={};Ni.forEach(function(t){var e="x"===t.charAt(0)?"x-"+t.substring(1):t;Bi[t]="vjs-layout-"+e});var Fi={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Ui=function(i){function a(t,e,r){var s;if(t.id=t.id||e.id||"vjs_video_"+J(),(e=g(a.getTagSettings(t),e)).initChildren=!1,e.createEl=!1,e.evented=!1,e.reportTouchActivity=!1,!e.language)if("function"==typeof t.closest){var u=t.closest("[lang]");u&&u.getAttribute&&(e.language=u.getAttribute("lang"))}else for(var l=t;l&&1===l.nodeType;){if(D(l).hasOwnProperty("lang")){e.language=l.getAttribute("lang");break}l=l.parentNode}if((s=i.call(this,null,e,r)||this).log=c(s.id_),s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=t,s.tagAttributes=t&&D(t),s.language(s.options_.language),e.languages){var h={};Object.getOwnPropertyNames(e.languages).forEach(function(t){h[t.toLowerCase()]=e.languages[t]}),s.languages_=h}else s.languages_=a.prototype.options_.languages;s.cache_={},s.poster_=e.poster||"",s.controls_=!!e.controls,s.cache_.lastVolume=1,t.controls=!1,t.removeAttribute("controls"),t.hasAttribute("autoplay")?s.options_.autoplay=!0:s.autoplay(s.options_.autoplay),s.scrubbing_=!1,s.el_=s.createEl(),s.cache_.lastPlaybackRate=s.defaultPlaybackRate(),Lt(o(o(s)),{eventBusKey:"el_"});var f=Nt(s.options_);if(e.plugins){var d=e.plugins;Object.keys(d).forEach(function(t){if("function"!=typeof this[t])throw new Error('plugin "'+t+'" does not exist');this[t](d[t])},o(o(s)))}s.options_.playerOptions=f,s.middleware_=[],s.initChildren(),s.isAudio("audio"===t.nodeName.toLowerCase()),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),$t||s.addClass("vjs-workinghover"),a.players[s.id_]=o(o(s));var p=n.split(".")[0];return s.addClass("vjs-v"+p),s.userActive(!0),s.reportUserActivity(),s.one("play",s.listenForUserActivity_),s.on("fullscreenchange",s.handleFullscreenChange_),s.on("stageclick",s.handleStageClick_),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s.changingSrc_=!1,s.playWaitingForReady_=!1,s.playOnLoadstart_=null,s}r(a,i);var s=a.prototype;return s.dispose=function(){this.trigger("dispose"),this.off("dispose"),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),a.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Xn[this.id()]=null,i.prototype.dispose.call(this)},s.createEl=function(){var n,r=this.tag,a=this.playerElIngest_=r.parentNode&&r.parentNode.hasAttribute&&r.parentNode.hasAttribute("data-vjs-player"),o="video-js"===this.tag.tagName.toLowerCase();a?n=this.el_=r.parentNode:o||(n=this.el_=i.prototype.createEl.call(this,"div"));var s=D(r);if(o){for(n=this.el_=r,r=this.tag=e.createElement("video");n.children.length;)r.appendChild(n.firstChild);E(n,"video-js")||A(n,"video-js"),n.appendChild(r),a=this.playerElIngest_=n,Object.keys(n).forEach(function(t){r[t]=n[t]})}if(r.setAttribute("tabindex","-1"),s.tabindex="-1",ie&&(r.setAttribute("role","application"),s.role="application"),r.removeAttribute("width"),r.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach(function(t){o&&"class"===t||n.setAttribute(t,s[t]),o&&r.setAttribute(t,s[t])}),r.playerId=r.id,r.id+="_html5_api",r.className="vjs-tech",r.player=n.player=this,this.addClass("vjs-paused"),!0!==t.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=bt("vjs-styles-dimensions");var u=$(".vjs-styles-defaults"),l=$("head");l.insertBefore(this.styleEl_,u?u.nextSibling:l.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var c=r.getElementsByTagName("a"),h=0;h<c.length;h++){var f=c.item(h);A(f,"vjs-hidden"),f.setAttribute("hidden","hidden")}return r.initNetworkState_=r.networkState,r.parentNode&&!a&&r.parentNode.insertBefore(n,r),C(r,n),this.children_.unshift(r),this.el_.setAttribute("lang",this.language_),this.el_=n},s.width=function(t){return this.dimension("width",t)},s.height=function(t){return this.dimension("height",t)},s.dimension=function(t,e){var n=t+"_";if(void 0===e)return this[n]||0;if(""===e)return this[n]=void 0,void this.updateStyleEl_();var r=parseFloat(e);isNaN(r)?l.error('Improper value "'+e+'" supplied for for '+t):(this[n]=r,this.updateStyleEl_())},s.fluid=function(t){if(void 0===t)return!!this.fluid_;this.fluid_=!!t,t?(this.addClass("vjs-fluid"),this.fill(!1)):this.removeClass("vjs-fluid"),this.updateStyleEl_()},s.fill=function(t){if(void 0===t)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},s.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},s.updateStyleEl_=function(){if(!0!==t.VIDEOJS_NO_DYNAMIC_STYLE){var e,n,r,i=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),a=i[1]/i[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/a:this.videoWidth()||300,n=void 0!==this.height_?this.height_:e*a,r=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(r),xt(this.styleEl_,"\n      ."+r+" {\n        width: "+e+"px;\n        height: "+n+"px;\n      }\n\n      ."+r+".vjs-fluid {\n        padding-top: "+100*a+"%;\n      }\n    ")}else{var o="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(0<=o&&(u.width=o),0<=s&&(u.height=s))}},s.loadTech_=function(t,e){var n=this;this.tech_&&this.unloadTech_();var r=Rt(t),i=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==r&&this.tag&&(qn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;var a={source:e,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+i+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};mn.names.forEach(function(t){var e=mn[t];a[e.getterName]=n[e.privateName]}),g(a,this.options_[r]),g(a,this.options_[i]),g(a,this.options_[t.toLowerCase()]),this.tag&&(a.tag=this.tag),e&&e.src===this.cache_.src&&0<this.cache_.currentTime&&(a.startTime=this.cache_.currentTime);var o=qn.getTech(t);if(!o)throw new Error("No Tech named '"+r+"' exists! '"+r+"' should be registered using videojs.registerTech()'");this.tech_=new o(a),this.tech_.ready(wt(this,this.handleTechReady_),!0),function(t,e){t.forEach(function(t){var n=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach(function(t){return n.addCue(t)})}),e.textTracks()}(this.textTracksJson_||[],this.tech_),ji.forEach(function(t){n.on(n.tech_,t,n["handleTech"+Rt(t)+"_"])}),Object.keys(Ri).forEach(function(t){n.on(n.tech_,t,function(e){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+Ri[t]+"_"].bind(n),event:e}):n["handleTech"+Ri[t]+"_"](e)})}),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===r&&this.tag||C(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},s.unloadTech_=function(){var t=this;mn.names.forEach(function(e){var n=mn[e];t[n.privateName]=t[n.getterName]()}),this.textTracksJson_=function(t){var e=t.$$("track"),n=Array.prototype.map.call(e,function(t){return t.track});return Array.prototype.map.call(e,function(t){var e=Se(t.track);return t.src&&(e.src=t.src),e}).concat(Array.prototype.filter.call(t.textTracks(),function(t){return-1===n.indexOf(t)}).map(Se))}(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},s.tech=function(t){return void 0===t&&l.warn(h(Di())),this.tech_},s.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mousedown",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},s.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mousedown",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},s.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},s.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},s.manualAutoplay_=function(t){var e=this;if(this.tech_&&"string"==typeof t){var n,r=function(){var t=e.muted();e.muted(!0);var n=e.play();if(n&&n.then&&n.catch)return n.catch(function(n){e.muted(t)})};if("any"===t?(n=this.play())&&n.then&&n.catch&&n.catch(function(){return r()}):n="muted"===t?r():this.play(),n&&n.then&&n.catch)return n.then(function(){e.trigger({type:"autoplay-success",autoplay:t})}).catch(function(n){e.trigger({type:"autoplay-failure",autoplay:t})})}},s.updateSourceCaches_=function(t){void 0===t&&(t="");var e=t,n="";"string"!=typeof e&&(e=t.src,n=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],e&&!n&&(n=function(t,e){if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;var n=t.cache_.sources.filter(function(t){return t.src===e});if(n.length)return n[0].type;for(var r=t.$$("source"),i=0;i<r.length;i++){var a=r[i];if(a.type&&a.src&&a.src===e)return a.type}return nr(e)}(this,e)),this.cache_.source=Nt({},t,{src:e,type:n});for(var r=this.cache_.sources.filter(function(t){return t.src&&t.src===e}),i=[],a=this.$$("source"),o=[],s=0;s<a.length;s++){var u=D(a[s]);i.push(u),u.src&&u.src===e&&o.push(u.src)}o.length&&!r.length?this.cache_.sources=i:r.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=e},s.handleTechSourceset_=function(t){var e=this;if(!this.changingSrc_){var n=function(t){return e.updateSourceCaches_(t)},r=this.currentSource().src,i=t.src;r&&!/^blob:/.test(r)&&/^blob:/.test(i)&&(!this.lastSource_||this.lastSource_.tech!==i&&this.lastSource_.player!==r)&&(n=function(){}),n(i),t.src||this.tech_.one(["sourceset","loadstart"],function t(n){if("sourceset"!==n.type){var r=e.techGet("currentSrc");e.lastSource_.tech=r,e.updateSourceCaches_(r)}e.tech_.off(["sourceset","loadstart"],t)})}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})},s.hasStarted=function(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},s.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},s.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(t){return t.callback(t.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},s.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting"),this.one("timeupdate",function(){return t.removeClass("vjs-waiting")})},s.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},s.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},s.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},s.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},s.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.trigger("seeked")},s.handleTechFirstPlay_=function(){this.options_.starttime&&(l.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},s.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},s.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},s.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},s.handleTechClick_=function(t){X(t)&&this.controls_&&(this.paused()?we(this.play()):this.pause())},s.handleTechDoubleClick_=function(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(e){return e.contains(t.target)})||(this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},s.handleTechTap_=function(){this.userActive(!this.userActive())},s.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},s.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},s.handleTechTouchEnd_=function(t){t.preventDefault()},s.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},s.handleStageClick_=function(){this.reportUserActivity()},s.handleTechFullscreenChange_=function(t,e){e&&this.isFullscreen(e.isFullscreen),this.trigger("fullscreenchange")},s.handleTechError_=function(){var t=this.tech_.error();this.error(t)},s.handleTechTextData_=function(){var t=null;1<arguments.length&&(t=arguments[1]),this.trigger("textdata",t)},s.getCache=function(){return this.cache_},s.techCall_=function(t,e){this.ready(function(){if(t in Kn)return i=e,this.tech_[r=t]((n=this.middleware_).reduce(tr(r),i));if(t in Jn)return Zn(this.middleware_,this.tech_,t,e);var n,r,i;try{this.tech_&&this.tech_[t](e)}catch(n){throw l(n),n}},!0)},s.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in Qn)return n=this.tech_,(e=this.middleware_).reduceRight(tr(r=t),n[r]());if(t in Jn)return Zn(this.middleware_,this.tech_,t);var e,n,r;try{return this.tech_[t]()}catch(e){if(void 0===this.tech_[t])throw l("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e),e;if("TypeError"===e.name)throw l("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e),this.tech_.isReady_=!1,e;throw l(e),e}}},s.play=function(){var e=this,n=this.options_.Promise||t.Promise;return n?new n(function(t){e.play_(t)}):this.play_()},s.play_=function(t){var e=this;if(void 0===t&&(t=we),this.playOnLoadstart_&&this.off("loadstart",this.playOnLoadstart_),this.isReady_){if(!this.changingSrc_&&(this.src()||this.currentSrc()))return void t(this.techGet_("play"));this.playOnLoadstart_=function(){e.playOnLoadstart_=null,t(e.play())},this.one("loadstart",this.playOnLoadstart_)}else{if(this.playWaitingForReady_)return;this.playWaitingForReady_=!0,this.ready(function(){e.playWaitingForReady_=!1,t(e.play())})}},s.pause=function(){this.techCall_("pause")},s.paused=function(){return!1!==this.techGet_("paused")},s.played=function(){return this.techGet_("played")||he(0,0)},s.scrubbing=function(t){if(void 0===t)return this.scrubbing_;this.scrubbing_=!!t,t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},s.currentTime=function(t){return void 0!==t?(t<0&&(t=0),void this.techCall_("setCurrentTime",t)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},s.duration=function(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&((this.cache_.duration=t)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))},s.remainingTime=function(){return this.duration()-this.currentTime()},s.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},s.buffered=function(){var t=this.techGet_("buffered");return t&&t.length||(t=he(0,0)),t},s.bufferedPercent=function(){return fe(this.buffered(),this.duration())},s.bufferedEnd=function(){var t=this.buffered(),e=this.duration(),n=t.end(t.length-1);return e<n&&(n=e),n},s.volume=function(t){var e;return void 0!==t?(e=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=e,this.techCall_("setVolume",e),void(0<e&&this.lastVolume_(e))):(e=parseFloat(this.techGet_("volume")),isNaN(e)?1:e)},s.muted=function(t){if(void 0===t)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)},s.defaultMuted=function(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},s.lastVolume_=function(t){if(void 0===t||0===t)return this.cache_.lastVolume;this.cache_.lastVolume=t},s.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},s.isFullscreen=function(t){if(void 0===t)return!!this.isFullscreen_;this.isFullscreen_=!!t},s.requestFullscreen=function(){var t=pe;this.isFullscreen(!0),t.requestFullscreen?(ct(e,t.fullscreenchange,wt(this,function n(r){this.isFullscreen(e[t.fullscreenElement]),!1===this.isFullscreen()&&ht(e,t.fullscreenchange,n),this.trigger("fullscreenchange")})),this.el_[t.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},s.exitFullscreen=function(){var t=pe;this.isFullscreen(!1),t.requestFullscreen?e[t.exitFullscreen]():this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},s.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=e.documentElement.style.overflow,ct(e,"keydown",wt(this,this.fullWindowOnEscKey)),e.documentElement.style.overflow="hidden",A(e.body,"vjs-full-window"),this.trigger("enterFullWindow")},s.fullWindowOnEscKey=function(t){27===t.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},s.exitFullWindow=function(){this.isFullWindow=!1,ht(e,"keydown",this.fullWindowOnEscKey),e.documentElement.style.overflow=this.docOrigOverflow,I(e.body,"vjs-full-window"),this.trigger("exitFullWindow")},s.canPlayType=function(t){for(var e,n=0,r=this.options_.techOrder;n<r.length;n++){var i=r[n],a=qn.getTech(i);if(a||(a=Bt.getComponent(i)),a){if(a.isSupported()&&(e=a.canPlayType(t)))return e}else l.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},s.selectSource=function(t){var e,n=this,r=this.options_.techOrder.map(function(t){return[t,qn.getTech(t)]}).filter(function(t){var e=t[0],n=t[1];return n?n.isSupported():(l.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),i=function(t,e,n){var r;return t.some(function(t){return e.some(function(e){if(r=n(t,e))return!0})}),r},a=function(t,e){var r=t[0];if(t[1].canPlaySource(e,n.options_[r.toLowerCase()]))return{source:e,tech:r}};return(this.options_.sourceOrder?i(t,r,(e=a,function(t,n){return e(n,t)})):i(r,t,a))||!1},s.src=function(t){var e=this;if(void 0===t)return this.cache_.src||"";var n=function t(e){if(Array.isArray(e)){var n=[];e.forEach(function(e){e=t(e),Array.isArray(e)?n=n.concat(e):v(e)&&n.push(e)}),e=n}else e="string"==typeof e&&e.trim()?[rr({src:e})]:v(e)&&"string"==typeof e.src&&e.src&&e.src.trim()?[rr(e)]:[];return e}(t);n.length?(this.changingSrc_=!0,this.cache_.sources=n,this.updateSourceCaches_(n[0]),function(t,e,n){t.setTimeout(function(){return function t(e,n,r,i,a,o){void 0===e&&(e={}),void 0===n&&(n=[]),void 0===a&&(a=[]),void 0===o&&(o=!1);var s=n[0],u=n.slice(1);if("string"==typeof s)t(e,Yn[s],r,i,a,o);else if(s){var l=function(t,e){var n=Xn[t.id()],r=null;if(null==n)return r=e(t),Xn[t.id()]=[[e,r]],r;for(var i=0;i<n.length;i++){var a=n[i];a[0]===e&&(r=a[1])}return null===r&&(r=e(t),n.push([e,r])),r}(i,s);if(!l.setSource)return a.push(l),t(e,u,r,i,a,o);l.setSource(g({},e),function(n,s){if(n)return t(e,u,r,i,a,o);a.push(l),t(s,e.type===s.type?u:Yn[s.type],r,i,a,o)})}else u.length?t(e,u,r,i,a,o):o?r(e,a):t(e,Yn["*"],r,i,a,!0)}(e,Yn[e.type],n,t)},1)}(this,n[0],function(t,r){var i;if(e.middleware_=r,e.cache_.sources=n,e.updateSourceCaches_(t),e.src_(t))return 1<n.length?e.src(n.slice(1)):(e.changingSrc_=!1,e.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0),void e.triggerReady());i=e.tech_,r.forEach(function(t){return t.setTech&&t.setTech(i)})})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)},s.src_=function(t){var e,n=this,r=this.selectSource([t]);return!r||(e=this.techName_,Rt(r.tech)!==Rt(e)?(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready(function(){n.changingSrc_=!1})):this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0),!1)},s.load=function(){this.techCall_("load")},s.reset=function(){this.tech_&&this.tech_.clearTracks("text"),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset")},s.currentSources=function(){var t=this.currentSource(),e=[];return 0!==Object.keys(t).length&&e.push(t),this.cache_.sources||e},s.currentSource=function(){return this.cache_.source||{}},s.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},s.currentType=function(){return this.currentSource()&&this.currentSource().type||""},s.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")},s.autoplay=function(t){if(void 0===t)return this.options_.autoplay||!1;var e;"string"==typeof t&&/(any|play|muted)/.test(t)?(this.options_.autoplay=t,this.manualAutoplay_(t),e=!1):this.options_.autoplay=!!t,e=e||this.options_.autoplay,this.tech_&&this.techCall_("setAutoplay",e)},s.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},s.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")},s.poster=function(t){if(void 0===t)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))},s.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},s.controls=function(t){if(void 0===t)return!!this.controls_;this.controls_!==(t=!!t)&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},s.usingNativeControls=function(t){if(void 0===t)return!!this.usingNativeControls_;this.usingNativeControls_!==(t=!!t)&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},s.error=function(t){return void 0===t?this.error_||null:null===t?(this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close())):(this.error_=new _e(t),this.addClass("vjs-error"),l.error("(CODE:"+this.error_.code+" "+_e.errorTypes[this.error_.code]+")",this.error_.message,this.error_),void this.trigger("error"))},s.reportUserActivity=function(t){this.userActivity_=!0},s.userActive=function(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},s.listenForUserActivity_=function(){var t,e,n,r,i=wt(this,this.reportUserActivity);this.on("mousedown",function(){i(),this.clearInterval(t),t=this.setInterval(i,250)}),this.on("mousemove",function(t){t.screenX===e&&t.screenY===n||(e=t.screenX,n=t.screenY,i())}),this.on("mouseup",function(e){i(),this.clearInterval(t)}),this.on("keydown",i),this.on("keyup",i),this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(r);var t=this.options_.inactivityTimeout;t<=0||(r=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},t))}},250)},s.playbackRate=function(t){if(void 0===t)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)},s.defaultPlaybackRate=function(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},s.isAudio=function(t){if(void 0===t)return!!this.isAudio_;this.isAudio_=!!t},s.addTextTrack=function(t,e,n){if(this.tech_)return this.tech_.addTextTrack(t,e,n)},s.addRemoteTextTrack=function(t,e){if(this.tech_)return this.tech_.addRemoteTextTrack(t,e)},s.removeRemoteTextTrack=function(t){void 0===t&&(t={});var e=t.track;if(e||(e=t),this.tech_)return this.tech_.removeRemoteTextTrack(e)},s.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},s.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},s.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},s.language=function(t){if(void 0===t)return this.language_;this.language_=String(t).toLowerCase()},s.languages=function(){return Nt(a.prototype.options_.languages,this.languages_)},s.toJSON=function(){var t=Nt(this.options_),e=t.tracks;t.tracks=[];for(var n=0;n<e.length;n++){var r=e[n];(r=Nt(r)).player=void 0,t.tracks[n]=r}return t},s.createModal=function(t,e){var n=this;(e=e||{}).content=t||"";var r=new Oe(this,e);return this.addChild(r),r.on("dispose",function(){n.removeChild(r)}),r.open(),r},s.updateCurrentBreakpoint_=function(){if(this.responsive())for(var t=this.currentBreakpoint(),e=this.currentWidth(),n=0;n<Ni.length;n++){var r=Ni[n];if(e<=this.breakpoints_[r]){if(t===r)return;t&&this.removeClass(Bi[t]),this.addClass(Bi[r]),this.breakpoint_=r;break}}},s.removeCurrentBreakpoint_=function(){var t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)},s.breakpoints=function(t){return void 0===t||(this.breakpoint_="",this.breakpoints_=g({},Fi,t),this.updateCurrentBreakpoint_()),g(this.breakpoints_)},s.responsive=function(t){return void 0===t?this.responsive_:(t=Boolean(t))!==this.responsive_?((this.responsive_=t)?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0},s.currentBreakpoint=function(){return this.breakpoint_},s.currentBreakpointClass=function(){return Bi[this.breakpoint_]||""},a.getTagSettings=function(t){var e={sources:[],tracks:[]},n=D(t),r=n["data-setup"];if(E(t,"vjs-fill")&&(n.fill=!0),E(t,"vjs-fluid")&&(n.fluid=!0),null!==r){var i=function(t,e){var n,r=null;try{n=JSON.parse(t,void 0)}catch(t){r=t}return[r,n]}(r||"{}"),a=i[0],o=i[1];a&&l.error(a),g(n,o)}if(g(e,n),t.hasChildNodes())for(var s=t.childNodes,u=0,c=s.length;u<c;u++){var h=s[u],f=h.nodeName.toLowerCase();"source"===f?e.sources.push(D(h)):"track"===f&&e.tracks.push(D(h))}return e},s.flexNotSupported_=function(){var t=e.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},a}(Bt);mn.names.forEach(function(t){var e=mn[t];Ui.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}}),Ui.players={};var zi=t.navigator;Ui.prototype.options_={techOrder:qn.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:zi&&(zi.languages&&zi.languages[0]||zi.userLanguage||zi.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(t){Ui.prototype[t]=function(){return this.techGet_(t)}}),ji.forEach(function(t){Ui.prototype["handleTech"+Rt(t)+"_"]=function(){return this.trigger(t)}}),Bt.registerComponent("Player",Ui);var Vi="plugin",Hi="activePlugins_",Gi={},Wi=function(t){return Gi.hasOwnProperty(t)},qi=function(t){return Wi(t)?Gi[t]:void 0},Yi=function(t,e){t[Hi]=t[Hi]||{},t[Hi][e]=!0},Xi=function(t,e,n){var r=(n?"before":"")+"pluginsetup";t.trigger(r,e),t.trigger(r+":"+e.name,e)},$i=function(t,e){return e.prototype.name=t,function(){Xi(this,{name:t,plugin:e,instance:null},!0);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=a(e,[this].concat(r));return this[t]=function(){return o},Xi(this,o.getEventHash()),o}},Zi=function(){function t(e){if(this.constructor===t)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,Lt(this),delete this.trigger,jt(this,this.constructor.defaultState),Yi(e,this.name),this.dispose=wt(this,this.dispose),e.on("dispose",this.dispose)}var e=t.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(t){return void 0===t&&(t={}),t.name=this.name,t.plugin=this.constructor,t.instance=this,t},e.trigger=function(t,e){return void 0===e&&(e={}),ft(this.eventBusEl_,t,this.getEventHash(e))},e.handleStateChanged=function(t){},e.dispose=function(){var t=this.name,e=this.player;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e[Hi][t]=!1,this.player=this.state=null,e[t]=$i(t,Gi[t])},t.isBasic=function(e){var n="string"==typeof e?qi(e):e;return"function"==typeof n&&!t.prototype.isPrototypeOf(n.prototype)},t.registerPlugin=function(e,n){if("string"!=typeof e)throw new Error('Illegal plugin name, "'+e+'", must be a string, was '+typeof e+".");if(Wi(e))l.warn('A plugin named "'+e+'" already exists. You may want to avoid re-registering plugins!');else if(Ui.prototype.hasOwnProperty(e))throw new Error('Illegal plugin name, "'+e+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+typeof n+".");var r,i,a;return Gi[e]=n,e!==Vi&&(Ui.prototype[e]=t.isBasic(n)?(r=e,i=n,a=function(){Xi(this,{name:r,plugin:i,instance:null},!0);var t=i.apply(this,arguments);return Yi(this,r),Xi(this,{name:r,plugin:i,instance:t}),t},Object.keys(i).forEach(function(t){a[t]=i[t]}),a):$i(e,n)),n},t.deregisterPlugin=function(t){if(t===Vi)throw new Error("Cannot de-register base plugin.");Wi(t)&&(delete Gi[t],delete Ui.prototype[t])},t.getPlugins=function(t){var e;return void 0===t&&(t=Object.keys(Gi)),t.forEach(function(t){var n=qi(t);n&&((e=e||{})[t]=n)}),e},t.getPluginVersion=function(t){var e=qi(t);return e&&e.VERSION||""},t}();Zi.getPlugin=qi,Zi.BASE_PLUGIN_NAME=Vi,Zi.registerPlugin(Vi,Zi),Ui.prototype.usingPlugin=function(t){return!!this[Hi]&&!0===this[Hi][t]},Ui.prototype.hasPlugin=function(t){return!!Wi(t)};var Qi=function(t){return 0===t.indexOf("#")?t.slice(1):t};function Ki(t,n,r){var i=Ki.getPlayer(t);if(i)return n&&l.warn('Player "'+t+'" is already initialised. Options will not be applied.'),r&&i.ready(r),i;var a="string"==typeof t?$("#"+Qi(t)):t;if(!S(a))throw new TypeError("The element or ID supplied is not valid. (videojs)");e.body.contains(a)||l.warn("The element supplied is not included in the DOM"),n=n||{},Ki.hooks("beforesetup").forEach(function(t){var e=t(a,Nt(n));v(e)&&!Array.isArray(e)?n=Nt(n,e):l.error("please return an object in beforesetup hooks")});var o=Bt.getComponent("Player");return i=new o(a,n,r),Ki.hooks("setup").forEach(function(t){return t(i)}),i}if(Ki.hooks_={},Ki.hooks=function(t,e){return Ki.hooks_[t]=Ki.hooks_[t]||[],e&&(Ki.hooks_[t]=Ki.hooks_[t].concat(e)),Ki.hooks_[t]},Ki.hook=function(t,e){Ki.hooks(t,e)},Ki.hookOnce=function(t,e){Ki.hooks(t,[].concat(e).map(function(e){return function n(){return Ki.removeHook(t,n),e.apply(void 0,arguments)}}))},Ki.removeHook=function(t,e){var n=Ki.hooks(t).indexOf(e);return!(n<=-1||(Ki.hooks_[t]=Ki.hooks_[t].slice(),Ki.hooks_[t].splice(n,1),0))},!0!==t.VIDEOJS_NO_DYNAMIC_STYLE&&w()){var Ji=$(".vjs-styles-defaults");if(!Ji){Ji=bt("vjs-styles-defaults");var ta=$("head");ta&&ta.insertBefore(Ji,ta.firstChild),xt(Ji,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}yt(1,Ki),Ki.VERSION=n,Ki.options=Ui.prototype.options_,Ki.getPlayers=function(){return Ui.players},Ki.getPlayer=function(t){var e,n=Ui.players;if("string"==typeof t){var r=Qi(t),i=n[r];if(i)return i;e=$("#"+r)}else e=t;if(S(e)){var a=e.player,o=e.playerId;if(a||n[o])return a||n[o]}},Ki.getAllPlayers=function(){return Object.keys(Ui.players).map(function(t){return Ui.players[t]}).filter(Boolean)},Ki.players=Ui.players,Ki.getComponent=Bt.getComponent,Ki.registerComponent=function(t,e){qn.isTech(e)&&l.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Bt.registerComponent.call(Bt,t,e)},Ki.getTech=qn.getTech,Ki.registerTech=qn.registerTech,Ki.use=function(t,e){Yn[t]=Yn[t]||[],Yn[t].push(e)},Object.defineProperty(Ki,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Ki.middleware,"TERMINATOR",{value:$n,writeable:!1,enumerable:!0}),Ki.browser=ue,Ki.TOUCH_ENABLED=se,Ki.extend=function(t,e){void 0===e&&(e={});var n=function(){t.apply(this,arguments)},r={};for(var i in"object"==typeof e?(e.constructor!==Object.prototype.constructor&&(n=e.constructor),r=e):"function"==typeof e&&(n=e),function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.super_=e)}(n,t),r)r.hasOwnProperty(i)&&(n.prototype[i]=r[i]);return n},Ki.mergeOptions=Nt,Ki.bind=wt,Ki.registerPlugin=Zi.registerPlugin,Ki.deregisterPlugin=Zi.deregisterPlugin,Ki.plugin=function(t,e){return l.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Zi.registerPlugin(t,e)},Ki.getPlugins=Zi.getPlugins,Ki.getPlugin=Zi.getPlugin,Ki.getPluginVersion=Zi.getPluginVersion,Ki.addLanguage=function(t,e){var n;return t=(""+t).toLowerCase(),(Ki.options.languages=Nt(Ki.options.languages,((n={})[t]=e,n)))[t]},Ki.log=l,Ki.createLogger=c,Ki.createTimeRange=Ki.createTimeRanges=he,Ki.formatTime=_r,Ki.setFormatTime=function(t){yr=t},Ki.resetFormatTime=function(){yr=mr},Ki.parseUrl=Ue,Ki.isCrossOrigin=He,Ki.EventTarget=Tt,Ki.on=ct,Ki.one=dt,Ki.off=ht,Ki.trigger=ft,Ki.xhr=on,Ki.TextTrack=hn,Ki.AudioTrack=fn,Ki.VideoTrack=dn,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(t){Ki[t]=function(){return l.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),Q[t].apply(null,arguments)}}),Ki.computedStyle=y,Ki.dom=Q,Ki.url=Ge;var ea=Ye(function(t,e){var n,r,i,a,o;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,r=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var i=o.parseURL(t);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var a=o.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):e;var s=o.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var u=r.exec(s.path);s.netLoc=u[1],s.path=u[2]}s.netLoc&&!s.path&&(s.path="/");var l={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(l.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var c=s.path,h=c.substring(0,c.lastIndexOf("/")+1)+a.path;l.path=o.normalizePath(h)}else l.path=s.path,a.params||(l.params=s.params,a.query||(l.query=s.query));return null===l.path&&(l.path=n.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(l)},parseURL:function(t){var e=n.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(i,"");t.length!==(t=t.replace(a,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=o}),na=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},ra=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ia=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},aa=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},oa=function(){function t(){na(this,t),this.listeners={}}return t.prototype.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},t.prototype.off=function(t,e){if(!this.listeners[t])return!1;var n=this.listeners[t].indexOf(e);return this.listeners[t].splice(n,1),-1<n},t.prototype.trigger=function(t){var e=this.listeners[t],n=void 0,r=void 0,i=void 0;if(e)if(2===arguments.length)for(r=e.length,n=0;n<r;++n)e[n].call(this,arguments[1]);else for(i=Array.prototype.slice.call(arguments,1),r=e.length,n=0;n<r;++n)e[n].apply(this,i)},t.prototype.dispose=function(){this.listeners={}},t.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},t}(),sa=function(t){function e(){na(this,e);var n=aa(this,t.call(this));return n.buffer="",n}return ia(e,t),e.prototype.push=function(t){var e=void 0;for(this.buffer+=t,e=this.buffer.indexOf("\n");-1<e;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)},e}(oa),ua=function(t){for(var e=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},r=e.length,i=void 0;r--;)""!==e[r]&&((i=/([^=]*)=(.*)/.exec(e[r]).slice(1))[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),n[i[0]]=i[1]);return n},la=function(t){function e(){na(this,e);var n=aa(this,t.call(this));return n.customParsers=[],n}return ia(e,t),e.prototype.push=function(t){var e=void 0,n=void 0;if(0!==(t=t.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"")).length)if("#"===t[0]){for(var r=0;r<this.customParsers.length;r++)if(this.customParsers[r].call(this,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))this.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return n={type:"tag",tagType:"inf"},e[1]&&(n.duration=parseFloat(e[1])),e[2]&&(n.title=e[2]),void this.trigger("data",n);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"targetduration"},e[1]&&(n.duration=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"totalduration"},e[1]&&(n.duration=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"version"},e[1]&&(n.version=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return n={type:"tag",tagType:"media-sequence"},e[1]&&(n.number=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return n={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(n.number=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return n={type:"tag",tagType:"playlist-type"},e[1]&&(n.playlistType=e[1]),void this.trigger("data",n);if(e=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"byterange"},e[1]&&(n.length=parseInt(e[1],10)),e[2]&&(n.offset=parseInt(e[2],10)),void this.trigger("data",n);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return n={type:"tag",tagType:"allow-cache"},e[1]&&(n.allowed=!/NO/.test(e[1])),void this.trigger("data",n);if(e=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(n={type:"tag",tagType:"map"},e[1]){var i=ua(e[1]);if(i.URI&&(n.uri=i.URI),i.BYTERANGE){var a=i.BYTERANGE.split("@"),o=a[0],s=a[1];n.byterange={},o&&(n.byterange.length=parseInt(o,10)),s&&(n.byterange.offset=parseInt(s,10))}}this.trigger("data",n)}else if(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(n={type:"tag",tagType:"stream-inf"},e[1]){if(n.attributes=ua(e[1]),n.attributes.RESOLUTION){var u=n.attributes.RESOLUTION.split("x"),l={};u[0]&&(l.width=parseInt(u[0],10)),u[1]&&(l.height=parseInt(u[1],10)),n.attributes.RESOLUTION=l}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}this.trigger("data",n)}else{if(e=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return n={type:"tag",tagType:"media"},e[1]&&(n.attributes=ua(e[1])),void this.trigger("data",n);if(e=/^#EXT-X-ENDLIST/.exec(t))this.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(t))this.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))return n={type:"tag",tagType:"program-date-time"},e[1]&&(n.dateTimeString=e[1],n.dateTimeObject=new Date(e[1])),void this.trigger("data",n);if(e=/^#EXT-X-KEY:?(.*)$/.exec(t))return n={type:"tag",tagType:"key"},e[1]&&(n.attributes=ua(e[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n);if(e=/^#EXT-X-START:?(.*)$/.exec(t))return n={type:"tag",tagType:"start"},e[1]&&(n.attributes=ua(e[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void this.trigger("data",n);if(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))return(n={type:"tag",tagType:"cue-out-cont"}).data=e[1]?e[1]:"",void this.trigger("data",n);if(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))return(n={type:"tag",tagType:"cue-out"}).data=e[1]?e[1]:"",void this.trigger("data",n);if(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))return(n={type:"tag",tagType:"cue-in"}).data=e[1]?e[1]:"",void this.trigger("data",n);this.trigger("data",{type:"tag",data:t.slice(4)})}}}else this.trigger("data",{type:"comment",text:t.slice(1)})}else this.trigger("data",{type:"uri",uri:t})},e.prototype.addParser=function(t){var e=this,n=t.expression,r=t.customType,i=t.dataParser,a=t.segment;"function"!=typeof i&&(i=function(t){return t}),this.customParsers.push(function(t){if(n.exec(t))return e.trigger("data",{type:"custom",data:i(t),customType:r,segment:a}),!0})},e}(oa),ca=function(t){function e(){na(this,e);var n=aa(this,t.call(this));n.lineStream=new sa,n.parseStream=new la,n.lineStream.pipe(n.parseStream);var r=n,i=[],a={},o=void 0,s=void 0,u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},l=0;return n.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},n.parseStream.on("data",function(t){var e=void 0,n=void 0;({tag:function(){(({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&((a.byterange=e).length=t.length,"offset"in t||(this.trigger("info",{message:"defaulting offset to zero"}),t.offset=0)),"offset"in t&&((a.byterange=e).offset=t.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),0<t.duration&&(a.duration=t.duration),0===t.duration&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=i},key:function(){t.attributes?"NONE"!==t.attributes.METHOD?t.attributes.URI?(t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),s={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void 0!==t.attributes.IV&&(s.iv=t.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):s=null:this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,l=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){o={},t.uri&&(o.uri=t.uri),t.byterange&&(o.byterange=t.byterange)},"stream-inf":function(){this.manifest.playlists=i,this.manifest.mediaGroups=this.manifest.mediaGroups||u,t.attributes?(a.attributes||(a.attributes={}),ra(a.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var r=this.manifest.mediaGroups[t.attributes.TYPE];r[t.attributes["GROUP-ID"]]=r[t.attributes["GROUP-ID"]]||{},e=r[t.attributes["GROUP-ID"]],n.autoselect=!!(n={default:/yes/i.test(t.attributes.DEFAULT)}).default||/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(n.language=t.attributes.LANGUAGE),t.attributes.URI&&(n.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(n.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(n.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(n.forced=/yes/i.test(t.attributes.FORCED)),e[t.attributes.NAME]=n}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){l+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(i.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),a.dateTimeString=t.dateTimeString,a.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){a.cueOut=t.data},"cue-out-cont":function(){a.cueOutCont=t.data},"cue-in":function(){a.cueIn=t.data}})[t.tagType]||function(){}).call(r)},uri:function(){a.uri=t.uri,i.push(a),!this.manifest.targetDuration||"duration"in a||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),s&&(a.key=s),a.timeline=l,o&&(a.map=o),a={}},comment:function(){},custom:function(){t.segment?(a.custom=a.custom||{},a.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(r)}),n}return ia(e,t),e.prototype.push=function(t){this.lineStream.push(t)},e.prototype.end=function(){this.lineStream.push("\n")},e.prototype.addParser=function(t){this.parseStream.addParser(t)},e}(oa),ha=function(t){return!!t&&"object"==typeof t},fa=function t(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.reduce(function(e,n){return Object.keys(n).forEach(function(r){e[r]=Array.isArray(e[r])&&Array.isArray(n[r])?e[r].concat(n[r]):ha(e[r])&&ha(n[r])?t(e[r],n[r]):n[r]}),e},{})},da=function(t){return t.reduce(function(t,e){return t.concat(e)},[])},pa=function(t){if(!t.length)return[];for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e},ga=function(t){var e;return(e=t.reduce(function(t,e){var n,r=e.attributes.id+(e.attributes.lang||"");return t[r]?(e.segments[0].discontinuity=!0,(n=t[r].segments).push.apply(n,e.segments),e.attributes.contentProtection&&(t[r].attributes.contentProtection=e.attributes.contentProtection)):t[r]=e,t},{}),Object.keys(e).map(function(t){return e[t]})).map(function(t){var e;return t.discontinuityStarts=(e="discontinuity",t.segments.reduce(function(t,n,r){return n[e]&&t.push(r),t},[])),t})},va=function(t){var e,n=t.attributes,r=t.segments,i={attributes:(e={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},e["PROGRAM-ID"]=1,e),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1};return n.contentProtection&&(i.contentProtection=n.contentProtection),i};"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var ma,ya,_a,ba,xa,wa,Sa=(function(t,e){var n,r,i,a,o;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,r=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var i=o.parseURL(t);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var a=o.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):e;var s=o.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var u=r.exec(s.path);s.netLoc=u[1],s.path=u[2]}s.netLoc&&!s.path&&(s.path="/");var l={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(l.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var c=s.path,h=c.substring(0,c.lastIndexOf("/")+1)+a.path;l.path=o.normalizePath(h)}else l.path=s.path,a.params||(l.params=s.params,a.query||(l.query=s.query));return null===l.path&&(l.path=n.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(l)},parseURL:function(t){var e=n.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(i,"");t.length!==(t=t.replace(a,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=o}(ma={exports:{}}),ma.exports),Ta=function(e,n){return/^[a-z]+:/i.test(n)?n:(/\/\//i.test(e)||(e=Sa.buildAbsoluteURL(t.location.href,e)),Sa.buildAbsoluteURL(e,n))},Oa=function(t){var e=t.baseUrl,n=t.source,r=void 0===n?"":n,i=t.range,a=void 0===i?"":i,o={uri:r,resolvedUri:Ta((void 0===e?"":e)||"",r)};if(a){var s=a.split("-"),u=parseInt(s[0],10),l=parseInt(s[1],10);o.byterange={length:l-u,offset:u}}return o},Ma=function(t,e){for(var n,r,i,a,o,s=t.type,u=void 0===s?"static":s,l=t.minimumUpdatePeriod,c=void 0===l?0:l,h=t.media,f=void 0===h?"":h,d=t.sourceDuration,p=t.timescale,g=void 0===p?1:p,v=t.startNumber,m=void 0===v?1:v,y=t.periodIndex,_=[],b=-1,x=0;x<e.length;x++){var w=e[x],S=w.d,T=w.r||0,O=w.t||0;b<0&&(b=O),O&&b<O&&(b=O);var M=void 0;if(T<0){var k=x+1;M=k===e.length?"dynamic"===u&&0<c&&0<f.indexOf("$Number$")?(r=(n=t).NOW,i=n.timescale,a=n.start,o=n.minimumUpdatePeriod,Math.ceil((((r+n.clientOffset)/1e3+(void 0===o?0:o)-(n.availabilityStartTime+(void 0===a?0:a)))*(void 0===i?1:i)-b)/S)):(d*g-b)/S:(e[k].t-b)/S}else M=T+1;for(var C=m+_.length+M,E=m+_.length;E<C;)_.push({number:E,duration:S/g,time:b,timeline:y}),b+=S,E++}return _},ka={static:function(t){var e=t.timescale;return{start:0,end:Math.ceil(t.sourceDuration/(t.duration/(void 0===e?1:e)))}},dynamic:function(t){var e=t.timescale,n=void 0===e?1:e,r=t.duration,i=t.start,a=t.minimumUpdatePeriod,o=t.timeShiftBufferDepth,s=void 0===o?1/0:o,u=(t.NOW+t.clientOffset)/1e3,l=t.availabilityStartTime+(void 0===i?0:i),c=Math.ceil((u+(void 0===a?0:a)-l)*n/r),h=Math.floor((u-l-s)*n/r),f=Math.floor((u-l)*n/r);return{start:Math.max(0,h),end:Math.min(c,f)}}},Ca=function(t){var e,n=t.type,r=void 0===n?"static":n,i=t.duration,a=t.timescale,o=void 0===a?1:a,s=t.sourceDuration,u=ka[r](t),l=function(t,e){for(var n=[],r=u.start;r<e;r++)n.push(r);return n}(0,u.end).map((e=t,function(t,n){var r=e.duration,i=e.timescale,a=e.startNumber;return{number:(void 0===a?1:a)+t,duration:r/(void 0===i?1:i),timeline:e.periodIndex,time:n*r}}));if("static"===r){var c=l.length-1;l[c].duration=s-i/o*c}return l},Ea=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Aa=function(t,e){return t.replace(Ea,(n=e,function(t,e,r,i){if("$$"===t)return"$";if(void 0===n[e])return t;var a=""+n[e];return"RepresentationID"===e?a:(i=r?parseInt(i,10):1)<=a.length?a:""+new Array(i-a.length+1).join("0")+a}));var n},Ia=function(t,e){var n,r,i={RepresentationID:t.id,Bandwidth:t.bandwidth||0},a=t.initialization,o=void 0===a?{sourceURL:"",range:""}:a,s=Oa({baseUrl:t.baseUrl,source:Aa(o.sourceURL,i),range:o.range});return(r=e,(n=t).duration||r?n.duration?Ca(n):Ma(n,r):[{number:n.startNumber||1,duration:n.sourceDuration,time:0,timeline:n.periodIndex}]).map(function(e){i.Number=e.number,i.Time=e.time;var n=Aa(t.media||"",i);return{uri:n,timeline:e.timeline,duration:e.duration,resolvedUri:Ta(t.baseUrl||"",n),map:s,number:e.number}})},Pa=function(t,e){var n=t.duration,r=t.segmentUrls,i=void 0===r?[]:r;if(!n&&!e||n&&e)throw new Error("SEGMENT_TIME_UNSPECIFIED");var a,o=i.map(function(e){return r=e,i=(n=t).baseUrl,s=Oa({baseUrl:i,source:(o=void 0===(a=n.initialization)?{}:a).sourceURL,range:o.range}),(u=Oa({baseUrl:i,source:r.media,range:r.mediaRange})).map=s,u;var n,r,i,a,o,s,u});return n&&(a=Ca(t)),e&&(a=Ma(t,e)),a.map(function(t,e){if(o[e]){var n=o[e];return n.timeline=t.timeline,n.duration=t.duration,n.number=t.number,n}}).filter(function(t){return t})},La=function(t){var e=t.baseUrl,n=t.initialization,r=void 0===n?{}:n,i=t.sourceDuration,a=t.timescale,o=void 0===a?1:a,s=t.indexRange,u=void 0===s?"":s,l=t.duration;if(!e)throw new Error("NO_BASE_URL");var c=Oa({baseUrl:e,source:r.sourceURL,range:r.range}),h=Oa({baseUrl:e,source:e,range:u});if(h.map=c,l){var f=Ca(t);f.length&&(h.duration=f[0].duration,h.timeline=f[0].timeline)}else i&&(h.duration=i/o,h.timeline=0);return h.number=0,[h]},Da=function(t){var e,n,r=t.attributes,i=t.segmentInfo;if(i.template?(n=Ia,e=fa(r,i.template)):i.base?(n=La,e=fa(r,i.base)):i.list&&(n=Pa,e=fa(r,i.list)),!n)return{attributes:r};var a=n(e,i.timeline);if(e.duration){var o=e.timescale;e.duration=e.duration/(void 0===o?1:o)}else e.duration=a.length?a.reduce(function(t,e){return Math.max(t,Math.ceil(e.duration))},0):0;return{attributes:e,segments:a}},ja=function(t,e){return pa(t.childNodes).filter(function(t){return t.tagName===e})},Ra=function(t){return t.textContent.trim()},Na=function(t){var e=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!e)return 0;var n=e.slice(1),r=n[1],i=n[2],a=n[3],o=n[4],s=n[5];return 31536e3*parseFloat(n[0]||0)+2592e3*parseFloat(r||0)+86400*parseFloat(i||0)+3600*parseFloat(a||0)+60*parseFloat(o||0)+parseFloat(s||0)},Ba={mediaPresentationDuration:function(t){return Na(t)},availabilityStartTime:function(t){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e=t)&&(e+="Z"),Date.parse(e)/1e3;var e},minimumUpdatePeriod:function(t){return Na(t)},timeShiftBufferDepth:function(t){return Na(t)},start:function(t){return Na(t)},width:function(t){return parseInt(t,10)},height:function(t){return parseInt(t,10)},bandwidth:function(t){return parseInt(t,10)},startNumber:function(t){return parseInt(t,10)},timescale:function(t){return parseInt(t,10)},duration:function(t){var e=parseInt(t,10);return isNaN(e)?Na(t):e},d:function(t){return parseInt(t,10)},t:function(t){return parseInt(t,10)},r:function(t){return parseInt(t,10)},DEFAULT:function(t){return t}},Fa=function(t){return t&&t.attributes?pa(t.attributes).reduce(function(t,e){return t[e.name]=(Ba[e.name]||Ba.DEFAULT)(e.value),t},{}):{}},Ua={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},za=function(t,e){return e.length?da(t.map(function(t){return e.map(function(e){return Ta(t,Ra(e))})})):t},Va=function(t){var e=ja(t,"SegmentTemplate")[0],n=ja(t,"SegmentList")[0],r=n&&ja(n,"SegmentURL").map(function(t){return fa({tag:"SegmentURL"},Fa(t))}),i=ja(t,"SegmentBase")[0],a=n||e,o=a&&ja(a,"SegmentTimeline")[0],s=n||i||e,u=s&&ja(s,"Initialization")[0],l=e&&Fa(e);l&&u?l.initialization=u&&Fa(u):l&&l.initialization&&(l.initialization={sourceURL:l.initialization});var c={template:l,timeline:o&&ja(o,"S").map(function(t){return Fa(t)}),list:n&&fa(Fa(n),{segmentUrls:r,initialization:Fa(u)}),base:i&&fa(Fa(i),{initialization:Fa(u)})};return Object.keys(c).forEach(function(t){c[t]||delete c[t]}),c},Ha=function(e){if(""===e)throw new Error("DASH_EMPTY_MANIFEST");var n=(new t.DOMParser).parseFromString(e,"application/xml"),r=n&&"MPD"===n.documentElement.tagName?n.documentElement:null;if(!r||r&&0<r.getElementsByTagName("parsererror").length)throw new Error("DASH_INVALID_XML");return r},Ga=function(t){return t>>>0};ba=function(t){return ya(t,["moov","trak"]).reduce(function(t,e){var n,r,i,a;return(n=ya(e,["tkhd"])[0])?(i=Ga(n[r=0===n[0]?12:20]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3]),(a=ya(e,["mdia","mdhd"])[0])?(t[i]=Ga(a[r=0===a[0]?12:20]<<24|a[r+1]<<16|a[r+2]<<8|a[r+3]),t):null):null},{})},xa=function(t,e){var n,r,i;return n=ya(e,["moof","traf"]),r=[].concat.apply([],n.map(function(e){return ya(e,["tfhd"]).map(function(n){var r,i;return r=Ga(n[4]<<24|n[5]<<16|n[6]<<8|n[7]),i=t[r]||9e4,(ya(e,["tfdt"]).map(function(t){var e,n;return e=t[0],n=Ga(t[4]<<24|t[5]<<16|t[6]<<8|t[7]),1===e&&(n*=Math.pow(2,32),n+=Ga(t[8]<<24|t[9]<<16|t[10]<<8|t[11])),n})[0]||1/0)/i})})),i=Math.min.apply(null,r),isFinite(i)?i:0},wa=function(t){var e=[];return ya(t,["moov","trak"]).forEach(function(t){var n=ya(t,["mdia","hdlr"]),r=ya(t,["tkhd"]);n.forEach(function(t,n){var i,a,o=_a(t.subarray(8,12)),s=r[n];"vide"===o&&(a=0===(i=new DataView(s.buffer,s.byteOffset,s.byteLength)).getUint8(0)?i.getUint32(12):i.getUint32(20),e.push(a))})}),e};var Wa,qa,Ya,Xa,$a,Za,Qa,Ka,Ja,to,eo,no,ro,io,ao,oo,so,uo,lo,co,ho,fo,po,go,vo,mo,yo,_o,bo,xo,wo,So,To,Oo,Mo,ko,Co,Eo,Ao,Io,Po={findBox:ya=function(t,e){var n,r,i,a,o,s=[];if(!e.length)return null;for(n=0;n<t.byteLength;)r=Ga(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]),i=_a(t.subarray(n+4,n+8)),a=1<r?n+r:t.byteLength,i===e[0]&&(1===e.length?s.push(t.subarray(n+8,a)):(o=ya(t.subarray(n+8,a),e.slice(1))).length&&(s=s.concat(o))),n=a;return s},parseType:_a=function(t){var e="";return e+=String.fromCharCode(t[0]),e+=String.fromCharCode(t[1]),(e+=String.fromCharCode(t[2]))+String.fromCharCode(t[3])},timescale:ba,startTime:xa,videoTrackIds:wa},Lo=Math.pow(2,32)-1;!function(){var t;if(fo={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(t in fo)fo.hasOwnProperty(t)&&(fo[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);po=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),vo=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),go=new Uint8Array([0,0,0,1]),mo=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),yo=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),_o={video:mo,audio:yo},wo=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),xo=new Uint8Array([0,0,0,0,0,0,0,0]),So=new Uint8Array([0,0,0,0,0,0,0,0]),To=So,Oo=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Mo=So,bo=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),Wa=function(t){var e,n,r=[],i=0;for(e=1;e<arguments.length;e++)r.push(arguments[e]);for(e=r.length;e--;)i+=r[e].byteLength;for(n=new Uint8Array(i+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(t,4),e=0,i=8;e<r.length;e++)n.set(r[e],i),i+=r[e].byteLength;return n},qa=function(){return Wa(fo.dinf,Wa(fo.dref,wo))},Ya=function(t){return Wa(fo.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},ao=function(t){return Wa(fo.hdlr,_o[t])},io=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(e[12]=t.samplerate>>>24&255,e[13]=t.samplerate>>>16&255,e[14]=t.samplerate>>>8&255,e[15]=255&t.samplerate),Wa(fo.mdhd,e)},ro=function(t){return Wa(fo.mdia,io(t),ao(t.type),Za(t))},$a=function(t){return Wa(fo.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},Za=function(t){return Wa(fo.minf,"video"===t.type?Wa(fo.vmhd,bo):Wa(fo.smhd,xo),qa(),so(t))},Qa=function(t,e){for(var n=[],r=e.length;r--;)n[r]=lo(e[r]);return Wa.apply(null,[fo.moof,$a(t)].concat(n))},Ka=function(t){for(var e=t.length,n=[];e--;)n[e]=eo(t[e]);return Wa.apply(null,[fo.moov,to(4294967295)].concat(n).concat(Ja(t)))},Ja=function(t){for(var e=t.length,n=[];e--;)n[e]=co(t[e]);return Wa.apply(null,[fo.mvex].concat(n))},to=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return Wa(fo.mvhd,e)},oo=function(t){var e,n,r=t.samples||[],i=new Uint8Array(4+r.length);for(n=0;n<r.length;n++)i[n+4]=(e=r[n].flags).dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return Wa(fo.sdtp,i)},so=function(t){return Wa(fo.stbl,uo(t),Wa(fo.stts,Mo),Wa(fo.stsc,To),Wa(fo.stsz,Oo),Wa(fo.stco,So))},uo=function(t){return Wa(fo.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===t.type?ko(t):Co(t))},ko=function(t){var e,n=t.sps||[],r=t.pps||[],i=[],a=[];for(e=0;e<n.length;e++)i.push((65280&n[e].byteLength)>>>8),i.push(255&n[e].byteLength),i=i.concat(Array.prototype.slice.call(n[e]));for(e=0;e<r.length;e++)a.push((65280&r[e].byteLength)>>>8),a.push(255&r[e].byteLength),a=a.concat(Array.prototype.slice.call(r[e]));return Wa(fo.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),Wa(fo.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([n.length]).concat(i).concat([r.length]).concat(a))),Wa(fo.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},Co=function(t){return Wa(fo.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),Ya(t))},no=function(t){var e=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return Wa(fo.tkhd,e)},lo=function(t){var e,n,r,i,a,o;return e=Wa(fo.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(t.baseMediaDecodeTime/(Lo+1)),o=Math.floor(t.baseMediaDecodeTime%(Lo+1)),n=Wa(fo.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),"audio"===t.type?(r=ho(t,92),Wa(fo.traf,e,n,r)):(i=oo(t),r=ho(t,i.length+92),Wa(fo.traf,e,n,r,i))},eo=function(t){return t.duration=t.duration||4294967295,Wa(fo.trak,no(t),ro(t))},co=function(t){var e=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(e[e.length-1]=0),Wa(fo.trex,e)},Io=function(t,e){var n=0,r=0,i=0,a=0;return t.length&&(void 0!==t[0].duration&&(n=1),void 0!==t[0].size&&(r=2),void 0!==t[0].flags&&(i=4),void 0!==t[0].compositionTimeOffset&&(a=8)),[0,0,n|r|i|a,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e]},Ao=function(t,e){var n,r,i,a;for(e+=20+16*(r=t.samples||[]).length,n=Io(r,e),a=0;a<r.length;a++)n=n.concat([(4278190080&(i=r[a]).duration)>>>24,(16711680&i.duration)>>>16,(65280&i.duration)>>>8,255&i.duration,(4278190080&i.size)>>>24,(16711680&i.size)>>>16,(65280&i.size)>>>8,255&i.size,i.flags.isLeading<<2|i.flags.dependsOn,i.flags.isDependedOn<<6|i.flags.hasRedundancy<<4|i.flags.paddingValue<<1|i.flags.isNonSyncSample,61440&i.flags.degradationPriority,15&i.flags.degradationPriority,(4278190080&i.compositionTimeOffset)>>>24,(16711680&i.compositionTimeOffset)>>>16,(65280&i.compositionTimeOffset)>>>8,255&i.compositionTimeOffset]);return Wa(fo.trun,new Uint8Array(n))},Eo=function(t,e){var n,r,i,a;for(e+=20+8*(r=t.samples||[]).length,n=Io(r,e),a=0;a<r.length;a++)n=n.concat([(4278190080&(i=r[a]).duration)>>>24,(16711680&i.duration)>>>16,(65280&i.duration)>>>8,255&i.duration,(4278190080&i.size)>>>24,(16711680&i.size)>>>16,(65280&i.size)>>>8,255&i.size]);return Wa(fo.trun,new Uint8Array(n))},ho=function(t,e){return"audio"===t.type?Eo(t,e):Ao(t,e)};var Do={ftyp:Xa=function(){return Wa(fo.ftyp,po,go,po,vo)},mdat:function(t){return Wa(fo.mdat,t)},moof:Qa,moov:Ka,initSegment:function(t){var e,n=Xa(),r=Ka(t);return(e=new Uint8Array(n.byteLength+r.byteLength)).set(n),e.set(r,n.byteLength),e}},jo=function(){this.init=function(){var t={};this.on=function(e,n){t[e]||(t[e]=[]),t[e]=t[e].concat(n)},this.off=function(e,n){var r;return!!t[e]&&(r=t[e].indexOf(n),t[e]=t[e].slice(),t[e].splice(r,1),-1<r)},this.trigger=function(e){var n,r,i,a;if(n=t[e])if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,arguments[1]);else{for(a=[],r=arguments.length,r=1;r<arguments.length;++r)a.push(arguments[r]);for(i=n.length,r=0;r<i;++r)n[r].apply(this,a)}},this.dispose=function(){t={}}}};jo.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),t},jo.prototype.push=function(t){this.trigger("data",t)},jo.prototype.flush=function(t){this.trigger("done",t)};var Ro=jo,No=function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},Bo=function(t,e){var n,r=t.minSegmentDts;return e||(r-=t.timelineStartInfo.dts),n=t.timelineStartInfo.baseMediaDecodeTime,n+=r,n=Math.max(0,n),"audio"===t.type&&(n*=t.samplerate/9e4,n=Math.floor(n)),n},Fo=function(t,e){"number"==typeof e.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=e.pts),t.minSegmentPts=void 0===t.minSegmentPts?e.pts:Math.min(t.minSegmentPts,e.pts),t.maxSegmentPts=void 0===t.maxSegmentPts?e.pts:Math.max(t.maxSegmentPts,e.pts)),"number"==typeof e.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),t.minSegmentDts=void 0===t.minSegmentDts?e.dts:Math.min(t.minSegmentDts,e.dts),t.maxSegmentDts=void 0===t.maxSegmentDts?e.dts:Math.max(t.maxSegmentDts,e.dts))},Uo=function t(){t.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new Wo(0,0),new Wo(0,1),new Wo(1,0),new Wo(1,1)],this.reset(),this.ccStreams_.forEach(function(t){t.on("data",this.trigger.bind(this,"data")),t.on("done",this.trigger.bind(this,"done"))},this)};(Uo.prototype=new Ro).push=function(t){var e,n,r;if("sei_rbsp"===t.nalUnitType&&4===(e=function(t){for(var e=0,n={payloadType:-1,payloadSize:0},r=0,i=0;e<t.byteLength&&128!==t[e];){for(;255===t[e];)r+=255,e++;for(r+=t[e++];255===t[e];)i+=255,e++;if(i+=t[e++],!n.payload&&4===r){n.payloadType=r,n.payloadSize=i,n.payload=t.subarray(e,e+i);break}e+=i,i=r=0}return n}(t.escapedRBSP)).payloadType&&(n=function(t){return 181!==t.payload[0]?null:49!=(t.payload[1]<<8|t.payload[2])?null:"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])?null:3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)}(e)))if(t.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(t.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));r=function(t,e){var n,r,i,a,o=[];if(!(64&e[0]))return o;for(r=31&e[0],n=0;n<r;n++)a={type:3&e[2+(i=3*n)],pts:t},4&e[i+2]&&(a.ccData=e[i+3]<<8|e[i+4],o.push(a));return o}(t.pts,n),this.captionPackets_=this.captionPackets_.concat(r),this.latestDts_!==t.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=t.dts}},Uo.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(t,e){t.presortIndex=e}),this.captionPackets_.sort(function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts}),this.captionPackets_.forEach(function(t){t.type<2&&this.dispatchCea608Packet(t)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(t){t.flush()},this)):this.ccStreams_.forEach(function(t){t.flush()},this)},Uo.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(t){t.reset()})},Uo.prototype.dispatchCea608Packet=function(t){this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},Uo.prototype.setsChannel1Active=function(t){return 4096==(30720&t.ccData)},Uo.prototype.setsChannel2Active=function(t){return 6144==(30720&t.ccData)};var zo={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Vo=function(t){return null===t?"":(t=zo[t]||t,String.fromCharCode(t))},Ho=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Go=function(){for(var t=[],e=15;e--;)t.push("");return t},Wo=function t(e,n){t.prototype.init.call(this),this.field_=e||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var e,n,r,i,a;if((e=32639&t.ccData)!==this.lastControlCode_){if(4096==(61440&e)?this.lastControlCode_=e:e!==this.PADDING_&&(this.lastControlCode_=null),r=e>>>8,i=255&e,e!==this.PADDING_)if(e===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(e===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(t.pts),this.flushDisplayed(t.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=t.pts;else if(e===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(t.pts);else if(e===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(t.pts);else if(e===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(t.pts);else if(e===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(e===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(e===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=Go();else if(e===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Go();else if(e===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(t.pts),this.displayed_=Go()),this.mode_="paintOn",this.startPts_=t.pts;else if(this.isSpecialCharacter(r,i))a=Vo((r=(3&r)<<8)|i),this[this.mode_](t.pts,a),this.column_++;else if(this.isExtCharacter(r,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=Vo((r=(3&r)<<8)|i),this[this.mode_](t.pts,a),this.column_++;else if(this.isMidRowCode(r,i))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14==(14&i)&&this.addFormatting(t.pts,["i"]),1==(1&i)&&this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(r,i))this.column_+=3&i;else if(this.isPAC(r,i)){var o=Ho.indexOf(7968&e);"rollUp"===this.mode_&&this.setRollUp(t.pts,o),o!==this.row_&&(this.clearFormatting(t.pts),this.row_=o),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16==(16&e)&&(this.column_=4*((14&e)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(t.pts,["i"])}else this.isNormalChar(r)&&(0===i&&(i=null),a=Vo(r),a+=Vo(i),this[this.mode_](t.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};Wo.prototype=new Ro,Wo.prototype.flushDisplayed=function(t){var e=this.displayed_.map(function(t){return t.trim()}).join("\n").replace(/^\n+|\n+$/g,"");e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e,stream:this.name_})},Wo.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Go(),this.nonDisplayed_=Go(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Wo.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Wo.prototype.isSpecialCharacter=function(t,e){return t===this.EXT_&&48<=e&&e<=63},Wo.prototype.isExtCharacter=function(t,e){return(t===this.EXT_+1||t===this.EXT_+2)&&32<=e&&e<=63},Wo.prototype.isMidRowCode=function(t,e){return t===this.EXT_&&32<=e&&e<=47},Wo.prototype.isOffsetControlCode=function(t,e){return t===this.OFFSET_&&33<=e&&e<=35},Wo.prototype.isPAC=function(t,e){return t>=this.BASE_&&t<this.BASE_+8&&64<=e&&e<=127},Wo.prototype.isColorPAC=function(t){return 64<=t&&t<=79||96<=t&&t<=127},Wo.prototype.isNormalChar=function(t){return 32<=t&&t<=127},Wo.prototype.setRollUp=function(t,e){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(t),this.nonDisplayed_=Go(),this.displayed_=Go()),void 0!==e&&e!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[e-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===e&&(e=this.row_),this.topRow_=e-this.rollUpRows_+1},Wo.prototype.addFormatting=function(t,e){this.formatting_=this.formatting_.concat(e);var n=e.reduce(function(t,e){return t+"<"+e+">"},"");this[this.mode_](t,n)},Wo.prototype.clearFormatting=function(t){if(this.formatting_.length){var e=this.formatting_.reverse().reduce(function(t,e){return t+"</"+e+">"},"");this.formatting_=[],this[this.mode_](t,e)}},Wo.prototype.popOn=function(t,e){var n=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=n+=e},Wo.prototype.rollUp=function(t,e){var n=this.displayed_[this.row_];this.displayed_[this.row_]=n+=e},Wo.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.row_+1;t<15;t++)this.displayed_[t]="";for(t=this.topRow_;t<this.row_;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[this.row_]=""},Wo.prototype.paintOn=function(t,e){var n=this.displayed_[this.row_];this.displayed_[this.row_]=n+=e};var qo={CaptionStream:Uo,Cea608Stream:Wo},Yo={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Xo=function(t,e){var n=1;for(e<t&&(n=-1);4294967296<Math.abs(e-t);)t+=8589934592*n;return t},$o=function t(e){var n,r;t.prototype.init.call(this),this.type_=e,this.push=function(t){t.type===this.type_&&(void 0===r&&(r=t.dts),t.dts=Xo(t.dts,r),t.pts=Xo(t.pts,r),n=t.dts,this.trigger("data",t))},this.flush=function(){r=n,this.trigger("done")},this.discontinuity=function(){n=r=void 0}};$o.prototype=new Ro;var Zo,Qo=$o,Ko=Xo,Jo=function(t,e,n){var r,i="";for(r=e;r<n;r++)i+="%"+("00"+t[r].toString(16)).slice(-2);return i},ts=function(t,e,n){return decodeURIComponent(Jo(t,e,n))},es=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},ns={TXXX:function(t){var e;if(3===t.data[0]){for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=ts(t.data,1,e),t.value=ts(t.data,e+1,t.data.length).replace(/\0*$/,"");break}t.data=t.value}},WXXX:function(t){var e;if(3===t.data[0])for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=ts(t.data,1,e),t.url=ts(t.data,e+1,t.data.length);break}},PRIV:function(t){var e;for(e=0;e<t.data.length;e++)if(0===t.data[e]){t.owner=unescape(Jo(t.data,0,e));break}t.privateData=t.data.subarray(e+1),t.data=t.privateData}};(Zo=function(t){var e,n={debug:!(!t||!t.debug),descriptor:t&&t.descriptor},r=0,i=[],a=0;if(Zo.prototype.init.call(this),this.dispatchType=Yo.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(e=0;e<n.descriptor.length;e++)this.dispatchType+=("00"+n.descriptor[e].toString(16)).slice(-2);this.push=function(t){var e,n,o,s,u;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(a=0,i.length=0),0===i.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)));else if(i.push(t),a+=t.data.byteLength,1===i.length&&(r=es(t.data.subarray(6,10)),r+=10),!(a<r)){for(e={data:new Uint8Array(r),frames:[],pts:i[0].pts,dts:i[0].dts},u=0;u<r;)e.data.set(i[0].data.subarray(0,r-u),u),u+=i[0].data.byteLength,a-=i[0].data.byteLength,i.shift();n=10,64&e.data[5]&&(n+=4,n+=es(e.data.subarray(10,14)),r-=es(e.data.subarray(16,20)));do{if((o=es(e.data.subarray(n+4,n+8)))<1)return;if((s={id:String.fromCharCode(e.data[n],e.data[n+1],e.data[n+2],e.data[n+3]),data:e.data.subarray(n+10,n+o+10)}).key=s.id,ns[s.id]&&(ns[s.id](s),"com.apple.streaming.transportStreamTimestamp"===s.owner)){var l=s.data,c=(1&l[3])<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;c*=4,s.timeStamp=c+=3&l[7],void 0===e.pts&&void 0===e.dts&&(e.pts=s.timeStamp,e.dts=s.timeStamp),this.trigger("timestamp",s)}e.frames.push(s),n+=10,n+=o}while(n<r);this.trigger("data",e)}}}).prototype=new Ro;var rs,is,as,os=Zo,ss=Qo;(rs=function(){var t=new Uint8Array(188),e=0;rs.prototype.init.call(this),this.push=function(n){var r,i=0,a=188;for(e?((r=new Uint8Array(n.byteLength+e)).set(t.subarray(0,e)),r.set(n,e),e=0):r=n;a<r.byteLength;)71!==r[i]||71!==r[a]?(i++,a++):(this.trigger("data",r.subarray(i,a)),i+=188,a+=188);i<r.byteLength&&(t.set(r.subarray(i),0),e=r.byteLength-i)},this.flush=function(){188===e&&71===t[0]&&(this.trigger("data",t),e=0),this.trigger("done")}}).prototype=new Ro,(is=function(){var t,e,n,r;is.prototype.init.call(this),(r=this).packetsWaitingForPmt=[],this.programMapTable=void 0,t=function(t,r){var i=0;r.payloadUnitStartIndicator&&(i+=t[i]+1),"pat"===r.type?e(t.subarray(i),r):n(t.subarray(i),r)},e=function(t,e){e.section_number=t[7],e.last_section_number=t[8],r.pmtPid=(31&t[10])<<8|t[11],e.pmtPid=r.pmtPid},n=function(t,e){var n,i;if(1&t[5]){for(r.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&t[1])<<8|t[2])-4,i=12+((15&t[10])<<8|t[11]);i<n;){var a=t[i],o=(31&t[i+1])<<8|t[i+2];a===Yo.H264_STREAM_TYPE&&null===r.programMapTable.video?r.programMapTable.video=o:a===Yo.ADTS_STREAM_TYPE&&null===r.programMapTable.audio?r.programMapTable.audio=o:a===Yo.METADATA_STREAM_TYPE&&(r.programMapTable["timed-metadata"][o]=a),i+=5+((15&t[i+3])<<8|t[i+4])}e.programMapTable=r.programMapTable}},this.push=function(e){var n={},r=4;if(n.payloadUnitStartIndicator=!!(64&e[1]),n.pid=31&e[1],n.pid<<=8,n.pid|=e[2],1<(48&e[3])>>>4&&(r+=e[r]+1),0===n.pid)n.type="pat",t(e.subarray(r),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",t(e.subarray(r),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,r,n]):this.processPes_(e,r,n)},this.processPes_=function(t,e,n){n.streamType=n.pid===this.programMapTable.video?Yo.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?Yo.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=t.subarray(e),this.trigger("data",n)}}).prototype=new Ro,is.STREAM_TYPES={h264:27,adts:15},(as=function(){var t=this,e={data:[],size:0},n={data:[],size:0},r={data:[],size:0},i=function(e,n,r){var i,a,o=new Uint8Array(e.size),s={type:n},u=0,l=0;if(e.data.length&&!(e.size<9)){for(s.trackId=e.data[0].pid,u=0;u<e.data.length;u++)o.set((a=e.data[u]).data,l),l+=a.data.byteLength;var c,h,f;(h=s).packetLength=6+((c=o)[4]<<8|c[5]),h.dataAlignmentIndicator=0!=(4&c[6]),192&(f=c[7])&&(h.pts=(14&c[9])<<27|(255&c[10])<<20|(254&c[11])<<12|(255&c[12])<<5|(254&c[13])>>>3,h.pts*=4,h.pts+=(6&c[13])>>>1,h.dts=h.pts,64&f&&(h.dts=(14&c[14])<<27|(255&c[15])<<20|(254&c[16])<<12|(255&c[17])<<5|(254&c[18])>>>3,h.dts*=4,h.dts+=(6&c[18])>>>1)),h.data=c.subarray(9+c[8]),i="video"===n||s.packetLength<=e.size,(r||i)&&(e.size=0,e.data.length=0),i&&t.trigger("data",s)}};as.prototype.init.call(this),this.push=function(a){({pat:function(){},pes:function(){var t,o;switch(a.streamType){case Yo.H264_STREAM_TYPE:case Yo.H264_STREAM_TYPE:t=e,o="video";break;case Yo.ADTS_STREAM_TYPE:t=n,o="audio";break;case Yo.METADATA_STREAM_TYPE:t=r,o="timed-metadata";break;default:return}a.payloadUnitStartIndicator&&i(t,o,!0),t.data.push(a),t.size+=a.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]},n=a.programMapTable;null!==n.video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.video,codec:"avc",type:"video"}),null!==n.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.audio,codec:"adts",type:"audio"}),t.trigger("data",e)}})[a.type]()},this.flush=function(){i(e,"video"),i(n,"audio"),i(r,"timed-metadata"),this.trigger("done")}}).prototype=new Ro;var us={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:rs,TransportParseStream:is,ElementaryStream:as,TimestampRolloverStream:ss,CaptionStream:qo.CaptionStream,Cea608Stream:qo.Cea608Stream,MetadataStream:os};for(var ls in Yo)Yo.hasOwnProperty(ls)&&(us[ls]=Yo[ls]);var cs,hs=us,fs=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(cs=function(){var t;cs.prototype.init.call(this),this.push=function(e){var n,r,i,a,o,s=0,u=0;if("audio"===e.type)for(t?(i=t,(t=new Uint8Array(i.byteLength+e.data.byteLength)).set(i),t.set(e.data,i.byteLength)):t=e.data;s+5<t.length;)if(255===t[s]&&240==(246&t[s+1])){if(n=2*(1&~t[s+1]),o=9e4*(a=1024*(1+(3&t[s+6])))/fs[(60&t[s+2])>>>2],t.byteLength<(r=s+((3&t[s+3])<<11|t[s+4]<<3|(224&t[s+5])>>5)))return;if(this.trigger("data",{pts:e.pts+u*o,dts:e.dts+u*o,sampleCount:a,audioobjecttype:1+(t[s+2]>>>6&3),channelcount:(1&t[s+2])<<2|(192&t[s+3])>>>6,samplerate:fs[(60&t[s+2])>>>2],samplingfrequencyindex:(60&t[s+2])>>>2,samplesize:16,data:t.subarray(s+7+n,r)}),t.byteLength===r)return void(t=void 0);u++,t=t.subarray(r)}else s++},this.flush=function(){this.trigger("done")}}).prototype=new Ro;var ds,ps,gs,vs=cs;(ps=function(){var t,e,n=0;ps.prototype.init.call(this),this.push=function(r){var i;for(e=e?((i=new Uint8Array(e.byteLength+r.data.byteLength)).set(e),i.set(r.data,e.byteLength),i):r.data;n<e.byteLength-3;n++)if(1===e[n+2]){t=n+5;break}for(;t<e.byteLength;)switch(e[t]){case 0:if(0!==e[t-1]){t+=2;break}if(0!==e[t-2]){t++;break}for(n+3!==t-2&&this.trigger("data",e.subarray(n+3,t-2));1!==e[++t]&&t<e.length;);n=t-2,t+=3;break;case 1:if(0!==e[t-1]||0!==e[t-2]){t+=3;break}this.trigger("data",e.subarray(n+3,t-2)),n=t-2,t+=3;break;default:t+=3}e=e.subarray(n),t-=n,n=0},this.flush=function(){e&&3<e.byteLength&&this.trigger("data",e.subarray(n+3)),e=null,n=0,this.trigger("done")}}).prototype=new Ro,gs={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(ds=function(){var t,e,n,r,i,a,o,s=new ps;ds.prototype.init.call(this),(t=this).push=function(t){"video"===t.type&&(e=t.trackId,n=t.pts,r=t.dts,s.push(t))},s.on("data",function(o){var s={trackId:e,pts:n,dts:r,data:o};switch(31&o[0]){case 5:s.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:s.nalUnitType="sei_rbsp",s.escapedRBSP=i(o.subarray(1));break;case 7:s.nalUnitType="seq_parameter_set_rbsp",s.escapedRBSP=i(o.subarray(1)),s.config=a(s.escapedRBSP);break;case 8:s.nalUnitType="pic_parameter_set_rbsp";break;case 9:s.nalUnitType="access_unit_delimiter_rbsp"}t.trigger("data",s)}),s.on("done",function(){t.trigger("done")}),this.flush=function(){s.flush()},o=function(t,e){var n,r=8,i=8;for(n=0;n<t;n++)0!==i&&(i=(r+e.readExpGolomb()+256)%256),r=0===i?r:i},i=function(t){for(var e,n,r=t.byteLength,i=[],a=1;a<r-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return t;e=r-i.length,n=new Uint8Array(e);var o=0;for(a=0;a<e;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=t[o];return n},a=function(t){var e,n,r,i,a,s,u,l,c,h,f,d,p,g=0,v=0,m=0,y=0,_=1;if(n=(e=new function(t){var e=t.byteLength,n=0,r=0;this.length=function(){return 8*e},this.bitsAvailable=function(){return 8*e+r},this.loadWord=function(){var i=t.byteLength-e,a=new Uint8Array(4),o=Math.min(4,e);if(0===o)throw new Error("no bytes available");a.set(t.subarray(i,i+o)),n=new DataView(a.buffer).getUint32(0),r=8*o,e-=o},this.skipBits=function(t){var i;t<r||(t-=r,t-=8*(i=Math.floor(t/8)),e-=i,this.loadWord()),n<<=t,r-=t},this.readBits=function(t){var i=Math.min(r,t),a=n>>>32-i;return 0<(r-=i)?n<<=i:0<e&&this.loadWord(),0<(i=t-i)?a<<i|this.readBits(i):a},this.skipLeadingZeros=function(){var t;for(t=0;t<r;++t)if(0!=(n&2147483648>>>t))return n<<=t,r-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()}(t)).readUnsignedByte(),i=e.readUnsignedByte(),r=e.readUnsignedByte(),e.skipUnsignedExpGolomb(),gs[n]&&(3===(a=e.readUnsignedExpGolomb())&&e.skipBits(1),e.skipUnsignedExpGolomb(),e.skipUnsignedExpGolomb(),e.skipBits(1),e.readBoolean()))for(f=3!==a?8:12,p=0;p<f;p++)e.readBoolean()&&o(p<6?16:64,e);if(e.skipUnsignedExpGolomb(),0===(s=e.readUnsignedExpGolomb()))e.readUnsignedExpGolomb();else if(1===s)for(e.skipBits(1),e.skipExpGolomb(),e.skipExpGolomb(),u=e.readUnsignedExpGolomb(),p=0;p<u;p++)e.skipExpGolomb();if(e.skipUnsignedExpGolomb(),e.skipBits(1),l=e.readUnsignedExpGolomb(),c=e.readUnsignedExpGolomb(),0===(h=e.readBits(1))&&e.skipBits(1),e.skipBits(1),e.readBoolean()&&(g=e.readUnsignedExpGolomb(),v=e.readUnsignedExpGolomb(),m=e.readUnsignedExpGolomb(),y=e.readUnsignedExpGolomb()),e.readBoolean()&&e.readBoolean()){switch(e.readUnsignedByte()){case 1:d=[1,1];break;case 2:d=[12,11];break;case 3:d=[10,11];break;case 4:d=[16,11];break;case 5:d=[40,33];break;case 6:d=[24,11];break;case 7:d=[20,11];break;case 8:d=[32,11];break;case 9:d=[80,33];break;case 10:d=[18,11];break;case 11:d=[15,11];break;case 12:d=[64,33];break;case 13:d=[160,99];break;case 14:d=[4,3];break;case 15:d=[3,2];break;case 16:d=[2,1];break;case 255:d=[e.readUnsignedByte()<<8|e.readUnsignedByte(),e.readUnsignedByte()<<8|e.readUnsignedByte()]}d&&(_=d[0]/d[1])}return{profileIdc:n,levelIdc:r,profileCompatibility:i,width:Math.ceil((16*(l+1)-2*g-2*v)*_),height:(2-h)*(c+1)*16-2*m-2*y}}}).prototype=new Ro;var ms,ys={H264Stream:ds,NalByteStream:ps};(ms=function(){var t=new Uint8Array,e=0;ms.prototype.init.call(this),this.setTimestamp=function(t){e=t},this.parseId3TagSize=function(t,e){var n=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return(16&t[e+5])>>4?n+20:n+10},this.parseAdtsSize=function(t,e){return 6144&t[e+3]|t[e+4]<<3|(224&t[e+5])>>5},this.push=function(n){var r,i,a,o=0,s=0;for(t.length?(a=t.length,(t=new Uint8Array(n.byteLength+a)).set(t.subarray(0,a)),t.set(n,a)):t=n;3<=t.length-s;)if(t[s]!=="I".charCodeAt(0)||t[s+1]!=="D".charCodeAt(0)||t[s+2]!=="3".charCodeAt(0))if(!0&t[s]&&240==(240&t[s+1])){if(t.length-s<7)break;if((o=this.parseAdtsSize(t,s))>t.length)break;i={type:"audio",data:t.subarray(s,s+o),pts:e,dts:e},this.trigger("data",i),s+=o}else s++;else{if(t.length-s<10)break;if((o=this.parseId3TagSize(t,s))>t.length)break;r={type:"timed-metadata",data:t.subarray(s,s+o)},this.trigger("data",r),s+=o}t=0<t.length-s?t.subarray(s):new Uint8Array}}).prototype=new Ro;var _s,bs,xs,ws,Ss,Ts,Os,Ms=ms,ks=[33,16,5,32,164,27],Cs=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Es=function(t){for(var e=[];t--;)e.push(0);return e},As={96000:[ks,[227,64],Es(154),[56]],88200:[ks,[231],Es(170),[56]],64000:[ks,[248,192],Es(240),[56]],48000:[ks,[255,192],Es(268),[55,148,128],Es(54),[112]],44100:[ks,[255,192],Es(268),[55,163,128],Es(84),[112]],32000:[ks,[255,192],Es(268),[55,234],Es(226),[112]],24000:[ks,[255,192],Es(268),[55,255,128],Es(268),[111,112],Es(126),[224]],16000:[ks,[255,192],Es(268),[55,255,128],Es(268),[111,255],Es(269),[223,108],Es(195),[1,192]],12000:[Cs,Es(268),[3,127,248],Es(268),[6,255,240],Es(268),[13,255,224],Es(268),[27,253,128],Es(259),[56]],11025:[Cs,Es(268),[3,127,248],Es(268),[6,255,240],Es(268),[13,255,224],Es(268),[27,255,192],Es(268),[55,175,128],Es(108),[112]],8000:[Cs,Es(268),[3,121,16],Es(47),[7]]},Is=(_s=As,Object.keys(_s).reduce(function(t,e){return t[e]=new Uint8Array(_s[e].reduce(function(t,e){return t.concat(e)},[])),t},{}));Ts=function(t,e){return bs(Ss(t,e))},Os=function(t,e){return xs(ws(t),e)},bs=function(t){return 9e4*t},xs=function(t,e){return t*e},ws=function(t){return t/9e4},Ss=function(t,e){return t/e};var Ps,Ls,Ds,js,Rs,Ns,Bs,Fs=Ts,Us=Os,zs=ys.H264Stream,Vs=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Hs=["width","height","profileIdc","levelIdc","profileCompatibility"];Rs=function(t){return t[0]==="I".charCodeAt(0)&&t[1]==="D".charCodeAt(0)&&t[2]==="3".charCodeAt(0)},Ns=function(t,e){var n;if(t.length!==e.length)return!1;for(n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},Bs=function(t){var e,n=0;for(e=0;e<t.length;e++)n+=t[e].data.byteLength;return n},(Ls=function(t,e){var n=[],r=0,i=0,a=0,o=1/0;e=e||{},Ls.prototype.init.call(this),this.push=function(e){Fo(t,e),t&&Vs.forEach(function(n){t[n]=e[n]}),n.push(e)},this.setEarliestDts=function(e){i=e-t.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(t){o=t},this.setAudioAppendStart=function(t){a=t},this.flush=function(){var i,a,o,s;0!==n.length&&(i=this.trimAdtsFramesByEarliestDts_(n),t.baseMediaDecodeTime=Bo(t,e.keepOriginalTimestamps),this.prefixWithSilence_(t,i),t.samples=this.generateSampleTable_(i),o=Do.mdat(this.concatenateFrameData_(i)),n=[],a=Do.moof(r,[t]),s=new Uint8Array(a.byteLength+o.byteLength),r++,s.set(a),s.set(o,a.byteLength),No(t),this.trigger("data",{track:t,boxes:s})),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(t,e){var n,r,i,s,u=0,l=0,c=0;if(e.length&&(n=Fs(t.baseMediaDecodeTime,t.samplerate),r=Math.ceil(9e4/(t.samplerate/1024)),a&&o&&(u=n-Math.max(a,o),c=(l=Math.floor(u/r))*r),!(l<1||45e3<c))){for((i=Is[t.samplerate])||(i=e[0].data),s=0;s<l;s++)e.splice(s,0,{data:i});t.baseMediaDecodeTime-=Math.floor(Us(c,t.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(e){return t.minSegmentDts>=i?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=i&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},this.generateSampleTable_=function(t){var e,n=[];for(e=0;e<t.length;e++)n.push({size:t[e].data.byteLength,duration:1024});return n},this.concatenateFrameData_=function(t){var e,n,r=0,i=new Uint8Array(Bs(t));for(e=0;e<t.length;e++)i.set((n=t[e]).data,r),r+=n.data.byteLength;return i}}).prototype=new Ro,(Ps=function(t,e){var n,r,i=0,a=[],o=[];e=e||{},Ps.prototype.init.call(this),delete t.minPTS,this.gopCache_=[],this.push=function(e){Fo(t,e),"seq_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.config,t.sps=[e.data],Hs.forEach(function(e){t[e]=n[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||r||(r=e.data,t.pps=[e.data]),a.push(e)},this.flush=function(){for(var n,r,s,u,l,c;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=function(t){var e,n,r=[],i=[];for(e=r.byteLength=0;e<t.length;e++)"access_unit_delimiter_rbsp"===(n=t[e]).nalUnitType?(r.length&&(r.duration=n.dts-r.dts,i.push(r)),(r=[n]).byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return i.length&&(!r.duration||r.duration<=0)&&(r.duration=i[i.length-1].duration),i.push(r),i}(a),(s=function(t){var e,n,r=[],i=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=t[0].pts,r.dts=t[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=t[0].pts,i.dts=t[0].dts,e=0;e<t.length;e++)(n=t[e]).keyFrame?(r.length&&(i.push(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration),(r=[n]).nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return i.length&&r.duration<=0&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration,i.push(r),i}(n))[0][0].keyFrame||((r=this.getGopForFusion_(a[0],t))?(s.unshift(r),s.byteLength+=r.byteLength,s.nalCount+=r.nalCount,s.pts=r.pts,s.dts=r.dts,s.duration+=r.duration):s=function(t){var e;return!t[0][0].keyFrame&&1<t.length&&(e=t.shift(),t.byteLength-=e.byteLength,t.nalCount-=e.nalCount,t[0][0].dts=e.dts,t[0][0].pts=e.pts,t[0][0].duration+=e.duration),t}(s)),o.length){var h;if(!(h=e.alignGopsAtEnd?this.alignGopsAtEnd_(s):this.alignGopsAtStart_(s)))return this.gopCache_.unshift({gop:s.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");No(t),s=h}Fo(t,s),t.samples=function(t,e){var n,r,i,a,o,s,u=0,l=[];for(n=0;n<t.length;n++)for(a=t[n],r=0;r<a.length;r++)o=a[r],s=void 0,(s={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}).dataOffset=u,s.compositionTimeOffset=o.pts-o.dts,s.duration=o.duration,s.size=4*o.length,s.size+=o.byteLength,o.keyFrame&&(s.flags.dependsOn=2,s.flags.isNonSyncSample=0),u+=(i=s).size,l.push(i);return l}(s),l=Do.mdat(function(t){var e,n,r,i,a,o,s=0,u=new Uint8Array(t.byteLength+4*t.nalCount),l=new DataView(u.buffer);for(e=0;e<t.length;e++)for(i=t[e],n=0;n<i.length;n++)for(a=i[n],r=0;r<a.length;r++)l.setUint32(s,(o=a[r]).data.byteLength),u.set(o.data,s+=4),s+=o.data.byteLength;return u}(s)),t.baseMediaDecodeTime=Bo(t,e.keepOriginalTimestamps),this.trigger("processedGopsInfo",s.map(function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}})),this.gopCache_.unshift({gop:s.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",t.baseMediaDecodeTime),this.trigger("timelineStartInfo",t.timelineStartInfo),u=Do.moof(i,[t]),c=new Uint8Array(u.byteLength+l.byteLength),i++,c.set(u),c.set(l,u.byteLength),this.trigger("data",{track:t,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){No(t),r=n=void 0},this.getGopForFusion_=function(e){var n,r,i,a,o,s=1/0;for(o=0;o<this.gopCache_.length;o++)i=(a=this.gopCache_[o]).gop,t.pps&&Ns(t.pps[0],a.pps[0])&&t.sps&&Ns(t.sps[0],a.sps[0])&&(i.dts<t.timelineStartInfo.dts||-1e4<=(n=e.dts-i.dts-i.duration)&&n<=45e3&&(!r||n<s)&&(r=a,s=n));return r?r.gop:null},this.alignGopsAtStart_=function(t){var e,n,r,i,a,s,u,l;for(a=t.byteLength,s=t.nalCount,u=t.duration,e=n=0;e<o.length&&n<t.length&&(r=o[e]).pts!==(i=t[n]).pts;)i.pts>r.pts?e++:(n++,a-=i.byteLength,s-=i.nalCount,u-=i.duration);return 0===n?t:n===t.length?null:((l=t.slice(n)).byteLength=a,l.duration=u,l.nalCount=s,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(t){var e,n,r,i,a,s,u;for(e=o.length-1,n=t.length-1,a=null,s=!1;0<=e&&0<=n;){if((r=o[e]).pts===(i=t[n]).pts){s=!0;break}r.pts>i.pts?e--:(e===o.length-1&&(a=n),n--)}if(!s&&null===a)return null;if(0===(u=s?n:a))return t;var l=t.slice(u),c=l.reduce(function(t,e){return t.byteLength+=e.byteLength,t.duration+=e.duration,t.nalCount+=e.nalCount,t},{byteLength:0,duration:0,nalCount:0});return l.byteLength=c.byteLength,l.duration=c.duration,l.nalCount=c.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(t){o=t}}).prototype=new Ro,(js=function(t,e){this.numberOfTracks=0,this.metadataStream=e,this.remuxTracks=void 0===t.remux||!!t.remux,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,js.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBoxes.push(t.boxes),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track),void("audio"===t.track.type&&(this.audioTrack=t.track)))}}).prototype=new Ro,js.prototype.flush=function(t){var e,n,r,i,a=0,o={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,Hs.forEach(function(t){o.info[t]=this.videoTrack[t]},this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,Vs.forEach(function(t){o.info[t]=this.audioTrack[t]},this)),o.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,r=Do.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(r.byteLength),o.initSegment.set(r),o.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)o.data.set(this.pendingBoxes[i],a),a+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(e=this.pendingCaptions[i]).startTime=e.startPts-s,e.startTime/=9e4,e.endTime=e.endPts-s,e.endTime/=9e4,o.captionStreams[e.stream]=!0,o.captions.push(e);for(i=0;i<this.pendingMetadata.length;i++)(n=this.pendingMetadata[i]).cueTime=n.pts-s,n.cueTime/=9e4,o.metadata.push(n);o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(Ds=function(t){var e,n,r=this,i=!0;Ds.prototype.init.call(this),this.baseMediaDecodeTime=(t=t||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var e={};(this.transmuxPipeline_=e).type="aac",e.metadataStream=new hs.MetadataStream,e.aacStream=new Ms,e.audioTimestampRolloverStream=new hs.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new hs.TimestampRolloverStream("timed-metadata"),e.adtsStream=new vs,e.coalesceStream=new js(t,e.metadataStream),e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream),e.metadataStream.on("timestamp",function(t){e.aacStream.setTimestamp(t.timeStamp)}),e.aacStream.on("data",function(i){"timed-metadata"!==i.type||e.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:r.baseMediaDecodeTime},codec:"adts",type:"audio"},e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new Ls(n,t),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream))}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var i={};(this.transmuxPipeline_=i).type="ts",i.metadataStream=new hs.MetadataStream,i.packetStream=new hs.TransportPacketStream,i.parseStream=new hs.TransportParseStream,i.elementaryStream=new hs.ElementaryStream,i.videoTimestampRolloverStream=new hs.TimestampRolloverStream("video"),i.audioTimestampRolloverStream=new hs.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new hs.TimestampRolloverStream("timed-metadata"),i.adtsStream=new vs,i.h264Stream=new zs,i.captionStream=new hs.CaptionStream,i.coalesceStream=new js(t,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream),i.elementaryStream.pipe(i.videoTimestampRolloverStream).pipe(i.h264Stream),i.elementaryStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.elementaryStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",function(a){var o;if("metadata"===a.type){for(o=a.tracks.length;o--;)e||"video"!==a.tracks[o].type?n||"audio"!==a.tracks[o].type||((n=a.tracks[o]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime):(e=a.tracks[o]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime;e&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new Ps(e,t),i.videoSegmentStream.on("timelineStartInfo",function(t){n&&(n.timelineStartInfo=t,i.audioSegmentStream.setEarliestDts(t.dts))}),i.videoSegmentStream.on("processedGopsInfo",r.trigger.bind(r,"gopInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",function(t){n&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(t)}),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),n&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new Ls(n,t),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream))}}),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(t){var r=this.transmuxPipeline_;this.baseMediaDecodeTime=t,n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,No(n),n.timelineStartInfo.baseMediaDecodeTime=t,r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),e&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[],r.videoTimestampRolloverStream.discontinuity()),e.timelineStartInfo.dts=void 0,e.timelineStartInfo.pts=void 0,No(e),r.captionStream.reset(),e.timelineStartInfo.baseMediaDecodeTime=t),r.timedMetadataTimestampRolloverStream&&r.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.alignGopsWith=function(t){e&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(t)},this.push=function(t){if(i){var e=Rs(t);e&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():e||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1}this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new Ro;var Gs,Ws,qs=Po.parseType,Ys=function(t){return new Date(1e3*t-20828448e5)},Xs=function(t){return{isLeading:(12&t[0])>>>2,dependsOn:3&t[0],isDependedOn:(192&t[1])>>>6,hasRedundancy:(48&t[1])>>>4,paddingValue:(14&t[1])>>>1,isNonSyncSample:1&t[1],degradationPriority:t[2]<<8|t[3]}},$s={avc1:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{dataReferenceIndex:e.getUint16(6),width:e.getUint16(24),height:e.getUint16(26),horizresolution:e.getUint16(28)+e.getUint16(30)/16,vertresolution:e.getUint16(32)+e.getUint16(34)/16,frameCount:e.getUint16(40),depth:e.getUint16(74),config:Gs(t.subarray(78,t.byteLength))}},avcC:function(t){var e,n,r,i,a=new DataView(t.buffer,t.byteOffset,t.byteLength),o={configurationVersion:t[0],avcProfileIndication:t[1],profileCompatibility:t[2],avcLevelIndication:t[3],lengthSizeMinusOne:3&t[4],sps:[],pps:[]},s=31&t[5];for(r=6,i=0;i<s;i++)n=a.getUint16(r),r+=2,o.sps.push(new Uint8Array(t.subarray(r,r+n))),r+=n;for(e=t[r],r++,i=0;i<e;i++)n=a.getUint16(r),r+=2,o.pps.push(new Uint8Array(t.subarray(r,r+n))),r+=n;return o},btrt:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{bufferSizeDB:e.getUint32(0),maxBitrate:e.getUint32(4),avgBitrate:e.getUint32(8)}},esds:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),esId:t[6]<<8|t[7],streamPriority:31&t[8],decoderConfig:{objectProfileIndication:t[11],streamType:t[12]>>>2&63,bufferSize:t[13]<<16|t[14]<<8|t[15],maxBitrate:t[16]<<24|t[17]<<16|t[18]<<8|t[19],avgBitrate:t[20]<<24|t[21]<<16|t[22]<<8|t[23],decoderConfigDescriptor:{tag:t[24],length:t[25],audioObjectType:t[26]>>>3&31,samplingFrequencyIndex:(7&t[26])<<1|t[27]>>>7&1,channelConfiguration:t[27]>>>3&15}}}},ftyp:function(t){for(var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={majorBrand:qs(t.subarray(0,4)),minorVersion:e.getUint32(4),compatibleBrands:[]},r=8;r<t.byteLength;)n.compatibleBrands.push(qs(t.subarray(r,r+4))),r+=4;return n},dinf:function(t){return{boxes:Gs(t)}},dref:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),dataReferences:Gs(t.subarray(8))}},hdlr:function(t){var e={version:new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0),flags:new Uint8Array(t.subarray(1,4)),handlerType:qs(t.subarray(8,12)),name:""},n=8;for(n=24;n<t.byteLength;n++){if(0===t[n]){n++;break}e.name+=String.fromCharCode(t[n])}return e.name=decodeURIComponent(escape(e.name)),e},mdat:function(t){return{byteLength:t.byteLength,nals:function(t){var e,n,r=new DataView(t.buffer,t.byteOffset,t.byteLength),i=[];for(e=0;e+4<t.length;e+=n)if(n=r.getUint32(e),e+=4,n<=0)i.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&t[e]){case 1:i.push("slice_layer_without_partitioning_rbsp");break;case 5:i.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:i.push("sei_rbsp");break;case 7:i.push("seq_parameter_set_rbsp");break;case 8:i.push("pic_parameter_set_rbsp");break;case 9:i.push("access_unit_delimiter_rbsp");break;default:i.push("UNKNOWN NAL - "+t[e]&31)}return i}(t)}},mdhd:function(t){var e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r=4,i={version:n.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),language:""};return 1===i.version?(i.creationTime=Ys(n.getUint32(r+=4)),i.modificationTime=Ys(n.getUint32(r+=8)),i.timescale=n.getUint32(r+=4),r+=8):(i.creationTime=Ys(n.getUint32(r)),i.modificationTime=Ys(n.getUint32(r+=4)),i.timescale=n.getUint32(r+=4),r+=4),i.duration=n.getUint32(r),e=n.getUint16(r+=4),i.language+=String.fromCharCode(96+(e>>10)),i.language+=String.fromCharCode(96+((992&e)>>5)),i.language+=String.fromCharCode(96+(31&e)),i},mdia:function(t){return{boxes:Gs(t)}},mfhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sequenceNumber:t[4]<<24|t[5]<<16|t[6]<<8|t[7]}},minf:function(t){return{boxes:Gs(t)}},mp4a:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={dataReferenceIndex:e.getUint16(6),channelcount:e.getUint16(16),samplesize:e.getUint16(18),samplerate:e.getUint16(24)+e.getUint16(26)/65536};return 28<t.byteLength&&(n.streamDescriptor=Gs(t.subarray(28))[0]),n},moof:function(t){return{boxes:Gs(t)}},moov:function(t){return{boxes:Gs(t)}},mvex:function(t){return{boxes:Gs(t)}},mvhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,r={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return 1===r.version?(r.creationTime=Ys(e.getUint32(n+=4)),r.modificationTime=Ys(e.getUint32(n+=8)),r.timescale=e.getUint32(n+=4),n+=8):(r.creationTime=Ys(e.getUint32(n)),r.modificationTime=Ys(e.getUint32(n+=4)),r.timescale=e.getUint32(n+=4),n+=4),r.duration=e.getUint32(n),r.rate=e.getUint16(n+=4)+e.getUint16(n+2)/16,r.volume=e.getUint8(n+=4)+e.getUint8(n+1)/8,n+=2,n+=2,n+=8,r.matrix=new Uint32Array(t.subarray(n,n+36)),n+=36,r.nextTrackId=e.getUint32(n+=24),r},pdin:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),rate:e.getUint32(4),initialDelay:e.getUint32(8)}},sdtp:function(t){var e,n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]};for(e=4;e<t.byteLength;e++)n.samples.push({dependsOn:(48&t[e])>>4,isDependedOn:(12&t[e])>>2,hasRedundancy:3&t[e]});return n},sidx:function(t){var e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},i=n.getUint16(22);for(e=24;i;e+=12,i--)r.references.push({referenceType:(128&t[e])>>>7,referencedSize:2147483647&n.getUint32(e),subsegmentDuration:n.getUint32(e+4),startsWithSap:!!(128&t[e+8]),sapType:(112&t[e+8])>>>4,sapDeltaTime:268435455&n.getUint32(e+8)});return r},smhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),balance:t[4]+t[5]/256}},stbl:function(t){return{boxes:Gs(t)}},stco:function(t){var e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),chunkOffsets:[]},i=n.getUint32(4);for(e=8;i;e+=4,i--)r.chunkOffsets.push(n.getUint32(e));return r},stsc:function(t){var e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r=n.getUint32(4),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleToChunks:[]};for(e=8;r;e+=12,r--)i.sampleToChunks.push({firstChunk:n.getUint32(e),samplesPerChunk:n.getUint32(e+4),sampleDescriptionIndex:n.getUint32(e+8)});return i},stsd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleDescriptions:Gs(t.subarray(8))}},stsz:function(t){var e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(e=12;e<t.byteLength;e+=4)r.entries.push(n.getUint32(e));return r},stts:function(t){var e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),timeToSamples:[]},i=n.getUint32(4);for(e=8;i;e+=8,i--)r.timeToSamples.push({sampleCount:n.getUint32(e),sampleDelta:n.getUint32(e+4)});return r},styp:function(t){return $s.ftyp(t)},tfdt:function(t){var e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),baseMediaDecodeTime:t[4]<<24|t[5]<<16|t[6]<<8|t[7]};return 1===e.version&&(e.baseMediaDecodeTime*=Math.pow(2,32),e.baseMediaDecodeTime+=t[8]<<24|t[9]<<16|t[10]<<8|t[11]),e},tfhd:function(t){var e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:n.getUint32(4)},i=1&r.flags[2],a=2&r.flags[2],o=8&r.flags[2],s=16&r.flags[2],u=32&r.flags[2],l=65536&r.flags[0],c=131072&r.flags[0];return e=8,i&&(e+=4,r.baseDataOffset=n.getUint32(12),e+=4),a&&(r.sampleDescriptionIndex=n.getUint32(e),e+=4),o&&(r.defaultSampleDuration=n.getUint32(e),e+=4),s&&(r.defaultSampleSize=n.getUint32(e),e+=4),u&&(r.defaultSampleFlags=n.getUint32(e)),l&&(r.durationIsEmpty=!0),!i&&c&&(r.baseDataOffsetIsMoof=!0),r},tkhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,r={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return 1===r.version?(r.creationTime=Ys(e.getUint32(n+=4)),r.modificationTime=Ys(e.getUint32(n+=8)),r.trackId=e.getUint32(n+=4),n+=4,n+=8):(r.creationTime=Ys(e.getUint32(n)),r.modificationTime=Ys(e.getUint32(n+=4)),r.trackId=e.getUint32(n+=4),n+=4,n+=4),r.duration=e.getUint32(n),n+=4,r.layer=e.getUint16(n+=8),r.alternateGroup=e.getUint16(n+=2),r.volume=e.getUint8(n+=2)+e.getUint8(n+1)/8,n+=2,n+=2,r.matrix=new Uint32Array(t.subarray(n,n+36)),r.width=e.getUint16(n+=36)+e.getUint16(n+2)/16,r.height=e.getUint16(n+=4)+e.getUint16(n+2)/16,r},traf:function(t){return{boxes:Gs(t)}},trak:function(t){return{boxes:Gs(t)}},trex:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:e.getUint32(4),defaultSampleDescriptionIndex:e.getUint32(8),defaultSampleDuration:e.getUint32(12),defaultSampleSize:e.getUint32(16),sampleDependsOn:3&t[20],sampleIsDependedOn:(192&t[21])>>6,sampleHasRedundancy:(48&t[21])>>4,samplePaddingValue:(14&t[21])>>1,sampleIsDifferenceSample:!!(1&t[21]),sampleDegradationPriority:e.getUint16(22)}},trun:function(t){var e,n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},r=new DataView(t.buffer,t.byteOffset,t.byteLength),i=1&n.flags[2],a=4&n.flags[2],o=1&n.flags[1],s=2&n.flags[1],u=4&n.flags[1],l=8&n.flags[1],c=r.getUint32(4),h=8;for(i&&(n.dataOffset=r.getInt32(h),h+=4),a&&c&&(e={flags:Xs(t.subarray(h,h+4))},h+=4,o&&(e.duration=r.getUint32(h),h+=4),s&&(e.size=r.getUint32(h),h+=4),l&&(e.compositionTimeOffset=r.getUint32(h),h+=4),n.samples.push(e),c--);c--;)e={},o&&(e.duration=r.getUint32(h),h+=4),s&&(e.size=r.getUint32(h),h+=4),u&&(e.flags=Xs(t.subarray(h,h+4)),h+=4),l&&(e.compositionTimeOffset=r.getUint32(h),h+=4),n.samples.push(e);return n},"url ":function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4))}},vmhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),graphicsmode:e.getUint16(4),opcolor:new Uint16Array([e.getUint16(6),e.getUint16(8),e.getUint16(10)])}}},Zs={inspect:Gs=function(t){for(var e,n,r,i,a,o=0,s=[],u=new ArrayBuffer(t.length),l=new Uint8Array(u),c=0;c<t.length;++c)l[c]=t[c];for(e=new DataView(u);o<t.byteLength;)n=e.getUint32(o),r=qs(t.subarray(o+4,o+8)),i=1<n?o+n:t.byteLength,(a=($s[r]||function(t){return{data:t}})(t.subarray(o+8,i))).size=n,a.type=r,s.push(a),o=i;return s},textify:Ws=function(t,e){var n;return e=e||0,n=new Array(2*e+1).join(" "),t.map(function(t,r){return n+t.type+"\n"+Object.keys(t).filter(function(t){return"type"!==t&&"boxes"!==t}).map(function(e){var r=n+"  "+e+": ",i=t[e];if(i instanceof Uint8Array||i instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(i.buffer,i.byteOffset,i.byteLength)).map(function(t){return" "+("00"+t.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return a?1===a.length?r+"<"+a.join("").slice(1)+">":r+"<\n"+a.map(function(t){return n+"  "+t}).join("\n")+"\n"+n+"  >":r+"<>"}return r+JSON.stringify(i,null,2).split("\n").map(function(t,e){return 0===e?t:n+"  "+t}).join("\n")}).join("\n")+(t.boxes?"\n"+Ws(t.boxes,e+1):"")}).join("\n")},parseTfdt:$s.tfdt,parseHdlr:$s.hdlr,parseTfhd:$s.tfhd,parseTrun:$s.trun},Qs=function(t){for(var e,n,r=t.byteLength,i=[],a=1;a<r-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return t;e=r-i.length,n=new Uint8Array(e);var o=0;for(a=0;a<e;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=t[o];return n},Ks=qo.CaptionStream,Js=function(t,e){for(var n=t,r=0;r<e.length;r++){var i=e[r];if(n<i.size)return i;n-=i.size}return null},tu={generator:Do,probe:Po,Transmuxer:Ds,AudioSegmentStream:Ls,VideoSegmentStream:Ps,CaptionParser:function(){var t,e,n,r,i,a=!1;this.isInitialized=function(){return a},this.init=function(){t=new Ks,a=!0,t.on("data",function(t){t.startTime=t.startPts/r,t.endTime=t.endPts/r,i.captions.push(t),i.captionStreams[t.stream]=!0})},this.isNewInit=function(t,e){return!(t&&0===t.length||e&&"object"==typeof e&&0===Object.keys(e).length||n===t[0]&&r===e[n])},this.parse=function(t,a,o){var s,u,l;if(!this.isInitialized())return null;if(!a||!o)return null;if(this.isNewInit(a,o))r=o[n=a[0]];else if(!n||!r)return e.push(t),null;for(;0<e.length;){var c=e.shift();this.parse(c,a,o)}return l=r,null!==(s=(u=n)?{seiNals:function(t,e){var n=Po.findBox(t,["moof","traf"]),r={},i=[];return Po.findBox(t,["mdat"]).forEach(function(t,e){i.push({mdat:t,traf:n[e]})}),i.forEach(function(t){var n,i,a,o,s,u,l,c=t.mdat,h=t.traf,f=Po.findBox(h,["tfhd"]),d=Zs.parseTfhd(f[0]),p=d.trackId,g=Po.findBox(h,["tfdt"]),v=0<g.length?Zs.parseTfdt(g[0]).baseMediaDecodeTime:0,m=Po.findBox(h,["trun"]);e===p&&0<m.length&&(a=v,o=(i=d).defaultSampleDuration||0,s=i.defaultSampleSize||0,u=i.trackId,l=[],m.forEach(function(t){var e=Zs.parseTrun(t).samples;e.forEach(function(t){void 0===t.duration&&(t.duration=o),void 0===t.size&&(t.size=s),t.trackId=u,t.dts=a,void 0===t.compositionTimeOffset&&(t.compositionTimeOffset=0),t.pts=a+t.compositionTimeOffset,a+=t.duration}),l=l.concat(e)}),n=function(t,e,n){var r,i,a,o,s=new DataView(t.buffer,t.byteOffset,t.byteLength),u=[];for(i=0;i+4<t.length;i+=a)if(a=s.getUint32(i),i+=4,!(a<=0))switch(31&t[i]){case 6:var l=t.subarray(i+1,i+1+a),c=Js(i,e);r={nalUnitType:"sei_rbsp",size:a,data:l,escapedRBSP:Qs(l),trackId:n},c?(r.pts=c.pts,r.dts=c.dts,o=c):(r.pts=o.pts,r.dts=o.dts),u.push(r)}return u}(c,l,p),r[p]||(r[p]=[]),r[p]=r[p].concat(n))}),r}(t,u)[u],timescale:l}:null)&&s.seiNals?(this.pushNals(s.seiNals),this.flushStream(),i):null},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach(function(e){t.push(e)})},this.flushStream=function(){if(!this.isInitialized())return null;t.flush()},this.clearParsedCaptions=function(){i.captions=[],i.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){e=[],r=n=null,i?this.clearParsedCaptions():i={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}}.CaptionParser,eu=function(t){var e=31&t[1];return(e<<=8)|t[2]},nu=function(t){return!!(64&t[1])},ru=function(t){var e=0;return 1<(48&t[3])>>>4&&(e+=t[4]+1),e},iu=function(t){switch(t){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},au=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ou=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},su={parseId3TagSize:function(t,e){var n=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return(16&t[e+5])>>4?n+20:n+10},parseAdtsSize:function(t,e){return 6144&t[e+3]|t[e+4]<<3|(224&t[e+5])>>5},parseType:function(t,e){return t[e]==="I".charCodeAt(0)&&t[e+1]==="D".charCodeAt(0)&&t[e+2]==="3".charCodeAt(0)?"timed-metadata":!0&t[e]&&240==(240&t[e+1])?"audio":null},parseSampleRate:function(t){for(var e=0;e+5<t.length;){if(255===t[e]&&240==(246&t[e+1]))return au[(60&t[e+2])>>>2];e++}return null},parseAacTimestamp:function(t){var e,n,r;e=10,64&t[5]&&(e+=4,e+=ou(t.subarray(10,14)));do{if((n=ou(t.subarray(e+4,e+8)))<1)return null;if("PRIV"===String.fromCharCode(t[e],t[e+1],t[e+2],t[e+3])){r=t.subarray(e+10,e+n+10);for(var i=0;i<r.byteLength;i++)if(0===r[i]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(function(t,e,n){var r,i="";for(r=0;r<n;r++)i+="%"+("00"+t[r].toString(16)).slice(-2);return i}(r,0,i)))break;var a=r.subarray(i+1),o=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return(o*=4)+(3&a[7])}}e+=10,e+=n}while(e<t.byteLength);return null}},uu=Ko,lu={};lu.ts={parseType:function(t,e){var n=eu(t);return 0===n?"pat":n===e?"pmt":e?"pes":null},parsePat:function(t){var e=nu(t),n=4+ru(t);return e&&(n+=t[n]+1),(31&t[n+10])<<8|t[n+11]},parsePmt:function(t){var e={},n=nu(t),r=4+ru(t);if(n&&(r+=t[r]+1),1&t[r+5]){var i;i=3+((15&t[r+1])<<8|t[r+2])-4;for(var a=12+((15&t[r+10])<<8|t[r+11]);a<i;){var o=r+a;e[(31&t[o+1])<<8|t[o+2]]=t[o],a+=5+((15&t[o+3])<<8|t[o+4])}return e}},parsePayloadUnitStartIndicator:nu,parsePesType:function(t,e){switch(e[eu(t)]){case Yo.H264_STREAM_TYPE:return"video";case Yo.ADTS_STREAM_TYPE:return"audio";case Yo.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(t){if(!nu(t))return null;var e=4+ru(t);if(e>=t.byteLength)return null;var n,r=null;return 192&(n=t[e+7])&&((r={}).pts=(14&t[e+9])<<27|(255&t[e+10])<<20|(254&t[e+11])<<12|(255&t[e+12])<<5|(254&t[e+13])>>>3,r.pts*=4,r.pts+=(6&t[e+13])>>>1,r.dts=r.pts,64&n&&(r.dts=(14&t[e+14])<<27|(255&t[e+15])<<20|(254&t[e+16])<<12|(255&t[e+17])<<5|(254&t[e+18])>>>3,r.dts*=4,r.dts+=(6&t[e+18])>>>1)),r},videoPacketContainsKeyFrame:function(t){for(var e=4+ru(t),n=t.subarray(e),r=0,i=0,a=!1;i<n.byteLength-3;i++)if(1===n[i+2]){r=i+5;break}for(;r<n.byteLength;)switch(n[r]){case 0:if(0!==n[r-1]){r+=2;break}if(0!==n[r-2]){r++;break}for(i+3!==r-2&&"slice_layer_without_partitioning_rbsp_idr"===iu(31&n[i+3])&&(a=!0);1!==n[++r]&&r<n.length;);i=r-2,r+=3;break;case 1:if(0!==n[r-1]||0!==n[r-2]){r+=3;break}"slice_layer_without_partitioning_rbsp_idr"===iu(31&n[i+3])&&(a=!0),i=r-2,r+=3;break;default:r+=3}return n=n.subarray(i),r-=i,i=0,n&&3<n.byteLength&&"slice_layer_without_partitioning_rbsp_idr"===iu(31&n[i+3])&&(a=!0),a}},lu.aac=su;var cu=188,hu=function(t,e,n){for(var r,i,a,o,s=0,u=cu,l=!1;u<t.byteLength;)if(71!==t[s]||71!==t[u])s++,u++;else{switch(r=t.subarray(s,u),lu.ts.parseType(r,e.pid)){case"pes":i=lu.ts.parsePesType(r,e.table),a=lu.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&a&&(o=lu.ts.parsePesTime(r))&&(o.type="audio",n.audio.push(o),l=!0)}if(l)break;s+=cu,u+=cu}for(s=(u=t.byteLength)-cu,l=!1;0<=s;)if(71!==t[s]||71!==t[u])s--,u--;else{switch(r=t.subarray(s,u),lu.ts.parseType(r,e.pid)){case"pes":i=lu.ts.parsePesType(r,e.table),a=lu.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&a&&(o=lu.ts.parsePesTime(r))&&(o.type="audio",n.audio.push(o),l=!0)}if(l)break;s-=cu,u-=cu}},fu=function(t,e,n){for(var r,i,a,o,s,u,l,c=0,h=cu,f=!1,d={data:[],size:0};h<t.byteLength;)if(71!==t[c]||71!==t[h])c++,h++;else{switch(r=t.subarray(c,h),lu.ts.parseType(r,e.pid)){case"pes":if(i=lu.ts.parsePesType(r,e.table),a=lu.ts.parsePayloadUnitStartIndicator(r),"video"===i&&(a&&!f&&(o=lu.ts.parsePesTime(r))&&(o.type="video",n.video.push(o),f=!0),!n.firstKeyFrame)){if(a&&0!==d.size){for(s=new Uint8Array(d.size),u=0;d.data.length;)l=d.data.shift(),s.set(l,u),u+=l.byteLength;lu.ts.videoPacketContainsKeyFrame(s)&&(n.firstKeyFrame=lu.ts.parsePesTime(s),n.firstKeyFrame.type="video"),d.size=0}d.data.push(r),d.size+=r.byteLength}}if(f&&n.firstKeyFrame)break;c+=cu,h+=cu}for(c=(h=t.byteLength)-cu,f=!1;0<=c;)if(71!==t[c]||71!==t[h])c--,h--;else{switch(r=t.subarray(c,h),lu.ts.parseType(r,e.pid)){case"pes":i=lu.ts.parsePesType(r,e.table),a=lu.ts.parsePayloadUnitStartIndicator(r),"video"===i&&a&&(o=lu.ts.parsePesTime(r))&&(o.type="video",n.video.push(o),f=!0)}if(f)break;c-=cu,h-=cu}},du=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},pu=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),gu=null,vu=function(){function t(e){du(this,t),gu||(gu=function(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]],e=t[0],n=t[1],r=e[4],i=n[4],a=void 0,o=void 0,s=void 0,u=[],l=[],c=void 0,h=void 0,f=void 0,d=void 0,p=void 0;for(a=0;a<256;a++)l[(u[a]=a<<1^283*(a>>7))^a]=a;for(o=s=0;!r[o];o^=c||1,s=l[s]||1)for(f=(f=s^s<<1^s<<2^s<<3^s<<4)>>8^255&f^99,p=16843009*u[h=u[c=u[i[r[o]=f]=o]]]^65537*h^257*c^16843008*o,d=257*u[f]^16843008*f,a=0;a<4;a++)e[a][o]=d=d<<24^d>>>8,n[a][f]=p=p<<24^p>>>8;for(a=0;a<5;a++)e[a]=e[a].slice(0),n[a]=n[a].slice(0);return t}()),this._tables=[[gu[0][0].slice(),gu[0][1].slice(),gu[0][2].slice(),gu[0][3].slice(),gu[0][4].slice()],[gu[1][0].slice(),gu[1][1].slice(),gu[1][2].slice(),gu[1][3].slice(),gu[1][4].slice()]];var n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=this._tables[0][4],u=this._tables[1],l=e.length,c=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(a=e.slice(0),this._key=[a,o=[]],n=l;n<4*l+28;n++)i=a[n-1],(n%l==0||8===l&&n%l==4)&&(i=s[i>>>24]<<24^s[i>>16&255]<<16^s[i>>8&255]<<8^s[255&i],n%l==0&&(i=i<<8^i>>>24^c<<24,c=c<<1^283*(c>>7))),a[n]=a[n-l]^i;for(r=0;n;r++,n--)i=a[3&r?n:n-4],o[r]=n<=4||r<4?i:u[0][s[i>>>24]]^u[1][s[i>>16&255]]^u[2][s[i>>8&255]]^u[3][s[255&i]]}return t.prototype.decrypt=function(t,e,n,r,i,a){var o=this._key[1],s=t^o[0],u=r^o[1],l=n^o[2],c=e^o[3],h=void 0,f=void 0,d=void 0,p=o.length/4-2,g=void 0,v=4,m=this._tables[1],y=m[0],_=m[1],b=m[2],x=m[3],w=m[4];for(g=0;g<p;g++)h=y[s>>>24]^_[u>>16&255]^b[l>>8&255]^x[255&c]^o[v],f=y[u>>>24]^_[l>>16&255]^b[c>>8&255]^x[255&s]^o[v+1],d=y[l>>>24]^_[c>>16&255]^b[s>>8&255]^x[255&u]^o[v+2],c=y[c>>>24]^_[s>>16&255]^b[u>>8&255]^x[255&l]^o[v+3],v+=4,s=h,u=f,l=d;for(g=0;g<4;g++)i[(3&-g)+a]=w[s>>>24]<<24^w[u>>16&255]<<16^w[l>>8&255]<<8^w[255&c]^o[v++],h=s,s=u,u=l,l=c,c=h},t}(),mu=function(){function t(){du(this,t),this.listeners={}}return t.prototype.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},t.prototype.off=function(t,e){if(!this.listeners[t])return!1;var n=this.listeners[t].indexOf(e);return this.listeners[t].splice(n,1),-1<n},t.prototype.trigger=function(t){var e=this.listeners[t];if(e)if(2===arguments.length)for(var n=e.length,r=0;r<n;++r)e[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),a=e.length,o=0;o<a;++o)e[o].apply(this,i)},t.prototype.dispose=function(){this.listeners={}},t.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},t}(),yu=function(t){function e(){du(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,mu));return n.jobs=[],n.delay=1,n.timeout_=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},e.prototype.push=function(t){this.jobs.push(t),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},e}(mu),_u=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},bu=function(t,e,n){var r=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),i=new vu(Array.prototype.slice.call(e)),a=new Uint8Array(t.byteLength),o=new Int32Array(a.buffer),s=void 0,u=void 0,l=void 0,c=void 0,h=void 0,f=void 0,d=void 0,p=void 0,g=void 0;for(s=n[0],u=n[1],l=n[2],c=n[3],g=0;g<r.length;g+=4)h=_u(r[g]),f=_u(r[g+1]),d=_u(r[g+2]),p=_u(r[g+3]),i.decrypt(h,f,d,p,o,g),o[g]=_u(o[g]^s),o[g+1]=_u(o[g+1]^u),o[g+2]=_u(o[g+2]^l),o[g+3]=_u(o[g+3]^c),s=h,u=f,l=d,c=p;return a},xu=function(){function t(e,n,r,i){du(this,t);var a=t.STEP,o=new Int32Array(e.buffer),s=new Uint8Array(e.byteLength),u=0;for(this.asyncStream_=new yu,this.asyncStream_.push(this.decryptChunk_(o.subarray(u,u+a),n,r,s)),u=a;u<o.length;u+=a)r=new Uint32Array([_u(o[u-4]),_u(o[u-3]),_u(o[u-2]),_u(o[u-1])]),this.asyncStream_.push(this.decryptChunk_(o.subarray(u,u+a),n,r,s));this.asyncStream_.push(function(){var t;i(null,(t=s).subarray(0,t.byteLength-t[t.byteLength-1]))})}return t.prototype.decryptChunk_=function(t,e,n,r){return function(){var i=bu(t,e,n);r.set(i,t.byteOffset)}},pu(t,null,[{key:"STEP",get:function(){return 32e3}}]),t}(),wu=function(e,n){return/^[a-z]+:/i.test(n)?n:(/\/\//i.test(e)||(e=ea.buildAbsoluteURL(t.location.href,e)),ea.buildAbsoluteURL(e,n))},Su=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Tu=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Ou=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Mu=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},ku=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Cu=Ki.mergeOptions,Eu=Ki.EventTarget,Au=Ki.log,Iu=function(t,e){["AUDIO","SUBTITLES"].forEach(function(n){for(var r in t.mediaGroups[n])for(var i in t.mediaGroups[n][r])e(t.mediaGroups[n][r][i],n,r,i)})},Pu=function(t,e){var n=Cu(t,{}),r=n.playlists[e.uri];if(!r)return null;if(r.segments&&e.segments&&r.segments.length===e.segments.length&&r.mediaSequence===e.mediaSequence)return null;var i=Cu(r,e);r.segments&&(i.segments=function(t,e,n){var r=e.slice();n=n||0;for(var i=Math.min(t.length,e.length+n),a=n;a<i;a++)r[a-n]=Cu(t[a],r[a-n]);return r}(r.segments,e.segments,e.mediaSequence-r.mediaSequence)),i.segments.forEach(function(t){var e,n;n=i.resolvedUri,(e=t).resolvedUri||(e.resolvedUri=wu(n,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=wu(n,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=wu(n,e.map.uri))});for(var a=0;a<n.playlists.length;a++)n.playlists[a].uri===e.uri&&(n.playlists[a]=i);return n.playlists[e.uri]=i,n},Lu=function(t){for(var e=t.playlists.length;e--;){var n=t.playlists[e];(t.playlists[n.uri]=n).resolvedUri=wu(t.uri,n.uri),n.id=e,n.attributes||(n.attributes={},Au.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},Du=function(t){Iu(t,function(e){e.uri&&(e.resolvedUri=wu(t.uri,e.uri))})},ju=function(t,e){var n=t.segments[t.segments.length-1];return e&&n&&n.duration?1e3*n.duration:500*(t.targetDuration||10)},Ru=function(e){function n(t,e,r){Su(this,n);var i=Mu(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));if(i.srcUrl=t,i.hls_=e,i.withCredentials=r,!i.srcUrl)throw new Error("A non-empty playlist URL is required");return i.state="HAVE_NOTHING",i.on("mediaupdatetimeout",function(){"HAVE_METADATA"===i.state&&(i.state="HAVE_CURRENT_METADATA",i.request=i.hls_.xhr({uri:wu(i.master.uri,i.media().uri),withCredentials:i.withCredentials},function(t,e){if(i.request)return t?i.playlistRequestError(i.request,i.media().uri,"HAVE_METADATA"):void i.haveMetadata(i.request,i.media().uri)}))}),i}return Ou(n,Eu),Tu(n,[{key:"playlistRequestError",value:function(t,e,n){this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[e],status:t.status,message:"HLS playlist request error at URL: "+e,responseText:t.responseText,code:500<=t.status?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(e,n){var r=this;this.request=null,this.state="HAVE_METADATA";var i=new ca;i.push(e.responseText),i.end(),i.manifest.uri=n,i.manifest.attributes=i.manifest.attributes||{};var a=Pu(this.master,i.manifest);this.targetDuration=i.manifest.targetDuration,a?(this.master=a,this.media_=this.master.playlists[i.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(t.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=t.setTimeout(function(){r.trigger("mediaupdatetimeout")},ju(this.media(),!!a))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest(),t.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}},{key:"media",value:function(t){var e=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}var r=!this.media_||t.uri!==this.media_.uri;if(this.master.playlists[t.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(r){if(this.state="SWITCHING_MEDIA",this.request){if(wu(this.master.uri,t.uri)===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:wu(this.master.uri,t.uri),withCredentials:this.withCredentials},function(r,i){if(e.request){if(r)return e.playlistRequestError(e.request,t.uri,n);e.haveMetadata(i,t.uri),e.trigger("HAVE_MASTER"===n?"loadedmetadata":"mediachange")}})}}},{key:"pause",value:function(){this.stopRequest(),t.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(e){var n=this;t.clearTimeout(this.mediaUpdateTimeout);var r=this.media();e?this.mediaUpdateTimeout=t.setTimeout(function(){return n.load()},r?r.targetDuration/2*1e3:5e3):this.started?this.trigger(r&&!r.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()}},{key:"start",value:function(){var e=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(n,r){if(e.request){if(e.request=null,n)return e.error={status:r.status,message:"HLS playlist request error at URL: "+e.srcUrl,responseText:r.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");var i=new ca;return i.push(r.responseText),i.end(),e.state="HAVE_MASTER",i.manifest.uri=e.srcUrl,i.manifest.playlists?(e.master=i.manifest,Lu(e.master),Du(e.master),e.trigger("loadedplaylist"),void(e.request||e.media(i.manifest.playlists[0]))):(e.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:t.location.href,playlists:[{uri:e.srcUrl,id:0}]},e.master.playlists[e.srcUrl]=e.master.playlists[0],e.master.playlists[0].resolvedUri=e.srcUrl,e.master.playlists[0].attributes=e.master.playlists[0].attributes||{},e.haveMetadata(r,e.srcUrl),e.trigger("loadedmetadata"))}})}}]),n}(),Nu=Ki.createTimeRange,Bu=function(t,e,n){var r,i;return void 0===e&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence?0:(r=function(t,e){var n=0,r=e-t.mediaSequence,i=t.segments[r];if(i){if(void 0!==i.start)return{result:i.start,precise:!0};if(void 0!==i.end)return{result:i.end-i.duration,precise:!0}}for(;r--;){if(void 0!==(i=t.segments[r]).end)return{result:n+i.end,precise:!0};if(n+=i.duration,void 0!==i.start)return{result:n+i.start,precise:!0}}return{result:n,precise:!1}}(t,e)).precise?r.result:(i=function(t,e){for(var n=0,r=void 0,i=e-t.mediaSequence;i<t.segments.length;i++){if(void 0!==(r=t.segments[i]).start)return{result:r.start-n,precise:!0};if(n+=r.duration,void 0!==r.end)return{result:r.end-n,precise:!0}}return{result:-1,precise:!1}}(t,e)).precise?i.result:r.result+n},Fu=function(e,n,r){if(!e)return 0;if("number"!=typeof r&&(r=0),void 0===n){if(e.totalDuration)return e.totalDuration;if(!e.endList)return t.Infinity}return Bu(e,n,r)},Uu=function(t,e,n){var r=0;if(n<e){var i=[n,e];e=i[0],n=i[1]}if(e<0){for(var a=e;a<Math.min(0,n);a++)r+=t.targetDuration;e=0}for(var o=e;o<n;o++)r+=t.segments[o].duration;return r},zu=function(t){if(!t.segments.length)return 0;for(var e=t.segments.length-1,n=t.segments[e].duration||t.targetDuration,r=n+2*t.targetDuration;e--&&!(r<=(n+=t.segments[e].duration)););return Math.max(0,e)},Vu=function(t,e,n){if(!t||!t.segments)return null;if(t.endList)return Fu(t);if(null===e)return null;e=e||0;var r=n?zu(t):t.segments.length;return Bu(t,t.mediaSequence+r,e)},Hu=function(t){return t-Math.floor(t)==0},Gu=function(t,e){if(Hu(e))return e+.1*t;for(var n=e.toString().split(".")[1].length,r=1;r<=n;r++){var i=Math.pow(10,r),a=e*i;if(Hu(a)||r===n)return(a+t)/i}},Wu=Gu.bind(null,1),qu=Gu.bind(null,-1),Yu=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},Xu=function(t){return t.excludeUntil&&t.excludeUntil===1/0},$u=function(t){var e=Yu(t);return!t.disabled&&!e},Zu=function(t,e){return e.attributes&&e.attributes[t]},Qu=function(t,e){if(1===t.playlists.length)return!0;var n=e.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===t.playlists.filter(function(t){return!!$u(t)&&(t.attributes.BANDWIDTH||0)<n}).length},Ku={duration:Fu,seekable:function(t,e){var n=e||0,r=Vu(t,e,!0);return null===r?Nu():Nu(n,r)},safeLiveIndex:zu,getMediaInfoForTime:function(t,e,n,r){var i=void 0,a=t.segments.length,o=e-r;if(o<0){if(0<n)for(i=n-1;0<=i;i--)if(0<(o+=qu(t.segments[i].duration)))return{mediaIndex:i,startTime:r-Uu(t,n,i)};return{mediaIndex:0,startTime:e}}if(n<0){for(i=n;i<0;i++)if((o-=t.targetDuration)<0)return{mediaIndex:0,startTime:e};n=0}for(i=n;i<a;i++)if((o-=Wu(t.segments[i].duration))<0)return{mediaIndex:i,startTime:r+Uu(t,n,i)};return{mediaIndex:a-1,startTime:e}},isEnabled:$u,isDisabled:function(t){return t.disabled},isBlacklisted:Yu,isIncompatible:Xu,playlistEnd:Vu,isAes:function(t){for(var e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1},isFmp4:function(t){for(var e=0;e<t.segments.length;e++)if(t.segments[e].map)return!0;return!1},hasAttribute:Zu,estimateSegmentRequestTime:function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return Zu("BANDWIDTH",n)?(t*n.attributes.BANDWIDTH-8*r)/e:NaN},isLowestEnabledRendition:Qu},Ju=Ki.xhr,tl=Ki.mergeOptions,el=function(){return function t(e,n){e=tl({timeout:45e3},e);var r=t.beforeRequest||Ki.Hls.xhr.beforeRequest;if(r&&"function"==typeof r){var i=r(e);i&&(e=i)}var a=Ju(e,function(t,e){var r=a.response;!t&&r&&(a.responseTime=Date.now(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=r.byteLength||r.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3))),e.headers&&(a.responseHeaders=e.headers),t&&"ETIMEDOUT"===t.code&&(a.timedout=!0),t||a.aborted||200===e.statusCode||206===e.statusCode||0===e.statusCode||(t=new Error("XHR Failed with a response of: "+(a&&(r||a.responseText)))),n(t,a)}),o=a.abort;return a.abort=function(){return a.aborted=!0,o.apply(a,arguments)},a.uri=e.uri,a.requestTime=Date.now(),a}},nl=function(t,e){var n=t.toString(16);return"00".substring(0,2-n.length)+n+(e%2?" ":"")},rl=function(t){return 32<=t&&t<126?String.fromCharCode(t):"."},il=function(t){var e={};return Object.keys(t).forEach(function(n){var r=t[n];e[n]=ArrayBuffer.isView(r)?{bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:r}),e},al=function(t){var e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")},ol=function(t){for(var e=Array.prototype.slice.call(t),n="",r=0;r<e.length/16;r++)n+=e.slice(16*r,16*r+16).map(nl).join("")+" "+e.slice(16*r,16*r+16).map(rl).join("")+"\n";return n},sl=Object.freeze({createTransferableMessage:il,initSegmentId:al,hexDump:ol,tagDump:function(t){return ol(t.bytes)},textRanges:function(t){var e,n,r="",i=void 0;for(i=0;i<t.length;i++)r+=(e=t).start(n=i)+"-"+e.end(n)+" ";return r}}),ul=1/30,ll=function(t,e){var n=[],r=void 0;if(t&&t.length)for(r=0;r<t.length;r++)e(t.start(r),t.end(r))&&n.push([t.start(r),t.end(r)]);return Ki.createTimeRanges(n)},cl=function(t,e){return ll(t,function(t,n){return t-ul<=e&&e<=n+ul})},hl=function(t,e){return ll(t,function(t){return e<=t-ul})},fl=function(t){var e=[];if(!t||!t.length)return"";for(var n=0;n<t.length;n++)e.push(t.start(n)+" => "+t.end(n));return e.join(", ")},dl=function(t){for(var e=[],n=0;n<t.length;n++)e.push({start:t.start(n),end:t.end(n)});return e},pl=function(t,e,n){var r=void 0,i=void 0;if(n&&n.cues)for(r=n.cues.length;r--;)(i=n.cues[r]).startTime<=e&&i.endTime>=t&&n.removeCue(i)},gl=function(t){return isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t},vl="undefined"!=typeof window?window:{},ml="undefined"==typeof Symbol?"__target":Symbol(),yl="application/javascript",_l=vl.BlobBuilder||vl.WebKitBlobBuilder||vl.MozBlobBuilder||vl.MSBlobBuilder,bl=vl.URL||vl.webkitURL||bl&&bl.msURL,xl=vl.Worker;function wl(t,e){return function(n){var r=this;if(!e)return new xl(t);if(xl&&!n){var i=Ml(e.toString().replace(/^function.+?{/,"").slice(0,-1));return this[ml]=new xl(i),function(t,e){if(t&&e){var n=t.terminate;t.objURL=e,t.terminate=function(){t.objURL&&bl.revokeObjectURL(t.objURL),n.call(t)}}}(this[ml],i),this[ml]}var a={postMessage:function(t){r.onmessage&&setTimeout(function(){r.onmessage({data:t,target:a})})}};e.call(a),this.postMessage=function(t){setTimeout(function(){a.onmessage({data:t,target:r})})},this.isThisThread=!0}}if(xl){var Sl,Tl=Ml("self.onmessage = function () {}"),Ol=new Uint8Array(1);try{(Sl=new xl(Tl)).postMessage(Ol,[Ol.buffer])}catch(t){xl=null}finally{bl.revokeObjectURL(Tl),Sl&&Sl.terminate()}}function Ml(t){try{return bl.createObjectURL(new Blob([t],{type:yl}))}catch(n){var e=new _l;return e.append(t),bl.createObjectURL(e.getBlob(type))}}var kl=new wl("./transmuxer-worker.worker.js",function(t,e){var n=this;!function(){var t,e,r,i,a,o,s,u,l,c,h,f,d,p,g,v,m,y,_,b,x,w,S,T,O,M,k,C,E,A,I,P,L,D,j,R,N,B,F,U,z=Math.pow(2,32)-1;!function(){var t;if(w={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(t in w)w.hasOwnProperty(t)&&(w[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);S=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),O=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),T=new Uint8Array([0,0,0,1]),M=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),k=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),C={video:M,audio:k},I=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),A=new Uint8Array([0,0,0,0,0,0,0,0]),P=new Uint8Array([0,0,0,0,0,0,0,0]),L=P,D=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),j=P,E=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(t){var e,n,r=[],i=0;for(e=1;e<arguments.length;e++)r.push(arguments[e]);for(e=r.length;e--;)i+=r[e].byteLength;for(n=new Uint8Array(i+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(t,4),e=0,i=8;e<r.length;e++)n.set(r[e],i),i+=r[e].byteLength;return n},e=function(){return t(w.dinf,t(w.dref,I))},r=function(e){return t(w.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},g=function(e){return t(w.hdlr,C[e])},p=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(n[12]=e.samplerate>>>24&255,n[13]=e.samplerate>>>16&255,n[14]=e.samplerate>>>8&255,n[15]=255&e.samplerate),t(w.mdhd,n)},d=function(e){return t(w.mdia,p(e),g(e.type),o(e))},a=function(e){return t(w.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},o=function(n){return t(w.minf,"video"===n.type?t(w.vmhd,E):t(w.smhd,A),e(),m(n))},s=function(e,n){for(var r=[],i=n.length;i--;)r[i]=_(n[i]);return t.apply(null,[w.moof,a(e)].concat(r))},u=function(e){for(var n=e.length,r=[];n--;)r[n]=h(e[n]);return t.apply(null,[w.moov,c(4294967295)].concat(r).concat(l(e)))},l=function(e){for(var n=e.length,r=[];n--;)r[n]=b(e[n]);return t.apply(null,[w.mvex].concat(r))},c=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(w.mvhd,n)},v=function(e){var n,r,i=e.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)a[r+4]=(n=i[r].flags).dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t(w.sdtp,a)},m=function(e){return t(w.stbl,y(e),t(w.stts,j),t(w.stsc,L),t(w.stsz,D),t(w.stco,P))},y=function(e){return t(w.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?R(e):N(e))},R=function(e){var n,r=e.sps||[],i=e.pps||[],a=[],o=[];for(n=0;n<r.length;n++)a.push((65280&r[n].byteLength)>>>8),a.push(255&r[n].byteLength),a=a.concat(Array.prototype.slice.call(r[n]));for(n=0;n<i.length;n++)o.push((65280&i[n].byteLength)>>>8),o.push(255&i[n].byteLength),o=o.concat(Array.prototype.slice.call(i[n]));return t(w.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(w.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length]).concat(a).concat([i.length]).concat(o))),t(w.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},N=function(e){return t(w.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),r(e))},f=function(e){var n=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(w.tkhd,n)},_=function(e){var n,r,i,a,o,s;return n=t(w.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),o=Math.floor(e.baseMediaDecodeTime/(z+1)),s=Math.floor(e.baseMediaDecodeTime%(z+1)),r=t(w.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),"audio"===e.type?(i=x(e,92),t(w.traf,n,r,i)):(a=v(e),i=x(e,a.length+92),t(w.traf,n,r,i,a))},h=function(e){return e.duration=e.duration||4294967295,t(w.trak,f(e),d(e))},b=function(e){var n=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(n[n.length-1]=0),t(w.trex,n)},U=function(t,e){var n=0,r=0,i=0,a=0;return t.length&&(void 0!==t[0].duration&&(n=1),void 0!==t[0].size&&(r=2),void 0!==t[0].flags&&(i=4),void 0!==t[0].compositionTimeOffset&&(a=8)),[0,0,n|r|i|a,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e]},F=function(e,n){var r,i,a,o;for(n+=20+16*(i=e.samples||[]).length,r=U(i,n),o=0;o<i.length;o++)r=r.concat([(4278190080&(a=i[o]).duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size,a.flags.isLeading<<2|a.flags.dependsOn,a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,61440&a.flags.degradationPriority,15&a.flags.degradationPriority,(4278190080&a.compositionTimeOffset)>>>24,(16711680&a.compositionTimeOffset)>>>16,(65280&a.compositionTimeOffset)>>>8,255&a.compositionTimeOffset]);return t(w.trun,new Uint8Array(r))},B=function(e,n){var r,i,a,o;for(n+=20+8*(i=e.samples||[]).length,r=U(i,n),o=0;o<i.length;o++)r=r.concat([(4278190080&(a=i[o]).duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size]);return t(w.trun,new Uint8Array(r))},x=function(t,e){return"audio"===t.type?B(t,e):F(t,e)};var V,H,G,W,q,Y={ftyp:i=function(){return t(w.ftyp,S,T,S,O)},mdat:function(e){return t(w.mdat,e)},moof:s,moov:u,initSegment:function(t){var e,n=i(),r=u(t);return(e=new Uint8Array(n.byteLength+r.byteLength)).set(n),e.set(r,n.byteLength),e}},X=function(t){return t>>>0};G=function(t){return V(t,["moov","trak"]).reduce(function(t,e){var n,r,i,a;return(n=V(e,["tkhd"])[0])?(i=X(n[r=0===n[0]?12:20]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3]),(a=V(e,["mdia","mdhd"])[0])?(t[i]=X(a[r=0===a[0]?12:20]<<24|a[r+1]<<16|a[r+2]<<8|a[r+3]),t):null):null},{})},W=function(t,e){var n,r,i;return n=V(e,["moof","traf"]),r=[].concat.apply([],n.map(function(e){return V(e,["tfhd"]).map(function(n){var r,i;return r=X(n[4]<<24|n[5]<<16|n[6]<<8|n[7]),i=t[r]||9e4,(V(e,["tfdt"]).map(function(t){var e,n;return e=t[0],n=X(t[4]<<24|t[5]<<16|t[6]<<8|t[7]),1===e&&(n*=Math.pow(2,32),n+=X(t[8]<<24|t[9]<<16|t[10]<<8|t[11])),n})[0]||1/0)/i})})),i=Math.min.apply(null,r),isFinite(i)?i:0},q=function(t){var e=[];return V(t,["moov","trak"]).forEach(function(t){var n=V(t,["mdia","hdlr"]),r=V(t,["tkhd"]);n.forEach(function(t,n){var i,a,o=H(t.subarray(8,12)),s=r[n];"vide"===o&&(a=0===(i=new DataView(s.buffer,s.byteOffset,s.byteLength)).getUint8(0)?i.getUint32(12):i.getUint32(20),e.push(a))})}),e};var $={findBox:V=function(t,e){var n,r,i,a,o,s=[];if(!e.length)return null;for(n=0;n<t.byteLength;)r=X(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]),i=H(t.subarray(n+4,n+8)),a=1<r?n+r:t.byteLength,i===e[0]&&(1===e.length?s.push(t.subarray(n+8,a)):(o=V(t.subarray(n+8,a),e.slice(1))).length&&(s=s.concat(o))),n=a;return s},parseType:H=function(t){var e="";return e+=String.fromCharCode(t[0]),e+=String.fromCharCode(t[1]),(e+=String.fromCharCode(t[2]))+String.fromCharCode(t[3])},timescale:G,startTime:W,videoTrackIds:q},Z=function(){this.init=function(){var t={};this.on=function(e,n){t[e]||(t[e]=[]),t[e]=t[e].concat(n)},this.off=function(e,n){var r;return!!t[e]&&(r=t[e].indexOf(n),t[e]=t[e].slice(),t[e].splice(r,1),-1<r)},this.trigger=function(e){var n,r,i,a;if(n=t[e])if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,arguments[1]);else{for(a=[],r=arguments.length,r=1;r<arguments.length;++r)a.push(arguments[r]);for(i=n.length,r=0;r<i;++r)n[r].apply(this,a)}},this.dispose=function(){t={}}}};Z.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),t},Z.prototype.push=function(t){this.trigger("data",t)},Z.prototype.flush=function(t){this.trigger("done",t)};var Q=Z,K=function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},J=function(t,e){var n,r=t.minSegmentDts;return e||(r-=t.timelineStartInfo.dts),n=t.timelineStartInfo.baseMediaDecodeTime,n+=r,n=Math.max(0,n),"audio"===t.type&&(n*=t.samplerate/9e4,n=Math.floor(n)),n},tt=function(t,e){"number"==typeof e.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=e.pts),t.minSegmentPts=void 0===t.minSegmentPts?e.pts:Math.min(t.minSegmentPts,e.pts),t.maxSegmentPts=void 0===t.maxSegmentPts?e.pts:Math.max(t.maxSegmentPts,e.pts)),"number"==typeof e.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),t.minSegmentDts=void 0===t.minSegmentDts?e.dts:Math.min(t.minSegmentDts,e.dts),t.maxSegmentDts=void 0===t.maxSegmentDts?e.dts:Math.max(t.maxSegmentDts,e.dts))},et=function t(){t.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new ot(0,0),new ot(0,1),new ot(1,0),new ot(1,1)],this.reset(),this.ccStreams_.forEach(function(t){t.on("data",this.trigger.bind(this,"data")),t.on("done",this.trigger.bind(this,"done"))},this)};(et.prototype=new Q).push=function(t){var e,n,r;if("sei_rbsp"===t.nalUnitType&&4===(e=function(t){for(var e=0,n={payloadType:-1,payloadSize:0},r=0,i=0;e<t.byteLength&&128!==t[e];){for(;255===t[e];)r+=255,e++;for(r+=t[e++];255===t[e];)i+=255,e++;if(i+=t[e++],!n.payload&&4===r){n.payloadType=r,n.payloadSize=i,n.payload=t.subarray(e,e+i);break}e+=i,i=r=0}return n}(t.escapedRBSP)).payloadType&&(n=function(t){return 181!==t.payload[0]?null:49!=(t.payload[1]<<8|t.payload[2])?null:"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])?null:3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)}(e)))if(t.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(t.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));r=function(t,e){var n,r,i,a,o=[];if(!(64&e[0]))return o;for(r=31&e[0],n=0;n<r;n++)a={type:3&e[2+(i=3*n)],pts:t},4&e[i+2]&&(a.ccData=e[i+3]<<8|e[i+4],o.push(a));return o}(t.pts,n),this.captionPackets_=this.captionPackets_.concat(r),this.latestDts_!==t.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=t.dts}},et.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(t,e){t.presortIndex=e}),this.captionPackets_.sort(function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts}),this.captionPackets_.forEach(function(t){t.type<2&&this.dispatchCea608Packet(t)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(t){t.flush()},this)):this.ccStreams_.forEach(function(t){t.flush()},this)},et.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(t){t.reset()})},et.prototype.dispatchCea608Packet=function(t){this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},et.prototype.setsChannel1Active=function(t){return 4096==(30720&t.ccData)},et.prototype.setsChannel2Active=function(t){return 6144==(30720&t.ccData)};var nt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},rt=function(t){return null===t?"":(t=nt[t]||t,String.fromCharCode(t))},it=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],at=function(){for(var t=[],e=15;e--;)t.push("");return t},ot=function t(e,n){t.prototype.init.call(this),this.field_=e||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var e,n,r,i,a;if((e=32639&t.ccData)!==this.lastControlCode_){if(4096==(61440&e)?this.lastControlCode_=e:e!==this.PADDING_&&(this.lastControlCode_=null),r=e>>>8,i=255&e,e!==this.PADDING_)if(e===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(e===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(t.pts),this.flushDisplayed(t.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=t.pts;else if(e===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(t.pts);else if(e===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(t.pts);else if(e===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(t.pts);else if(e===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(e===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(e===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=at();else if(e===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=at();else if(e===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(t.pts),this.displayed_=at()),this.mode_="paintOn",this.startPts_=t.pts;else if(this.isSpecialCharacter(r,i))a=rt((r=(3&r)<<8)|i),this[this.mode_](t.pts,a),this.column_++;else if(this.isExtCharacter(r,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=rt((r=(3&r)<<8)|i),this[this.mode_](t.pts,a),this.column_++;else if(this.isMidRowCode(r,i))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14==(14&i)&&this.addFormatting(t.pts,["i"]),1==(1&i)&&this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(r,i))this.column_+=3&i;else if(this.isPAC(r,i)){var o=it.indexOf(7968&e);"rollUp"===this.mode_&&this.setRollUp(t.pts,o),o!==this.row_&&(this.clearFormatting(t.pts),this.row_=o),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16==(16&e)&&(this.column_=4*((14&e)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(t.pts,["i"])}else this.isNormalChar(r)&&(0===i&&(i=null),a=rt(r),a+=rt(i),this[this.mode_](t.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};ot.prototype=new Q,ot.prototype.flushDisplayed=function(t){var e=this.displayed_.map(function(t){return t.trim()}).join("\n").replace(/^\n+|\n+$/g,"");e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e,stream:this.name_})},ot.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=at(),this.nonDisplayed_=at(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},ot.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},ot.prototype.isSpecialCharacter=function(t,e){return t===this.EXT_&&48<=e&&e<=63},ot.prototype.isExtCharacter=function(t,e){return(t===this.EXT_+1||t===this.EXT_+2)&&32<=e&&e<=63},ot.prototype.isMidRowCode=function(t,e){return t===this.EXT_&&32<=e&&e<=47},ot.prototype.isOffsetControlCode=function(t,e){return t===this.OFFSET_&&33<=e&&e<=35},ot.prototype.isPAC=function(t,e){return t>=this.BASE_&&t<this.BASE_+8&&64<=e&&e<=127},ot.prototype.isColorPAC=function(t){return 64<=t&&t<=79||96<=t&&t<=127},ot.prototype.isNormalChar=function(t){return 32<=t&&t<=127},ot.prototype.setRollUp=function(t,e){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(t),this.nonDisplayed_=at(),this.displayed_=at()),void 0!==e&&e!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[e-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===e&&(e=this.row_),this.topRow_=e-this.rollUpRows_+1},ot.prototype.addFormatting=function(t,e){this.formatting_=this.formatting_.concat(e);var n=e.reduce(function(t,e){return t+"<"+e+">"},"");this[this.mode_](t,n)},ot.prototype.clearFormatting=function(t){if(this.formatting_.length){var e=this.formatting_.reverse().reduce(function(t,e){return t+"</"+e+">"},"");this.formatting_=[],this[this.mode_](t,e)}},ot.prototype.popOn=function(t,e){var n=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=n+=e},ot.prototype.rollUp=function(t,e){var n=this.displayed_[this.row_];this.displayed_[this.row_]=n+=e},ot.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.row_+1;t<15;t++)this.displayed_[t]="";for(t=this.topRow_;t<this.row_;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[this.row_]=""},ot.prototype.paintOn=function(t,e){var n=this.displayed_[this.row_];this.displayed_[this.row_]=n+=e};var st={CaptionStream:et,Cea608Stream:ot},ut={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},lt=function(t,e){var n=1;for(e<t&&(n=-1);4294967296<Math.abs(e-t);)t+=8589934592*n;return t},ct=function t(e){var n,r;t.prototype.init.call(this),this.type_=e,this.push=function(t){t.type===this.type_&&(void 0===r&&(r=t.dts),t.dts=lt(t.dts,r),t.pts=lt(t.pts,r),n=t.dts,this.trigger("data",t))},this.flush=function(){r=n,this.trigger("done")},this.discontinuity=function(){n=r=void 0}};ct.prototype=new Q;var ht,ft=ct,dt=function(t,e,n){var r,i="";for(r=e;r<n;r++)i+="%"+("00"+t[r].toString(16)).slice(-2);return i},pt=function(t,e,n){return decodeURIComponent(dt(t,e,n))},gt=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},vt={TXXX:function(t){var e;if(3===t.data[0]){for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=pt(t.data,1,e),t.value=pt(t.data,e+1,t.data.length).replace(/\0*$/,"");break}t.data=t.value}},WXXX:function(t){var e;if(3===t.data[0])for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=pt(t.data,1,e),t.url=pt(t.data,e+1,t.data.length);break}},PRIV:function(t){var e;for(e=0;e<t.data.length;e++)if(0===t.data[e]){t.owner=unescape(dt(t.data,0,e));break}t.privateData=t.data.subarray(e+1),t.data=t.privateData}};(ht=function(t){var e,n={debug:!(!t||!t.debug),descriptor:t&&t.descriptor},r=0,i=[],a=0;if(ht.prototype.init.call(this),this.dispatchType=ut.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(e=0;e<n.descriptor.length;e++)this.dispatchType+=("00"+n.descriptor[e].toString(16)).slice(-2);this.push=function(t){var e,n,o,s,u;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(a=0,i.length=0),0===i.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)));else if(i.push(t),a+=t.data.byteLength,1===i.length&&(r=gt(t.data.subarray(6,10)),r+=10),!(a<r)){for(e={data:new Uint8Array(r),frames:[],pts:i[0].pts,dts:i[0].dts},u=0;u<r;)e.data.set(i[0].data.subarray(0,r-u),u),u+=i[0].data.byteLength,a-=i[0].data.byteLength,i.shift();n=10,64&e.data[5]&&(n+=4,n+=gt(e.data.subarray(10,14)),r-=gt(e.data.subarray(16,20)));do{if((o=gt(e.data.subarray(n+4,n+8)))<1)return;if((s={id:String.fromCharCode(e.data[n],e.data[n+1],e.data[n+2],e.data[n+3]),data:e.data.subarray(n+10,n+o+10)}).key=s.id,vt[s.id]&&(vt[s.id](s),"com.apple.streaming.transportStreamTimestamp"===s.owner)){var l=s.data,c=(1&l[3])<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;c*=4,s.timeStamp=c+=3&l[7],void 0===e.pts&&void 0===e.dts&&(e.pts=s.timeStamp,e.dts=s.timeStamp),this.trigger("timestamp",s)}e.frames.push(s),n+=10,n+=o}while(n<r);this.trigger("data",e)}}}).prototype=new Q;var mt,yt,_t,bt=ht,xt=ft;(mt=function(){var t=new Uint8Array(188),e=0;mt.prototype.init.call(this),this.push=function(n){var r,i=0,a=188;for(e?((r=new Uint8Array(n.byteLength+e)).set(t.subarray(0,e)),r.set(n,e),e=0):r=n;a<r.byteLength;)71!==r[i]||71!==r[a]?(i++,a++):(this.trigger("data",r.subarray(i,a)),i+=188,a+=188);i<r.byteLength&&(t.set(r.subarray(i),0),e=r.byteLength-i)},this.flush=function(){188===e&&71===t[0]&&(this.trigger("data",t),e=0),this.trigger("done")}}).prototype=new Q,(yt=function(){var t,e,n,r;yt.prototype.init.call(this),(r=this).packetsWaitingForPmt=[],this.programMapTable=void 0,t=function(t,r){var i=0;r.payloadUnitStartIndicator&&(i+=t[i]+1),"pat"===r.type?e(t.subarray(i),r):n(t.subarray(i),r)},e=function(t,e){e.section_number=t[7],e.last_section_number=t[8],r.pmtPid=(31&t[10])<<8|t[11],e.pmtPid=r.pmtPid},n=function(t,e){var n,i;if(1&t[5]){for(r.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&t[1])<<8|t[2])-4,i=12+((15&t[10])<<8|t[11]);i<n;){var a=t[i],o=(31&t[i+1])<<8|t[i+2];a===ut.H264_STREAM_TYPE&&null===r.programMapTable.video?r.programMapTable.video=o:a===ut.ADTS_STREAM_TYPE&&null===r.programMapTable.audio?r.programMapTable.audio=o:a===ut.METADATA_STREAM_TYPE&&(r.programMapTable["timed-metadata"][o]=a),i+=5+((15&t[i+3])<<8|t[i+4])}e.programMapTable=r.programMapTable}},this.push=function(e){var n={},r=4;if(n.payloadUnitStartIndicator=!!(64&e[1]),n.pid=31&e[1],n.pid<<=8,n.pid|=e[2],1<(48&e[3])>>>4&&(r+=e[r]+1),0===n.pid)n.type="pat",t(e.subarray(r),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",t(e.subarray(r),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,r,n]):this.processPes_(e,r,n)},this.processPes_=function(t,e,n){n.streamType=n.pid===this.programMapTable.video?ut.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?ut.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=t.subarray(e),this.trigger("data",n)}}).prototype=new Q,yt.STREAM_TYPES={h264:27,adts:15},(_t=function(){var t=this,e={data:[],size:0},n={data:[],size:0},r={data:[],size:0},i=function(e,n,r){var i,a,o=new Uint8Array(e.size),s={type:n},u=0,l=0;if(e.data.length&&!(e.size<9)){for(s.trackId=e.data[0].pid,u=0;u<e.data.length;u++)o.set((a=e.data[u]).data,l),l+=a.data.byteLength;var c,h,f;(h=s).packetLength=6+((c=o)[4]<<8|c[5]),h.dataAlignmentIndicator=0!=(4&c[6]),192&(f=c[7])&&(h.pts=(14&c[9])<<27|(255&c[10])<<20|(254&c[11])<<12|(255&c[12])<<5|(254&c[13])>>>3,h.pts*=4,h.pts+=(6&c[13])>>>1,h.dts=h.pts,64&f&&(h.dts=(14&c[14])<<27|(255&c[15])<<20|(254&c[16])<<12|(255&c[17])<<5|(254&c[18])>>>3,h.dts*=4,h.dts+=(6&c[18])>>>1)),h.data=c.subarray(9+c[8]),i="video"===n||s.packetLength<=e.size,(r||i)&&(e.size=0,e.data.length=0),i&&t.trigger("data",s)}};_t.prototype.init.call(this),this.push=function(a){({pat:function(){},pes:function(){var t,o;switch(a.streamType){case ut.H264_STREAM_TYPE:case ut.H264_STREAM_TYPE:t=e,o="video";break;case ut.ADTS_STREAM_TYPE:t=n,o="audio";break;case ut.METADATA_STREAM_TYPE:t=r,o="timed-metadata";break;default:return}a.payloadUnitStartIndicator&&i(t,o,!0),t.data.push(a),t.size+=a.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]},n=a.programMapTable;null!==n.video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.video,codec:"avc",type:"video"}),null!==n.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.audio,codec:"adts",type:"audio"}),t.trigger("data",e)}})[a.type]()},this.flush=function(){i(e,"video"),i(n,"audio"),i(r,"timed-metadata"),this.trigger("done")}}).prototype=new Q;var wt={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:mt,TransportParseStream:yt,ElementaryStream:_t,TimestampRolloverStream:xt,CaptionStream:st.CaptionStream,Cea608Stream:st.Cea608Stream,MetadataStream:bt};for(var St in ut)ut.hasOwnProperty(St)&&(wt[St]=ut[St]);var Tt,Ot=wt,Mt=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Tt=function(){var t;Tt.prototype.init.call(this),this.push=function(e){var n,r,i,a,o,s=0,u=0;if("audio"===e.type)for(t?(i=t,(t=new Uint8Array(i.byteLength+e.data.byteLength)).set(i),t.set(e.data,i.byteLength)):t=e.data;s+5<t.length;)if(255===t[s]&&240==(246&t[s+1])){if(n=2*(1&~t[s+1]),o=9e4*(a=1024*(1+(3&t[s+6])))/Mt[(60&t[s+2])>>>2],t.byteLength<(r=s+((3&t[s+3])<<11|t[s+4]<<3|(224&t[s+5])>>5)))return;if(this.trigger("data",{pts:e.pts+u*o,dts:e.dts+u*o,sampleCount:a,audioobjecttype:1+(t[s+2]>>>6&3),channelcount:(1&t[s+2])<<2|(192&t[s+3])>>>6,samplerate:Mt[(60&t[s+2])>>>2],samplingfrequencyindex:(60&t[s+2])>>>2,samplesize:16,data:t.subarray(s+7+n,r)}),t.byteLength===r)return void(t=void 0);u++,t=t.subarray(r)}else s++},this.flush=function(){this.trigger("done")}}).prototype=new Q;var kt,Ct,Et,At=Tt;(Ct=function(){var t,e,n=0;Ct.prototype.init.call(this),this.push=function(r){var i;for(e=e?((i=new Uint8Array(e.byteLength+r.data.byteLength)).set(e),i.set(r.data,e.byteLength),i):r.data;n<e.byteLength-3;n++)if(1===e[n+2]){t=n+5;break}for(;t<e.byteLength;)switch(e[t]){case 0:if(0!==e[t-1]){t+=2;break}if(0!==e[t-2]){t++;break}for(n+3!==t-2&&this.trigger("data",e.subarray(n+3,t-2));1!==e[++t]&&t<e.length;);n=t-2,t+=3;break;case 1:if(0!==e[t-1]||0!==e[t-2]){t+=3;break}this.trigger("data",e.subarray(n+3,t-2)),n=t-2,t+=3;break;default:t+=3}e=e.subarray(n),t-=n,n=0},this.flush=function(){e&&3<e.byteLength&&this.trigger("data",e.subarray(n+3)),e=null,n=0,this.trigger("done")}}).prototype=new Q,Et={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(kt=function(){var t,e,n,r,i,a,o,s=new Ct;kt.prototype.init.call(this),(t=this).push=function(t){"video"===t.type&&(e=t.trackId,n=t.pts,r=t.dts,s.push(t))},s.on("data",function(o){var s={trackId:e,pts:n,dts:r,data:o};switch(31&o[0]){case 5:s.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:s.nalUnitType="sei_rbsp",s.escapedRBSP=i(o.subarray(1));break;case 7:s.nalUnitType="seq_parameter_set_rbsp",s.escapedRBSP=i(o.subarray(1)),s.config=a(s.escapedRBSP);break;case 8:s.nalUnitType="pic_parameter_set_rbsp";break;case 9:s.nalUnitType="access_unit_delimiter_rbsp"}t.trigger("data",s)}),s.on("done",function(){t.trigger("done")}),this.flush=function(){s.flush()},o=function(t,e){var n,r=8,i=8;for(n=0;n<t;n++)0!==i&&(i=(r+e.readExpGolomb()+256)%256),r=0===i?r:i},i=function(t){for(var e,n,r=t.byteLength,i=[],a=1;a<r-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return t;e=r-i.length,n=new Uint8Array(e);var o=0;for(a=0;a<e;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=t[o];return n},a=function(t){var e,n,r,i,a,s,u,l,c,h,f,d,p,g=0,v=0,m=0,y=0,_=1;if(n=(e=new function(t){var e=t.byteLength,n=0,r=0;this.length=function(){return 8*e},this.bitsAvailable=function(){return 8*e+r},this.loadWord=function(){var i=t.byteLength-e,a=new Uint8Array(4),o=Math.min(4,e);if(0===o)throw new Error("no bytes available");a.set(t.subarray(i,i+o)),n=new DataView(a.buffer).getUint32(0),r=8*o,e-=o},this.skipBits=function(t){var i;t<r||(t-=r,t-=8*(i=Math.floor(t/8)),e-=i,this.loadWord()),n<<=t,r-=t},this.readBits=function(t){var i=Math.min(r,t),a=n>>>32-i;return 0<(r-=i)?n<<=i:0<e&&this.loadWord(),0<(i=t-i)?a<<i|this.readBits(i):a},this.skipLeadingZeros=function(){var t;for(t=0;t<r;++t)if(0!=(n&2147483648>>>t))return n<<=t,r-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()}(t)).readUnsignedByte(),i=e.readUnsignedByte(),r=e.readUnsignedByte(),e.skipUnsignedExpGolomb(),Et[n]&&(3===(a=e.readUnsignedExpGolomb())&&e.skipBits(1),e.skipUnsignedExpGolomb(),e.skipUnsignedExpGolomb(),e.skipBits(1),e.readBoolean()))for(f=3!==a?8:12,p=0;p<f;p++)e.readBoolean()&&o(p<6?16:64,e);if(e.skipUnsignedExpGolomb(),0===(s=e.readUnsignedExpGolomb()))e.readUnsignedExpGolomb();else if(1===s)for(e.skipBits(1),e.skipExpGolomb(),e.skipExpGolomb(),u=e.readUnsignedExpGolomb(),p=0;p<u;p++)e.skipExpGolomb();if(e.skipUnsignedExpGolomb(),e.skipBits(1),l=e.readUnsignedExpGolomb(),c=e.readUnsignedExpGolomb(),0===(h=e.readBits(1))&&e.skipBits(1),e.skipBits(1),e.readBoolean()&&(g=e.readUnsignedExpGolomb(),v=e.readUnsignedExpGolomb(),m=e.readUnsignedExpGolomb(),y=e.readUnsignedExpGolomb()),e.readBoolean()&&e.readBoolean()){switch(e.readUnsignedByte()){case 1:d=[1,1];break;case 2:d=[12,11];break;case 3:d=[10,11];break;case 4:d=[16,11];break;case 5:d=[40,33];break;case 6:d=[24,11];break;case 7:d=[20,11];break;case 8:d=[32,11];break;case 9:d=[80,33];break;case 10:d=[18,11];break;case 11:d=[15,11];break;case 12:d=[64,33];break;case 13:d=[160,99];break;case 14:d=[4,3];break;case 15:d=[3,2];break;case 16:d=[2,1];break;case 255:d=[e.readUnsignedByte()<<8|e.readUnsignedByte(),e.readUnsignedByte()<<8|e.readUnsignedByte()]}d&&(_=d[0]/d[1])}return{profileIdc:n,levelIdc:r,profileCompatibility:i,width:Math.ceil((16*(l+1)-2*g-2*v)*_),height:(2-h)*(c+1)*16-2*m-2*y}}}).prototype=new Q;var It,Pt={H264Stream:kt,NalByteStream:Ct};(It=function(){var t=new Uint8Array,e=0;It.prototype.init.call(this),this.setTimestamp=function(t){e=t},this.parseId3TagSize=function(t,e){var n=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return(16&t[e+5])>>4?n+20:n+10},this.parseAdtsSize=function(t,e){return 6144&t[e+3]|t[e+4]<<3|(224&t[e+5])>>5},this.push=function(n){var r,i,a,o=0,s=0;for(t.length?(a=t.length,(t=new Uint8Array(n.byteLength+a)).set(t.subarray(0,a)),t.set(n,a)):t=n;3<=t.length-s;)if(t[s]!=="I".charCodeAt(0)||t[s+1]!=="D".charCodeAt(0)||t[s+2]!=="3".charCodeAt(0))if(!0&t[s]&&240==(240&t[s+1])){if(t.length-s<7)break;if((o=this.parseAdtsSize(t,s))>t.length)break;i={type:"audio",data:t.subarray(s,s+o),pts:e,dts:e},this.trigger("data",i),s+=o}else s++;else{if(t.length-s<10)break;if((o=this.parseId3TagSize(t,s))>t.length)break;r={type:"timed-metadata",data:t.subarray(s,s+o)},this.trigger("data",r),s+=o}t=0<t.length-s?t.subarray(s):new Uint8Array}}).prototype=new Q;var Lt,Dt,jt,Rt,Nt,Bt,Ft,Ut=It,zt=[33,16,5,32,164,27],Vt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Ht=function(t){for(var e=[];t--;)e.push(0);return e},Gt={96000:[zt,[227,64],Ht(154),[56]],88200:[zt,[231],Ht(170),[56]],64000:[zt,[248,192],Ht(240),[56]],48000:[zt,[255,192],Ht(268),[55,148,128],Ht(54),[112]],44100:[zt,[255,192],Ht(268),[55,163,128],Ht(84),[112]],32000:[zt,[255,192],Ht(268),[55,234],Ht(226),[112]],24000:[zt,[255,192],Ht(268),[55,255,128],Ht(268),[111,112],Ht(126),[224]],16000:[zt,[255,192],Ht(268),[55,255,128],Ht(268),[111,255],Ht(269),[223,108],Ht(195),[1,192]],12000:[Vt,Ht(268),[3,127,248],Ht(268),[6,255,240],Ht(268),[13,255,224],Ht(268),[27,253,128],Ht(259),[56]],11025:[Vt,Ht(268),[3,127,248],Ht(268),[6,255,240],Ht(268),[13,255,224],Ht(268),[27,255,192],Ht(268),[55,175,128],Ht(108),[112]],8000:[Vt,Ht(268),[3,121,16],Ht(47),[7]]},Wt=(Lt=Gt,Object.keys(Lt).reduce(function(t,e){return t[e]=new Uint8Array(Lt[e].reduce(function(t,e){return t.concat(e)},[])),t},{}));Bt=function(t,e){return Dt(Nt(t,e))},Ft=function(t,e){return jt(Rt(t),e)},Dt=function(t){return 9e4*t},jt=function(t,e){return t*e},Rt=function(t){return t/9e4},Nt=function(t,e){return t/e};var qt,Yt,Xt,$t,Zt,Qt,Kt,Jt=Bt,te=Ft,ee=Pt.H264Stream,ne=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],re=["width","height","profileIdc","levelIdc","profileCompatibility"];Zt=function(t){return t[0]==="I".charCodeAt(0)&&t[1]==="D".charCodeAt(0)&&t[2]==="3".charCodeAt(0)},Qt=function(t,e){var n;if(t.length!==e.length)return!1;for(n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},Kt=function(t){var e,n=0;for(e=0;e<t.length;e++)n+=t[e].data.byteLength;return n},(Yt=function(t,e){var n=[],r=0,i=0,a=0,o=1/0;e=e||{},Yt.prototype.init.call(this),this.push=function(e){tt(t,e),t&&ne.forEach(function(n){t[n]=e[n]}),n.push(e)},this.setEarliestDts=function(e){i=e-t.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(t){o=t},this.setAudioAppendStart=function(t){a=t},this.flush=function(){var i,a,o,s;0!==n.length&&(i=this.trimAdtsFramesByEarliestDts_(n),t.baseMediaDecodeTime=J(t,e.keepOriginalTimestamps),this.prefixWithSilence_(t,i),t.samples=this.generateSampleTable_(i),o=Y.mdat(this.concatenateFrameData_(i)),n=[],a=Y.moof(r,[t]),s=new Uint8Array(a.byteLength+o.byteLength),r++,s.set(a),s.set(o,a.byteLength),K(t),this.trigger("data",{track:t,boxes:s})),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(t,e){var n,r,i,s,u=0,l=0,c=0;if(e.length&&(n=Jt(t.baseMediaDecodeTime,t.samplerate),r=Math.ceil(9e4/(t.samplerate/1024)),a&&o&&(u=n-Math.max(a,o),c=(l=Math.floor(u/r))*r),!(l<1||45e3<c))){for((i=Wt[t.samplerate])||(i=e[0].data),s=0;s<l;s++)e.splice(s,0,{data:i});t.baseMediaDecodeTime-=Math.floor(te(c,t.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(e){return t.minSegmentDts>=i?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=i&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},this.generateSampleTable_=function(t){var e,n=[];for(e=0;e<t.length;e++)n.push({size:t[e].data.byteLength,duration:1024});return n},this.concatenateFrameData_=function(t){var e,n,r=0,i=new Uint8Array(Kt(t));for(e=0;e<t.length;e++)i.set((n=t[e]).data,r),r+=n.data.byteLength;return i}}).prototype=new Q,(qt=function(t,e){var n,r,i=0,a=[],o=[];e=e||{},qt.prototype.init.call(this),delete t.minPTS,this.gopCache_=[],this.push=function(e){tt(t,e),"seq_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.config,t.sps=[e.data],re.forEach(function(e){t[e]=n[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||r||(r=e.data,t.pps=[e.data]),a.push(e)},this.flush=function(){for(var n,r,s,u,l,c;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=function(t){var e,n,r=[],i=[];for(e=r.byteLength=0;e<t.length;e++)"access_unit_delimiter_rbsp"===(n=t[e]).nalUnitType?(r.length&&(r.duration=n.dts-r.dts,i.push(r)),(r=[n]).byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return i.length&&(!r.duration||r.duration<=0)&&(r.duration=i[i.length-1].duration),i.push(r),i}(a),(s=function(t){var e,n,r=[],i=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=t[0].pts,r.dts=t[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=t[0].pts,i.dts=t[0].dts,e=0;e<t.length;e++)(n=t[e]).keyFrame?(r.length&&(i.push(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration),(r=[n]).nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return i.length&&r.duration<=0&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration,i.push(r),i}(n))[0][0].keyFrame||((r=this.getGopForFusion_(a[0],t))?(s.unshift(r),s.byteLength+=r.byteLength,s.nalCount+=r.nalCount,s.pts=r.pts,s.dts=r.dts,s.duration+=r.duration):s=function(t){var e;return!t[0][0].keyFrame&&1<t.length&&(e=t.shift(),t.byteLength-=e.byteLength,t.nalCount-=e.nalCount,t[0][0].dts=e.dts,t[0][0].pts=e.pts,t[0][0].duration+=e.duration),t}(s)),o.length){var h;if(!(h=e.alignGopsAtEnd?this.alignGopsAtEnd_(s):this.alignGopsAtStart_(s)))return this.gopCache_.unshift({gop:s.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");K(t),s=h}tt(t,s),t.samples=function(t,e){var n,r,i,a,o,s,u=0,l=[];for(n=0;n<t.length;n++)for(a=t[n],r=0;r<a.length;r++)o=a[r],s=void 0,(s={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}).dataOffset=u,s.compositionTimeOffset=o.pts-o.dts,s.duration=o.duration,s.size=4*o.length,s.size+=o.byteLength,o.keyFrame&&(s.flags.dependsOn=2,s.flags.isNonSyncSample=0),u+=(i=s).size,l.push(i);return l}(s),l=Y.mdat(function(t){var e,n,r,i,a,o,s=0,u=new Uint8Array(t.byteLength+4*t.nalCount),l=new DataView(u.buffer);for(e=0;e<t.length;e++)for(i=t[e],n=0;n<i.length;n++)for(a=i[n],r=0;r<a.length;r++)l.setUint32(s,(o=a[r]).data.byteLength),u.set(o.data,s+=4),s+=o.data.byteLength;return u}(s)),t.baseMediaDecodeTime=J(t,e.keepOriginalTimestamps),this.trigger("processedGopsInfo",s.map(function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}})),this.gopCache_.unshift({gop:s.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",t.baseMediaDecodeTime),this.trigger("timelineStartInfo",t.timelineStartInfo),u=Y.moof(i,[t]),c=new Uint8Array(u.byteLength+l.byteLength),i++,c.set(u),c.set(l,u.byteLength),this.trigger("data",{track:t,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){K(t),r=n=void 0},this.getGopForFusion_=function(e){var n,r,i,a,o,s=1/0;for(o=0;o<this.gopCache_.length;o++)i=(a=this.gopCache_[o]).gop,t.pps&&Qt(t.pps[0],a.pps[0])&&t.sps&&Qt(t.sps[0],a.sps[0])&&(i.dts<t.timelineStartInfo.dts||-1e4<=(n=e.dts-i.dts-i.duration)&&n<=45e3&&(!r||n<s)&&(r=a,s=n));return r?r.gop:null},this.alignGopsAtStart_=function(t){var e,n,r,i,a,s,u,l;for(a=t.byteLength,s=t.nalCount,u=t.duration,e=n=0;e<o.length&&n<t.length&&(r=o[e]).pts!==(i=t[n]).pts;)i.pts>r.pts?e++:(n++,a-=i.byteLength,s-=i.nalCount,u-=i.duration);return 0===n?t:n===t.length?null:((l=t.slice(n)).byteLength=a,l.duration=u,l.nalCount=s,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(t){var e,n,r,i,a,s,u;for(e=o.length-1,n=t.length-1,a=null,s=!1;0<=e&&0<=n;){if((r=o[e]).pts===(i=t[n]).pts){s=!0;break}r.pts>i.pts?e--:(e===o.length-1&&(a=n),n--)}if(!s&&null===a)return null;if(0===(u=s?n:a))return t;var l=t.slice(u),c=l.reduce(function(t,e){return t.byteLength+=e.byteLength,t.duration+=e.duration,t.nalCount+=e.nalCount,t},{byteLength:0,duration:0,nalCount:0});return l.byteLength=c.byteLength,l.duration=c.duration,l.nalCount=c.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(t){o=t}}).prototype=new Q,($t=function(t,e){this.numberOfTracks=0,this.metadataStream=e,this.remuxTracks=void 0===t.remux||!!t.remux,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,$t.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBoxes.push(t.boxes),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track),void("audio"===t.track.type&&(this.audioTrack=t.track)))}}).prototype=new Q,$t.prototype.flush=function(t){var e,n,r,i,a=0,o={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,re.forEach(function(t){o.info[t]=this.videoTrack[t]},this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,ne.forEach(function(t){o.info[t]=this.audioTrack[t]},this)),o.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,r=Y.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(r.byteLength),o.initSegment.set(r),o.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)o.data.set(this.pendingBoxes[i],a),a+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(e=this.pendingCaptions[i]).startTime=e.startPts-s,e.startTime/=9e4,e.endTime=e.endPts-s,e.endTime/=9e4,o.captionStreams[e.stream]=!0,o.captions.push(e);for(i=0;i<this.pendingMetadata.length;i++)(n=this.pendingMetadata[i]).cueTime=n.pts-s,n.cueTime/=9e4,o.metadata.push(n);o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(Xt=function(t){var e,n,r=this,i=!0;Xt.prototype.init.call(this),this.baseMediaDecodeTime=(t=t||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var e={};(this.transmuxPipeline_=e).type="aac",e.metadataStream=new Ot.MetadataStream,e.aacStream=new Ut,e.audioTimestampRolloverStream=new Ot.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new Ot.TimestampRolloverStream("timed-metadata"),e.adtsStream=new At,e.coalesceStream=new $t(t,e.metadataStream),e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream),e.metadataStream.on("timestamp",function(t){e.aacStream.setTimestamp(t.timeStamp)}),e.aacStream.on("data",function(i){"timed-metadata"!==i.type||e.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:r.baseMediaDecodeTime},codec:"adts",type:"audio"},e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new Yt(n,t),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream))}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var i={};(this.transmuxPipeline_=i).type="ts",i.metadataStream=new Ot.MetadataStream,i.packetStream=new Ot.TransportPacketStream,i.parseStream=new Ot.TransportParseStream,i.elementaryStream=new Ot.ElementaryStream,i.videoTimestampRolloverStream=new Ot.TimestampRolloverStream("video"),i.audioTimestampRolloverStream=new Ot.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new Ot.TimestampRolloverStream("timed-metadata"),i.adtsStream=new At,i.h264Stream=new ee,i.captionStream=new Ot.CaptionStream,i.coalesceStream=new $t(t,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream),i.elementaryStream.pipe(i.videoTimestampRolloverStream).pipe(i.h264Stream),i.elementaryStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.elementaryStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",function(a){var o;if("metadata"===a.type){for(o=a.tracks.length;o--;)e||"video"!==a.tracks[o].type?n||"audio"!==a.tracks[o].type||((n=a.tracks[o]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime):(e=a.tracks[o]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime;e&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new qt(e,t),i.videoSegmentStream.on("timelineStartInfo",function(t){n&&(n.timelineStartInfo=t,i.audioSegmentStream.setEarliestDts(t.dts))}),i.videoSegmentStream.on("processedGopsInfo",r.trigger.bind(r,"gopInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",function(t){n&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(t)}),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),n&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new Yt(n,t),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream))}}),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(t){var r=this.transmuxPipeline_;this.baseMediaDecodeTime=t,n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,K(n),n.timelineStartInfo.baseMediaDecodeTime=t,r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),e&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[],r.videoTimestampRolloverStream.discontinuity()),e.timelineStartInfo.dts=void 0,e.timelineStartInfo.pts=void 0,K(e),r.captionStream.reset(),e.timelineStartInfo.baseMediaDecodeTime=t),r.timedMetadataTimestampRolloverStream&&r.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.alignGopsWith=function(t){e&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(t)},this.push=function(t){if(i){var e=Zt(t);e&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():e||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1}this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new Q;var ie,ae,oe={Transmuxer:Xt,VideoSegmentStream:qt,AudioSegmentStream:Yt,AUDIO_PROPERTIES:ne,VIDEO_PROPERTIES:re},se=$.parseType,ue=function(t){return new Date(1e3*t-20828448e5)},le=function(t){return{isLeading:(12&t[0])>>>2,dependsOn:3&t[0],isDependedOn:(192&t[1])>>>6,hasRedundancy:(48&t[1])>>>4,paddingValue:(14&t[1])>>>1,isNonSyncSample:1&t[1],degradationPriority:t[2]<<8|t[3]}},ce={avc1:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{dataReferenceIndex:e.getUint16(6),width:e.getUint16(24),height:e.getUint16(26),horizresolution:e.getUint16(28)+e.getUint16(30)/16,vertresolution:e.getUint16(32)+e.getUint16(34)/16,frameCount:e.getUint16(40),depth:e.getUint16(74),config:ie(t.subarray(78,t.byteLength))}},avcC:function(t){var e,n,r,i,a=new DataView(t.buffer,t.byteOffset,t.byteLength),o={configurationVersion:t[0],avcProfileIndication:t[1],profileCompatibility:t[2],avcLevelIndication:t[3],lengthSizeMinusOne:3&t[4],sps:[],pps:[]},s=31&t[5];for(r=6,i=0;i<s;i++)n=a.getUint16(r),r+=2,o.sps.push(new Uint8Array(t.subarray(r,r+n))),r+=n;for(e=t[r],r++,i=0;i<e;i++)n=a.getUint16(r),r+=2,o.pps.push(new Uint8Array(t.subarray(r,r+n))),r+=n;return o},btrt:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{bufferSizeDB:e.getUint32(0),maxBitrate:e.getUint32(4),avgBitrate:e.getUint32(8)}},esds:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),esId:t[6]<<8|t[7],streamPriority:31&t[8],decoderConfig:{objectProfileIndication:t[11],streamType:t[12]>>>2&63,bufferSize:t[13]<<16|t[14]<<8|t[15],maxBitrate:t[16]<<24|t[17]<<16|t[18]<<8|t[19],avgBitrate:t[20]<<24|t[21]<<16|t[22]<<8|t[23],decoderConfigDescriptor:{tag:t[24],length:t[25],audioObjectType:t[26]>>>3&31,samplingFrequencyIndex:(7&t[26])<<1|t[27]>>>7&1,channelConfiguration:t[27]>>>3&15}}}},ftyp:function(t){for(var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={majorBrand:se(t.subarray(0,4)),minorVersion:e.getUint32(4),compatibleBrands:[]},r=8;r<t.byteLength;)n.compatibleBrands.push(se(t.subarray(r,r+4))),r+=4;return n},dinf:function(t){return{boxes:ie(t)}},dref:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),dataReferences:ie(t.subarray(8))}},hdlr:function(t){var e={version:new DataView(t.buffer,t.byteOffset,t.byteLength).getUint8(0),flags:new Uint8Array(t.subarray(1,4)),handlerType:se(t.subarray(8,12)),name:""},n=8;for(n=24;n<t.byteLength;n++){if(0===t[n]){n++;break}e.name+=String.fromCharCode(t[n])}return e.name=decodeURIComponent(escape(e.name)),e},mdat:function(t){return{byteLength:t.byteLength,nals:function(t){var e,n,r=new DataView(t.buffer,t.byteOffset,t.byteLength),i=[];for(e=0;e+4<t.length;e+=n)if(n=r.getUint32(e),e+=4,n<=0)i.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&t[e]){case 1:i.push("slice_layer_without_partitioning_rbsp");break;case 5:i.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:i.push("sei_rbsp");break;case 7:i.push("seq_parameter_set_rbsp");break;case 8:i.push("pic_parameter_set_rbsp");break;case 9:i.push("access_unit_delimiter_rbsp");break;default:i.push("UNKNOWN NAL - "+t[e]&31)}return i}(t)}},mdhd:function(t){var e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r=4,i={version:n.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),language:""};return 1===i.version?(i.creationTime=ue(n.getUint32(r+=4)),i.modificationTime=ue(n.getUint32(r+=8)),i.timescale=n.getUint32(r+=4),r+=8):(i.creationTime=ue(n.getUint32(r)),i.modificationTime=ue(n.getUint32(r+=4)),i.timescale=n.getUint32(r+=4),r+=4),i.duration=n.getUint32(r),e=n.getUint16(r+=4),i.language+=String.fromCharCode(96+(e>>10)),i.language+=String.fromCharCode(96+((992&e)>>5)),i.language+=String.fromCharCode(96+(31&e)),i},mdia:function(t){return{boxes:ie(t)}},mfhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sequenceNumber:t[4]<<24|t[5]<<16|t[6]<<8|t[7]}},minf:function(t){return{boxes:ie(t)}},mp4a:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n={dataReferenceIndex:e.getUint16(6),channelcount:e.getUint16(16),samplesize:e.getUint16(18),samplerate:e.getUint16(24)+e.getUint16(26)/65536};return 28<t.byteLength&&(n.streamDescriptor=ie(t.subarray(28))[0]),n},moof:function(t){return{boxes:ie(t)}},moov:function(t){return{boxes:ie(t)}},mvex:function(t){return{boxes:ie(t)}},mvhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,r={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return 1===r.version?(r.creationTime=ue(e.getUint32(n+=4)),r.modificationTime=ue(e.getUint32(n+=8)),r.timescale=e.getUint32(n+=4),n+=8):(r.creationTime=ue(e.getUint32(n)),r.modificationTime=ue(e.getUint32(n+=4)),r.timescale=e.getUint32(n+=4),n+=4),r.duration=e.getUint32(n),r.rate=e.getUint16(n+=4)+e.getUint16(n+2)/16,r.volume=e.getUint8(n+=4)+e.getUint8(n+1)/8,n+=2,n+=2,n+=8,r.matrix=new Uint32Array(t.subarray(n,n+36)),n+=36,r.nextTrackId=e.getUint32(n+=24),r},pdin:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4)),rate:e.getUint32(4),initialDelay:e.getUint32(8)}},sdtp:function(t){var e,n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]};for(e=4;e<t.byteLength;e++)n.samples.push({dependsOn:(48&t[e])>>4,isDependedOn:(12&t[e])>>2,hasRedundancy:3&t[e]});return n},sidx:function(t){var e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},i=n.getUint16(22);for(e=24;i;e+=12,i--)r.references.push({referenceType:(128&t[e])>>>7,referencedSize:2147483647&n.getUint32(e),subsegmentDuration:n.getUint32(e+4),startsWithSap:!!(128&t[e+8]),sapType:(112&t[e+8])>>>4,sapDeltaTime:268435455&n.getUint32(e+8)});return r},smhd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),balance:t[4]+t[5]/256}},stbl:function(t){return{boxes:ie(t)}},stco:function(t){var e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),chunkOffsets:[]},i=n.getUint32(4);for(e=8;i;e+=4,i--)r.chunkOffsets.push(n.getUint32(e));return r},stsc:function(t){var e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r=n.getUint32(4),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleToChunks:[]};for(e=8;r;e+=12,r--)i.sampleToChunks.push({firstChunk:n.getUint32(e),samplesPerChunk:n.getUint32(e+4),sampleDescriptionIndex:n.getUint32(e+8)});return i},stsd:function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleDescriptions:ie(t.subarray(8))}},stsz:function(t){var e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(e=12;e<t.byteLength;e+=4)r.entries.push(n.getUint32(e));return r},stts:function(t){var e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),timeToSamples:[]},i=n.getUint32(4);for(e=8;i;e+=8,i--)r.timeToSamples.push({sampleCount:n.getUint32(e),sampleDelta:n.getUint32(e+4)});return r},styp:function(t){return ce.ftyp(t)},tfdt:function(t){var e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),baseMediaDecodeTime:t[4]<<24|t[5]<<16|t[6]<<8|t[7]};return 1===e.version&&(e.baseMediaDecodeTime*=Math.pow(2,32),e.baseMediaDecodeTime+=t[8]<<24|t[9]<<16|t[10]<<8|t[11]),e},tfhd:function(t){var e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),r={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:n.getUint32(4)},i=1&r.flags[2],a=2&r.flags[2],o=8&r.flags[2],s=16&r.flags[2],u=32&r.flags[2],l=65536&r.flags[0],c=131072&r.flags[0];return e=8,i&&(e+=4,r.baseDataOffset=n.getUint32(12),e+=4),a&&(r.sampleDescriptionIndex=n.getUint32(e),e+=4),o&&(r.defaultSampleDuration=n.getUint32(e),e+=4),s&&(r.defaultSampleSize=n.getUint32(e),e+=4),u&&(r.defaultSampleFlags=n.getUint32(e)),l&&(r.durationIsEmpty=!0),!i&&c&&(r.baseDataOffsetIsMoof=!0),r},tkhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),n=4,r={version:e.getUint8(0),flags:new Uint8Array(t.subarray(1,4))};return 1===r.version?(r.creationTime=ue(e.getUint32(n+=4)),r.modificationTime=ue(e.getUint32(n+=8)),r.trackId=e.getUint32(n+=4),n+=4,n+=8):(r.creationTime=ue(e.getUint32(n)),r.modificationTime=ue(e.getUint32(n+=4)),r.trackId=e.getUint32(n+=4),n+=4,n+=4),r.duration=e.getUint32(n),n+=4,r.layer=e.getUint16(n+=8),r.alternateGroup=e.getUint16(n+=2),r.volume=e.getUint8(n+=2)+e.getUint8(n+1)/8,n+=2,n+=2,r.matrix=new Uint32Array(t.subarray(n,n+36)),r.width=e.getUint16(n+=36)+e.getUint16(n+2)/16,r.height=e.getUint16(n+=4)+e.getUint16(n+2)/16,r},traf:function(t){return{boxes:ie(t)}},trak:function(t){return{boxes:ie(t)}},trex:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:e.getUint32(4),defaultSampleDescriptionIndex:e.getUint32(8),defaultSampleDuration:e.getUint32(12),defaultSampleSize:e.getUint32(16),sampleDependsOn:3&t[20],sampleIsDependedOn:(192&t[21])>>6,sampleHasRedundancy:(48&t[21])>>4,samplePaddingValue:(14&t[21])>>1,sampleIsDifferenceSample:!!(1&t[21]),sampleDegradationPriority:e.getUint16(22)}},trun:function(t){var e,n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},r=new DataView(t.buffer,t.byteOffset,t.byteLength),i=1&n.flags[2],a=4&n.flags[2],o=1&n.flags[1],s=2&n.flags[1],u=4&n.flags[1],l=8&n.flags[1],c=r.getUint32(4),h=8;for(i&&(n.dataOffset=r.getInt32(h),h+=4),a&&c&&(e={flags:le(t.subarray(h,h+4))},h+=4,o&&(e.duration=r.getUint32(h),h+=4),s&&(e.size=r.getUint32(h),h+=4),l&&(e.compositionTimeOffset=r.getUint32(h),h+=4),n.samples.push(e),c--);c--;)e={},o&&(e.duration=r.getUint32(h),h+=4),s&&(e.size=r.getUint32(h),h+=4),u&&(e.flags=le(t.subarray(h,h+4)),h+=4),l&&(e.compositionTimeOffset=r.getUint32(h),h+=4),n.samples.push(e);return n},"url ":function(t){return{version:t[0],flags:new Uint8Array(t.subarray(1,4))}},vmhd:function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength);return{version:t[0],flags:new Uint8Array(t.subarray(1,4)),graphicsmode:e.getUint16(4),opcolor:new Uint16Array([e.getUint16(6),e.getUint16(8),e.getUint16(10)])}}},he={inspect:ie=function(t){for(var e,n,r,i,a,o=0,s=[],u=new ArrayBuffer(t.length),l=new Uint8Array(u),c=0;c<t.length;++c)l[c]=t[c];for(e=new DataView(u);o<t.byteLength;)n=e.getUint32(o),r=se(t.subarray(o+4,o+8)),i=1<n?o+n:t.byteLength,(a=(ce[r]||function(t){return{data:t}})(t.subarray(o+8,i))).size=n,a.type=r,s.push(a),o=i;return s},textify:ae=function(t,e){var n;return e=e||0,n=new Array(2*e+1).join(" "),t.map(function(t,r){return n+t.type+"\n"+Object.keys(t).filter(function(t){return"type"!==t&&"boxes"!==t}).map(function(e){var r=n+"  "+e+": ",i=t[e];if(i instanceof Uint8Array||i instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(i.buffer,i.byteOffset,i.byteLength)).map(function(t){return" "+("00"+t.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return a?1===a.length?r+"<"+a.join("").slice(1)+">":r+"<\n"+a.map(function(t){return n+"  "+t}).join("\n")+"\n"+n+"  >":r+"<>"}return r+JSON.stringify(i,null,2).split("\n").map(function(t,e){return 0===e?t:n+"  "+t}).join("\n")}).join("\n")+(t.boxes?"\n"+ae(t.boxes,e+1):"")}).join("\n")},parseTfdt:ce.tfdt,parseHdlr:ce.hdlr,parseTfhd:ce.tfhd,parseTrun:ce.trun},fe=function(t){for(var e,n,r=t.byteLength,i=[],a=1;a<r-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return t;e=r-i.length,n=new Uint8Array(e);var o=0;for(a=0;a<e;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=t[o];return n},de=st.CaptionStream,pe=function(t,e){for(var n=t,r=0;r<e.length;r++){var i=e[r];if(n<i.size)return i;n-=i.size}return null},ge={generator:Y,probe:$,Transmuxer:oe.Transmuxer,AudioSegmentStream:oe.AudioSegmentStream,VideoSegmentStream:oe.VideoSegmentStream,CaptionParser:function(){var t,e,n,r,i,a=!1;this.isInitialized=function(){return a},this.init=function(){t=new de,a=!0,t.on("data",function(t){t.startTime=t.startPts/r,t.endTime=t.endPts/r,i.captions.push(t),i.captionStreams[t.stream]=!0})},this.isNewInit=function(t,e){return!(t&&0===t.length||e&&"object"==typeof e&&0===Object.keys(e).length||n===t[0]&&r===e[n])},this.parse=function(t,a,o){var s,u,l;if(!this.isInitialized())return null;if(!a||!o)return null;if(this.isNewInit(a,o))r=o[n=a[0]];else if(!n||!r)return e.push(t),null;for(;0<e.length;){var c=e.shift();this.parse(c,a,o)}return l=r,null!==(s=(u=n)?{seiNals:function(t,e){var n=$.findBox(t,["moof","traf"]),r={},i=[];return $.findBox(t,["mdat"]).forEach(function(t,e){i.push({mdat:t,traf:n[e]})}),i.forEach(function(t){var n,i,a,o,s,u,l,c=t.mdat,h=t.traf,f=$.findBox(h,["tfhd"]),d=he.parseTfhd(f[0]),p=d.trackId,g=$.findBox(h,["tfdt"]),v=0<g.length?he.parseTfdt(g[0]).baseMediaDecodeTime:0,m=$.findBox(h,["trun"]);e===p&&0<m.length&&(a=v,o=(i=d).defaultSampleDuration||0,s=i.defaultSampleSize||0,u=i.trackId,l=[],m.forEach(function(t){var e=he.parseTrun(t).samples;e.forEach(function(t){void 0===t.duration&&(t.duration=o),void 0===t.size&&(t.size=s),t.trackId=u,t.dts=a,void 0===t.compositionTimeOffset&&(t.compositionTimeOffset=0),t.pts=a+t.compositionTimeOffset,a+=t.duration}),l=l.concat(e)}),n=function(t,e,n){var r,i,a,o,s=new DataView(t.buffer,t.byteOffset,t.byteLength),u=[];for(i=0;i+4<t.length;i+=a)if(a=s.getUint32(i),i+=4,!(a<=0))switch(31&t[i]){case 6:var l=t.subarray(i+1,i+1+a),c=pe(i,e);r={nalUnitType:"sei_rbsp",size:a,data:l,escapedRBSP:fe(l),trackId:n},c?(r.pts=c.pts,r.dts=c.dts,o=c):(r.pts=o.pts,r.dts=o.dts),u.push(r)}return u}(c,l,p),r[p]||(r[p]=[]),r[p]=r[p].concat(n))}),r}(t,u)[u],timescale:l}:null)&&s.seiNals?(this.pushNals(s.seiNals),this.flushStream(),i):null},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach(function(e){t.push(e)})},this.flushStream=function(){if(!this.isInitialized())return null;t.flush()},this.clearParsedCaptions=function(){i.captions=[],i.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){e=[],r=n=null,i?this.clearParsedCaptions():i={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}},ve=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),me=function(){function t(e,n){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),this.options=n||{},this.self=e,this.init()}return ve(t,[{key:"init",value:function(){var t,e;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new ge.Transmuxer(this.options),t=this.self,(e=this.transmuxer).on("data",function(e){var n=e.initSegment;e.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};var r=e.data;e.data=r.buffer,t.postMessage({action:"data",segment:e,byteOffset:r.byteOffset,byteLength:r.byteLength},[e.data])}),e.captionStream&&e.captionStream.on("data",function(e){t.postMessage({action:"caption",data:e})}),e.on("done",function(e){t.postMessage({action:"done"})}),e.on("gopInfo",function(e){t.postMessage({action:"gopInfo",gopInfo:e})})}},{key:"push",value:function(t){var e=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(e)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(t){this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*(t.timestampOffset||0)))}},{key:"setAudioAppendStart",value:function(t){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*t.appendStart))}},{key:"flush",value:function(t){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(t){this.transmuxer.alignGopsWith(t.gopsToAlignWith.slice())}}]),t}();new function(t){t.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new me(t,e.data.options):(this.messageHandlers||(this.messageHandlers=new me(t)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}(n)}()}),Cl={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},El=function(t){return t.map(function(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,function(t,e,n){return"avc1."+("00"+Number(e).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})})},Al=function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n={codecCount:0};return n.codecCount=e.split(",").length,n.codecCount=n.codecCount||2,(t=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(e))&&(n.videoCodec=t[2],n.videoObjectTypeIndicator=t[3]),n.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(e),n.audioProfile=n.audioProfile&&n.audioProfile[2],n},Il=function(t,e,n){return t+"/"+e+'; codecs="'+n.filter(function(t){return!!t}).join(", ")+'"'},Pl=function(t){return/mp4a\.\d+.\d+/i.test(t)},Ll=function(t){return/avc1\.[\da-f]+/i.test(t)},Dl=function(e){function n(t,e){Su(this,n);var r=Mu(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,Ki.EventTarget));r.timestampOffset_=0,r.pendingBuffers_=[],r.bufferUpdating_=!1,r.mediaSource_=t,r.codecs_=e,r.audioCodec_=null,r.videoCodec_=null,r.audioDisabled_=!1,r.appendAudioInitSegment_=!0,r.gopBuffer_=[],r.timeMapping_=0,r.safeAppend_=11<=Ki.browser.IE_VERSION;var i={remux:!1,alignGopsAtEnd:r.safeAppend_};return r.codecs_.forEach(function(t){Pl(t)?r.audioCodec_=t:Ll(t)&&(r.videoCodec_=t)}),r.transmuxer_=new kl,r.transmuxer_.postMessage({action:"init",options:i}),r.transmuxer_.onmessage=function(t){return"data"===t.data.action?r.data_(t):"done"===t.data.action?r.done_(t):"gopInfo"===t.data.action?r.appendGopInfo_(t):void 0},Object.defineProperty(r,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(t){"number"==typeof t&&0<=t&&(this.timestampOffset_=t,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t}))}}),Object.defineProperty(r,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(t){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=t),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=t)}}),Object.defineProperty(r,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(r,"buffered",{get:function(){return function(t,e,n){var r=null,i=null,a=0,o=[],s=[];if(!t&&!e)return Ki.createTimeRange();if(!t)return e.buffered;if(!e)return t.buffered;if(n)return t.buffered;if(0===t.buffered.length&&0===e.buffered.length)return Ki.createTimeRange();for(var u=t.buffered,l=e.buffered,c=u.length;c--;)o.push({time:u.start(c),type:"start"}),o.push({time:u.end(c),type:"end"});for(c=l.length;c--;)o.push({time:l.start(c),type:"start"}),o.push({time:l.end(c),type:"end"});for(o.sort(function(t,e){return t.time-e.time}),c=0;c<o.length;c++)"start"===o[c].type?2==++a&&(r=o[c].time):"end"===o[c].type&&1==--a&&(i=o[c].time),null!==r&&null!==i&&(s.push([r,i]),i=r=null);return Ki.createTimeRanges(s)}(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),r}return Ou(n,Ki.EventTarget),Tu(n,[{key:"data_",value:function(t){var e=t.data.segment;e.data=new Uint8Array(e.data,t.data.byteOffset,t.data.byteLength),e.initSegment=new Uint8Array(e.initSegment.data,e.initSegment.byteOffset,e.initSegment.byteLength),function(t,e,n){var r=e.player_;if(n.captions&&n.captions.length)for(var i in t.inbandTextTracks_||(t.inbandTextTracks_={}),n.captionStreams)if(!t.inbandTextTracks_[i]){r.tech_.trigger({type:"usage",name:"hls-608"});var a=r.textTracks().getTrackById(i);t.inbandTextTracks_[i]=a||r.addRemoteTextTrack({kind:"captions",id:i,label:i},!1).track}n.metadata&&n.metadata.length&&!t.metadataTrack_&&(t.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)}(this,this.mediaSource_,e),this.pendingBuffers_.push(e)}},{key:"done_",value:function(t){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"createRealSourceBuffers_",value:function(){var t=this,e=["audio","video"];e.forEach(function(n){if(t[n+"Codec_"]&&!t[n+"Buffer_"]){var r=null;t.mediaSource_[n+"Buffer_"]?(r=t.mediaSource_[n+"Buffer_"]).updating=!1:(r=function(t,e){var n=t.addSourceBuffer(e),r=Object.create(null);r.updating=!1,r.realBuffer_=n;var i=function(t){"function"==typeof n[t]?r[t]=function(){return n[t].apply(n,arguments)}:void 0===r[t]&&Object.defineProperty(r,t,{get:function(){return n[t]},set:function(e){return n[t]=e}})};for(var a in n)i(a);return r}(t.mediaSource_.nativeMediaSource_,n+'/mp4;codecs="'+t[n+"Codec_"]+'"'),t.mediaSource_[n+"Buffer_"]=r),t[n+"Buffer_"]=r,["update","updatestart","updateend"].forEach(function(i){r.addEventListener(i,function(){if("audio"!==n||!t.audioDisabled_)return"updateend"===i&&(t[n+"Buffer_"].updating=!1),e.every(function(e){return!("audio"!==e||!t.audioDisabled_)||n===e||!t[e+"Buffer_"]||!t[e+"Buffer_"].updating})?t.trigger(i):void 0})})}})}},{key:"appendBuffer",value:function(t){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var e=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:e.end(e.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:function(t,e,n){if(void 0===e||null===e||!t.length)return[];var r=Math.ceil(9e4*(e-n+3)),i=void 0;for(i=0;i<t.length&&!(t[i].pts>r);i++);return t.slice(i)}(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(t){this.gopBuffer_=function(t,e,n){if(!e.length)return t;if(n)return e.slice();for(var r=e[0].pts,i=0;i<t.length&&!(t[i].pts>=r);i++);return t.slice(0,i).concat(e)}(this.gopBuffer_,t.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(t,e){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(t,e),this.gopBuffer_=function(t,e,n,r){for(var i=Math.ceil(9e4*(e-r)),a=Math.ceil(9e4*(n-r)),o=t.slice(),s=t.length;s--&&!(t[s].pts<=a););if(-1===s)return o;for(var u=s+1;u--&&!(t[u].pts<=i););return u=Math.max(u,0),o.splice(u,s-u+1),o}(this.gopBuffer_,t,e,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(t,e)),pl(t,e,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)pl(t,e,this.inbandTextTracks_[n])}},{key:"processPendingSegments_",value:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};e=this.pendingBuffers_.reduce(function(t,e){var n=e.type,r=e.data,i=e.initSegment;return t[n].segments.push(r),t[n].bytes+=r.byteLength,t[n].initSegment=i,e.captions&&(t.captions=t.captions.concat(e.captions)),e.info&&(t[n].info=e.info),e.metadata&&(t.metadata=t.metadata.concat(e.metadata)),t},e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var n=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_),function(e,n,r){var i=t.WebKitDataCue||t.VTTCue;if(n&&n.forEach(function(t){this.inbandTextTracks_[t.stream].addCue(new i(t.startTime+this.timestampOffset,t.endTime+this.timestampOffset,t.text))},e),r){var a=gl(e.mediaSource_.duration);if(r.forEach(function(t){var e=t.cueTime+this.timestampOffset;t.frames.forEach(function(t){var n,r=new i(e,e,t.value||t.url||t.data||"");r.frame=t,r.value=t,n=r,Object.defineProperties(n.frame,{id:{get:function(){return Ki.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),n.value.key}},value:{get:function(){return Ki.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),n.value.data}},privateData:{get:function(){return Ki.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),n.value.data}}}),this.metadataTrack_.addCue(r)},this)},e),e.metadataTrack_&&e.metadataTrack_.cues&&e.metadataTrack_.cues.length){for(var o=e.metadataTrack_.cues,s=[],u=0;u<o.length;u++)o[u]&&s.push(o[u]);var l=s.reduce(function(t,e){var n=t[e.startTime]||[];return n.push(e),t[e.startTime]=n,t},{}),c=Object.keys(l).sort(function(t,e){return Number(t)-Number(e)});c.forEach(function(t,e){var n=l[t],r=Number(c[e+1])||a;n.forEach(function(t){t.endTime=r})})}}}(this,e.captions,e.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(n=!0),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,n&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(t,e){var n=0,r=void 0;if(t.bytes){r=new Uint8Array(t.bytes),t.segments.forEach(function(t){r.set(t,n),n+=t.byteLength});try{e.updating=!0,e.appendBuffer(r)}catch(t){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:t.message,originalError:t})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),n}(),jl=function(n){function r(){Su(this,r);var n=Mu(this,(r.__proto__||Object.getPrototypeOf(r)).call(this)),i=void 0;for(i in n.nativeMediaSource_=new t.MediaSource,n.nativeMediaSource_)i in r.prototype||"function"!=typeof n.nativeMediaSource_[i]||(n[i]=n.nativeMediaSource_[i].bind(n.nativeMediaSource_));return n.duration_=NaN,Object.defineProperty(n,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(t){(this.duration_=t)===1/0||(this.nativeMediaSource_.duration=t)}}),Object.defineProperty(n,"seekable",{get:function(){return this.duration_===1/0?Ki.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(n,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(n,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),n.sourceBuffers=[],n.activeSourceBuffers_=[],n.updateActiveSourceBuffers_=function(){if(n.activeSourceBuffers_.length=0,1===n.sourceBuffers.length){var t=n.sourceBuffers[0];return t.appendAudioInitSegment_=!0,t.audioDisabled_=!t.audioCodec_,void n.activeSourceBuffers_.push(t)}for(var e=!1,r=!0,i=0;i<n.player_.audioTracks().length;i++){var a=n.player_.audioTracks()[i];if(a.enabled&&"main"!==a.kind){r=!(e=!0);break}}n.sourceBuffers.forEach(function(t,i){if(t.appendAudioInitSegment_=!0,t.videoCodec_&&t.audioCodec_)t.audioDisabled_=e;else if(t.videoCodec_&&!t.audioCodec_)t.audioDisabled_=!0,r=!1;else if(!t.videoCodec_&&t.audioCodec_&&(t.audioDisabled_=i?r:!r,t.audioDisabled_))return;n.activeSourceBuffers_.push(t)})},n.onPlayerMediachange_=function(){n.sourceBuffers.forEach(function(t){t.appendAudioInitSegment_=!0})},n.onHlsReset_=function(){n.sourceBuffers.forEach(function(t){t.transmuxer_&&t.transmuxer_.postMessage({action:"resetCaptions"})})},n.onHlsSegmentTimeMapping_=function(t){n.sourceBuffers.forEach(function(e){return e.timeMapping_=t.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(t){this.nativeMediaSource_.addEventListener(t,this.trigger.bind(this))},n),n.on("sourceopen",function(t){var r=e.querySelector('[src="'+n.url_+'"]');r&&(n.player_=Ki(r.parentNode),n.player_.tech_.on("hls-reset",n.onHlsReset_),n.player_.tech_.on("hls-segment-time-mapping",n.onHlsSegmentTimeMapping_),n.player_.audioTracks&&n.player_.audioTracks()&&(n.player_.audioTracks().on("change",n.updateActiveSourceBuffers_),n.player_.audioTracks().on("addtrack",n.updateActiveSourceBuffers_),n.player_.audioTracks().on("removetrack",n.updateActiveSourceBuffers_)),n.player_.on("mediachange",n.onPlayerMediachange_))}),n.on("sourceended",function(t){for(var e=gl(n.duration),r=0;r<n.sourceBuffers.length;r++){var i=n.sourceBuffers[r],a=i.metadataTrack_&&i.metadataTrack_.cues;a&&a.length&&(a[a.length-1].endTime=e)}}),n.on("sourceclose",function(t){this.sourceBuffers.forEach(function(t){t.transmuxer_&&t.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),n}return Ou(r,Ki.EventTarget),Tu(r,[{key:"addSeekableRange_",value:function(t,e){var n=void 0;if(this.duration!==1/0)throw(n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",n.code=11,n;(e>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=e)}},{key:"addSourceBuffer",value:function(t){var e,n,r=void 0,i=(e={type:"",parameters:{}},n=t.trim().split(";"),e.type=n.shift().trim(),n.forEach(function(t){var n=t.trim().split("=");if(1<n.length){var r=n[0].replace(/"/g,"").trim(),i=n[1].replace(/"/g,"").trim();e.parameters[r]=i}}),e);if(/^(video|audio)\/mp2t$/i.test(i.type)){var a=[];i.parameters&&i.parameters.codecs&&(a=i.parameters.codecs.split(","),a=(a=El(a)).filter(function(t){return Pl(t)||Ll(t)})),0===a.length&&(a=["avc1.4d400d","mp4a.40.2"]),r=new Dl(this,a),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),r.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else r=this.nativeMediaSource_.addSourceBuffer(t);return this.sourceBuffers.push(r),r}}]),r}(),Rl=0;Ki.mediaSources={};var Nl=function(t,e){var n=Ki.mediaSources[t];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:e})},Bl=function(){return!!t.MediaSource&&!!t.MediaSource.isTypeSupported&&t.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},Fl=function(){if(this.MediaSource={open:Nl,supportsNativeMediaSources:Bl},Bl())return new jl;throw new Error("Cannot use create a virtual MediaSource for this video")};Fl.open=Nl,Fl.supportsNativeMediaSources=Bl;var Ul={createObjectURL:function(e){var n=void 0;return e instanceof jl?(n=t.URL.createObjectURL(e.nativeMediaSource_),e.url_=n):e instanceof jl?(n="blob:vjs-media-source/"+Rl,Rl++,Ki.mediaSources[n]=e,n):(n=t.URL.createObjectURL(e),e.url_=n)}};Ki.MediaSource=Fl,Ki.URL=Ul;var zl=Ki.EventTarget,Vl=Ki.mergeOptions,Hl=function(t,e){for(var n=Vl(t,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod}),r=0;r<e.playlists.length;r++){var i=Pu(n,e.playlists[r]);i&&(n=i)}return Iu(e,function(t,e,r,i){if(t.playlists&&t.playlists.length){var a=t.playlists[0].uri,o=Pu(n,t.playlists[0]);o&&((n=o).mediaGroups[e][r][i].playlists[0]=n.playlists[a])}}),n},Gl=function(e){function n(e,r,i,a){Su(this,n);var o=Mu(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));if(o.hls_=r,o.withCredentials=i,!e)throw new Error("A non-empty playlist URL or playlist is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_()}),"string"==typeof e?(o.srcUrl=e,o.state="HAVE_NOTHING",Mu(o)):(o.masterPlaylistLoader_=a,o.state="HAVE_METADATA",o.started=!0,o.media(e),t.setTimeout(function(){o.trigger("loadedmetadata")},0),o)}return Ou(n,zl),Tu(n,[{key:"dispose",value:function(){this.stopRequest(),t.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}},{key:"media",value:function(t){if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var e=this.state;if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}var n=!this.media_||t.uri!==this.media_.uri;this.state="HAVE_METADATA",n&&(this.media_&&this.trigger("mediachanging"),this.media_=t,this.refreshMedia_(),"HAVE_MASTER"!==e&&this.trigger("mediachange"))}},{key:"pause",value:function(){this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(){this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var e=function(e,n){return function(t){var e;if(!t.length)return{};var n=t[0].attributes,r=n.sourceDuration,i=n.minimumUpdatePeriod,a=void 0===i?0:i,o=ga(t.filter(function(t){var e=t.attributes;return"video/mp4"===e.mimeType||"video"===e.contentType})).map(va),s=ga(t.filter(function(t){var e=t.attributes;return"audio/mp4"===e.mimeType||"audio"===e.contentType})),u=t.filter(function(t){var e=t.attributes;return"text/vtt"===e.mimeType||"text"===e.contentType}),l={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(e={AUDIO:{},VIDEO:{}},e["CLOSED-CAPTIONS"]={},e.SUBTITLES={},e),uri:"",duration:r,playlists:o,minimumUpdatePeriod:1e3*a};return s.length&&(l.mediaGroups.AUDIO.audio=s.reduce(function(t,e){var n,r,i,a,o,s=e.attributes.role&&e.attributes.role.value||"main",u=e.attributes.lang||"",l="main";return u&&(l=e.attributes.lang+" ("+s+")"),t[l]&&t[l].playlists[0].attributes.BANDWIDTH>e.attributes.bandwidth||(t[l]={language:u,autoselect:!0,default:"main"===s,playlists:[(n=e,i=n.attributes,a=n.segments,o={attributes:(r={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},r["PROGRAM-ID"]=1,r),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:a,mediaSequence:a.length?a[0].number:1},i.contentProtection&&(o.contentProtection=i.contentProtection),o)],uri:""}),t},{})),u.length&&(l.mediaGroups.SUBTITLES.subs=u.reduce(function(t,e){var n,r,i,a,o=e.attributes.lang||"text";return t[o]||(t[o]={language:o,default:!1,autoselect:!1,playlists:[(n=e,i=n.attributes,a=n.segments,void 0===a&&(a=[{uri:i.baseUrl,timeline:i.periodIndex,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration),{attributes:(r={NAME:i.id,BANDWIDTH:i.bandwidth},r["PROGRAM-ID"]=1,r),uri:"",endList:"static"===(i.type||"static"),timeline:i.periodIndex,resolvedUri:i.baseUrl||"",targetDuration:i.duration,segments:a,mediaSequence:a.length?a[0].number:1})],uri:""}),t},{})),l}(function(e,n){void 0===n&&(n={});var r=n,i=r.manifestUri,a=void 0===i?"":i,o=r.NOW,s=void 0===o?Date.now():o,u=r.clientOffset,l=void 0===u?0:u,c=ja(e,"Period");if(!c.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var h,f,d=Fa(e),p=za([a],ja(e,"BaseURL"));return d.sourceDuration=d.mediaPresentationDuration||0,d.NOW=s,d.clientOffset=l,da(c.map((h=d,f=p,function(e,n){var r,i,a,o=za(f,ja(e,"BaseURL")),s=Fa(e),u=parseInt(s.id,10),l=t.isNaN(u)?n:u,c=fa(h,{periodIndex:l}),d=ja(e,"AdaptationSet"),p=Va(e);return da(d.map((r=c,i=o,a=p,function(e){var n=Fa(e),o=za(i,ja(e,"BaseURL")),s=ja(e,"Role")[0],u={role:Fa(s)},l=fa(r,n,u),c=function(e){return e.reduce(function(e,n){var r=Fa(n),i=Ua[r.schemeIdUri];if(i){e[i]={attributes:r};var a=ja(n,"cenc:pssh")[0];if(a){var o=Ra(a),s=o&&function(e){for(var n=t.atob(o),r=new Uint8Array(n.length),i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}();e[i].pssh=s}}return e},{})}(ja(e,"ContentProtection"));Object.keys(c).length&&(l=fa(l,{contentProtection:c}));var h,f,d,p=Va(e),g=ja(e,"Representation"),v=fa(a,p);return da(g.map((h=l,f=o,d=v,function(t){var e=ja(t,"BaseURL"),n=za(f,e),r=fa(h,Fa(t)),i=Va(t);return n.map(function(t){return{segmentInfo:fa(d,i),attributes:fa(r,{baseUrl:t})}})})))})))})))}(Ha(e),n).map(Da))}(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});e.uri=this.srcUrl;for(var n=0;n<e.playlists.length;n++){var r="placeholder-uri-"+n;e.playlists[n].uri=r,e.playlists[r]=e.playlists[n]}return Iu(e,function(t,n,r,i){if(t.playlists&&t.playlists.length){var a="placeholder-uri-"+n+"-"+r+"-"+i;t.playlists[0].uri=a,e.playlists[a]=t.playlists[0]}}),Lu(e),Du(e),e}},{key:"start",value:function(){var t=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,n){if(t.request){if(t.request=null,e)return t.error={status:n.status,message:"DASH playlist request error at URL: "+t.srcUrl,responseText:n.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");t.masterXml_=n.responseText,t.masterLoaded_=n.responseHeaders&&n.responseHeaders.date?Date.parse(n.responseHeaders.date):Date.now(),t.syncClientServerClock_(t.onClientServerClockSync_.bind(t))}})}},{key:"syncClientServerClock_",value:function(t){var e=this,n=function(t){var e=ja(t,"UTCTiming")[0];if(!e)return null;var n=Fa(e);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return n}(Ha(this.masterXml_));return null===n?(this.clientOffset_=this.masterLoaded_-Date.now(),t()):"DIRECT"===n.method?(this.clientOffset_=n.value-Date.now(),t()):void(this.request=this.hls_.xhr({uri:wu(this.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials},function(r,i){if(e.request){if(r)return e.clientOffset_=e.masterLoaded_-Date.now(),t();var a;a="HEAD"===n.method?i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):e.masterLoaded_:Date.parse(i.responseText),e.clientOffset_=a-Date.now(),t()}}))}},{key:"onClientServerClockSync_",value:function(){var e=this;this.master=this.parseMasterXml(),this.state="HAVE_MASTER",this.trigger("loadedplaylist"),this.media_||this.media(this.master.playlists[0]),t.setTimeout(function(){e.trigger("loadedmetadata")},0),this.master.minimumUpdatePeriod&&t.setTimeout(function(){e.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod)}},{key:"refreshXml_",value:function(){var e=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(n,r){if(e.request){if(e.request=null,n)return e.error={status:r.status,message:"DASH playlist request error at URL: "+e.srcUrl,responseText:r.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.masterXml_=r.responseText;var i=e.parseMasterXml();e.master=Hl(e.master,i),t.setTimeout(function(){e.trigger("minimumUpdatePeriod")},e.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(){var e,n=this,r=void 0;e=this.masterPlaylistLoader_?(r=this.masterPlaylistLoader_.master,this.masterPlaylistLoader_.parseMasterXml()):(r=this.master,this.parseMasterXml());var i=Hl(r,e);i?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=i:this.master=i,this.media_=i.playlists[this.media_.uri]):this.trigger("playlistunchanged"),this.media().endList||(this.mediaUpdateTimeout=t.setTimeout(function(){n.trigger("mediaupdatetimeout")},ju(this.media(),!!i))),this.trigger("loadedplaylist")}}]),n}(),Wl=function(t){return Ki.log.debug?Ki.log.debug.bind(Ki,"VHS:",t+" >"):function(){}};function ql(){}var Yl=function(){function t(e,n,r,i){Su(this,t),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=e,this.processedAppend_=!1,this.type_=r,this.mimeType_=n,this.logger_=Wl("SourceUpdater["+r+"]["+n+"]"),"closed"===e.readyState?e.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,n,i)):this.createSourceBuffer_(n,i)}return Tu(t,[{key:"createSourceBuffer_",value:function(t,e){var n=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(t),this.logger_("created SourceBuffer"),e&&(e.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?e.on("sourcebufferadded",function(){n.start_()}):this.start_()}},{key:"start_",value:function(){var t=this;this.started_=!0,this.onUpdateendCallback_=function(){var e=t.pendingCallback_;t.pendingCallback_=null,t.logger_("buffered ["+fl(t.buffered())+"]"),e&&e(),t.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function(t){var e=this;this.processedAppend_&&this.queueCallback_(function(){e.sourceBuffer_.abort()},t)}},{key:"appendBuffer",value:function(t,e){var n=this;this.processedAppend_=!0,this.queueCallback_(function(){n.sourceBuffer_.appendBuffer(t)},e)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:Ki.createTimeRanges()}},{key:"remove",value:function(t,e){var n=this;this.processedAppend_&&this.queueCallback_(function(){n.logger_("remove ["+t+" => "+e+"]"),n.sourceBuffer_.remove(t,e)},2<arguments.length&&void 0!==arguments[2]?arguments[2]:ql)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function(t){var e=this;return void 0!==t&&(this.queueCallback_(function(){e.sourceBuffer_.timestampOffset=t}),this.timestampOffset_=t),this.timestampOffset_}},{key:"queueCallback_",value:function(t,e){this.callbacks_.push([t.bind(this),e]),this.runCallback_()}},{key:"runCallback_",value:function(){var t=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(t=this.callbacks_.shift(),this.pendingCallback_=t[1],t[0]())}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]),t}(),Xl={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},$l=function(t){var e,n={};return t.byterange&&(n.Range="bytes="+(e=t.byterange).offset+"-"+(e.offset+e.length-1)),n},Zl=function(t){t.forEach(function(t){t.abort()})},Ql=function(t,e){return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:-101,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:-102,xhr:e}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:2,xhr:e}:null},Kl=function(e,n){var r;return e&&(r=t.getComputedStyle(e))?r[n]:""},Jl=function(t,e){var n=t.slice();t.sort(function(t,r){var i=e(t,r);return 0===i?n.indexOf(t)-n.indexOf(r):i})},tc=function(e,n){var r=void 0,i=void 0;return e.attributes.BANDWIDTH&&(r=e.attributes.BANDWIDTH),r=r||t.Number.MAX_VALUE,n.attributes.BANDWIDTH&&(i=n.attributes.BANDWIDTH),r-(i||t.Number.MAX_VALUE)},ec=function(t,e,n){return!(!t||!e)&&t.endList&&"open"===e.readyState&&n===t.segments.length},nc=function(t){return"number"==typeof t&&isFinite(t)},rc=function(e){function n(t){Su(this,n);var e=Mu(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));if(!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return e.bandwidth=t.bandwidth,e.throughput={rate:0,count:0},e.roundTrip=NaN,e.resetStats_(),e.mediaIndex=null,e.hasPlayed_=t.hasPlayed,e.currentTime_=t.currentTime,e.seekable_=t.seekable,e.seeking_=t.seeking,e.duration_=t.duration,e.mediaSource_=t.mediaSource,e.hls_=t.hls,e.loaderType_=t.loaderType,e.startingMedia_=void 0,e.segmentMetadataTrack_=t.segmentMetadataTrack,e.goalBufferLength_=t.goalBufferLength,e.sourceType_=t.sourceType,e.inbandTextTracks_=t.inbandTextTracks,e.state_="INIT",e.checkBufferTimeout_=null,e.error_=void 0,e.currentTimeline_=-1,e.pendingSegment_=null,e.mimeType_=null,e.sourceUpdater_=null,e.xhrOptions_=null,e.activeInitSegmentId_=null,e.initSegments_={},e.captionParser_=new tu,e.decrypter_=t.decrypter,e.syncController_=t.syncController,e.syncPoint_={segmentIndex:0,time:0},e.syncController_.on("syncinfoupdate",function(){return e.trigger("syncinfoupdate")}),e.mediaSource_.addEventListener("sourceopen",function(){return e.ended_=!1}),e.fetchAtBuffer_=!1,e.logger_=Wl("SegmentLoader["+e.loaderType_+"]"),Object.defineProperty(e,"state",{get:function(){return this.state_},set:function(t){t!==this.state_&&(this.logger_(this.state_+" -> "+t),this.state_=t)}}),e}return Ou(n,Ki.EventTarget),Tu(n,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_.reset()}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(t){return void 0!==t&&(this.error_=t),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():Ki.createTimeRanges()}},{key:"initSegment",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!t)return null;var n=al(t),r=this.initSegments_[n];return e&&!r&&t.bytes&&(this.initSegments_[n]=r={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,timescales:t.timescales,videoTrackIds:t.videoTrackIds}),r||t}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new Yl(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t){var n=this.playlist_,r=this.pendingSegment_;if(this.playlist_=t,this.xhrOptions_=e,this.hasPlayed_()||(t.syncInfo={mediaSequence:t.mediaSequence,time:0}),this.logger_("playlist update ["+(n?n.id:null)+" => "+t.id+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(n&&n.uri===t.uri){var i=t.mediaSequence-n.mediaSequence;this.logger_("live window shift ["+i+"]"),null!==this.mediaIndex&&(this.mediaIndex-=i),r&&(r.mediaIndex-=i,0<=r.mediaIndex&&(r.segment=t.segments[r.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(n,t)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(t.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(t,e){this.mimeType_||(this.mimeType_=t,this.sourceBufferEmitter_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(t){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_(),t),this.captionParser_.clearAllCaptions(),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(t,e,n){if(this.sourceUpdater_&&this.sourceUpdater_.remove(t,e,n),pl(t,e,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var r in this.inbandTextTracks_)pl(t,e,this.inbandTextTracks_[r])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&t.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=t.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&t.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=t.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);t&&(ec(this.playlist_,this.mediaSource_,t.mediaIndex)?this.endOfStream():(t.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&((t.timeline!==this.currentTimeline_||null!==t.startOfSegment&&t.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),t.timestampOffset=t.startOfSegment,this.captionParser_.clearAllCaptions()),this.loadSegment_(t)))}}},{key:"checkBuffer_",value:function(t,e,n,r,i,a){var o=0,s=void 0;t.length&&(o=t.end(t.length-1));var u=Math.max(0,o-i);if(!e.segments.length)return null;if(u>=this.goalBufferLength_())return null;if(!r&&1<=u)return null;if(null===a)return n=this.getSyncSegmentCandidate_(e),this.generateSegmentInfo_(e,n,null,!0);if(null!==n){var l=e.segments[n];return this.generateSegmentInfo_(e,n+1,s=l&&l.end?l.end:o,!1)}if(this.fetchAtBuffer_){var c=Ku.getMediaInfoForTime(e,o,a.segmentIndex,a.time);n=c.mediaIndex,s=c.startTime}else{var h=Ku.getMediaInfoForTime(e,i,a.segmentIndex,a.time);n=h.mediaIndex,s=h.startTime}return this.generateSegmentInfo_(e,n,s,!1)}},{key:"getSyncSegmentCandidate_",value:function(t){var e=this;if(-1===this.currentTimeline_)return 0;var n=t.segments.map(function(t,e){return{timeline:t.timeline,segmentIndex:e}}).filter(function(t){return t.timeline===e.currentTimeline_});return n.length?n[Math.min(n.length-1,1)].segmentIndex:Math.max(t.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(t,e,n,r){if(e<0||e>=t.segments.length)return null;var i=t.segments[e];return{requestId:"segment-loader-"+Math.random(),uri:i.resolvedUri,mediaIndex:e,isSyncRequest:r,startOfSegment:n,playlist:t,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:i.timeline,duration:i.duration,segment:i}}},{key:"abortRequestEarly_",value:function(t){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)return!1;var e=this.currentTime_(),n=t.bandwidth,r=this.pendingSegment_.duration,i=Ku.estimateSegmentRequestTime(r,n,this.playlist_,t.bytesReceived),a=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return((t.length?t.end(t.length-1):0)-e)/n}(this.buffered_(),e,this.hls_.tech_.playbackRate())-1;if(i<=a)return!1;var o=function(t){var e=t.currentTime,n=t.bandwidth,r=t.duration,i=t.segmentDuration,a=t.timeUntilRebuffer,o=t.currentTimeline,s=t.syncController,u=t.master.playlists.filter(function(t){return!Ku.isIncompatible(t)}),l=u.filter(Ku.isEnabled);l.length||(l=u.filter(function(t){return!Ku.isDisabled(t)}));var c=l.filter(Ku.hasAttribute.bind(null,"BANDWIDTH")).map(function(t){var u=s.getSyncPoint(t,r,o,e)?1:2;return{playlist:t,rebufferingImpact:Ku.estimateSegmentRequestTime(i,n,t)*u-a}}),h=c.filter(function(t){return t.rebufferingImpact<=0});return Jl(h,function(t,e){return tc(e.playlist,t.playlist)}),h.length?h[0]:(Jl(c,function(t,e){return t.rebufferingImpact-e.rebufferingImpact}),c[0]||null)}({master:this.hls_.playlists.master,currentTime:e,bandwidth:n,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(o){var s=.5;return a<=ul&&(s=1),!(!o.playlist||o.playlist.uri===this.playlist_.uri||i-a-o.rebufferingImpact<s||(this.bandwidth=o.playlist.attributes.BANDWIDTH*Xl.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),0))}}},{key:"handleProgress_",value:function(t,e){this.pendingSegment_&&e.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(e.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(t){this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),t.abortRequests=function(t,e,n,r,i,a,o){var s,u,l,c,h,f=[],d=function(t,e,n){var r=[],i=0;return function(a,o){if(a&&(Zl(t),r.push(a)),(i+=1)===t.length){if(o.endOfAllRequests=Date.now(),0<r.length){var s=r.reduce(function(t,e){return e.code>t.code?e:t});return n(s,o)}return o.encryptedBytes?(l=o,c=n,(u=e).addEventListener("message",function t(e){if(e.data.source===l.requestId){u.removeEventListener("message",t);var n=e.data.decrypted;return l.bytes=new Uint8Array(n.bytes,n.byteOffset,n.byteLength),c(null,l)}}),void u.postMessage(il({source:l.requestId,encrypted:l.encryptedBytes,key:l.key.bytes,iv:l.key.iv}),[l.encryptedBytes.buffer,l.key.bytes.buffer])):n(null,o)}var u,l,c}}(f,n,o);if(i.key){var p=t(Ki.mergeOptions(e,{uri:i.key.resolvedUri,responseType:"arraybuffer"}),(s=i,u=d,function(t,e){var n=e.response,r=Ql(t,e);if(r)return u(r,s);if(16!==n.byteLength)return u({status:e.status,message:"Invalid HLS key at URL: "+e.uri,code:2,xhr:e},s);var i=new DataView(n);return s.key.bytes=new Uint32Array([i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)]),u(null,s)}));f.push(p)}if(i.map&&!i.map.bytes){var g=t(Ki.mergeOptions(e,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:$l(i.map)}),(l=i,c=r,h=d,function(t,e){var n=e.response,r=Ql(t,e);return r?h(r,l):0===n.byteLength?h({status:e.status,message:"Empty HLS segment content at URL: "+e.uri,code:2,xhr:e},l):(l.map.bytes=new Uint8Array(e.response),c.isInitialized()||c.init(),l.map.timescales=Po.timescale(l.map.bytes),l.map.videoTrackIds=Po.videoTrackIds(l.map.bytes),h(null,l))}));f.push(g)}var v,m,y,_=t(Ki.mergeOptions(e,{uri:i.resolvedUri,responseType:"arraybuffer",headers:$l(i)}),(v=i,m=r,y=d,function(t,e){var n,r=e.response,i=Ql(t,e),a=void 0;return i?y(i,v):0===r.byteLength?y({status:e.status,message:"Empty HLS segment content at URL: "+e.uri,code:2,xhr:e},v):(v.stats={bandwidth:(n=e).bandwidth,bytesReceived:n.bytesReceived||0,roundTripTime:n.roundTripTime||0},v.key?v.encryptedBytes=new Uint8Array(e.response):v.bytes=new Uint8Array(e.response),v.map&&v.map.bytes&&(m.isInitialized()||m.init(),(a=m.parse(v.bytes,v.map.videoTrackIds,v.map.timescales))&&a.captions&&(v.captionStreams=a.captionStreams,v.fmp4Captions=a.captions)),y(null,v))}));return _.addEventListener("progress",function(t,e){return function(n){var r,i,a;return t.stats=Ki.mergeOptions(t.stats,(i=(r=n).target,(a={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-i.requestTime||0}).bytesReceived=r.loaded,a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3),a)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),e(n,t)}}(i,a)),f.push(_),function(){return Zl(f)}}(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(t),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(t){var e,n,r,i,a=(e=this.seekable_(),n=this.currentTime_(),r=this.playlist_.targetDuration||10,i=e.length&&0<e.start(0)&&e.start(0)<n?e.start(0):n-30,Math.min(i,n-r));0<a&&this.remove(0,a)}},{key:"createSimplifiedSegmentObj_",value:function(t){var e=t.segment,n={resolvedUri:e.resolvedUri,byterange:e.byterange,requestId:t.requestId};if(e.key){var r=e.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);n.key={resolvedUri:e.key.resolvedUri,iv:r}}return e.map&&(n.map=this.initSegment(e.map)),n}},{key:"segmentRequestFinished_",value:function(t,e){if(this.mediaRequests+=1,e.stats&&(this.mediaBytesTransferred+=e.stats.bytesReceived,this.mediaTransferDuration+=e.stats.roundTripTime),this.pendingSegment_){if(e.requestId===this.pendingSegment_.requestId){if(t)return this.pendingSegment_=null,this.state="READY",-102===t.code?void(this.mediaRequestsAborted+=1):(this.pause(),-101===t.code?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error")));this.bandwidth=e.stats.bandwidth,this.roundTrip=e.stats.roundTripTime,e.map&&(e.map=this.initSegment(e.map,!0)),this.processSegmentResponse_(e)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(t){var e=this.pendingSegment_;e.bytes=t.bytes,t.map&&(e.segment.map.bytes=t.map.bytes),e.endOfAllRequests=t.endOfAllRequests,t.fmp4Captions&&(function(t,e,n){for(var r in n)if(!t[r]){e.trigger({type:"usage",name:"hls-608"});var i=e.textTracks().getTrackById(r);t[r]=i||e.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track}}(this.inbandTextTracks_,this.hls_.tech_,t.captionStreams),function(t){var e=t.inbandTextTracks,n=t.captionArray,r=t.timestampOffset;if(n){var i=window.WebKitDataCue||window.VTTCue;n.forEach(function(t){var n=t.stream,a=t.startTime,o=t.endTime;e[n]&&e[n].addCue(new i(a+=r,o+=r,t.text))})}}({inbandTextTracks:this.inbandTextTracks_,captionArray:t.fmp4Captions,timestampOffset:0}),this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function(){var t=this;if(this.pendingSegment_){var e=this.pendingSegment_,n=e.segment,r=this.syncController_.probeSegmentInfo(e);void 0===this.startingMedia_&&r&&(r.containsAudio||r.containsVideo)&&(this.startingMedia_={containsAudio:r.containsAudio,containsVideo:r.containsVideo});var i,a,o=(i=this.startingMedia_,a=r,"main"===this.loaderType_&&i&&a?a.containsAudio||a.containsVideo?i.containsVideo&&!a.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!i.containsVideo&&a.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null);if(o)return this.error({message:o,blacklistDuration:1/0}),void this.trigger("error");if(e.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==e.timestampOffset&&e.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(e.timestampOffset),this.trigger("timestampoffset"));var s,u,l,c,h,f=this.syncController_.mappingForTimeline(e.timeline);if(null!==f&&this.trigger({type:"segmenttimemapping",mapping:f}),this.state="APPENDING",n.map){var d=al(n.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==d){var p=this.initSegment(n.map);this.sourceUpdater_.appendBuffer(p.bytes,function(){t.activeInitSegmentId_=d})}}e.byteLength=e.bytes.byteLength,this.mediaSecondsLoaded+="number"==typeof n.start&&"number"==typeof n.end?n.end-n.start:n.duration,this.logger_((u=(s=e).segment,["appending ["+s.mediaIndex+"] of ["+(c=(l=s.playlist).mediaSequence)+", "+(c+(void 0===(h=l.segments)?[]:h).length)+"] from playlist ["+l.id+"]","["+u.start+" => "+u.end+"] in timeline ["+s.timeline+"]"].join(" "))),this.sourceUpdater_.appendBuffer(e.bytes,this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var t=this.pendingSegment_,e=t.segment,n=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(t),this.addSegmentMetadataCue_(t),this.state="READY",this.mediaIndex=t.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate"),e.end&&this.currentTime_()-e.end>3*t.playlist.targetDuration?this.resetEverything():(n&&this.trigger("bandwidthupdate"),this.trigger("progress"),ec(t.playlist,this.mediaSource_,t.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(t){var e=this.throughput.rate,n=Date.now()-t.endOfAllRequests+1,r=Math.floor(t.byteLength/n*8*1e3);this.throughput.rate+=(r-e)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(e){if(this.segmentMetadataTrack_){var n=e.segment,r=n.start,i=n.end;if(nc(r)&&nc(i)){pl(r,i,this.segmentMetadataTrack_);var a={bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.uri,start:r,end:i},o=new(t.WebKitDataCue||t.VTTCue)(r,i,JSON.stringify(a));o.value=a,this.segmentMetadataTrack_.addCue(o)}}}}]),n}(),ic=function(t){return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))},ac=new Uint8Array("\n\n".split("").map(function(t){return t.charCodeAt(0)})),oc=function(e){function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Su(this,n);var r=Mu(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,e));return r.mediaSource_=null,r.subtitlesTrack_=null,r}return Ou(n,rc),Tu(n,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return Ki.createTimeRanges();var t=this.subtitlesTrack_.cues;return Ki.createTimeRanges([[t[0].startTime,t[t.length-1].startTime]])}},{key:"initSegment",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(!t)return null;var n=al(t),r=this.initSegments_[n];if(e&&!r&&t.bytes){var i=new Uint8Array(ac.byteLength+t.bytes.byteLength);i.set(t.bytes),i.set(ac,t.bytes.byteLength),this.initSegments_[n]=r={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:i}}return r||t}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(t){return void 0===t||(this.subtitlesTrack_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_}},{key:"remove",value:function(t,e){pl(t,e,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var t=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(e=this.skipEmptySegments_(e)){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline))return this.syncController_.one("timestampoffset",function(){t.state="READY",t.paused()||t.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(e)}}},{key:"skipEmptySegments_",value:function(t){for(;t&&t.segment.empty;)t=this.generateSegmentInfo_(t.playlist,t.mediaIndex+1,t.startOfSegment+t.duration,t.isSyncRequest);return t}},{key:"handleSegment_",value:function(){var e=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var n=this.pendingSegment_,r=n.segment;if("function"!=typeof t.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var i=function(){e.handleSegment_()};return this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",i),void this.subtitlesTrack_.tech_.one("vttjserror",function(){e.subtitlesTrack_.tech_.off("vttjsloaded",i),e.error({message:"Error loading vtt.js"}),e.state="READY",e.pause(),e.trigger("error")})}r.requested=!0;try{this.parseVTTCues_(n)}catch(n){return this.error({message:n.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(n,this.syncController_.timelines[n.timeline],this.playlist_),n.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");n.byteLength=n.bytes.byteLength,this.mediaSecondsLoaded+=r.duration,n.cues.length&&this.remove(n.cues[0].endTime,n.cues[n.cues.length-1].endTime),n.cues.forEach(function(t){e.subtitlesTrack_.addCue(t)}),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function(e){var n=void 0,r=!1;"function"==typeof t.TextDecoder?n=new t.TextDecoder("utf8"):(n=t.WebVTT.StringDecoder(),r=!0);var i=new t.WebVTT.Parser(t,t.vttjs,n);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=function(t){return e.timestampmap=t},i.onparsingerror=function(t){Ki.log.warn("Error encountered when parsing cues: "+t.message)},e.segment.map){var a=e.segment.map.bytes;r&&(a=ic(a)),i.parse(a)}var o=e.bytes;r&&(o=ic(o)),i.parse(o),i.flush()}},{key:"updateTimeMapping_",value:function(t,e,n){var r=t.segment;if(e)if(t.cues.length){var i=t.timestampmap,a=i.MPEGTS/9e4-i.LOCAL+e.mapping;t.cues.forEach(function(t){t.startTime+=a,t.endTime+=a}),n.syncInfo||(n.syncInfo={mediaSequence:n.mediaSequence+t.mediaIndex,time:Math.min(t.cues[0].startTime,t.cues[t.cues.length-1].startTime-r.duration)})}else r.empty=!0}}]),n}(),sc=function(t,e){for(var n=t.cues,r=0;r<n.length;r++){var i=n[r];if(e>=i.adStartTime&&e<=i.adEndTime)return i}return null},uc=[{name:"VOD",run:function(t,e,n,r,i){return n===1/0?null:{time:0,segmentIndex:0}}},{name:"ProgramDateTime",run:function(t,e,n,r,i){if(!t.datetimeToDisplayTime)return null;var a=e.segments||[],o=null,s=null;i=i||0;for(var u=0;u<a.length;u++){var l=a[u];if(l.dateTimeObject){var c=l.dateTimeObject.getTime()/1e3+t.datetimeToDisplayTime,h=Math.abs(i-c);if(null!==s&&s<h)break;s=h,o={time:c,segmentIndex:u}}}return o}},{name:"Segment",run:function(t,e,n,r,i){var a=e.segments||[],o=null,s=null;i=i||0;for(var u=0;u<a.length;u++){var l=a[u];if(l.timeline===r&&void 0!==l.start){var c=Math.abs(i-l.start);if(null!==s&&s<c)break;(!o||null===s||c<=s)&&(s=c,o={time:l.start,segmentIndex:u})}}return o}},{name:"Discontinuity",run:function(t,e,n,r,i){var a=null;if(i=i||0,e.discontinuityStarts&&e.discontinuityStarts.length)for(var o=null,s=0;s<e.discontinuityStarts.length;s++){var u=e.discontinuityStarts[s],l=t.discontinuities[e.discontinuitySequence+s+1];if(l){var c=Math.abs(i-l.time);if(null!==o&&o<c)break;(!a||null===o||c<=o)&&(o=c,a={time:l.time,segmentIndex:u})}}return a}},{name:"Playlist",run:function(t,e,n,r,i){return e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence}:null}}],lc=function(t){function e(){Su(this,e);var t=Mu(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.inspectCache_=void 0,t.timelines=[],t.discontinuities=[],t.datetimeToDisplayTime=null,t.logger_=Wl("SyncController"),t}return Ou(e,Ki.EventTarget),Tu(e,[{key:"getSyncPoint",value:function(t,e,n,r){var i=this.runStrategies_(t,e,n,r);return i.length?this.selectSyncPoint_(i,{key:"time",value:r}):null}},{key:"getExpiredTime",value:function(t,e){if(!t||!t.segments)return null;var n=this.runStrategies_(t,e,t.discontinuitySequence,0);if(!n.length)return null;var r=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return 0<r.segmentIndex&&(r.time*=-1),Math.abs(r.time+Uu(t,r.segmentIndex,0))}},{key:"runStrategies_",value:function(t,e,n,r){for(var i=[],a=0;a<uc.length;a++){var o=uc[a],s=o.run(this,t,e,n,r);s&&(s.strategy=o.name,i.push({strategy:o.name,syncPoint:s}))}return i}},{key:"selectSyncPoint_",value:function(t,e){for(var n=t[0].syncPoint,r=Math.abs(t[0].syncPoint[e.key]-e.value),i=t[0].strategy,a=1;a<t.length;a++){var o=Math.abs(t[a].syncPoint[e.key]-e.value);o<r&&(r=o,n=t[a].syncPoint,i=t[a].strategy)}return this.logger_("syncPoint for ["+e.key+": "+e.value+"] chosen with strategy ["+i+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+"]"),n}},{key:"saveExpiredSegmentInfo",value:function(t,e){for(var n=e.mediaSequence-t.mediaSequence-1;0<=n;n--){var r=t.segments[n];if(r&&void 0!==r.start){e.syncInfo={mediaSequence:t.mediaSequence+n,time:r.start},this.logger_("playlist refresh sync: [time:"+e.syncInfo.time+", mediaSequence: "+e.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(t){if(!this.datetimeToDisplayTime&&t.segments&&t.segments.length&&t.segments[0].dateTimeObject){var e=t.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-e}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(t){var e,n=t.segment,r=t.playlist;return(e=n.map?this.probeMp4Segment_(t):this.probeTsSegment_(t))&&this.calculateSegmentTimeMapping_(t,e)&&(this.saveDiscontinuitySyncInfo_(t),r.syncInfo||(r.syncInfo={mediaSequence:r.mediaSequence+t.mediaIndex,time:n.start})),e}},{key:"probeMp4Segment_",value:function(t){var e=t.segment,n=Po.timescale(e.map.bytes),r=Po.startTime(n,t.bytes);return null!==t.timestampOffset&&(t.timestampOffset-=r),{start:r,end:r+e.duration}}},{key:"probeTsSegment_",value:function(t){var e=function(t,e){var n,r;return(r=(n=t)[0]==="I".charCodeAt(0)&&n[1]==="D".charCodeAt(0)&&n[2]==="3".charCodeAt(0)?function(t){for(var e,n=!1,r=0,i=null,a=null,o=0,s=0;3<=t.length-s;){switch(lu.aac.parseType(t,s)){case"timed-metadata":if(t.length-s<10){n=!0;break}if((o=lu.aac.parseId3TagSize(t,s))>t.length){n=!0;break}null===a&&(e=t.subarray(s,s+o),a=lu.aac.parseAacTimestamp(e)),s+=o;break;case"audio":if(t.length-s<7){n=!0;break}if((o=lu.aac.parseAdtsSize(t,s))>t.length){n=!0;break}null===i&&(e=t.subarray(s,s+o),i=lu.aac.parseSampleRate(e)),r++,s+=o;break;default:s++}if(n)return null}if(null===i||null===a)return null;var u=9e4/i;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*r*u,pts:a+1024*r*u}]}}(t):function(t){var e={pid:null,table:null},n={};for(var r in function(t,e){for(var n,r=0,i=cu;i<t.byteLength;)if(71!==t[r]||71!==t[i])r++,i++;else{switch(n=t.subarray(r,i),lu.ts.parseType(n,e.pid)){case"pat":e.pid||(e.pid=lu.ts.parsePat(n));break;case"pmt":e.table||(e.table=lu.ts.parsePmt(n))}if(e.pid&&e.table)return;r+=cu,i+=cu}}(t,e),e.table)if(e.table.hasOwnProperty(r))switch(e.table[r]){case Yo.H264_STREAM_TYPE:n.video=[],fu(t,e,n),0===n.video.length&&delete n.video;break;case Yo.ADTS_STREAM_TYPE:n.audio=[],hu(t,e,n),0===n.audio.length&&delete n.audio}return n}(t))&&(r.audio||r.video)?(function(t,e){if(t.audio&&t.audio.length){var n=e;void 0===n&&(n=t.audio[0].dts),t.audio.forEach(function(t){t.dts=uu(t.dts,n),t.pts=uu(t.pts,n),t.dtsTime=t.dts/9e4,t.ptsTime=t.pts/9e4})}if(t.video&&t.video.length){var r=e;if(void 0===r&&(r=t.video[0].dts),t.video.forEach(function(t){t.dts=uu(t.dts,r),t.pts=uu(t.pts,r),t.dtsTime=t.dts/9e4,t.ptsTime=t.pts/9e4}),t.firstKeyFrame){var i=t.firstKeyFrame;i.dts=uu(i.dts,r),i.pts=uu(i.pts,r),i.dtsTime=i.dts/9e4,i.ptsTime=i.dts/9e4}}}(r,e),r):null}(t.bytes,this.inspectCache_),n=void 0,r=void 0;return e?(e.video&&2===e.video.length?(this.inspectCache_=e.video[1].dts,n=e.video[0].dtsTime,r=e.video[1].dtsTime):e.audio&&2===e.audio.length&&(this.inspectCache_=e.audio[1].dts,n=e.audio[0].dtsTime,r=e.audio[1].dtsTime),{start:n,end:r,containsVideo:e.video&&2===e.video.length,containsAudio:e.audio&&2===e.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(t){return void 0===this.timelines[t]?null:this.timelines[t].time}},{key:"mappingForTimeline",value:function(t){return void 0===this.timelines[t]?null:this.timelines[t].mapping}},{key:"calculateSegmentTimeMapping_",value:function(t,e){var n=t.segment,r=this.timelines[t.timeline];if(null!==t.timestampOffset)this.timelines[t.timeline]=r={time:t.startOfSegment,mapping:t.startOfSegment-e.start},this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+t.timeline+": [time: "+r.time+"] [mapping: "+r.mapping+"]"),n.start=t.startOfSegment,n.end=e.end+r.mapping;else{if(!r)return!1;n.start=e.start+r.mapping,n.end=e.end+r.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(t){var e=t.playlist,n=t.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(e.discontinuityStarts&&e.discontinuityStarts.length)for(var r=0;r<e.discontinuityStarts.length;r++){var i,a=e.discontinuityStarts[r],o=e.discontinuitySequence+r+1,s=a-t.mediaIndex,u=Math.abs(s);(!this.discontinuities[o]||this.discontinuities[o].accuracy>u)&&(i=s<0?n.start-Uu(e,t.mediaIndex,a):n.end+Uu(e,t.mediaIndex+1,a),this.discontinuities[o]={time:i,accuracy:u})}}}]),e}(),cc=new wl("./decrypter-worker.worker.js",function(t,e){var n,r,i,a,o,s,u,l;n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=null,a=function(){function t(e){n(this,t),i||(i=function(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]],e=t[0],n=t[1],r=e[4],i=n[4],a=void 0,o=void 0,s=void 0,u=[],l=[],c=void 0,h=void 0,f=void 0,d=void 0,p=void 0;for(a=0;a<256;a++)l[(u[a]=a<<1^283*(a>>7))^a]=a;for(o=s=0;!r[o];o^=c||1,s=l[s]||1)for(f=(f=s^s<<1^s<<2^s<<3^s<<4)>>8^255&f^99,p=16843009*u[h=u[c=u[i[r[o]=f]=o]]]^65537*h^257*c^16843008*o,d=257*u[f]^16843008*f,a=0;a<4;a++)e[a][o]=d=d<<24^d>>>8,n[a][f]=p=p<<24^p>>>8;for(a=0;a<5;a++)e[a]=e[a].slice(0),n[a]=n[a].slice(0);return t}()),this._tables=[[i[0][0].slice(),i[0][1].slice(),i[0][2].slice(),i[0][3].slice(),i[0][4].slice()],[i[1][0].slice(),i[1][1].slice(),i[1][2].slice(),i[1][3].slice(),i[1][4].slice()]];var r=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=this._tables[0][4],c=this._tables[1],h=e.length,f=1;if(4!==h&&6!==h&&8!==h)throw new Error("Invalid aes key size");for(s=e.slice(0),this._key=[s,u=[]],r=h;r<4*h+28;r++)o=s[r-1],(r%h==0||8===h&&r%h==4)&&(o=l[o>>>24]<<24^l[o>>16&255]<<16^l[o>>8&255]<<8^l[255&o],r%h==0&&(o=o<<8^o>>>24^f<<24,f=f<<1^283*(f>>7))),s[r]=s[r-h]^o;for(a=0;r;a++,r--)o=s[3&a?r:r-4],u[a]=r<=4||a<4?o:c[0][l[o>>>24]]^c[1][l[o>>16&255]]^c[2][l[o>>8&255]]^c[3][l[255&o]]}return t.prototype.decrypt=function(t,e,n,r,i,a){var o=this._key[1],s=t^o[0],u=r^o[1],l=n^o[2],c=e^o[3],h=void 0,f=void 0,d=void 0,p=o.length/4-2,g=void 0,v=4,m=this._tables[1],y=m[0],_=m[1],b=m[2],x=m[3],w=m[4];for(g=0;g<p;g++)h=y[s>>>24]^_[u>>16&255]^b[l>>8&255]^x[255&c]^o[v],f=y[u>>>24]^_[l>>16&255]^b[c>>8&255]^x[255&s]^o[v+1],d=y[l>>>24]^_[c>>16&255]^b[s>>8&255]^x[255&u]^o[v+2],c=y[c>>>24]^_[s>>16&255]^b[u>>8&255]^x[255&l]^o[v+3],v+=4,s=h,u=f,l=d;for(g=0;g<4;g++)i[(3&-g)+a]=w[s>>>24]<<24^w[u>>16&255]<<16^w[l>>8&255]<<8^w[255&c]^o[v++],h=s,s=u,u=l,l=c,c=h},t}(),o=function(){function t(){n(this,t),this.listeners={}}return t.prototype.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},t.prototype.off=function(t,e){if(!this.listeners[t])return!1;var n=this.listeners[t].indexOf(e);return this.listeners[t].splice(n,1),-1<n},t.prototype.trigger=function(t){var e=this.listeners[t];if(e)if(2===arguments.length)for(var n=e.length,r=0;r<n;++r)e[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),a=e.length,o=0;o<a;++o)e[o].apply(this,i)},t.prototype.dispose=function(){this.listeners={}},t.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},t}(),s=function(t){function e(){n(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o));return r.jobs=[],r.delay=1,r.timeout_=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.processJob_=function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null},e.prototype.push=function(t){this.jobs.push(t),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},e}(o),u=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},l=function(){function t(e,r,i,a){n(this,t);var o=t.STEP,l=new Int32Array(e.buffer),c=new Uint8Array(e.byteLength),h=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(l.subarray(h,h+o),r,i,c)),h=o;h<l.length;h+=o)i=new Uint32Array([u(l[h-4]),u(l[h-3]),u(l[h-2]),u(l[h-1])]),this.asyncStream_.push(this.decryptChunk_(l.subarray(h,h+o),r,i,c));this.asyncStream_.push(function(){var t;a(null,(t=c).subarray(0,t.byteLength-t[t.byteLength-1]))})}return t.prototype.decryptChunk_=function(t,e,n,r){return function(){var i=function(t,e,n){var r=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),i=new a(Array.prototype.slice.call(e)),o=new Uint8Array(t.byteLength),s=new Int32Array(o.buffer),l=void 0,c=void 0,h=void 0,f=void 0,d=void 0,p=void 0,g=void 0,v=void 0,m=void 0;for(l=n[0],c=n[1],h=n[2],f=n[3],m=0;m<r.length;m+=4)d=u(r[m]),p=u(r[m+1]),g=u(r[m+2]),v=u(r[m+3]),i.decrypt(d,p,g,v,s,m),s[m]=u(s[m]^l),s[m+1]=u(s[m+1]^c),s[m+2]=u(s[m+2]^h),s[m+3]=u(s[m+3]^f),l=d,c=p,h=g,f=v;return o}(t,e,n);r.set(i,t.byteOffset)}},r(t,null,[{key:"STEP",get:function(){return 32e3}}]),t}(),new function(t){t.onmessage=function(e){var n=e.data,r=new Uint8Array(n.encrypted.bytes,n.encrypted.byteOffset,n.encrypted.byteLength),i=new Uint32Array(n.key.bytes,n.key.byteOffset,n.key.byteLength/4),a=new Uint32Array(n.iv.bytes,n.iv.byteOffset,n.iv.byteLength/4);new l(r,i,a,function(e,r){var i,a;t.postMessage((i={source:n.source,decrypted:r},a={},Object.keys(i).forEach(function(t){var e=i[t];a[t]=ArrayBuffer.isView(e)?{bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:e}),a),[r.buffer])})}}(this)}),hc=function(t,e){t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},fc=function(t,e){(e.activePlaylistLoader=t).load()},dc={AUDIO:function(t,e){return function(){var n=e.mediaTypes[t],r=e.blacklistCurrentPlaylist;hc(e.segmentLoaders[t],n);var i=n.activeTrack(),a=n.activeGroup(),o=(a.filter(function(t){return t.default})[0]||a[0]).id,s=n.tracks[o];if(i!==s){for(var u in Ki.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),n.tracks)n.tracks[u].enabled=n.tracks[u]===s;n.onTrackChanged()}else r({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(t,e){return function(){var n=e.segmentLoaders[t],r=e.mediaTypes[t];Ki.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),hc(n,r);var i=r.activeTrack();i&&(i.mode="disabled"),r.onTrackChanged()}}},pc={AUDIO:function(t,e,n){if(e){var r=n.tech,i=n.requestOptions,a=n.segmentLoaders[t];e.on("loadedmetadata",function(){var t=e.media();a.playlist(t,i),(!r.paused()||t.endList&&"none"!==r.preload())&&a.load()}),e.on("loadedplaylist",function(){a.playlist(e.media(),i),r.paused()||a.load()}),e.on("error",dc[t](t,n))}},SUBTITLES:function(t,e,n){var r=n.tech,i=n.requestOptions,a=n.segmentLoaders[t],o=n.mediaTypes[t];e.on("loadedmetadata",function(){var t=e.media();a.playlist(t,i),a.track(o.activeTrack()),(!r.paused()||t.endList&&"none"!==r.preload())&&a.load()}),e.on("loadedplaylist",function(){a.playlist(e.media(),i),r.paused()||a.load()}),e.on("error",dc[t](t,n))}},gc=function(t,e){return function(n){return n.attributes[t]===e}},vc=function(t){return function(e){return e.resolvedUri===t}},mc={AUDIO:function(t,e){var n,r,i=e.hls,a=e.sourceType,o=e.segmentLoaders[t],s=e.requestOptions.withCredentials,u=e.master,l=u.mediaGroups,c=u.playlists,h=e.mediaTypes[t],f=h.groups,d=h.tracks,p=e.masterPlaylistLoader;for(var g in l[t]&&0!==Object.keys(l[t]).length||(l[t]={main:{default:{default:!0}}}),l[t]){f[g]||(f[g]=[]);var v=c.filter(gc(t,g));for(var m in l[t][g]){var y,_=l[t][g][m];if(v.filter(vc(_.resolvedUri)).length&&delete _.resolvedUri,y=_.resolvedUri?new Ru(_.resolvedUri,i,s):_.playlists&&"dash"===a?new Gl(_.playlists[0],i,s,p):null,_=Ki.mergeOptions({id:m,playlistLoader:y},_),pc[t](t,_.playlistLoader,e),f[g].push(_),void 0===d[m]){var b=new Ki.AudioTrack({id:m,kind:(n=_,r=void 0,r=n.default?"main":"alternative",n.characteristics&&0<=n.characteristics.indexOf("public.accessibility.describes-video")&&(r="main-desc"),r),enabled:!1,language:_.language,default:_.default,label:m});d[m]=b}}}o.on("error",dc[t](t,e))},SUBTITLES:function(t,e){var n=e.tech,r=e.hls,i=e.sourceType,a=e.segmentLoaders[t],o=e.requestOptions.withCredentials,s=e.master.mediaGroups,u=e.mediaTypes[t],l=u.groups,c=u.tracks,h=e.masterPlaylistLoader;for(var f in s[t])for(var d in l[f]||(l[f]=[]),s[t][f])if(!s[t][f][d].forced){var p=s[t][f][d],g=void 0;if("hls"===i?g=new Ru(p.resolvedUri,r,o):"dash"===i&&(g=new Gl(p.playlists[0],r,o,h)),p=Ki.mergeOptions({id:d,playlistLoader:g},p),pc[t](t,p.playlistLoader,e),l[f].push(p),void 0===c[d]){var v=n.addRemoteTextTrack({id:d,kind:"subtitles",default:p.default&&p.autoselect,language:p.language,label:d},!1).track;c[d]=v}}a.on("error",dc[t](t,e))},"CLOSED-CAPTIONS":function(t,e){var n=e.tech,r=e.master.mediaGroups,i=e.mediaTypes[t],a=i.groups,o=i.tracks;for(var s in r[t])for(var u in a[s]||(a[s]=[]),r[t][s]){var l=r[t][s][u];if(l.instreamId.match(/CC\d/)&&(a[s].push(Ki.mergeOptions({id:u},l)),void 0===o[u])){var c=n.addRemoteTextTrack({id:l.instreamId,kind:"captions",default:l.default&&l.autoselect,language:l.language,label:u},!1).track;o[u]=c}}}},yc={AUDIO:function(t,e){return function(){var n=e.mediaTypes[t].tracks;for(var r in n)if(n[r].enabled)return n[r];return null}},SUBTITLES:function(t,e){return function(){var n=e.mediaTypes[t].tracks;for(var r in n)if("showing"===n[r].mode)return n[r];return null}}},_c=void 0,bc=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],xc=function(e){function n(t){Su(this,n);var e,r=Mu(this,(n.__proto__||Object.getPrototypeOf(n)).call(this)),i=t.url,a=t.withCredentials,o=t.tech,s=t.bandwidth,u=t.externHls,l=t.useCueTags,c=t.blacklistDuration,h=t.enableLowInitialPlaylist,f=t.sourceType,d=t.seekTo;if(!i)throw new Error("A non-empty playlist URL is required");_c=u,r.withCredentials=a,r.tech_=o,r.hls_=o.hls,r.seekTo_=d,r.sourceType_=f,r.useCueTags_=l,r.blacklistDuration=c,r.enableLowInitialPlaylist=h,r.useCueTags_&&(r.cueTagsTrack_=r.tech_.addTextTrack("metadata","ad-cues"),r.cueTagsTrack_.inBandMetadataTrackDispatchType=""),r.requestOptions_={withCredentials:r.withCredentials,timeout:null},r.mediaTypes_=(e={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:ql,activeTrack:ql,onGroupChanged:ql,onTrackChanged:ql}}),e),r.mediaSource=new Ki.MediaSource,r.mediaSource.addEventListener("sourceopen",r.handleSourceOpen_.bind(r)),r.seekable_=Ki.createTimeRanges(),r.hasPlayed_=function(){return!1},r.syncController_=new lc(t),r.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,r.decrypter_=new cc,r.inbandTextTracks_={};var p={hls:r.hls_,mediaSource:r.mediaSource,currentTime:r.tech_.currentTime.bind(r.tech_),seekable:function(){return r.seekable()},seeking:function(){return r.tech_.seeking()},duration:function(){return r.mediaSource.duration},hasPlayed:function(){return r.hasPlayed_()},goalBufferLength:function(){return r.goalBufferLength()},bandwidth:s,syncController:r.syncController_,decrypter:r.decrypter_,sourceType:r.sourceType_,inbandTextTracks:r.inbandTextTracks_};return r.masterPlaylistLoader_="dash"===r.sourceType_?new Gl(i,r.hls_,r.withCredentials):new Ru(i,r.hls_,r.withCredentials),r.setupMasterPlaylistLoaderListeners_(),r.mainSegmentLoader_=new rc(Ki.mergeOptions(p,{segmentMetadataTrack:r.segmentMetadataTrack_,loaderType:"main"}),t),r.audioSegmentLoader_=new rc(Ki.mergeOptions(p,{loaderType:"audio"}),t),r.subtitleSegmentLoader_=new oc(Ki.mergeOptions(p,{loaderType:"vtt"}),t),r.setupSegmentLoaderListeners_(),bc.forEach(function(t){r[t+"_"]=(function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]}).bind(r,t)}),r.logger_=Wl("MPC"),r.masterPlaylistLoader_.load(),r}return Ou(n,Ki.EventTarget),Tu(n,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var e=t.masterPlaylistLoader_.media(),n=1.5*t.masterPlaylistLoader_.targetDuration*1e3;t.requestOptions_.timeout=Qu(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:n,e.endList&&"none"!==t.tech_.preload()&&(t.mainSegmentLoader_.playlist(e,t.requestOptions_),t.mainSegmentLoader_.load()),function(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){mc[e](e,t)});var e=t.mediaTypes,n=t.masterPlaylistLoader,r=t.tech,i=t.hls;["AUDIO","SUBTITLES"].forEach(function(n){var r,i,a,o,s,u;e[n].activeGroup=(r=n,i=t,function(t){var e=i.mediaTypes[r].groups,n=i.masterPlaylistLoader.media();if(!n)return null;var a=null;return n.attributes[r]&&(a=e[n.attributes[r]]),a=a||e.main,void 0===t?a:null===t?null:a.filter(function(e){return e.id===t.id})[0]||null}),e[n].activeTrack=yc[n](n,t),e[n].onGroupChanged=(a=n,o=t,function(){var t=o.segmentLoaders,e=t[a],n=t.main,r=o.mediaTypes[a],i=r.activeTrack(),s=r.activeGroup(i),u=r.activePlaylistLoader;hc(e,r),s&&(s.playlistLoader?(e.resyncLoader(),fc(s.playlistLoader,r)):u&&n.resetEverything())}),e[n].onTrackChanged=(s=n,u=t,function(){var t=u.segmentLoaders,e=t[s],n=t.main,r=u.mediaTypes[s],i=r.activeTrack(),a=r.activeGroup(i),o=r.activePlaylistLoader;hc(e,r),a&&(a.playlistLoader?(o!==a.playlistLoader&&(e.track&&e.track(i),e.resetEverything()),fc(a.playlistLoader,r)):n.resetEverything())})});var a=e.AUDIO.activeGroup(),o=(a.filter(function(t){return t.default})[0]||a[0]).id;e.AUDIO.tracks[o].enabled=!0,e.AUDIO.onTrackChanged(),n.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(t){return e[t].onGroupChanged()})});var s=function(){e.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"hls-audio-change"})};for(var u in r.audioTracks().addEventListener("change",s),r.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),i.on("dispose",function(){r.audioTracks().removeEventListener("change",s),r.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),r.clearTracks("audio"),e.AUDIO.tracks)r.audioTracks().addTrack(e.AUDIO.tracks[u])}({sourceType:t.sourceType_,segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,hls:t.hls_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)}),t.triggerPresenceUsage_(t.master(),e);try{t.setupSourceBuffers_()}catch(e){return Ki.log.warn("Failed to create SourceBuffers",e),t.mediaSource.endOfStream("decode")}t.setupFirstPlay(),t.trigger("selectedinitialmedia")}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var e=t.masterPlaylistLoader_.media();if(!e){t.excludeUnsupportedVariants_();var n=void 0;return t.enableLowInitialPlaylist&&(n=t.selectInitialPlaylist()),n||(n=t.selectPlaylist()),t.initialMedia_=n,void t.masterPlaylistLoader_.media(t.initialMedia_)}if(t.useCueTags_&&t.updateAdCues_(e),t.mainSegmentLoader_.playlist(e,t.requestOptions_),t.updateDuration(),t.tech_.paused()||(t.mainSegmentLoader_.load(),t.audioSegmentLoader_&&t.audioSegmentLoader_.load()),!e.endList){var r=function(){var e=t.seekable();0!==e.length&&t.mediaSource.addSeekableRange_(e.start(0),e.end(0))};t.duration()!==1/0?t.tech_.one("durationchange",function e(){t.duration()===1/0?r():t.tech_.one("durationchange",e)}):r()}}),this.masterPlaylistLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){t.mainSegmentLoader_.abort(),t.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var e=t.masterPlaylistLoader_.media(),n=1.5*t.masterPlaylistLoader_.targetDuration*1e3;t.requestOptions_.timeout=Qu(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:n,t.mainSegmentLoader_.playlist(e,t.requestOptions_),t.mainSegmentLoader_.load(),t.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var e=t.masterPlaylistLoader_.media();t.stuckAtPlaylistEnd_(e)&&(t.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),t.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(t,e){var n=t.mediaGroups||{},r=!0,i=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var o in n.AUDIO[a])n.AUDIO[a][o].uri||(r=!1);r&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),_c.Playlist.isAes(e)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),_c.Playlist.isFmp4(e)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.length&&1<Object.keys(n.AUDIO[i[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var t=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var e=t.selectPlaylist(),n=t.masterPlaylistLoader_.media(),r=t.tech_.buffered(),i=r.length?r.end(r.length-1)-t.tech_.currentTime():0,a=t.bufferLowWaterLine();(!n.endList||t.duration()<Xl.MAX_BUFFER_LOW_WATER_LINE||e.attributes.BANDWIDTH<n.attributes.BANDWIDTH||a<=i)&&t.masterPlaylistLoader_.media(e),t.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){t.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){t.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)}),this.mainSegmentLoader_.on("reseteverything",function(){t.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(e){t.tech_.trigger({type:"hls-segment-time-mapping",mapping:e.mapping})}),this.audioSegmentLoader_.on("ended",function(){t.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var t=this,e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetEverything(function(){t.tech_.setCurrentTime(Ki.browser.IE_VERSION||Ki.browser.IS_EDGE?t.tech_.currentTime()+.04:t.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0),this.hasPlayed_()&&this.load();var t=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0)?this.seekTo_(t.end(t.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var t=this,e=this.masterPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_())return!1;if(!e.endList){var n=this.seekable();if(!n.length)return!1;if(Ki.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){t.trigger("firstplay"),t.seekTo_(n.end(0)),t.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay"),this.seekTo_(n.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(t){return Ki.log.warn("Failed to create Source Buffers",t),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var t=this.tech_.play();void 0!==t&&"function"==typeof t.then&&t.then(null,function(t){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var t=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?t&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),t&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function(t){if(!this.seekable().length)return!1;var e=this.syncController_.getExpiredTime(t,this.mediaSource.duration);if(null===e)return!1;var n=_c.Playlist.playlistEnd(t,e),r=this.tech_.currentTime(),i=this.tech_.buffered();if(!i.length)return n-r<=.1;var a=i.end(i.length-1);return a-r<=.1&&n-a<=.1}},{key:"blacklistCurrentPlaylist",value:function(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],r=void 0;if(r=e.playlist||this.masterPlaylistLoader_.media(),n=n||e.blacklistDuration||this.blacklistDuration,!r){this.error=e;try{return this.mediaSource.endOfStream("network")}catch(t){return this.trigger("error")}}var i=1===this.masterPlaylistLoader_.master.playlists.filter($u).length;return i?(Ki.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(i)):(r.excludeUntil=Date.now()+1e3*n,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),t=this.selectPlaylist(),Ki.log.warn("Problem encountered with the current HLS playlist."+(e.message?" "+e.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(t))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(t){var e=cl(this.tech_.buffered(),t);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?e&&e.length?t:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:_c.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var t=void 0,e=void 0;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var r=this.syncController_.getExpiredTime(n,this.mediaSource.duration);if(null!==r&&0!==(t=_c.Playlist.seekable(n,r)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(r=this.syncController_.getExpiredTime(n,this.mediaSource.duration)))return;if(0===(e=_c.Playlist.seekable(n,r)).length)return}this.seekable_=e?e.start(0)>t.end(0)||t.start(0)>e.end(0)?t:Ki.createTimeRanges([[e.start(0)>t.start(0)?e.start(0):t.start(0),e.end(0)<t.end(0)?e.end(0):t.end(0)]]):t,this.logger_("seekable updated ["+fl(this.seekable_)+"]"),this.tech_.trigger("seekablechanged")}}}}},{key:"updateDuration",value:function(){var t=this,e=this.mediaSource.duration,n=_c.Playlist.duration(this.masterPlaylistLoader_.media()),r=this.tech_.buffered(),i=function e(){t.mediaSource.duration=n,t.tech_.trigger("durationchange"),t.mediaSource.removeEventListener("sourceopen",e)};0<r.length&&(n=Math.max(n,r.end(r.length-1))),e!==n&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",i):i())}},{key:"dispose",value:function(){var t=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(e){var n=t.mediaTypes_[e].groups;for(var r in n)n[r].forEach(function(t){t.playlistLoader&&t.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var t,e=this.masterPlaylistLoader_.media();if(e&&"open"===this.mediaSource.readyState){if((t=function(t,e){var n,r,i=(n=e).segments&&n.segments.length&&n.segments[0].map?"mp4":"mp2t",a=(r=e.attributes||{}).CODECS?Al(r.CODECS):Cl,o=e.attributes||{},s=!0,u=!1;if(!e)return[];if(t.mediaGroups.AUDIO&&o.AUDIO){var l=t.mediaGroups.AUDIO[o.AUDIO];if(l)for(var c in s=!(u=!0),l)if(!l[c].uri&&!l[c].playlists){s=!0;break}}u&&!a.audioProfile&&(s||(a.audioProfile=function(t,e){if(!t.mediaGroups.AUDIO||!e)return null;var n=t.mediaGroups.AUDIO[e];if(!n)return null;for(var r in n){var i=n[r];if(i.default&&i.playlists)return Al(i.playlists[0].attributes.CODECS).audioProfile}return null}(t,o.AUDIO)),a.audioProfile||(Ki.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),a.audioProfile=Cl.audioProfile));var h={};a.videoCodec&&(h.video=""+a.videoCodec+a.videoObjectTypeIndicator),a.audioProfile&&(h.audio="mp4a.40."+a.audioProfile);var f=Il("audio",i,[h.audio]),d=Il("video",i,[h.video]),p=Il("video",i,[h.video,h.audio]);return u?!s&&h.video?[d,f]:s||h.video?[p,f]:[f,f]:h.video?[p]:[f]}(this.masterPlaylistLoader_.master,e)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+e.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(t),this.excludeIncompatibleVariants_(e)}}},{key:"configureLoaderMimeTypes_",value:function(t){var e=1<t.length&&-1===t[0].indexOf(",")&&t[0]!==t[1]?new Ki.EventTarget:null;this.mainSegmentLoader_.mimeType(t[0],e),t[1]&&this.audioSegmentLoader_.mimeType(t[1],e)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(e){e.attributes.CODECS&&t.MediaSource&&t.MediaSource.isTypeSupported&&!t.MediaSource.isTypeSupported('video/mp4; codecs="'+e.attributes.CODECS.replace(/avc1\.(\d+)\.(\d+)/i,function(t){return El([t])[0]})+'"')&&(e.excludeUntil=1/0)})}},{key:"excludeIncompatibleVariants_",value:function(t){var e=2,n=null,r=void 0;t.attributes.CODECS&&(r=Al(t.attributes.CODECS),n=r.videoCodec,e=r.codecCount),this.master().playlists.forEach(function(t){var r={codecCount:2,videoCodec:null};t.attributes.CODECS&&(r=Al(t.attributes.CODECS)),r.codecCount!==e&&(t.excludeUntil=1/0),r.videoCodec!==n&&(t.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(e){var n=0,r=this.seekable();r.length&&(n=r.start(0)),function(e,n){if(e.segments)for(var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=void 0,a=0;a<e.segments.length;a++){var o=e.segments[a];if(i||(i=sc(n,r+o.duration/2)),i){if("cueIn"in o){i.endTime=r,i.adEndTime=r,r+=o.duration,i=null;continue}if(r<i.endTime){r+=o.duration;continue}i.endTime+=o.duration}else if("cueOut"in o&&((i=new t.VTTCue(r,r+o.duration,o.cueOut)).adStartTime=r,i.adEndTime=r+parseFloat(o.cueOut),n.addCue(i)),"cueOutCont"in o){var s,u,l=o.cueOutCont.split("/").map(parseFloat),c=ku(l,2);s=c[0],u=c[1],(i=new t.VTTCue(r,r+o.duration,"")).adStartTime=r-s,i.adEndTime=i.adStartTime+u,n.addCue(i)}r+=o.duration}}(e,this.cueTagsTrack_,n)}},{key:"goalBufferLength",value:function(){var t=this.tech_.currentTime(),e=Xl.GOAL_BUFFER_LENGTH,n=Xl.GOAL_BUFFER_LENGTH_RATE,r=Math.max(e,Xl.MAX_GOAL_BUFFER_LENGTH);return Math.min(e+t*n,r)}},{key:"bufferLowWaterLine",value:function(){var t=this.tech_.currentTime(),e=Xl.BUFFER_LOW_WATER_LINE,n=Xl.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(e,Xl.MAX_BUFFER_LOW_WATER_LINE);return Math.min(e+t*n,r)}}]),n}(),wc=["seeking","seeked","pause","playing","error"],Sc=function(){function e(n){var r=this;Su(this,e),this.tech_=n.tech,this.seekable=n.seekable,this.seekTo=n.seekTo,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Wl("PlaybackWatcher"),this.logger_("initialize");var i=function(){return r.monitorCurrentTime_()},a=function(){return r.techWaiting_()},o=function(){return r.cancelTimer_()},s=function(){return r.fixesBadSeeks_()};this.tech_.on("seekablechanged",s),this.tech_.on("waiting",a),this.tech_.on(wc,o),this.tech_.on("canplay",i),this.dispose=function(){r.logger_("dispose"),r.tech_.off("seekablechanged",s),r.tech_.off("waiting",a),r.tech_.off(wc,o),r.tech_.off("canplay",i),r.checkCurrentTimeTimeout_&&t.clearTimeout(r.checkCurrentTimeTimeout_),r.cancelTimer_()}}return Tu(e,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&t.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=t.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var t=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===t&&(!e.length||t+.1>=e.end(e.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&t===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):t===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=t)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var t=this.tech_.seeking(),e=this.seekable(),n=this.tech_.currentTime(),r=void 0;return t&&this.afterSeekableWindow_(e,n)&&(r=e.end(e.length-1)),t&&this.beforeSeekableWindow_(e,n)&&(r=e.start(0)+.1),void 0!==r&&(this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+fl(e)+". Seeking to "+r+"."),this.seekTo(r),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var t=this.tech_.currentTime(),e=this.tech_.buffered(),n=cl(e,t);return n.length&&t+3<=n.end(0)?(this.cancelTimer_(),this.seekTo(t),this.logger_("Stopped at "+t+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var t=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(t,e)){var n=t.end(t.length-1);return this.logger_("Fell out of live window at time "+e+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.seekTo(n),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var r=this.tech_.buffered(),i=hl(r,e);if(this.videoUnderflow_(i,r,e))return this.cancelTimer_(),this.seekTo(e),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(0<i.length){var a=i.start(0)-e;return this.logger_("Stopped at "+e+", setting timer for "+a+", seeking to "+i.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,e),!0}return!1}},{key:"afterSeekableWindow_",value:function(t,e){return!!t.length&&e>t.end(t.length-1)+.1}},{key:"beforeSeekableWindow_",value:function(t,e){return!!(t.length&&0<t.start(0)&&e<t.start(0)-.1)}},{key:"videoUnderflow_",value:function(t,e,n){if(0===t.length){var r=this.gapFromVideoUnderflow_(e,n);if(r)return this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+n),!0}return!1}},{key:"skipTheGap_",value:function(t){var e=this.tech_.buffered(),n=this.tech_.currentTime(),r=hl(e,n);this.cancelTimer_(),0!==r.length&&n===t&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",t,"nextRange start:",r.start(0)),this.seekTo(r.start(0)+ul),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(t,e){for(var n=function(t){if(t.length<2)return Ki.createTimeRanges();for(var e=[],n=1;n<t.length;n++){var r=t.end(n-1),i=t.start(n);e.push([r,i])}return Ki.createTimeRanges(e)}(t),r=0;r<n.length;r++){var i=n.start(r),a=n.end(r);if(e-i<4&&2<e-i)return{start:i,end:a}}return null}}]),e}(),Tc={errorInterval:30,getSource:function(t){return t(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}},Oc=function(t){!function t(e,n){var r=0,i=0,a=Ki.mergeOptions(Tc,n);e.ready(function(){e.trigger({type:"usage",name:"hls-error-reload-initialized"})});var o=function(){i&&e.currentTime(i)},s=function(t){null!=t&&(i=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",o),e.src(t),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},u=function(){if(Date.now()-r<1e3*a.errorInterval)e.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(a.getSource&&"function"==typeof a.getSource)return r=Date.now(),a.getSource.call(e,s);Ki.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},l=function t(){e.off("loadedmetadata",o),e.off("error",u),e.off("dispose",t)};e.on("error",u),e.on("dispose",l),e.reloadSourceOnError=function(n){l(),t(e,n)}}(this,t)};Ki.use("*",function(t){return{setSource:function(t,e){e(null,t)},setCurrentTime:function(e){return t.vhs&&t.currentSource().src===t.vhs.source_.src&&t.vhs.setCurrentTime(e),e},play:function(){t.vhs&&t.currentSource().src===t.vhs.source_.src&&t.vhs.setCurrentTime(t.currentTime())}}});var Mc={PlaylistLoader:Ru,Playlist:Ku,Decrypter:xu,AsyncStream:yu,decrypt:bu,utils:sl,STANDARD_PLAYLIST_SELECTOR:function(){return function(e,n,r,i,a){var o=e.playlists.map(function(e){return{bandwidth:e.attributes.BANDWIDTH||t.Number.MAX_VALUE,width:e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,height:e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height,playlist:e}});Jl(o,function(t,e){return t.bandwidth-e.bandwidth});var s=(o=o.filter(function(t){return!Ku.isIncompatible(t.playlist)})).filter(function(t){return Ku.isEnabled(t.playlist)});s.length||(s=o.filter(function(t){return!Ku.isDisabled(t.playlist)}));var u=s.filter(function(t){return t.bandwidth*Xl.BANDWIDTH_VARIANCE<n}),l=u[u.length-1],c=u.filter(function(t){return t.bandwidth===l.bandwidth})[0];if(!1===a){var h=c||s[0]||o[0];return h?h.playlist:null}var f=u.filter(function(t){return t.width&&t.height});Jl(f,function(t,e){return t.width-e.width});var d=f.filter(function(t){return t.width===r&&t.height===i});l=d[d.length-1];var p=d.filter(function(t){return t.bandwidth===l.bandwidth})[0],g=void 0,v=void 0,m=void 0;p||(v=(g=f.filter(function(t){return t.width>r||t.height>i})).filter(function(t){return t.width===g[0].width&&t.height===g[0].height}),l=v[v.length-1],m=v.filter(function(t){return t.bandwidth===l.bandwidth})[0]);var y=m||p||c||s[0]||o[0];return y?y.playlist:null}(this.playlists.master,this.systemBandwidth,parseInt(Kl(this.tech_.el(),"width"),10),parseInt(Kl(this.tech_.el(),"height"),10),this.limitRenditionByPlayerDimensions)},INITIAL_PLAYLIST_SELECTOR:function(){var t=this.playlists.master.playlists.filter(Ku.isEnabled);return Jl(t,function(t,e){return tc(t,e)}),t.filter(function(t){return Al(t.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:tc,comparePlaylistResolution:function(e,n){var r=void 0,i=void 0;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(r=e.attributes.RESOLUTION.width),r=r||t.Number.MAX_VALUE,n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(i=n.attributes.RESOLUTION.width),r===(i=i||t.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&n.attributes.BANDWIDTH?e.attributes.BANDWIDTH-n.attributes.BANDWIDTH:r-i},xhr:el()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(t){Object.defineProperty(Mc,t,{get:function(){return Ki.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),Xl[t]},set:function(e){Ki.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),"number"!=typeof e||e<0?Ki.log.warn("value of Hls."+t+" must be greater than or equal to 0"):Xl[t]=e}})});var kc=function(t){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(t)?"hls":/^application\/dash\+xml/i.test(t)?"dash":null},Cc=function(t,e){for(var n=e.media(),r=-1,i=0;i<t.length;i++)if(t[i].id===n.uri){r=i;break}t.selectedIndex_=r,t.trigger({selectedIndex:r,type:"change"})};Mc.canPlaySource=function(){return Ki.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},Mc.supportsNativeHls=function(){var t=e.createElement("video");return!!Ki.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(e){return/maybe|probably/i.test(t.canPlayType(e))})}(),Mc.supportsNativeDash=!!Ki.getTech("Html5").isSupported()&&/maybe|probably/i.test(e.createElement("video").canPlayType("application/dash+xml")),Mc.supportsTypeNatively=function(t){return"hls"===t?Mc.supportsNativeHls:"dash"===t&&Mc.supportsNativeDash},Mc.isSupported=function(){return Ki.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Ec=Ki.getComponent("Component"),Ac=function(t){function n(t,r,i){Su(this,n);var a=Mu(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,r,i.hls));if(r.options_&&r.options_.playerId){var o=Ki(r.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return Ki.log.warn("player.hls is deprecated. Use player.tech().hls instead."),r.trigger({type:"usage",name:"hls-player-access"}),a}}),o.vhs=a,o.dash=a}if(a.tech_=r,a.source_=t,a.stats={},a.setOptions_(),a.options_.overrideNative&&r.overrideNativeAudioTracks&&r.overrideNativeVideoTracks)r.overrideNativeAudioTracks(!0),r.overrideNativeVideoTracks(!0);else if(a.options_.overrideNative&&(r.featuresNativeVideoTracks||r.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return a.on(e,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(t){var n=e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement;n&&n.contains(a.tech_.el())&&a.masterPlaylistController_.smoothQualityChange_()}),a.on(a.tech_,"seeking",function(){this.tech_.seeking()&&0===this.tech_.currentTime()&&this.tech_.player_.loop()&&this.setCurrentTime(0)}),a.on(a.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),a.on(a.tech_,"play",a.play),a}return Ou(n,Ec),Tu(n,[{key:"setOptions_",value:function(){var t=this;this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Xl.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Xl.INITIAL_BANDWIDTH,["withCredentials","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange"].forEach(function(e){void 0!==t.source_[e]&&(t.options_[e]=t.source_[e])}),this.bandwidth=this.options_.bandwidth,this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function(t,e){var n=this;t&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=Mc,this.options_.sourceType=kc(e),this.options_.seekTo=function(t){n.tech_.setCurrentTime(t),n.setCurrentTime(t)},this.masterPlaylistController_=new xc(this.options_),this.playbackWatcher_=new Sc(Ki.mergeOptions(this.options_,{seekable:function(){return n.seekable()}})),this.masterPlaylistController_.on("error",function(){Ki.players[n.tech_.options_.playerId].error(n.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):Mc.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Mc.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(t){this.masterPlaylistController_.selectPlaylist=t.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=t,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=t,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?1/this.throughput:0)))},set:function(){Ki.log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return dl(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return dl(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",function(){var t,e;e=(t=n).playlists,t.representations=function(){return e.master.playlists.filter(function(t){return!Xu(t)}).map(function(e,n){return new function t(e,n,r){Su(this,t);var i,a,o,s=e.masterPlaylistController_,u=s[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(s);if(n.attributes.RESOLUTION){var l=n.attributes.RESOLUTION;this.width=l.width,this.height=l.height}this.bandwidth=n.attributes.BANDWIDTH,this.id=r,this.enabled=(i=e.playlists,a=n.uri,o=u,function(t){var e=i.master.playlists[a],n=Xu(e),r=$u(e);return void 0===t?r:(t?delete e.disabled:e.disabled=!0,t===r||n||(o(),i.trigger(t?"renditionenabled":"renditiondisabled")),t)})}(t,e,e.uri)})},function(t){if("dash"===t.options_.sourceType){var e=Ki.players[t.tech_.options_.playerId];if(e.eme){var n=function(t,e,n){if(!t)return t;var r={};for(var i in t)r[i]={audioContentType:'audio/mp4; codecs="'+n.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+e.attributes.CODECS+'"'},e.contentProtection&&e.contentProtection[i]&&e.contentProtection[i].pssh&&(r[i].pssh=e.contentProtection[i].pssh),"string"==typeof t[i]&&(r[i].url=t[i]);return Ki.mergeOptions(t,r)}(t.source_.keySystems,t.playlists.media(),t.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());n&&(e.currentSource().keySystems=n,e.eme.initializeMediaKeys&&e.eme.initializeMediaKeys())}}}(n)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.tech_.ready(function(){return n.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(Ki.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var t=this,e=Ki.players[this.tech_.options_.playerId];e&&e.qualityLevels&&(this.qualityLevels_=e.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){var e,n;e=t.qualityLevels_,(n=t).representations().forEach(function(t){e.addQualityLevel(t)}),Cc(e,n.playlists)}),this.playlists.on("mediachange",function(){Cc(t.qualityLevels_,t.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(t){this.masterPlaylistController_.setCurrentTime(t)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0}(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"dispose",this).call(this)}}]),n}(),Ic={name:"videojs-http-streaming",VERSION:"1.4.1",canHandleSource:function(t){var e=Ki.mergeOptions(Ki.options,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return Ic.canPlayType(t.type,e)},handleSource:function(t,e){var n=Ki.mergeOptions(Ki.options,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{});return e.hls=new Ac(t,e,n),e.hls.xhr=el(),e.hls.src(t.src,t.type),e.hls},canPlayType:function(t){var e=Ki.mergeOptions(Ki.options,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).hls.overrideNative,n=kc(t);return!n||Mc.supportsTypeNatively(n)&&!e?"":"maybe"}};return void 0!==Ki.MediaSource&&void 0!==Ki.URL||(Ki.MediaSource=Fl,Ki.URL=Ul),Fl.supportsNativeMediaSources()&&Ki.getTech("Html5").registerSourceHandler(Ic,0),Ki.HlsHandler=Ac,Ki.HlsSourceHandler=Ic,Ki.Hls=Mc,Ki.use||Ki.registerComponent("Hls",Mc),Ki.options.hls=Ki.options.hls||{},Ki.registerPlugin?Ki.registerPlugin("reloadSourceOnError",Oc):Ki.plugin("reloadSourceOnError",Oc),Ki}),function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){return i(e[o][1][t]||t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=t(32),a=i&&i.__esModule?i:{default:i},o=function(t,e){for(var n=t.cues,r=0;r<n.length;r++){var i=n[r];if(e>=i.adStartTime&&e<=i.adEndTime)return i}return null};n.default={updateAdCues:function(t,e){if(t.segments)for(var n=arguments.length<=2||void 0===arguments[2]?0:arguments[2],i=void 0,s=0;s<t.segments.length;s++){var u=t.segments[s];if(i||(i=o(e,n+u.duration/2)),i){if("cueIn"in u){i.endTime=n,i.adEndTime=n,n+=u.duration,i=null;continue}if(n<i.endTime){n+=u.duration;continue}i.endTime+=u.duration}else if("cueOut"in u&&((i=new a.default.VTTCue(n,n+u.duration,u.cueOut)).adStartTime=n,i.adEndTime=n+parseFloat(u.cueOut),e.addCue(i)),"cueOutCont"in u){var l,c,h=u.cueOutCont.split("/").map(parseFloat),f=r(h,2);l=f[0],c=f[1],(i=new a.default.VTTCue(n,n+u.duration,"")).adStartTime=n-l,i.adEndTime=i.adStartTime+c,e.addCue(i)}n+=u.duration}},findAdCue:o},e.exports=n.default},{}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(t,e){return t.start(e)+"-"+t.end(e)},i=function(t,e){var n=t.toString(16);return"00".substring(0,2-n.length)+n+(e%2?" ":"")},a=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},o={hexDump:function(t){for(var e=Array.prototype.slice.call(t),n="",r=0;r<e.length/16;r++)n+=e.slice(16*r,16*r+16).map(i).join("")+" "+e.slice(16*r,16*r+16).map(a).join("")+"\n";return n},tagDump:function(t){return o.hexDump(t.bytes)},textRanges:function(t){var e="",n=void 0;for(n=0;n<t.length;n++)e+=r(t,n)+" ";return e},createTransferableMessage:function(t){var e={};return Object.keys(t).forEach(function(n){var r=t[n];e[n]=ArrayBuffer.isView(r)?{bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:r}),e},initSegmentId:function(t){var e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")}};n.default=o,e.exports=n.default},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},e.exports=n.default},{}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(32),i=r&&r.__esModule?r:{default:r},a=t(25),o=t(2);n.default=function(t){return new function(t){t.onmessage=function(t){var e=t.data,n=new Uint8Array(e.encrypted.bytes,e.encrypted.byteOffset,e.encrypted.byteLength),r=new Uint32Array(e.key.bytes,e.key.byteOffset,e.key.byteLength/4),s=new Uint32Array(e.iv.bytes,e.iv.byteOffset,e.iv.byteLength/4);new a.Decrypter(n,r,s,function(t,n){i.default.postMessage((0,o.createTransferableMessage)({source:e.source,decrypted:n}),[n.buffer])})}}(t)},e.exports=n.default},{}],5:[function(t,e,n){(function(e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},o=r(t(9)),s=t(11),u=r(t(16)),l=r(t(20)),c=r(t(12)),h=r("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),f=r(t(1)),d=r(t(18)),p=t(65),g=r(t(76)),v=r(t(4)),m=r(t(3)),y=t(19),_=t(6),b=void 0,x={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},w=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],S=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},T=function(){var e=void 0;try{e=t.resolve("./decrypter-worker")}catch(t){}return e},O=function(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,function(t){return(0,p.translateLegacyCodecs)([t])[0]})};n.mapLegacyAvcCodecs_=O;var M=function(t,e,n){return t+"/"+e+'; codecs="'+n.filter(function(t){return!!t}).join(", ")+'"'},k=function(t,e){var n=e.segments&&e.segments.length&&e.segments[0].map?"mp4":"mp2t",r=function(t){var e=t.attributes||{};return e.CODECS?(0,y.parseCodecs)(e.CODECS):x}(e),i=e.attributes||{},a=!0,o=!1;if(!e)return[];if(t.mediaGroups.AUDIO&&i.AUDIO){var s=t.mediaGroups.AUDIO[i.AUDIO];if(s)for(var u in o=!0,a=!1,s)if(!s[u].uri){a=!0;break}}o&&!r.audioProfile&&(h.default.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),r.audioProfile=x.audioProfile);var l={};r.videoCodec&&(l.video=""+r.videoCodec+r.videoObjectTypeIndicator),r.audioProfile&&(l.audio="mp4a.40."+r.audioProfile);var c=M("audio",n,[l.audio]),f=M("video",n,[l.video]),d=M("video",n,[l.video,l.audio]);return o?!a&&l.video?[f,c]:[d,c]:l.video?[d]:[c]};n.mimeTypesForPlaylist_=k;var C=function(t){function e(t){var n=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this);var r=t.url,i=t.withCredentials,s=t.mode,c=t.tech,f=t.bandwidth,p=t.externHls,m=t.useCueTags,y=t.blacklistDuration,x=t.enableLowInitialPlaylist;if(!r)throw new Error("A non-empty playlist URL is required");b=p,this.withCredentials=i,this.tech_=c,this.hls_=c.hls,this.mode_=s,this.useCueTags_=m,this.blacklistDuration=y,this.enableLowInitialPlaylist=x,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:this.withCredentials,timeout:null},this.mediaTypes_=(0,_.createMediaTypes)(),this.mediaSource=new h.default.MediaSource({mode:s}),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_.bind(this)),this.seekable_=h.default.createTimeRanges(),this.hasPlayed_=function(){return!1},this.syncController_=new d.default(t),this.segmentMetadataTrack_=c.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.decrypter_=(0,g.default)(v.default,T());var O={hls:this.hls_,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.mediaSource.duration},hasPlayed:function(){return n.hasPlayed_()},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:f,syncController:this.syncController_,decrypter:this.decrypter_};this.masterPlaylistLoader_=new o.default(r,this.hls_,this.withCredentials),this.setupMasterPlaylistLoaderListeners_(),this.mainSegmentLoader_=new u.default(h.default.mergeOptions(O,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),t),this.audioSegmentLoader_=new u.default(h.default.mergeOptions(O,{loaderType:"audio"}),t),this.subtitleSegmentLoader_=new l.default(h.default.mergeOptions(O,{loaderType:"vtt"}),t),this.setupSegmentLoaderListeners_(),w.forEach(function(t){n[t+"_"]=S.bind(n,t)}),this.masterPlaylistLoader_.load()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,h.default.EventTarget),i(e,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var e=t.masterPlaylistLoader_.media(),n=1.5*t.masterPlaylistLoader_.targetDuration*1e3;t.requestOptions_.timeout=(0,s.isLowestEnabledRendition)(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:n,e.endList&&"none"!==t.tech_.preload()&&(t.mainSegmentLoader_.playlist(e,t.requestOptions_),t.mainSegmentLoader_.load()),(0,_.setupMediaGroups)({segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,mode:t.mode_,hls:t.hls_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)}),t.triggerPresenceUsage_(t.master(),e);try{t.setupSourceBuffers_()}catch(e){return h.default.log.warn("Failed to create SourceBuffers",e),t.mediaSource.endOfStream("decode")}t.setupFirstPlay(),t.trigger("selectedinitialmedia")}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var e=t.masterPlaylistLoader_.media();if(!e){var n=void 0;return t.enableLowInitialPlaylist&&(n=t.selectInitialPlaylist()),n||(n=t.selectPlaylist()),t.initialMedia_=n,void t.masterPlaylistLoader_.media(t.initialMedia_)}t.useCueTags_&&t.updateAdCues_(e),t.mainSegmentLoader_.playlist(e,t.requestOptions_),t.updateDuration(),t.tech_.paused()||t.mainSegmentLoader_.load(),e.endList||function(){var e=function(){var e=t.seekable();0!==e.length&&t.mediaSource.addSeekableRange_(e.start(0),e.end(0))};t.duration()!==1/0?t.tech_.one("durationchange",function n(){t.duration()===1/0?e():t.tech_.one("durationchange",n)}):e()}()}),this.masterPlaylistLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){t.mainSegmentLoader_.abort(),t.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var e=t.masterPlaylistLoader_.media(),n=1.5*t.masterPlaylistLoader_.targetDuration*1e3;t.requestOptions_.timeout=(0,s.isLowestEnabledRendition)(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?0:n,t.mainSegmentLoader_.playlist(e,t.requestOptions_),t.mainSegmentLoader_.load(),t.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var e=t.masterPlaylistLoader_.media();t.stuckAtPlaylistEnd_(e)&&(t.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),t.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(t,e){var n=t.mediaGroups||{},r=!0,i=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var o in n.AUDIO[a])n.AUDIO[a][o].uri||(r=!1);r&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),b.Playlist.isAes(e)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),b.Playlist.isFmp4(e)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.length&&Object.keys(n.AUDIO[i[0]]).length>1&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var t=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){var e=t.selectPlaylist(),n=t.masterPlaylistLoader_.media(),r=t.tech_.buffered(),i=r.length?r.end(r.length-1)-t.tech_.currentTime():0,a=t.bufferLowWaterLine();(!n.endList||t.duration()<m.default.MAX_BUFFER_LOW_WATER_LINE||e.attributes.BANDWIDTH<n.attributes.BANDWIDTH||i>=a)&&t.masterPlaylistLoader_.media(e),t.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",function(){t.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",function(){t.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(){t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)}),this.mainSegmentLoader_.on("reseteverything",function(){t.tech_.trigger("hls-reset")}),this.mainSegmentLoader_.on("segmenttimemapping",function(e){t.tech_.trigger({type:"hls-segment-time-mapping",mapping:e.mapping})}),this.audioSegmentLoader_.on("ended",function(){t.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"fastQualityChange_",value:function(){var t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetLoader())}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_()&&this.load();var t=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0)?this.tech_.setCurrentTime(t.end(t.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var t=this,e=this.masterPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_())return!1;if(!e.endList){var n=function(){var e=t.seekable();return e.length?h.default.browser.IE_VERSION&&"html5"===t.mode_&&0===t.tech_.readyState()?(t.tech_.one("loadedmetadata",function(){t.trigger("firstplay"),t.tech_.setCurrentTime(e.end(0)),t.hasPlayed_=function(){return!0}}),{v:!1}):(t.trigger("firstplay"),void t.tech_.setCurrentTime(e.end(0))):{v:!1}}();if("object"==typeof n)return n.v}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(t){return h.default.log.warn("Failed to create Source Buffers",t),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var t=this.tech_.play();void 0!==t&&"function"==typeof t.then&&t.then(null,function(t){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var t=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(t=t&&this.audioSegmentLoader_.ended_),t&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function(t){if(!this.seekable().length)return!1;var e=this.syncController_.getExpiredTime(t,this.mediaSource.duration);if(null===e)return!1;var n=b.Playlist.playlistEnd(t,e),r=this.tech_.currentTime(),i=this.tech_.buffered();if(!i.length)return n-r<=c.default.SAFE_TIME_DELTA;var a=i.end(i.length-1);return a-r<=c.default.SAFE_TIME_DELTA&&n-a<=c.default.SAFE_TIME_DELTA}},{key:"blacklistCurrentPlaylist",value:function(t,e){void 0===t&&(t={});var n=void 0,r=void 0;if(n=t.playlist||this.masterPlaylistLoader_.media(),e=e||t.blacklistDuration||this.blacklistDuration,!n){this.error=t;try{return this.mediaSource.endOfStream("network")}catch(t){return this.trigger("error")}}var i=1===this.masterPlaylistLoader_.master.playlists.filter(s.isEnabled).length;return i?(h.default.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(i)):(n.excludeUntil=Date.now()+1e3*e,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),r=this.selectPlaylist(),h.default.log.warn("Problem encountered with the current HLS playlist."+(t.message?" "+t.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(r))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(t){var e=c.default.findRange(this.tech_.buffered(),t);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?e&&e.length&&"flash"!==this.mode_?t:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:b.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var t=void 0,e=void 0;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var r=this.syncController_.getExpiredTime(n,this.mediaSource.duration);if(null!==r&&0!==(t=b.Playlist.seekable(n,r)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(r=this.syncController_.getExpiredTime(n,this.mediaSource.duration)))return;if(0===(e=b.Playlist.seekable(n,r)).length)return}this.seekable_=e?e.start(0)>t.end(0)||t.start(0)>e.end(0)?t:h.default.createTimeRanges([[e.start(0)>t.start(0)?e.start(0):t.start(0),e.end(0)<t.end(0)?e.end(0):t.end(0)]]):t,this.tech_.trigger("seekablechanged")}}}}},{key:"updateDuration",value:function(){var t=this,e=this.mediaSource.duration,n=b.Playlist.duration(this.masterPlaylistLoader_.media()),r=this.tech_.buffered(),i=function e(){t.mediaSource.duration=n,t.tech_.trigger("durationchange"),t.mediaSource.removeEventListener("sourceopen",e)};r.length>0&&(n=Math.max(n,r.end(r.length-1))),e!==n&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",i):i())}},{key:"dispose",value:function(){var t=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach(function(e){var n=t.mediaTypes_[e].groups;for(var r in n)n[r].forEach(function(t){t.playlistLoader&&t.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var t=this.masterPlaylistLoader_.media(),e=void 0;if(t&&"open"===this.mediaSource.readyState){if((e=k(this.masterPlaylistLoader_.master,t)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri,this.mediaSource.endOfStream("decode");this.mainSegmentLoader_.mimeType(e[0]),e[1]&&this.audioSegmentLoader_.mimeType(e[1]),this.excludeIncompatibleVariants_(t)}}},{key:"excludeIncompatibleVariants_",value:function(t){var e=this.masterPlaylistLoader_.master,n=2,r=null,i=void 0;t.attributes.CODECS&&(i=(0,y.parseCodecs)(t.attributes.CODECS),r=i.videoCodec,n=i.codecCount),e.playlists.forEach(function(t){var e={codecCount:2,videoCodec:null};if(t.attributes.CODECS){var i=t.attributes.CODECS;e=(0,y.parseCodecs)(i),window.MediaSource&&window.MediaSource.isTypeSupported&&!window.MediaSource.isTypeSupported('video/mp4; codecs="'+O(i)+'"')&&(t.excludeUntil=1/0)}e.codecCount!==n&&(t.excludeUntil=1/0),e.videoCodec!==r&&(t.excludeUntil=1/0)})}},{key:"updateAdCues_",value:function(t){var e=0,n=this.seekable();n.length&&(e=n.start(0)),f.default.updateAdCues(t,this.cueTagsTrack_,e)}},{key:"goalBufferLength",value:function(){var t=this.tech_.currentTime(),e=m.default.GOAL_BUFFER_LENGTH,n=m.default.GOAL_BUFFER_LENGTH_RATE,r=Math.max(e,m.default.MAX_GOAL_BUFFER_LENGTH);return Math.min(e+t*n,r)}},{key:"bufferLowWaterLine",value:function(){var t=this.tech_.currentTime(),e=m.default.BUFFER_LOW_WATER_LINE,n=m.default.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(e,m.default.MAX_BUFFER_LOW_WATER_LINE);return Math.min(e+t*n,r)}}]),e}();n.MasterPlaylistController=C}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(t,e,n){(function(e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=r("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),a=r(t(9)),o=function(){},s=function(t){var e=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},u=function(t,e){t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)};n.stopLoaders=u;var l=function(t,e){e.activePlaylistLoader=t,t.load()};n.startLoaders=l;var c=function(t,e){return function(){var n=e.segmentLoaders,r=n[t],i=n.main,a=e.mediaTypes[t],o=a.activeTrack(),s=a.activeGroup(o),c=a.activePlaylistLoader;if(u(r,a),s){if(!s.playlistLoader)return void(c&&i.resetEverything());r.resyncLoader(),l(s.playlistLoader,a)}}};n.onGroupChanged=c;var h=function(t,e){return function(){var n=e.segmentLoaders,r=n[t],i=n.main,a=e.mediaTypes[t],o=a.activeTrack(),s=a.activeGroup(o),c=a.activePlaylistLoader;if(u(r,a),s){if(!s.playlistLoader)return void i.resetEverything();if(c===s.playlistLoader)return void l(s.playlistLoader,a);r.track&&r.track(o),r.resetEverything(),l(s.playlistLoader,a)}}};n.onTrackChanged=h;var f={AUDIO:function(t,e){return function(){var n=e.mediaTypes[t],r=e.blacklistCurrentPlaylist;u(e.segmentLoaders[t],n);var a=n.activeTrack(),o=n.activeGroup(),s=(o.filter(function(t){return t.default})[0]||o[0]).id,l=n.tracks[s];if(a!==l){for(var c in i.default.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),n.tracks)n.tracks[c].enabled=n.tracks[c]===l;n.onTrackChanged()}else r({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(t,e){return function(){var n=e.segmentLoaders[t],r=e.mediaTypes[t];i.default.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),u(n,r);var a=r.activeTrack();a&&(a.mode="disabled"),r.onTrackChanged()}}};n.onError=f;var d={AUDIO:function(t,e,n){if(e){var r=n.tech,i=n.requestOptions,a=n.segmentLoaders[t];e.on("loadedmetadata",function(){var t=e.media();a.playlist(t,i),(!r.paused()||t.endList&&"none"!==r.preload())&&a.load()}),e.on("loadedplaylist",function(){a.playlist(e.media(),i),r.paused()||a.load()}),e.on("error",f[t](t,n))}},SUBTITLES:function(t,e,n){var r=n.tech,i=n.requestOptions,a=n.segmentLoaders[t],o=n.mediaTypes[t];e.on("loadedmetadata",function(){var t=e.media();a.playlist(t,i),a.track(o.activeTrack()),(!r.paused()||t.endList&&"none"!==r.preload())&&a.load()}),e.on("loadedplaylist",function(){a.playlist(e.media(),i),r.paused()||a.load()}),e.on("error",f[t](t,n))}};n.setupListeners=d;var p={AUDIO:function(t,e){var n=e.mode,r=e.hls,o=e.segmentLoaders[t],u=e.requestOptions.withCredentials,l=e.master.mediaGroups,c=e.mediaTypes[t],h=c.groups,p=c.tracks;for(var g in l[t]&&0!==Object.keys(l[t]).length&&"html5"===n||(l[t]={main:{default:{default:!0}}}),l[t])for(var v in h[g]||(h[g]=[]),l[t][g]){var m,y=l[t][g][v];if(m=y.resolvedUri?new a.default(y.resolvedUri,r,u):null,y=i.default.mergeOptions({id:v,playlistLoader:m},y),d[t](t,y.playlistLoader,e),h[g].push(y),void 0===p[v]){var _=new i.default.AudioTrack({id:v,kind:s(y),enabled:!1,language:y.language,default:y.default,label:v});p[v]=_}}o.on("error",f[t](t,e))},SUBTITLES:function(t,e){var n=e.tech,r=e.hls,o=e.segmentLoaders[t],s=e.requestOptions.withCredentials,u=e.master.mediaGroups,l=e.mediaTypes[t],c=l.groups,h=l.tracks;for(var p in u[t])for(var g in c[p]||(c[p]=[]),u[t][p])if(!u[t][p][g].forced){var v=u[t][p][g];if(v=i.default.mergeOptions({id:g,playlistLoader:new a.default(v.resolvedUri,r,s)},v),d[t](t,v.playlistLoader,e),c[p].push(v),void 0===h[g]){var m=n.addRemoteTextTrack({id:g,kind:"subtitles",enabled:!1,language:v.language,label:g},!1).track;h[g]=m}}o.on("error",f[t](t,e))},"CLOSED-CAPTIONS":function(t,e){var n=e.tech,r=e.master.mediaGroups,a=e.mediaTypes[t],o=a.groups,s=a.tracks;for(var u in r[t])for(var l in o[u]||(o[u]=[]),r[t][u]){var c=r[t][u][l];if(c.instreamId.match(/CC\d/)&&(o[u].push(i.default.mergeOptions({id:l},c)),void 0===s[l])){var h=n.addRemoteTextTrack({id:c.instreamId,kind:"captions",enabled:!1,language:c.language,label:l},!1).track;s[l]=h}}}};n.initialize=p;var g=function(t,e){return function(n){var r=e.mediaTypes[t].groups,i=e.masterPlaylistLoader.media();if(!i)return null;var a=null;return i.attributes[t]&&(a=r[i.attributes[t]]),a=a||r.main,void 0===n?a:null===n?null:a.filter(function(t){return t.id===n.id})[0]||null}};n.activeGroup=g;var v={AUDIO:function(t,e){return function(){var n=e.mediaTypes[t].tracks;for(var r in n)if(n[r].enabled)return n[r];return null}},SUBTITLES:function(t,e){return function(){var n=e.mediaTypes[t].tracks;for(var r in n)if("showing"===n[r].mode)return n[r];return null}}};n.activeTrack=v,n.setupMediaGroups=function(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){p[e](e,t)});var e=t.mediaTypes,n=t.masterPlaylistLoader,r=t.tech,i=t.hls;["AUDIO","SUBTITLES"].forEach(function(n){e[n].activeGroup=g(n,t),e[n].activeTrack=v[n](n,t),e[n].onGroupChanged=c(n,t),e[n].onTrackChanged=h(n,t)});var a=e.AUDIO.activeGroup(),o=(a.filter(function(t){return t.default})[0]||a[0]).id;e.AUDIO.tracks[o].enabled=!0,e.AUDIO.onTrackChanged(),n.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(t){return e[t].onGroupChanged()})});var s=function(){e.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"hls-audio-change"})};for(var u in r.audioTracks().addEventListener("change",s),r.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),i.on("dispose",function(){r.audioTracks().removeEventListener("change",s),r.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)}),r.clearTracks("audio"),e.AUDIO.tracks)r.audioTracks().addTrack(e.AUDIO.tracks[u])},n.createMediaTypes=function(){var t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:o,activeTrack:o,onGroupChanged:o,onTrackChanged:o}}),t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,e,n){(function(e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,i=r&&r.__esModule?r:{default:r},a=t(2),o={FAILURE:2,TIMEOUT:-101,ABORTED:-102};n.REQUEST_ERRORS=o;var s=function(t){var e={};return t.byterange&&(e.Range=function(t){return"bytes="+t.offset+"-"+(t.offset+t.length-1)}(t.byterange)),e},u=function(t){t.forEach(function(t){t.abort()})},l=function(t,e){return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:o.TIMEOUT,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:o.ABORTED,xhr:e}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:o.FAILURE,xhr:e}:null},c=function(t,e){return function(n,r){var i=r.response,a=l(n,r);if(a)return e(a,t);if(16!==i.byteLength)return e({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:o.FAILURE,xhr:r},t);var s=new DataView(i);return t.key.bytes=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),e(null,t)}},h=function(t,e){return function(n,r){var i=r.response,a=l(n,r);return a?e(a,t):0===i.byteLength?e({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:o.FAILURE,xhr:r},t):(t.map.bytes=new Uint8Array(r.response),e(null,t))}},f=function(t,e){return function(n,r){var i=r.response,a=l(n,r);return a?e(a,t):0===i.byteLength?e({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:o.FAILURE,xhr:r},t):(t.stats={bandwidth:r.bandwidth,bytesReceived:r.bytesReceived||0,roundTripTime:r.roundTripTime||0},t.key?t.encryptedBytes=new Uint8Array(r.response):t.bytes=new Uint8Array(r.response),e(null,t))}},d=function(t,e,n){t.addEventListener("message",function r(i){if(i.data.source===e.requestId){t.removeEventListener("message",r);var a=i.data.decrypted;return e.bytes=new Uint8Array(a.bytes,a.byteOffset,a.byteLength),n(null,e)}}),t.postMessage((0,a.createTransferableMessage)({source:e.requestId,encrypted:e.encryptedBytes,key:e.key.bytes,iv:e.key.iv}),[e.encryptedBytes.buffer,e.key.bytes.buffer])},p=function(t,e,n){var r=[],i=0;return function(a,o){if(a&&(u(t),r.push(a)),(i+=1)===t.length){if(o.endOfAllRequests=Date.now(),r.length>0){var s=r.reduce(function(t,e){return e.code>t.code?e:t});return n(s,o)}return o.encryptedBytes?d(e,o,n):n(null,o)}}};n.mediaSegmentRequest=function(t,e,n,r,a,o){var l=[],d=p(l,n,o);if(r.key){var g=t(i.default.mergeOptions(e,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),c(r,d));l.push(g)}if(r.map&&!r.map.bytes){var v=t(i.default.mergeOptions(e,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:s(r.map)}),h(r,d));l.push(v)}var m=t(i.default.mergeOptions(e,{uri:r.resolvedUri,responseType:"arraybuffer",headers:s(r)}),f(r,d));return m.addEventListener("progress",function(t,e){return function(n){return t.stats=i.default.mergeOptions(t.stats,function(t){var e=t.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return n.bytesReceived=t.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n}(n)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),e(n,t)}}(r,a)),l.push(m),function(){return u(l)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(t,e,n){(function(r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=i(t(32)),s=i(t(12)),u=i("undefined"!=typeof window?window.videojs:void 0!==r?r.videojs:null),l=["seeking","seeked","pause","playing","error"],c=function(){function t(e){var n=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.tech_=e.tech,this.seekable=e.seekable,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,e.debug&&(this.logger_=u.default.log.bind(u.default,"playback-watcher ->")),this.logger_("initialize");var r=function(){return n.monitorCurrentTime_()},i=function(){return n.techWaiting_()},a=function(){return n.cancelTimer_()},s=function(){return n.fixesBadSeeks_()};this.tech_.on("seekablechanged",s),this.tech_.on("waiting",i),this.tech_.on(l,a),this.tech_.on("canplay",r),this.dispose=function(){n.logger_("dispose"),n.tech_.off("seekablechanged",s),n.tech_.off("waiting",i),n.tech_.off(l,a),n.tech_.off("canplay",r),n.checkCurrentTimeTimeout_&&o.default.clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}return a(t,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&o.default.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=o.default.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var t=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===t&&(!e.length||t+s.default.SAFE_TIME_DELTA>=e.end(e.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&t===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):t===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=t)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var t=this.tech_.seeking(),e=this.seekable(),n=this.tech_.currentTime(),r=void 0;return t&&this.afterSeekableWindow_(e,n)&&(r=e.end(e.length-1)),t&&this.beforeSeekableWindow_(e,n)&&(r=e.start(0)+s.default.SAFE_TIME_DELTA),void 0!==r&&(this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+s.default.printableRange(e)+". Seeking to "+r+"."),this.tech_.setCurrentTime(r),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var t=this.tech_.currentTime(),e=this.tech_.buffered(),n=s.default.findRange(e,t);return n.length&&t+3<=n.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(t),this.logger_("Stopped at "+t+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var t=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(t,e)){var n=t.end(t.length-1);return this.logger_("Fell out of live window at time "+e+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var r=this.tech_.buffered(),i=s.default.findNextRange(r,e);if(this.videoUnderflow_(i,r,e))return this.cancelTimer_(),this.tech_.setCurrentTime(e),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(i.length>0){var a=i.start(0)-e;return this.logger_("Stopped at "+e+", setting timer for "+a+", seeking to "+i.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,e),!0}return!1}},{key:"afterSeekableWindow_",value:function(t,e){return!!t.length&&e>t.end(t.length-1)+s.default.SAFE_TIME_DELTA}},{key:"beforeSeekableWindow_",value:function(t,e){return!!(t.length&&t.start(0)>0&&e<t.start(0)-s.default.SAFE_TIME_DELTA)}},{key:"videoUnderflow_",value:function(t,e,n){if(0===t.length){var r=this.gapFromVideoUnderflow_(e,n);if(r)return this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+n),!0}return!1}},{key:"skipTheGap_",value:function(t){var e=this.tech_.buffered(),n=this.tech_.currentTime(),r=s.default.findNextRange(e,n);this.cancelTimer_(),0!==r.length&&n===t&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",t,"nextRange start:",r.start(0)),this.tech_.setCurrentTime(r.start(0)+s.default.TIME_FUDGE_FACTOR),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(t,e){for(var n=s.default.findGaps(t),r=0;r<n.length;r++){var i=n.start(r),a=n.end(r);if(e-i<4&&e-i>2)return{start:i,end:a}}return null}},{key:"logger_",value:function(){}}]),t}();n.default=c,e.exports=n.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,n){(function(e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},o=r(t(15)),s="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,u=r(t(33)),l=r(t(32)),c=function(t,e,n){var r=e.slice();n=n||0;for(var i=Math.min(t.length,e.length+n),a=n;a<i;a++)r[a-n]=(0,s.mergeOptions)(t[a],r[a-n]);return r};n.updateSegments=c;var h=function(t,e){t.resolvedUri||(t.resolvedUri=(0,o.default)(e,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=(0,o.default)(e,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=(0,o.default)(e,t.map.uri))};n.resolveSegmentUris=h;var f=function(t,e){var n=(0,s.mergeOptions)(t,{}),r=n.playlists.filter(function(t){return t.uri===e.uri})[0];if(!r)return null;if(r.segments&&e.segments&&r.segments.length===e.segments.length&&r.mediaSequence===e.mediaSequence)return null;var i=(0,s.mergeOptions)(r,e);r.segments&&(i.segments=c(r.segments,e.segments,e.mediaSequence-r.mediaSequence)),i.segments.forEach(function(t){h(t,i.resolvedUri)});for(var a=0;a<n.playlists.length;a++)n.playlists[a].uri===e.uri&&(n.playlists[a]=i);return n.playlists[e.uri]=i,n};n.updateMaster=f;var d=function(t){for(var e=t.playlists.length;e--;){var n=t.playlists[e];t.playlists[n.uri]=n,n.resolvedUri=(0,o.default)(t.uri,n.uri),n.attributes||(n.attributes={},s.log.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}};n.setupMediaPlaylists=d;var p=function(t){["AUDIO","SUBTITLES"].forEach(function(e){for(var n in t.mediaGroups[e])for(var r in t.mediaGroups[e][n]){var i=t.mediaGroups[e][n][r];i.uri&&(i.resolvedUri=(0,o.default)(t.uri,i.uri))}})};n.resolveMediaGroupUris=p;var g=function(t,e){var n=t.segments[t.segments.length-1];return e&&n&&n.duration?1e3*n.duration:500*(t.targetDuration||10)};n.refreshDelay=g;var v=function(t){function e(t,n,r){var i=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.srcUrl=t,this.hls_=n,this.withCredentials=r,!this.srcUrl)throw new Error("A non-empty playlist URL is required");this.state="HAVE_NOTHING",this.on("mediaupdatetimeout",function(){"HAVE_METADATA"===i.state&&(i.state="HAVE_CURRENT_METADATA",i.request=i.hls_.xhr({uri:(0,o.default)(i.master.uri,i.media().uri),withCredentials:i.withCredentials},function(t,e){if(i.request)return t?i.playlistRequestError(i.request,i.media().uri,"HAVE_METADATA"):void i.haveMetadata(i.request,i.media().uri)}))})}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.EventTarget),i(e,[{key:"playlistRequestError",value:function(t,e,n){this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[e],status:t.status,message:"HLS playlist request error at URL: "+e,responseText:t.responseText,code:t.status>=500?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(t,e){var n=this;this.request=null,this.state="HAVE_METADATA";var r=new u.default.Parser;r.push(t.responseText),r.end(),r.manifest.uri=e,r.manifest.attributes=r.manifest.attributes||{};var i=f(this.master,r.manifest);this.targetDuration=r.manifest.targetDuration,i?(this.master=i,this.media_=this.master.playlists[r.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(l.default.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=l.default.setTimeout(function(){n.trigger("mediaupdatetimeout")},g(this.media(),!!i))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest(),l.default.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}},{key:"media",value:function(t){var e=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}var r=!this.media_||t.uri!==this.media_.uri;if(this.master.playlists[t.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(r){if(this.state="SWITCHING_MEDIA",this.request){if((0,o.default)(this.master.uri,t.uri)===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:(0,o.default)(this.master.uri,t.uri),withCredentials:this.withCredentials},function(r,i){if(e.request){if(r)return e.playlistRequestError(e.request,t.uri,n);e.haveMetadata(i,t.uri),e.trigger("HAVE_MASTER"===n?"loadedmetadata":"mediachange")}})}}},{key:"pause",value:function(){this.stopRequest(),l.default.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(t){var e=this;l.default.clearTimeout(this.mediaUpdateTimeout);var n=this.media();t?this.mediaUpdateTimeout=l.default.setTimeout(function(){return e.load()},n?n.targetDuration/2*1e3:5e3):this.started?this.trigger(n&&!n.endList?"mediaupdatetimeout":"loadedplaylist"):this.start()}},{key:"start",value:function(){var t=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(e,n){if(t.request){if(t.request=null,e)return t.error={status:n.status,message:"HLS playlist request error at URL: "+t.srcUrl,responseText:n.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");var r=new u.default.Parser;return r.push(n.responseText),r.end(),t.state="HAVE_MASTER",r.manifest.uri=t.srcUrl,r.manifest.playlists?(t.master=r.manifest,d(t.master),p(t.master),t.trigger("loadedplaylist"),void(t.request||t.media(r.manifest.playlists[0]))):(t.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:l.default.location.href,playlists:[{uri:t.srcUrl}]},t.master.playlists[t.srcUrl]=t.master.playlists[0],t.master.playlists[0].resolvedUri=t.srcUrl,t.master.playlists[0].attributes=t.master.playlists[0].attributes||{},t.haveMetadata(n,t.srcUrl),t.trigger("loadedmetadata"))}})}}]),e}();n.default=v}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(t(3)),a=r(t(11)),o=t(19),s=function(t,e){var n=void 0;return t&&(n=window.getComputedStyle(t))?n[e]:""},u=function(t,e){var n=t.slice();t.sort(function(t,r){var i=e(t,r);return 0===i?n.indexOf(t)-n.indexOf(r):i})},l=function(t,e){var n=void 0,r=void 0;return t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),n=n||window.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(r=e.attributes.BANDWIDTH),n-(r||window.Number.MAX_VALUE)};n.comparePlaylistBandwidth=l,n.comparePlaylistResolution=function(t,e){var n=void 0,r=void 0;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),n=n||window.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(r=e.attributes.RESOLUTION.width),n===(r=r||window.Number.MAX_VALUE)&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:n-r};var c=function(t,e,n,r){var o=t.playlists.map(function(t){return{bandwidth:t.attributes.BANDWIDTH||window.Number.MAX_VALUE,width:t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width,height:t.attributes.RESOLUTION&&t.attributes.RESOLUTION.height,playlist:t}});u(o,function(t,e){return t.bandwidth-e.bandwidth});var s=(o=o.filter(function(t){return!a.default.isIncompatible(t.playlist)})).filter(function(t){return a.default.isEnabled(t.playlist)});s.length||(s=o.filter(function(t){return!a.default.isDisabled(t.playlist)}));var l=s.filter(function(t){return t.bandwidth*i.default.BANDWIDTH_VARIANCE<e}),c=l[l.length-1],h=l.filter(function(t){return t.bandwidth===c.bandwidth})[0],f=l.filter(function(t){return t.width&&t.height});u(f,function(t,e){return t.width-e.width});var d=f.filter(function(t){return t.width===n&&t.height===r});c=d[d.length-1];var p=d.filter(function(t){return t.bandwidth===c.bandwidth})[0],g=void 0,v=void 0,m=void 0;p||(v=(g=f.filter(function(t){return t.width>n||t.height>r})).filter(function(t){return t.width===g[0].width&&t.height===g[0].height}),c=v[v.length-1],m=v.filter(function(t){return t.bandwidth===c.bandwidth})[0]);var y=m||p||h||s[0]||o[0];return y?y.playlist:null};n.simpleSelector=c,n.lastBandwidthSelector=function(){return c(this.playlists.master,this.systemBandwidth,parseInt(s(this.tech_.el(),"width"),10),parseInt(s(this.tech_.el(),"height"),10))},n.movingAverageBandwidthSelector=function(t){var e=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){return e<0&&(e=this.systemBandwidth),c(this.playlists.master,e=t*this.systemBandwidth+(1-t)*e,parseInt(s(this.tech_.el(),"width"),10),parseInt(s(this.tech_.el(),"height"),10))}},n.minRebufferMaxBandwidthSelector=function(t){var e=t.currentTime,n=t.bandwidth,r=t.duration,i=t.segmentDuration,o=t.timeUntilRebuffer,s=t.currentTimeline,c=t.syncController,h=t.master.playlists.filter(function(t){return!a.default.isIncompatible(t)}),f=h.filter(a.default.isEnabled);f.length||(f=h.filter(function(t){return!a.default.isDisabled(t)}));var d=f.filter(a.default.hasAttribute.bind(null,"BANDWIDTH")).map(function(t){var u=c.getSyncPoint(t,r,s,e)?1:2;return{playlist:t,rebufferingImpact:a.default.estimateSegmentRequestTime(i,n,t)*u-o}}),p=d.filter(function(t){return t.rebufferingImpact<=0});return u(p,function(t,e){return l(e.playlist,t.playlist)}),p.length?p[0]:(u(d,function(t,e){return t.rebufferingImpact-e.rebufferingImpact}),d[0]||null)},n.lowestBitrateCompatibleVariantSelector=function(){var t=this.playlists.master.playlists.filter(a.default.isEnabled);return u(t,function(t,e){return l(t,e)}),t.filter(function(t){return(0,o.parseCodecs)(t.attributes.CODECS).videoCodec})[0]||null}},{}],11:[function(t,e,n){(function(e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,i=t(32),a=i&&i.__esModule?i:{default:i},o=function(t,e,n){var r=void 0,i=void 0;return void 0===e&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence?0:(r=function(t,e){var n=0,r=e-t.mediaSequence,i=t.segments[r];if(i){if(void 0!==i.start)return{result:i.start,precise:!0};if(void 0!==i.end)return{result:i.end-i.duration,precise:!0}}for(;r--;){if(void 0!==(i=t.segments[r]).end)return{result:n+i.end,precise:!0};if(n+=i.duration,void 0!==i.start)return{result:n+i.start,precise:!0}}return{result:n,precise:!1}}(t,e)).precise?r.result:(i=function(t,e){for(var n=0,r=void 0,i=e-t.mediaSequence;i<t.segments.length;i++){if(void 0!==(r=t.segments[i]).start)return{result:r.start-n,precise:!0};if(n+=r.duration,void 0!==r.end)return{result:r.end-n,precise:!0}}return{result:-1,precise:!1}}(t,e)).precise?i.result:r.result+n},s=function(t,e,n){if(!t)return 0;if("number"!=typeof n&&(n=0),void 0===e){if(t.totalDuration)return t.totalDuration;if(!t.endList)return a.default.Infinity}return o(t,e,n)};n.duration=s;var u=function(t,e,n){var r=0;if(e>n){var i=[n,e];e=i[0],n=i[1]}if(e<0){for(var a=e;a<Math.min(0,n);a++)r+=t.targetDuration;e=0}for(a=e;a<n;a++)r+=t.segments[a].duration;return r};n.sumDurations=u;var l=function(t){if(!t.segments.length)return 0;for(var e=t.segments.length-1,n=t.segments[e].duration||t.targetDuration,r=n+2*t.targetDuration;e--&&!((n+=t.segments[e].duration)>=r););return Math.max(0,e)};n.safeLiveIndex=l;var c=function(t,e,n){if(!t||!t.segments)return null;if(t.endList)return s(t);if(null===e)return null;e=e||0;var r=n?l(t):t.segments.length;return o(t,t.mediaSequence+r,e)};n.playlistEnd=c;var h=function(t,e){var n=e||0,i=c(t,e,!0);return null===i?(0,r.createTimeRange)():(0,r.createTimeRange)(n,i)};n.seekable=h;var f=function(t){return t-Math.floor(t)==0},d=function(t,e){if(f(e))return e+.1*t;for(var n=e.toString().split(".")[1].length,r=1;r<=n;r++){var i=Math.pow(10,r),a=e*i;if(f(a)||r===n)return(a+t)/i}},p=d.bind(null,1),g=d.bind(null,-1),v=function(t,e,n,r){var i=void 0,a=t.segments.length,o=e-r;if(o<0){if(n>0)for(i=n-1;i>=0;i--)if((o+=g(t.segments[i].duration))>0)return{mediaIndex:i,startTime:r-u(t,n,i)};return{mediaIndex:0,startTime:e}}if(n<0){for(i=n;i<0;i++)if((o-=t.targetDuration)<0)return{mediaIndex:0,startTime:e};n=0}for(i=n;i<a;i++)if((o-=p(t.segments[i].duration))<0)return{mediaIndex:i,startTime:r+u(t,n,i)};return{mediaIndex:a-1,startTime:e}};n.getMediaInfoForTime=v;var m=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()};n.isBlacklisted=m;var y=function(t){return t.excludeUntil&&t.excludeUntil===1/0};n.isIncompatible=y;var _=function(t){var e=m(t);return!t.disabled&&!e};n.isEnabled=_;var b=function(t){return t.disabled};n.isDisabled=b;var x=function(t){for(var e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1};n.isAes=x;var w=function(t){for(var e=0;e<t.segments.length;e++)if(t.segments[e].map)return!0;return!1};n.isFmp4=w;var S=function(t,e){return e.attributes&&e.attributes[t]};n.hasAttribute=S;var T=function(t,e,n){var r=arguments.length<=3||void 0===arguments[3]?0:arguments[3];return S("BANDWIDTH",n)?(t*n.attributes.BANDWIDTH-8*r)/e:NaN};n.estimateSegmentRequestTime=T;var O=function(t,e){if(1===t.playlists.length)return!0;var n=e.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===t.playlists.filter(function(t){return!!_(t)&&(t.attributes.BANDWIDTH||0)<n}).length};n.isLowestEnabledRendition=O,n.default={duration:s,seekable:h,safeLiveIndex:l,getMediaInfoForTime:v,isEnabled:_,isDisabled:b,isBlacklisted:m,isIncompatible:y,playlistEnd:c,isAes:x,isFmp4:w,hasAttribute:S,estimateSegmentRequestTime:T,isLowestEnabledRendition:O}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(t,e,n){(function(t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null,i=r&&r.__esModule?r:{default:r},a=function(t,e){var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(e,2),r=n[1];return Math.min(Math.max(n[0],t),r)},o=function(t,e){var n=[],r=void 0;if(t&&t.length)for(r=0;r<t.length;r++)e(t.start(r),t.end(r))&&n.push([t.start(r),t.end(r)]);return i.default.createTimeRanges(n)},s=function(t,e){var n=null,r=null,a=0,o=[],s=[];if(!(t&&t.length&&e&&e.length))return i.default.createTimeRange();for(var u=t.length;u--;)o.push({time:t.start(u),type:"start"}),o.push({time:t.end(u),type:"end"});for(u=e.length;u--;)o.push({time:e.start(u),type:"start"}),o.push({time:e.end(u),type:"end"});for(o.sort(function(t,e){return t.time-e.time}),u=0;u<o.length;u++)"start"===o[u].type?2==++a&&(n=o[u].time):"end"===o[u].type&&1==--a&&(r=o[u].time),null!==n&&null!==r&&(s.push([n,r]),n=null,r=null);return i.default.createTimeRanges(s)};n.default={findRange:function(t,e){return o(t,function(t,n){return t-1/30<=e&&n+1/30>=e})},findNextRange:function(t,e){return o(t,function(t){return t-1/30>=e})},findGaps:function(t){if(t.length<2)return i.default.createTimeRanges();for(var e=[],n=1;n<t.length;n++){var r=t.end(n-1),a=t.start(n);e.push([r,a])}return i.default.createTimeRanges(e)},findSoleUncommonTimeRangesEnd:function(t,e){var n=void 0,r=void 0,i=void 0,a=[],o=[],s=function(t){return t[0]<=i&&t[1]>=i};if(t)for(n=0;n<t.length;n++)r=t.start(n),i=t.end(n),o.push([r,i]);if(e)for(n=0;n<e.length;n++)r=e.start(n),i=e.end(n),o.some(s)||a.push(i);return 1!==a.length?null:a[0]},getSegmentBufferedPercent:function(t,e,n,r){var o=t+e,u=i.default.createTimeRanges([[t,o]]),l=i.default.createTimeRanges([[a(t,[n,o]),o]]);if(l.start(0)===l.end(0))return 0;var c=function(t,e,n,r){for(var i=e.end(0)-e.start(0),a=i-(t.end(0)-t.start(0)),o=s(t,r),u=s(e,r),l=0,c=0,h=o.length;h--;)l+=o.end(h)-o.start(h),o.start(h)===n&&(l+=a);for(h=u.length;h--;)c+=u.end(h)-u.start(h);return Math.max(l,c)/i*100}(l,u,n,r);return isNaN(c)||c===1/0||c===-1/0?0:c},TIME_FUDGE_FACTOR:1/30,SAFE_TIME_DELTA:.1,printableRange:function(t){var e=[];if(!t||!t.length)return"";for(var n=0;n<t.length;n++)e.push(t.start(n)+" => "+t.end(n));return e.join(", ")},timeUntilRebuffer:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return((t.length?t.end(t.length-1):0)-e)/n}},e.exports=n.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(t,e,n){(function(t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null,i=r&&r.__esModule?r:{default:r},a={errorInterval:30,getSource:function(t){return t(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}};n.default=function(t){!function t(e,n){var r=0,o=0,s=i.default.mergeOptions(a,n);e.ready(function(){e.trigger({type:"usage",name:"hls-error-reload-initialized"})});var u=function(){o&&e.currentTime(o)},l=function(t){null!==t&&void 0!==t&&(o=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",u),e.src(t),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},c=function(){return Date.now()-r<1e3*s.errorInterval?void e.trigger({type:"usage",name:"hls-error-reload-canceled"}):s.getSource&&"function"==typeof s.getSource?(r=Date.now(),s.getSource.call(e,l)):void i.default.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},h=function t(){e.off("loadedmetadata",u),e.off("error",c),e.off("dispose",t)};e.on("error",c),e.on("dispose",h),e.reloadSourceOnError=function(n){h(),t(e,n)}}(this,t)},e.exports=n.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(11),i=function(t,e,n){return function(i){var a=t.master.playlists[e],o=(0,r.isIncompatible)(a),s=(0,r.isEnabled)(a);return void 0===i?s:(i?delete a.disabled:a.disabled=!0,i===s||o||(n(),t.trigger(i?"renditionenabled":"renditiondisabled")),i)}};n.default=function(t){var e=t.playlists;t.representations=function(){return e.master.playlists.filter(function(t){return!(0,r.isIncompatible)(t)}).map(function(e,n){return new function t(e,n,r){!function(e,n){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this);var a=e.masterPlaylistController_.fastQualityChange_.bind(e.masterPlaylistController_);if(n.attributes.RESOLUTION){var o=n.attributes.RESOLUTION;this.width=o.width,this.height=o.height}this.bandwidth=n.attributes.BANDWIDTH,this.id=r,this.enabled=i(e.playlists,n.uri,a)}(t,e,e.uri)})}},e.exports=n.default},{}],15:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(t(63)),a=r(t(32));n.default=function(t,e){return/^[a-z]+:/i.test(e)?e:(/\/\//i.test(t)||(t=i.default.buildAbsoluteURL(a.default.location.href,t)),i.default.buildAbsoluteURL(t,e))},e.exports=n.default},{}],16:[function(t,e,n){(function(e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},o=r(t(11)),s=r("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),u=r(t(17)),l=r(t(3)),c=r(t(32)),h=r(t(72)),f=t(2),d=t(7),p=t(12),g=t(10),v=function(t,e,n){return!(!t||!e)&&t.endList&&"open"===e.readyState&&n===t.segments.length},m=function(t){return"number"==typeof t&&isFinite(t)},y=function(t,e,n){return"main"===t&&e&&n?n.containsAudio||n.containsVideo?e.containsVideo&&!n.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.containsVideo&&n.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null};n.illegalMediaSwitch=y;var _=function(t,e,n){var r;return r=t.length&&t.start(0)>0&&t.start(0)<e?t.start(0):e-30,Math.min(r,e-n)};n.safeBackBufferTrimTime=_;var b=function(t){function e(t){var n=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");this.state="INIT",this.bandwidth=t.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.hasPlayed_=t.hasPlayed,this.currentTime_=t.currentTime,this.seekable_=t.seekable,this.seeking_=t.seeking,this.duration_=t.duration,this.mediaSource_=t.mediaSource,this.hls_=t.hls,this.loaderType_=t.loaderType,this.startingMedia_=void 0,this.segmentMetadataTrack_=t.segmentMetadataTrack,this.goalBufferLength_=t.goalBufferLength,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.mimeType_=null,this.sourceUpdater_=null,this.xhrOptions_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.decrypter_=t.decrypter,this.syncController_=t.syncController,this.syncPoint_={segmentIndex:0,time:0},this.syncController_.on("syncinfoupdate",function(){return n.trigger("syncinfoupdate")}),this.mediaSource_.addEventListener("sourceopen",function(){return n.ended_=!1}),this.fetchAtBuffer_=!1,r.debug&&(this.logger_=s.default.log.bind(s.default,"segment-loader",this.loaderType_,"->"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default.EventTarget),i(e,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_()}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(t){return void 0!==t&&(this.error_=t),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():s.default.createTimeRanges()}},{key:"initSegment",value:function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(!t)return null;var n=(0,f.initSegmentId)(t),r=this.initSegments_[n];return e&&!r&&t.bytes&&(this.initSegments_[n]=r={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes}),r||t}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new u.default(this.mediaSource_,this.mimeType_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(t){var n=this.playlist_,r=this.pendingSegment_;if(this.playlist_=t,this.xhrOptions_=e,this.hasPlayed_()||(t.syncInfo={mediaSequence:t.mediaSequence,time:0}),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==t.uri)return void(null!==this.mediaIndex&&this.resyncLoader());var i=t.mediaSequence-n.mediaSequence;this.logger_("mediaSequenceDiff",i),null!==this.mediaIndex&&(this.mediaIndex-=i),r&&(r.mediaIndex-=i,r.mediaIndex>=0&&(r.segment=t.segments[r.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(n,t)}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(c.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(t){this.mimeType_||(this.mimeType_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_()),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(t,e){this.sourceUpdater_&&this.sourceUpdater_.remove(t,e),(0,h.default)(t,e,this.segmentMetadataTrack_)}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&c.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=c.default.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&c.default.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=c.default.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t){if(v(this.playlist_,this.mediaSource_,t.mediaIndex))return void this.endOfStream();(t.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&((t.timeline!==this.currentTimeline_||null!==t.startOfSegment&&t.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),t.timestampOffset=t.startOfSegment),this.loadSegment_(t))}}}},{key:"checkBuffer_",value:function(t,e,n,r,i,a){var s=0,u=void 0;t.length&&(s=t.end(t.length-1));var l,c=Math.max(0,s-i);if(!e.segments.length)return null;if(c>=this.goalBufferLength_())return null;if(!r&&c>=1)return null;if(this.logger_("checkBuffer_","mediaIndex:",n,"hasPlayed:",r,"currentTime:",i,"syncPoint:",a,"fetchAtBuffer:",this.fetchAtBuffer_,"bufferedTime:",c),null===a)return n=this.getSyncSegmentCandidate_(e),this.logger_("getSync","mediaIndex:",n),this.generateSegmentInfo_(e,n,null,!0);if(null!==n){this.logger_("walkForward","mediaIndex:",n+1);var h=e.segments[n];return this.generateSegmentInfo_(e,n+1,u=h&&h.end?h.end:s,!1)}return this.fetchAtBuffer_?(n=(l=o.default.getMediaInfoForTime(e,s,a.segmentIndex,a.time)).mediaIndex,u=l.startTime):(n=(l=o.default.getMediaInfoForTime(e,i,a.segmentIndex,a.time)).mediaIndex,u=l.startTime),this.logger_("getMediaIndexForTime","mediaIndex:",n,"startOfSegment:",u),this.generateSegmentInfo_(e,n,u,!1)}},{key:"getSyncSegmentCandidate_",value:function(t){var e=this;if(-1===this.currentTimeline_)return 0;var n=t.segments.map(function(t,e){return{timeline:t.timeline,segmentIndex:e}}).filter(function(t){return t.timeline===e.currentTimeline_});return n.length?n[Math.min(n.length-1,1)].segmentIndex:Math.max(t.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(t,e,n,r){if(e<0||e>=t.segments.length)return null;var i=t.segments[e];return{requestId:"segment-loader-"+Math.random(),uri:i.resolvedUri,mediaIndex:e,isSyncRequest:r,startOfSegment:n,playlist:t,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:i.timeline,duration:i.duration,segment:i}}},{key:"abortRequestEarly_",value:function(t){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)return!1;var e=this.currentTime_(),n=t.bandwidth,r=this.pendingSegment_.duration,i=o.default.estimateSegmentRequestTime(r,n,this.playlist_,t.bytesReceived),a=(0,p.timeUntilRebuffer)(this.buffered_(),e,this.hls_.tech_.playbackRate())-1;if(i<=a)return!1;var s=(0,g.minRebufferMaxBandwidthSelector)({master:this.hls_.playlists.master,currentTime:e,bandwidth:n,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var u=.5;return a<=p.TIME_FUDGE_FACTOR&&(u=1),!(!s.playlist||s.playlist.uri===this.playlist_.uri||i-a-s.rebufferingImpact<u||(this.bandwidth=s.playlist.attributes.BANDWIDTH*l.default.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),0))}}},{key:"handleProgress_",value:function(t,e){this.pendingSegment_&&e.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(e.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(t){this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),t.abortRequests=(0,d.mediaSegmentRequest)(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.createSimplifiedSegmentObj_(t),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(t){var e=_(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);e>0&&this.remove(0,e)}},{key:"createSimplifiedSegmentObj_",value:function(t){var e=t.segment,n={resolvedUri:e.resolvedUri,byterange:e.byterange,requestId:t.requestId};if(e.key){var r=e.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);n.key={resolvedUri:e.key.resolvedUri,iv:r}}return e.map&&(n.map=this.initSegment(e.map)),n}},{key:"segmentRequestFinished_",value:function(t,e){if(this.mediaRequests+=1,e.stats&&(this.mediaBytesTransferred+=e.stats.bytesReceived,this.mediaTransferDuration+=e.stats.roundTripTime),this.pendingSegment_){if(e.requestId===this.pendingSegment_.requestId){if(t)return this.pendingSegment_=null,this.state="READY",t.code===d.REQUEST_ERRORS.ABORTED?void(this.mediaRequestsAborted+=1):(this.pause(),t.code===d.REQUEST_ERRORS.TIMEOUT?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error")));this.bandwidth=e.stats.bandwidth,this.roundTrip=e.stats.roundTripTime,e.map&&(e.map=this.initSegment(e.map,!0)),this.processSegmentResponse_(e)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(t){var e=this.pendingSegment_;e.bytes=t.bytes,t.map&&(e.segment.map.bytes=t.map.bytes),e.endOfAllRequests=t.endOfAllRequests,this.handleSegment_()}},{key:"handleSegment_",value:function(){var t=this;if(this.pendingSegment_){var e=this.pendingSegment_,n=e.segment,r=this.syncController_.probeSegmentInfo(e);void 0===this.startingMedia_&&r&&(r.containsAudio||r.containsVideo)&&(this.startingMedia_={containsAudio:r.containsAudio,containsVideo:r.containsVideo});var i=y(this.loaderType_,this.startingMedia_,r);if(i)return this.error({message:i,blacklistDuration:1/0}),void this.trigger("error");if(e.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==e.timestampOffset&&e.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(e.timestampOffset),this.trigger("timestampoffset"));var a=this.syncController_.mappingForTimeline(e.timeline);null!==a&&this.trigger({type:"segmenttimemapping",mapping:a}),this.state="APPENDING",n.map&&function(){var e=(0,f.initSegmentId)(n.map);if(!t.activeInitSegmentId_||t.activeInitSegmentId_!==e){var r=t.initSegment(n.map);t.sourceUpdater_.appendBuffer(r.bytes,function(){t.activeInitSegmentId_=e})}}(),e.byteLength=e.bytes.byteLength,this.mediaSecondsLoaded+="number"==typeof n.start&&"number"==typeof n.end?n.end-n.start:n.duration,this.sourceUpdater_.appendBuffer(e.bytes,this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleUpdateEnd_",value:function(){if(this.logger_("handleUpdateEnd_","segmentInfo:",this.pendingSegment_),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var t=this.pendingSegment_,e=t.segment,n=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(t),this.addSegmentMetadataCue_(t),this.state="READY",this.mediaIndex=t.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate"),e.end&&this.currentTime_()-e.end>3*t.playlist.targetDuration?this.resetEverything():(n&&this.trigger("bandwidthupdate"),this.trigger("progress"),v(t.playlist,this.mediaSource_,t.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(t){var e=this.throughput.rate,n=Date.now()-t.endOfAllRequests+1,r=Math.floor(t.byteLength/n*8*1e3);this.throughput.rate+=(r-e)/++this.throughput.count}},{key:"logger_",value:function(){}},{key:"addSegmentMetadataCue_",value:function(t){if(this.segmentMetadataTrack_){var e=t.segment,n=e.start,r=e.end;if(m(n)&&m(r)){(0,h.default)(n,r,this.segmentMetadataTrack_);var i={bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.uri,start:n,end:r},a=new(c.default.WebKitDataCue||c.default.VTTCue)(n,r,JSON.stringify(i));a.value=i,this.segmentMetadataTrack_.addCue(a)}}}}]),e}();n.default=b}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(t,e,n){(function(t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i="undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null,a=i&&i.__esModule?i:{default:i},o=function(){},s=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(){r.sourceBuffer_=e.addSourceBuffer(n),r.onUpdateendCallback_=function(){var t=r.pendingCallback_;r.pendingCallback_=null,t&&t(),r.runCallback_()},r.sourceBuffer_.addEventListener("updateend",r.onUpdateendCallback_),r.runCallback_()};this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=e,this.processedAppend_=!1,"closed"===e.readyState?e.addEventListener("sourceopen",i):i()}return r(t,[{key:"abort",value:function(t){var e=this;this.processedAppend_&&this.queueCallback_(function(){e.sourceBuffer_.abort()},t)}},{key:"appendBuffer",value:function(t,e){var n=this;this.processedAppend_=!0,this.queueCallback_(function(){n.sourceBuffer_.appendBuffer(t)},e)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:a.default.createTimeRanges()}},{key:"remove",value:function(t,e){var n=this;this.processedAppend_&&this.queueCallback_(function(){n.sourceBuffer_.remove(t,e)},o)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function(t){var e=this;return void 0!==t&&(this.queueCallback_(function(){e.sourceBuffer_.timestampOffset=t}),this.timestampOffset_=t),this.timestampOffset_}},{key:"queueCallback_",value:function(t,e){this.callbacks_.push([t.bind(this),e]),this.runCallback_()}},{key:"runCallback_",value:function(){var t=void 0;!this.updating()&&this.callbacks_.length&&(t=this.callbacks_.shift(),this.pendingCallback_=t[1],t[0]())}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]),t}();n.default=s,e.exports=n.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(t,e,n){(function(e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},o=r(t(57)),s=t(59),u=t(11),l=r("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),c=[{name:"VOD",run:function(t,e,n,r,i){return n!==1/0?{time:0,segmentIndex:0}:null}},{name:"ProgramDateTime",run:function(t,e,n,r,i){return t.datetimeToDisplayTime&&e.dateTimeObject?{time:e.dateTimeObject.getTime()/1e3+t.datetimeToDisplayTime,segmentIndex:0}:null}},{name:"Segment",run:function(t,e,n,r,i){var a=e.segments||[],o=null,s=null;i=i||0;for(var u=0;u<a.length;u++){var l=a[u];if(l.timeline===r&&void 0!==l.start){var c=Math.abs(i-l.start);if(null!==s&&s<c)break;(!o||null===s||s>=c)&&(s=c,o={time:l.start,segmentIndex:u})}}return o}},{name:"Discontinuity",run:function(t,e,n,r,i){var a=null;if(i=i||0,e.discontinuityStarts&&e.discontinuityStarts.length)for(var o=null,s=0;s<e.discontinuityStarts.length;s++){var u=e.discontinuityStarts[s],l=t.discontinuities[e.discontinuitySequence+s+1];if(l){var c=Math.abs(i-l.time);if(null!==o&&o<c)break;(!a||null===o||o>=c)&&(o=c,a={time:l.time,segmentIndex:u})}}return a}},{name:"Playlist",run:function(t,e,n,r,i){return e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence}:null}}];n.syncPointStrategies=c;var h=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.inspectCache_=void 0,this.timelines=[],this.discontinuities=[],this.datetimeToDisplayTime=null,t.debug&&(this.logger_=l.default.log.bind(l.default,"sync-controller ->"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l.default.EventTarget),i(e,[{key:"getSyncPoint",value:function(t,e,n,r){var i=this.runStrategies_(t,e,n,r);return i.length?this.selectSyncPoint_(i,{key:"time",value:r}):null}},{key:"getExpiredTime",value:function(t,e){if(!t||!t.segments)return null;var n=this.runStrategies_(t,e,t.discontinuitySequence,0);if(!n.length)return null;var r=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+(0,u.sumDurations)(t,r.segmentIndex,0))}},{key:"runStrategies_",value:function(t,e,n,r){for(var i=[],a=0;a<c.length;a++){var o=c[a],s=o.run(this,t,e,n,r);s&&(s.strategy=o.name,i.push({strategy:o.name,syncPoint:s}),this.logger_("syncPoint found via <"+o.name+">:",s))}return i}},{key:"selectSyncPoint_",value:function(t,e){for(var n=t[0].syncPoint,r=Math.abs(t[0].syncPoint[e.key]-e.value),i=t[0].strategy,a=1;a<t.length;a++){var o=Math.abs(t[a].syncPoint[e.key]-e.value);o<r&&(r=o,n=t[a].syncPoint,i=t[a].strategy)}return this.logger_("syncPoint with strategy <"+i+"> chosen: ",n),n}},{key:"saveExpiredSegmentInfo",value:function(t,e){for(var n=e.mediaSequence-t.mediaSequence-1;n>=0;n--){var r=t.segments[n];if(r&&void 0!==r.start){e.syncInfo={mediaSequence:t.mediaSequence+n,time:r.start},this.logger_("playlist sync:",e.syncInfo),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(t){if(!this.datetimeToDisplayTime&&t.dateTimeObject){var e=t.dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-e}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(t){var e,n=t.segment,r=t.playlist;return(e=n.map?this.probeMp4Segment_(t):this.probeTsSegment_(t))&&this.calculateSegmentTimeMapping_(t,e)&&(this.saveDiscontinuitySyncInfo_(t),r.syncInfo||(r.syncInfo={mediaSequence:r.mediaSequence+t.mediaIndex,time:n.start})),e}},{key:"probeMp4Segment_",value:function(t){var e=t.segment,n=o.default.timescale(e.map.bytes),r=o.default.startTime(n,t.bytes);return null!==t.timestampOffset&&(t.timestampOffset-=r),{start:r,end:r+e.duration}}},{key:"probeTsSegment_",value:function(t){var e=(0,s.inspect)(t.bytes,this.inspectCache_),n=void 0,r=void 0;return e?(e.video&&2===e.video.length?(this.inspectCache_=e.video[1].dts,n=e.video[0].dtsTime,r=e.video[1].dtsTime):e.audio&&2===e.audio.length&&(this.inspectCache_=e.audio[1].dts,n=e.audio[0].dtsTime,r=e.audio[1].dtsTime),{start:n,end:r,containsVideo:e.video&&2===e.video.length,containsAudio:e.audio&&2===e.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(t){return void 0===this.timelines[t]?null:this.timelines[t].time}},{key:"mappingForTimeline",value:function(t){return void 0===this.timelines[t]?null:this.timelines[t].mapping}},{key:"calculateSegmentTimeMapping_",value:function(t,e){var n=t.segment,r=this.timelines[t.timeline];if(null!==t.timestampOffset)this.logger_("tsO:",t.timestampOffset),this.timelines[t.timeline]=r={time:t.startOfSegment,mapping:t.startOfSegment-e.start},this.trigger("timestampoffset"),n.start=t.startOfSegment,n.end=e.end+r.mapping;else{if(!r)return!1;n.start=e.start+r.mapping,n.end=e.end+r.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(t){var e=t.playlist,n=t.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(e.discontinuityStarts.length)for(var r=0;r<e.discontinuityStarts.length;r++){var i,a=e.discontinuityStarts[r],o=e.discontinuitySequence+r+1,s=a-t.mediaIndex,l=Math.abs(s);(!this.discontinuities[o]||this.discontinuities[o].accuracy>l)&&(i=s<0?n.start-(0,u.sumDurations)(e,t.mediaIndex,a):n.end+(0,u.sumDurations)(e,t.mediaIndex+1,a),this.discontinuities[o]={time:i,accuracy:l})}}},{key:"logger_",value:function(){}}]),e}();n.default=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.parseCodecs=function(){var t,e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],n={codecCount:0};return n.codecCount=e.split(",").length,n.codecCount=n.codecCount||2,(t=/(^|\s|,)+(avc1)([^ ,]*)/i.exec(e))&&(n.videoCodec=t[2],n.videoObjectTypeIndicator=t[3]),n.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(e),n.audioProfile=n.audioProfile&&n.audioProfile[2],n}},{}],20:[function(t,e,n){(function(r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},s=i(t(16)),u=i("undefined"!=typeof window?window.videojs:void 0!==r?r.videojs:null),l=i(t(32)),c=i(t(72)),h=t(2),f=new Uint8Array("\n\n".split("").map(function(t){return t.charCodeAt(0)})),d=function(t){return String.fromCharCode.apply(null,t)},p=function(t){function e(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n),this.mediaSource_=null,this.subtitlesTrack_=null}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,s.default),a(e,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return u.default.createTimeRanges();var t=this.subtitlesTrack_.cues;return u.default.createTimeRanges([[t[0].startTime,t[t.length-1].startTime]])}},{key:"initSegment",value:function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(!t)return null;var n=(0,h.initSegmentId)(t),r=this.initSegments_[n];if(e&&!r&&t.bytes){var i=new Uint8Array(f.byteLength+t.bytes.byteLength);i.set(t.bytes),i.set(f,t.bytes.byteLength),this.initSegments_[n]=r={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:i}}return r||t}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(t){return void 0===t?this.subtitlesTrack_:(this.subtitlesTrack_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}},{key:"remove",value:function(t,e){(0,c.default)(t,e,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var t=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(e=this.skipEmptySegments_(e)){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline))return this.syncController_.one("timestampoffset",function(){t.state="READY",t.paused()||t.monitorBuffer_()}),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(e)}}},{key:"skipEmptySegments_",value:function(t){for(;t&&t.segment.empty;)t=this.generateSegmentInfo_(t.playlist,t.mediaIndex+1,t.startOfSegment+t.duration,t.isSyncRequest);return t}},{key:"handleSegment_",value:function(){var t=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var e=this.pendingSegment_,n=e.segment;if("function"!=typeof l.default.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var r=function(){var e=function(){t.handleSegment_()};return t.state="WAITING_ON_VTTJS",t.subtitlesTrack_.tech_.one("vttjsloaded",e),t.subtitlesTrack_.tech_.one("vttjserror",function(){t.subtitlesTrack_.tech_.off("vttjsloaded",e),t.error({message:"Error loading vtt.js"}),t.state="READY",t.pause(),t.trigger("error")}),{v:void 0}}();if("object"==typeof r)return r.v}n.requested=!0;try{this.parseVTTCues_(e)}catch(t){return this.error({message:t.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(e,this.syncController_.timelines[e.timeline],this.playlist_),e.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");e.byteLength=e.bytes.byteLength,this.mediaSecondsLoaded+=n.duration,e.cues.length&&this.remove(e.cues[0].endTime,e.cues[e.cues.length-1].endTime),e.cues.forEach(function(e){t.subtitlesTrack_.addCue(e)}),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function(t){var e=void 0,n=!1;"function"==typeof l.default.TextDecoder?e=new l.default.TextDecoder("utf8"):(e=l.default.WebVTT.StringDecoder(),n=!0);var r=new l.default.WebVTT.Parser(l.default,l.default.vttjs,e);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=t.cues.push.bind(t.cues),r.ontimestampmap=function(e){return t.timestampmap=e},r.onparsingerror=function(t){u.default.log.warn("Error encountered when parsing cues: "+t.message)},t.segment.map){var i=t.segment.map.bytes;n&&(i=d(i)),r.parse(i)}var a=t.bytes;n&&(a=d(a)),r.parse(a),r.flush()}},{key:"updateTimeMapping_",value:function(t,e,n){var r=t.segment;if(e){if(!t.cues.length)return void(r.empty=!0);var i=t.timestampmap,a=i.MPEGTS/9e4-i.LOCAL+e.mapping;t.cues.forEach(function(t){t.startTime+=a,t.endTime+=a}),n.syncInfo||(n.syncInfo={mediaSequence:n.mediaSequence+t.mediaIndex,time:Math.min(t.cues[0].startTime,t.cues[t.cues.length-1].startTime-r.duration)})}}}]),e}();n.default=p,e.exports=n.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(t,e,n){(function(t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null,i=r&&r.__esModule?r:{default:r};n.default=function(){return function t(e,n){e=(0,r.mergeOptions)({timeout:45e3},e);var a=t.beforeRequest||i.default.Hls.xhr.beforeRequest;if(a&&"function"==typeof a){var o=a(e);o&&(e=o)}var s=(0,r.xhr)(e,function(t,e){var r=s.response;!t&&r&&(s.responseTime=Date.now(),s.roundTripTime=s.responseTime-s.requestTime,s.bytesReceived=r.byteLength||r.length,s.bandwidth||(s.bandwidth=Math.floor(s.bytesReceived/s.roundTripTime*8*1e3))),t&&"ETIMEDOUT"===t.code&&(s.timedout=!0),t||s.aborted||200===e.statusCode||206===e.statusCode||0===e.statusCode||(t=new Error("XHR Failed with a response of: "+(s&&(r||s.responseText)))),n(t,s)}),u=s.abort;return s.abort=function(){return s.aborted=!0,u.apply(s,arguments)},s.uri=e.uri,s.requestTime=Date.now(),s}},e.exports=n.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],22:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){var t=[[[],[],[],[],[]],[[],[],[],[],[]]],e=t[0],n=t[1],r=e[4],i=n[4],a=void 0,o=void 0,s=void 0,u=[],l=[],c=void 0,h=void 0,f=void 0,d=void 0,p=void 0;for(a=0;a<256;a++)l[(u[a]=a<<1^283*(a>>7))^a]=a;for(o=s=0;!r[o];o^=c||1,s=l[s]||1)for(r[o]=f=(f=s^s<<1^s<<2^s<<3^s<<4)>>8^255&f^99,i[f]=o,p=16843009*u[h=u[c=u[o]]]^65537*h^257*c^16843008*o,d=257*u[f]^16843008*f,a=0;a<4;a++)e[a][o]=d=d<<24^d>>>8,n[a][f]=p=p<<24^p>>>8;for(a=0;a<5;a++)e[a]=e[a].slice(0),n[a]=n[a].slice(0);return t},a=null,o=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),a||(a=i()),this._tables=[[a[0][0].slice(),a[0][1].slice(),a[0][2].slice(),a[0][3].slice(),a[0][4].slice()],[a[1][0].slice(),a[1][1].slice(),a[1][2].slice(),a[1][3].slice(),a[1][4].slice()]];var n=void 0,r=void 0,o=void 0,s=void 0,u=void 0,l=this._tables[0][4],c=this._tables[1],h=e.length,f=1;if(4!==h&&6!==h&&8!==h)throw new Error("Invalid aes key size");for(s=e.slice(0),this._key=[s,u=[]],n=h;n<4*h+28;n++)o=s[n-1],(n%h==0||8===h&&n%h==4)&&(o=l[o>>>24]<<24^l[o>>16&255]<<16^l[o>>8&255]<<8^l[255&o],n%h==0&&(o=o<<8^o>>>24^f<<24,f=f<<1^283*(f>>7))),s[n]=s[n-h]^o;for(r=0;n;r++,n--)o=s[3&r?n:n-4],u[r]=n<=4||r<4?o:c[0][l[o>>>24]]^c[1][l[o>>16&255]]^c[2][l[o>>8&255]]^c[3][l[255&o]]}return r(t,[{key:"decrypt",value:function(t,e,n,r,i,a){var o=this._key[1],s=t^o[0],u=r^o[1],l=n^o[2],c=e^o[3],h=void 0,f=void 0,d=void 0,p=o.length/4-2,g=void 0,v=4,m=this._tables[1],y=m[0],_=m[1],b=m[2],x=m[3],w=m[4];for(g=0;g<p;g++)h=y[s>>>24]^_[u>>16&255]^b[l>>8&255]^x[255&c]^o[v],f=y[u>>>24]^_[l>>16&255]^b[c>>8&255]^x[255&s]^o[v+1],d=y[l>>>24]^_[c>>16&255]^b[s>>8&255]^x[255&u]^o[v+2],c=y[c>>>24]^_[s>>16&255]^b[u>>8&255]^x[255&l]^o[v+3],v+=4,s=h,u=f,l=d;for(g=0;g<4;g++)i[(3&-g)+a]=w[s>>>24]<<24^w[u>>16&255]<<16^w[l>>8&255]<<8^w[255&c]^o[v++],h=s,s=u,u=l,l=c,c=h}}]),t}();n.default=o,e.exports=n.default},{}],23:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},a=t(26),o=a&&a.__esModule?a:{default:a},s=function(t){function e(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),i(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,o.default),this.jobs=[],this.delay=1,this.timeout_=null}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),r(e,[{key:"processJob_",value:function(){this.jobs.shift()(),this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null}},{key:"push",value:function(t){this.jobs.push(t),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}]),e}();n.default=s,e.exports=n.default},{}],24:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=r(t(22)),o=r(t(23)),s=t(28),u=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},l=function(t,e,n){var r=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),i=new a.default(Array.prototype.slice.call(e)),o=new Uint8Array(t.byteLength),s=new Int32Array(o.buffer),l=void 0,c=void 0,h=void 0,f=void 0,d=void 0,p=void 0,g=void 0,v=void 0,m=void 0;for(l=n[0],c=n[1],h=n[2],f=n[3],m=0;m<r.length;m+=4)d=u(r[m]),p=u(r[m+1]),g=u(r[m+2]),v=u(r[m+3]),i.decrypt(d,p,g,v,s,m),s[m]=u(s[m]^l),s[m+1]=u(s[m+1]^c),s[m+2]=u(s[m+2]^h),s[m+3]=u(s[m+3]^f),l=d,c=p,h=g,f=v;return o};n.decrypt=l;var c=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var a=t.STEP,l=new Int32Array(e.buffer),c=new Uint8Array(e.byteLength),h=0;for(this.asyncStream_=new o.default,this.asyncStream_.push(this.decryptChunk_(l.subarray(h,h+a),n,r,c)),h=a;h<l.length;h+=a)r=new Uint32Array([u(l[h-4]),u(l[h-3]),u(l[h-2]),u(l[h-1])]),this.asyncStream_.push(this.decryptChunk_(l.subarray(h,h+a),n,r,c));this.asyncStream_.push(function(){i(null,(0,s.unpad)(c))})}return i(t,[{key:"decryptChunk_",value:function(t,e,n,r){return function(){var i=l(t,e,n);r.set(i,t.byteOffset)}}}],[{key:"STEP",get:function(){return 32e3}}]),t}();n.Decrypter=c,n.default={Decrypter:c,decrypt:l}},{}],25:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(24),i=t(23);n.default={decrypt:r.decrypt,Decrypter:r.Decrypter,AsyncStream:(i&&i.__esModule?i:{default:i}).default},e.exports=n.default},{}],26:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.listeners={}}return r(t,[{key:"on",value:function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"off",value:function(t,e){var n=void 0;return!!this.listeners[t]&&(n=this.listeners[t].indexOf(e),this.listeners[t].splice(n,1),n>-1)}},{key:"trigger",value:function(t){var e=void 0,n=void 0,r=void 0,i=void 0;if(e=this.listeners[t])if(2===arguments.length)for(r=e.length,n=0;n<r;++n)e[n].call(this,arguments[1]);else for(i=Array.prototype.slice.call(arguments,1),r=e.length,n=0;n<r;++n)e[n].apply(this,i)}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(t){this.on("data",function(e){t.push(e)})}}]),t}();n.default=i,e.exports=n.default},{}],27:[function(t,e,n){"use strict";var r;e.exports=function(t){var e=r[t.byteLength%16||0],n=new Uint8Array(t.byteLength+e.length);return n.set(t),n.set(e,t.byteLength),n},r=[[16,16,16,16,16,16,16,16,16,16,16,16,16,16,16,16],[15,15,15,15,15,15,15,15,15,15,15,15,15,15,15],[14,14,14,14,14,14,14,14,14,14,14,14,14,14],[13,13,13,13,13,13,13,13,13,13,13,13,13],[12,12,12,12,12,12,12,12,12,12,12,12],[11,11,11,11,11,11,11,11,11,11,11],[10,10,10,10,10,10,10,10,10,10],[9,9,9,9,9,9,9,9,9],[8,8,8,8,8,8,8,8],[7,7,7,7,7,7,7],[6,6,6,6,6,6],[5,5,5,5,5],[4,4,4,4],[3,3,3],[2,2],[1]]},{}],28:[function(t,e,n){"use strict";n.pad=t(27),n.unpad=t(29)},{}],29:[function(t,e,n){"use strict";e.exports=function(t){return t.subarray(0,t.byteLength-t[t.byteLength-1])}},{}],30:[function(t,e,n){},{}],31:[function(t,e,n){(function(n){var r,i=void 0!==n?n:"undefined"!=typeof window?window:{},a=t(30);"undefined"!=typeof document?r=document:(r=i["__GLOBAL_DOCUMENT_CACHE@4"])||(r=i["__GLOBAL_DOCUMENT_CACHE@4"]=a),e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],32:[function(t,e,n){(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],33:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=r(t(34)),a=r(t(35)),o=r(t(36));e.exports={LineStream:i.default,ParseStream:a.default,Parser:o.default}},{}],34:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=t(37),a=i&&i.__esModule?i:{default:i},o=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.buffer="",t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"push",value:function(t){var e=void 0;for(this.buffer+=t,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)}}]),e}();n.default=o},{}],35:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=t(37),a=i&&i.__esModule?i:{default:i},o=function(t){for(var e=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),n={},r=e.length,i=void 0;r--;)""!==e[r]&&((i=/([^=]*)=(.*)/.exec(e[r]).slice(1))[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),n[i[0]]=i[1]);return n},s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,a.default),r(e,[{key:"push",value:function(t){var e=void 0,n=void 0;if(0!==(t=t.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"")).length){if("#"!==t[0])return void this.trigger("data",{type:"uri",uri:t});if(0!==t.indexOf("#EXT"))return void this.trigger("data",{type:"comment",text:t.slice(1)});if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))return void this.trigger("data",{type:"tag",tagType:"m3u"});if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return n={type:"tag",tagType:"inf"},e[1]&&(n.duration=parseFloat(e[1])),e[2]&&(n.title=e[2]),void this.trigger("data",n);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"targetduration"},e[1]&&(n.duration=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"totalduration"},e[1]&&(n.duration=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"version"},e[1]&&(n.version=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return n={type:"tag",tagType:"media-sequence"},e[1]&&(n.number=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return n={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(n.number=parseInt(e[1],10)),void this.trigger("data",n);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return n={type:"tag",tagType:"playlist-type"},e[1]&&(n.playlistType=e[1]),void this.trigger("data",n);if(e=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"byterange"},e[1]&&(n.length=parseInt(e[1],10)),e[2]&&(n.offset=parseInt(e[2],10)),void this.trigger("data",n);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return n={type:"tag",tagType:"allow-cache"},e[1]&&(n.allowed=!/NO/.test(e[1])),void this.trigger("data",n);if(e=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(n={type:"tag",tagType:"map"},e[1]){var r=o(e[1]);if(r.URI&&(n.uri=r.URI),r.BYTERANGE){var i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(r.BYTERANGE.split("@"),2),a=i[0],s=i[1];n.byterange={},a&&(n.byterange.length=parseInt(a,10)),s&&(n.byterange.offset=parseInt(s,10))}}return void this.trigger("data",n)}if(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(n={type:"tag",tagType:"stream-inf"},e[1]){if(n.attributes=o(e[1]),n.attributes.RESOLUTION){var u=n.attributes.RESOLUTION.split("x"),l={};u[0]&&(l.width=parseInt(u[0],10)),u[1]&&(l.height=parseInt(u[1],10)),n.attributes.RESOLUTION=l}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}return void this.trigger("data",n)}if(e=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return n={type:"tag",tagType:"media"},e[1]&&(n.attributes=o(e[1])),void this.trigger("data",n);if(e=/^#EXT-X-ENDLIST/.exec(t))return void this.trigger("data",{type:"tag",tagType:"endlist"});if(e=/^#EXT-X-DISCONTINUITY/.exec(t))return void this.trigger("data",{type:"tag",tagType:"discontinuity"});if(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))return n={type:"tag",tagType:"program-date-time"},e[1]&&(n.dateTimeString=e[1],n.dateTimeObject=new Date(e[1])),void this.trigger("data",n);if(e=/^#EXT-X-KEY:?(.*)$/.exec(t))return n={type:"tag",tagType:"key"},e[1]&&(n.attributes=o(e[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void this.trigger("data",n);if(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))return(n={type:"tag",tagType:"cue-out-cont"}).data=e[1]?e[1]:"",void this.trigger("data",n);if(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))return(n={type:"tag",tagType:"cue-out"}).data=e[1]?e[1]:"",void this.trigger("data",n);if(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))return(n={type:"tag",tagType:"cue-in"}).data=e[1]?e[1]:"",void this.trigger("data",n);this.trigger("data",{type:"tag",data:t.slice(4)})}}}]),e}();n.default=s},{}],36:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=r(t(37)),s=r(t(34)),u=r(t(35)),l=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t.lineStream=new s.default,t.parseStream=new u.default,t.lineStream.pipe(t.parseStream);var n=t,r=[],a={},o=void 0,l=void 0,c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},h=0;return t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},t.parseStream.on("data",function(t){var e=void 0,s=void 0;({tag:function(){(({"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&(a.byterange=e,e.length=t.length,"offset"in t||(this.trigger("info",{message:"defaulting offset to zero"}),t.offset=0)),"offset"in t&&(a.byterange=e,e.offset=t.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),t.duration>0&&(a.duration=t.duration),0===t.duration&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=r},key:function(){return t.attributes?"NONE"===t.attributes.METHOD?void(l=null):t.attributes.URI?(t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},void(void 0!==t.attributes.IV&&(l.iv=t.attributes.IV))):void this.trigger("warn",{message:"ignoring key declaration without URI"}):void this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,h=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){o={},t.uri&&(o.uri=t.uri),t.byterange&&(o.byterange=t.byterange)},"stream-inf":function(){this.manifest.playlists=r,this.manifest.mediaGroups=this.manifest.mediaGroups||c,t.attributes?(a.attributes||(a.attributes={}),i(a.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||c,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var n=this.manifest.mediaGroups[t.attributes.TYPE];n[t.attributes["GROUP-ID"]]=n[t.attributes["GROUP-ID"]]||{},e=n[t.attributes["GROUP-ID"]],(s={default:/yes/i.test(t.attributes.DEFAULT)}).autoselect=!!s.default||/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(s.language=t.attributes.LANGUAGE),t.attributes.URI&&(s.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(s.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(s.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(s.forced=/yes/i.test(t.attributes.FORCED)),e[t.attributes.NAME]=s}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){h+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(r.length)},"program-date-time":function(){this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+t.duration}):this.manifest.totalDuration=t.duration},"cue-out":function(){a.cueOut=t.data},"cue-out-cont":function(){a.cueOutCont=t.data},"cue-in":function(){a.cueIn=t.data}})[t.tagType]||function(){}).call(n)},uri:function(){a.uri=t.uri,r.push(a),!this.manifest.targetDuration||"duration"in a||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),l&&(a.key=l),a.timeline=h,o&&(a.map=o),a={}},comment:function(){}})[t.type].call(n)}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),a(e,[{key:"push",value:function(t){this.lineStream.push(t)}},{key:"end",value:function(){this.lineStream.push("\n")}}]),e}();n.default=l},{}],37:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.listeners={}}return r(t,[{key:"on",value:function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"off",value:function(t,e){if(!this.listeners[t])return!1;var n=this.listeners[t].indexOf(e);return this.listeners[t].splice(n,1),n>-1}},{key:"trigger",value:function(t){var e=this.listeners[t],n=void 0,r=void 0,i=void 0;if(e)if(2===arguments.length)for(r=e.length,n=0;n<r;++n)e[n].call(this,arguments[1]);else for(i=Array.prototype.slice.call(arguments,1),r=e.length,n=0;n<r;++n)e[n].apply(this,i)}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(t){this.on("data",function(e){t.push(e)})}}]),t}();n.default=i},{}],38:[function(t,e,n){"use strict";var r,i=t(62);(r=function(){var t=new Uint8Array,e=0;r.prototype.init.call(this),this.setTimestamp=function(t){e=t},this.parseId3TagSize=function(t,e){var n=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return(16&t[e+5])>>4?n+20:n+10},this.parseAdtsSize=function(t,e){return 6144&t[e+3]|t[e+4]<<3|(224&t[e+5])>>5},this.push=function(n){var r,i,a,o=0,s=0;for(t.length?(a=t.length,(t=new Uint8Array(n.byteLength+a)).set(t.subarray(0,a)),t.set(n,a)):t=n;t.length-s>=3;)if(t[s]!=="I".charCodeAt(0)||t[s+1]!=="D".charCodeAt(0)||t[s+2]!=="3".charCodeAt(0))if(!0&t[s]&&240==(240&t[s+1])){if(t.length-s<7)break;if((o=this.parseAdtsSize(t,s))>t.length)break;i={type:"audio",data:t.subarray(s,s+o),pts:e,dts:e},this.trigger("data",i),s+=o}else s++;else{if(t.length-s<10)break;if((o=this.parseId3TagSize(t,s))>t.length)break;r={type:"timed-metadata",data:t.subarray(s,s+o)},this.trigger("data",r),s+=o}t=t.length-s>0?t.subarray(s):new Uint8Array}}).prototype=new i,e.exports=r},{}],39:[function(t,e,n){"use strict";var r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},a=function(t,e,n){return unescape(function(t,e,n){var r,i="";for(r=e;r<n;r++)i+="%"+("00"+t[r].toString(16)).slice(-2);return i}(t,e,n))};e.exports={parseId3TagSize:function(t,e){var n=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return(16&t[e+5])>>4?n+20:n+10},parseAdtsSize:function(t,e){return 6144&t[e+3]|t[e+4]<<3|(224&t[e+5])>>5},parseType:function(t,e){return t[e]==="I".charCodeAt(0)&&t[e+1]==="D".charCodeAt(0)&&t[e+2]==="3".charCodeAt(0)?"timed-metadata":!0&t[e]&&240==(240&t[e+1])?"audio":null},parseSampleRate:function(t){for(var e=0;e+5<t.length;){if(255===t[e]&&240==(246&t[e+1]))return r[(60&t[e+2])>>>2];e++}return null},parseAacTimestamp:function(t){var e,n,r;e=10,64&t[5]&&(e+=4,e+=i(t.subarray(10,14)));do{if((n=i(t.subarray(e+4,e+8)))<1)return null;if("PRIV"===String.fromCharCode(t[e],t[e+1],t[e+2],t[e+3])){r=t.subarray(e+10,e+n+10);for(var o=0;o<r.byteLength;o++)if(0===r[o]){if("com.apple.streaming.transportStreamTimestamp"===a(r,0,o)){var s=r.subarray(o+1),u=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;return(u*=4)+(3&s[7])}break}}e+=10,e+=n}while(e<t.byteLength);return null}}},{}],40:[function(t,e,n){"use strict";var r,i=t(62),a=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(r=function(){var t;r.prototype.init.call(this),this.push=function(e){var n,r,i,o,s,u=0,l=0;if("audio"===e.type)for(t?(i=t,(t=new Uint8Array(i.byteLength+e.data.byteLength)).set(i),t.set(e.data,i.byteLength)):t=e.data;u+5<t.length;)if(255===t[u]&&240==(246&t[u+1])){if(n=2*(1&~t[u+1]),s=9e4*(o=1024*(1+(3&t[u+6])))/a[(60&t[u+2])>>>2],t.byteLength<(r=u+((3&t[u+3])<<11|t[u+4]<<3|(224&t[u+5])>>5)))return;if(this.trigger("data",{pts:e.pts+l*s,dts:e.dts+l*s,sampleCount:o,audioobjecttype:1+(t[u+2]>>>6&3),channelcount:(1&t[u+2])<<2|(192&t[u+3])>>>6,samplerate:a[(60&t[u+2])>>>2],samplingfrequencyindex:(60&t[u+2])>>>2,samplesize:16,data:t.subarray(u+7+n,r)}),t.byteLength===r)return void(t=void 0);l++,t=t.subarray(r)}else u++},this.flush=function(){this.trigger("done")}}).prototype=new i,e.exports=r},{}],41:[function(t,e,n){"use strict";var r,i,a,o=t(62),s=t(61);(i=function(){var t,e,n=0;i.prototype.init.call(this),this.push=function(r){var i;for(e?((i=new Uint8Array(e.byteLength+r.data.byteLength)).set(e),i.set(r.data,e.byteLength),e=i):e=r.data;n<e.byteLength-3;n++)if(1===e[n+2]){t=n+5;break}for(;t<e.byteLength;)switch(e[t]){case 0:if(0!==e[t-1]){t+=2;break}if(0!==e[t-2]){t++;break}n+3!==t-2&&this.trigger("data",e.subarray(n+3,t-2));do{t++}while(1!==e[t]&&t<e.length);n=t-2,t+=3;break;case 1:if(0!==e[t-1]||0!==e[t-2]){t+=3;break}this.trigger("data",e.subarray(n+3,t-2)),n=t-2,t+=3;break;default:t+=3}e=e.subarray(n),t-=n,n=0},this.flush=function(){e&&e.byteLength>3&&this.trigger("data",e.subarray(n+3)),e=null,n=0,this.trigger("done")}}).prototype=new o,a={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(r=function(){var t,e,n,o,u,l,c,h=new i;r.prototype.init.call(this),t=this,this.push=function(t){"video"===t.type&&(e=t.trackId,n=t.pts,o=t.dts,h.push(t))},h.on("data",function(r){var i={trackId:e,pts:n,dts:o,data:r};switch(31&r[0]){case 5:i.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:i.nalUnitType="sei_rbsp",i.escapedRBSP=u(r.subarray(1));break;case 7:i.nalUnitType="seq_parameter_set_rbsp",i.escapedRBSP=u(r.subarray(1)),i.config=l(i.escapedRBSP);break;case 8:i.nalUnitType="pic_parameter_set_rbsp";break;case 9:i.nalUnitType="access_unit_delimiter_rbsp"}t.trigger("data",i)}),h.on("done",function(){t.trigger("done")}),this.flush=function(){h.flush()},c=function(t,e){var n,r=8,i=8;for(n=0;n<t;n++)0!==i&&(i=(r+e.readExpGolomb()+256)%256),r=0===i?r:i},u=function(t){for(var e,n,r=t.byteLength,i=[],a=1;a<r-2;)0===t[a]&&0===t[a+1]&&3===t[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return t;e=r-i.length,n=new Uint8Array(e);var o=0;for(a=0;a<e;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=t[o];return n},l=function(t){var e,n,r,i,o,u,l,h,f,d,p,g,v,m=0,y=0,_=0,b=0,x=1;if(n=(e=new s(t)).readUnsignedByte(),i=e.readUnsignedByte(),r=e.readUnsignedByte(),e.skipUnsignedExpGolomb(),a[n]&&(3===(o=e.readUnsignedExpGolomb())&&e.skipBits(1),e.skipUnsignedExpGolomb(),e.skipUnsignedExpGolomb(),e.skipBits(1),e.readBoolean()))for(p=3!==o?8:12,v=0;v<p;v++)e.readBoolean()&&c(v<6?16:64,e);if(e.skipUnsignedExpGolomb(),0===(u=e.readUnsignedExpGolomb()))e.readUnsignedExpGolomb();else if(1===u)for(e.skipBits(1),e.skipExpGolomb(),e.skipExpGolomb(),l=e.readUnsignedExpGolomb(),v=0;v<l;v++)e.skipExpGolomb();if(e.skipUnsignedExpGolomb(),e.skipBits(1),h=e.readUnsignedExpGolomb(),f=e.readUnsignedExpGolomb(),0===(d=e.readBits(1))&&e.skipBits(1),e.skipBits(1),e.readBoolean()&&(m=e.readUnsignedExpGolomb(),y=e.readUnsignedExpGolomb(),_=e.readUnsignedExpGolomb(),b=e.readUnsignedExpGolomb()),e.readBoolean()&&e.readBoolean()){switch(e.readUnsignedByte()){case 1:g=[1,1];break;case 2:g=[12,11];break;case 3:g=[10,11];break;case 4:g=[16,11];break;case 5:g=[40,33];break;case 6:g=[24,11];break;case 7:g=[20,11];break;case 8:g=[32,11];break;case 9:g=[80,33];break;case 10:g=[18,11];break;case 11:g=[15,11];break;case 12:g=[64,33];break;case 13:g=[160,99];break;case 14:g=[4,3];break;case 15:g=[3,2];break;case 16:g=[2,1];break;case 255:g=[e.readUnsignedByte()<<8|e.readUnsignedByte(),e.readUnsignedByte()<<8|e.readUnsignedByte()]}g&&(x=g[0]/g[1])}return{profileIdc:n,levelIdc:r,profileCompatibility:i,width:Math.ceil((16*(h+1)-2*m-2*y)*x),height:(2-d)*(f+1)*16-2*_-2*b}}}).prototype=new o,e.exports={H264Stream:r,NalByteStream:i}},{}],42:[function(t,e,n){var r=[33,16,5,32,164,27],i=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],a=function(t){for(var e=[];t--;)e.push(0);return e},o={96000:[r,[227,64],a(154),[56]],88200:[r,[231],a(170),[56]],64000:[r,[248,192],a(240),[56]],48000:[r,[255,192],a(268),[55,148,128],a(54),[112]],44100:[r,[255,192],a(268),[55,163,128],a(84),[112]],32000:[r,[255,192],a(268),[55,234],a(226),[112]],24000:[r,[255,192],a(268),[55,255,128],a(268),[111,112],a(126),[224]],16000:[r,[255,192],a(268),[55,255,128],a(268),[111,255],a(269),[223,108],a(195),[1,192]],12000:[i,a(268),[3,127,248],a(268),[6,255,240],a(268),[13,255,224],a(268),[27,253,128],a(259),[56]],11025:[i,a(268),[3,127,248],a(268),[6,255,240],a(268),[13,255,224],a(268),[27,255,192],a(268),[55,175,128],a(108),[112]],8000:[i,a(268),[3,121,16],a(47),[7]]};e.exports=function(t){return Object.keys(t).reduce(function(e,n){return e[n]=new Uint8Array(t[n].reduce(function(t,e){return t.concat(e)},[])),e},{})}(o)},{}],43:[function(t,e,n){"use strict";var r=t(62),i=function(t){this.numberOfTracks=0,this.metadataStream=t.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,this.processedTracks=0,i.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):("video"===t.track.type&&(this.videoTrack=t.track,this.videoTags=t.tags,this.pendingTracks++),void("audio"===t.track.type&&(this.audioTrack=t.track,this.audioTags=t.tags,this.pendingTracks++)))}};i.prototype=new r,i.prototype.flush=function(t){var e,n,r,i,a={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(0===this.pendingTracks&&++this.processedTracks<this.numberOfTracks)return}if(this.processedTracks+=this.pendingTracks,this.pendingTracks=0,!(this.processedTracks<this.numberOfTracks)){for(this.videoTrack?i=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(i=this.audioTrack.timelineStartInfo.pts),a.tags.videoTags=this.videoTags,a.tags.audioTags=this.audioTags,r=0;r<this.pendingCaptions.length;r++)(n=this.pendingCaptions[r]).startTime=n.startPts-i,n.startTime/=9e4,n.endTime=n.endPts-i,n.endTime/=9e4,a.captionStreams[n.stream]=!0,a.captions.push(n);for(r=0;r<this.pendingMetadata.length;r++)(e=this.pendingMetadata[r]).cueTime=e.pts-i,e.cueTime/=9e4,a.metadata.push(e);a.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.processedTracks=0,this.trigger("data",a),this.trigger("done")}},e.exports=i},{}],44:[function(t,e,n){"use strict";var r=t(45);e.exports=function(t,e,n){var i,a,o,s=new Uint8Array(9),u=new DataView(s.buffer);return t=t||0,e=void 0===e||e,n=void 0===n||n,u.setUint8(0,70),u.setUint8(1,76),u.setUint8(2,86),u.setUint8(3,1),u.setUint8(4,(e?4:0)|(n?1:0)),u.setUint32(5,s.byteLength),t<=0?((a=new Uint8Array(s.byteLength+4)).set(s),a.set([0,0,0,0],s.byteLength),a):((i=new r(r.METADATA_TAG)).pts=i.dts=0,i.writeMetaDataDouble("duration",t),o=i.finalize().length,(a=new Uint8Array(s.byteLength+o)).set(s),a.set(u.byteLength,o),a)}},{}],45:[function(t,e,n){"use strict";var r;(r=function(t,e){var n,i=0,a=16384,o=function(t,e){var n,r=t.position+e;r<t.bytes.byteLength||((n=new Uint8Array(2*r)).set(t.bytes.subarray(0,t.position),0),t.bytes=n,t.view=new DataView(t.bytes.buffer))},s=r.widthBytes||new Uint8Array("width".length),u=r.heightBytes||new Uint8Array("height".length),l=r.videocodecidBytes||new Uint8Array("videocodecid".length);if(!r.widthBytes){for(n=0;n<"width".length;n++)s[n]="width".charCodeAt(n);for(n=0;n<"height".length;n++)u[n]="height".charCodeAt(n);for(n=0;n<"videocodecid".length;n++)l[n]="videocodecid".charCodeAt(n);r.widthBytes=s,r.heightBytes=u,r.videocodecidBytes=l}switch(this.keyFrame=!1,t){case r.VIDEO_TAG:this.length=16,a*=6;break;case r.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case r.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(a),this.view=new DataView(this.bytes.buffer),this.bytes[0]=t,this.position=this.length,this.keyFrame=e,this.pts=0,this.dts=0,this.writeBytes=function(t,e,n){var r,i=e||0;r=i+(n=n||t.byteLength),o(this,n),this.bytes.set(t.subarray(i,r),this.position),this.position+=n,this.length=Math.max(this.length,this.position)},this.writeByte=function(t){o(this,1),this.bytes[this.position]=t,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(t){o(this,2),this.view.setUint16(this.position,t),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(t){return this.bytes[this.length-t]},this.nalUnitSize=function(){return 0===i?0:this.length-(i+4)},this.startNalUnit=function(){if(i>0)throw new Error("Attempted to create new NAL wihout closing the old one");i=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(t){var e,n;this.length===i+4?this.length-=4:i>0&&(n=this.length-(e=i+4),this.position=i,this.view.setUint32(this.position,n),this.position=this.length,t&&t.push(this.bytes.subarray(e,e+n))),i=0},this.writeMetaDataDouble=function(t,e){var n;if(o(this,2+t.length+9),this.view.setUint16(this.position,t.length),this.position+=2,"width"===t)this.bytes.set(s,this.position),this.position+=5;else if("height"===t)this.bytes.set(u,this.position),this.position+=6;else if("videocodecid"===t)this.bytes.set(l,this.position),this.position+=12;else for(n=0;n<t.length;n++)this.bytes[this.position]=t.charCodeAt(n),this.position++;this.position++,this.view.setFloat64(this.position,e),this.position+=8,this.length=Math.max(this.length,this.position),++i},this.writeMetaDataBoolean=function(t,e){var n;for(o(this,2),this.view.setUint16(this.position,t.length),this.position+=2,n=0;n<t.length;n++)o(this,1),this.bytes[this.position]=t.charCodeAt(n),this.position++;o(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,e?1:0),this.position++,this.length=Math.max(this.length,this.position),++i},this.finalize=function(){var t,n;switch(this.bytes[0]){case r.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||e?16:32),this.bytes[12]=e?0:1,this.bytes[13]=(16711680&(t=this.pts-this.dts))>>>16,this.bytes[14]=(65280&t)>>>8,this.bytes[15]=(255&t)>>>0;break;case r.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=e?0:1;break;case r.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,i),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return this.bytes[1]=(16711680&(n=this.length-11))>>>16,this.bytes[2]=(65280&n)>>>8,this.bytes[3]=(255&n)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,o(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=r.frameTime(this.bytes),this}}).AUDIO_TAG=8,r.VIDEO_TAG=9,r.METADATA_TAG=18,r.isAudioFrame=function(t){return r.AUDIO_TAG===t[0]},r.isVideoFrame=function(t){return r.VIDEO_TAG===t[0]},r.isMetaData=function(t){return r.METADATA_TAG===t[0]},r.isKeyFrame=function(t){return r.isVideoFrame(t)?23===t[11]:!!r.isAudioFrame(t)||!!r.isMetaData(t)},r.frameTime=function(t){var e=t[4]<<16;return e|=t[5]<<8,(e|=t[6]<<0)|t[7]<<24},e.exports=r},{}],46:[function(t,e,n){e.exports={tag:t(45),Transmuxer:t(48),getFlvHeader:t(44)}},{}],47:[function(t,e,n){"use strict";e.exports=function(){var t=this;this.list=[],this.push=function(t){this.list.push({bytes:t.bytes,dts:t.dts,pts:t.pts,keyFrame:t.keyFrame,metaDataTag:t.metaDataTag})},Object.defineProperty(this,"length",{get:function(){return t.list.length}})}},{}],48:[function(t,e,n){"use strict";var r,i,a,o,s,u,l=t(62),c=t(45),h=t(50),f=t(40),d=t(41).H264Stream,p=t(43),g=t(47);o=function(t,e){"number"==typeof e.pts&&(t.timelineStartInfo.pts=void 0===t.timelineStartInfo.pts?e.pts:Math.min(t.timelineStartInfo.pts,e.pts)),"number"==typeof e.dts&&(t.timelineStartInfo.dts=void 0===t.timelineStartInfo.dts?e.dts:Math.min(t.timelineStartInfo.dts,e.dts))},s=function(t,e){var n=new c(c.METADATA_TAG);return n.dts=e,n.pts=e,n.writeMetaDataDouble("videocodecid",7),n.writeMetaDataDouble("width",t.width),n.writeMetaDataDouble("height",t.height),n},u=function(t,e){var n,r=new c(c.VIDEO_TAG,!0);for(r.dts=e,r.pts=e,r.writeByte(1),r.writeByte(t.profileIdc),r.writeByte(t.profileCompatibility),r.writeByte(t.levelIdc),r.writeByte(255),r.writeByte(225),r.writeShort(t.sps[0].length),r.writeBytes(t.sps[0]),r.writeByte(t.pps.length),n=0;n<t.pps.length;++n)r.writeShort(t.pps[n].length),r.writeBytes(t.pps[n]);return r},(a=function(t){var e,n=[],r=[];a.prototype.init.call(this),this.push=function(e){o(t,e),t&&(t.audioobjecttype=e.audioobjecttype,t.channelcount=e.channelcount,t.samplerate=e.samplerate,t.samplingfrequencyindex=e.samplingfrequencyindex,t.samplesize=e.samplesize,t.extraData=t.audioobjecttype<<11|t.samplingfrequencyindex<<7|t.channelcount<<3),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),n.push(e)},this.flush=function(){var i,a,o,s=new g;if(0!==n.length){for(o=-1/0;n.length;)i=n.shift(),r.length&&i.pts>=r[0]&&(o=r.shift(),this.writeMetaDataTags(s,o)),(t.extraData!==e||i.pts-o>=1e3)&&(this.writeMetaDataTags(s,i.pts),e=t.extraData,o=i.pts),(a=new c(c.AUDIO_TAG)).pts=i.pts,a.dts=i.dts,a.writeBytes(i.data),s.push(a.finalize());r.length=0,e=null,this.trigger("data",{track:t,tags:s.list}),this.trigger("done","AudioSegmentStream")}else this.trigger("done","AudioSegmentStream")},this.writeMetaDataTags=function(e,n){var r;(r=new c(c.METADATA_TAG)).pts=n,r.dts=n,r.writeMetaDataDouble("audiocodecid",10),r.writeMetaDataBoolean("stereo",2===t.channelcount),r.writeMetaDataDouble("audiosamplerate",t.samplerate),r.writeMetaDataDouble("audiosamplesize",16),e.push(r.finalize()),(r=new c(c.AUDIO_TAG,!0)).pts=n,r.dts=n,r.view.setUint16(r.position,t.extraData),r.position+=2,r.length=Math.max(r.length,r.position),e.push(r.finalize())},this.onVideoKeyFrame=function(t){r.push(t)}}).prototype=new l,(i=function(t){var e,n,r=[];i.prototype.init.call(this),this.finishFrame=function(r,i){if(i){if(e&&t&&t.newMetadata&&(i.keyFrame||0===r.length)){var a=s(e,i.dts).finalize(),o=u(t,i.dts).finalize();a.metaDataTag=o.metaDataTag=!0,r.push(a),r.push(o),t.newMetadata=!1,this.trigger("keyframe",i.dts)}i.endNalUnit(),r.push(i.finalize()),n=null}},this.push=function(e){o(t,e),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),r.push(e)},this.flush=function(){for(var i,a=new g;r.length&&"access_unit_delimiter_rbsp"!==r[0].nalUnitType;)r.shift();if(0!==r.length){for(;r.length;)"seq_parameter_set_rbsp"===(i=r.shift()).nalUnitType?(t.newMetadata=!0,t.width=(e=i.config).width,t.height=e.height,t.sps=[i.data],t.profileIdc=e.profileIdc,t.levelIdc=e.levelIdc,t.profileCompatibility=e.profileCompatibility,n.endNalUnit()):"pic_parameter_set_rbsp"===i.nalUnitType?(t.newMetadata=!0,t.pps=[i.data],n.endNalUnit()):"access_unit_delimiter_rbsp"===i.nalUnitType?(n&&this.finishFrame(a,n),(n=new c(c.VIDEO_TAG)).pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.endNalUnit()),n.startNalUnit(),n.writeBytes(i.data);n&&this.finishFrame(a,n),this.trigger("data",{track:t,tags:a.list}),this.trigger("done","VideoSegmentStream")}else this.trigger("done","VideoSegmentStream")}}).prototype=new l,(r=function(t){var e,n,o,s,u,l,c,g,v,m,y,_,b=this;r.prototype.init.call(this),t=t||{},this.metadataStream=new h.MetadataStream,t.metadataStream=this.metadataStream,e=new h.TransportPacketStream,n=new h.TransportParseStream,o=new h.ElementaryStream,s=new h.TimestampRolloverStream("video"),u=new h.TimestampRolloverStream("audio"),l=new h.TimestampRolloverStream("timed-metadata"),c=new f,g=new d,_=new p(t),e.pipe(n).pipe(o),o.pipe(s).pipe(g),o.pipe(u).pipe(c),o.pipe(l).pipe(this.metadataStream).pipe(_),y=new h.CaptionStream,g.pipe(y).pipe(_),o.on("data",function(t){var e,n,r;if("metadata"===t.type){for(e=t.tracks.length;e--;)"video"===t.tracks[e].type?n=t.tracks[e]:"audio"===t.tracks[e].type&&(r=t.tracks[e]);n&&!v&&(_.numberOfTracks++,v=new i(n),g.pipe(v).pipe(_)),r&&!m&&(_.numberOfTracks++,m=new a(r),c.pipe(m).pipe(_),v&&v.on("keyframe",m.onVideoKeyFrame))}}),this.push=function(t){e.push(t)},this.flush=function(){e.flush()},this.resetCaptions=function(){y.reset()},_.on("data",function(t){b.trigger("data",t)}),_.on("done",function(){b.trigger("done")})}).prototype=new l,e.exports=r},{}],49:[function(t,e,n){"use strict";var r=t(62),i=function(){i.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new l(0,0),new l(0,1),new l(1,0),new l(1,1)],this.reset(),this.ccStreams_.forEach(function(t){t.on("data",this.trigger.bind(this,"data")),t.on("done",this.trigger.bind(this,"done"))},this)};i.prototype=new r,i.prototype.push=function(t){var e,n;if("sei_rbsp"===t.nalUnitType&&4===(e=function(t){for(var e=0,n={payloadType:-1,payloadSize:0},r=0,i=0;e<t.byteLength&&128!==t[e];){for(;255===t[e];)r+=255,e++;for(r+=t[e++];255===t[e];)i+=255,e++;if(i+=t[e++],!n.payload&&4===r){n.payloadType=r,n.payloadSize=i,n.payload=t.subarray(e,e+i);break}e+=i,r=0,i=0}return n}(t.escapedRBSP)).payloadType&&(n=function(t){return 181!==t.payload[0]?null:49!=(t.payload[1]<<8|t.payload[2])?null:"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])?null:3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)}(e))){if(t.dts<this.latestDts_)return void(this.ignoreNextEqualDts_=!0);if(t.dts===this.latestDts_&&this.ignoreNextEqualDts_)return void(this.ignoreNextEqualDts_=!1);this.captionPackets_=this.captionPackets_.concat(function(t,e){var n,r,i,a,o=[];if(!(64&e[0]))return o;for(r=31&e[0],n=0;n<r;n++)a={type:3&e[2+(i=3*n)],pts:t},4&e[i+2]&&(a.ccData=e[i+3]<<8|e[i+4],o.push(a));return o}(t.pts,n)),this.latestDts_=t.dts}},i.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(t,e){t.presortIndex=e}),this.captionPackets_.sort(function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts}),this.captionPackets_.forEach(function(t){t.type<2&&this.dispatchCea608Packet(t)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(t){t.flush()},this)):this.ccStreams_.forEach(function(t){t.flush()},this)},i.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(t){t.reset()})},i.prototype.dispatchCea608Packet=function(t){this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},i.prototype.setsChannel1Active=function(t){return 4096==(30720&t.ccData)},i.prototype.setsChannel2Active=function(t){return 6144==(30720&t.ccData)};var a={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},o=function(t){return null===t?"":(t=a[t]||t,String.fromCharCode(t))},s=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],u=function(){for(var t=[],e=15;e--;)t.push("");return t},l=function(t,e){l.prototype.init.call(this),this.field_=t||0,this.dataChannel_=e||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var e,n,r,i,a;if((e=32639&t.ccData)!==this.lastControlCode_){if(4096==(61440&e)?this.lastControlCode_=e:e!==this.PADDING_&&(this.lastControlCode_=null),r=e>>>8,i=255&e,e!==this.PADDING_)if(e===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(e===this.END_OF_CAPTION_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=t.pts;else if(e===this.ROLL_UP_2_ROWS_)this.topRow_=13,this.mode_="rollUp";else if(e===this.ROLL_UP_3_ROWS_)this.topRow_=12,this.mode_="rollUp";else if(e===this.ROLL_UP_4_ROWS_)this.topRow_=11,this.mode_="rollUp";else if(e===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(e===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[14]=this.nonDisplayed_[14].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1);else if(e===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=u();else if(e===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=u();else if(e===this.RESUME_DIRECT_CAPTIONING_)this.mode_="paintOn";else if(this.isSpecialCharacter(r,i))a=o((r=(3&r)<<8)|i),this[this.mode_](t.pts,a),this.column_++;else if(this.isExtCharacter(r,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1),a=o((r=(3&r)<<8)|i),this[this.mode_](t.pts,a),this.column_++;else if(this.isMidRowCode(r,i))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14==(14&i)&&this.addFormatting(t.pts,["i"]),1==(1&i)&&this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(r,i))this.column_+=3&i;else if(this.isPAC(r,i)){var l=s.indexOf(7968&e);l!==this.row_&&(this.clearFormatting(t.pts),this.row_=l),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16==(16&e)&&(this.column_=4*((14&e)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(t.pts,["i"])}else this.isNormalChar(r)&&(0===i&&(i=null),a=o(r),a+=o(i),this[this.mode_](t.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};l.prototype=new r,l.prototype.flushDisplayed=function(t){var e=this.displayed_.map(function(t){return t.trim()}).join("\n").replace(/^\n+|\n+$/g,"");e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e,stream:this.name_})},l.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=u(),this.nonDisplayed_=u(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.formatting_=[]},l.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},l.prototype.isSpecialCharacter=function(t,e){return t===this.EXT_&&e>=48&&e<=63},l.prototype.isExtCharacter=function(t,e){return(t===this.EXT_+1||t===this.EXT_+2)&&e>=32&&e<=63},l.prototype.isMidRowCode=function(t,e){return t===this.EXT_&&e>=32&&e<=47},l.prototype.isOffsetControlCode=function(t,e){return t===this.OFFSET_&&e>=33&&e<=35},l.prototype.isPAC=function(t,e){return t>=this.BASE_&&t<this.BASE_+8&&e>=64&&e<=127},l.prototype.isColorPAC=function(t){return t>=64&&t<=79||t>=96&&t<=127},l.prototype.isNormalChar=function(t){return t>=32&&t<=127},l.prototype.addFormatting=function(t,e){this.formatting_=this.formatting_.concat(e);var n=e.reduce(function(t,e){return t+"<"+e+">"},"");this[this.mode_](t,n)},l.prototype.clearFormatting=function(t){if(this.formatting_.length){var e=this.formatting_.reverse().reduce(function(t,e){return t+"</"+e+">"},"");this.formatting_=[],this[this.mode_](t,e)}},l.prototype.popOn=function(t,e){var n=this.nonDisplayed_[this.row_];this.nonDisplayed_[this.row_]=n+=e},l.prototype.rollUp=function(t,e){var n=this.displayed_[14];this.displayed_[14]=n+=e},l.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.topRow_;t<14;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[14]=""},l.prototype.paintOn=function(){},e.exports={CaptionStream:i,Cea608Stream:l}},{}],50:[function(t,e,n){"use strict";var r,i,a,o=t(62),s=t(49),u=t(53),l=t(54).TimestampRolloverStream,c=t(53);(r=function(){var t=new Uint8Array(188),e=0;r.prototype.init.call(this),this.push=function(n){var r,i=0,a=188;for(e?((r=new Uint8Array(n.byteLength+e)).set(t.subarray(0,e)),r.set(n,e),e=0):r=n;a<r.byteLength;)71!==r[i]||71!==r[a]?(i++,a++):(this.trigger("data",r.subarray(i,a)),i+=188,a+=188);i<r.byteLength&&(t.set(r.subarray(i),0),e=r.byteLength-i)},this.flush=function(){188===e&&71===t[0]&&(this.trigger("data",t),e=0),this.trigger("done")}}).prototype=new o,(i=function(){var t,e,n,r;i.prototype.init.call(this),r=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,t=function(t,r){var i=0;r.payloadUnitStartIndicator&&(i+=t[i]+1),"pat"===r.type?e(t.subarray(i),r):n(t.subarray(i),r)},e=function(t,e){e.section_number=t[7],e.last_section_number=t[8],r.pmtPid=(31&t[10])<<8|t[11],e.pmtPid=r.pmtPid},n=function(t,e){var n,i;if(1&t[5]){for(r.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&t[1])<<8|t[2])-4,i=12+((15&t[10])<<8|t[11]);i<n;){var a=t[i],o=(31&t[i+1])<<8|t[i+2];a===u.H264_STREAM_TYPE&&null===r.programMapTable.video?r.programMapTable.video=o:a===u.ADTS_STREAM_TYPE&&null===r.programMapTable.audio?r.programMapTable.audio=o:a===u.METADATA_STREAM_TYPE&&(r.programMapTable["timed-metadata"][o]=a),i+=5+((15&t[i+3])<<8|t[i+4])}e.programMapTable=r.programMapTable}},this.push=function(e){var n={},r=4;if(n.payloadUnitStartIndicator=!!(64&e[1]),n.pid=31&e[1],n.pid<<=8,n.pid|=e[2],(48&e[3])>>>4>1&&(r+=e[r]+1),0===n.pid)n.type="pat",t(e.subarray(r),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",t(e.subarray(r),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,r,n]):this.processPes_(e,r,n)},this.processPes_=function(t,e,n){n.streamType=n.pid===this.programMapTable.video?u.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?u.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=t.subarray(e),this.trigger("data",n)}}).prototype=new o,i.STREAM_TYPES={h264:27,adts:15},(a=function(){var t=this,e={data:[],size:0},n={data:[],size:0},r={data:[],size:0},i=function(e,n,r){var i,a=new Uint8Array(e.size),o={type:n},s=0,u=0,l=!1;if(e.data.length&&!(e.size<9)){for(o.trackId=e.data[0].pid,s=0;s<e.data.length;s++)a.set((i=e.data[s]).data,u),u+=i.data.byteLength;(function(t,e){var n;e.packetLength=6+(t[4]<<8|t[5]),e.dataAlignmentIndicator=0!=(4&t[6]),192&(n=t[7])&&(e.pts=(14&t[9])<<27|(255&t[10])<<20|(254&t[11])<<12|(255&t[12])<<5|(254&t[13])>>>3,e.pts*=4,e.pts+=(6&t[13])>>>1,e.dts=e.pts,64&n&&(e.dts=(14&t[14])<<27|(255&t[15])<<20|(254&t[16])<<12|(255&t[17])<<5|(254&t[18])>>>3,e.dts*=4,e.dts+=(6&t[18])>>>1)),e.data=t.subarray(9+t[8])})(a,o),l="video"===n||o.packetLength<=e.size,(r||l)&&(e.size=0,e.data.length=0),l&&t.trigger("data",o)}};a.prototype.init.call(this),this.push=function(a){({pat:function(){},pes:function(){var t,o;switch(a.streamType){case u.H264_STREAM_TYPE:case c.H264_STREAM_TYPE:t=e,o="video";break;case u.ADTS_STREAM_TYPE:t=n,o="audio";break;case u.METADATA_STREAM_TYPE:t=r,o="timed-metadata";break;default:return}a.payloadUnitStartIndicator&&i(t,o,!0),t.data.push(a),t.size+=a.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]},n=a.programMapTable;null!==n.video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.video,codec:"avc",type:"video"}),null!==n.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+n.audio,codec:"adts",type:"audio"}),t.trigger("data",e)}})[a.type]()},this.flush=function(){i(e,"video"),i(n,"audio"),i(r,"timed-metadata"),this.trigger("done")}}).prototype=new o;var h={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:r,TransportParseStream:i,ElementaryStream:a,TimestampRolloverStream:l,CaptionStream:s.CaptionStream,Cea608Stream:s.Cea608Stream,MetadataStream:t(51)};for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f]);e.exports=h},{}],51:[function(t,e,n){"use strict";var r,i=t(62),a=t(53),o=function(t,e,n){var r,i="";for(r=e;r<n;r++)i+="%"+("00"+t[r].toString(16)).slice(-2);return i},s=function(t,e,n){return decodeURIComponent(o(t,e,n))},u=function(t,e,n){return unescape(o(t,e,n))},l=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},c={TXXX:function(t){var e;if(3===t.data[0]){for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=s(t.data,1,e),t.value=s(t.data,e+1,t.data.length).replace(/\0*$/,"");break}t.data=t.value}},WXXX:function(t){var e;if(3===t.data[0])for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=s(t.data,1,e),t.url=s(t.data,e+1,t.data.length);break}},PRIV:function(t){var e;for(e=0;e<t.data.length;e++)if(0===t.data[e]){t.owner=u(t.data,0,e);break}t.privateData=t.data.subarray(e+1),t.data=t.privateData}};(r=function(t){var e,n={debug:!(!t||!t.debug),descriptor:t&&t.descriptor},i=0,o=[],s=0;if(r.prototype.init.call(this),this.dispatchType=a.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(e=0;e<n.descriptor.length;e++)this.dispatchType+=("00"+n.descriptor[e].toString(16)).slice(-2);this.push=function(t){var e,r,a,u,h;if("timed-metadata"===t.type){if(t.dataAlignmentIndicator&&(s=0,o.length=0),0===o.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))return void(n.debug&&console.log("Skipping unrecognized metadata packet"));if(o.push(t),s+=t.data.byteLength,1===o.length&&(i=l(t.data.subarray(6,10)),i+=10),!(s<i)){for(e={data:new Uint8Array(i),frames:[],pts:o[0].pts,dts:o[0].dts},h=0;h<i;)e.data.set(o[0].data.subarray(0,i-h),h),h+=o[0].data.byteLength,s-=o[0].data.byteLength,o.shift();r=10,64&e.data[5]&&(r+=4,r+=l(e.data.subarray(10,14)),i-=l(e.data.subarray(16,20)));do{if((a=l(e.data.subarray(r+4,r+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((u={id:String.fromCharCode(e.data[r],e.data[r+1],e.data[r+2],e.data[r+3]),data:e.data.subarray(r+10,r+a+10)}).key=u.id,c[u.id]&&(c[u.id](u),"com.apple.streaming.transportStreamTimestamp"===u.owner)){var f=u.data,d=(1&f[3])<<30|f[4]<<22|f[5]<<14|f[6]<<6|f[7]>>>2;d*=4,u.timeStamp=d+=3&f[7],void 0===e.pts&&void 0===e.dts&&(e.pts=u.timeStamp,e.dts=u.timeStamp),this.trigger("timestamp",u)}e.frames.push(u),r+=10,r+=a}while(r<i);this.trigger("data",e)}}}}).prototype=new i,e.exports=r},{}],52:[function(t,e,n){"use strict";var r=t(53),i=function(t){var e=31&t[1];return(e<<=8)|t[2]},a=function(t){return!!(64&t[1])},o=function(t){var e=0;return(48&t[3])>>>4>1&&(e+=t[4]+1),e},s=function(t){switch(t){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};e.exports={parseType:function(t,e){var n=i(t);return 0===n?"pat":n===e?"pmt":e?"pes":null},parsePat:function(t){var e=a(t),n=4+o(t);return e&&(n+=t[n]+1),(31&t[n+10])<<8|t[n+11]},parsePmt:function(t){var e={},n=a(t),r=4+o(t);if(n&&(r+=t[r]+1),1&t[r+5]){var i;i=3+((15&t[r+1])<<8|t[r+2])-4;for(var s=12+((15&t[r+10])<<8|t[r+11]);s<i;){var u=r+s;e[(31&t[u+1])<<8|t[u+2]]=t[u],s+=5+((15&t[u+3])<<8|t[u+4])}return e}},parsePayloadUnitStartIndicator:a,parsePesType:function(t,e){switch(e[i(t)]){case r.H264_STREAM_TYPE:return"video";case r.ADTS_STREAM_TYPE:return"audio";case r.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(t){if(!a(t))return null;var e=4+o(t);if(e>=t.byteLength)return null;var n,r=null;return 192&(n=t[e+7])&&((r={}).pts=(14&t[e+9])<<27|(255&t[e+10])<<20|(254&t[e+11])<<12|(255&t[e+12])<<5|(254&t[e+13])>>>3,r.pts*=4,r.pts+=(6&t[e+13])>>>1,r.dts=r.pts,64&n&&(r.dts=(14&t[e+14])<<27|(255&t[e+15])<<20|(254&t[e+16])<<12|(255&t[e+17])<<5|(254&t[e+18])>>>3,r.dts*=4,r.dts+=(6&t[e+18])>>>1)),r},videoPacketContainsKeyFrame:function(t){for(var e=4+o(t),n=t.subarray(e),r=0,i=0,a=!1;i<n.byteLength-3;i++)if(1===n[i+2]){r=i+5;break}for(;r<n.byteLength;)switch(n[r]){case 0:if(0!==n[r-1]){r+=2;break}if(0!==n[r-2]){r++;break}i+3!==r-2&&"slice_layer_without_partitioning_rbsp_idr"===s(31&n[i+3])&&(a=!0);do{r++}while(1!==n[r]&&r<n.length);i=r-2,r+=3;break;case 1:if(0!==n[r-1]||0!==n[r-2]){r+=3;break}"slice_layer_without_partitioning_rbsp_idr"===s(31&n[i+3])&&(a=!0),i=r-2,r+=3;break;default:r+=3}return n=n.subarray(i),r-=i,i=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===s(31&n[i+3])&&(a=!0),a}}},{}],53:[function(t,e,n){"use strict";e.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},{}],54:[function(t,e,n){"use strict";var r=t(62),i=function(t,e){var n=1;for(t>e&&(n=-1);Math.abs(e-t)>4294967296;)t+=8589934592*n;return t},a=function(t){var e,n;a.prototype.init.call(this),this.type_=t,this.push=function(t){t.type===this.type_&&(void 0===n&&(n=t.dts),t.dts=i(t.dts,n),t.pts=i(t.pts,n),e=t.dts,this.trigger("data",t))},this.flush=function(){n=e,this.trigger("done")},this.discontinuity=function(){n=void 0,e=void 0}};a.prototype=new r,e.exports={TimestampRolloverStream:a,handleRollover:i}},{}],55:[function(t,e,n){e.exports={generator:t(56),Transmuxer:t(58).Transmuxer,AudioSegmentStream:t(58).AudioSegmentStream,VideoSegmentStream:t(58).VideoSegmentStream}},{}],56:[function(t,e,n){"use strict";var r,i,a,o,s,u,l,c,h,f,d,p,g,v,m,y,_,b,x,w,S,T,O,M,k,C,E,A,I,P,L,D,j,R,N,B,F=Math.pow(2,32)-1;!function(){var t;if(O={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(t in O)O.hasOwnProperty(t)&&(O[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);M=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),C=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),k=new Uint8Array([0,0,0,1]),E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),A=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),I={video:E,audio:A},D=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),L=new Uint8Array([0,0,0,0,0,0,0,0]),j=new Uint8Array([0,0,0,0,0,0,0,0]),R=j,N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),B=j,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),r=function(t){var e,n,r=[],i=0;for(e=1;e<arguments.length;e++)r.push(arguments[e]);for(e=r.length;e--;)i+=r[e].byteLength;for(n=new Uint8Array(i+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(t,4),e=0,i=8;e<r.length;e++)n.set(r[e],i),i+=r[e].byteLength;return n},i=function(){return r(O.dinf,r(O.dref,D))},a=function(t){return r(O.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},o=function(){return r(O.ftyp,M,k,M,C)},y=function(t){return r(O.hdlr,I[t])},s=function(t){return r(O.mdat,t)},m=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(e[12]=t.samplerate>>>24&255,e[13]=t.samplerate>>>16&255,e[14]=t.samplerate>>>8&255,e[15]=255&t.samplerate),r(O.mdhd,e)},v=function(t){return r(O.mdia,m(t),y(t.type),l(t))},u=function(t){return r(O.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},l=function(t){return r(O.minf,"video"===t.type?r(O.vmhd,P):r(O.smhd,L),i(),b(t))},c=function(t,e){for(var n=[],i=e.length;i--;)n[i]=w(e[i]);return r.apply(null,[O.moof,u(t)].concat(n))},h=function(t){for(var e=t.length,n=[];e--;)n[e]=p(t[e]);return r.apply(null,[O.moov,d(4294967295)].concat(n).concat(f(t)))},f=function(t){for(var e=t.length,n=[];e--;)n[e]=S(t[e]);return r.apply(null,[O.mvex].concat(n))},d=function(t){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return r(O.mvhd,e)},_=function(t){var e,n,i=t.samples||[],a=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)a[n+4]=(e=i[n].flags).dependsOn<<4|e.isDependedOn<<2|e.hasRedundancy;return r(O.sdtp,a)},b=function(t){return r(O.stbl,x(t),r(O.stts,B),r(O.stsc,R),r(O.stsz,N),r(O.stco,j))},function(){var t,e;x=function(n){return r(O.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===n.type?t(n):e(n))},t=function(t){var e,n=t.sps||[],i=t.pps||[],a=[],o=[];for(e=0;e<n.length;e++)a.push((65280&n[e].byteLength)>>>8),a.push(255&n[e].byteLength),a=a.concat(Array.prototype.slice.call(n[e]));for(e=0;e<i.length;e++)o.push((65280&i[e].byteLength)>>>8),o.push(255&i[e].byteLength),o=o.concat(Array.prototype.slice.call(i[e]));return r(O.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),r(O.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([n.length]).concat(a).concat([i.length]).concat(o))),r(O.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},e=function(t){return r(O.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),a(t))}}(),g=function(t){var e=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return r(O.tkhd,e)},w=function(t){var e,n,i,a,o,s;return e=r(O.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),o=Math.floor(t.baseMediaDecodeTime/(F+1)),s=Math.floor(t.baseMediaDecodeTime%(F+1)),n=r(O.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),"audio"===t.type?(i=T(t,92),r(O.traf,e,n,i)):(a=_(t),i=T(t,a.length+92),r(O.traf,e,n,i,a))},p=function(t){return t.duration=t.duration||4294967295,r(O.trak,g(t),v(t))},S=function(t){var e=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(e[e.length-1]=0),r(O.trex,e)},function(){var t,e,n;n=function(t,e){var n=0,r=0,i=0,a=0;return t.length&&(void 0!==t[0].duration&&(n=1),void 0!==t[0].size&&(r=2),void 0!==t[0].flags&&(i=4),void 0!==t[0].compositionTimeOffset&&(a=8)),[0,0,n|r|i|a,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e]},e=function(t,e){var i,a,o,s;for(i=n(a=t.samples||[],e+=20+16*a.length),s=0;s<a.length;s++)i=i.concat([(4278190080&(o=a[s]).duration)>>>24,(16711680&o.duration)>>>16,(65280&o.duration)>>>8,255&o.duration,(4278190080&o.size)>>>24,(16711680&o.size)>>>16,(65280&o.size)>>>8,255&o.size,o.flags.isLeading<<2|o.flags.dependsOn,o.flags.isDependedOn<<6|o.flags.hasRedundancy<<4|o.flags.paddingValue<<1|o.flags.isNonSyncSample,61440&o.flags.degradationPriority,15&o.flags.degradationPriority,(4278190080&o.compositionTimeOffset)>>>24,(16711680&o.compositionTimeOffset)>>>16,(65280&o.compositionTimeOffset)>>>8,255&o.compositionTimeOffset]);return r(O.trun,new Uint8Array(i))},t=function(t,e){var i,a,o,s;for(i=n(a=t.samples||[],e+=20+8*a.length),s=0;s<a.length;s++)i=i.concat([(4278190080&(o=a[s]).duration)>>>24,(16711680&o.duration)>>>16,(65280&o.duration)>>>8,255&o.duration,(4278190080&o.size)>>>24,(16711680&o.size)>>>16,(65280&o.size)>>>8,255&o.size]);return r(O.trun,new Uint8Array(i))},T=function(n,r){return"audio"===n.type?t(n,r):e(n,r)}}(),e.exports={ftyp:o,mdat:s,moof:c,moov:h,initSegment:function(t){var e,n=o(),r=h(t);return(e=new Uint8Array(n.byteLength+r.byteLength)).set(n),e.set(r,n.byteLength),e}}},{}],57:[function(t,e,n){"use strict";var r,i,a,o;r=function(t,e){var n,a,o,s,u,l=[];if(!e.length)return null;for(n=0;n<t.byteLength;)a=t[n]<<24,a|=t[n+1]<<16,a|=t[n+2]<<8,a|=t[n+3],o=i(t.subarray(n+4,n+8)),s=a>1?n+a:t.byteLength,o===e[0]&&(1===e.length?l.push(t.subarray(n+8,s)):(u=r(t.subarray(n+8,s),e.slice(1))).length&&(l=l.concat(u))),n=s;return l},i=function(t){var e="";return e+=String.fromCharCode(t[0]),e+=String.fromCharCode(t[1]),(e+=String.fromCharCode(t[2]))+String.fromCharCode(t[3])},a=function(t){return r(t,["moov","trak"]).reduce(function(t,e){var n,i,a,o;return(n=r(e,["tkhd"])[0])?(a=n[i=0===n[0]?12:20]<<24|n[i+1]<<16|n[i+2]<<8|n[i+3],(o=r(e,["mdia","mdhd"])[0])?(t[a]=o[i=0===o[0]?12:20]<<24|o[i+1]<<16|o[i+2]<<8|o[i+3],t):null):null},{})},o=function(t,e){var n,i,a;return n=r(e,["moof","traf"]),i=[].concat.apply([],n.map(function(e){return r(e,["tfhd"]).map(function(n){var i;return i=t[n[4]<<24|n[5]<<16|n[6]<<8|n[7]]||9e4,(r(e,["tfdt"]).map(function(t){var e;return e=t[4]<<24|t[5]<<16|t[6]<<8|t[7],1===t[0]&&(e*=Math.pow(2,32),e+=t[8]<<24|t[9]<<16|t[10]<<8|t[11]),e})[0]||1/0)/i})})),a=Math.min.apply(null,i),isFinite(a)?a:0},e.exports={parseType:i,timescale:a,startTime:o}},{}],58:[function(t,e,n){"use strict";var r,i,a,o,s,u,l,c,h,f,d=t(62),p=t(56),g=t(50),v=t(40),m=t(41).H264Stream,y=t(38),_=t(42),b=t(60),x=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],w=["width","height","profileIdc","levelIdc","profileCompatibility"];s=function(t){return t[0]==="I".charCodeAt(0)&&t[1]==="D".charCodeAt(0)&&t[2]==="3".charCodeAt(0)},h=function(t,e){var n;if(t.length!==e.length)return!1;for(n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},f=function(t){var e,n=0;for(e=0;e<t.length;e++)n+=t[e].data.byteLength;return n},(i=function(t){var e=[],n=0,r=0,a=0,o=1/0;i.prototype.init.call(this),this.push=function(n){u(t,n),t&&x.forEach(function(e){t[e]=n[e]}),e.push(n)},this.setEarliestDts=function(e){r=e-t.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(t){o=t},this.setAudioAppendStart=function(t){a=t},this.flush=function(){var r,i,a,o;0!==e.length?(r=this.trimAdtsFramesByEarliestDts_(e),t.baseMediaDecodeTime=c(t),this.prefixWithSilence_(t,r),t.samples=this.generateSampleTable_(r),a=p.mdat(this.concatenateFrameData_(r)),e=[],i=p.moof(n,[t]),o=new Uint8Array(i.byteLength+a.byteLength),n++,o.set(i),o.set(a,i.byteLength),l(t),this.trigger("data",{track:t,boxes:o}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(t,e){var n,r,i,s=0,u=0,l=0,c=0;if(e.length&&(n=b.audioTsToVideoTs(t.baseMediaDecodeTime,t.samplerate),s=Math.ceil(9e4/(t.samplerate/1024)),a&&o&&(u=n-Math.max(a,o),c=(l=Math.floor(u/s))*s),!(l<1||c>45e3))){for((r=_[t.samplerate])||(r=e[0].data),i=0;i<l;i++)e.splice(i,0,{data:r});t.baseMediaDecodeTime-=Math.floor(b.videoTsToAudioTs(c,t.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(e){return t.minSegmentDts>=r?e:(t.minSegmentDts=1/0,e.filter(function(e){return e.dts>=r&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)}))},this.generateSampleTable_=function(t){var e,n=[];for(e=0;e<t.length;e++)n.push({size:t[e].data.byteLength,duration:1024});return n},this.concatenateFrameData_=function(t){var e,n,r=0,i=new Uint8Array(f(t));for(e=0;e<t.length;e++)i.set((n=t[e]).data,r),r+=n.data.byteLength;return i}}).prototype=new d,(r=function(t,e){var n,i,a=0,o=[],s=[];e=e||{},r.prototype.init.call(this),delete t.minPTS,this.gopCache_=[],this.push=function(e){u(t,e),"seq_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.config,t.sps=[e.data],w.forEach(function(e){t[e]=n[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||i||(i=e.data,t.pps=[e.data]),o.push(e)},this.flush=function(){for(var n,r,i,h,f,d;o.length&&"access_unit_delimiter_rbsp"!==o[0].nalUnitType;)o.shift();if(0===o.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=this.groupNalsIntoFrames_(o),(i=this.groupFramesIntoGops_(n))[0][0].keyFrame||((r=this.getGopForFusion_(o[0],t))?(i.unshift(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.pts=r.pts,i.dts=r.dts,i.duration+=r.duration):i=this.extendFirstKeyFrame_(i)),s.length){var g;if(!(g=e.alignGopsAtEnd?this.alignGopsAtEnd_(i):this.alignGopsAtStart_(i)))return this.gopCache_.unshift({gop:i.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");l(t),i=g}u(t,i),t.samples=this.generateSampleTable_(i),f=p.mdat(this.concatenateNalData_(i)),t.baseMediaDecodeTime=c(t),this.trigger("processedGopsInfo",i.map(function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}})),this.gopCache_.unshift({gop:i.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.trigger("baseMediaDecodeTime",t.baseMediaDecodeTime),this.trigger("timelineStartInfo",t.timelineStartInfo),h=p.moof(a,[t]),d=new Uint8Array(h.byteLength+f.byteLength),a++,d.set(h),d.set(f,h.byteLength),this.trigger("data",{track:t,boxes:d}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){l(t),n=void 0,i=void 0},this.getGopForFusion_=function(e){var n,r,i,a,o,s=1/0;for(o=0;o<this.gopCache_.length;o++)i=(a=this.gopCache_[o]).gop,t.pps&&h(t.pps[0],a.pps[0])&&t.sps&&h(t.sps[0],a.sps[0])&&(i.dts<t.timelineStartInfo.dts||(n=e.dts-i.dts-i.duration)>=-1e4&&n<=45e3&&(!r||s>n)&&(r=a,s=n));return r?r.gop:null},this.extendFirstKeyFrame_=function(t){var e;return!t[0][0].keyFrame&&t.length>1&&(e=t.shift(),t.byteLength-=e.byteLength,t.nalCount-=e.nalCount,t[0][0].dts=e.dts,t[0][0].pts=e.pts,t[0][0].duration+=e.duration),t},this.groupNalsIntoFrames_=function(t){var e,n,r=[],i=[];for(r.byteLength=0,e=0;e<t.length;e++)"access_unit_delimiter_rbsp"===(n=t[e]).nalUnitType?(r.length&&(r.duration=n.dts-r.dts,i.push(r)),(r=[n]).byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return i.length&&(!r.duration||r.duration<=0)&&(r.duration=i[i.length-1].duration),i.push(r),i},this.groupFramesIntoGops_=function(t){var e,n,r=[],i=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=t[0].pts,r.dts=t[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=t[0].pts,i.dts=t[0].dts,e=0;e<t.length;e++)(n=t[e]).keyFrame?(r.length&&(i.push(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration),(r=[n]).nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return i.length&&r.duration<=0&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration,i.push(r),i},this.generateSampleTable_=function(t,e){var n,r,i,a,o,s=e||0,u=[];for(n=0;n<t.length;n++)for(a=t[n],r=0;r<a.length;r++)o=a[r],(i={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}}).dataOffset=s,i.compositionTimeOffset=o.pts-o.dts,i.duration=o.duration,i.size=4*o.length,i.size+=o.byteLength,o.keyFrame&&(i.flags.dependsOn=2),s+=i.size,u.push(i);return u},this.concatenateNalData_=function(t){var e,n,r,i,a,o,s=0,u=new Uint8Array(t.byteLength+4*t.nalCount),l=new DataView(u.buffer);for(e=0;e<t.length;e++)for(i=t[e],n=0;n<i.length;n++)for(a=i[n],r=0;r<a.length;r++)l.setUint32(s,(o=a[r]).data.byteLength),u.set(o.data,s+=4),s+=o.data.byteLength;return u},this.alignGopsAtStart_=function(t){var e,n,r,i,a,o,u,l;for(a=t.byteLength,o=t.nalCount,u=t.duration,e=n=0;e<s.length&&n<t.length&&(r=s[e]).pts!==(i=t[n]).pts;)i.pts>r.pts?e++:(n++,a-=i.byteLength,o-=i.nalCount,u-=i.duration);return 0===n?t:n===t.length?null:((l=t.slice(n)).byteLength=a,l.duration=u,l.nalCount=o,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(t){var e,n,r,i,a,o,u;for(e=s.length-1,n=t.length-1,a=null,o=!1;e>=0&&n>=0;){if((r=s[e]).pts===(i=t[n]).pts){o=!0;break}r.pts>i.pts?e--:(e===s.length-1&&(a=n),n--)}if(!o&&null===a)return null;if(0===(u=o?n:a))return t;var l=t.slice(u),c=l.reduce(function(t,e){return t.byteLength+=e.byteLength,t.duration+=e.duration,t.nalCount+=e.nalCount,t},{byteLength:0,duration:0,nalCount:0});return l.byteLength=c.byteLength,l.duration=c.duration,l.nalCount=c.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(t){s=t}}).prototype=new d,u=function(t,e){"number"==typeof e.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=e.pts),t.minSegmentPts=void 0===t.minSegmentPts?e.pts:Math.min(t.minSegmentPts,e.pts),t.maxSegmentPts=void 0===t.maxSegmentPts?e.pts:Math.max(t.maxSegmentPts,e.pts)),"number"==typeof e.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),t.minSegmentDts=void 0===t.minSegmentDts?e.dts:Math.min(t.minSegmentDts,e.dts),t.maxSegmentDts=void 0===t.maxSegmentDts?e.dts:Math.max(t.maxSegmentDts,e.dts))},l=function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},c=function(t){var e;return e=t.timelineStartInfo.baseMediaDecodeTime,e+=t.minSegmentDts-t.timelineStartInfo.dts,e=Math.max(0,e),"audio"===t.type&&(e*=t.samplerate/9e4,e=Math.floor(e)),e},(o=function(t,e){this.numberOfTracks=0,this.metadataStream=e,this.remuxTracks=void 0===t.remux||!!t.remux,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,o.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBoxes.push(t.boxes),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track),void("audio"===t.track.type&&(this.audioTrack=t.track)))}}).prototype=new d,o.prototype.flush=function(t){var e,n,r,i,a=0,o={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return void(++this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,w.forEach(function(t){o.info[t]=this.videoTrack[t]},this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,x.forEach(function(t){o.info[t]=this.audioTrack[t]},this)),o.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined",this.emittedTracks+=this.pendingTracks.length,r=p.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(r.byteLength),o.initSegment.set(r),o.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)o.data.set(this.pendingBoxes[i],a),a+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(e=this.pendingCaptions[i]).startTime=e.startPts-s,e.startTime/=9e4,e.endTime=e.endPts-s,e.endTime/=9e4,o.captionStreams[e.stream]=!0,o.captions.push(e);for(i=0;i<this.pendingMetadata.length;i++)(n=this.pendingMetadata[i]).cueTime=n.pts-s,n.cueTime/=9e4,o.metadata.push(n);o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(a=function(t){var e,n,u=this,c=!0;a.prototype.init.call(this),this.baseMediaDecodeTime=(t=t||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var e={};this.transmuxPipeline_=e,e.type="aac",e.metadataStream=new g.MetadataStream,e.aacStream=new y,e.audioTimestampRolloverStream=new g.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new g.TimestampRolloverStream("timed-metadata"),e.adtsStream=new v,e.coalesceStream=new o(t,e.metadataStream),e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadataStream).pipe(e.coalesceStream),e.metadataStream.on("timestamp",function(t){e.aacStream.setTimestamp(t.timeStamp)}),e.aacStream.on("data",function(t){"timed-metadata"!==t.type||e.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:u.baseMediaDecodeTime},codec:"adts",type:"audio"},e.coalesceStream.numberOfTracks++,e.audioSegmentStream=new i(n),e.adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream))}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var a={};this.transmuxPipeline_=a,a.type="ts",a.metadataStream=new g.MetadataStream,a.packetStream=new g.TransportPacketStream,a.parseStream=new g.TransportParseStream,a.elementaryStream=new g.ElementaryStream,a.videoTimestampRolloverStream=new g.TimestampRolloverStream("video"),a.audioTimestampRolloverStream=new g.TimestampRolloverStream("audio"),a.timedMetadataTimestampRolloverStream=new g.TimestampRolloverStream("timed-metadata"),a.adtsStream=new v,a.h264Stream=new m,a.captionStream=new g.CaptionStream,a.coalesceStream=new o(t,a.metadataStream),a.headOfPipeline=a.packetStream,a.packetStream.pipe(a.parseStream).pipe(a.elementaryStream),a.elementaryStream.pipe(a.videoTimestampRolloverStream).pipe(a.h264Stream),a.elementaryStream.pipe(a.audioTimestampRolloverStream).pipe(a.adtsStream),a.elementaryStream.pipe(a.timedMetadataTimestampRolloverStream).pipe(a.metadataStream).pipe(a.coalesceStream),a.h264Stream.pipe(a.captionStream).pipe(a.coalesceStream),a.elementaryStream.on("data",function(o){var s;if("metadata"===o.type){for(s=o.tracks.length;s--;)e||"video"!==o.tracks[s].type?n||"audio"!==o.tracks[s].type||((n=o.tracks[s]).timelineStartInfo.baseMediaDecodeTime=u.baseMediaDecodeTime):(e=o.tracks[s]).timelineStartInfo.baseMediaDecodeTime=u.baseMediaDecodeTime;e&&!a.videoSegmentStream&&(a.coalesceStream.numberOfTracks++,a.videoSegmentStream=new r(e,t),a.videoSegmentStream.on("timelineStartInfo",function(t){n&&(n.timelineStartInfo=t,a.audioSegmentStream.setEarliestDts(t.dts))}),a.videoSegmentStream.on("processedGopsInfo",u.trigger.bind(u,"gopInfo")),a.videoSegmentStream.on("baseMediaDecodeTime",function(t){n&&a.audioSegmentStream.setVideoBaseMediaDecodeTime(t)}),a.h264Stream.pipe(a.videoSegmentStream).pipe(a.coalesceStream)),n&&!a.audioSegmentStream&&(a.coalesceStream.numberOfTracks++,a.audioSegmentStream=new i(n),a.adtsStream.pipe(a.audioSegmentStream).pipe(a.coalesceStream))}}),a.coalesceStream.on("data",this.trigger.bind(this,"data")),a.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(t){var r=this.transmuxPipeline_;this.baseMediaDecodeTime=t,n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,l(n),n.timelineStartInfo.baseMediaDecodeTime=t,r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),e&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[],r.videoTimestampRolloverStream.discontinuity()),e.timelineStartInfo.dts=void 0,e.timelineStartInfo.pts=void 0,l(e),r.captionStream.reset(),e.timelineStartInfo.baseMediaDecodeTime=t),r.timedMetadataTimestampRolloverStream&&r.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.alignGopsWith=function(t){e&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(t)},this.push=function(t){if(c){var e=s(t);e&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():e||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),c=!1}this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){c=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new d,e.exports={Transmuxer:a,VideoSegmentStream:r,AudioSegmentStream:i,AUDIO_PROPERTIES:x,VIDEO_PROPERTIES:w}},{}],59:[function(t,e,n){"use strict";var r=t(53),i=t(54).handleRollover,a={};a.ts=t(52),a.aac=t(39);var o=function(t,e,n){for(var r,i,o,s,u=0,l=188,c=!1;l<t.byteLength;)if(71!==t[u]||71!==t[l])u++,l++;else{switch(r=t.subarray(u,l),a.ts.parseType(r,e.pid)){case"pes":i=a.ts.parsePesType(r,e.table),o=a.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&o&&(s=a.ts.parsePesTime(r))&&(s.type="audio",n.audio.push(s),c=!0)}if(c)break;u+=188,l+=188}for(u=(l=t.byteLength)-188,c=!1;u>=0;)if(71!==t[u]||71!==t[l])u--,l--;else{switch(r=t.subarray(u,l),a.ts.parseType(r,e.pid)){case"pes":i=a.ts.parsePesType(r,e.table),o=a.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&o&&(s=a.ts.parsePesTime(r))&&(s.type="audio",n.audio.push(s),c=!0)}if(c)break;u-=188,l-=188}},s=function(t,e,n){for(var r,i,o,s,u,l,c,h=0,f=188,d=!1,p={data:[],size:0};f<t.byteLength;)if(71!==t[h]||71!==t[f])h++,f++;else{switch(r=t.subarray(h,f),a.ts.parseType(r,e.pid)){case"pes":if(i=a.ts.parsePesType(r,e.table),o=a.ts.parsePayloadUnitStartIndicator(r),"video"===i&&(o&&!d&&(s=a.ts.parsePesTime(r))&&(s.type="video",n.video.push(s),d=!0),!n.firstKeyFrame)){if(o&&0!==p.size){for(u=new Uint8Array(p.size),l=0;p.data.length;)c=p.data.shift(),u.set(c,l),l+=c.byteLength;a.ts.videoPacketContainsKeyFrame(u)&&(n.firstKeyFrame=a.ts.parsePesTime(u),n.firstKeyFrame.type="video"),p.size=0}p.data.push(r),p.size+=r.byteLength}}if(d&&n.firstKeyFrame)break;h+=188,f+=188}for(h=(f=t.byteLength)-188,d=!1;h>=0;)if(71!==t[h]||71!==t[f])h--,f--;else{switch(r=t.subarray(h,f),a.ts.parseType(r,e.pid)){case"pes":i=a.ts.parsePesType(r,e.table),o=a.ts.parsePayloadUnitStartIndicator(r),"video"===i&&o&&(s=a.ts.parsePesTime(r))&&(s.type="video",n.video.push(s),d=!0)}if(d)break;h-=188,f-=188}};e.exports={inspect:function(t,e){var n;return(n=function(t){return t[0]==="I".charCodeAt(0)&&t[1]==="D".charCodeAt(0)&&t[2]==="3".charCodeAt(0)}(t)?function(t){for(var e,n=!1,r=0,i=null,o=null,s=0,u=0;t.length-u>=3;){switch(a.aac.parseType(t,u)){case"timed-metadata":if(t.length-u<10){n=!0;break}if((s=a.aac.parseId3TagSize(t,u))>t.length){n=!0;break}null===o&&(e=t.subarray(u,u+s),o=a.aac.parseAacTimestamp(e)),u+=s;break;case"audio":if(t.length-u<7){n=!0;break}if((s=a.aac.parseAdtsSize(t,u))>t.length){n=!0;break}null===i&&(e=t.subarray(u,u+s),i=a.aac.parseSampleRate(e)),r++,u+=s;break;default:u++}if(n)return null}if(null===i||null===o)return null;var l=9e4/i;return{audio:[{type:"audio",dts:o,pts:o},{type:"audio",dts:o+1024*r*l,pts:o+1024*r*l}]}}(t):function(t){var e={pid:null,table:null},n={};for(var i in function(t,e){for(var n,r=0,i=188;i<t.byteLength;)if(71!==t[r]||71!==t[i])r++,i++;else{switch(n=t.subarray(r,i),a.ts.parseType(n,e.pid)){case"pat":e.pid||(e.pid=a.ts.parsePat(n));break;case"pmt":e.table||(e.table=a.ts.parsePmt(n))}if(e.pid&&e.table)return;r+=188,i+=188}}(t,e),e.table)if(e.table.hasOwnProperty(i))switch(e.table[i]){case r.H264_STREAM_TYPE:n.video=[],s(t,e,n),0===n.video.length&&delete n.video;break;case r.ADTS_STREAM_TYPE:n.audio=[],o(t,e,n),0===n.audio.length&&delete n.audio}return n}(t))&&(n.audio||n.video)?(function(t,e){if(t.audio&&t.audio.length){var n=e;void 0===n&&(n=t.audio[0].dts),t.audio.forEach(function(t){t.dts=i(t.dts,n),t.pts=i(t.pts,n),t.dtsTime=t.dts/9e4,t.ptsTime=t.pts/9e4})}if(t.video&&t.video.length){var r=e;if(void 0===r&&(r=t.video[0].dts),t.video.forEach(function(t){t.dts=i(t.dts,r),t.pts=i(t.pts,r),t.dtsTime=t.dts/9e4,t.ptsTime=t.pts/9e4}),t.firstKeyFrame){var a=t.firstKeyFrame;a.dts=i(a.dts,r),a.pts=i(a.pts,r),a.dtsTime=a.dts/9e4,a.ptsTime=a.dts/9e4}}}(n,e),n):null}}},{}],60:[function(t,e,n){var r,i,a,o;e.exports={secondsToVideoTs:r=function(t){return 9e4*t},secondsToAudioTs:i=function(t,e){return t*e},videoTsToSeconds:a=function(t){return t/9e4},audioTsToSeconds:o=function(t,e){return t/e},audioTsToVideoTs:function(t,e){return r(o(t,e))},videoTsToAudioTs:function(t,e){return i(a(t),e)}}},{}],61:[function(t,e,n){"use strict";var r;r=function(t){var e=t.byteLength,n=0,r=0;this.length=function(){return 8*e},this.bitsAvailable=function(){return 8*e+r},this.loadWord=function(){var i=t.byteLength-e,a=new Uint8Array(4),o=Math.min(4,e);if(0===o)throw new Error("no bytes available");a.set(t.subarray(i,i+o)),n=new DataView(a.buffer).getUint32(0),r=8*o,e-=o},this.skipBits=function(t){var i;r>t?(n<<=t,r-=t):(t-=r,t-=8*(i=Math.floor(t/8)),e-=i,this.loadWord(),n<<=t,r-=t)},this.readBits=function(t){var i=Math.min(r,t),a=n>>>32-i;return(r-=i)>0?n<<=i:e>0&&this.loadWord(),(i=t-i)>0?a<<i|this.readBits(i):a},this.skipLeadingZeros=function(){var t;for(t=0;t<r;++t)if(0!=(n&2147483648>>>t))return n<<=t,r-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},e.exports=r},{}],62:[function(t,e,n){"use strict";var r=function(){this.init=function(){var t={};this.on=function(e,n){t[e]||(t[e]=[]),t[e]=t[e].concat(n)},this.off=function(e,n){var r;return!!t[e]&&(r=t[e].indexOf(n),t[e]=t[e].slice(),t[e].splice(r,1),r>-1)},this.trigger=function(e){var n,r,i,a;if(n=t[e])if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,arguments[1]);else{for(a=[],r=arguments.length,r=1;r<arguments.length;++r)a.push(arguments[r]);for(i=n.length,r=0;r<i;++r)n[r].apply(this,a)}},this.dispose=function(){t={}}}};r.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),t},r.prototype.push=function(t){this.trigger("data",t)},r.prototype.flush=function(t){this.trigger("done",t)},e.exports=r},{}],63:[function(t,e,n){!function(t){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/;?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var r=this.parseURL(t);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var a=this.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):e;var o=this.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var u=i.exec(o.path);o.netLoc=u[1],o.path=u[2]}o.netLoc&&!o.path&&(o.path="/");var l={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(l.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var c=o.path,h=c.substring(0,c.lastIndexOf("/")+1)+a.path;l.path=s.normalizePath(h)}else l.path=o.path,a.params||(l.params=o.params,a.query||(l.query=o.query));return null===l.path&&(l.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(l)},parseURL:function(t){var e=r.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(a,"");t.length!==(t=t.replace(o,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};"object"==typeof n&&"object"==typeof e?e.exports=s:"function"==typeof define&&define.amd?define([],function(){return s}):"object"==typeof n?n.URLToolkit=s:t.URLToolkit=s}(this)},{}],64:[function(t,e,n){(function(r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=i(t(32)),o=i("undefined"!=typeof window?window.videojs:void 0!==r?r.videojs:null),s=function(t){return isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t};n.default={addTextTrackData:function(t,e,n){var r=a.default.WebKitDataCue||a.default.VTTCue;e&&e.forEach(function(t){this.inbandTextTracks_[t.stream].addCue(new r(t.startTime+this.timestampOffset,t.endTime+this.timestampOffset,t.text))},t),n&&function(){var e=s(t.mediaSource_.duration);n.forEach(function(t){var e=t.cueTime+this.timestampOffset;t.frames.forEach(function(t){var n=new r(e,e,t.value||t.url||t.data||"");n.frame=t,n.value=t,function(t){Object.defineProperties(t.frame,{id:{get:function(){return o.default.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return o.default.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return o.default.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})}(n),this.metadataTrack_.addCue(n)},this)},t),t.metadataTrack_&&t.metadataTrack_.cues&&t.metadataTrack_.cues.length&&function(){for(var n=t.metadataTrack_.cues,r=[],i=0;i<n.length;i++)n[i]&&r.push(n[i]);var a=r.reduce(function(t,e){var n=t[e.startTime]||[];return n.push(e),t[e.startTime]=n,t},{}),o=Object.keys(a).sort(function(t,e){return Number(t)-Number(e)});o.forEach(function(t,n){var r=a[t],i=Number(o[n+1])||e;r.forEach(function(t){t.endTime=i})})}()}()},durationOfVideo:s},e.exports=n.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],65:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={isAudioCodec:function(t){return/mp4a\.\d+.\d+/i.test(t)},parseContentType:function(t){var e={type:"",parameters:{}},n=t.trim().split(";");return e.type=n.shift().trim(),n.forEach(function(t){var n=t.trim().split("=");if(n.length>1){var r=n[0].replace(/"/g,"").trim(),i=n[1].replace(/"/g,"").trim();e.parameters[r]=i}}),e},isVideoCodec:function(t){return/avc1\.[\da-f]+/i.test(t)},translateLegacyCodecs:function(t){return t.map(function(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,function(t,e,n){return"avc1."+("00"+Number(e).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})})}},e.exports=n.default},{}],66:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n){var r=e.player_;if(n.captions&&n.captions.length)for(var i in t.inbandTextTracks_||(t.inbandTextTracks_={}),n.captionStreams)if(!t.inbandTextTracks_[i]){r.tech_.trigger({type:"usage",name:"hls-608"});var a=r.textTracks().getTrackById(i);t.inbandTextTracks_[i]=a||r.addRemoteTextTrack({kind:"captions",id:i,label:i},!1).track}n.metadata&&n.metadata.length&&!t.metadataTrack_&&(t.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)},e.exports=n.default},{}],67:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={TIME_BETWEEN_CHUNKS:1,BYTES_PER_CHUNK:32768},e.exports=n.default},{}],68:[function(t,e,n){(function(r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},s=i(t(31)),u=i("undefined"!=typeof window?window.videojs:void 0!==r?r.videojs:null),l=i(t(69)),c=i(t(67)),h=t(65),f=function(t){function e(){var t=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.sourceBuffers=[],this.readyState="closed",this.on(["sourceopen","webkitsourceopen"],function(e){t.swfObj=s.default.getElementById(e.swfId),t.player_=(0,u.default)(t.swfObj.parentNode),t.tech_=t.swfObj.tech,t.readyState="open",t.tech_.on("seeking",function(){for(var e=t.sourceBuffers.length;e--;)t.sourceBuffers[e].abort()}),t.swfObj&&t.swfObj.vjs_load()})}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default.EventTarget),a(e,[{key:"addSeekableRange_",value:function(){}},{key:"addSourceBuffer",value:function(t){var e,n=(0,h.parseContentType)(t);if("video/mp2t"!==n.type&&"audio/mp2t"!==n.type)throw new Error("NotSupportedError (Video.js)");return e=new l.default(this),this.sourceBuffers.push(e),e}},{key:"endOfStream",value:function(t){"network"===t?this.tech_.error(2):"decode"===t&&this.tech_.error(3),"ended"!==this.readyState&&(this.readyState="ended",this.swfObj.vjs_endOfStream())}}]),e}();n.default=f;try{Object.defineProperty(f.prototype,"duration",{get:function(){return this.swfObj?this.swfObj.vjs_getProperty("duration"):NaN},set:function(t){var e=void 0,n=this.swfObj.vjs_getProperty("duration");if(this.swfObj.vjs_setProperty("duration",t),t<n)for(e=0;e<this.sourceBuffers.length;e++)this.sourceBuffers[e].remove(t,n);return t}})}catch(t){f.prototype.duration=NaN}for(var d in c.default)f[d]=c.default[d];e.exports=n.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],69:[function(t,e,n){(function(r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},s=i(t(32)),u=i("undefined"!=typeof window?window.videojs:void 0!==r?r.videojs:null),l=i(t(46)),c=i(t(72)),h=i(t(66)),f=t(64),d=i(t(70)),p=i(t(76)),g=i(t(67)),v=function(){var e=void 0;try{e=t.resolve("./flash-transmuxer-worker")}catch(t){}return e},m=function(t){s.default.setTimeout(t,g.default.TIME_BETWEEN_CHUNKS)},y=function(){return Math.random().toString(36).slice(2,8)},_=function(t,e){("number"!=typeof e||e<0)&&(e=0);var n=Math.pow(10,e);return Math.round(t*n)/n},b=function(t){function e(t){var n,r=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.chunkSize_=g.default.BYTES_PER_CHUNK,this.buffer_=[],this.bufferSize_=0,this.basePtsOffset_=NaN,this.mediaSource_=t,this.audioBufferEnd_=NaN,this.videoBufferEnd_=NaN,this.updating=!1,this.timestampOffset_=0,n=s.default.btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(l.default.getFlvHeader())));var i=this.mediaSource_.player_.id().replace(/[^a-zA-Z0-9]/g,"_");this.flashEncodedHeaderName_="vjs_flashEncodedHeader_"+i+y(),this.flashEncodedDataName_="vjs_flashEncodedData_"+i+y(),s.default[this.flashEncodedHeaderName_]=function(){return delete s.default[r.flashEncodedHeaderName_],n},this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedHeaderName_),this.transmuxer_=(0,p.default)(d.default,v()),this.transmuxer_.postMessage({action:"init",options:{}}),this.transmuxer_.onmessage=function(t){"data"===t.data.action&&r.receiveBuffer_(t.data.segment)},this.one("updateend",function(){r.mediaSource_.tech_.trigger("loadedmetadata")}),Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(t){"number"==typeof t&&t>=0&&(this.timestampOffset_=t,this.mediaSource_.swfObj.vjs_discontinuity(),this.basePtsOffset_=NaN,this.audioBufferEnd_=NaN,this.videoBufferEnd_=NaN,this.transmuxer_.postMessage({action:"reset"}))}}),Object.defineProperty(this,"buffered",{get:function(){if(!(this.mediaSource_&&this.mediaSource_.swfObj&&"vjs_getProperty"in this.mediaSource_.swfObj))return u.default.createTimeRange();var t=this.mediaSource_.swfObj.vjs_getProperty("buffered");return t&&t.length&&(t[0][0]=_(t[0][0],3),t[0][1]=_(t[0][1],3)),u.default.createTimeRanges(t)}}),this.mediaSource_.player_.on("seeked",function(){if((0,c.default)(0,1/0,r.metadataTrack_),r.inbandTextTracks_)for(var t in r.inbandTextTracks_)(0,c.default)(0,1/0,r.inbandTextTracks_[t])});var a=this.onHlsReset_.bind(this);this.mediaSource_.player_.tech_.on("hls-reset",a),this.mediaSource_.player_.tech_.hls.on("dispose",function(){r.transmuxer_.terminate(),r.mediaSource_.player_.tech_.off("hls-reset",a)})}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,u.default.EventTarget),a(e,[{key:"appendBuffer",value:function(t){var e=void 0;if(this.updating)throw(e=new Error("SourceBuffer.append() cannot be called while an update is in progress")).name="InvalidStateError",e.code=11,e;this.updating=!0,this.mediaSource_.readyState="open",this.trigger({type:"update"}),this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"abort",value:function(){this.buffer_=[],this.bufferSize_=0,this.mediaSource_.swfObj.vjs_abort(),this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"remove",value:function(t,e){if((0,c.default)(t,e,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)(0,c.default)(t,e,this.inbandTextTracks_[n]);this.trigger({type:"update"}),this.trigger({type:"updateend"})}},{key:"receiveBuffer_",value:function(t){var e=this;(0,h.default)(this,this.mediaSource_,t),(0,f.addTextTrackData)(this,t.captions,t.metadata),m(function(){var n=e.convertTagsToData_(t);0===e.buffer_.length&&m(e.processBuffer_.bind(e)),n&&(e.buffer_.push(n),e.bufferSize_+=n.byteLength)})}},{key:"processBuffer_",value:function(){var t=this,e=g.default.BYTES_PER_CHUNK;if(this.buffer_.length){var n=this.buffer_[0].subarray(0,e);n.byteLength<e||this.buffer_[0].byteLength===e?this.buffer_.shift():this.buffer_[0]=this.buffer_[0].subarray(e),this.bufferSize_-=n.byteLength;for(var r=[],i=n.byteLength,a=0;a<i;a++)r.push(String.fromCharCode(n[a]));var o=s.default.btoa(r.join(""));s.default[this.flashEncodedDataName_]=function(){return m(t.processBuffer_.bind(t)),delete s.default[t.flashEncodedDataName_],o},this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedDataName_)}else!1!==this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"convertTagsToData_",value:function(t){var e=0,n=this.mediaSource_.tech_,r=0,i=void 0,a=t.tags.videoTags,o=t.tags.audioTags;isNaN(this.basePtsOffset_)&&(a.length||o.length)&&(this.basePtsOffset_=Math.min((o[0]||{pts:1/0}).pts,(a[0]||{pts:1/0}).pts)),n.seeking()&&(this.videoBufferEnd_=NaN,this.audioBufferEnd_=NaN),isNaN(this.videoBufferEnd_)?(n.buffered().length&&(r=n.buffered().end(0)-this.timestampOffset),n.seeking()&&(r=Math.max(r,n.currentTime()-this.timestampOffset)),r*=1e3,r+=this.basePtsOffset_):r=this.videoBufferEnd_+.1;var s=a.length;if(s&&a[s-1].pts>=r){for(;--s;){var u=a[s];if(!(u.pts>r)&&(u.keyFrame||u.metaDataTag))break}for(;s&&a[s-1].metaDataTag;)s--}var l=a.slice(s),c=void 0;for(c=isNaN(this.audioBufferEnd_)?r:this.audioBufferEnd_+.1,l.length&&(c=Math.min(c,l[0].pts)),s=0;s<o.length&&!(o[s].pts>=c);)s++;var h=o.slice(s);h.length&&(this.audioBufferEnd_=h[h.length-1].pts),l.length&&(this.videoBufferEnd_=l[l.length-1].pts);var f=this.getOrderedTags_(l,h);if(0!==f.length){if(f[0].pts<r&&n.seeking()){var d=n.currentTime()-(r-f[0].pts)/1e3;d<1/30&&(d=0);try{this.mediaSource_.swfObj.vjs_adjustCurrentTime(d)}catch(t){}}for(var p=0;p<f.length;p++)e+=f[p].bytes.byteLength;i=new Uint8Array(e),p=0;for(var g=0;p<f.length;p++)i.set(f[p].bytes,g),g+=f[p].bytes.byteLength;return i}}},{key:"getOrderedTags_",value:function(t,e){for(var n=void 0,r=[];t.length||e.length;)n=t.length?e.length&&e[0].dts<t[0].dts?e.shift():t.shift():e.shift(),r.push(n);return r}},{key:"onHlsReset_",value:function(){this.transmuxer_.postMessage({action:"resetCaptions"})}}]),e}();n.default=b,e.exports=n.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],70:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=r(t(32)),o=r(t(46)),s=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.options=e||{},this.init()}return i(t,[{key:"init",value:function(){var t;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new o.default.Transmuxer(this.options),(t=this.transmuxer).on("data",function(t){a.default.postMessage({action:"data",segment:t})}),t.on("done",function(t){a.default.postMessage({action:"done"})})}},{key:"push",value:function(t){var e=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(e)}},{key:"reset",value:function(){this.init()}},{key:"flush",value:function(){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}}]),t}();n.default=function(t){return new function(t){t.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new s(t.data.options):(this.messageHandlers||(this.messageHandlers=new s),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}(t)},e.exports=n.default},{}],71:[function(t,e,n){(function(r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},s=i(t(32)),u=i(t(31)),l=i("undefined"!=typeof window?window.videojs:void 0!==r?r.videojs:null),c=i(t(75)),h=t(64),f=t(65),d=function(t){function e(){var t=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this);var n=void 0;for(n in this.nativeMediaSource_=new s.default.MediaSource,this.nativeMediaSource_)n in e.prototype||"function"!=typeof this.nativeMediaSource_[n]||(this[n]=this.nativeMediaSource_[n].bind(this.nativeMediaSource_));this.duration_=NaN,Object.defineProperty(this,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(t){this.duration_=t,t===1/0||(this.nativeMediaSource_.duration=t)}}),Object.defineProperty(this,"seekable",{get:function(){return this.duration_===1/0?l.default.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(this,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(this,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),this.sourceBuffers=[],this.activeSourceBuffers_=[],this.updateActiveSourceBuffers_=function(){if(t.activeSourceBuffers_.length=0,1===t.sourceBuffers.length){var e=t.sourceBuffers[0];return e.appendAudioInitSegment_=!0,e.audioDisabled_=!e.audioCodec_,void t.activeSourceBuffers_.push(e)}for(var n=!1,r=!0,i=0;i<t.player_.audioTracks().length;i++){var a=t.player_.audioTracks()[i];if(a.enabled&&"main"!==a.kind){n=!0,r=!1;break}}t.sourceBuffers.forEach(function(e){if(e.appendAudioInitSegment_=!0,e.videoCodec_&&e.audioCodec_)e.audioDisabled_=n;else if(e.videoCodec_&&!e.audioCodec_)e.audioDisabled_=!0,r=!1;else if(!e.videoCodec_&&e.audioCodec_&&(e.audioDisabled_=r,r))return;t.activeSourceBuffers_.push(e)})},this.onPlayerMediachange_=function(){t.sourceBuffers.forEach(function(t){t.appendAudioInitSegment_=!0})},this.onHlsReset_=function(){t.sourceBuffers.forEach(function(t){t.transmuxer_&&t.transmuxer_.postMessage({action:"resetCaptions"})})},this.onHlsSegmentTimeMapping_=function(e){t.sourceBuffers.forEach(function(t){return t.timeMapping_=e.mapping})},["sourceopen","sourceclose","sourceended"].forEach(function(t){this.nativeMediaSource_.addEventListener(t,this.trigger.bind(this))},this),this.on("sourceopen",function(e){var n=u.default.querySelector('[src="'+t.url_+'"]');n&&(t.player_=(0,l.default)(n.parentNode),t.player_.tech_.on("hls-reset",t.onHlsReset_),t.player_.tech_.on("hls-segment-time-mapping",t.onHlsSegmentTimeMapping_),t.player_.audioTracks&&t.player_.audioTracks()&&(t.player_.audioTracks().on("change",t.updateActiveSourceBuffers_),t.player_.audioTracks().on("addtrack",t.updateActiveSourceBuffers_),t.player_.audioTracks().on("removetrack",t.updateActiveSourceBuffers_)),t.player_.on("mediachange",t.onPlayerMediachange_))}),this.on("sourceended",function(e){for(var n=(0,h.durationOfVideo)(t.duration),r=0;r<t.sourceBuffers.length;r++){var i=t.sourceBuffers[r],a=i.metadataTrack_&&i.metadataTrack_.cues;a&&a.length&&(a[a.length-1].endTime=n)}}),this.on("sourceclose",function(t){this.sourceBuffers.forEach(function(t){t.transmuxer_&&t.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))})}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l.default.EventTarget),a(e,[{key:"addSeekableRange_",value:function(t,e){var n=void 0;if(this.duration!==1/0)throw(n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",n.code=11,n;(e>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=e)}},{key:"addSourceBuffer",value:function(t){var e=void 0,n=(0,f.parseContentType)(t);if(/^(video|audio)\/mp2t$/i.test(n.type)){var r=[];n.parameters&&n.parameters.codecs&&(r=n.parameters.codecs.split(","),r=(r=(0,f.translateLegacyCodecs)(r)).filter(function(t){return(0,f.isAudioCodec)(t)||(0,f.isVideoCodec)(t)})),0===r.length&&(r=["avc1.4d400d","mp4a.40.2"]),e=new c.default(this,r),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),e.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else e=this.nativeMediaSource_.addSourceBuffer(t);return this.sourceBuffers.push(e),e}}]),e}();n.default=d,e.exports=n.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],72:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n){var r=void 0,i=void 0;if(n&&n.cues)for(r=n.cues.length;r--;)(i=n.cues[r]).startTime<=e&&i.endTime>=t&&n.removeCue(i)},e.exports=n.default},{}],73:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=r(t(32)),o=r(t(55)),s=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.options=e||{},this.init()}return i(t,[{key:"init",value:function(){var t;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new o.default.Transmuxer(this.options),(t=this.transmuxer).on("data",function(t){var e=t.initSegment;t.initSegment={data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength};var n=t.data;t.data=n.buffer,a.default.postMessage({action:"data",segment:t,byteOffset:n.byteOffset,byteLength:n.byteLength},[t.data])}),t.captionStream&&t.captionStream.on("data",function(t){a.default.postMessage({action:"caption",data:t})}),t.on("done",function(t){a.default.postMessage({action:"done"})}),t.on("gopInfo",function(t){a.default.postMessage({action:"gopInfo",gopInfo:t})})}},{key:"push",value:function(t){var e=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(e)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(t){this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*(t.timestampOffset||0)))}},{key:"setAudioAppendStart",value:function(t){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*t.appendStart))}},{key:"flush",value:function(t){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(t){this.transmuxer.alignGopsWith(t.gopsToAlignWith.slice())}}]),t}();n.default=function(t){return new function(t){t.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new s(t.data.options):(this.messageHandlers||(this.messageHandlers=new s),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}(t)},e.exports=n.default},{}],74:[function(t,e,n){(function(e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=r(t(32)),a=r(t(68)),o=r(t(71)),s=r("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),u=0,l={mode:"auto"};s.default.mediaSources={};var c=function(t,e){var n=s.default.mediaSources[t];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:e})},h=function(){return!!i.default.MediaSource&&!!i.default.MediaSource.isTypeSupported&&i.default.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},f=function(t){var e=s.default.mergeOptions(l,t);if(this.MediaSource={open:c,supportsNativeMediaSources:h},"html5"===e.mode||"auto"===e.mode&&h())return new o.default;if(s.default.getTech("Flash"))return new a.default;throw new Error("Cannot use Flash or Html5 to create a MediaSource for this video")};n.MediaSource=f,f.open=c,f.supportsNativeMediaSources=h;var d={createObjectURL:function(t){var e=void 0;return t instanceof o.default?(e=i.default.URL.createObjectURL(t.nativeMediaSource_),t.url_=e,e):t instanceof a.default?(e="blob:vjs-media-source/"+u,u++,s.default.mediaSources[e]=t,e):(e=i.default.URL.createObjectURL(t),t.url_=e,e)}};n.URL=d,s.default.MediaSource=f,s.default.URL=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],75:[function(t,e,n){(function(e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},o=r("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),s=r(t(66)),u=r(t(72)),l=t(64),c=r(t(76)),h=r(t(73)),f=t(65),d=function(){var e=void 0;try{e=t.resolve("./transmuxer-worker")}catch(t){}return e},p=function(t,e,n){if(!e||!t.length)return[];var r=Math.ceil(9e4*(e.currentTime()-n+3)),i=void 0;for(i=0;i<t.length&&!(t[i].pts>r);i++);return t.slice(i)};n.gopsSafeToAlignWith=p;var g=function(t,e,n){if(!e.length)return t;if(n)return e.slice();for(var r=e[0].pts,i=0;i<t.length&&!(t[i].pts>=r);i++);return t.slice(0,i).concat(e)};n.updateGopBuffer=g;var v=function(t,e,n,r){for(var i=Math.ceil(9e4*(e-r)),a=Math.ceil(9e4*(n-r)),o=t.slice(),s=t.length;s--&&!(t[s].pts<=a););if(-1===s)return o;for(var u=s+1;u--&&!(t[u].pts<=i););return u=Math.max(u,0),o.splice(u,s-u+1),o};n.removeGopBuffer=v;var m=function(t){function e(t,n){var r=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,o.default.EventTarget),this.timestampOffset_=0,this.pendingBuffers_=[],this.bufferUpdating_=!1,this.mediaSource_=t,this.codecs_=n,this.audioCodec_=null,this.videoCodec_=null,this.audioDisabled_=!1,this.appendAudioInitSegment_=!0,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=o.default.browser.IE_VERSION>=11;var i={remux:!1,alignGopsAtEnd:this.safeAppend_};this.codecs_.forEach(function(t){(0,f.isAudioCodec)(t)?r.audioCodec_=t:(0,f.isVideoCodec)(t)&&(r.videoCodec_=t)}),this.transmuxer_=(0,c.default)(h.default,d()),this.transmuxer_.postMessage({action:"init",options:i}),this.transmuxer_.onmessage=function(t){return"data"===t.data.action?r.data_(t):"done"===t.data.action?r.done_(t):"gopInfo"===t.data.action?r.appendGopInfo_(t):void 0},Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(t){"number"==typeof t&&t>=0&&(this.timestampOffset_=t,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t}))}}),Object.defineProperty(this,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(t){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=t),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=t)}}),Object.defineProperty(this,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(this,"buffered",{get:function(){var t=null,e=null,n=0,r=[],i=[];if(!this.videoBuffer_&&!this.audioBuffer_)return o.default.createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_)return this.videoBuffer_.buffered;if(this.audioDisabled_)return this.videoBuffer_.buffered;if(0===this.videoBuffer_.buffered.length&&0===this.audioBuffer_.buffered.length)return o.default.createTimeRange();for(var a=this.videoBuffer_.buffered,s=this.audioBuffer_.buffered,u=a.length;u--;)r.push({time:a.start(u),type:"start"}),r.push({time:a.end(u),type:"end"});for(u=s.length;u--;)r.push({time:s.start(u),type:"start"}),r.push({time:s.end(u),type:"end"});for(r.sort(function(t,e){return t.time-e.time}),u=0;u<r.length;u++)"start"===r[u].type?2==++n&&(t=r[u].time):"end"===r[u].type&&1==--n&&(e=r[u].time),null!==t&&null!==e&&(i.push([t,e]),t=null,e=null);return o.default.createTimeRanges(i)}})}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default.EventTarget),i(e,[{key:"data_",value:function(t){var e=t.data.segment;e.data=new Uint8Array(e.data,t.data.byteOffset,t.data.byteLength),e.initSegment=new Uint8Array(e.initSegment.data,e.initSegment.byteOffset,e.initSegment.byteLength),(0,s.default)(this,this.mediaSource_,e),this.pendingBuffers_.push(e)}},{key:"done_",value:function(t){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"createRealSourceBuffers_",value:function(){var t=this,e=["audio","video"];e.forEach(function(n){if(t[n+"Codec_"]&&!t[n+"Buffer_"]){var r=null;t.mediaSource_[n+"Buffer_"]?(r=t.mediaSource_[n+"Buffer_"]).updating=!1:(r=function(t,e){var n=t.addSourceBuffer(e),r=Object.create(null);for(var i in r.updating=!1,r.realBuffer_=n,n)!function(t){"function"==typeof n[t]?r[t]=function(){return n[t].apply(n,arguments)}:void 0===r[t]&&Object.defineProperty(r,t,{get:function(){return n[t]},set:function(e){return n[t]=e}})}(i);return r}(t.mediaSource_.nativeMediaSource_,n+'/mp4;codecs="'+t[n+"Codec_"]+'"'),t.mediaSource_[n+"Buffer_"]=r),t[n+"Buffer_"]=r,["update","updatestart","updateend"].forEach(function(i){r.addEventListener(i,function(){if("audio"!==n||!t.audioDisabled_)return"updateend"===i&&(t[n+"Buffer_"].updating=!1),e.every(function(e){return!("audio"!==e||!t.audioDisabled_)||n===e||!t[e+"Buffer_"]||!t[e+"Buffer_"].updating})?t.trigger(i):void 0})})}})}},{key:"appendBuffer",value:function(t){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var e=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:e.end(e.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:p(this.gopBuffer_,this.mediaSource_.player_,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(t){this.gopBuffer_=g(this.gopBuffer_,t.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(t,e){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(t,e),this.gopBuffer_=v(this.gopBuffer_,t,e,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(t,e)),(0,u.default)(t,e,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)(0,u.default)(t,e,this.inbandTextTracks_[n])}},{key:"processPendingSegments_",value:function(){var t={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};t=this.pendingBuffers_.reduce(function(t,e){var n=e.type,r=e.data,i=e.initSegment;return t[n].segments.push(r),t[n].bytes+=r.byteLength,t[n].initSegment=i,e.captions&&(t.captions=t.captions.concat(e.captions)),e.info&&(t[n].info=e.info),e.metadata&&(t.metadata=t.metadata.concat(e.metadata)),t},t),this.videoBuffer_||this.audioBuffer_||(0===t.video.bytes&&(this.videoCodec_=null),0===t.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),t.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:t.audio.info}),t.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:t.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(t.audio.segments.unshift(t.audio.initSegment),t.audio.bytes+=t.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var e=!1;this.videoBuffer_&&t.video.bytes?(t.video.segments.unshift(t.video.initSegment),t.video.bytes+=t.video.initSegment.byteLength,this.concatAndAppendSegments_(t.video,this.videoBuffer_),(0,l.addTextTrackData)(this,t.captions,t.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(e=!0),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(t.audio,this.audioBuffer_),this.pendingBuffers_.length=0,e&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(t,e){var n=0,r=void 0;if(t.bytes){r=new Uint8Array(t.bytes),t.segments.forEach(function(t){r.set(t,n),n+=t.byteLength});try{e.updating=!0,e.appendBuffer(r)}catch(t){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:t.message,originalError:t})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),e}();n.default=m}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],76:[function(t,e,n){var r=arguments[3],i=arguments[4],a=arguments[5],o=JSON.stringify,s=!1;void 0===r&&(s=!0,r=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=entryModule)},i=__webpack_modules__);var u=function(t){for(var e,n=Object.keys(a),s=0;s<n.length;s++){var u=a[c=n[s]].exports;if(u===t||u&&u.default===t){e=c;break}}if(!e){e=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var l={};for(s=0;s<n.length;s++){var c;l[c=n[s]]=c}i[e]=["function(require,module,exports){"+t+"(self); }",l]}var h=Math.floor(Math.pow(16,8)*Math.random()).toString(16),f={};return f[e]=e,i[h]=["function(require,module,exports){var f = require("+o(e)+");(f.default ? f.default : f)(self);}",f],"("+r+")({"+Object.keys(i).map(function(t){return o(t)+":["+i[t][0]+","+o(i[t][1])+"]"}).join(",")+"},{},["+o(h)+"])"},l=function(t,e){var n,a="string"==typeof e;n=a?{}:[],Object.keys(i).forEach(function(t){i[t]&&(n[t]=i[t].toString())});var s,u=__webpack_require__(e);if(!u||u!==t&&u.default!==t){var l=n[e];n[e]=l.substring(0,l.length-1)+"\n"+t.name+"();\n}"}return a?(e=o(e),s="{"+Object.keys(n).map(function(t){return o(t)+":"+n[t]}).join(",")+"}"):s="["+n.join(",")+"]","var fn = ("+r.toString().replace("entryModule",e)+")("+s+');\n(typeof fn === "function") && fn(self);'};e.exports=function(t,e){var n;n=s?l(t,e):u(t);var r=new Blob([n],{type:"text/javascript"}),i=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(r),a=new Worker(i);return a.objectURL=i,a}},{}],77:[function(t,e,n){(function(n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},o=r(t(31)),s=r(t(9)),u=r(t(11)),l=r(t(21)),c=t(25),h=r(t(2)),f=t(74),d=r(t(33)),p=r("undefined"!=typeof window?window.videojs:void 0!==n?n.videojs:null),g=t(5),v=r(t(3)),m=r(t(14)),y=r(t(32)),_=r(t(8)),b=r(t(13)),x=t(10),w={PlaylistLoader:s.default,Playlist:u.default,Decrypter:c.Decrypter,AsyncStream:c.AsyncStream,decrypt:c.decrypt,utils:h.default,STANDARD_PLAYLIST_SELECTOR:x.lastBandwidthSelector,INITIAL_PLAYLIST_SELECTOR:x.lowestBitrateCompatibleVariantSelector,comparePlaylistBandwidth:x.comparePlaylistBandwidth,comparePlaylistResolution:x.comparePlaylistResolution,xhr:(0,l.default)()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(function(t){Object.defineProperty(w,t,{get:function(){return p.default.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),v.default[t]},set:function(e){p.default.log.warn("using Hls."+t+" is UNSAFE be sure you know what you are doing"),"number"!=typeof e||e<0?p.default.log.warn("value of Hls."+t+" must be greater than or equal to 0"):v.default[t]=e}})});var S=function(t,e){for(var n=e.media(),r=-1,i=0;i<t.length;i++)if(t[i].id===n.uri){r=i;break}t.selectedIndex_=r,t.trigger({selectedIndex:r,type:"change"})};w.canPlaySource=function(){return p.default.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},w.supportsNativeHls=function(){var t=o.default.createElement("video");return!!p.default.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(e){return/maybe|probably/i.test(t.canPlayType(e))})}(),w.isSupported=function(){return p.default.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var T=p.default.getComponent("Component"),O=function(t){function e(t,n,r){var i=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,n,r.hls),n.options_&&n.options_.playerId){var s=(0,p.default)(n.options_.playerId);s.hasOwnProperty("hls")||Object.defineProperty(s,"hls",{get:function(){return p.default.log.warn("player.hls is deprecated. Use player.tech_.hls instead."),n.trigger({type:"usage",name:"hls-player-access"}),i}})}if(this.tech_=n,this.source_=t,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");this.on(o.default,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(t){var e=o.default.fullscreenElement||o.default.webkitFullscreenElement||o.default.mozFullScreenElement||o.default.msFullscreenElement;e&&e.contains(i.tech_.el())&&i.masterPlaylistController_.fastQualityChange_()}),this.on(this.tech_,"seeking",function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,T),i(e,[{key:"setOptions_",value:function(){var t=this;this.options_.withCredentials=this.options_.withCredentials||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=4194304),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&4194304===this.options_.bandwidth,["withCredentials","bandwidth"].forEach(function(e){void 0!==t.source_[e]&&(t.options_[e]=t.source_[e])}),this.bandwidth=this.options_.bandwidth}},{key:"src",value:function(t){var e=this;t&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=w,this.masterPlaylistController_=new g.MasterPlaylistController(this.options_),this.playbackWatcher_=new _.default(p.default.mergeOptions(this.options_,{seekable:function(){return e.seekable()}})),this.masterPlaylistController_.on("error",function(){p.default.players[e.tech_.options_.playerId].error(e.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):w.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=w.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(t){this.masterPlaylistController_.selectPlaylist=t.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=t,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=t,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(this.throughput>0?1/this.throughput:0)))},set:function(){p.default.log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return e.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return e.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return e.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return e.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return e.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return e.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return e.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return e.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",function(){(0,m.default)(e)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.tech_.ready(function(){return e.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(p.default.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var t=this,e=p.default.players[this.tech_.options_.playerId];e&&e.qualityLevels&&(this.qualityLevels_=e.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){!function(t,e){e.representations().forEach(function(e){t.addQualityLevel(e)}),S(t,e.playlists)}(t.qualityLevels_,t)}),this.playlists.on("mediachange",function(){S(t.qualityLevels_,t.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(t){this.masterPlaylistController_.setCurrentTime(t)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),a(Object.getPrototypeOf(e.prototype),"dispose",this).call(this)}}]),e}(),M=function t(e){return{canHandleSource:function(n){var r=p.default.mergeOptions(p.default.options,arguments.length<=1||void 0===arguments[1]?{}:arguments[1]);return(!r.hls||!r.hls.mode||r.hls.mode===e)&&t.canPlayType(n.type,r)},handleSource:function(t,n){var r=p.default.mergeOptions(p.default.options,arguments.length<=2||void 0===arguments[2]?{}:arguments[2],{hls:{mode:e}});return"flash"===e&&n.setTimeout(function(){n.trigger("loadstart")},1),n.hls=new O(t,n,r),n.hls.xhr=(0,l.default)(),n.hls.src(t.src),n.hls},canPlayType:function(e){var n=p.default.mergeOptions(p.default.options,arguments.length<=1||void 0===arguments[1]?{}:arguments[1]);return t.canPlayType(e,n)?"maybe":""}}};M.canPlayType=function(t,e){return!(p.default.browser.IE_VERSION&&p.default.browser.IE_VERSION<=10)&&!(!e.hls.overrideNative&&w.supportsNativeHls)&&/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(t)},void 0!==p.default.MediaSource&&void 0!==p.default.URL||(p.default.MediaSource=f.MediaSource,p.default.URL=f.URL);var k=p.default.getTech("Flash");f.MediaSource.supportsNativeMediaSources()&&p.default.getTech("Html5").registerSourceHandler(M("html5"),0),y.default.Uint8Array&&k&&k.registerSourceHandler(M("flash")),p.default.HlsHandler=O,p.default.HlsSourceHandler=M,p.default.Hls=w,p.default.use||p.default.registerComponent("Hls",w),p.default.m3u8=d.default,p.default.options.hls=p.default.options.hls||{},p.default.registerPlugin?p.default.registerPlugin("reloadSourceOnError",b.default):p.default.plugin("reloadSourceOnError",b.default),e.exports={Hls:w,HlsHandler:O,HlsSourceHandler:M}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[77]),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.echarts={})}(this,function(t){"use strict";function e(t,e){"createCanvas"===t&&(Bg=null),Rg[t]=e}function n(t){if(null==t||"object"!=typeof t)return t;var e=t,r=Eg.call(t);if("[object Array]"===r){if(!D(t)){e=[];for(var i=0,a=t.length;i<a;i++)e[i]=n(t[i])}}else if(Cg[r]){if(!D(t)){var o=t.constructor;if(t.constructor.from)e=o.from(t);else for(e=new o(t.length),i=0,a=t.length;i<a;i++)e[i]=n(t[i])}}else if(!kg[r]&&!D(t)&&!T(t))for(var s in e={},t)t.hasOwnProperty(s)&&(e[s]=n(t[s]));return e}function r(t,e,i){if(!x(e)||!x(t))return i?n(e):t;for(var a in e)if(e.hasOwnProperty(a)){var o=t[a],s=e[a];!x(s)||!x(o)||y(s)||y(o)||T(s)||T(o)||w(s)||w(o)||D(s)||D(o)?!i&&a in t||(t[a]=n(e[a])):r(o,s,i)}return t}function i(t,e){for(var n=t[0],i=1,a=t.length;i<a;i++)n=r(n,t[i],e);return n}function a(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function o(t,e,n){for(var r in e)e.hasOwnProperty(r)&&(n?null!=e[r]:null==t[r])&&(t[r]=e[r]);return t}function s(){return Bg||(Bg=Ng().getContext("2d")),Bg}function u(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n}return-1}function l(t,e){function n(){}var r=t.prototype;for(var i in n.prototype=e.prototype,t.prototype=new n,r)t.prototype[i]=r[i];t.prototype.constructor=t,t.superClass=e}function c(t,e,n){o(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,n)}function h(t){if(t)return"string"!=typeof t&&"number"==typeof t.length}function f(t,e,n){if(t&&e)if(t.forEach&&t.forEach===Ig)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t);else for(var a in t)t.hasOwnProperty(a)&&e.call(n,t[a],a,t)}function d(t,e,n){if(t&&e){if(t.map&&t.map===Dg)return t.map(e,n);for(var r=[],i=0,a=t.length;i<a;i++)r.push(e.call(n,t[i],i,t));return r}}function p(t,e,n,r){if(t&&e){if(t.reduce&&t.reduce===jg)return t.reduce(e,n,r);for(var i=0,a=t.length;i<a;i++)n=e.call(r,n,t[i],i,t);return n}}function g(t,e,n){if(t&&e){if(t.filter&&t.filter===Pg)return t.filter(e,n);for(var r=[],i=0,a=t.length;i<a;i++)e.call(n,t[i],i,t)&&r.push(t[i]);return r}}function v(t,e){var n=Lg.call(arguments,2);return function(){return t.apply(e,n.concat(Lg.call(arguments)))}}function m(t){var e=Lg.call(arguments,1);return function(){return t.apply(this,e.concat(Lg.call(arguments)))}}function y(t){return"[object Array]"===Eg.call(t)}function _(t){return"function"==typeof t}function b(t){return"[object String]"===Eg.call(t)}function x(t){var e=typeof t;return"function"===e||!!t&&"object"==e}function w(t){return!!kg[Eg.call(t)]}function S(t){return!!Cg[Eg.call(t)]}function T(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}function O(t){return t!=t}function M(t){for(var e=0,n=arguments.length;e<n;e++)if(null!=arguments[e])return arguments[e]}function k(t,e){return null!=t?t:e}function C(t,e,n){return null!=t?t:null!=e?e:n}function E(){return Function.call.apply(Lg,arguments)}function A(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t}function I(t,e){if(!t)throw new Error(e)}function P(t){return null==t?null:"function"==typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function L(t){t[Fg]=!0}function D(t){return t[Fg]}function j(t){function e(t,e){n?r.set(t,e):r.set(e,t)}var n=y(t);this.data={};var r=this;t instanceof j?t.each(e):t&&f(t,e)}function R(t){return new j(t)}function N(t,e){for(var n=new t.constructor(t.length+e.length),r=0;r<t.length;r++)n[r]=t[r];var i=t.length;for(r=0;r<e.length;r++)n[r+i]=e[r];return n}function B(){}function F(t,e){var n=new zg(2);return null==t&&(t=0),null==e&&(e=0),n[0]=t,n[1]=e,n}function U(t,e){return t[0]=e[0],t[1]=e[1],t}function z(t){var e=new zg(2);return e[0]=t[0],e[1]=t[1],e}function V(t,e,n){return t[0]=e,t[1]=n,t}function H(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function G(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function W(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function q(t){return Math.sqrt(Y(t))}function Y(t){return t[0]*t[0]+t[1]*t[1]}function X(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function $(t,e){var n=q(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}function Z(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function Q(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}function K(t,e,n,r){return t[0]=e[0]+r*(n[0]-e[0]),t[1]=e[1]+r*(n[1]-e[1]),t}function J(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function tt(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function et(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function nt(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this),this.on("globalout",this._dragEnd,this)}function rt(t,e){return{target:t,topTarget:e&&e.topTarget}}function it(t,e){var n=t._$eventProcessor;return null!=e&&n&&n.normalizeQuery&&(e=n.normalizeQuery(e)),e}function at(t,e,n,r){return n=n||{},r||!Mg.canvasSupported?ot(t,e,n):Mg.browser.firefox&&null!=e.layerX&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):null!=e.offsetX?(n.zrX=e.offsetX,n.zrY=e.offsetY):ot(t,e,n),n}function ot(t,e,n){var r=function(t){return t.getBoundingClientRect?t.getBoundingClientRect():{left:0,top:0}}(t);n.zrX=e.clientX-r.left,n.zrY=e.clientY-r.top}function st(t,e,n){if(null!=(e=e||window.event).zrX)return e;var r=e.type;if(r&&r.indexOf("touch")>=0){var i="touchend"!=r?e.targetTouches[0]:e.changedTouches[0];i&&at(t,i,e,n)}else at(t,e,e,n),e.zrDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3;var a=e.button;return null==e.which&&void 0!==a&&Xg.test(e.type)&&(e.which=1&a?1:2&a?3:4&a?2:0),e}function ut(t,e,n){Yg?t.addEventListener(e,n):t.attachEvent("on"+e,n)}function lt(t,e,n){Yg?t.removeEventListener(e,n):t.detachEvent("on"+e,n)}function ct(t){return t.which>1}function ht(t){$g(this.event)}function ft(){}function dt(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var r,i=t;i;){if(i.clipPath&&!i.clipPath.contain(e,n))return!1;i.silent&&(r=!0),i=i.parent}return!r||Zg}return!1}function pt(){var t=new Jg(6);return gt(t),t}function gt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function vt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function mt(t,e,n){var r=e[1]*n[0]+e[3]*n[1],i=e[0]*n[2]+e[2]*n[3],a=e[1]*n[2]+e[3]*n[3],o=e[0]*n[4]+e[2]*n[5]+e[4],s=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=e[0]*n[0]+e[2]*n[1],t[1]=r,t[2]=i,t[3]=a,t[4]=o,t[5]=s,t}function yt(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}function _t(t,e,n){var r=e[0],i=e[2],a=e[4],o=e[1],s=e[3],u=e[5],l=Math.sin(n),c=Math.cos(n);return t[0]=r*c+o*l,t[1]=-r*l+o*c,t[2]=i*c+s*l,t[3]=-i*l+c*s,t[4]=c*a+l*u,t[5]=c*u-l*a,t}function bt(t,e,n){var r=n[0],i=n[1];return t[0]=e[0]*r,t[1]=e[1]*i,t[2]=e[2]*r,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*i,t}function xt(t,e){var n=e[0],r=e[2],i=e[4],a=e[1],o=e[3],s=e[5],u=n*o-a*r;return u?(t[0]=o*(u=1/u),t[1]=-a*u,t[2]=-r*u,t[3]=n*u,t[4]=(r*s-o*i)*u,t[5]=(a*i-n*s)*u,t):null}function wt(t){var e=pt();return vt(e,t),e}function St(t){return t>nv||t<-nv}function Tt(t){this._target=t.target,this._life=t.life||1e3,this._delay=t.delay||0,this._initialized=!1,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this._pausedTime=0,this._paused=!1}function Ot(t){return(t=Math.round(t))<0?0:t>255?255:t}function Mt(t){return t<0?0:t>1?1:t}function kt(t){return Ot(t.length&&"%"===t.charAt(t.length-1)?parseFloat(t)/100*255:parseInt(t,10))}function Ct(t){return Mt(t.length&&"%"===t.charAt(t.length-1)?parseFloat(t)/100:parseFloat(t))}function Et(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function At(t,e,n){return t+(e-t)*n}function It(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function Pt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Lt(t,e){vv&&Pt(vv,e),vv=gv.put(t,vv||e.slice())}function Dt(t,e){if(t){e=e||[];var n=gv.get(t);if(n)return Pt(e,n);var r=(t+="").replace(/ /g,"").toLowerCase();if(r in pv)return Pt(e,pv[r]),Lt(t,e),e;if("#"!==r.charAt(0)){var i=r.indexOf("("),a=r.indexOf(")");if(-1!==i&&a+1===r.length){var o=r.substr(0,i),s=r.substr(i+1,a-(i+1)).split(","),u=1;switch(o){case"rgba":if(4!==s.length)return void It(e,0,0,0,1);u=Ct(s.pop());case"rgb":return 3!==s.length?void It(e,0,0,0,1):(It(e,kt(s[0]),kt(s[1]),kt(s[2]),u),Lt(t,e),e);case"hsla":return 4!==s.length?void It(e,0,0,0,1):(s[3]=Ct(s[3]),jt(s,e),Lt(t,e),e);case"hsl":return 3!==s.length?void It(e,0,0,0,1):(jt(s,e),Lt(t,e),e);default:return}}It(e,0,0,0,1)}else{if(4===r.length)return(l=parseInt(r.substr(1),16))>=0&&l<=4095?(It(e,(3840&l)>>4|(3840&l)>>8,240&l|(240&l)>>4,15&l|(15&l)<<4,1),Lt(t,e),e):void It(e,0,0,0,1);if(7===r.length){var l=parseInt(r.substr(1),16);return l>=0&&l<=16777215?(It(e,(16711680&l)>>16,(65280&l)>>8,255&l,1),Lt(t,e),e):void It(e,0,0,0,1)}}}}function jt(t,e){var n=(parseFloat(t[0])%360+360)%360/360,r=Ct(t[1]),i=Ct(t[2]),a=i<=.5?i*(r+1):i+r-i*r,o=2*i-a;return It(e=e||[],Ot(255*Et(o,a,n+1/3)),Ot(255*Et(o,a,n)),Ot(255*Et(o,a,n-1/3)),1),4===t.length&&(e[3]=t[3]),e}function Rt(t,e){var n=Dt(t);if(n){for(var r=0;r<3;r++)n[r]=e<0?n[r]*(1-e)|0:(255-n[r])*e+n[r]|0,n[r]>255?n[r]=255:t[r]<0&&(n[r]=0);return Vt(n,4===n.length?"rgba":"rgb")}}function Nt(t){var e=Dt(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}function Bt(t,e,n){if(e&&e.length&&t>=0&&t<=1){n=n||[];var r=t*(e.length-1),i=Math.floor(r),a=Math.ceil(r),o=e[i],s=e[a],u=r-i;return n[0]=Ot(At(o[0],s[0],u)),n[1]=Ot(At(o[1],s[1],u)),n[2]=Ot(At(o[2],s[2],u)),n[3]=Mt(At(o[3],s[3],u)),n}}function Ft(t,e,n){if(e&&e.length&&t>=0&&t<=1){var r=t*(e.length-1),i=Math.floor(r),a=Math.ceil(r),o=Dt(e[i]),s=Dt(e[a]),u=r-i,l=Vt([Ot(At(o[0],s[0],u)),Ot(At(o[1],s[1],u)),Ot(At(o[2],s[2],u)),Mt(At(o[3],s[3],u))],"rgba");return n?{color:l,leftIndex:i,rightIndex:a,value:r}:l}}function Ut(t,e,n,r){if(t=Dt(t))return t=function(t){if(t){var e,n,r=t[0]/255,i=t[1]/255,a=t[2]/255,o=Math.min(r,i,a),s=Math.max(r,i,a),u=s-o,l=(s+o)/2;if(0===u)e=0,n=0;else{n=l<.5?u/(s+o):u/(2-s-o);var c=((s-r)/6+u/2)/u,h=((s-i)/6+u/2)/u,f=((s-a)/6+u/2)/u;r===s?e=f-h:i===s?e=1/3+c-f:a===s&&(e=2/3+h-c),e<0&&(e+=1),e>1&&(e-=1)}var d=[360*e,n,l];return null!=t[3]&&d.push(t[3]),d}}(t),null!=e&&(t[0]=function(t){return(t=Math.round(t))<0?0:t>360?360:t}(e)),null!=n&&(t[1]=Ct(n)),null!=r&&(t[2]=Ct(r)),Vt(jt(t),"rgba")}function zt(t,e){if((t=Dt(t))&&null!=e)return t[3]=Mt(e),Vt(t,"rgba")}function Vt(t,e){if(t&&t.length){var n=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(n+=","+t[3]),e+"("+n+")"}}function Ht(t,e){return t[e]}function Gt(t,e,n){t[e]=n}function Wt(t,e,n){return(e-t)*n+t}function qt(t,e,n){return n>.5?e:t}function Yt(t,e,n,r,i){var a=t.length;if(1==i)for(s=0;s<a;s++)r[s]=Wt(t[s],e[s],n);else for(var o=a&&t[0].length,s=0;s<a;s++)for(var u=0;u<o;u++)r[s][u]=Wt(t[s][u],e[s][u],n)}function Xt(t,e,n){var r=t.length,i=e.length;if(r!==i)if(r>i)t.length=i;else for(o=r;o<i;o++)t.push(1===n?e[o]:yv.call(e[o]));for(var a=t[0]&&t[0].length,o=0;o<t.length;o++)if(1===n)isNaN(t[o])&&(t[o]=e[o]);else for(var s=0;s<a;s++)isNaN(t[o][s])&&(t[o][s]=e[o][s])}function $t(t,e,n){if(t===e)return!0;var r=t.length;if(r!==e.length)return!1;if(1===n){for(a=0;a<r;a++)if(t[a]!==e[a])return!1}else for(var i=t[0].length,a=0;a<r;a++)for(var o=0;o<i;o++)if(t[a][o]!==e[a][o])return!1;return!0}function Zt(t,e,n,r,i,a,o,s,u){var l=t.length;if(1==u)for(h=0;h<l;h++)s[h]=Qt(t[h],e[h],n[h],r[h],i,a,o);else for(var c=t[0].length,h=0;h<l;h++)for(var f=0;f<c;f++)s[h][f]=Qt(t[h][f],e[h][f],n[h][f],r[h][f],i,a,o)}function Qt(t,e,n,r,i,a,o){var s=.5*(n-t),u=.5*(r-e);return(2*(e-n)+s+u)*o+(-3*(e-n)-2*s-u)*a+s*i+e}function Kt(t){if(h(t)){var e=t.length;if(h(t[0])){for(var n=[],r=0;r<e;r++)n.push(yv.call(t[r]));return n}return yv.call(t)}return t}function Jt(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function te(t,e,n,r,i,a){var o=t._getter,s=t._setter,u="spline"===e,l=r.length;if(l){var c,f=h(r[0].value),d=!1,p=!1,g=f?function(t){var e=r[r.length-1].value;return h(e&&e[0])?2:1}():0;r.sort(function(t,e){return t.time-e.time}),c=r[l-1].time;for(var v=[],m=[],y=r[0].value,_=!0,b=0;b<l;b++){v.push(r[b].time/c);var x=r[b].value;if(f&&$t(x,y,g)||!f&&x===y||(_=!1),y=x,"string"==typeof x){var w=Dt(x);w?(x=w,d=!0):p=!0}m.push(x)}if(a||!_){var S=m[l-1];for(b=0;b<l-1;b++)f?Xt(m[b],S,g):!isNaN(m[b])||isNaN(S)||p||d||(m[b]=S);f&&Xt(o(t._target,i),S,g);var T,O,M,k,C,E=0,A=0;if(d)var I=[0,0,0,0];var P=new Tt({target:t._target,life:c,loop:t._loop,delay:t._delay,onframe:function(t,e){var n;if(e<0)n=0;else if(e<A){for(n=Math.min(E+1,l-1);n>=0&&!(v[n]<=e);n--);n=Math.min(n,l-2)}else{for(n=E;n<l&&!(v[n]>e);n++);n=Math.min(n-1,l-2)}E=n,A=e;var r=v[n+1]-v[n];if(0!==r)if(T=(e-v[n])/r,u)if(M=m[n],O=m[0===n?n:n-1],k=m[n>l-2?l-1:n+1],C=m[n>l-3?l-1:n+2],f)Zt(O,M,k,C,T,T*T,T*T*T,o(t,i),g);else{if(d)a=Zt(O,M,k,C,T,T*T,T*T*T,I,1),a=Jt(I);else{if(p)return qt(M,k,T);a=Qt(O,M,k,C,T,T*T,T*T*T)}s(t,i,a)}else if(f)Yt(m[n],m[n+1],T,o(t,i),g);else{var a;if(d)Yt(m[n],m[n+1],T,I,1),a=Jt(I);else{if(p)return qt(m[n],m[n+1],T);a=Wt(m[n],m[n+1],T)}s(t,i,a)}},ondestroy:n});return e&&"spline"!==e&&(P.easing=e),P}}}function ee(t,e,n,r,i,a,o,s){b(r)?(a=i,i=r,r=0):_(i)?(a=i,i="linear",r=0):_(r)?(a=r,r=0):_(n)?(a=n,n=500):n||(n=500),t.stopAnimation(),function t(e,n,r,i,a,o,s){var u={},l=0;for(var c in i)i.hasOwnProperty(c)&&(null!=r[c]?x(i[c])&&!h(i[c])?t(e,n?n+"."+c:c,r[c],i[c],a,o,s):(s?(u[c]=r[c],ne(e,n,c,i[c])):u[c]=i[c],l++):null==i[c]||s||ne(e,n,c,i[c]));l>0&&e.animate(n,!1).when(null==a?500:a,u).delay(o||0)}(t,"",t,e,n,r,s);var u=t.animators.slice(),l=u.length;l||a&&a();for(var c=0;c<u.length;c++)u[c].done(function(){--l||a&&a()}).start(i,o)}function ne(t,e,n,r){if(e){var i={};i[e]={},i[e][n]=r,t.attr(i)}else t.attr(n,r)}function re(t,e,n,r){n<0&&(t+=n,n=-n),r<0&&(e+=r,r=-r),this.x=t,this.y=e,this.width=n,this.height=r}function ie(t,e,n,r){var i=e+1;if(i===n)return 1;if(r(t[i++],t[e])<0){for(;i<n&&r(t[i],t[i-1])<0;)i++;!function(t,e,n){for(n--;e<n;){var r=t[e];t[e++]=t[n],t[n--]=r}}(t,e,i)}else for(;i<n&&r(t[i],t[i-1])>=0;)i++;return i-e}function ae(t,e,n,r,i){for(r===e&&r++;r<n;r++){for(var a,o=t[r],s=e,u=r;s<u;)i(o,t[a=s+u>>>1])<0?u=a:s=a+1;var l=r-s;switch(l){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:for(;l>0;)t[s+l]=t[s+l-1],l--}t[s]=o}}function oe(t,e,n,r,i,a){var o=0,s=0,u=1;if(a(t,e[n+i])>0){for(s=r-i;u<s&&a(t,e[n+i+u])>0;)o=u,(u=1+(u<<1))<=0&&(u=s);u>s&&(u=s),o+=i,u+=i}else{for(s=i+1;u<s&&a(t,e[n+i-u])<=0;)o=u,(u=1+(u<<1))<=0&&(u=s);u>s&&(u=s);var l=o;o=i-u,u=i-l}for(o++;o<u;){var c=o+(u-o>>>1);a(t,e[n+c])>0?o=c+1:u=c}return u}function se(t,e,n,r,i,a){var o=0,s=0,u=1;if(a(t,e[n+i])<0){for(s=i+1;u<s&&a(t,e[n+i-u])<0;)o=u,(u=1+(u<<1))<=0&&(u=s);u>s&&(u=s);var l=o;o=i-u,u=i-l}else{for(s=r-i;u<s&&a(t,e[n+i+u])>=0;)o=u,(u=1+(u<<1))<=0&&(u=s);u>s&&(u=s),o+=i,u+=i}for(o++;o<u;){var c=o+(u-o>>>1);a(t,e[n+c])<0?u=c:o=c+1}return u}function ue(t,e,n,r){n||(n=0),r||(r=t.length);var i=r-n;if(!(i<2)){var a=0;if(i<Cv)return void ae(t,n,r,n+(a=ie(t,n,r,e)),e);var o=new function(t,e){function n(n){var s=a[n],l=o[n],c=a[n+1],h=o[n+1];o[n]=l+h,n===u-3&&(a[n+1]=a[n+2],o[n+1]=o[n+2]),u--;var f=se(t[c],t,s,l,0,e);s+=f,0!=(l-=f)&&0!==(h=oe(t[s+l-1],t,c,h,h-1,e))&&(l<=h?r(s,l,c,h):i(s,l,c,h))}function r(n,r,i,a){var o=0;for(o=0;o<r;o++)l[o]=t[n+o];var u=0,c=i,h=n;if(t[h++]=t[c++],0!=--a)if(1!==r){for(var f,d,p,g=s;;){f=0,d=0,p=!1;do{if(e(t[c],l[u])<0){if(t[h++]=t[c++],d++,f=0,0==--a){p=!0;break}}else if(t[h++]=l[u++],f++,d=0,1==--r){p=!0;break}}while((f|d)<g);if(p)break;do{if(0!==(f=se(t[c],l,u,r,0,e))){for(o=0;o<f;o++)t[h+o]=l[u+o];if(h+=f,u+=f,(r-=f)<=1){p=!0;break}}if(t[h++]=t[c++],0==--a){p=!0;break}if(0!==(d=oe(l[u],t,c,a,0,e))){for(o=0;o<d;o++)t[h+o]=t[c+o];if(h+=d,c+=d,0==(a-=d)){p=!0;break}}if(t[h++]=l[u++],1==--r){p=!0;break}g--}while(f>=Ev||d>=Ev);if(p)break;g<0&&(g=0),g+=2}if((s=g)<1&&(s=1),1===r){for(o=0;o<a;o++)t[h+o]=t[c+o];t[h+a]=l[u]}else{if(0===r)throw new Error;for(o=0;o<r;o++)t[h+o]=l[u+o]}}else{for(o=0;o<a;o++)t[h+o]=t[c+o];t[h+a]=l[u]}else for(o=0;o<r;o++)t[h+o]=l[u+o]}function i(n,r,i,a){var o=0;for(o=0;o<a;o++)l[o]=t[i+o];var u=n+r-1,c=a-1,h=i+a-1,f=0,d=0;if(t[h--]=t[u--],0!=--r)if(1!==a){for(var p=s;;){var g=0,v=0,m=!1;do{if(e(l[c],t[u])<0){if(t[h--]=t[u--],g++,v=0,0==--r){m=!0;break}}else if(t[h--]=l[c--],v++,g=0,1==--a){m=!0;break}}while((g|v)<p);if(m)break;do{if(0!=(g=r-se(l[c],t,n,r,r-1,e))){for(r-=g,d=1+(h-=g),f=1+(u-=g),o=g-1;o>=0;o--)t[d+o]=t[f+o];if(0===r){m=!0;break}}if(t[h--]=l[c--],1==--a){m=!0;break}if(0!=(v=a-oe(t[u],l,0,a,a-1,e))){for(a-=v,d=1+(h-=v),f=1+(c-=v),o=0;o<v;o++)t[d+o]=l[f+o];if(a<=1){m=!0;break}}if(t[h--]=t[u--],0==--r){m=!0;break}p--}while(g>=Ev||v>=Ev);if(m)break;p<0&&(p=0),p+=2}if((s=p)<1&&(s=1),1===a){for(d=1+(h-=r),f=1+(u-=r),o=r-1;o>=0;o--)t[d+o]=t[f+o];t[h]=l[c]}else{if(0===a)throw new Error;for(f=h-(a-1),o=0;o<a;o++)t[f+o]=l[o]}}else{for(d=1+(h-=r),f=1+(u-=r),o=r-1;o>=0;o--)t[d+o]=t[f+o];t[h]=l[c]}else for(f=h-(a-1),o=0;o<a;o++)t[f+o]=l[o]}var a,o,s=Ev,u=0,l=[];a=[],o=[],this.mergeRuns=function(){for(;u>1;){var t=u-2;if(t>=1&&o[t-1]<=o[t]+o[t+1]||t>=2&&o[t-2]<=o[t]+o[t-1])o[t-1]<o[t+1]&&t--;else if(o[t]>o[t+1])break;n(t)}},this.forceMergeRuns=function(){for(;u>1;){var t=u-2;t>0&&o[t-1]<o[t+1]&&t--,n(t)}},this.pushRun=function(t,e){a[u]=t,o[u]=e,u+=1}}(t,e),s=function(t){for(var e=0;t>=Cv;)e|=1&t,t>>=1;return t+e}(i);do{if((a=ie(t,n,r,e))<s){var u=i;u>s&&(u=s),ae(t,n,n+u,n+a,e),a=u}o.pushRun(n,a),o.mergeRuns(),i-=a,n+=a}while(0!==i);o.forceMergeRuns()}}function le(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}function ce(){return!1}function he(t,e,n){var r=Ng(),i=e.getWidth(),a=e.getHeight(),o=r.style;return o&&(o.position="absolute",o.left=0,o.top=0,o.width=i+"px",o.height=a+"px",r.setAttribute("data-zr-dom-id",t)),r.width=i*n,r.height=a*n,r}function fe(t){if("string"==typeof t){var e=zv.get(t);return e&&e.image}return t}function de(t,e,n,r,i){if(t){if("string"==typeof t){if(e&&e.__zrImageSrc===t||!n)return e;var a=zv.get(t),o={hostEl:n,cb:r,cbPayload:i};return a?!ge(e=a.image)&&a.pending.push(o):(!e&&(e=new Image),e.onload=e.onerror=pe,zv.put(t,e.__cachedImgObj={image:e,pending:[o]}),e.src=e.__zrImageSrc=t),e}return t}return e}function pe(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],r=n.cb;r&&r(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function ge(t){return t&&t.width&&t.height}function ve(t,e){var n=t+":"+(e=e||qv);if(Vv[n])return Vv[n];for(var r=(t+"").split("\n"),i=0,a=0,o=r.length;a<o;a++)i=Math.max(Me(r[a],e).width,i);return Hv>Gv&&(Hv=0,Vv={}),Hv++,Vv[n]=i,i}function me(t,e,n,r,i,a,o){return a?function(t,e,n,r,i,a,o){var s=Ce(t,{rich:a,truncate:o,font:e,textAlign:n,textPadding:i}),u=s.outerWidth,l=s.outerHeight;return new re(ye(0,u,n),_e(0,l,r),u,l)}(t,e,n,r,i,a,o):function(t,e,n,r,i,a){var o=ke(t,e,i,a),s=ve(t,e);i&&(s+=i[1]+i[3]);var u=o.outerHeight,l=new re(ye(0,s,n),_e(0,u,r),s,u);return l.lineHeight=o.lineHeight,l}(t,e,n,r,i,o)}function ye(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function _e(t,e,n){return"middle"===n?t-=e/2:"bottom"===n&&(t-=e),t}function be(t,e,n){var r=e.x,i=e.y,a=e.height,o=e.width,s=a/2,u="left",l="top";switch(t){case"left":r-=n,i+=s,u="right",l="middle";break;case"right":r+=n+o,i+=s,l="middle";break;case"top":r+=o/2,i-=n,u="center",l="bottom";break;case"bottom":r+=o/2,i+=a+n,u="center";break;case"inside":r+=o/2,i+=s,u="center",l="middle";break;case"insideLeft":r+=n,i+=s,l="middle";break;case"insideRight":r+=o-n,i+=s,u="right",l="middle";break;case"insideTop":r+=o/2,i+=n,u="center";break;case"insideBottom":r+=o/2,i+=a-n,u="center",l="bottom";break;case"insideTopLeft":r+=n,i+=n;break;case"insideTopRight":r+=o-n,i+=n,u="right";break;case"insideBottomLeft":r+=n,i+=a-n,l="bottom";break;case"insideBottomRight":r+=o-n,i+=a-n,u="right",l="bottom"}return{x:r,y:i,textAlign:u,textVerticalAlign:l}}function xe(t,e,n,r,i){if(!e)return"";var a=(t+"").split("\n");i=we(e,n,r,i);for(var o=0,s=a.length;o<s;o++)a[o]=Se(a[o],i);return a.join("\n")}function we(t,e,n,r){(r=a({},r)).font=e,n=k(n,"..."),r.maxIterations=k(r.maxIterations,2);var i=r.minChar=k(r.minChar,0);r.cnCharWidth=ve("\u56fd",e);var o=r.ascCharWidth=ve("a",e);r.placeholder=k(r.placeholder,"");for(var s=t=Math.max(0,t-1),u=0;u<i&&s>=o;u++)s-=o;var l=ve(n);return l>s&&(n="",l=0),s=t-l,r.ellipsis=n,r.ellipsisWidth=l,r.contentWidth=s,r.containerWidth=t,r}function Se(t,e){var n=e.containerWidth,r=e.font,i=e.contentWidth;if(!n)return"";var a=ve(t,r);if(a<=n)return t;for(var o=0;;o++){if(a<=i||o>=e.maxIterations){t+=e.ellipsis;break}var s=0===o?Te(t,i,e.ascCharWidth,e.cnCharWidth):a>0?Math.floor(t.length*i/a):0;a=ve(t=t.substr(0,s),r)}return""===t&&(t=e.placeholder),t}function Te(t,e,n,r){for(var i=0,a=0,o=t.length;a<o&&i<e;a++){var s=t.charCodeAt(a);i+=0<=s&&s<=127?n:r}return a}function Oe(t){return ve("\u56fd",t)}function Me(t,e){return Yv.measureText(t,e)}function ke(t,e,n,r){null!=t&&(t+="");var i=Oe(e),a=t?t.split("\n"):[],o=a.length*i,s=o;if(n&&(s+=n[0]+n[2]),t&&r){var u=r.outerHeight,l=r.outerWidth;if(null!=u&&s>u)t="",a=[];else if(null!=l)for(var c=we(l-(n?n[1]+n[3]:0),e,r.ellipsis,{minChar:r.minChar,placeholder:r.placeholder}),h=0,f=a.length;h<f;h++)a[h]=Se(a[h],c)}return{lines:a,height:o,outerHeight:s,lineHeight:i}}function Ce(t,e){var n={lines:[],width:0,height:0};if(null!=t&&(t+=""),!t)return n;for(var r,i=Wv.lastIndex=0;null!=(r=Wv.exec(t));){var a=r.index;a>i&&Ee(n,t.substring(i,a)),Ee(n,r[2],r[1]),i=Wv.lastIndex}i<t.length&&Ee(n,t.substring(i,t.length));var o=n.lines,s=0,u=0,l=[],c=e.textPadding,h=e.truncate,f=h&&h.outerWidth,d=h&&h.outerHeight;for(c&&(null!=f&&(f-=c[1]+c[3]),null!=d&&(d-=c[0]+c[2])),A=0;A<o.length;A++){for(var p=o[A],g=0,v=0,m=0;m<p.tokens.length;m++){var y=(I=p.tokens[m]).styleName&&e.rich[I.styleName]||{},_=I.textPadding=y.textPadding,b=I.font=y.font||e.font,x=I.textHeight=k(y.textHeight,Oe(b));if(_&&(x+=_[0]+_[2]),I.height=x,I.lineHeight=C(y.textLineHeight,e.textLineHeight,x),I.textAlign=y&&y.textAlign||e.textAlign,I.textVerticalAlign=y&&y.textVerticalAlign||"middle",null!=d&&s+I.lineHeight>d)return{lines:[],width:0,height:0};I.textWidth=ve(I.text,b);var w=y.textWidth,S=null==w||"auto"===w;if("string"==typeof w&&"%"===w.charAt(w.length-1))I.percentWidth=w,l.push(I),w=0;else{if(S){w=I.textWidth;var T=y.textBackgroundColor,O=T&&T.image;O&&ge(O=fe(O))&&(w=Math.max(w,O.width*x/O.height))}var M=_?_[1]+_[3]:0;w+=M;var E=null!=f?f-v:null;null!=E&&E<w&&(!S||E<M?(I.text="",I.textWidth=w=0):(I.text=xe(I.text,E-M,b,h.ellipsis,{minChar:h.minChar}),I.textWidth=ve(I.text,b),w=I.textWidth+M))}v+=I.width=w,y&&(g=Math.max(g,I.lineHeight))}p.width=v,p.lineHeight=g,s+=g,u=Math.max(u,v)}n.outerWidth=n.width=k(e.textWidth,u),n.outerHeight=n.height=k(e.textHeight,s),c&&(n.outerWidth+=c[1]+c[3],n.outerHeight+=c[0]+c[2]);for(var A=0;A<l.length;A++){var I=l[A];I.width=parseInt(I.percentWidth,10)/100*u}return n}function Ee(t,e,n){for(var r=""===e,i=e.split("\n"),a=t.lines,o=0;o<i.length;o++){var s=i[o],u={styleName:n,text:s,isLineHolder:!s&&!r};if(o)a.push({tokens:[u]});else{var l=(a[a.length-1]||(a[0]={tokens:[]})).tokens,c=l.length;1===c&&l[0].isLineHolder?l[0]=u:(s||!c||r)&&l.push(u)}}}function Ae(t){var e=(t.fontSize||t.fontFamily)&&[t.fontStyle,t.fontWeight,(t.fontSize||12)+"px",t.fontFamily||"sans-serif"].join(" ");return e&&P(e)||t.textFont||t.font}function Ie(t,e){var n,r,i,a,o,s=e.x,u=e.y,l=e.width,c=e.height,h=e.r;l<0&&(s+=l,l=-l),c<0&&(u+=c,c=-c),"number"==typeof h?n=r=i=a=h:h instanceof Array?1===h.length?n=r=i=a=h[0]:2===h.length?(n=i=h[0],r=a=h[1]):3===h.length?(n=h[0],r=a=h[1],i=h[2]):(n=h[0],r=h[1],i=h[2],a=h[3]):n=r=i=a=0,n+r>l&&(n*=l/(o=n+r),r*=l/o),i+a>l&&(i*=l/(o=i+a),a*=l/o),r+i>c&&(r*=c/(o=r+i),i*=c/o),n+a>c&&(n*=c/(o=n+a),a*=c/o),t.moveTo(s+n,u),t.lineTo(s+l-r,u),0!==r&&t.arc(s+l-r,u+r,r,-Math.PI/2,0),t.lineTo(s+l,u+c-i),0!==i&&t.arc(s+l-i,u+c-i,i,0,Math.PI/2),t.lineTo(s+a,u+c),0!==a&&t.arc(s+a,u+c-a,a,Math.PI/2,Math.PI),t.lineTo(s,u+n),0!==n&&t.arc(s+n,u+n,n,Math.PI,1.5*Math.PI)}function Pe(t){return Le(t),f(t.rich,Le),t}function Le(t){if(t){t.font=Ae(t);var e=t.textAlign;"middle"===e&&(e="center"),t.textAlign=null==e||Xv[e]?e:"left";var n=t.textVerticalAlign||t.textBaseline;"center"===n&&(n="middle"),t.textVerticalAlign=null==n||$v[n]?n:"top",t.textPadding&&(t.textPadding=A(t.textPadding))}}function De(t,e,n,r,i,a){r.rich?function(t,e,n,r,i){var a=t.__textCotentBlock;a&&!t.__dirtyText||(a=t.__textCotentBlock=Ce(n,r)),function(t,e,n,r,i){var a=n.width,o=n.outerWidth,s=n.outerHeight,u=r.textPadding,l=Ue(0,r,i),c=l.baseX,h=l.baseY,f=l.textAlign,d=l.textVerticalAlign;je(e,r,i,c,h);var p=ye(c,o,f),g=_e(h,s,d),v=p,m=g;u&&(v+=u[3],m+=u[0]);var y=v+a;Ne(r)&&Be(t,e,r,p,g,o,s);for(var _=0;_<n.lines.length;_++){for(var b,x=n.lines[_],w=x.tokens,S=w.length,T=x.lineHeight,O=x.width,M=0,k=v,C=y,E=S-1;M<S&&(!(b=w[M]).textAlign||"left"===b.textAlign);)Re(t,e,b,r,T,m,k,"left"),O-=b.width,k+=b.width,M++;for(;E>=0&&"right"===(b=w[E]).textAlign;)Re(t,e,b,r,T,m,C,"right"),O-=b.width,C-=b.width,E--;for(k+=(a-(k-v)-(y-C)-O)/2;M<=E;)Re(t,e,b=w[M],r,T,m,k+b.width/2,"center"),k+=b.width,M++;m+=T}}(t,e,a,r,i)}(t,e,n,r,i):function(t,e,n,r,i,a){var o=a&&a.style,s=o&&"text"===a.type,u=r.font||qv;s&&u===(o.font||qv)||(e.font=u);var l=t.__computedFont;t.__styleFont!==u&&(t.__styleFont=u,l=t.__computedFont=e.font);var c=r.textPadding,h=t.__textCotentBlock;h&&!t.__dirtyText||(h=t.__textCotentBlock=ke(n,l,c,r.truncate));var f=h.outerHeight,d=h.lines,p=h.lineHeight,g=Ue(0,r,i),v=g.baseX,m=g.baseY,y=g.textAlign||"left",_=g.textVerticalAlign;je(e,r,i,v,m);var b=_e(m,f,_),x=v,w=b,S=Ne(r);if(S||c){var T=ve(n,l);c&&(T+=c[1]+c[3]);var O=ye(v,T,y);S&&Be(t,e,r,O,b,T,f),c&&(x=We(v,y,c),w+=c[0])}for(e.textAlign=y,e.textBaseline="middle",j=0;j<Zv.length;j++){var M=Zv[j],k=M[0],C=M[1],E=r[k];s&&E===o[k]||(e[C]=Pv(e,C,E||M[2]))}w+=p/2;var A=r.textStrokeWidth,I=!s||A!==(s?o.textStrokeWidth:null),P=!s||I||r.textStroke!==o.textStroke,L=Ve(r.textStroke,A),D=He(r.textFill);if(L&&(I&&(e.lineWidth=A),P&&(e.strokeStyle=L)),D&&(s&&r.textFill===o.textFill&&!o.textBackgroundColor||(e.fillStyle=D)),1===d.length)L&&e.strokeText(d[0],x,w),D&&e.fillText(d[0],x,w);else for(var j=0;j<d.length;j++)L&&e.strokeText(d[j],x,w),D&&e.fillText(d[j],x,w),w+=p}(t,e,n,r,i,a)}function je(t,e,n,r,i){if(n&&e.textRotation){var a=e.textOrigin;"center"===a?(r=n.width/2+n.x,i=n.height/2+n.y):a&&(r=a[0]+n.x,i=a[1]+n.y),t.translate(r,i),t.rotate(-e.textRotation),t.translate(-r,-i)}}function Re(t,e,n,r,i,a,o,s){var u=r.rich[n.styleName]||{};u.text=n.text;var l=n.textVerticalAlign,c=a+i/2;"top"===l?c=a+n.height/2:"bottom"===l&&(c=a+i-n.height/2),!n.isLineHolder&&Ne(u)&&Be(t,e,u,"right"===s?o-n.width:"center"===s?o-n.width/2:o,c-n.height/2,n.width,n.height);var h=n.textPadding;h&&(o=We(o,s,h),c-=n.height/2-h[2]-n.textHeight/2),ze(e,"shadowBlur",C(u.textShadowBlur,r.textShadowBlur,0)),ze(e,"shadowColor",u.textShadowColor||r.textShadowColor||"transparent"),ze(e,"shadowOffsetX",C(u.textShadowOffsetX,r.textShadowOffsetX,0)),ze(e,"shadowOffsetY",C(u.textShadowOffsetY,r.textShadowOffsetY,0)),ze(e,"textAlign",s),ze(e,"textBaseline","middle"),ze(e,"font",n.font||qv);var f=Ve(u.textStroke||r.textStroke,p),d=He(u.textFill||r.textFill),p=k(u.textStrokeWidth,r.textStrokeWidth);f&&(ze(e,"lineWidth",p),ze(e,"strokeStyle",f),e.strokeText(n.text,o,c)),d&&(ze(e,"fillStyle",d),e.fillText(n.text,o,c))}function Ne(t){return t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor}function Be(t,e,n,r,i,a,o){var s=n.textBackgroundColor,u=n.textBorderWidth,l=n.textBorderColor,c=b(s);if(ze(e,"shadowBlur",n.textBoxShadowBlur||0),ze(e,"shadowColor",n.textBoxShadowColor||"transparent"),ze(e,"shadowOffsetX",n.textBoxShadowOffsetX||0),ze(e,"shadowOffsetY",n.textBoxShadowOffsetY||0),c||u&&l){e.beginPath();var h=n.textBorderRadius;h?Ie(e,{x:r,y:i,width:a,height:o,r:h}):e.rect(r,i,a,o),e.closePath()}if(c)ze(e,"fillStyle",s),null!=n.fillOpacity?(d=e.globalAlpha,e.globalAlpha=n.fillOpacity*n.opacity,e.fill(),e.globalAlpha=d):e.fill();else if(_(s))ze(e,"fillStyle",s(n)),e.fill();else if(x(s)){var f=s.image;(f=de(f,null,t,Fe,s))&&ge(f)&&e.drawImage(f,r,i,a,o)}if(u&&l)if(ze(e,"lineWidth",u),ze(e,"strokeStyle",l),null!=n.strokeOpacity){var d=e.globalAlpha;e.globalAlpha=n.strokeOpacity*n.opacity,e.stroke(),e.globalAlpha=d}else e.stroke()}function Fe(t,e){e.image=t}function Ue(t,e,n){var r=e.x||0,i=e.y||0,a=e.textAlign,o=e.textVerticalAlign;if(n){var s=e.textPosition;if(s instanceof Array)r=n.x+Ge(s[0],n.width),i=n.y+Ge(s[1],n.height);else{var u=be(s,n,e.textDistance);r=u.x,i=u.y,a=a||u.textAlign,o=o||u.textVerticalAlign}var l=e.textOffset;l&&(r+=l[0],i+=l[1])}return{baseX:r,baseY:i,textAlign:a,textVerticalAlign:o}}function ze(t,e,n){return t[e]=Pv(t,e,n),t[e]}function Ve(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function He(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function Ge(t,e){return"string"==typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function We(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}function qe(t,e){return null!=t&&(t||e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor||e.textPadding)}function Ye(t){for(var e in Sv.call(this,t=t||{}),t)t.hasOwnProperty(e)&&"style"!==e&&(this[e]=t[e]);this.style=new Dv(t.style,this),this._rect=null,this.__clipPaths=[]}function Xe(t){Ye.call(this,t)}function $e(t){return parseInt(t,10)}function Ze(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}function Qe(t){return"mousewheel"===t&&Mg.browser.firefox?"DOMMouseScroll":t}function Ke(t,e,n){var r=t._gestureMgr;"start"===n&&r.clear();var i=r.recognize(e,t.handler.findHover(e.zrX,e.zrY,null).target,t.dom);if("end"===n&&r.clear(),i){var a=i.type;e.gestureEvent=a,t.handler.dispatchToElement({target:i.target},a,i.event)}}function Je(t){t._touching=!0,clearTimeout(t._touchTimer),t._touchTimer=setTimeout(function(){t._touching=!1},700)}function tn(t){var e=t.pointerType;return"pen"===e||"touch"===e}function en(t){function e(e,n){f(e,function(e){ut(t,Qe(e),n._handlers[e])},n)}qg.call(this),this.dom=t,this._touching=!1,this._gestureMgr=new rm,this._handlers={},function(t){f(om,function(e){t._handlers[e]=v(lm[e],t)}),f(um,function(e){t._handlers[e]=v(lm[e],t)}),f(am,function(e){t._handlers[e]=function(t,e){return function(){if(!e._touching)return t.apply(e,arguments)}}(lm[e],t)})}(this),Mg.pointerEventsSupported?e(um,this):(Mg.touchEventsSupported&&e(om,this),e(am,this))}function nn(t,e){var n=new pm(Og(),t,e);return dm[n.id]=n,n}function rn(t,e){fm[t]=e}function an(t){return t instanceof Array?t:null==t?[]:[t]}function on(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var r=0,i=n.length;r<i;r++){var a=n[r];!t.emphasis[e].hasOwnProperty(a)&&t[e].hasOwnProperty(a)&&(t.emphasis[e][a]=t[e][a])}}}function sn(t){return!mm(t)||ym(t)||t instanceof Date?t:t.value}function un(t,e){e=(e||[]).slice();var n=d(t||[],function(t,e){return{exist:t}});return vm(e,function(t,r){if(mm(t)){for(i=0;i<n.length;i++)if(!n[i].option&&null!=t.id&&n[i].exist.id===t.id+"")return n[i].option=t,void(e[r]=null);for(var i=0;i<n.length;i++){var a=n[i].exist;if(!(n[i].option||null!=a.id&&null!=t.id||null==t.name||hn(t)||hn(a)||a.name!==t.name+""))return n[i].option=t,void(e[r]=null)}}}),vm(e,function(t,e){if(mm(t)){for(var r=0;r<n.length;r++)if(!n[r].option&&!hn(n[r].exist)&&null==t.id){n[r].option=t;break}r>=n.length&&n.push({option:t})}}),n}function ln(t){var e=R();vm(t,function(t,n){var r=t.exist;r&&e.set(r.id,t)}),vm(t,function(t,n){var r=t.option;I(!r||null==r.id||!e.get(r.id)||e.get(r.id)===t,"id duplicates: "+(r&&r.id)),r&&null!=r.id&&e.set(r.id,t),!t.keyInfo&&(t.keyInfo={})}),vm(t,function(t,n){var r=t.exist,i=t.option,a=t.keyInfo;if(mm(i)){if(a.name=null!=i.name?i.name+"":r?r.name:_m+n,r)a.id=r.id;else if(null!=i.id)a.id=i.id+"";else{var o=0;do{a.id="\0"+a.name+"\0"+o++}while(e.get(a.id))}e.set(a.id,t)}})}function cn(t){var e=t.name;return!(!e||!e.indexOf(_m))}function hn(t){return mm(t)&&t.id&&0===(t.id+"").indexOf("\0_ec_\0")}function fn(t,e){return null!=e.dataIndexInside?e.dataIndexInside:null!=e.dataIndex?y(e.dataIndex)?d(e.dataIndex,function(e){return t.indexOfRawIndex(e)}):t.indexOfRawIndex(e.dataIndex):null!=e.name?y(e.name)?d(e.name,function(e){return t.indexOfName(e)}):t.indexOfName(e.name):void 0}function dn(){var t="__\0ec_inner_"+xm+++"_"+Math.random().toFixed(5);return function(e){return e[t]||(e[t]={})}}function pn(t,e,n){if(b(e)){var r={};r[e+"Index"]=0,e=r}var i=n&&n.defaultMainType;!i||gn(e,i+"Index")||gn(e,i+"Id")||gn(e,i+"Name")||(e[i+"Index"]=0);var a={};return vm(e,function(r,i){if(r=e[i],"dataIndex"!==i&&"dataIndexInside"!==i){var o=i.match(/^(\w+)(Index|Id|Name)$/)||[],s=o[1],l=(o[2]||"").toLowerCase();if(!(!s||!l||null==r||"index"===l&&"none"===r||n&&n.includeMainTypes&&u(n.includeMainTypes,s)<0)){var c={mainType:s};"index"===l&&"all"===r||(c[l]=r);var h=t.queryComponents(c);a[s+"Models"]=h,a[s+"Model"]=h[0]}}else a[i]=r}),a}function gn(t,e){return t&&t.hasOwnProperty(e)}function vn(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n}function mn(t){return"auto"===t?Mg.domSupported?"html":"richText":t||"html"}function yn(t){var e={main:"",sub:""};return t&&(t=t.split(wm),e.main=t[0]||"",e.sub=t[1]||""),e}function _n(t,e){t.$constructor=t,t.extend=function(t){var e=this,n=function(){t.$constructor?t.$constructor.apply(this,arguments):e.apply(this,arguments)};return a(n.prototype,t),n.extend=this.extend,n.superCall=xn,n.superApply=wn,l(n,this),n.superClass=e,n}}function bn(t){var e=["__\0is_clz",Tm++,Math.random().toFixed(3)].join("_");t.prototype[e]=!0,t.isInstance=function(t){return!(!t||!t[e])}}function xn(t,e){var n=E(arguments,2);return this.superClass.prototype[e].apply(t,n)}function wn(t,e,n){return this.superClass.prototype[e].apply(t,n)}function Sn(t,e){e=e||{};var n={};if(t.registerClass=function(t,e){return e&&(function(t){I(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}(e),(e=yn(e)).sub?e.sub!==Sm&&((function(t){var e=n[t.main];return e&&e[Sm]||((e=n[t.main]={})[Sm]=!0),e}(e))[e.sub]=t):n[e.main]=t),t},t.getClass=function(t,e,r){var i=n[t];if(i&&i[Sm]&&(i=e?i[e]:null),r&&!i)throw new Error(e?"Component "+t+"."+(e||"")+" not exists. Load it first.":t+".type should be specified.");return i},t.getClassesByMainType=function(t){t=yn(t);var e=[],r=n[t.main];return r&&r[Sm]?f(r,function(t,n){n!==Sm&&e.push(t)}):e.push(r),e},t.hasClass=function(t){return t=yn(t),!!n[t.main]},t.getAllClassMainTypes=function(){var t=[];return f(n,function(e,n){t.push(n)}),t},t.hasSubTypes=function(t){t=yn(t);var e=n[t.main];return e&&e[Sm]},t.parseClassType=yn,e.registerWhenExtend){var r=t.extend;r&&(t.extend=function(e){var n=r.call(this,e);return t.registerClass(n,e.type)})}return t}function Tn(t){return t>-Pm&&t<Pm}function On(t){return t>Pm||t<-Pm}function Mn(t,e,n,r,i){var a=1-i;return a*a*(a*t+3*i*e)+i*i*(i*r+3*a*n)}function kn(t,e,n,r,i){var a=1-i;return 3*(((e-t)*a+2*(n-e)*i)*a+(r-n)*i*i)}function Cn(t,e,n,r,i){var a=6*n-12*e+6*t,o=9*e+3*r-3*t-9*n,s=3*e-3*t,u=0;if(Tn(o))On(a)&&(h=-s/a)>=0&&h<=1&&(i[u++]=h);else{var l=a*a-4*o*s;if(Tn(l))i[0]=-a/(2*o);else if(l>0){var c=Im(l),h=(-a+c)/(2*o),f=(-a-c)/(2*o);h>=0&&h<=1&&(i[u++]=h),f>=0&&f<=1&&(i[u++]=f)}}return u}function En(t,e,n,r,i,a){var o=(e-t)*i+t,s=(n-e)*i+e,u=(r-n)*i+n,l=(s-o)*i+o,c=(u-s)*i+s,h=(c-l)*i+l;a[0]=t,a[1]=o,a[2]=l,a[3]=h,a[4]=h,a[5]=c,a[6]=u,a[7]=r}function An(t,e,n,r){var i=1-r;return i*(i*t+2*r*e)+r*r*n}function In(t,e,n,r){return 2*((1-r)*(e-t)+r*(n-e))}function Pn(t,e,n){var r=t+n-2*e;return 0===r?.5:(t-e)/r}function Ln(t,e,n,r,i){var a=(e-t)*r+t,o=(n-e)*r+e,s=(o-a)*r+a;i[0]=t,i[1]=a,i[2]=s,i[3]=s,i[4]=o,i[5]=n}function Dn(t,e,n){if(0!==t.length){var r,i=t[0],a=i[0],o=i[0],s=i[1],u=i[1];for(r=1;r<t.length;r++)a=Fm(a,(i=t[r])[0]),o=Um(o,i[0]),s=Fm(s,i[1]),u=Um(u,i[1]);e[0]=a,e[1]=s,n[0]=o,n[1]=u}}function jn(t,e,n,r,i,a){i[0]=Fm(t,n),i[1]=Fm(e,r),a[0]=Um(t,n),a[1]=Um(e,r)}function Rn(t,e,n,r,i,a,o,s,u,l){var c,h=Cn,f=Mn,d=h(t,n,i,o,Ym);for(u[0]=1/0,u[1]=1/0,l[0]=-1/0,l[1]=-1/0,c=0;c<d;c++){var p=f(t,n,i,o,Ym[c]);u[0]=Fm(p,u[0]),l[0]=Um(p,l[0])}for(d=h(e,r,a,s,Xm),c=0;c<d;c++){var g=f(e,r,a,s,Xm[c]);u[1]=Fm(g,u[1]),l[1]=Um(g,l[1])}u[0]=Fm(t,u[0]),l[0]=Um(t,l[0]),u[0]=Fm(o,u[0]),l[0]=Um(o,l[0]),u[1]=Fm(e,u[1]),l[1]=Um(e,l[1]),u[1]=Fm(s,u[1]),l[1]=Um(s,l[1])}function Nn(t,e,n,r,i,a,o,s){var u=Pn,l=An,c=Um(Fm(u(t,n,i),1),0),h=Um(Fm(u(e,r,a),1),0),f=l(t,n,i,c),d=l(e,r,a,h);o[0]=Fm(t,i,f),o[1]=Fm(e,a,d),s[0]=Um(t,i,f),s[1]=Um(e,a,d)}function Bn(t,e,n,r,i,a,o,s,u){var l=tt,c=et,h=Math.abs(i-a);if(h%Hm<1e-4&&h>1e-4)return s[0]=t-n,s[1]=e-r,u[0]=t+n,void(u[1]=e+r);if(Gm[0]=Vm(i)*n+t,Gm[1]=zm(i)*r+e,Wm[0]=Vm(a)*n+t,Wm[1]=zm(a)*r+e,l(s,Gm,Wm),c(u,Gm,Wm),(i%=Hm)<0&&(i+=Hm),(a%=Hm)<0&&(a+=Hm),i>a&&!o?a+=Hm:i<a&&o&&(i+=Hm),o){var f=a;a=i,i=f}for(var d=0;d<a;d+=Math.PI/2)d>i&&(qm[0]=Vm(d)*n+t,qm[1]=zm(d)*r+e,l(s,qm,s),c(u,qm,u))}function Fn(t,e,n,r,i,a,o){if(0===i)return!1;var s,u=i;if(o>e+u&&o>r+u||o<e-u&&o<r-u||a>t+u&&a>n+u||a<t-u&&a<n-u)return!1;if(t===n)return Math.abs(a-t)<=u/2;var l=(s=(e-r)/(t-n))*a-o+(t*r-n*e)/(t-n);return l*l/(s*s+1)<=u/2*u/2}function Un(t,e,n,r,i,a,o,s,u,l,c){if(0===u)return!1;var h=u;return!(c>e+h&&c>r+h&&c>a+h&&c>s+h||c<e-h&&c<r-h&&c<a-h&&c<s-h||l>t+h&&l>n+h&&l>i+h&&l>o+h||l<t-h&&l<n-h&&l<i-h&&l<o-h)&&function(t,e,n,r,i,a,o,s,u,l,c){var h,f,d,p,g,v=.005,m=1/0;Rm[0]=u,Rm[1]=l;for(var y=0;y<1;y+=.05)Nm[0]=Mn(t,n,i,o,y),Nm[1]=Mn(e,r,a,s,y),(p=Hg(Rm,Nm))<m&&(h=y,m=p);m=1/0;for(var _=0;_<32&&!(v<Lm);_++)d=h+v,Nm[0]=Mn(t,n,i,o,f=h-v),Nm[1]=Mn(e,r,a,s,f),p=Hg(Nm,Rm),f>=0&&p<m?(h=f,m=p):(Bm[0]=Mn(t,n,i,o,d),Bm[1]=Mn(e,r,a,s,d),g=Hg(Bm,Rm),d<=1&&g<m?(h=d,m=g):v*=.5);return Im(m)}(t,e,n,r,i,a,o,s,l,c)<=h/2}function zn(t,e,n,r,i,a,o,s,u){if(0===o)return!1;var l=o;return!(u>e+l&&u>r+l&&u>a+l||u<e-l&&u<r-l&&u<a-l||s>t+l&&s>n+l&&s>i+l||s<t-l&&s<n-l&&s<i-l)&&function(t,e,n,r,i,a,o,s,u){var l,c=.005,h=1/0;Rm[0]=o,Rm[1]=s;for(var f=0;f<1;f+=.05)Nm[0]=An(t,n,i,f),Nm[1]=An(e,r,a,f),(v=Hg(Rm,Nm))<h&&(l=f,h=v);h=1/0;for(var d=0;d<32&&!(c<Lm);d++){var p=l-c,g=l+c;Nm[0]=An(t,n,i,p),Nm[1]=An(e,r,a,p);var v=Hg(Nm,Rm);if(p>=0&&v<h)l=p,h=v;else{Bm[0]=An(t,n,i,g),Bm[1]=An(e,r,a,g);var m=Hg(Bm,Rm);g<=1&&m<h?(l=g,h=m):c*=.5}}return Im(h)}(t,e,n,r,i,a,s,u)<=l/2}function Vn(t){return(t%=uy)<0&&(t+=uy),t}function Hn(t,e,n,r,i,a,o,s,u){if(0===o)return!1;var l=o;s-=t,u-=e;var c=Math.sqrt(s*s+u*u);if(c-l>n||c+l<n)return!1;if(Math.abs(r-i)%ly<1e-4)return!0;if(a){var h=r;r=Vn(i),i=Vn(h)}else r=Vn(r),i=Vn(i);r>i&&(i+=ly);var f=Math.atan2(u,s);return f<0&&(f+=ly),f>=r&&f<=i||f+ly>=r&&f+ly<=i}function Gn(t,e,n,r,i,a){if(a>e&&a>r||a<e&&a<r)return 0;if(r===e)return 0;var o=r<e?1:-1,s=(a-e)/(r-e);1!==s&&0!==s||(o=r<e?.5:-.5);var u=s*(n-t)+t;return u===i?1/0:u>i?o:0}function Wn(){var t=py[0];py[0]=py[1],py[1]=t}function qn(t,e,n,r,i,a,o,s,u,l){if(l>e&&l>r&&l>a&&l>s||l<e&&l<r&&l<a&&l<s)return 0;var c=function(t,e,n,r,i,a){var o=r+3*(e-n)-t,s=3*(n-2*e+t),u=3*(e-t),l=t-i,c=s*s-3*o*u,h=s*u-9*o*l,f=u*u-3*s*l,d=0;if(Tn(c)&&Tn(h))Tn(s)?a[0]=0:(T=-u/s)>=0&&T<=1&&(a[d++]=T);else{var p=h*h-4*c*f;if(Tn(p)){var g=h/c,v=-g/2;(T=-s/o+g)>=0&&T<=1&&(a[d++]=T),v>=0&&v<=1&&(a[d++]=v)}else if(p>0){var m=Im(p),y=c*s+1.5*o*(-h+m),_=c*s+1.5*o*(-h-m);(T=(-s-((y=y<0?-Am(-y,jm):Am(y,jm))+(_=_<0?-Am(-_,jm):Am(_,jm))))/(3*o))>=0&&T<=1&&(a[d++]=T)}else{var b=(2*c*s-3*o*h)/(2*Im(c*c*c)),x=Math.acos(b)/3,w=Im(c),S=Math.cos(x),T=(-s-2*w*S)/(3*o),O=(v=(-s+w*(S+Dm*Math.sin(x)))/(3*o),(-s+w*(S-Dm*Math.sin(x)))/(3*o));T>=0&&T<=1&&(a[d++]=T),v>=0&&v<=1&&(a[d++]=v),O>=0&&O<=1&&(a[d++]=O)}}return d}(e,r,a,s,l,dy);if(0===c)return 0;for(var h,f,d=0,p=-1,g=0;g<c;g++){var v=dy[g],m=0===v||1===v?.5:1;Mn(t,n,i,o,v)<u||(p<0&&(p=Cn(e,r,a,s,py),py[1]<py[0]&&p>1&&Wn(),h=Mn(e,r,a,s,py[0]),p>1&&(f=Mn(e,r,a,s,py[1]))),d+=2==p?v<py[0]?h<e?m:-m:v<py[1]?f<h?m:-m:s<f?m:-m:v<py[0]?h<e?m:-m:s<h?m:-m)}return d}function Yn(t,e,n,r,i,a,o,s){if(s>e&&s>r&&s>a||s<e&&s<r&&s<a)return 0;var u=function(t,e,n,r,i){var a=t-2*e+n,o=2*(e-t),s=t-r,u=0;if(Tn(a))On(o)&&(h=-s/o)>=0&&h<=1&&(i[u++]=h);else{var l=o*o-4*a*s;if(Tn(l))(h=-o/(2*a))>=0&&h<=1&&(i[u++]=h);else if(l>0){var c=Im(l),h=(-o+c)/(2*a),f=(-o-c)/(2*a);h>=0&&h<=1&&(i[u++]=h),f>=0&&f<=1&&(i[u++]=f)}}return u}(e,r,a,s,dy);if(0===u)return 0;var l=Pn(e,r,a);if(l>=0&&l<=1){for(var c=0,h=An(e,r,a,l),f=0;f<u;f++)d=0===dy[f]||1===dy[f]?.5:1,(p=An(t,n,i,dy[f]))<o||(c+=dy[f]<l?h<e?d:-d:a<h?d:-d);return c}var d=0===dy[0]||1===dy[0]?.5:1,p=An(t,n,i,dy[0]);return p<o?0:a<e?d:-d}function Xn(t,e,n,r,i,a,o,s){if((s-=e)>n||s<-n)return 0;l=Math.sqrt(n*n-s*s),dy[0]=-l,dy[1]=l;var u=Math.abs(r-i);if(u<1e-4)return 0;if(u%hy<1e-4)return r=0,i=hy,p=a?1:-1,o>=dy[0]+t&&o<=dy[1]+t?p:0;if(a){var l=r;r=Vn(i),i=Vn(l)}else r=Vn(r),i=Vn(i);r>i&&(i+=hy);for(var c=0,h=0;h<2;h++){var f=dy[h];if(f+t>o){var d=Math.atan2(s,f),p=a?1:-1;d<0&&(d=hy+d),(d>=r&&d<=i||d+hy>=r&&d+hy<=i)&&(d>Math.PI/2&&d<1.5*Math.PI&&(p=-p),c+=p)}}return c}function $n(t,e,n,r,i){for(var a=0,o=0,s=0,u=0,l=0,c=0;c<t.length;){var h=t[c++];switch(h===cy.M&&c>1&&(n||(a+=Gn(o,s,u,l,r,i))),1==c&&(u=o=t[c],l=s=t[c+1]),h){case cy.M:o=u=t[c++],s=l=t[c++];break;case cy.L:if(n){if(Fn(o,s,t[c],t[c+1],e,r,i))return!0}else a+=Gn(o,s,t[c],t[c+1],r,i)||0;o=t[c++],s=t[c++];break;case cy.C:if(n){if(Un(o,s,t[c++],t[c++],t[c++],t[c++],t[c],t[c+1],e,r,i))return!0}else a+=qn(o,s,t[c++],t[c++],t[c++],t[c++],t[c],t[c+1],r,i)||0;o=t[c++],s=t[c++];break;case cy.Q:if(n){if(zn(o,s,t[c++],t[c++],t[c],t[c+1],e,r,i))return!0}else a+=Yn(o,s,t[c++],t[c++],t[c],t[c+1],r,i)||0;o=t[c++],s=t[c++];break;case cy.A:var f=t[c++],d=t[c++],p=t[c++],g=t[c++],v=t[c++],m=t[c++],y=(c++,1-t[c++]),_=Math.cos(v)*p+f,b=Math.sin(v)*g+d;c>1?a+=Gn(o,s,_,b,r,i):(u=_,l=b);var x=(r-f)*g/p+f;if(n){if(Hn(f,d,g,v,v+m,y,e,x,i))return!0}else a+=Xn(f,d,g,v,v+m,y,x,i);o=Math.cos(v+m)*p+f,s=Math.sin(v+m)*g+d;break;case cy.R:if(u=o=t[c++],l=s=t[c++],_=u+t[c++],b=l+t[c++],n){if(Fn(u,l,_,l,e,r,i)||Fn(_,l,_,b,e,r,i)||Fn(_,b,u,b,e,r,i)||Fn(u,b,u,l,e,r,i))return!0}else a+=Gn(_,l,_,b,r,i),a+=Gn(u,b,u,l,r,i);break;case cy.Z:if(n){if(Fn(o,s,u,l,e,r,i))return!0}else a+=Gn(o,s,u,l,r,i);o=u,s=l}}return n||Math.abs(s-l)<fy||(a+=Gn(o,s,u,l,r,i)||0),0!==a}function Zn(t){Ye.call(this,t),this.path=null}function Qn(t,e,n,r,i,a,o,s,u,l,c){var h=u*(My/180),f=Oy(h)*(t-n)/2+Ty(h)*(e-r)/2,d=-1*Ty(h)*(t-n)/2+Oy(h)*(e-r)/2,p=f*f/(o*o)+d*d/(s*s);p>1&&(o*=Sy(p),s*=Sy(p));var g=(i===a?-1:1)*Sy((o*o*(s*s)-o*o*(d*d)-s*s*(f*f))/(o*o*(d*d)+s*s*(f*f)))||0,v=g*o*d/s,m=g*-s*f/o,y=(t+n)/2+Oy(h)*v-Ty(h)*m,_=(e+r)/2+Ty(h)*v+Oy(h)*m,b=Ey([1,0],[(f-v)/o,(d-m)/s]),x=[(f-v)/o,(d-m)/s],w=[(-1*f-v)/o,(-1*d-m)/s],S=Ey(x,w);Cy(x,w)<=-1&&(S=My),Cy(x,w)>=1&&(S=0),0===a&&S>0&&(S-=2*My),1===a&&S<0&&(S+=2*My),c.addData(l,y,_,o,s,b,S,h,a)}function Kn(t,e){var n=function(t){if(!t)return new sy;for(var e,n=0,r=0,i=n,a=r,o=new sy,s=sy.CMD,u=t.match(Ay),l=0;l<u.length;l++){for(var c,h=u[l],f=h.charAt(0),d=h.match(Iy)||[],p=d.length,g=0;g<p;g++)d[g]=parseFloat(d[g]);for(var v=0;v<p;){var m,y,_,b,x,w,S,T=n,O=r;switch(f){case"l":n+=d[v++],r+=d[v++],o.addData(c=s.L,n,r);break;case"L":n=d[v++],r=d[v++],o.addData(c=s.L,n,r);break;case"m":n+=d[v++],r+=d[v++],o.addData(c=s.M,n,r),i=n,a=r,f="l";break;case"M":n=d[v++],r=d[v++],o.addData(c=s.M,n,r),i=n,a=r,f="L";break;case"h":n+=d[v++],o.addData(c=s.L,n,r);break;case"H":n=d[v++],o.addData(c=s.L,n,r);break;case"v":r+=d[v++],o.addData(c=s.L,n,r);break;case"V":r=d[v++],o.addData(c=s.L,n,r);break;case"C":o.addData(c=s.C,d[v++],d[v++],d[v++],d[v++],d[v++],d[v++]),n=d[v-2],r=d[v-1];break;case"c":o.addData(c=s.C,d[v++]+n,d[v++]+r,d[v++]+n,d[v++]+r,d[v++]+n,d[v++]+r),n+=d[v-2],r+=d[v-1];break;case"S":m=n,y=r;var M=o.len(),k=o.data;e===s.C&&(m+=n-k[M-4],y+=r-k[M-3]),T=d[v++],O=d[v++],n=d[v++],r=d[v++],o.addData(c=s.C,m,y,T,O,n,r);break;case"s":m=n,y=r,M=o.len(),k=o.data,e===s.C&&(m+=n-k[M-4],y+=r-k[M-3]),T=n+d[v++],O=r+d[v++],n+=d[v++],r+=d[v++],o.addData(c=s.C,m,y,T,O,n,r);break;case"Q":T=d[v++],O=d[v++],n=d[v++],r=d[v++],o.addData(c=s.Q,T,O,n,r);break;case"q":T=d[v++]+n,O=d[v++]+r,n+=d[v++],r+=d[v++],o.addData(c=s.Q,T,O,n,r);break;case"T":m=n,y=r,M=o.len(),k=o.data,e===s.Q&&(m+=n-k[M-4],y+=r-k[M-3]),n=d[v++],r=d[v++],o.addData(c=s.Q,m,y,n,r);break;case"t":m=n,y=r,M=o.len(),k=o.data,e===s.Q&&(m+=n-k[M-4],y+=r-k[M-3]),n+=d[v++],r+=d[v++],o.addData(c=s.Q,m,y,n,r);break;case"A":_=d[v++],b=d[v++],x=d[v++],w=d[v++],S=d[v++],Qn(T=n,O=r,n=d[v++],r=d[v++],w,S,_,b,x,c=s.A,o);break;case"a":_=d[v++],b=d[v++],x=d[v++],w=d[v++],S=d[v++],Qn(T=n,O=r,n+=d[v++],r+=d[v++],w,S,_,b,x,c=s.A,o)}}"z"!==f&&"Z"!==f||(o.addData(c=s.Z),n=i,r=a),e=c}return o.toStatic(),o}(t);return(e=e||{}).buildPath=function(t){if(t.setData)t.setData(n.data),(e=t.getContext())&&t.rebuildPath(e);else{var e=t;n.rebuildPath(e)}},e.applyTransform=function(t){wy(n,t),this.dirty(!0)},e}function Jn(t,e){return new Zn(Kn(t,e))}function tr(t,e,n,r,i,a,o){var s=.5*(n-t),u=.5*(r-e);return(2*(e-n)+s+u)*o+(-3*(e-n)-2*s-u)*a+s*i+e}function er(t,e,n){var r=e.points,i=e.smooth;if(r&&r.length>=2){if(i&&"spline"!==i){var a=Fy(r,i,n,e.smoothConstraint);t.moveTo(r[0][0],r[0][1]);for(var o=r.length,s=0;s<(n?o:o-1);s++){var u=a[2*s],l=a[2*s+1],c=r[(s+1)%o];t.bezierCurveTo(u[0],u[1],l[0],l[1],c[0],c[1])}}else{"spline"===i&&(r=By(r,n)),t.moveTo(r[0][0],r[0][1]),s=1;for(var h=r.length;s<h;s++)t.lineTo(r[s][0],r[s][1])}n&&t.closePath()}}function nr(t,e,n){return null===t.cpx2||null===t.cpy2?[(n?kn:Mn)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?kn:Mn)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?In:An)(t.x1,t.cpx1,t.x2,e),(n?In:An)(t.y1,t.cpy1,t.y2,e)]}function rr(t){Ye.call(this,t),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}function ir(t){return Zn.extend(t)}function ar(t,e,n,r){var i=Jn(t,e);return n&&("center"===r&&(n=sr(n,i.getBoundingRect())),ur(i,n)),i}function or(t,e,n){var r=new Xe({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(t){"center"===n&&r.setStyle(sr(e,{width:t.width,height:t.height}))}});return r}function sr(t,e){var n,r=e.width/e.height,i=t.height*r;return n=i<=t.width?t.height:(i=t.width)/r,{x:t.x+t.width/2-i/2,y:t.y+t.height/2-n/2,width:i,height:n}}function ur(t,e){if(t.applyTransform){var n=t.getBoundingRect().calculateTransform(e);t.applyTransform(n)}}function lr(t){var e=t.shape,n=t.style.lineWidth;return Ky(2*e.x1)===Ky(2*e.x2)&&(e.x1=e.x2=hr(e.x1,n,!0)),Ky(2*e.y1)===Ky(2*e.y2)&&(e.y1=e.y2=hr(e.y1,n,!0)),t}function cr(t){var e=t.shape,n=t.style.lineWidth,r=e.x,i=e.y,a=e.width,o=e.height;return e.x=hr(e.x,n,!0),e.y=hr(e.y,n,!0),e.width=Math.max(hr(r+a,n,!1)-e.x,0===a?0:1),e.height=Math.max(hr(i+o,n,!1)-e.y,0===o?0:1),t}function hr(t,e,n){var r=Ky(2*t);return(r+Ky(e))%2==0?r/2:(r+(n?1:-1))/2}function fr(t){return null!=t&&"none"!==t}function dr(t){var e=t.__hoverStl;if(e&&!t.__highlighted){var n=t.useHoverLayer;t.__highlighted=n?"layer":"plain";var r=t.__zr;if(r||!n){var i=t,a=t.style;n&&(a=(i=r.addHover(t)).style),Ir(a),n||function(t){if(t.__hoverStlDirty){t.__hoverStlDirty=!1;var e=t.__hoverStl;if(e){var n=t.__normalStl={},r=t.style;for(var i in e)null!=e[i]&&(n[i]=r[i]);n.fill=r.fill,n.stroke=r.stroke}else t.__normalStl=null}}(i),a.extendFrom(e),pr(a,e,"fill"),pr(a,e,"stroke"),Ar(a),n||(t.dirty(!1),t.z2+=1)}}}function pr(t,e,n){!fr(e[n])&&fr(t[n])&&(t[n]=function(t){if("string"!=typeof t)return t;var e=r_.get(t);return e||(e=Rt(t,-.1),i_<1e4&&(r_.set(t,e),i_++)),e}(t[n]))}function gr(t){t.__highlighted&&(function(t){var e=t.__highlighted;if("layer"===e)t.__zr&&t.__zr.removeHover(t);else if(e){var n=t.style,r=t.__normalStl;r&&(Ir(n),t.setStyle(r),Ar(n),t.z2-=1)}}(t),t.__highlighted=!1)}function vr(t,e){t.isGroup?t.traverse(function(t){!t.isGroup&&e(t)}):e(t)}function mr(t,e){e=t.__hoverStl=!1!==e&&(e||{}),t.__hoverStlDirty=!0,t.__highlighted&&(gr(t),dr(t))}function yr(t){return t&&t.__isEmphasisEntered}function _r(t){this.__hoverSilentOnTouch&&t.zrByTouch||!this.__isEmphasisEntered&&vr(this,dr)}function br(t){this.__hoverSilentOnTouch&&t.zrByTouch||!this.__isEmphasisEntered&&vr(this,gr)}function xr(){this.__isEmphasisEntered=!0,vr(this,dr)}function wr(){this.__isEmphasisEntered=!1,vr(this,gr)}function Sr(t,e,n){t.isGroup?t.traverse(function(t){!t.isGroup&&mr(t,t.hoverStyle||e)}):mr(t,t.hoverStyle||e),Tr(t,n)}function Tr(t,e){var n=!1===e;if(t.__hoverSilentOnTouch=null!=e&&e.hoverSilentOnTouch,!n||t.__hoverStyleTrigger){var r=n?"off":"on";t[r]("mouseover",_r)[r]("mouseout",br),t[r]("emphasis",xr)[r]("normal",wr),t.__hoverStyleTrigger=!n}}function Or(t,e,n,r,i,a,o){var s,u=(i=i||e_).labelFetcher,l=i.labelDataIndex,c=i.labelDimIndex,h=n.getShallow("show"),f=r.getShallow("show");(h||f)&&(u&&(s=u.getFormattedLabel(l,"normal",null,c)),null==s&&(s=_(i.defaultText)?i.defaultText(l,i):i.defaultText));var d=h?s:null,p=f?k(u?u.getFormattedLabel(l,"emphasis",null,c):null,s):null;null==d&&null==p||(Mr(t,n,a,i),Mr(e,r,o,i,!0)),t.text=d,e.text=p}function Mr(t,e,n,r,i){return kr(t,e,r,i),n&&a(t,n),t}function kr(t,e,n,r){if((n=n||e_).isRectText){var i=e.getShallow("position")||(r?null:"inside");"outside"===i&&(i="top"),t.textPosition=i,t.textOffset=e.getShallow("offset");var a=e.getShallow("rotate");null!=a&&(a*=Math.PI/180),t.textRotation=a,t.textDistance=k(e.getShallow("distance"),r?null:5)}var o,s=e.ecModel,u=s&&s.option.textStyle,l=function(t){for(var e;t&&t!==t.ecModel;){var n=(t.option||e_).rich;if(n)for(var r in e=e||{},n)n.hasOwnProperty(r)&&(e[r]=1);t=t.parentModel}return e}(e);if(l)for(var c in o={},l)if(l.hasOwnProperty(c)){var h=e.getModel(["rich",c]);Cr(o[c]={},h,u,n,r)}return t.rich=o,Cr(t,e,u,n,r,!0),n.forceRich&&!n.textStyle&&(n.textStyle={}),t}function Cr(t,e,n,r,i,a){n=!i&&n||e_,t.textFill=Er(e.getShallow("color"),r)||n.color,t.textStroke=Er(e.getShallow("textBorderColor"),r)||n.textBorderColor,t.textStrokeWidth=k(e.getShallow("textBorderWidth"),n.textBorderWidth),t.insideRawTextPosition=t.textPosition,i||(a&&(t.insideRollbackOpt=r,Ar(t)),null==t.textFill&&(t.textFill=r.autoColor)),t.fontStyle=e.getShallow("fontStyle")||n.fontStyle,t.fontWeight=e.getShallow("fontWeight")||n.fontWeight,t.fontSize=e.getShallow("fontSize")||n.fontSize,t.fontFamily=e.getShallow("fontFamily")||n.fontFamily,t.textAlign=e.getShallow("align"),t.textVerticalAlign=e.getShallow("verticalAlign")||e.getShallow("baseline"),t.textLineHeight=e.getShallow("lineHeight"),t.textWidth=e.getShallow("width"),t.textHeight=e.getShallow("height"),t.textTag=e.getShallow("tag"),a&&r.disableBox||(t.textBackgroundColor=Er(e.getShallow("backgroundColor"),r),t.textPadding=e.getShallow("padding"),t.textBorderColor=Er(e.getShallow("borderColor"),r),t.textBorderWidth=e.getShallow("borderWidth"),t.textBorderRadius=e.getShallow("borderRadius"),t.textBoxShadowColor=e.getShallow("shadowColor"),t.textBoxShadowBlur=e.getShallow("shadowBlur"),t.textBoxShadowOffsetX=e.getShallow("shadowOffsetX"),t.textBoxShadowOffsetY=e.getShallow("shadowOffsetY")),t.textShadowColor=e.getShallow("textShadowColor")||n.textShadowColor,t.textShadowBlur=e.getShallow("textShadowBlur")||n.textShadowBlur,t.textShadowOffsetX=e.getShallow("textShadowOffsetX")||n.textShadowOffsetX,t.textShadowOffsetY=e.getShallow("textShadowOffsetY")||n.textShadowOffsetY}function Er(t,e){return"auto"!==t?t:e&&e.autoColor?e.autoColor:null}function Ar(t){var e=t.insideRollbackOpt;if(e&&null==t.textFill){var n,r=e.useInsideStyle,i=t.insideRawTextPosition,a=e.autoColor;!1!==r&&(!0===r||e.isRectText&&i&&"string"==typeof i&&i.indexOf("inside")>=0)?(n={textFill:null,textStroke:t.textStroke,textStrokeWidth:t.textStrokeWidth},t.textFill="#fff",null==t.textStroke&&(t.textStroke=a,null==t.textStrokeWidth&&(t.textStrokeWidth=2))):null!=a&&(n={textFill:null},t.textFill=a),n&&(t.insideRollback=n)}}function Ir(t){var e=t.insideRollback;e&&(t.textFill=e.textFill,t.textStroke=e.textStroke,t.textStrokeWidth=e.textStrokeWidth,t.insideRollback=null)}function Pr(t,e){var n=e||e.getModel("textStyle");return P([t.fontStyle||n&&n.getShallow("fontStyle")||"",t.fontWeight||n&&n.getShallow("fontWeight")||"",(t.fontSize||n&&n.getShallow("fontSize")||12)+"px",t.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}function Lr(t,e,n,r,i,a){if("function"==typeof i&&(a=i,i=null),r&&r.isAnimationEnabled()){var o=t?"Update":"",s=r.getShallow("animationDuration"+o),u=r.getShallow("animationEasing"+o),l=r.getShallow("animationDelay"+o);"function"==typeof l&&(l=l(i,r.getAnimationDelayParams?r.getAnimationDelayParams(e,i):null)),"function"==typeof s&&(s=s(i)),s>0?e.animateTo(n,s,l||0,u,a,!!a):(e.stopAnimation(),e.attr(n),a&&a())}else e.stopAnimation(),e.attr(n),a&&a()}function Dr(t,e,n,r,i){Lr(!0,t,e,n,r,i)}function jr(t,e,n,r,i){Lr(!1,t,e,n,r,i)}function Rr(t,e){for(var n=gt([]);t&&t!==e;)mt(n,t.getLocalTransform(),n),t=t.parent;return n}function Nr(t,e,n){return e&&!h(e)&&(e=rv.getLocalTransform(e)),n&&(e=xt([],e)),J([],t,e)}function Br(t,e,n){var r=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),i=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),a=["left"===t?-r:"right"===t?r:0,"top"===t?-i:"bottom"===t?i:0];return a=Nr(a,e,n),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function Fr(t,e,n,r){function i(t){var e={position:z(t.position),rotation:t.rotation};return t.shape&&(e.shape=a({},t.shape)),e}if(t&&e){var o=function(t){var e={};return t.traverse(function(t){!t.isGroup&&t.anid&&(e[t.anid]=t)}),e}(t);e.traverse(function(t){if(!t.isGroup&&t.anid){var e=o[t.anid];if(e){var r=i(t);t.attr(i(e)),Dr(t,r,n,t.dataIndex)}}})}}function Ur(t,e){return d(t,function(t){var n=t[0];n=Jy(n,e.x),n=t_(n,e.x+e.width);var r=t[1];return r=Jy(r,e.y),[n,r=t_(r,e.y+e.height)]})}function zr(t,e,n){var r=(e=a({rectHover:!0},e)).style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return 0===t.indexOf("image://")?(r.image=t.slice(8),o(r,n),new Xe(e)):ar(t.replace("path://",""),e,n,"center")}function Vr(t,e,n){this.parentModel=e,this.ecModel=n,this.option=t}function Hr(t,e,n){for(var r=0;r<e.length&&(!e[r]||null!=(t=t&&"object"==typeof t?t[e[r]]:null));r++);return null==t&&n&&(t=n.get(e)),t}function Gr(t,e){var n=h_(t).getParent;return n?n.call(t,e):t.parentModel}function Wr(t){return[t||"",f_++,Math.random().toFixed(5)].join("_")}function qr(t,e,n,r){var i=e[1]-e[0],a=n[1]-n[0];if(0===i)return 0===a?n[0]:(n[0]+n[1])/2;if(r)if(i>0){if(t<=e[0])return n[0];if(t>=e[1])return n[1]}else{if(t>=e[0])return n[0];if(t<=e[1])return n[1]}else{if(t===e[0])return n[0];if(t===e[1])return n[1]}return(t-e[0])/i*a+n[0]}function Yr(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}return"string"==typeof t?function(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")}(t).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t}function Xr(t,e,n){return null==e&&(e=10),e=Math.min(Math.max(0,e),20),t=(+t).toFixed(e),n?t:+t}function $r(t){return t.sort(function(t,e){return t-e}),t}function Zr(t){if(t=+t,isNaN(t))return 0;for(var e=1,n=0;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Qr(t){var e=t.toString(),n=e.indexOf("e");if(n>0){var r=+e.slice(n+1);return r<0?-r:0}var i=e.indexOf(".");return i<0?0:e.length-1-i}function Kr(t,e){var n=Math.log,r=Math.LN10,i=Math.floor(n(t[1]-t[0])/r),a=Math.round(n(Math.abs(e[1]-e[0]))/r),o=Math.min(Math.max(-i+a,0),20);return isFinite(o)?o:20}function Jr(t,e,n){if(!t[e])return 0;var r=p(t,function(t,e){return t+(isNaN(e)?0:e)},0);if(0===r)return 0;for(var i=Math.pow(10,n),a=d(t,function(t){return(isNaN(t)?0:t)/r*i*100}),o=100*i,s=d(a,function(t){return Math.floor(t)}),u=p(s,function(t,e){return t+e},0),l=d(a,function(t,e){return t-s[e]});u<o;){for(var c=Number.NEGATIVE_INFINITY,h=null,f=0,g=l.length;f<g;++f)l[f]>c&&(c=l[f],h=f);++s[h],l[h]=0,++u}return s[e]/i}function ti(t){var e=2*Math.PI;return(t%e+e)%e}function ei(t){return t>-d_&&t<d_}function ni(t){if(t instanceof Date)return t;if("string"==typeof t){var e=g_.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(n-=e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,+e[7]||0))}return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,+e[7]||0)}return null==t?new Date(NaN):new Date(Math.round(t))}function ri(t){return Math.pow(10,ii(t))}function ii(t){return Math.floor(Math.log(t)/Math.LN10)}function ai(t,e){var n=ii(t),r=Math.pow(10,n),i=t/r;return t=(e?i<1.5?1:i<2.5?2:i<4?3:i<7?5:10:i<1?1:i<2?2:i<3?3:i<5?5:10)*r,n>=-20?+t.toFixed(n<0?-n:0):t}function oi(t){t.sort(function(t,e){return function t(e,n,r){return e.interval[r]<n.interval[r]||e.interval[r]===n.interval[r]&&(e.close[r]-n.close[r]==(r?-1:1)||!r&&t(e,n,1))}(t,e,0)?-1:1});for(var e=-1/0,n=1,r=0;r<t.length;){for(var i=t[r].interval,a=t[r].close,o=0;o<2;o++)i[o]<=e&&(i[o]=e,a[o]=o?1:1-n),e=i[o],n=a[o];i[0]===i[1]&&a[0]*a[1]!=1?t.splice(r,1):r++}return t}function si(t){return t-parseFloat(t)>=0}function ui(t){return isNaN(t)?"-":(t=(t+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function li(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()}),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}function ci(t){return null==t?"":(t+"").replace(y_,function(t,e){return __[e]})}function hi(t,e,n){y(e)||(e=[e]);var r=e.length;if(!r)return"";for(var i=e[0].$vars||[],a=0;a<i.length;a++){var o=b_[a];t=t.replace(x_(o),x_(o,0))}for(var s=0;s<r;s++)for(var u=0;u<i.length;u++){var l=e[s][i[u]];t=t.replace(x_(b_[u],s),n?ci(l):l)}return t}function fi(t,e,n){return f(e,function(e,r){t=t.replace("{"+r+"}",n?ci(e):e)}),t}function di(t,e){var n=(t=b(t)?{color:t,extraCssText:e}:t||{}).color,r=(e=t.extraCssText,t.renderMode||"html"),i=t.markerId||"X";return n?"html"===r?"subItem"===t.type?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+ci(n)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+ci(n)+";"+(e||"")+'"></span>':{renderMode:r,content:"{marker"+i+"|}  ",style:{color:n}}:""}function pi(t,e){return"0000".substr(0,e-(t+="").length)+t}function gi(t,e,n){"week"!==t&&"month"!==t&&"quarter"!==t&&"half-year"!==t&&"year"!==t||(t="MM-dd\nyyyy");var r=ni(e),i=n?"UTC":"",a=r["get"+i+"FullYear"](),o=r["get"+i+"Month"]()+1,s=r["get"+i+"Date"](),u=r["get"+i+"Hours"](),l=r["get"+i+"Minutes"](),c=r["get"+i+"Seconds"](),h=r["get"+i+"Milliseconds"]();return t.replace("MM",pi(o,2)).replace("M",o).replace("yyyy",a).replace("yy",a%100).replace("dd",pi(s,2)).replace("d",s).replace("hh",pi(u,2)).replace("h",u).replace("mm",pi(l,2)).replace("m",l).replace("ss",pi(c,2)).replace("s",c).replace("SSS",pi(h,3))}function vi(t){return t?t.charAt(0).toUpperCase()+t.substr(1):t}function mi(t,e,n,r,i){var a=0,o=0;null==r&&(r=1/0),null==i&&(i=1/0);var s=0;e.eachChild(function(u,l){var c,h,f=u.position,d=u.getBoundingRect(),p=e.childAt(l+1),g=p&&p.getBoundingRect();if("horizontal"===t){var v=d.width+(g?-g.x+d.x:0);(c=a+v)>r||u.newline?(a=0,c=v,o+=s+n,s=d.height):s=Math.max(s,d.height)}else{var m=d.height+(g?-g.y+d.y:0);(h=o+m)>i||u.newline?(a+=s+n,o=0,h=m,s=d.width):s=Math.max(s,d.width)}u.newline||(f[0]=a,f[1]=o,"horizontal"===t?a=c+n:o=h+n)})}function yi(t,e,n){n=m_(n||0);var r=e.width,i=e.height,a=Yr(t.left,r),o=Yr(t.top,i),s=Yr(t.right,r),u=Yr(t.bottom,i),l=Yr(t.width,r),c=Yr(t.height,i),h=n[2]+n[0],f=n[1]+n[3],d=t.aspect;switch(isNaN(l)&&(l=r-s-f-a),isNaN(c)&&(c=i-u-h-o),null!=d&&(isNaN(l)&&isNaN(c)&&(d>r/i?l=.8*r:c=.8*i),isNaN(l)&&(l=d*c),isNaN(c)&&(c=l/d)),isNaN(a)&&(a=r-s-l-f),isNaN(o)&&(o=i-u-c-h),t.left||t.right){case"center":a=r/2-l/2-n[3];break;case"right":a=r-l-f}switch(t.top||t.bottom){case"middle":case"center":o=i/2-c/2-n[0];break;case"bottom":o=i-c-h}a=a||0,o=o||0,isNaN(l)&&(l=r-f-a-(s||0)),isNaN(c)&&(c=i-h-o-(u||0));var p=new re(a+n[3],o+n[0],l,c);return p.margin=n,p}function _i(t,e,n,r,i){var a=!i||!i.hv||i.hv[0],s=!i||!i.hv||i.hv[1],u=i&&i.boundingMode||"all";if(a||s){var l;if("raw"===u)l="group"===t.type?new re(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(l=t.getBoundingRect(),t.needLocalTransform()){var c=t.getLocalTransform();(l=l.clone()).applyTransform(c)}e=yi(o({width:l.width,height:l.height},e),n,r);var h=t.position,f=a?e.x-l.x:0,d=s?e.y-l.y:0;t.attr("position","raw"===u?[f,d]:[h[0]+f,h[1]+d])}}function bi(t,e,n){function r(n,r){var o={},u=0,l={},c=0;if(T_(n,function(e){l[e]=t[e]}),T_(n,function(t){i(e,t)&&(o[t]=l[t]=e[t]),a(o,t)&&u++,a(l,t)&&c++}),s[r])return a(e,n[1])?l[n[2]]=null:a(e,n[2])&&(l[n[1]]=null),l;if(2!==c&&u){if(u>=2)return o;for(var h=0;h<n.length;h++){var f=n[h];if(!i(o,f)&&i(t,f)){o[f]=t[f];break}}return o}return l}function i(t,e){return t.hasOwnProperty(e)}function a(t,e){return null!=t[e]&&"auto"!==t[e]}function o(t,e,n){T_(t,function(t){e[t]=n[t]})}!x(n)&&(n={});var s=n.ignoreSize;!y(s)&&(s=[s,s]);var u=r(M_[0],0),l=r(M_[1],1);o(M_[0],t,u),o(M_[1],t,l)}function xi(t){return wi({},t)}function wi(t,e){return e&&t&&T_(O_,function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}function Si(t){var e=t.get("coordinateSystem"),n={coordSysName:e,coordSysDims:[],axisMap:R(),categoryAxisMap:R()},r=j_[e];if(r)return r(t,n,n.axisMap,n.categoryAxisMap),n}function Ti(t){return"category"===t.get("type")}function Oi(t){this.fromDataset=t.fromDataset,this.data=t.data||(t.sourceFormat===F_?{}:[]),this.sourceFormat=t.sourceFormat||U_,this.seriesLayoutBy=t.seriesLayoutBy||V_,this.dimensionsDefine=t.dimensionsDefine,this.encodeDefine=t.encodeDefine&&R(t.encodeDefine),this.startIndex=t.startIndex||0,this.dimensionsDetectCount=t.dimensionsDetectCount}function Mi(t){var e=t.option,n=e.data,r=S(n)?z_:R_,i=!1,a=e.seriesLayoutBy,o=e.sourceHeader,s=e.dimensions,u=function(t){var e=t.option;if(!e.data)return t.ecModel.getComponent("dataset",e.datasetIndex||0)}(t);if(u){var l=u.option;n=l.source,r=G_(u).sourceFormat,i=!0,a=a||l.seriesLayoutBy,null==o&&(o=l.sourceHeader),s=s||l.dimensions}var c=function(t,e,n,r,i){if(!t)return{dimensionsDefine:ki(i)};var a,o,s,u;if(e===N_)"auto"===r||null==r?Ci(function(t){null!=t&&"-"!==t&&(b(t)?null==o&&(o=1):o=0)},n,t,10):o=r?1:0,i||1!==o||(i=[],Ci(function(t,e){i[e]=null!=t?t:""},n,t)),a=i?i.length:n===H_?t.length:t[0]?t[0].length:null;else if(e===B_)i||(i=function(t){for(var e,n=0;n<t.length&&!(e=t[n++]););if(e){var r=[];return f(e,function(t,e){r.push(e)}),r}}(t),s=!0);else if(e===F_)i||(i=[],s=!0,f(t,function(t,e){i.push(e)}));else if(e===R_){var l=sn(t[0]);a=y(l)&&l.length||1}return s&&f(i,function(t,e){"name"===(x(t)?t.name:t)&&(u=e)}),{startIndex:o,dimensionsDefine:ki(i),dimensionsDetectCount:a,potentialNameDimIndex:u}}(n,r,a,o,s),h=e.encode;!h&&u&&(h=function(t,e,n,r,i,a){var o=Si(t),s={},u=[],l=[],c=t.subType,h=R(["pie","map","funnel"]),d=R(["line","bar","pictorialBar","scatter","effectScatter","candlestick","boxplot"]);if(o&&null!=d.get(c)){var p=G_(t.ecModel).datasetMap,g=e.uid+"_"+i,v=p.get(g)||p.set(g,{categoryWayDim:1,valueWayDim:0});f(o.coordSysDims,function(t){if(null==o.firstCategoryDimIndex)e=v.valueWayDim++,s[t]=e,l.push(e);else if(o.categoryAxisMap.get(t))s[t]=0,u.push(0);else{var e=v.categoryWayDim++;s[t]=e,l.push(e)}})}else if(null!=h.get(c)){for(var m,y=0;y<5&&null==m;y++)Ai(n,r,i,a.dimensionsDefine,a.startIndex,y)||(m=y);if(null!=m){s.value=m;var _=a.potentialNameDimIndex||Math.max(m-1,0);l.push(_),u.push(_)}}return u.length&&(s.itemName=u),l.length&&(s.seriesName=l),s}(t,u,n,r,a,c)),G_(t).source=new Oi({data:n,fromDataset:i,seriesLayoutBy:a,sourceFormat:r,dimensionsDefine:c.dimensionsDefine,startIndex:c.startIndex,dimensionsDetectCount:c.dimensionsDetectCount,encodeDefine:h})}function ki(t){if(t){var e=R();return d(t,function(t,n){if(null==(t=a({},x(t)?t:{name:t})).name)return t;t.name+="",null==t.displayName&&(t.displayName=t.name);var r=e.get(t.name);return r?t.name+="-"+r.count++:e.set(t.name,{count:1}),t})}}function Ci(t,e,n,r){if(null==r&&(r=1/0),e===H_)for(a=0;a<n.length&&a<r;a++)t(n[a]?n[a][0]:null,a);else for(var i=n[0]||[],a=0;a<i.length&&a<r;a++)t(i[a],a)}function Ei(t,e){return Ai(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}function Ai(t,e,n,r,i,a){function o(t){return(null==t||!isFinite(t)||""===t)&&(!(!b(t)||"-"===t)||void 0)}var s,u;if(S(t))return!1;if(r&&(u=x(u=r[a])?u.name:u),e===N_)if(n===H_){for(var l=t[a],c=0;c<(l||[]).length&&c<5;c++)if(null!=(s=o(l[i+c])))return s}else for(c=0;c<t.length&&c<5;c++){var h=t[i+c];if(h&&null!=(s=o(h[a])))return s}else if(e===B_){if(!u)return;for(c=0;c<t.length&&c<5;c++)if((f=t[c])&&null!=(s=o(f[u])))return s}else if(e===F_){if(!u)return;if(!(l=t[u])||S(l))return!1;for(c=0;c<l.length&&c<5;c++)if(null!=(s=o(l[c])))return s}else if(e===R_)for(c=0;c<t.length&&c<5;c++){var f=t[c],d=sn(f);if(!y(d))return!1;if(null!=(s=o(d[a])))return s}return!1}function Ii(t){t=t,this.option={},this.option[W_]=1,this._componentsMap=R({series:[]}),function(t,e){var i=t.color&&!t.colorLayer;f(e,function(e,a){"colorLayer"===a&&i||A_.hasClass(a)||("object"==typeof e?t[a]=t[a]?r(t[a],e,!1):n(e):null==t[a]&&(t[a]=e))})}(t,this._theme.option),r(t,P_,!1),this.mergeOption(t)}function Pi(t,e){t._seriesIndicesMap=R(t._seriesIndices=d(e,function(t){return t.componentIndex})||[])}function Li(t,e){return e.hasOwnProperty("subType")?g(t,function(t){return t.subType===e.subType}):t}function Di(t){f(Y_,function(e){this[e]=v(t[e],t)},this)}function ji(){this._coordinateSystems=[]}function Ri(t){this._api=t,this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[]}function Ni(t,e,n){var r={width:e,height:n,aspectratio:e/n},i=!0;return f(t,function(t,e){var n=e.match(J_);if(n&&n[1]&&n[2]){var a=n[1],o=n[2].toLowerCase();(function(t,e,n){return"min"===a?t>=e:"max"===a?t<=e:t===e})(r[o],t)||(i=!1)}}),i}function Bi(t){var e=t&&t.itemStyle;if(e)for(var n=0,i=nb.length;n<i;n++){var a=nb[n],o=e.normal,s=e.emphasis;o&&o[a]&&(t[a]=t[a]||{},t[a].normal?r(t[a].normal,o[a]):t[a].normal=o[a],o[a]=null),s&&s[a]&&(t[a]=t[a]||{},t[a].emphasis?r(t[a].emphasis,s[a]):t[a].emphasis=s[a],s[a]=null)}}function Fi(t,e,n){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var r=t[e].normal,i=t[e].emphasis;r&&(n?(t[e].normal=t[e].emphasis=null,o(t[e],r)):t[e]=r),i&&(t.emphasis=t.emphasis||{},t.emphasis[e]=i)}}function Ui(t){Fi(t,"itemStyle"),Fi(t,"lineStyle"),Fi(t,"areaStyle"),Fi(t,"label"),Fi(t,"labelLine"),Fi(t,"upperLabel"),Fi(t,"edgeLabel")}function zi(t,e){var n=eb(t)&&t[e],r=eb(n)&&n.textStyle;if(r)for(var i=0,a=bm.length;i<a;i++)r.hasOwnProperty(e=bm[i])&&(n[e]=r[e])}function Vi(t){t&&(Ui(t),zi(t,"label"),t.emphasis&&zi(t.emphasis,"label"))}function Hi(t){return y(t)?t:t?[t]:[]}function Gi(t){return(y(t)?t[0]:t)||{}}function Wi(t){f(rb,function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])})}function qi(t){f(t,function(e,n){var r=[],i=[NaN,NaN],a=e.data,o=e.isStackedByIndex,s=a.map([e.stackResultDimension,e.stackedOverDimension],function(s,u,l){var c,h,f=a.get(e.stackedDimension,l);if(isNaN(f))return i;o?h=a.getRawIndex(l):c=a.get(e.stackedByDimension,l);for(var d=NaN,p=n-1;p>=0;p--){var g=t[p];if(o||(h=g.data.rawIndexOf(g.stackedByDimension,c)),h>=0){var v=g.data.getByRawIndex(g.stackResultDimension,h);if(f>=0&&v>0||f<=0&&v<0){f+=v,d=v;break}}}return r[0]=f,r[1]=d,r});a.hostModel.setData(s),e.data=s})}function Yi(t,e){Oi.isInstance(t)||(t=Oi.seriesDataToSource(t)),this._source=t;var n=this._data=t.data,r=t.sourceFormat;r===z_&&(this._offset=0,this._dimSize=e,this._data=n),a(this,sb[r===N_?r+"_"+t.seriesLayoutBy:r])}function Xi(){return this._data.length}function $i(t){return this._data[t]}function Zi(t){for(var e=0;e<t.length;e++)this._data.push(t[e])}function Qi(t,e,n,r){return null!=n?t[n]:t}function Ki(t,e,n,r){return Ji(t[r],this._dimensionInfos[e])}function Ji(t,e){var n=e&&e.type;if("ordinal"===n){var r=e&&e.ordinalMeta;return r?r.parseAndCollect(t):t}return"time"===n&&"number"!=typeof t&&null!=t&&"-"!==t&&(t=+ni(t)),null==t||""===t?NaN:+t}function ta(t,e,n){if(t){var r=t.getRawDataItem(e);if(null!=r){var i,a,o=t.getProvider().getSource().sourceFormat,s=t.getDimensionInfo(n);return s&&(i=s.name,a=s.index),ub[o](r,e,a,i)}}}function ea(t,e,n){if(t){var r=t.getProvider().getSource().sourceFormat;if(r===R_||r===B_){var i=t.getRawDataItem(e);return r!==R_||x(i)||(i=null),i?i[n]:void 0}}}function na(t){return new ra(t)}function ra(t){this._reset=(t=t||{}).reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}function ia(t,e,n,r,i,a){db.reset(n,r,i,a),t._callingProgress=e,t._callingProgress({start:n,end:r,count:r-n,next:db.next},t.context)}function aa(t){var e=t.name;cn(t)||(t.name=function(t){var e=t.getRawData(),n=[];return f(e.mapDimension("seriesName",!0),function(t){var r=e.getDimensionInfo(t);r.displayName&&n.push(r.displayName)}),n.join(" ")}(t)||e)}function oa(t){return t.model.getRawData().count()}function sa(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),ua}function ua(t,e){t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function la(t,e){f(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,m(ca,e))})}function ca(t){var e=ha(t);e&&e.setOutputEnd(this.count())}function ha(t){var e=(t.ecModel||{}).scheduler,n=e&&e.getPipeline(t.uid);if(n){var r=n.currentTask;if(r){var i=r.agentStubMap;i&&(r=i.get(t.uid))}return r}}function fa(){this.group=new kv,this.uid=Wr("viewChart"),this.renderTask=na({plan:ga,reset:va}),this.renderTask.context={view:this}}function da(t,e){if(t&&(t.trigger(e),"group"===t.type))for(var n=0;n<t.childCount();n++)da(t.childAt(n),e)}function pa(t,e,n){var r=fn(t,e);null!=r?f(an(r),function(e){da(t.getItemGraphicEl(e),n)}):t.eachItemGraphicEl(function(t){da(t,n)})}function ga(t){return bb(t.model)}function va(t){var e=t.model,n=t.ecModel,r=t.api,i=t.payload,a=e.pipelineContext.progressiveRender,o=t.view,s=i&&_b(i).updateMethod,u=a?"incrementalPrepareRender":s&&o[s]?s:"render";return"render"!==u&&o[u](e,n,r,i),wb[u]}function ma(t,e,n){function r(){c=(new Date).getTime(),h=null,t.apply(o,s||[])}var i,a,o,s,u,l=0,c=0,h=null;e=e||0;var f=function(){i=(new Date).getTime(),o=this,s=arguments;var t=u||e,f=u||n;u=null,a=i-(f?l:c)-t,clearTimeout(h),f?h=setTimeout(r,t):a>=0?r():h=setTimeout(r,-a),l=i};return f.clear=function(){h&&(clearTimeout(h),h=null)},f.debounceNextCall=function(t){u=t},f}function ya(t,e,n,r){var i=t[e];if(i){var a=i[Sb]||i;if(i[Tb]!==n||i[Ob]!==r){if(null==n||!r)return t[e]=a;(i=t[e]=ma(a,n,"debounce"===r))[Sb]=a,i[Ob]=r,i[Tb]=n}return i}}function _a(t,e){var n=t[e];n&&n[Sb]&&(t[e]=n[Sb])}function ba(t,e,n,r){this.ecInstance=t,this.api=e,n=this._dataProcessorHandlers=n.slice(),r=this._visualHandlers=r.slice(),this._allHandlers=n.concat(r),this._stageTaskMap=R()}function xa(t,e,n,r,i){function a(t,e){return t.setDirty&&(!t.dirtyMap||t.dirtyMap.get(e.__pipeline.id))}var o;i=i||{},f(e,function(e,s){if(!i.visualType||i.visualType===e.visualType){var u=t._stageTaskMap.get(e.uid),l=u.seriesTaskMap,c=u.overallTask;if(c){var h,f=c.agentStubMap;f.each(function(t){a(i,t)&&(t.dirty(),h=!0)}),h&&c.dirty(),Ib(c,r);var d=t.getPerformArgs(c,i.block);f.each(function(t){t.perform(d)}),o|=c.perform(d)}else l&&l.each(function(s,u){a(i,s)&&s.dirty();var l=t.getPerformArgs(s,i.block);l.skip=!e.performRawSeries&&n.isSeriesFiltered(s.context.model),Ib(s,r),o|=s.perform(l)})}}),t.unfinished|=o}function wa(t){t.overallReset(t.ecModel,t.api,t.payload)}function Sa(t,e){return t.overallProgress&&Ta}function Ta(){this.agent.dirty(),this.getDownstream().dirty()}function Oa(){this.agent&&this.agent.dirty()}function Ma(t){return t.plan&&t.plan(t.model,t.ecModel,t.api,t.payload)}function ka(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=an(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length>1?d(e,function(t,e){return Ca(e)}):Pb}function Ca(t){return function(e,n){var r=n.data,i=n.resetDefines[t];if(i&&i.dataEach)for(var a=e.start;a<e.end;a++)i.dataEach(r,a);else i&&i.progress&&i.progress(e,r)}}function Ea(t){return t.data.count()}function Aa(t,e,n){var r=t._pipelineMap.get(e.uid);!r.head&&(r.head=n),r.tail&&r.tail.pipe(n),r.tail=n,n.__idxInPipeline=r.count++,n.__pipeline=r}function Ia(t,e){for(var n in e.prototype)t[n]=B}function Pa(t){for(b(t)&&(t=(new DOMParser).parseFromString(t,"text/xml")),9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}function La(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}function Da(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),o(e.__inheritedStyle,t.__inheritedStyle))}function ja(t){for(var e=P(t).split(zb),n=[],r=0;r<e.length;r+=2){var i=parseFloat(e[r]),a=parseFloat(e[r+1]);n.push([i,a])}return n}function Ra(t,e,n,r){var i=e.__inheritedStyle||{},o="text"===e.type;if(1===t.nodeType&&(function(t,e){var n=t.getAttribute("transform");if(n){var r=null,i=[];(n=n.replace(/,/g," ")).replace(qb,function(t,e,n){i.push(e,n)});for(var a=i.length-1;a>0;a-=2){var o=i[a],s=i[a-1];switch(r=r||pt(),s){case"translate":o=P(o).split(zb),yt(r,r,[parseFloat(o[0]),parseFloat(o[1]||0)]);break;case"scale":o=P(o).split(zb),bt(r,r,[parseFloat(o[0]),parseFloat(o[1]||o[0])]);break;case"rotate":o=P(o).split(zb),_t(r,r,parseFloat(o[0]));break;case"skew":o=P(o).split(zb),console.warn("Skew transform is not supported yet");break;case"matrix":o=P(o).split(zb),r[0]=parseFloat(o[0]),r[1]=parseFloat(o[1]),r[2]=parseFloat(o[2]),r[3]=parseFloat(o[3]),r[4]=parseFloat(o[4]),r[5]=parseFloat(o[5])}}}e.setLocalTransform(r)}(t,e),a(i,function(t){var e=t.getAttribute("style"),n={};if(!e)return n;var r,i={};for(Yb.lastIndex=0;null!=(r=Yb.exec(e));)i[r[1]]=r[2];for(var a in Gb)Gb.hasOwnProperty(a)&&null!=i[a]&&(n[Gb[a]]=i[a]);return n}(t)),!r))for(var s in Gb)if(Gb.hasOwnProperty(s)){var u=t.getAttribute(s);null!=u&&(i[Gb[s]]=u)}var l=o?"textFill":"fill",c=o?"textStroke":"stroke";e.style=e.style||new Dv;var h=e.style;null!=i.fill&&h.set(l,Na(i.fill,n)),null!=i.stroke&&h.set(c,Na(i.stroke,n)),f(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(t){null!=i[t]&&h.set("lineWidth"===t&&o?"textStrokeWidth":t,parseFloat(i[t]))}),i.textBaseline&&"auto"!==i.textBaseline||(i.textBaseline="alphabetic"),"alphabetic"===i.textBaseline&&(i.textBaseline="bottom"),"start"===i.textAlign&&(i.textAlign="left"),"end"===i.textAlign&&(i.textAlign="right"),f(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(t){null!=i[t]&&h.set(t,i[t])}),i.lineDash&&(e.style.lineDash=P(i.lineDash).split(zb)),h[c]&&"none"!==h[c]&&(e[c]=!0),e.__inheritedStyle=i}function Na(t,e){var n=e&&t&&t.match(Wb);return n?e[P(n[1])]:t}function Ba(t,e,n){var r=Math.min(e/t.width,n/t.height);return{scale:[r,r],position:[-(t.x+t.width/2)*r+e/2,-(t.y+t.height/2)*r+n/2]}}function Fa(t){return function(e,n,r){e=e&&e.toLowerCase(),qg.prototype[t].call(this,e,n,r)}}function Ua(){qg.call(this)}function za(t,e,r){function i(t,e){return t.__prio-e.__prio}r=r||{},"string"==typeof e&&(e=yx[e]),this._dom=t;var a=this._zr=nn(t,{renderer:r.renderer||"canvas",devicePixelRatio:r.devicePixelRatio,width:r.width,height:r.height});this._throttledZrFlush=ma(v(a.flush,a),17),(e=n(e))&&ab(e,!0),this._theme=e,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new ji;var o=this._api=eo(this);ue(mx,i),ue(px,i),this._scheduler=new ba(this,o,px,mx),qg.call(this,this._ecEventProcessor=new no),this._messageCenter=new Ua,this._initEvents(),this.resize=v(this.resize,this),this._pendingActions=[],a.animation.on("frame",this._onframe,this),function(t,e){t.on("rendered",function(){e.trigger("rendered"),!t.animation.isFinished()||e[sx]||e._scheduler.unfinished||e._pendingActions.length||e.trigger("finished")})}(a,this),L(this)}function Va(t,e,n){var r,i=this._model,a=this._coordSysMgr.getCoordinateSystems();e=pn(i,e);for(var o=0;o<a.length;o++){var s=a[o];if(s[t]&&null!=(r=s[t](i,e,n)))return r}}function Ha(t){var e=t._model,n=t._scheduler;n.restorePipelines(e),n.prepareStageTasks(),$a(t,"component",e,n),$a(t,"chart",e,n),n.plan()}function Ga(t,e,n,r,i){function a(r){r&&r.__alive&&r[e]&&r[e](r.__model,o,t._api,n)}var o=t._model;if(r){var s={};s[r+"Id"]=n[r+"Id"],s[r+"Index"]=n[r+"Index"],s[r+"Name"]=n[r+"Name"];var u={mainType:r,query:s};i&&(u.subType=i);var l=n.excludeSeriesId;null!=l&&(l=R(an(l))),o&&o.eachComponent(u,function(e){l&&null!=l.get(e.id)||a(t["series"===r?"_chartsMap":"_componentsMap"][e.__viewId])},t)}else Kb(t._componentsViews.concat(t._chartsViews),a)}function Wa(t,e){var n=t._chartsMap,r=t._scheduler;e.eachSeries(function(t){r.updateStreamModes(t,n[t.__viewId])})}function qa(t,e){var n=t.type,r=t.escapeConnect,i=fx[n],s=i.actionInfo,u=(s.update||"update").split(":"),l=u.pop();u=null!=u[0]&&ex(u[0]),this[ox]=!0;var c=[t],h=!1;t.batch&&(h=!0,c=d(t.batch,function(e){return(e=o(a({},e),t)).batch=null,e}));var f,p=[],g="highlight"===n||"downplay"===n;Kb(c,function(t){(f=(f=i.action(t,this._model,this._api))||a({},t)).type=s.event||f.type,p.push(f),g?Ga(this,l,t,"series"):u&&Ga(this,l,t,u.main,u.sub)},this),"none"===l||g||u||(this[sx]?(Ha(this),cx.update.call(this,t),this[sx]=!1):cx[l].call(this,t)),f=h?{type:s.event||n,escapeConnect:r,batch:p}:p[0],this[ox]=!1,!e&&this._messageCenter.trigger(f.type,f)}function Ya(t){for(var e=this._pendingActions;e.length;){var n=e.shift();qa.call(this,n,t)}}function Xa(t){!t&&this.trigger("updated")}function $a(t,e,n,r){function i(t){var e="_ec_"+t.id+"_"+t.type,i=s[e];if(!i){var c=ex(t.type);(i=new(a?vb.getClass(c.main,c.sub):fa.getClass(c.sub))).init(n,l),s[e]=i,o.push(i),u.add(i.group)}t.__viewId=i.__id=e,i.__alive=!0,i.__model=t,i.group.__ecComponentInfo={mainType:t.mainType,index:t.componentIndex},!a&&r.prepareView(i,t,n,l)}for(var a="component"===e,o=a?t._componentsViews:t._chartsViews,s=a?t._componentsMap:t._chartsMap,u=t._zr,l=t._api,c=0;c<o.length;c++)o[c].__alive=!1;for(a?n.eachComponent(function(t,e){"series"!==t&&i(e)}):n.eachSeries(i),c=0;c<o.length;){var h=o[c];h.__alive?c++:(!a&&h.renderTask.dispose(),u.remove(h.group),h.dispose(n,l),o.splice(c,1),delete s[h.__id],h.__id=h.group.__ecComponentInfo=null)}}function Za(t){t.clearColorPalette(),t.eachSeries(function(t){t.clearColorPalette()})}function Qa(t,e,n,r){(function(t,e,n,r,i){Kb(t._componentsViews,function(t){var i=t.__model;t.render(i,e,n,r),to(i,t)})})(t,e,n,r),Kb(t._chartsViews,function(t){t.__alive=!1}),Ka(t,e,0,r),Kb(t._chartsViews,function(t){t.__alive||t.remove(e,n)})}function Ka(t,e,n,r,i){var a,o=t._scheduler;e.eachSeries(function(e){var n=t._chartsMap[e.__viewId];n.__alive=!0;var s=n.renderTask;o.updatePayload(s,r),i&&i.get(e.uid)&&s.dirty(),a|=s.perform(o.getPerformArgs(s)),n.group.silent=!!e.get("silent"),to(e,n),function(t,e){var n=t.get("blendMode")||null;e.group.traverse(function(t){t.isGroup||t.style.blend!==n&&t.setStyle("blend",n),t.eachPendingDisplayable&&t.eachPendingDisplayable(function(t){t.setStyle("blend",n)})})}(e,n)}),o.unfinished|=a,function(t,e){var n=t.storage,r=0;n.traverse(function(t){t.isGroup||r++}),r>e.get("hoverLayerThreshold")&&!Mg.node&&n.traverse(function(t){t.isGroup||(t.useHoverLayer=!0)})}(t._zr,e),Cb(t._zr.dom,e)}function Ja(t,e){Kb(vx,function(n){n(t,e)})}function to(t,e){var n=t.get("z"),r=t.get("zlevel");e.group.traverse(function(t){"group"!==t.type&&(null!=n&&(t.z=n),null!=r&&(t.zlevel=r))})}function eo(t){var e=t._coordSysMgr;return a(new Di(t),{getCoordinateSystems:v(e.getCoordinateSystems,e),getComponentByElement:function(e){for(;e;){var n=e.__ecComponentInfo;if(null!=n)return t._model.getComponent(n.mainType,n.index);e=e.parent}}})}function no(){}function ro(t){xx[t]=!1}function io(t){return bx[function(t,e){return t.getAttribute?t.getAttribute(e):t[e]}(t,Ox)]}function ao(t,e){yx[t]=e}function oo(t){gx.push(t)}function so(t,e){fo(px,t,e,nx)}function uo(t,e,n){"function"==typeof e&&(n=e,e="");var r=tx(t)?t.type:[t,t={event:e}][0];t.event=(t.event||r).toLowerCase(),e=t.event,Qb(ux.test(r)&&ux.test(e)),fx[r]||(fx[r]={action:n,actionInfo:t}),dx[e]=r}function lo(t,e){ji.register(t,e)}function co(t,e){fo(mx,t,e,rx,"layout")}function ho(t,e){fo(mx,t,e,ix,"visual")}function fo(t,e,n,r,i){(Jb(e)||tx(e))&&(n=e,e=r);var a=ba.wrapStageHandler(n,i);return a.__prio=e,a.__raw=n,t.push(a),a}function po(t,e){_x[t]=e}function go(t){return A_.extend(t)}function vo(t){return vb.extend(t)}function mo(t){return gb.extend(t)}function yo(t){return fa.extend(t)}function _o(t){return t}function bo(t,e,n,r,i){this._old=t,this._new=e,this._oldKeyGetter=n||_o,this._newKeyGetter=r||_o,this.context=i}function xo(t,e,n,r,i){for(var a=0;a<t.length;a++){var o="_ec_"+i[r](t[a],a),s=e[o];null==s?(n.push(o),e[o]=a):(s.length||(e[o]=s=[s]),s.push(a))}}function wo(t){return"category"===t?"ordinal":"time"===t?"time":"float"}function So(t){return t._rawCount>65535?Ix:Px}function To(t){var e=t.constructor;return e===Array?t.slice():new e(t)}function Oo(t,e){f(Lx.concat(e.__wrappedMethods||[]),function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t.__wrappedMethods=e.__wrappedMethods,f(Dx,function(r){t[r]=n(e[r])}),t._calculationInfo=a(e._calculationInfo)}function Mo(t){var e=t._invertedIndicesMap;f(e,function(n,r){var i=t._dimensionInfos[r].ordinalMeta;if(i){for(n=e[r]=new Ix(i.categories.length),a=0;a<n.length;a++)n[a]=NaN;for(var a=0;a<t._count;a++)n[t.get(r,a)]=a}})}function ko(t,e,n){var r;if(null!=e){var i=t._chunkSize,a=Math.floor(n/i),o=t.dimensions[e],s=t._storage[o][a];if(s){r=s[n%i];var u=t._dimensionInfos[o].ordinalMeta;u&&u.categories.length&&(r=u.categories[r])}}return r}function Co(t){return t}function Eo(t){return t<this._count&&t>=0?this._indices[t]:-1}function Ao(t,e){var n=t._idList[e];return null==n&&(n=ko(t,t._idDimIdx,e)),null==n&&(n=Ex+e),n}function Io(t){return y(t)||(t=[t]),t}function Po(t,e){var n=t.dimensions,r=new jx(d(n,t.getDimensionInfo,t),t.hostModel);Oo(r,t);for(var i=r._storage={},a=t._storage,o=0;o<n.length;o++){var s=n[o];a[s]&&(u(e,s)>=0?(i[s]=Lo(a[s]),r._rawExtent[s]=[1/0,-1/0],r._extent[s]=null):i[s]=a[s])}return r}function Lo(t){for(var e=new Array(t.length),n=0;n<t.length;n++)e[n]=To(t[n]);return e}function Do(t,e,r){function i(t,e,n){null!=kx.get(e)?t.otherDims[e]=n:(t.coordDim=e,t.coordDimIndex=n,c.set(e,!0))}Oi.isInstance(e)||(e=Oi.seriesDataToSource(e)),r=r||{},t=(t||[]).slice();for(var s=(r.dimsDef||[]).slice(),u=R(r.encodeDef),l=R(),c=R(),h=[],d=function(t,e,n,r){var i=Math.max(t.dimensionsDetectCount||1,e.length,s.length,r||0);return f(e,function(t){var e=t.dimsDef;e&&(i=Math.max(i,e.length))}),i}(e,t,0,r.dimCount),p=0;p<d;p++){var g=s[p]=a({},x(s[p])?s[p]:{name:s[p]}),v=g.name,m=h[p]={otherDims:{}};null!=v&&null==l.get(v)&&(m.name=m.displayName=v,l.set(v,p)),null!=g.type&&(m.type=g.type),null!=g.displayName&&(m.displayName=g.displayName)}u.each(function(t,e){if(1===(t=an(t).slice()).length&&t[0]<0)u.set(e,!1);else{var n=u.set(e,[]);f(t,function(t,r){b(t)&&(t=l.get(t)),null!=t&&t<d&&(n[r]=t,i(h[t],e,r))})}});var y=0;f(t,function(t,e){var r,a,s;if(b(t))r=t,t={};else{r=t.name;var l=t.ordinalMeta;t.ordinalMeta=null,(t=n(t)).ordinalMeta=l,a=t.dimsDef,s=t.otherDims,t.name=t.coordDim=t.coordDimIndex=t.dimsDef=t.otherDims=null}var c=u.get(r);if(!1!==c){if(!(c=an(c)).length)for(var d=0;d<(a&&a.length||1);d++){for(;y<h.length&&null!=h[y].coordDim;)y++;y<h.length&&c.push(y++)}f(c,function(e,n){var u=h[e];if(i(o(u,t),r,n),null==u.name&&a){var l=a[n];!x(l)&&(l={name:l}),u.name=u.displayName=l.name,u.defaultTooltip=l.defaultTooltip}s&&o(u.otherDims,s)})}});var _=r.generateCoord,w=r.generateCoordCount,S=null!=w;w=_?w||1:0;for(var T=_||"value",O=0;O<d;O++)null==(m=h[O]=h[O]||{}).coordDim&&(m.coordDim=jo(T,c,S),m.coordDimIndex=0,(!_||w<=0)&&(m.isExtraCoord=!0),w--),null==m.name&&(m.name=jo(m.coordDim,l)),null==m.type&&Ei(e,O)&&(m.type="ordinal");return h}function jo(t,e,n){if(n||null!=e.get(t)){for(var r=0;null!=e.get(t+r);)r++;t+=r}return e.set(t,!0),t}function Ro(t,e,n){var r,i,a,o,s=(n=n||{}).byIndex,u=n.stackedCoordDimension,l=!(!t||!t.get("stack"));if(f(e,function(t,n){b(t)&&(e[n]=t={name:t}),l&&!t.isExtraCoord&&(s||r||!t.ordinalMeta||(r=t),i||"ordinal"===t.type||"time"===t.type||u&&u!==t.coordDim||(i=t))}),!i||s||r||(s=!0),i){a="__\0ecstackresult",o="__\0ecstackedover",r&&(r.createInvertedIndices=!0);var c=i.coordDim,h=i.type,d=0;f(e,function(t){t.coordDim===c&&d++}),e.push({name:a,coordDim:c,coordDimIndex:d,type:h,isExtraCoord:!0,isCalculationCoord:!0}),e.push({name:o,coordDim:o,coordDimIndex:++d,type:h,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:i&&i.name,stackedByDimension:r&&r.name,isStackedByIndex:s,stackedOverDimension:o,stackResultDimension:a}}function No(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function Bo(t,e){return No(t,e)?t.getCalculationInfo("stackResultDimension"):e}function Fo(t,e,n){n=n||{},Oi.isInstance(t)||(t=Oi.seriesDataToSource(t));var r,i=e.get("coordinateSystem"),a=ji.get(i),o=Si(e);o&&(r=d(o.coordSysDims,function(t){var e={name:t},n=o.axisMap.get(t);if(n){var r=n.get("type");e.type=wo(r)}return e})),r||(r=a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]);var s,u,l=Bx(t,{coordDimensions:r,generateCoord:n.generateCoord});o&&f(l,function(t,e){var n=o.categoryAxisMap.get(t.coordDim);n&&(null==s&&(s=e),t.ordinalMeta=n.getOrdinalMeta()),null!=t.otherDims.itemName&&(u=!0)}),u||null==s||(l[s].otherDims.itemName=0);var c=Ro(e,l),h=new jx(l,e);h.setCalculationInfo(c);var p=null!=s&&function(t){if(t.sourceFormat===R_){var e=function(t){for(var e=0;e<t.length&&null==t[e];)e++;return t[e]}(t.data||[]);return null!=e&&!y(sn(e))}}(t)?function(t,e,n,r){return r===s?n:this.defaultDimValueGetter(t,e,n,r)}:null;return h.hasItemOption=!1,h.initData(t,null,p),h}function Uo(t){this._setting=t||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}function zo(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication}function Vo(t){return t._map||(t._map=R(t.categories))}function Ho(t){return x(t)&&null!=t.value?t.value:t+""}function Go(t){return Qr(t)+2}function Wo(t,e,n){t[e]=Math.max(Math.min(t[e],n[1]),n[0])}function qo(t,e){!isFinite(t[0])&&(t[0]=e[0]),!isFinite(t[1])&&(t[1]=e[1]),Wo(t,0,e),Wo(t,1,e),t[0]>t[1]&&(t[0]=t[1])}function Yo(t){return t.get("stack")||Wx+t.seriesIndex}function Xo(t){return t.dim+t.index}function $o(t,e){var n=[];return e.eachSeriesByType(t,function(t){ts(t)&&!es(t)&&n.push(t)}),n}function Zo(t){var e=[];return f(t,function(t){var n=t.getData(),r=t.coordinateSystem.getBaseAxis(),i=r.getExtent(),a="category"===r.type?r.getBandWidth():Math.abs(i[1]-i[0])/n.count(),o=Yr(t.get("barWidth"),a),s=Yr(t.get("barMaxWidth"),a),u=t.get("barGap"),l=t.get("barCategoryGap");e.push({bandWidth:a,barWidth:o,barMaxWidth:s,barGap:u,barCategoryGap:l,axisKey:Xo(r),stackId:Yo(t)})}),Qo(e)}function Qo(t){var e={};f(t,function(t,n){var r=t.axisKey,i=t.bandWidth,a=e[r]||{bandWidth:i,remainedWidth:i,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},o=a.stacks;e[r]=a;var s=t.stackId;o[s]||a.autoWidthCount++,o[s]=o[s]||{width:0,maxWidth:0};var u=t.barWidth;u&&!o[s].width&&(o[s].width=u,u=Math.min(a.remainedWidth,u),a.remainedWidth-=u);var l=t.barMaxWidth;l&&(o[s].maxWidth=l);var c=t.barGap;null!=c&&(a.gap=c);var h=t.barCategoryGap;null!=h&&(a.categoryGap=h)});var n={};return f(e,function(t,e){n[e]={};var r=t.stacks,i=Yr(t.categoryGap,t.bandWidth),a=Yr(t.gap,1),o=t.remainedWidth,s=t.autoWidthCount,u=(o-i)/(s+(s-1)*a);u=Math.max(u,0),f(r,function(t,e){var n=t.maxWidth;n&&n<u&&(n=Math.min(n,o),t.width&&(n=Math.min(n,t.width)),o-=n,t.width=n,s--)}),u=(o-i)/(s+(s-1)*a),u=Math.max(u,0);var l,c=0;f(r,function(t,e){t.width||(t.width=u),l=t,c+=t.width*(1+a)}),l&&(c-=l.width*a);var h=-c/2;f(r,function(t,r){n[e][r]=n[e][r]||{offset:h,width:t.width},h+=t.width*(1+a)})}),n}function Ko(t,e,n){if(t&&e){var r=t[Xo(e)];return null!=r&&null!=n&&(r=r[Yo(n)]),r}}function Jo(t,e){var n=$o(t,e),r=Zo(n),i={};f(n,function(t){var e=t.getData(),n=t.coordinateSystem,a=n.getBaseAxis(),o=Yo(t),s=r[Xo(a)][o],u=s.offset,l=s.width,c=n.getOtherAxis(a),h=t.get("barMinHeight")||0;i[o]=i[o]||[],e.setLayout({offset:u,size:l});for(var f=e.mapDimension(c.dim),d=e.mapDimension(a.dim),p=No(e,f),g=c.isHorizontal(),v=ns(0,c),m=0,y=e.count();m<y;m++){var _=e.get(f,m),b=e.get(d,m);if(!isNaN(_)){var x,w,S,T,O=_>=0?"p":"n",M=v;if(p&&(i[o][b]||(i[o][b]={p:v,n:v}),M=i[o][b][O]),g)x=M,w=(k=n.dataToPoint([_,b]))[1]+u,S=k[0]-v,T=l,Math.abs(S)<h&&(S=(S<0?-1:1)*h),p&&(i[o][b][O]+=S);else{var k=n.dataToPoint([b,_]);x=k[0]+u,w=M,S=l,T=k[1]-v,Math.abs(T)<h&&(T=(T<=0?-1:1)*h),p&&(i[o][b][O]+=T)}e.setItemLayout(m,{x:x,y:w,width:S,height:T})}}},this)}function ts(t){return t.coordinateSystem&&"cartesian2d"===t.coordinateSystem.type}function es(t){return t.pipelineContext&&t.pipelineContext.large}function ns(t,e,n){var r,i,a=e.getGlobalExtent();a[0]>a[1]?(r=a[1],i=a[0]):(r=a[0],i=a[1]);var o=e.toGlobalCoord(e.dataToCoord(0));return o<r&&(o=r),o>i&&(o=i),o}function rs(t,e){return nw(t,ew(e))}function is(t,e){var n,r,i,a=t.type,o=e.getMin(),s=e.getMax(),u=null!=o,l=null!=s,c=t.getExtent();"ordinal"===a?n=e.getCategories().length:(y(r=e.get("boundaryGap"))||(r=[r||0,r||0]),"boolean"==typeof r[0]&&(r=[0,0]),r[0]=Yr(r[0],1),r[1]=Yr(r[1],1),i=c[1]-c[0]||Math.abs(c[0])),null==o&&(o="ordinal"===a?n?0:NaN:c[0]-r[0]*i),null==s&&(s="ordinal"===a?n?n-1:NaN:c[1]+r[1]*i),"dataMin"===o?o=c[0]:"function"==typeof o&&(o=o({min:c[0],max:c[1]})),"dataMax"===s?s=c[1]:"function"==typeof s&&(s=s({min:c[0],max:c[1]})),(null==o||!isFinite(o))&&(o=NaN),(null==s||!isFinite(s))&&(s=NaN),t.setBlank(O(o)||O(s)||"ordinal"===a&&!t.getOrdinalMeta().categories.length),e.getNeedCrossZero()&&(o>0&&s>0&&!u&&(o=0),o<0&&s<0&&!l&&(s=0));var h=e.ecModel;if(h&&"time"===a){var d,p=$o("bar",h);if(f(p,function(t){d|=t.getBaseAxis()===e.axis}),d){var g=Zo(p),v=function(t,e,n,r){var i=n.axis.getExtent(),a=i[1]-i[0],o=Ko(r,n.axis);if(void 0===o)return{min:t,max:e};var s=1/0;f(o,function(t){s=Math.min(t.offset,s)});var u=-1/0;f(o,function(t){u=Math.max(t.offset+t.width,u)}),s=Math.abs(s),u=Math.abs(u);var l=s+u,c=e-t,h=c/(1-(s+u)/a)-c;return{min:t-=h*(s/l),max:e+=h*(u/l)}}(o,s,e,g);o=v.min,s=v.max}}return[o,s]}function as(t,e){var n=is(t,e),r=null!=e.getMin(),i=null!=e.getMax(),a=e.get("splitNumber");"log"===t.type&&(t.base=e.get("logBase"));var o=t.type;t.setExtent(n[0],n[1]),t.niceExtent({splitNumber:a,fixMin:r,fixMax:i,minInterval:"interval"===o||"time"===o?e.get("minInterval"):null,maxInterval:"interval"===o||"time"===o?e.get("maxInterval"):null});var s=e.get("interval");null!=s&&t.setInterval&&t.setInterval(s)}function os(t,e){if(e=e||t.get("type"))switch(e){case"category":return new zx(t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),[1/0,-1/0]);case"value":return new Gx;default:return(Uo.getClass(e)||Gx).create(t)}}function ss(t){var e=t.getLabelModel().get("formatter"),n="category"===t.type?t.scale.getExtent()[0]:null;return"string"==typeof e?e=function(e){return function(n){return n=t.scale.getLabel(n),e.replace("{value}",null!=n?n:"")}}(e):"function"==typeof e?function(r,i){return null!=n&&(i=r-n),e(us(t,r),i)}:function(e){return t.scale.getLabel(e)}}function us(t,e){return"category"===t.type?t.scale.getLabel(e):e}function ls(t,e){var n=e*Math.PI/180,r=t.plain(),i=r.width,a=r.height,o=i*Math.cos(n)+a*Math.sin(n),s=i*Math.sin(n)+a*Math.cos(n);return new re(r.x,r.y,o,s)}function cs(t,e){if("image"!==this.type){var n=this.style,r=this.shape;r&&"line"===r.symbolType?n.stroke=t:this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff"):(n.fill&&(n.fill=t),n.stroke&&(n.stroke=t)),this.dirty(!1)}}function hs(t,e,n,r,i,a,o){var s,u=0===t.indexOf("empty");return u&&(t=t.substr(5,1).toLowerCase()+t.substr(6)),(s=0===t.indexOf("image://")?or(t.slice(8),new re(e,n,r,i),o?"center":"cover"):0===t.indexOf("path://")?ar(t.slice(7),{},new re(e,n,r,i),o?"center":"cover"):new gw({shape:{symbolType:t,x:e,y:n,width:r,height:i}})).__isEmptyBrush=u,s.setColor=cs,s.setColor(a),s}function fs(t,e){return Math.abs(t-e)<mw}function ds(t,e,n){var r=0,i=t[0];if(!i)return!1;for(var a=1;a<t.length;a++){var o=t[a];r+=Gn(i[0],i[1],o[0],o[1],e,n),i=o}var s=t[0];return fs(i[0],s[0])&&fs(i[1],s[1])||(r+=Gn(i[0],i[1],s[0],s[1],e,n)),0!==r}function ps(t,e,n){if(this.name=t,this.geometries=e,n)n=[n[0],n[1]];else{var r=this.getBoundingRect();n=[r.x+r.width/2,r.y+r.height/2]}this.center=n}function gs(t,e,n){for(var r=[],i=e[0],a=e[1],o=0;o<t.length;o+=2){var s=t.charCodeAt(o)-64,u=t.charCodeAt(o+1)-64;s=s>>1^-(1&s),u=u>>1^-(1&u),i=s+=i,a=u+=a,r.push([s/n,u/n])}return r}function vs(t,e){var n,r=ms(t,"labels"),i=ws(e);return ys(r,i)||_s(r,i,{labels:_(i)?xs(t,i):bs(t,n="auto"===i?function(t){var e=_w(t).autoInterval;return null!=e?e:_w(t).autoInterval=t.calculateCategoryInterval()}(t):i),labelCategoryInterval:n})}function ms(t,e){return _w(t)[e]||(_w(t)[e]=[])}function ys(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n].value}function _s(t,e,n){return t.push({key:e,value:n}),n}function bs(t,e,n){function r(t){u.push(n?t:{formattedLabel:i(t),rawLabel:a.getLabel(t),tickValue:t})}var i=ss(t),a=t.scale,o=a.getExtent(),s=t.getLabelModel(),u=[],l=Math.max((e||0)+1,1),c=o[0],h=a.count();0!==c&&l>1&&h/l>2&&(c=Math.round(Math.ceil(c/l)*l));var f=s.get("showMinLabel"),d=s.get("showMaxLabel");f&&c!==o[0]&&r(o[0]);for(var p=c;p<=o[1];p+=l)r(p);return d&&p!==o[1]&&r(o[1]),u}function xs(t,e,n){var r=t.scale,i=ss(t),a=[];return f(r.getTicks(),function(t){var o=r.getLabel(t);e(t,o)&&a.push(n?t:{formattedLabel:i(t),rawLabel:o,tickValue:t})}),a}function ws(t){var e=t.get("interval");return null==e?"auto":e}function Ss(t,e){var n=(t[1]-t[0])/e/2;t[0]+=n,t[1]-=n}function Ts(t,e){var n=t.mapDimension("defaultedLabel",!0),r=n.length;if(1===r)return ta(t,e,n[0]);if(r){for(var i=[],a=0;a<n.length;a++){var o=ta(t,e,n[a]);i.push(o)}return i.join(" ")}}function Os(t,e,n){kv.call(this),this.updateData(t,e,n)}function Ms(t){return[t[0]/2,t[1]/2]}function ks(t,e){this.parent.drift(t,e)}function Cs(){!yr(this)&&As.call(this)}function Es(){!yr(this)&&Is.call(this)}function As(){if(!this.incremental&&!this.useHoverLayer){var t=this.__symbolOriginalScale,e=t[1]/t[0];this.animateTo({scale:[Math.max(1.1*t[0],t[0]+3),Math.max(1.1*t[1],t[1]+3*e)]},400,"elasticOut")}}function Is(){this.incremental||this.useHoverLayer||this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}function Ps(t){this.group=new kv,this._symbolCtor=t||Os}function Ls(t,e,n,r){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(r.isIgnore&&r.isIgnore(n))&&!(r.clipShape&&!r.clipShape.contain(e[0],e[1]))&&"none"!==t.getItemVisual(n,"symbol")}function Ds(t){return null==t||x(t)||(t={isIgnore:t}),t||{}}function js(t){var e=t.hostModel;return{itemStyle:e.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:e.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),labelModel:e.getModel("label"),hoverLabelModel:e.getModel("emphasis.label"),cursorStyle:e.get("cursor")}}function Rs(t,e,n){var r,i=t.getBaseAxis(),a=t.getOtherAxis(i),o=function(t,e){var n=0,r=a.scale.getExtent();return"start"===e?n=r[0]:"end"===e?n=r[1]:r[0]>0?n=r[0]:r[1]<0&&(n=r[1]),n}(0,n),s=i.dim,u=a.dim,l=e.mapDimension(u),c=e.mapDimension(s),h="x"===u||"radius"===u?1:0,f=d(t.dimensions,function(t){return e.mapDimension(t)}),p=e.getCalculationInfo("stackResultDimension");return(r|=No(e,f[0]))&&(f[0]=p),(r|=No(e,f[1]))&&(f[1]=p),{dataDimsForPoint:f,valueStart:o,valueAxisDim:u,baseAxisDim:s,stacked:!!r,valueDim:l,baseDim:c,baseDataOffset:h,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function Ns(t,e,n,r){var i=NaN;t.stacked&&(i=n.get(n.getCalculationInfo("stackedOverDimension"),r)),isNaN(i)&&(i=t.valueStart);var a=t.baseDataOffset,o=[];return o[a]=n.get(t.baseDim,r),o[1-a]=i,e.dataToPoint(o)}function Bs(t){return isNaN(t[0])||isNaN(t[1])}function Fs(t,e,n,r,i,a,o,s,u,l,c){return"none"!==l&&l?(function(t,e,n,r,i,a,o,s,u,l,c){for(var h=0,f=n,d=0;d<r;d++){var p=e[f];if(f>=i||f<0)break;if(Bs(p)){if(c){f+=a;continue}break}if(f===n)t[a>0?"moveTo":"lineTo"](p[0],p[1]);else if(u>0){var g=e[h],v="y"===l?1:0,m=(p[v]-g[v])*u;jw(Nw,g),Nw[v]=g[v]+m,jw(Bw,p),Bw[v]=p[v]-m,t.bezierCurveTo(Nw[0],Nw[1],Bw[0],Bw[1],p[0],p[1])}else t.lineTo(p[0],p[1]);h=f,f+=a}return d}).apply(this,arguments):(function(t,e,n,r,i,a,o,s,u,l,c){for(var h=0,f=n,d=0;d<r;d++){var p=e[f];if(f>=i||f<0)break;if(Bs(p)){if(c){f+=a;continue}break}if(f===n)t[a>0?"moveTo":"lineTo"](p[0],p[1]),jw(Nw,p);else if(u>0){var g=f+a,v=e[g];if(c)for(;v&&Bs(e[g]);)v=e[g+=a];var m=.5,y=e[h];if(!(v=e[g])||Bs(v))jw(Bw,p);else{var _,b;if(Bs(v)&&!c&&(v=p),W(Rw,v,y),"x"===l||"y"===l){var x="x"===l?0:1;_=Math.abs(p[x]-y[x]),b=Math.abs(p[x]-v[x])}else _=Vg(p,y),b=Vg(p,v);Dw(Bw,p,Rw,-u*(1-(m=b/(b+_))))}Pw(Nw,Nw,s),Lw(Nw,Nw,o),Pw(Bw,Bw,s),Lw(Bw,Bw,o),t.bezierCurveTo(Nw[0],Nw[1],Bw[0],Bw[1],p[0],p[1]),Dw(Nw,p,Rw,u*m)}else t.lineTo(p[0],p[1]);h=f,f+=a}return d}).apply(this,arguments)}function Us(t,e){var n=[1/0,1/0],r=[-1/0,-1/0];if(e)for(var i=0;i<t.length;i++){var a=t[i];a[0]<n[0]&&(n[0]=a[0]),a[1]<n[1]&&(n[1]=a[1]),a[0]>r[0]&&(r[0]=a[0]),a[1]>r[1]&&(r[1]=a[1])}return{min:e?n:r,max:e?r:n}}function zs(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++){var r=t[n],i=e[n];if(r[0]!==i[0]||r[1]!==i[1])return}return!0}}function Vs(t){return"number"==typeof t?t:t?.5:0}function Hs(t){var e=t.getGlobalExtent();if(t.onBand){var n=t.getBandWidth()/2-1,r=e[1]>e[0]?1:-1;e[0]+=r*n,e[1]-=r*n}return e}function Gs(t,e,n,r){return"polar"===t.type?function(t,e,n,r){var i=t.getAngleAxis(),a=t.getRadiusAxis().getExtent().slice();a[0]>a[1]&&a.reverse();var o=i.getExtent(),s=Math.PI/180;n&&(a[0]-=.5,a[1]+=.5);var u=new Ry({shape:{cx:Xr(t.cx,1),cy:Xr(t.cy,1),r0:Xr(a[0],1),r:Xr(a[1],1),startAngle:-o[0]*s,endAngle:-o[1]*s,clockwise:i.inverse}});return e&&(u.shape.endAngle=-o[0]*s,jr(u,{shape:{endAngle:-o[1]*s}},r)),u}(t,e,n,r):function(t,e,n,r){var i=Hs(t.getAxis("x")),a=Hs(t.getAxis("y")),o=t.getBaseAxis().isHorizontal(),s=Math.min(i[0],i[1]),u=Math.min(a[0],a[1]),l=Math.max(i[0],i[1])-s,c=Math.max(a[0],a[1])-u;if(n)s-=.5,l+=.5,u-=.5,c+=.5;else{var h=r.get("lineStyle.width")||2,f=r.get("clipOverflow")?h/2:Math.max(l,c);o?(u-=f,c+=2*f):(s-=f,l+=2*f)}var d=new Vy({shape:{x:s,y:u,width:l,height:c}});return e&&(d.shape[o?"width":"height"]=0,jr(d,{shape:{width:l,height:c}},r)),d}(t,e,n,r)}function Ws(t,e,n){for(var r=e.getBaseAxis(),i="x"===r.dim||"radius"===r.dim?0:1,a=[],o=0;o<t.length-1;o++){var s=t[o+1],u=t[o];a.push(u);var l=[];switch(n){case"end":l[i]=s[i],l[1-i]=u[1-i],a.push(l);break;case"middle":var c=[];l[i]=c[i]=(u[i]+s[i])/2,l[1-i]=u[1-i],c[1-i]=s[1-i],a.push(l),a.push(c);break;default:l[i]=u[i],l[1-i]=s[1-i],a.push(l)}}return t[o]&&a.push(t[o]),a}function qs(t,e){var n=t.getVisual("visualMeta");if(n&&n.length&&t.count()&&"cartesian2d"===e.type){for(var r,i,a=n.length-1;a>=0;a--){var o=t.getDimensionInfo(t.dimensions[n[a].dimension]);if("x"===(r=o&&o.coordDim)||"y"===r){i=n[a];break}}if(i){var s=e.getAxis(r),u=d(i.stops,function(t){return{coord:s.toGlobalCoord(s.dataToCoord(t.value)),color:t.color}}),l=u.length,c=i.outerColors.slice();l&&u[0].coord>u[l-1].coord&&(u.reverse(),c.reverse());var h=u[0].coord-10,p=u[l-1].coord+10,g=p-h;if(g<.001)return"transparent";f(u,function(t){t.offset=(t.coord-h)/g}),u.push({offset:l?u[l-1].offset:.5,color:c[1]||"transparent"}),u.unshift({offset:l?u[0].offset:.5,color:c[0]||"transparent"});var v=new $y(0,0,0,0,u,!0);return v[r]=h,v[r+"2"]=p,v}}}function Ys(t,e,n){var r=t.get("showAllSymbol"),i="auto"===r;if(!r||i){var a=n.getAxesByScale("ordinal")[0];if(a&&(!i||!function(t,e){var n=t.getExtent(),r=Math.abs(n[1]-n[0])/t.scale.count();isNaN(r)&&(r=0);for(var i=e.count(),a=Math.max(1,Math.round(i/5)),o=0;o<i;o+=a)if(1.5*Os.getSymbolSize(e,o)[t.isHorizontal()?1:0]>r)return!1;return!0}(a,e))){var o=e.mapDimension(a.dim),s={};return f(a.getViewLabels(),function(t){s[t.tickValue]=1}),function(t){return!s.hasOwnProperty(e.get(o,t))}}}}function Xs(t){return this._axes[t]}function $s(t){Ww.call(this,t)}function Zs(t,e){return e.type||(e.data?"category":"value")}function Qs(t,e,n){return t.getCoordSysModel()===e}function Ks(t,e,n){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(t,e,n),this.model=t}function Js(t,e,n,r){function i(t){return t.dim+"_"+t.index}n.getAxesOnZeroOf=function(){return a?[a]:[]};var a,o=t[e],s=n.model,u=s.get("axisLine.onZero"),l=s.get("axisLine.onZeroAxisIndex");if(u){if(null!=l)tu(o[l])&&(a=o[l]);else for(var c in o)if(o.hasOwnProperty(c)&&tu(o[c])&&!r[i(o[c])]){a=o[c];break}a&&(r[i(a)]=!0)}}function tu(t){return t&&"category"!==t.type&&"time"!==t.type&&function(t){var e=t.scale.getExtent(),n=e[0],r=e[1];return!(n>0&&r>0||n<0&&r<0)}(t)}function eu(t,e){return d(tS,function(e){return t.getReferringComponents(e)[0]})}function nu(t){return"cartesian2d"===t.get("coordinateSystem")}function ru(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e}function iu(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)}function au(t){t&&(t.ignore=!0)}function ou(t,e,n){var r=t&&t.getBoundingRect().clone(),i=e&&e.getBoundingRect().clone();if(r&&i){var a=gt([]);return _t(a,a,-t.rotation),r.applyTransform(mt([],a,t.getLocalTransform())),i.applyTransform(mt([],a,e.getLocalTransform())),r.intersect(i)}}function su(t){return"middle"===t||"center"===t}function uu(t,e,r,i,a,s){var u=e.getModel("axisPointer"),l={};aS(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(t){l[t]=n(u.get(t))}),l.snap="category"!==t.type&&!!s,"cross"===u.get("type")&&(l.type="line");var c=l.label||(l.label={});if(null==c.show&&(c.show=!1),"cross"===a){var h=u.get("label.show");if(c.show=null==h||h,!s){var f=l.lineStyle=u.get("crossStyle");f&&o(c,f.textStyle)}}return t.model.getModel("axisPointer",new Vr(l,r,i))}function lu(t,e){return"all"===t||y(t)&&u(t,e)>=0||t===e}function cu(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[fu(t)]}function hu(t){return!!t.get("handle.show")}function fu(t){return t.type+"||"+t.id}function du(t,e,n,r,i,a){var o=sS.getAxisPointerClass(t.axisPointerClass);if(o){var s=function(t){var e=cu(t);return e&&e.axisPointerModel}(e);s?(t._axisPointer||(t._axisPointer=new o)).render(e,s,r,a):pu(t,r)}}function pu(t,e,n){var r=t._axisPointer;r&&r.dispose(e,n),t._axisPointer=null}function gu(t,e,n){n=n||{};var r=t.coordinateSystem,i=e.axis,a={},o=i.getAxesOnZeroOf()[0],s=i.position,u=o?"onZero":s,l=i.dim,c=r.getRect(),h=[c.x,c.x+c.width,c.y,c.y+c.height],f={left:0,right:1,top:0,bottom:1,onZero:2},d=e.get("offset")||0,p="x"===l?[h[2]-d,h[3]+d]:[h[0]-d,h[1]+d];if(o){var g=o.toGlobalCoord(o.dataToCoord(0));p[f.onZero]=Math.max(Math.min(g,p[1]),p[0])}a.position=["y"===l?p[f[u]]:h[0],"x"===l?p[f[u]]:h[3]],a.rotation=Math.PI/2*("x"===l?0:1),a.labelDirection=a.tickDirection=a.nameDirection={top:-1,bottom:1,left:-1,right:1}[s],a.labelOffset=o?p[f[s]]-p[f.onZero]:0,e.get("axisTick.inside")&&(a.tickDirection=-a.tickDirection),M(n.labelInside,e.get("axisLabel.inside"))&&(a.labelDirection=-a.labelDirection);var v=e.get("axisLabel.rotate");return a.labelRotate="top"===u?-v:v,a.z2=1,a}function vu(t,e,n,r,i,a,o){Or(t,e,n.getModel("label"),n.getModel("emphasis.label"),{labelFetcher:i,labelDataIndex:a,defaultText:Ts(i.getData(),a),isRectText:!0,autoColor:r}),mu(t),mu(e)}function mu(t,e){"outside"===t.textPosition&&(t.textPosition=e)}function yu(t,e,n){n.style.text=null,Dr(n,{shape:{width:0}},e,t,function(){n.parent&&n.parent.remove(n)})}function _u(t,e,n){n.style.text=null,Dr(n,{shape:{r:n.shape.r0}},e,t,function(){n.parent&&n.parent.remove(n)})}function bu(t,e,n,r,i,a,s,u){var l=e.getItemVisual(n,"color"),c=e.getItemVisual(n,"opacity"),h=r.getModel("itemStyle"),f=r.getModel("emphasis.itemStyle").getBarItemStyle();u||t.setShape("r",h.get("barBorderRadius")||0),t.useStyle(o({fill:l,opacity:c},h.getBarItemStyle()));var d=r.getShallow("cursor");d&&t.attr("cursor",d),u||vu(t.style,f,r,l,a,n),Sr(t,f)}function xu(t,e,n){var r=t.getData(),i=[],a=r.getLayout("valueAxisHorizontal")?1:0;i[1-a]=r.getLayout("valueAxisStart");var o=new mS({shape:{points:r.getLayout("largePoints")},incremental:!!n,__startPoint:i,__valueIdx:a});e.add(o),function(t,e,n){var r=n.getVisual("borderColor")||n.getVisual("color"),i=e.getModel("itemStyle").getItemStyle(["color","borderColor"]);t.useStyle(i),t.style.fill=null,t.style.stroke=r,t.style.lineWidth=n.getLayout("barWidth")}(o,t,r)}function wu(t,e,n,r){var i=e.getData(),a=i.getName(this.dataIndex),o=e.get("selectedOffset");r.dispatchAction({type:"pieToggleSelect",from:t,name:a,seriesId:e.id}),i.each(function(t){Su(i.getItemGraphicEl(t),i.getItemLayout(t),e.isSelected(i.getName(t)),o,n)})}function Su(t,e,n,r,i){var a=(e.startAngle+e.endAngle)/2,o=Math.cos(a),s=Math.sin(a),u=n?r:0,l=[o*u,s*u];i?t.animate().when(200,{position:l}).start("bounceOut"):t.attr("position",l)}function Tu(t,e){function n(){a.ignore=a.hoverIgnore,o.ignore=o.hoverIgnore}function r(){a.ignore=a.normalIgnore,o.ignore=o.normalIgnore}kv.call(this);var i=new Ry({z2:2}),a=new zy,o=new Py;this.add(i),this.add(a),this.add(o),this.updateData(t,e,!0),this.on("emphasis",n).on("normal",r).on("mouseover",n).on("mouseout",r)}function Ou(t,e,n,r,i,a,o){function s(e,n){for(var r=e;r>=0&&(t[r].y-=n,!(r>0&&t[r].y>t[r-1].y+t[r-1].height));r--);}function u(t,e,n,r,i,a){for(var o=e?Number.MAX_VALUE:0,s=0,u=t.length;s<u;s++)if("center"!==t[s].position){var l=Math.abs(t[s].y-r),c=t[s].len,h=t[s].len2,f=l<i+c?Math.sqrt((i+c+h)*(i+c+h)-l*l):Math.abs(t[s].x-n);e&&f>=o&&(f=o-10),!e&&f<=o&&(f=o+10),t[s].x=n+f*a,o=f}}t.sort(function(t,e){return t.y-e.y});for(var l,c=0,h=t.length,f=[],d=[],p=0;p<h;p++)(l=t[p].y-c)<0&&function(e,n,r,i){for(var a=e;a<n;a++)if(t[a].y+=r,a>e&&a+1<n&&t[a+1].y>t[a].y+t[a].height)return void s(a,r/2);s(n-1,r/2)}(p,h,-l),c=t[p].y+t[p].height;for(o-c<0&&s(h-1,c-o),p=0;p<h;p++)t[p].y>=n?d.push(t[p]):f.push(t[p]);u(f,!1,e,n,r,i),u(d,!0,e,n,r,i)}function Mu(){this.group=new kv}function ku(t,e,n){xw.call(this,t,e,n),this.type="value",this.angle=0,this.name=""}function Cu(t,e,n){this._model=t,this.dimensions=[],this._indicatorAxes=d(t.getIndicatorModels(),function(t,e){var n="indicator_"+e,r=new ku(n,new Gx);return r.name=t.get("name"),r.model=t,t.axis=r,this.dimensions.push(n),r},this),this.resize(t,n)}function Eu(t,e){return o({show:e},t)}function Au(){rv.call(this)}function Iu(t){this.name=t,rv.call(this),this._roamTransformable=new Au,this._rawTransformable=new Au}function Pu(t,e,n,r){var i=n.seriesModel,a=i?i.coordinateSystem:null;return a===this?a[t](r):null}function Lu(t,e){var n,r,i=t.svgXML;try{I(null!=(r=(n=i&&function(t,e){return(new La).parse(t,{ignoreViewBox:!0,ignoreRootClip:!0})}(i)||{}).root))}catch(t){throw new Error("Invalid svg format\n"+t.message)}var a=n.width,o=n.height,s=n.viewBoxRect;if(e||(e=null==a||null==o?r.getBoundingRect():new re(0,0,0,0),null!=a&&(e.width=a),null!=o&&(e.height=o)),s){var u=Ba(s,e.width,e.height),l=r;(r=new kv).add(l),l.scale=u.scale,l.position=u.position}return r.setClipPath(new Vy({shape:e.plain()})),{root:r,boundingRect:e}}function Du(t){return function(e,n){var r=[];return f(ju(e),function(i){var a=HS[i.type][t];a&&r.push(a(e,i,n))}),r}}function ju(t){return $b.retrieveMap(t)||[]}function Ru(t,e,n,r){Iu.call(this,t),this.map=e;var i=GS.load(e,n);this._nameCoordMap=i.nameCoordMap,this._regionsMap=i.nameCoordMap,this._invertLongitute=null==r||r,this.regions=i.regions,this._rect=i.boundingRect}function Nu(t,e,n,r){var i=n.geoModel,a=n.seriesModel,o=i?i.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return o===this?o[t](r):null}function Bu(t,e){var n=t.get("boundingCoords");if(null!=n){var r=n[0],i=n[1];isNaN(r[0])||isNaN(r[1])||isNaN(i[0])||isNaN(i[1])||this.setBoundingRect(r[0],r[1],i[0]-r[0],i[1]-r[1])}var a,o=this.getBoundingRect(),s=t.get("layoutCenter"),u=t.get("layoutSize"),l=e.getWidth(),c=e.getHeight(),h=o.width/o.height*this.aspectScale,f=!1;if(s&&u&&(s=[Yr(s[0],l),Yr(s[1],c)],u=Yr(u,Math.min(l,c)),isNaN(s[0])||isNaN(s[1])||isNaN(u)||(f=!0)),f){var d={};h>1?(d.width=u,d.height=u/h):(d.height=u,d.width=u*h),d.y=s[1]-d.height/2,d.x=s[0]-d.width/2}else(a=t.getBoxLayoutParams()).aspect=h,d=yi(a,{width:l,height:c});this.setViewRect(d.x,d.y,d.width,d.height),this.setCenter(t.get("center")),this.setZoom(t.get("zoom"))}function Fu(t,e){f(e.get("geoCoord"),function(e,n){t.addGeoCoord(n,e)})}function Uu(t,e){return!!zu(t)[e]}function zu(t){return t[YS]||(t[YS]={})}function Vu(t){this._zr=t,this._opt={};var e=v,r=e(Hu,this),i=e(Gu,this),a=e(Wu,this),s=e(qu,this),u=e(Yu,this);qg.call(this),this.setPointerChecker=function(t){this.pointerChecker=t},this.enable=function(e,l){this.disable(),this._opt=o(n(l)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==e&&(e=!0),!0!==e&&"move"!==e&&"pan"!==e||(t.on("mousedown",r),t.on("mousemove",i),t.on("mouseup",a)),!0!==e&&"scale"!==e&&"zoom"!==e||(t.on("mousewheel",s),t.on("pinch",u))},this.disable=function(){t.off("mousedown",r),t.off("mousemove",i),t.off("mouseup",a),t.off("mousewheel",s),t.off("pinch",u)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function Hu(t){if(!(ct(t)||t.target&&t.target.draggable)){var e=t.offsetX,n=t.offsetY;this.pointerChecker&&this.pointerChecker(t,e,n)&&(this._x=e,this._y=n,this._dragging=!0)}}function Gu(t){if(!ct(t)&&Zu("moveOnMouseMove",t,this._opt)&&this._dragging&&"pinch"!==t.gestureEvent&&!Uu(this._zr,"globalPan")){var e=t.offsetX,n=t.offsetY,r=this._x,i=this._y,a=e-r,o=n-i;this._x=e,this._y=n,this._opt.preventDefaultMouseMove&&$g(t.event),$u(this,"pan","moveOnMouseMove",t,{dx:a,dy:o,oldX:r,oldY:i,newX:e,newY:n})}}function Wu(t){ct(t)||(this._dragging=!1)}function qu(t){var e=Zu("zoomOnMouseWheel",t,this._opt),n=Zu("moveOnMouseWheel",t,this._opt),r=t.wheelDelta,i=Math.abs(r),a=t.offsetX,o=t.offsetY;if(0!==r&&(e||n)){if(e){var s=i>3?1.4:i>1?1.2:1.1;Xu(this,"zoom","zoomOnMouseWheel",t,{scale:r>0?s:1/s,originX:a,originY:o})}if(n){var u=Math.abs(r);Xu(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:(r>0?1:-1)*(u>3?.4:u>1?.15:.05),originX:a,originY:o})}}}function Yu(t){Uu(this._zr,"globalPan")||Xu(this,"zoom",null,t,{scale:t.pinchScale>1?1.1:1/1.1,originX:t.pinchX,originY:t.pinchY})}function Xu(t,e,n,r,i){t.pointerChecker&&t.pointerChecker(r,i.originX,i.originY)&&($g(r.event),$u(t,e,n,r,i))}function $u(t,e,n,r,i){i.isAvailableBehavior=v(Zu,null,n,r),t.trigger(e,i)}function Zu(t,e,n){var r=n[t];return!t||r&&(!b(r)||e.event[r+"Key"])}function Qu(t,e,n){var r=t.target,i=r.position;i[0]+=e,i[1]+=n,r.dirty()}function Ku(t,e,n,r){var i=t.target,a=t.zoomLimit,o=i.position,s=i.scale,u=t.zoom=t.zoom||1;if(u*=e,a){var l=a.min||0;u=Math.max(Math.min(a.max||1/0,u),l)}var c=u/t.zoom;t.zoom=u,o[0]-=(n-o[0])*(c-1),o[1]-=(r-o[1])*(c-1),s[0]*=c,s[1]*=c,i.dirty()}function Ju(t,e,n){var r=e.getComponentByElement(t.topTarget),i=r&&r.coordinateSystem;return r&&r!==n&&!XS[r.mainType]&&i&&i.model!==n}function tl(t,e){var n=t.getItemStyle(),r=t.get("areaColor");return null!=r&&(n.fill=r),n}function el(t,e,n,r,i){n.off("click"),n.off("mousedown"),e.get("selectedMode")&&(n.on("mousedown",function(){t._mouseDownFlag=!0}),n.on("click",function(a){if(t._mouseDownFlag){t._mouseDownFlag=!1;for(var o=a.target;!o.__regions;)o=o.parent;if(o){var s={type:("geo"===e.mainType?"geo":"map")+"ToggleSelect",batch:d(o.__regions,function(t){return{name:t.name,from:i.uid}})};s[e.mainType+"Id"]=e.id,r.dispatchAction(s),nl(e,n)}}}))}function nl(t,e){e.eachChild(function(e){f(e.__regions,function(n){e.trigger(t.isSelected(n.name)?"emphasis":"normal")})})}function rl(t,e){var n=new kv;this.uid=Wr("ec_map_draw"),this._controller=new Vu(t.getZr()),this._controllerHost={target:e?n:null},this.group=n,this._updateGroup=e,n.add(this._regionsGroup=new kv),n.add(this._backgroundGroup=new kv)}function il(t,e,n){var r=t.getZoom(),i=t.getCenter(),a=e.zoom,o=t.dataToPoint(i);if(null!=e.dx&&null!=e.dy&&(o[0]-=e.dx,o[1]-=e.dy,i=t.pointToData(o),t.setCenter(i)),null!=a){if(n){var s=n.min||0;a=Math.max(Math.min(r*a,n.max||1/0),s)/r}t.scale[0]*=a,t.scale[1]*=a;var u=t.position,l=(e.originY-u[1])*(a-1);u[0]-=(e.originX-u[0])*(a-1),u[1]-=l,t.updateTransform(),i=t.pointToData(o),t.setCenter(i),t.setZoom(a*r)}return{center:t.getCenter(),zoom:t.getZoom()}}function al(t){var e=t.mainData,n=t.datas;n||(n={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,cl(e,n,t),$S(n,function(n){$S(e.TRANSFERABLE_METHODS,function(e){n.wrapMethod(e,m(ol,t))})}),e.wrapMethod("cloneShallow",m(ul,t)),$S(e.CHANGABLE_METHODS,function(n){e.wrapMethod(n,m(sl,t))}),I(n[e.dataType]===e)}function ol(t,e){if(function(t){return t[QS]===t}(this)){var n=a({},this[ZS]);n[this.dataType]=e,cl(e,n,t)}else hl(e,this.dataType,this[QS],t);return e}function sl(t,e){return t.struct&&t.struct.update(this),e}function ul(t,e){return $S(e[ZS],function(n,r){n!==e&&hl(n.cloneShallow(),r,e,t)}),e}function ll(t){var e=this[QS];return null==t||null==e?e:e[ZS][t]}function cl(t,e,n){t[ZS]={},$S(e,function(e,r){hl(e,r,t,n)})}function hl(t,e,n,r){n[ZS][e]=t,t[QS]=n,t.dataType=e,r.struct&&(t[r.structAttr]=r.struct,r.struct[r.datasAttr[e]]=t),t.getLinkedData=ll}function fl(t,e,n){this._nodes=[],this.hostModel=t,this.levelModels=d(e||[],function(e){return new Vr(e,t,t.ecModel)}),this.leavesModel=new Vr(n||{},t,t.ecModel)}function dl(t,e){var n=t.isExpand?t.children:[],r=t.parentNode.children,i=t.hierNode.i?r[t.hierNode.i-1]:null;if(n.length){!function(t){for(var e=t.children,n=e.length,r=0,i=0;--n>=0;){var a=e[n];a.hierNode.prelim+=r,a.hierNode.modifier+=r,r+=a.hierNode.shift+(i+=a.hierNode.change)}}(t);var a=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;i?(t.hierNode.prelim=i.hierNode.prelim+e(t,i),t.hierNode.modifier=t.hierNode.prelim-a):t.hierNode.prelim=a}else i&&(t.hierNode.prelim=i.hierNode.prelim+e(t,i));t.parentNode.hierNode.defaultAncestor=function(t,e,n,r){if(e){for(var i=t,a=t,o=a.parentNode.children[0],s=e,u=i.hierNode.modifier,l=a.hierNode.modifier,c=o.hierNode.modifier,h=s.hierNode.modifier;s=ml(s),a=yl(a),s&&a;){i=ml(i),o=yl(o),i.hierNode.ancestor=t;var f=s.hierNode.prelim+h-a.hierNode.prelim-l+r(s,a);f>0&&(bl(_l(s,t,n),t,f),l+=f,u+=f),h+=s.hierNode.modifier,l+=a.hierNode.modifier,u+=i.hierNode.modifier,c+=o.hierNode.modifier}s&&!ml(i)&&(i.hierNode.thread=s,i.hierNode.modifier+=h-u),a&&!yl(o)&&(o.hierNode.thread=a,o.hierNode.modifier+=l-c,n=t)}return n}(t,i,t.parentNode.hierNode.defaultAncestor||r[0],e)}function pl(t){t.setLayout({x:t.hierNode.prelim+t.parentNode.hierNode.modifier},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function gl(t){return arguments.length?t:xl}function vl(t,e){var n={};return t-=Math.PI/2,n.x=e*Math.cos(t),n.y=e*Math.sin(t),n}function ml(t){var e=t.children;return e.length&&t.isExpand?e[e.length-1]:t.hierNode.thread}function yl(t){var e=t.children;return e.length&&t.isExpand?e[0]:t.hierNode.thread}function _l(t,e,n){return t.hierNode.ancestor.parentNode===e.parentNode?t.hierNode.ancestor:n}function bl(t,e,n){var r=n/(e.hierNode.i-t.hierNode.i);e.hierNode.change-=r,e.hierNode.shift+=n,e.hierNode.modifier+=n,e.hierNode.prelim+=n,t.hierNode.change+=r}function xl(t,e){return t.parentNode===e.parentNode?1:2}function wl(t,e){var n=t.getItemLayout(e);return n&&!isNaN(n.x)&&!isNaN(n.y)&&"none"!==t.getItemVisual(e,"symbol")}function Sl(t,e,n){return n.itemModel=e,n.itemStyle=e.getModel("itemStyle").getItemStyle(),n.hoverItemStyle=e.getModel("emphasis.itemStyle").getItemStyle(),n.lineStyle=e.getModel("lineStyle").getLineStyle(),n.labelModel=e.getModel("label"),n.hoverLabelModel=e.getModel("emphasis.label"),n.symbolInnerColor=!1===t.isExpand&&0!==t.children.length?n.itemStyle.fill:"#fff",n}function Tl(t,e,n,r,i,a){var s=!n,u=t.tree.getNodeByDataIndex(e),l=(a=Sl(u,u.getModel(),a),t.tree.root),c=u.parentNode===l?u:u.parentNode||u,h=t.getItemGraphicEl(c.dataIndex),f=c.getLayout(),d=h?{x:h.position[0],y:h.position[1],rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:f,p=u.getLayout();s?(n=new Os(t,e,a)).attr("position",[d.x,d.y]):n.updateData(t,e,a),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=p.rawX,n.__radialRawY=p.rawY,r.add(n),t.setItemGraphicEl(e,n),Dr(n,{position:[p.x,p.y]},i);var g=n.getSymbolPath();if("radial"===a.layout){var v,m,y=l.children[0],_=y.getLayout(),b=y.children.length;if(p.x===_.x&&!0===u.isExpand){var x={};x.x=(y.children[0].getLayout().x+y.children[b-1].getLayout().x)/2,x.y=(y.children[0].getLayout().y+y.children[b-1].getLayout().y)/2,(v=Math.atan2(x.y-_.y,x.x-_.x))<0&&(v=2*Math.PI+v),(m=x.x<_.x)&&(v-=Math.PI)}else(v=Math.atan2(p.y-_.y,p.x-_.x))<0&&(v=2*Math.PI+v),0===u.children.length||0!==u.children.length&&!1===u.isExpand?(m=p.x<_.x)&&(v-=Math.PI):(m=p.x>_.x)||(v-=Math.PI);g.setStyle({textPosition:m?"left":"right",textRotation:-v,textOrigin:"center",verticalAlign:"middle"})}if(u.parentNode&&u.parentNode!==l){var w=n.__edge;w||(w=n.__edge=new Wy({shape:Ml(a,d,d),style:o({opacity:0,strokeNoScale:!0},a.lineStyle)})),Dr(w,{shape:Ml(a,f,p),style:{opacity:1}},i),r.add(w)}}function Ol(t,e,n,r,i,a){for(var o,s=t.tree.getNodeByDataIndex(e),u=t.tree.root,l=(a=Sl(s,s.getModel(),a),s.parentNode===u?s:s.parentNode||s);null==(o=l.getLayout());)l=l.parentNode===u?l:l.parentNode||l;Dr(n,{position:[o.x+1,o.y+1]},i,function(){r.remove(n),t.setItemGraphicEl(e,null)}),n.fadeOut(null,{keepLabel:!0});var c=n.__edge;c&&Dr(c,{shape:Ml(a,o,o),style:{opacity:0}},i,function(){r.remove(c)})}function Ml(t,e,n){var r,i,a,o,s,u,l,c,h=t.orient;if("radial"===t.layout){u=n.rawX,c=n.rawY;var f=vl(s=e.rawX,l=e.rawY),d=vl(s,l+(c-l)*t.curvature),p=vl(u,c+(l-c)*t.curvature),g=vl(u,c);return{x1:f.x,y1:f.y,x2:g.x,y2:g.y,cpx1:d.x,cpy1:d.y,cpx2:p.x,cpy2:p.y}}return s=e.x,l=e.y,u=n.x,c=n.y,"LR"!==h&&"RL"!==h||(r=s+(u-s)*t.curvature,i=l,a=u+(s-u)*t.curvature,o=c),"TB"!==h&&"BT"!==h||(r=s,i=l+(c-l)*t.curvature,a=u,o=c+(l-c)*t.curvature),{x1:s,y1:l,x2:u,y2:c,cpx1:r,cpy1:i,cpx2:a,cpy2:o}}function kl(t,e){for(var n,r=[t];n=r.pop();)if(e(n),n.isExpand){var i=n.children;if(i.length)for(var a=i.length-1;a>=0;a--)r.push(i[a])}}function Cl(t,e,n){if(t&&u(e,t.type)>=0){var r=n.getData().tree.root,i=t.targetNode;if("string"==typeof i&&(i=r.getNodeById(i)),i&&r.contains(i))return{node:i};var a=t.targetNodeId;if(null!=a&&(i=r.getNodeById(a)))return{node:i}}}function El(t){for(var e=[];t;)(t=t.parentNode)&&e.push(t);return e.reverse()}function Al(t,e){return u(El(t),e)>=0}function Il(t,e){for(var n=[];t;){var r=t.dataIndex;n.push({name:t.name,dataIndex:r,value:e.getRawValue(r)}),t=t.parentNode}return n.reverse(),n}function Pl(t){this.group=new kv,t.add(this.group)}function Ll(t,e,n,r,i,a){var o=[[i?t:t-JS,e],[t+n,e],[t+n,e+r],[i?t:t-JS,e+r]];return!a&&o.splice(2,0,[t+n+JS,e+r/2]),!i&&o.push([t,e+r/2]),o}function Dl(t,e,n){t.eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.componentIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&Il(n,e)}}function jl(t,e,r,i,o,s,u,l,c,h){function f(t,e){x?!t.invisible&&s.push(t):(e(),t.__tmWillVisible||(t.invisible=!1))}function d(e,r,i,a,o,s){var l=u.getModel(),c=M(t.getFormattedLabel(u.dataIndex,"normal",null,null,s?"upperLabel":"label"),l.get("name"));if(!s&&m.isLeafRoot){var h=t.get("drillDownIcon",!0);c=h?h+" "+c:c}var f=l.getModel(s?oT:iT),d=l.getModel(s?sT:aT),p=f.getShallow("show");Or(e,r,f,d,{defaultText:p?c:null,autoColor:i,isRectText:!0}),s&&(e.textRect=n(s)),e.truncate=p&&f.get("ellipsis")?{outerWidth:a,outerHeight:o,minChar:2}:null}function p(t,n,i,a){var s=null!=S&&r[t][S],u=o[t];return s?(r[t][S]=null,g(u,s,t)):x||((s=new n({z:function(t,e){var n=i*uT+a;return(n-1)/n}()})).__tmDepth=i,s.__tmStorageName=t,v(u,0,t)),e[t][w]=s}function g(t,e,n){(t[w]={}).old="nodeGroup"===n?e.position.slice():a({},e.shape)}function v(t,e,n){var r=t[w]={},a=u.parentNode;if(a&&(!i||"drillDown"===i.direction)){var s=0,l=0,c=o.background[a.getRawIndex()];!i&&c&&c.old&&(s=c.old.width,l=c.old.height),r.old="nodeGroup"===n?[0,l]:{x:s,y:l,width:0,height:0}}r.fadein="nodeGroup"!==n}if(u){var m=u.getLayout();if(m&&m.isInView){var y=m.width,_=m.height,b=m.borderWidth,x=m.invisible,w=u.getRawIndex(),S=l&&l.getRawIndex(),T=u.viewChildren,O=m.upperHeight,k=T&&T.length,C=u.getModel("itemStyle"),E=u.getModel("emphasis.itemStyle"),A=p("nodeGroup",eT);if(A){if(c.add(A),A.attr("position",[m.x||0,m.y||0]),A.__tmNodeWidth=y,A.__tmNodeHeight=_,m.isAboveViewRoot)return A;var I=p("background",nT,h,lT);if(I&&function(e,n,r){n.dataIndex=u.dataIndex,n.seriesIndex=t.seriesIndex,n.setShape({x:0,y:0,width:y,height:_});var i=u.getVisual("borderColor",!0),a=E.get("borderColor");f(n,function(){var t=fT(C);t.fill=i;var e=hT(E);if(e.fill=a,r){var o=y-2*b;d(t,e,i,o,O,{x:b,y:0,width:o,height:O})}else t.text=e.text=null;n.setStyle(t),Sr(n,e)}),e.add(n)}(A,I,k&&m.upperHeight),!k){var P=p("content",nT,h,cT);P&&function(e,n){n.dataIndex=u.dataIndex,n.seriesIndex=t.seriesIndex;var r=Math.max(y-2*b,0),i=Math.max(_-2*b,0);n.culling=!0,n.setShape({x:b,y:b,width:r,height:i});var a=u.getVisual("color",!0);f(n,function(){var t=fT(C);t.fill=a;var e=hT(E);d(t,e,a,r,i),n.setStyle(t),Sr(n,e)}),e.add(n)}(A,P)}return A}}}}function Rl(t,e){var n=t.visual,r=[];x(n)?gT(n,function(t){r.push(t)}):null!=n&&r.push(n),e||1!==r.length||{color:1,symbol:1}.hasOwnProperty(t.type)||(r[1]=r[0]),Gl(t,r)}function Nl(t){return{applyVisual:function(e,n,r){e=this.mapValueToVisual(e),r("color",t(n("color"),e))},_doMap:Vl([0,1])}}function Bl(t){var e=this.option.visual;return e[Math.round(qr(t,[0,1],[0,e.length-1],!0))]||{}}function Fl(t){return function(e,n,r){r(t,this.mapValueToVisual(e))}}function Ul(t){var e=this.option.visual;return e[this.option.loop&&t!==mT?t%e.length:t]}function zl(){return this.option.visual[0]}function Vl(t){return{linear:function(e){return qr(e,t,this.option.visual,!0)},category:Ul,piecewise:function(e,n){var r=Hl.call(this,n);return null==r&&(r=qr(e,t,this.option.visual,!0)),r},fixed:zl}}function Hl(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var r=n[yT.findPieceIndex(t,n)];if(r&&r.visual)return r.visual[this.type]}}function Gl(t,e){return t.visual=e,"color"===t.type&&(t.parsedVisual=d(e,function(t){return Dt(t)})),e}function Wl(t,e,n){return t?e<=n:e<n}function ql(t,e,n,r){var i=a({},e);return f(["color","colorAlpha","colorSaturation"],function(a){var o=t.get(a,!0);null==o&&n&&(o=n[a]),null==o&&(o=e[a]),null==o&&(o=r.get(a)),null!=o&&(i[a]=o)}),i}function Yl(t){var e=Xl(t,"color");if(e){var n=Xl(t,"colorAlpha"),r=Xl(t,"colorSaturation");return r&&(e=Ut(e,null,null,r)),n&&(e=zt(e,n)),e}}function Xl(t,e){var n=t[e];if(null!=n&&"none"!==n)return n}function $l(t,e){var n=t.get(e);return xT(n)&&n.length?{name:e,range:n}:null}function Zl(t,e,n,r,i,o){var s=a({},e);if(i){var u=i.type,l="color"===u&&i.__drColorMappingBy,c="index"===l?r:"id"===l?o.mapIdToIndex(n.getId()):n.getValue(t.get("visualDimension"));s[u]=i.mapValueToVisual(c)}return s}function Ql(t,e,n,r,i,a){var o=t.children||[],s=r.sort;"asc"!==s&&"desc"!==s&&(s=null);var u=null!=r.leafDepth&&r.leafDepth<=a;if(i&&!u)return t.viewChildren=[];!function(t,e){e&&t.sort(function(t,n){var r="asc"===e?t.getValue()-n.getValue():n.getValue()-t.getValue();return 0===r?"asc"===e?t.dataIndex-n.dataIndex:n.dataIndex-t.dataIndex:r})}(o=g(o,function(t){return!t.isRemoved()}),s);var l=function(t,e,n){for(var r=0,i=0,a=e.length;i<a;i++)r+=e[i].getValue();var o=t.get("visualDimension");if(e&&e.length)if("value"===o&&n)s=[e[e.length-1].getValue(),e[0].getValue()],"asc"===n&&s.reverse();else{var s=[1/0,-1/0];MT(e,function(t){var e=t.getValue(o);e<s[0]&&(s[0]=e),e>s[1]&&(s[1]=e)})}else s=[NaN,NaN];return{sum:r,dataExtent:s}}(e,o,s);if(0===l.sum)return t.viewChildren=[];if(l.sum=function(t,e,n,r,i){if(!r)return n;for(var a=t.get("visibleMin"),o=i.length,s=o,u=o-1;u>=0;u--){var l=i["asc"===r?o-u-1:u].getValue();l/n*e<a&&(s=u,n-=l)}return i.splice("asc"===r?0:s,o-s),n}(e,n,l.sum,s,o),0===l.sum)return t.viewChildren=[];for(var c=0,h=o.length;c<h;c++){var f=o[c].getValue()/l.sum*n;o[c].setLayout({area:f})}return u&&(o.length&&t.setLayout({isLeafRoot:!0},!0),o.length=0),t.viewChildren=o,t.setLayout({dataExtent:l.dataExtent},!0),o}function Kl(t,e,n){for(var r,i=0,a=1/0,o=0,s=t.length;o<s;o++)(r=t[o].getLayout().area)&&(r<a&&(a=r),r>i&&(i=r));var u=t.area*t.area,l=e*e*n;return u?ST(l*i/u,u/(l*a)):1/0}function Jl(t,e,n,r,i){var a=e===n.width?0:1,o=1-a,s=["x","y"],u=["width","height"],l=n[s[a]],c=e?t.area/e:0;(i||c>n[u[o]])&&(c=n[u[o]]);for(var h=0,f=t.length;h<f;h++){var d=t[h],p={},g=c?d.getLayout().area/c:0,v=p[u[o]]=ST(c-2*r,0),m=n[s[a]]+n[u[a]]-l,y=h===f-1||m<g?m:g,_=p[u[a]]=ST(y-2*r,0);p[s[o]]=n[s[o]]+TT(r,v/2),p[s[a]]=l+TT(r,_/2),l+=y,d.setLayout(p,!0)}n[s[o]]+=c,n[u[o]]-=c}function tc(t){return t.get(ET)?t.get(AT):0}function ec(t){return"_EC_"+t}function nc(t,e){this.id=null==t?"":t,this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=null==e?-1:e}function rc(t,e,n){this.node1=t,this.node2=e,this.dataIndex=null==n?-1:n}function ic(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}function ac(t){return"_"+t+"Type"}function oc(t,e,n){var r=e.getItemVisual(n,"color"),i=e.getItemVisual(n,t),a=e.getItemVisual(n,t+"Size");if(i&&"none"!==i){y(a)||(a=[a,a]);var o=hs(i,-a[0]/2,-a[1]/2,a[0],a[1],r);return o.name=t,o}}function sc(t,e){var n=e[0],r=e[1],i=e[2];t.x1=n[0],t.y1=n[1],t.x2=r[0],t.y2=r[1],t.percent=1,i?(t.cpx1=i[0],t.cpy1=i[1]):(t.cpx1=NaN,t.cpy1=NaN)}function uc(t,e,n){kv.call(this),this._createLine(t,e,n)}function lc(t){this._ctor=t||uc,this.group=new kv}function cc(t){var e=t.hostModel;return{lineStyle:e.getModel("lineStyle").getLineStyle(),hoverLineStyle:e.getModel("emphasis.lineStyle").getLineStyle(),labelModel:e.getModel("label"),hoverLabelModel:e.getModel("emphasis.label")}}function hc(t){return isNaN(t[0])||isNaN(t[1])}function fc(t){return!hc(t[0])&&!hc(t[1])}function dc(t,e,n){for(var r,i=t[0],a=t[1],o=t[2],s=1/0,u=n*n,l=.1,c=.1;c<=.9;c+=.1)HT[0]=qT(i[0],a[0],o[0],c),HT[1]=qT(i[1],a[1],o[1],c),(d=XT(YT(HT,e)-u))<s&&(s=d,r=c);for(var h=0;h<32;h++){var f=r+l;GT[0]=qT(i[0],a[0],o[0],r),GT[1]=qT(i[1],a[1],o[1],r),WT[0]=qT(i[0],a[0],o[0],f),WT[1]=qT(i[1],a[1],o[1],f);var d=YT(GT,e)-u;if(XT(d)<.01)break;var p=YT(WT,e)-u;l/=2,d<0?p>=0?r+=l:r-=l:p>=0?r-=l:r+=l}return r}function pc(t,e){return t.getVisual("opacity")||t.getModel().get(e)}function gc(t,e,n){var r=t.getGraphicEl(),i=pc(t,e);null!=n&&(null==i&&(i=1),i*=n),r.downplay&&r.downplay(),r.traverse(function(t){"group"!==t.type&&t.setStyle("opacity",i)})}function vc(t,e){var n=pc(t,e),r=t.getGraphicEl();r.highlight&&r.highlight(),r.traverse(function(t){"group"!==t.type&&t.setStyle("opacity",n)})}function mc(t){return t instanceof Array||(t=[t,t]),t}function yc(t){var e=t.coordinateSystem;if(!e||"view"===e.type){var n=t.getGraph();n.eachNode(function(t){var e=t.getModel();t.setLayout([+e.get("x"),+e.get("y")])}),_c(n)}}function _c(t){t.eachEdge(function(t){var e=t.getModel().get("lineStyle.curveness")||0,n=z(t.node1.getLayout()),r=z(t.node2.getLayout()),i=[n,r];+e&&i.push([(n[0]+r[0])/2-(n[1]-r[1])*e,(n[1]+r[1])/2-(r[0]-n[0])*e]),t.setLayout(i)})}function bc(t){var e=t.coordinateSystem;if(!e||"view"===e.type){var n=e.getBoundingRect(),r=t.getData(),i=r.graph,a=0,o=r.getSum("value"),s=2*Math.PI/(o||r.count()),u=n.width/2+n.x,l=n.height/2+n.y,c=Math.min(n.width,n.height)/2;i.eachNode(function(t){var e=t.getValue("value");a+=s*(o?e:1)/2,t.setLayout([c*Math.cos(a)+u,c*Math.sin(a)+l]),a+=s*(o?e:1)/2}),r.setLayout({cx:u,cy:l}),i.eachEdge(function(t){var e,n=t.getModel().get("lineStyle.curveness")||0,r=z(t.node1.getLayout()),i=z(t.node2.getLayout());+n&&(e=[u*(n*=3)+(r[0]+i[0])/2*(1-n),l*n+(r[1]+i[1])/2*(1-n)]),t.setLayout([r,i,e])})}}function xc(t,e){return e&&("string"==typeof e?t=e.replace("{value}",null!=t?t:""):"function"==typeof e&&(t=e(t))),t}function wc(t,e){function n(){a.ignore=a.hoverIgnore,o.ignore=o.hoverIgnore}function r(){a.ignore=a.normalIgnore,o.ignore=o.normalIgnore}kv.call(this);var i=new Uy,a=new zy,o=new Py;this.add(i),this.add(a),this.add(o),this.updateData(t,e,!0),this.on("emphasis",n).on("normal",r).on("mouseover",n).on("mouseout",r)}function Sc(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function Tc(t,e){return Math.min(e[1],Math.max(e[0],t))}function Oc(t,e,n){this._axesMap=R(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,e,n)}function Mc(t,e){return sO(uO(t,e[0]),e[1])}function kc(t){qg.call(this),this._zr=t,this.group=new kv,this._track=[],this._covers=[],this._uid="brushController_"+kO++,this._handlers={},gO(CO,function(t,e){this._handlers[e]=v(t,this)},this)}function Cc(t,e){var n=EO[e.brushType].createCover(t,e);return n.__brushOption=e,Ic(n,e),t.group.add(n),n}function Ec(t,e){var n=Lc(e);return n.endCreating&&(n.endCreating(t,e),Ic(e,e.__brushOption)),e}function Ac(t,e){var n=e.__brushOption;Lc(e).updateCoverShape(t,e,n.range,n)}function Ic(t,e){var n=e.z;null==n&&(n=bO),t.traverse(function(t){t.z=n,t.z2=n})}function Pc(t,e){Lc(e).updateCommon(t,e),Ac(t,e)}function Lc(t){return EO[t.__brushOption.brushType]}function Dc(t,e,n){var r=t._panels;if(!r)return!0;var i,a=t._transform;return gO(r,function(t){t.isTargetByCursor(e,n,a)&&(i=t)}),i}function jc(t,e){var n=t._panels;if(!n)return!0;var r=e.__brushOption.panelId;return null==r||n[r]}function Rc(t){var e=t._covers,n=e.length;return gO(e,function(e){t.group.remove(e)},t),e.length=0,!!n}function Nc(t,e){var r=vO(t._covers,function(t){var e=t.__brushOption,r=n(e.range);return{brushType:e.brushType,panelId:e.panelId,range:r}});t.trigger("brush",r,{isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function Bc(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function Fc(t,e,n,r){var i=new kv;return i.add(new Vy({name:"main",style:Hc(n),silent:!0,draggable:!0,cursor:"move",drift:pO(t,e,i,"nswe"),ondragend:pO(Nc,e,{isEnd:!0})})),gO(r,function(n){i.add(new Vy({name:n,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:pO(t,e,i,n),ondragend:pO(Nc,e,{isEnd:!0})}))}),i}function Uc(t,e,n,r){var i=r.brushStyle.lineWidth||0,a=yO(i,wO),o=n[0][0],s=n[1][0],u=o-i/2,l=s-i/2,c=n[0][1],h=n[1][1],f=c-a+i/2,d=h-a+i/2,p=c-o,g=h-s,v=p+i,m=g+i;Vc(t,e,"main",o,s,p,g),r.transformable&&(Vc(t,e,"w",u,l,a,m),Vc(t,e,"e",f,l,a,m),Vc(t,e,"n",u,l,v,a),Vc(t,e,"s",u,d,v,a),Vc(t,e,"nw",u,l,a,a),Vc(t,e,"ne",f,l,a,a),Vc(t,e,"sw",u,d,a,a),Vc(t,e,"se",f,d,a,a))}function zc(t,e){var n=e.__brushOption,r=n.transformable,i=e.childAt(0);i.useStyle(Hc(n)),i.attr({silent:!r,cursor:r?"move":"default"}),gO(["w","e","n","s","se","sw","ne","nw"],function(n){var i=e.childOfName(n),a=function t(e,n){if(n.length>1)return("e"===(r=[t(e,(n=n.split(""))[0]),t(e,n[1])])[0]||"w"===r[0])&&r.reverse(),r.join("");var r=Br({w:"left",e:"right",n:"top",s:"bottom"}[n],function(t){return Rr(t.group)}(e));return{left:"w",right:"e",top:"n",bottom:"s"}[r]}(t,n);i&&i.attr({silent:!r,invisible:!r,cursor:r?OO[a]+"-resize":null})})}function Vc(t,e,n,r,i,a,o){var s=e.childOfName(n);s&&s.setShape(function(t){var e=mO(t[0][0],t[1][0]),n=mO(t[0][1],t[1][1]);return{x:e,y:n,width:yO(t[0][0],t[1][0])-e,height:yO(t[0][1],t[1][1])-n}}(Xc(t,e,[[r,i],[r+a,i+o]])))}function Hc(t){return o({strokeNoScale:!0},t.brushStyle)}function Gc(t,e,n,r){var i=[mO(t,n),mO(e,r)],a=[yO(t,n),yO(e,r)];return[[i[0],a[0]],[i[1],a[1]]]}function Wc(t,e,n,r,i,a,o,s){var u=r.__brushOption,l=t(u.range),c=Yc(n,a,o);gO(i.split(""),function(t){var e=TO[t];l[e[0]][e[1]]+=c[e[0]]}),u.range=e(Gc(l[0][0],l[1][0],l[0][1],l[1][1])),Pc(n,r),Nc(n,{isEnd:!1})}function qc(t,e,n,r,i){var a=e.__brushOption.range,o=Yc(t,n,r);gO(a,function(t){t[0]+=o[0],t[1]+=o[1]}),Pc(t,e),Nc(t,{isEnd:!1})}function Yc(t,e,n){var r=t.group,i=r.transformCoordToLocal(e,n),a=r.transformCoordToLocal(0,0);return[i[0]-a[0],i[1]-a[1]]}function Xc(t,e,r){var i=jc(t,e);return i&&!0!==i?i.clipPath(r,t._transform):n(r)}function $c(t){var e=t.event;e.preventDefault&&e.preventDefault()}function Zc(t,e,n){return t.childOfName("main").contain(e,n)}function Qc(t,e,r,i){var a,o=t._creatingCover,s=t._creatingPanel,u=t._brushOption;if(t._track.push(r.slice()),function(t){var e=t._track;if(!e.length)return!1;var n=e[e.length-1],r=e[0],i=n[0]-r[0],a=n[1]-r[1];return _O(i*i+a*a,.5)>xO}(t)||o){if(s&&!o){"single"===u.brushMode&&Rc(t);var l=n(u);l.brushType=Kc(l.brushType,s),l.panelId=!0===s?null:s.panelId,o=t._creatingCover=Cc(t,l),t._covers.push(o)}if(o){var c=EO[Kc(t._brushType,s)];o.__brushOption.range=c.getCreatingRange(Xc(t,o,t._track)),i&&(Ec(t,o),c.updateCommon(t,o)),Ac(t,o),a={isEnd:i}}}else i&&"single"===u.brushMode&&u.removeOnClick&&Dc(t,e,r)&&Rc(t)&&(a={isEnd:i,removeOnClick:!0});return a}function Kc(t,e){return"auto"===t?e.defaultBrushType:t}function Jc(t){if(this._dragging){$c(t);var e=Qc(this,t,this.group.transformCoordToLocal(t.offsetX,t.offsetY),!0);this._dragging=!1,this._track=[],this._creatingCover=null,e&&Nc(this,e)}}function th(t){return{createCover:function(e,n){return Fc(pO(Wc,function(e){var n=[e,[0,100]];return t&&n.reverse(),n},function(e){return e[t]}),e,n,[["w","e"],["n","s"]][t])},getCreatingRange:function(e){var n=Bc(e);return[mO(n[0][t],n[1][t]),yO(n[0][t],n[1][t])]},updateCoverShape:function(e,n,r,i){var a,o=jc(e,n);if(!0!==o&&o.getLinearBrushOtherExtent)a=o.getLinearBrushOtherExtent(t,e._transform);else{var s=e._zr;a=[0,[s.getWidth(),s.getHeight()][1-t]]}var u=[r,a];t&&u.reverse(),Uc(e,n,u,i)},updateCommon:zc,contain:Zc}}function eh(t){return t=ih(t),function(e,n){return Ur(e,t)}}function nh(t,e){return t=ih(t),function(n){var r=null!=e?e:n,i=r?t.x:t.y;return[i,i+((r?t.width:t.height)||0)]}}function rh(t,e,n){return t=ih(t),function(r,i,a){return t.contain(i[0],i[1])&&!Ju(r,e,n)}}function ih(t){return re.create(t)}function ah(t,e){var n=t._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===e}function oh(t,e,n,r){for(var i=[],a=0;a<n.length;a++){var o=n[a],s=t.get(t.mapDimension(o),e);ch(s,r.getAxis(o).type)||i.push(r.dataToPoint(s,o))}return i}function sh(t,e,n,r,i){var a=oh(t,n,r,i),o=new zy({shape:{points:a},silent:!0,z2:10});return e.add(o),t.setItemGraphicEl(n,o),o}function uh(t){var e=t.get("smooth",!0);return!0===e&&(e=LO),{lineStyle:t.getModel("lineStyle").getLineStyle(),smooth:null!=e?e:LO}}function lh(t,e,n,r){var i=r.lineStyle;e.hasItemOption&&(i=e.getItemModel(n).getModel("lineStyle").getLineStyle()),t.useStyle(i);var a=t.style;a.fill=null,a.stroke=e.getItemVisual(n,"color"),a.opacity=e.getItemVisual(n,"opacity"),r.smooth&&(t.shape.smooth=r.smooth)}function ch(t,e){return"category"===e?null==t:null==t||isNaN(t)}function hh(t,e){return t.getVisual("opacity")||t.getModel().get(e)}function fh(t,e,n){var r=t.getGraphicEl(),i=hh(t,e);null!=n&&(null==i&&(i=1),i*=n),r.downplay&&r.downplay(),r.traverse(function(t){"group"!==t.type&&t.setStyle("opacity",i)})}function dh(t,e){var n=hh(t,e),r=t.getGraphicEl();r.highlight&&r.highlight(),r.traverse(function(t){"group"!==t.type&&t.setStyle("opacity",n)})}function ph(){function t(e,r){if(r>=n.length)return e;for(var i=-1,a=e.length,o=n[r++],s={},u={};++i<a;){var l=o(e[i]),c=u[l];c?c.push(e[i]):u[l]=[e[i]]}return f(u,function(e,n){s[n]=t(e,r)}),s}function e(t,i){if(i>=n.length)return t;var a=[],o=r[i++];return f(t,function(t,n){a.push({key:n,values:e(t,i)})}),o?a.sort(function(t,e){return o(t.key,e.key)}):a}var n=[],r=[];return{key:function(t){return n.push(t),this},sortKeys:function(t){return r[n.length-1]=t,this},entries:function(n){return e(t(n,0),0)}}}function gh(t,e,n){f(t,function(t){t.outEdges.length||t.setLayout("vertical"===n?{y:e-1}:{x:e-1},!0)})}function vh(t,e,n){f(t,function(t){if("vertical"===n){var r=t.getLayout().y*e;t.setLayout({y:r},!0)}else{var i=t.getLayout().x*e;t.setLayout({x:i},!0)}})}function mh(t,e,n,r,i){f(t,function(t){var a,o,s,u=0,l=t.length;if("vertical"===i){var c;for(t.sort(function(t,e){return t.getLayout().x-e.getLayout().x}),s=0;s<l;s++)(o=u-(a=t[s]).getLayout().x)>0&&(c=a.getLayout().x+o,a.setLayout({x:c},!0)),u=a.getLayout().x+a.getLayout().dx+e;if((o=u-e-r)>0)for(c=a.getLayout().x-o,a.setLayout({x:c},!0),u=c,s=l-2;s>=0;--s)(o=(a=t[s]).getLayout().x+a.getLayout().dx+e-u)>0&&(c=a.getLayout().x-o,a.setLayout({x:c},!0)),u=a.getLayout().x}else{var h;for(t.sort(function(t,e){return t.getLayout().y-e.getLayout().y}),s=0;s<l;s++)(o=u-(a=t[s]).getLayout().y)>0&&(h=a.getLayout().y+o,a.setLayout({y:h},!0)),u=a.getLayout().y+a.getLayout().dy+e;if((o=u-e-n)>0)for(h=a.getLayout().y-o,a.setLayout({y:h},!0),u=h,s=l-2;s>=0;--s)(o=(a=t[s]).getLayout().y+a.getLayout().dy+e-u)>0&&(h=a.getLayout().y-o,a.setLayout({y:h},!0)),u=a.getLayout().y}})}function yh(t,e,n){f(t.slice().reverse(),function(t){f(t,function(t){if(t.outEdges.length){var r=Sh(t.outEdges,_h,n)/Sh(t.outEdges,wh,n);if("vertical"===n){var i=t.getLayout().x+(r-xh(t,n))*e;t.setLayout({x:i},!0)}else{var a=t.getLayout().y+(r-xh(t,n))*e;t.setLayout({y:a},!0)}}})})}function _h(t,e){return xh(t.node2,e)*t.getValue()}function bh(t,e){return xh(t.node1,e)*t.getValue()}function xh(t,e){return"vertical"===e?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function wh(t){return t.getValue()}function Sh(t,e,n){for(var r=0,i=t.length,a=-1;++a<i;){var o=+e.call(t,t[a],n);isNaN(o)||(r+=o)}return r}function Th(t,e,n){f(t,function(t){f(t,function(t){if(t.inEdges.length){var r=Sh(t.inEdges,bh,n)/Sh(t.inEdges,wh,n);if("vertical"===n){var i=t.getLayout().x+(r-xh(t,n))*e;t.setLayout({x:i},!0)}else{var a=t.getLayout().y+(r-xh(t,n))*e;t.setLayout({y:a},!0)}}})})}function Oh(t,e,n,r,i){var a=t.ends,o=new VO({shape:{points:i?function(t,e,n){return d(a,function(t){return(t=t.slice())[e]=n.initBaseline,t})}(0,r,t):a}});return Mh(t,o,e,n,i),o}function Mh(t,e,n,r,i){(0,a_[i?"initProps":"updateProps"])(e,{shape:{points:t.ends}},n.hostModel,r);var a=n.getItemModel(r),o=a.getModel(UO),s=n.getItemVisual(r,"color"),u=o.getItemStyle(["borderColor"]);u.stroke=s,u.strokeNoScale=!0,e.useStyle(u),e.z2=100,Sr(e,a.getModel(zO).getItemStyle())}function kh(t,e,n){var r=t.ends;return new XO({shape:{points:n?function(t,e){return d(r,function(t){return(t=t.slice())[1]=e.initBaseline,t})}(0,t):r},z2:100})}function Ch(t,e,n,r){var i=e.getItemModel(n),a=i.getModel(WO),o=e.getItemVisual(n,"color"),s=e.getItemVisual(n,"borderColor")||o,u=a.getItemStyle(YO);t.useStyle(u),t.style.strokeNoScale=!0,t.style.fill=o,t.style.stroke=s,t.__simpleBox=r,Sr(t,i.getModel(qO).getItemStyle())}function Eh(t,e,n){var r=t.getData(),i=r.getLayout("largePoints"),a=new $O({shape:{points:i},__sign:1});e.add(a);var o=new $O({shape:{points:i},__sign:-1});e.add(o),Ah(1,a,t,r),Ah(-1,o,t,r),n&&(a.incremental=!0,o.incremental=!0)}function Ah(t,e,n,r){var i=t>0?"P":"N",a=r.getVisual("borderColor"+i)||r.getVisual("color"+i),o=n.getModel(WO).getItemStyle(YO);e.useStyle(o),e.style.fill=null,e.style.stroke=a}function Ih(t,e,n,r,i){return n>r?-1:n<r?1:e>0?t.get(i,e-1)<=r?1:-1:1}function Ph(t,e){t.eachChild(function(t){t.attr({z:e.z,zlevel:e.zlevel,style:{stroke:"stroke"===e.brushType?e.color:null,fill:"fill"===e.brushType?e.color:null}})})}function Lh(t,e){kv.call(this);var n=new Os(t,e),r=new kv;this.add(n),this.add(r),r.beforeUpdate=function(){this.attr(n.getScale())},this.updateData(t,e)}function Dh(t){var e=t.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(t.data=d(e,function(t){var e={coords:[t[0].coord,t[1].coord]};return t[0].name&&(e.fromName=t[0].name),t[1].name&&(e.toName=t[1].name),i([e,t[0],t[1]])}))}function jh(t,e,n){kv.call(this),this.add(this.createLine(t,e,n)),this._updateEffectSymbol(t,e)}function Rh(t,e,n){kv.call(this),this._createPolyline(t,e,n)}function Nh(t,e,n){jh.call(this,t,e,n),this._lastFrame=0,this._lastFramePercent=0}function Bh(){this.group=new kv}function Fh(t){return t instanceof Array||(t=[t,t]),t}function Uh(){var t=Ng();this.canvas=t,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}function zh(t,e,n){var r=t[1]-t[0],i=(e=d(e,function(e){return{interval:[(e.interval[0]-t[0])/r,(e.interval[1]-t[0])/r]}})).length,a=0;return function(t){for(r=a;r<i;r++)if((o=e[r].interval)[0]<=t&&t<=o[1]){a=r;break}if(r===i)for(var r=a-1;r>=0;r--){var o=e[r].interval;if(o[0]<=t&&t<=o[1]){a=r;break}}return r>=0&&r<i&&n[r]}}function Vh(t,e,n,r){var i=t.getItemLayout(e),a=n.get("symbolRepeat"),o=n.get("symbolClip"),s=n.get("symbolPosition")||"start",u=(n.get("symbolRotate")||0)*Math.PI/180||0,l=n.get("symbolPatternSize")||2,c=n.isAnimationEnabled(),h={dataIndex:e,layout:i,itemModel:n,symbolType:t.getItemVisual(e,"symbol")||"circle",color:t.getItemVisual(e,"color"),symbolClip:o,symbolRepeat:a,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:l,rotation:u,animationModel:c?n:null,hoverAnimation:c&&n.get("hoverAnimation"),z2:n.getShallow("z",!0)||0};(function(t,e,n,r,i){var a,o=r.valueDim,s=t.get("symbolBoundingData"),u=r.coordSys.getOtherAxis(r.coordSys.getBaseAxis()),l=u.toGlobalCoord(u.dataToCoord(0)),c=1-+(n[o.wh]<=0);if(y(s)){var h=[Hh(u,s[0])-l,Hh(u,s[1])-l];h[1]<h[0]&&h.reverse(),a=h[c]}else a=null!=s?Hh(u,s)-l:e?r.coordSysExtent[o.index][c]-l:n[o.wh];i.boundingLength=a,e&&(i.repeatCutLength=n[o.wh]),i.pxSign=a>0?1:a<0?-1:0})(n,a,i,r,h),function(t,e,n,r,i,a,o,s,u,l){var c=u.valueDim,h=u.categoryDim,f=Math.abs(n[h.wh]),d=t.getItemVisual(e,"symbolSize");y(d)?d=d.slice():(null==d&&(d="100%"),d=[d,d]),d[h.index]=Yr(d[h.index],f),d[c.index]=Yr(d[c.index],r?f:Math.abs(a)),l.symbolSize=d,(l.symbolScale=[d[0]/s,d[1]/s])[c.index]*=(u.isHorizontal?-1:1)*o}(t,e,i,a,0,h.boundingLength,h.pxSign,l,r,h),function(t,e,n,r,i){var a=t.get(vM)||0;a&&(yM.attr({scale:e.slice(),rotation:n}),yM.updateTransform(),a/=yM.getLineScale(),a*=e[r.valueDim.index]),i.valueLineWidth=a}(n,h.symbolScale,u,r,h);var f=h.symbolSize,d=n.get("symbolOffset");return y(d)&&(d=[Yr(d[0],f[0]),Yr(d[1],f[1])]),Gh(n,f,i,a,0,d,s,h.valueLineWidth,h.boundingLength,h.repeatCutLength,r,h),h}function Hh(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function Gh(t,e,n,r,i,o,s,u,l,c,h,f){var d=h.categoryDim,p=h.valueDim,g=f.pxSign,v=Math.max(e[p.index]+u,0),m=v;if(r){var y=Math.abs(l),_=M(t.get("symbolMargin"),"15%")+"",b=!1;_.lastIndexOf("!")===_.length-1&&(b=!0,_=_.slice(0,_.length-1)),_=Yr(_,e[p.index]);var x=Math.max(v+2*_,0),w=b?0:2*_,S=si(r),T=S?r:sf((y+w)/x);x=v+2*(_=(y-T*v)/2/(b?T:T-1)),w=b?0:2*_,S||"fixed"===r||(T=c?sf((Math.abs(c)+w)/x):0),m=T*x-w,f.repeatTimes=T,f.symbolMargin=_}var O=g*(m/2),k=f.pathPosition=[];k[d.index]=n[d.wh]/2,k[p.index]="start"===s?O:"end"===s?l-O:l/2,o&&(k[0]+=o[0],k[1]+=o[1]);var C=f.bundlePosition=[];C[d.index]=n[d.xy],C[p.index]=n[p.xy];var E=f.barRectShape=a({},n);E[p.wh]=g*Math.max(Math.abs(n[p.wh]),Math.abs(k[p.index]+O)),E[d.wh]=n[d.wh];var A=f.clipShape={};A[d.xy]=-n[d.xy],A[d.wh]=h.ecSize[d.wh],A[p.xy]=0,A[p.wh]=n[p.wh]}function Wh(t){var e=t.symbolPatternSize,n=hs(t.symbolType,-e/2,-e/2,e,e,t.color);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function qh(t,e,n,r){function i(t){var e=o.slice(),r=n.pxSign,i=t;return("start"===n.symbolRepeatDirection?r>0:r<0)&&(i=u-1-t),e[s.index]=c*(i-u/2+.5)+o[s.index],{position:e,scale:n.symbolScale.slice(),rotation:n.rotation}}var a=t.__pictorialBundle,o=n.pathPosition,s=e.valueDim,u=n.repeatTimes||0,l=0,c=n.symbolSize[e.valueDim.index]+n.valueLineWidth+2*n.symbolMargin;for(rf(t,function(t){t.__pictorialAnimationIndex=l,t.__pictorialRepeatTimes=u,l<u?af(t,null,i(l),n,r):af(t,null,{scale:[0,0]},n,r,function(){a.remove(t)}),Jh(t,n),l++});l<u;l++){var h=Wh(n);h.__pictorialAnimationIndex=l,h.__pictorialRepeatTimes=u,a.add(h);var f=i(l);af(h,{position:f.position,scale:[0,0]},{scale:f.scale,rotation:f.rotation},n,r),h.on("mouseover",function(){rf(t,function(t){t.trigger("emphasis")})}).on("mouseout",function(){rf(t,function(t){t.trigger("normal")})}),Jh(h,n)}}function Yh(t,e,n,r){var i=t.__pictorialBundle,a=t.__pictorialMainPath;a?af(a,null,{position:n.pathPosition.slice(),scale:n.symbolScale.slice(),rotation:n.rotation},n,r):(a=t.__pictorialMainPath=Wh(n),i.add(a),af(a,{position:n.pathPosition.slice(),scale:[0,0],rotation:n.rotation},{scale:n.symbolScale.slice()},n,r),a.on("mouseover",function(){this.trigger("emphasis")}).on("mouseout",function(){this.trigger("normal")})),Jh(a,n)}function Xh(t,e,n){var r=a({},e.barRectShape),i=t.__pictorialBarRect;i?af(i,null,{shape:r},e,n):(i=t.__pictorialBarRect=new Vy({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),t.add(i))}function $h(t,e,n,r){if(n.symbolClip){var i=t.__pictorialClipPath,o=a({},n.clipShape),s=e.valueDim,u=n.animationModel,l=n.dataIndex;if(i)Dr(i,{shape:o},u,l);else{o[s.wh]=0,i=new Vy({shape:o}),t.__pictorialBundle.setClipPath(i),t.__pictorialClipPath=i;var c={};c[s.wh]=n.clipShape[s.wh],a_[r?"updateProps":"initProps"](i,{shape:c},u,l)}}}function Zh(t,e){var n=t.getItemModel(e);return n.getAnimationDelayParams=Qh,n.isAnimationEnabled=Kh,n}function Qh(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function Kh(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Jh(t,e){t.off("emphasis").off("normal");var n=e.symbolScale.slice();e.hoverAnimation&&t.on("emphasis",function(){this.animateTo({scale:[1.1*n[0],1.1*n[1]]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:n.slice()},400,"elasticOut")})}function tf(t,e,n,r){var i=new kv,a=new kv;return i.add(a),i.__pictorialBundle=a,a.attr("position",n.bundlePosition.slice()),n.symbolRepeat?qh(i,e,n):Yh(i,0,n),Xh(i,n,r),$h(i,e,n,r),i.__pictorialShapeStr=nf(t,n),i.__pictorialSymbolMeta=n,i}function ef(t,e,n,r){var i=r.__pictorialBarRect;i&&(i.style.text=null);var a=[];rf(r,function(t){a.push(t)}),r.__pictorialMainPath&&a.push(r.__pictorialMainPath),r.__pictorialClipPath&&(n=null),f(a,function(t){Dr(t,{scale:[0,0]},n,e,function(){r.parent&&r.parent.remove(r)})}),t.setItemGraphicEl(e,null)}function nf(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function rf(t,e,n){f(t.__pictorialBundle.children(),function(r){r!==t.__pictorialBarRect&&e.call(n,r)})}function af(t,e,n,r,i,a){e&&t.attr(e),r.symbolClip&&!i?n&&t.attr(n):n&&a_[i?"updateProps":"initProps"](t,n,r.animationModel,r.dataIndex,a)}function of(t,e,n){var r=n.color,i=n.dataIndex,a=n.itemModel,s=a.getModel("itemStyle").getItemStyle(["color"]),u=a.getModel("emphasis.itemStyle").getItemStyle(),l=a.getShallow("cursor");rf(t,function(t){t.setColor(r),t.setStyle(o({fill:r,opacity:n.opacity},s)),Sr(t,u),l&&(t.cursor=l),t.z2=n.z2});var c={},h=t.__pictorialBarRect;vu(h.style,c,a,r,e.seriesModel,i),Sr(h,c)}function sf(t){var e=Math.round(t);return Math.abs(t-e)<1e-4?e:Math.ceil(t)}function uf(t,e,n){this.dimension="single",this.dimensions=["single"],this._axis=null,this._init(t,e,n),this.model=t}function lf(t,e){e=e||{};var n=t.axis,r={},i=n.position,a=n.orient,o=t.coordinateSystem.getRect(),s=[o.x,o.x+o.width,o.y,o.y+o.height],u={horizontal:{top:s[2],bottom:s[3]},vertical:{left:s[0],right:s[1]}};r.position=["vertical"===a?u.vertical[i]:s[0],"horizontal"===a?u.horizontal[i]:s[3]],r.rotation=Math.PI/2*{horizontal:0,vertical:1}[a],r.labelDirection=r.tickDirection=r.nameDirection={top:-1,bottom:1,right:1,left:-1}[i],t.get("axisTick.inside")&&(r.tickDirection=-r.tickDirection),M(e.labelInside,t.get("axisLabel.inside"))&&(r.labelDirection=-r.labelDirection);var l=e.rotate;return null==l&&(l=t.get("axisLabel.rotate")),r.labelRotation="top"===i?-l:l,r.z2=1,r}function cf(t,e,n,r,i){var o=t.axis;if(!o.scale.isBlank()&&o.containData(e))if(t.involveSeries){var s=function(t,e){var n=e.axis,r=n.dim,i=t,a=[],o=Number.MAX_VALUE,s=-1;return TM(e.seriesModels,function(e,u){var l,c,h=e.getData().mapDimension(r,!0);if(e.getAxisTooltipData){var f=e.getAxisTooltipData(h,t,n);c=f.dataIndices,l=f.nestestValue}else{if(!(c=e.getData().indicesOfNearest(h[0],t,"category"===n.type?.5:null)).length)return;l=e.getData().get(h[0],c[0])}if(null!=l&&isFinite(l)){var d=t-l,p=Math.abs(d);p<=o&&((p<o||d>=0&&s<0)&&(o=p,s=d,i=l,a.length=0),TM(c,function(t){a.push({seriesIndex:e.seriesIndex,dataIndexInside:t,dataIndex:e.getData().getRawIndex(t)})}))}}),{payloadBatch:a,snapToValue:i}}(e,t),u=s.payloadBatch,l=s.snapToValue;u[0]&&null==i.seriesIndex&&a(i,u[0]),!r&&t.snap&&o.containData(l)&&null!=l&&(e=l),n.showPointer(t,e,u,i),n.showTooltip(t,s,l)}else n.showPointer(t,e)}function hf(t,e,n,r){t[e.key]={value:n,payloadBatch:r}}function ff(t,e,n,r){var i=n.payloadBatch,a=e.axis,o=a.model,s=e.axisPointerModel;if(e.triggerTooltip&&i.length){var u=e.coordSys.model,l=fu(u),c=t.map[l];c||(c=t.map[l]={coordSysId:u.id,coordSysIndex:u.componentIndex,coordSysType:u.type,coordSysMainType:u.mainType,dataByAxis:[]},t.list.push(c)),c.dataByAxis.push({axisDim:a.dim,axisIndex:o.componentIndex,axisType:o.type,axisId:o.id,value:r,valueLabelOpt:{precision:s.get("label.precision"),formatter:s.get("label.formatter")},seriesDataIndices:i.slice()})}}function df(t,e,n){var r=n.getZr(),i=MM(r).axisPointerLastHighlights||{},a=MM(r).axisPointerLastHighlights={};TM(t,function(t,e){var n=t.axisPointerModel.option;"show"===n.status&&TM(n.seriesDataIndices,function(t){a[t.seriesIndex+" | "+t.dataIndex]=t})});var o=[],s=[];f(i,function(t,e){!a[e]&&s.push(t)}),f(a,function(t,e){!i[e]&&o.push(t)}),s.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,batch:s}),o.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,batch:o})}function pf(t){var e=t.axis.model,n={},r=n.axisDim=t.axis.dim;return n.axisIndex=n[r+"AxisIndex"]=e.componentIndex,n.axisName=n[r+"AxisName"]=e.name,n.axisId=n[r+"AxisId"]=e.id,n}function gf(t){return!t||null==t[0]||isNaN(t[0])||null==t[1]||isNaN(t[1])}function vf(t,e,n){if(!Mg.node){var r=e.getZr();kM(r).records||(kM(r).records={}),function(t,e){function n(n,r){t.on(n,function(n){var i=function(t){var e={showTip:[],hideTip:[]},n=function(r){var i=e[r.type];i?i.push(r):(r.dispatchAction=n,t.dispatchAction(r))};return{dispatchAction:n,pendings:e}}(e);CM(kM(t).records,function(t){t&&r(t,n,i.dispatchAction)}),function(t,e){var n,r=t.showTip.length,i=t.hideTip.length;r?n=t.showTip[r-1]:i&&(n=t.hideTip[i-1]),n&&(n.dispatchAction=null,e.dispatchAction(n))}(i.pendings,e)})}kM(t).initialized||(kM(t).initialized=!0,n("click",m(yf,"click")),n("mousemove",m(yf,"mousemove")),n("globalout",mf))}(r,e),(kM(r).records[t]||(kM(r).records[t]={})).handler=n}}function mf(t,e,n){t.handler("leave",null,n)}function yf(t,e,n,r){e.handler(t,n,r)}function _f(t,e){if(!Mg.node){var n=e.getZr();(kM(n).records||{})[t]&&(kM(n).records[t]=null)}}function bf(){}function xf(t,e,n,r){(function t(e,n){if(x(e)&&x(n)){var r=!0;return f(n,function(n,i){r=r&&t(e[i],n)}),!!r}return e===n})(AM(n).lastProp,r)||(AM(n).lastProp=r,e?Dr(n,r,t):(n.stopAnimation(),n.attr(r)))}function wf(t,e){t[e.get("label.show")?"show":"hide"]()}function Sf(t){return{position:t.position.slice(),rotation:t.rotation||0}}function Tf(t,e,n){var r=e.get("z"),i=e.get("zlevel");t&&t.traverse(function(t){"group"!==t.type&&(null!=r&&(t.z=r),null!=i&&(t.zlevel=i),t.silent=n)})}function Of(t){var e,n=t.get("type"),r=t.getModel(n+"Style");return"line"===n?(e=r.getLineStyle()).fill=null:"shadow"===n&&((e=r.getAreaStyle()).stroke=null),e}function Mf(t,e,n,r,i){var a=kf(n.get("value"),e.axis,e.ecModel,n.get("seriesDataIndices"),{precision:n.get("label.precision"),formatter:n.get("label.formatter")}),o=n.getModel("label"),s=m_(o.get("padding")||0),u=o.getFont(),l=me(a,u),c=i.position,h=l.width+s[1]+s[3],f=l.height+s[0]+s[2],d=i.align;"right"===d&&(c[0]-=h),"center"===d&&(c[0]-=h/2);var p=i.verticalAlign;"bottom"===p&&(c[1]-=f),"middle"===p&&(c[1]-=f/2),function(t,e,n,r){var i=r.getWidth(),a=r.getHeight();t[0]=Math.min(t[0]+e,i)-e,t[1]=Math.min(t[1]+n,a)-n,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}(c,h,f,r);var g=o.get("backgroundColor");g&&"auto"!==g||(g=e.get("axisLine.lineStyle.color")),t.label={shape:{x:0,y:0,width:h,height:f,r:o.get("borderRadius")},position:c.slice(),style:{text:a,textFont:u,textFill:o.getTextColor(),textPosition:"inside",fill:g,stroke:o.get("borderColor")||"transparent",lineWidth:o.get("borderWidth")||0,shadowBlur:o.get("shadowBlur"),shadowColor:o.get("shadowColor"),shadowOffsetX:o.get("shadowOffsetX"),shadowOffsetY:o.get("shadowOffsetY")},z2:10}}function kf(t,e,n,r,i){t=e.scale.parse(t);var a=e.scale.getLabel(t,{precision:i.precision}),o=i.formatter;if(o){var s={value:us(e,t),seriesData:[]};f(r,function(t){var e=n.getSeriesByIndex(t.seriesIndex),r=e&&e.getDataParams(t.dataIndexInside);r&&s.seriesData.push(r)}),b(o)?a=o.replace("{value}",a):_(o)&&(a=o(s))}return a}function Cf(t,e,n){var r=pt();return _t(r,r,n.rotation),yt(r,r,n.position),Nr([t.dataToCoord(e),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],r)}function Ef(t,e,n,r,i,a){var o=nS.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=i.get("label.margin"),Mf(e,r,i,a,{position:Cf(r.axis,t,n),align:o.textAlign,verticalAlign:o.textVerticalAlign})}function Af(t,e,n){return{x1:t[n=n||0],y1:t[1-n],x2:e[n],y2:e[1-n]}}function If(t,e,n){return{x:t[n=n||0],y:t[1-n],width:e[n],height:e[1-n]}}function Pf(t,e,n,r,i,a){return{cx:t,cy:e,r0:n,r:r,startAngle:i,endAngle:a,clockwise:!0}}function Lf(t,e){var n={};return n[e.dim+"AxisIndex"]=e.index,t.getCartesian(n)}function Df(t){return"x"===t.dim?0:1}function jf(t){return t.isHorizontal()?0:1}function Rf(t,e){var n=t.getRect();return[n[jM[e]],n[jM[e]]+n[RM[e]]]}function Nf(t,e,n){if(t.count())for(var r,i=e.coordinateSystem,a=e.getLayerSeries(),o=t.mapDimension("single"),s=t.mapDimension("value"),u=d(a,function(e){return d(e.indices,function(e){var n=i.dataToPoint(t.get(o,e));return n[1]=t.get(s,e),n})}),l=function(t){for(var e=t.length,n=t[0].length,r=[],i=[],a=0,o={},s=0;s<n;++s){for(var u=0,l=0;u<e;++u)l+=t[u][s][1];l>a&&(a=l),r.push(l)}for(var c=0;c<n;++c)i[c]=(a-r[c])/2;a=0;for(var h=0;h<n;++h){var f=r[h]+i[h];f>a&&(a=f)}return o.y0=i,o.max=a,o}(u),c=l.y0,h=n/l.max,f=a.length,p=a[0].indices.length,g=0;g<p;++g){t.setItemLayout(a[0].indices[g],{layerIndex:0,x:u[0][g][0],y0:r=c[g]*h,y:u[0][g][1]*h});for(var v=1;v<f;++v)t.setItemLayout(a[v].indices[g],{layerIndex:v,x:u[v][g][0],y0:r+=u[v-1][g][1]*h,y:u[v][g][1]*h})}}function Bf(t,e,n){function r(){o.ignore=o.hoverIgnore}function i(){o.ignore=o.normalIgnore}kv.call(this);var a=new Ry({z2:UM});a.seriesIndex=e.seriesIndex;var o=new Py({z2:zM,silent:t.getModel("label").get("silent")});this.add(a),this.add(o),this.updateData(!0,t,"normal",e,n),this.on("emphasis",r).on("normal",i).on("mouseover",r).on("mouseout",i)}function Ff(t,e,n){var r=t.getVisual("color"),i=t.getVisual("visualMeta");i&&0!==i.length||(r=null);var a=t.getModel("itemStyle").get("color");if(a)return a;if(r)return r;if(0===t.depth)return n.option.color[0];var o=n.option.color.length;return n.option.color[function(t){for(var e=t;e.depth>1;)e=e.parentNode;return u(t.getAncestors()[0].children,e)}(t)%o]}function Uf(t,e){return e=e||[0,0],d(["x","y"],function(n,r){var i=this.getAxis(n),a=e[r],o=t[r]/2;return"category"===i.type?i.getBandWidth():Math.abs(i.dataToCoord(a-o)-i.dataToCoord(a+o))},this)}function zf(t,e){return e=e||[0,0],d([0,1],function(n){var r=e[n],i=t[n]/2,a=[],o=[];return a[n]=r-i,o[n]=r+i,a[1-n]=o[1-n]=e[1-n],Math.abs(this.dataToPoint(a)[n]-this.dataToPoint(o)[n])},this)}function Vf(t,e){var n=this.getAxis(),r=e instanceof Array?e[0]:e,i=(t instanceof Array?t[0]:t)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(r-i)-n.dataToCoord(r+i))}function Hf(t,e){return d(["Radius","Angle"],function(n,r){var i=this["get"+n+"Axis"](),a=e[r],o=t[r]/2,s="dataTo"+n,u="category"===i.type?i.getBandWidth():Math.abs(i[s](a-o)-i[s](a+o));return"Angle"===n&&(u=u*Math.PI/180),u},this)}function Gf(t,e,r,i,a,o,s){var u={},l=r.style||{};if(r.shape&&(u.shape=n(r.shape)),r.position&&(u.position=r.position.slice()),r.scale&&(u.scale=r.scale.slice()),r.origin&&(u.origin=r.origin.slice()),r.rotation&&(u.rotation=r.rotation),"image"===t.type&&r.style&&(c=u.style={},f(["x","y","width","height"],function(e){Wf(e,c,l,t.style,o)})),"text"===t.type&&r.style){var c=u.style={};f(["x","y"],function(e){Wf(e,c,l,t.style,o)}),!l.hasOwnProperty("textFill")&&l.fill&&(l.textFill=l.fill),!l.hasOwnProperty("textStroke")&&l.stroke&&(l.textStroke=l.stroke)}if("group"!==t.type&&(t.useStyle(l),o)){t.style.opacity=0;var h=l.opacity;null==h&&(h=1),jr(t,{style:{opacity:h}},i,e)}o?t.attr(u):Dr(t,u,i,e),r.hasOwnProperty("z2")&&t.attr("z2",r.z2||0),r.hasOwnProperty("silent")&&t.attr("silent",r.silent),r.hasOwnProperty("invisible")&&t.attr("invisible",r.invisible),r.hasOwnProperty("ignore")&&t.attr("ignore",r.ignore),r.hasOwnProperty("info")&&t.attr("info",r.info);var d=r.styleEmphasis,p=!1===d;t.__cusHasEmphStl&&null==d||!t.__cusHasEmphStl&&p||(mr(t,d),t.__cusHasEmphStl=!p),s&&Tr(t,!p)}function Wf(t,e,n,r,i){null==n[t]||i||(e[t]=n[t],n[t]=r[t])}function qf(t,e,n,r){function i(t){null==t&&(t=c),m&&(h=e.getItemModel(t),f=h.getModel(XM),d=h.getModel($M),p=e.getItemVisual(t,"color"),m=!1)}var s=t.get("renderItem"),u=t.coordinateSystem,l={};u&&(l=u.prepareCustoms?u.prepareCustoms():QM[u.type](u));var c,h,f,d,p,g=o({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:function(t,n){return null==n&&(n=c),e.get(e.getDimension(t||0),n)},style:function(n,r){null==r&&(r=c),i(r);var o=h.getModel(qM).getItemStyle();null!=p&&(o.fill=p);var s=e.getItemVisual(r,"opacity");return null!=s&&(o.opacity=s),Mr(o,f,null,{autoColor:p,isRectText:!0}),o.text=f.getShallow("show")?k(t.getFormattedLabel(r,"normal"),Ts(e,r)):null,n&&a(o,n),o},styleEmphasis:function(n,r){null==r&&(r=c),i(r);var o=h.getModel(YM).getItemStyle();return Mr(o,d,null,{isRectText:!0},!0),o.text=d.getShallow("show")?C(t.getFormattedLabel(r,"emphasis"),t.getFormattedLabel(r,"normal"),Ts(e,r)):null,n&&a(o,n),o},visual:function(t,n){return null==n&&(n=c),e.getItemVisual(n,t)},barLayout:function(t){if(u.getBaseAxis)return function(t){var e=[],n=t.axis;if("category"===n.type){for(var r=n.getBandWidth(),i=0;i<t.count;i++)e.push(o({bandWidth:r,axisKey:"axis0",stackId:Wx+i},t));var a=Qo(e),s=[];for(i=0;i<t.count;i++){var u=a.axis0[Wx+i];u.offsetCenter=u.offset+u.width/2,s.push(u)}return s}}(o({axis:u.getBaseAxis()},t))},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(t){return Pr(t,n)}},l.api||{}),v={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:l.coordSys,dataInsideLength:e.count(),encode:Yf(t.getData())},m=!0;return function(t,n){return c=t,m=!0,s&&s(o({dataIndexInside:t,dataIndex:e.getRawIndex(t),actionType:n?n.type:null},v),g)}}function Yf(t){var e={};return f(t.dimensions,function(n,r){var i=t.getDimensionInfo(n);if(!i.isExtraCoord){var a=i.coordDim;(e[a]=e[a]||[])[i.coordDimIndex]=r}}),e}function Xf(t,e,n,r,i,a){return(t=$f(t,e,n,r,i,a,!0))&&a.setItemGraphicEl(e,t),t}function $f(t,e,n,r,i,a,o){var s=!n,u=(n=n||{}).type,l=n.shape,c=n.style;if(t&&(s||null!=u&&u!==t.__customGraphicType||"path"===u&&function(t){return t&&(t.hasOwnProperty("pathData")||t.hasOwnProperty("d"))}(l)&&Jf(l)!==t.__customPathData||"image"===u&&td(c,"image")&&c.image!==t.__customImagePath||"text"===u&&td(l,"text")&&c.text!==t.__customText)&&(i.remove(t),t=null),!s){var h=!t;return!t&&(t=function(t){var e,n=t.type;if("path"===n){var r=t.shape,i=null!=r.width&&null!=r.height?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,a=Jf(r);(e=ar(a,null,i,r.layout||"center")).__customPathData=a}else"image"===n?(e=new Xe({})).__customImagePath=t.style.image:"text"===n?(e=new Py({})).__customText=t.style.text:e=new(0,a_[n.charAt(0).toUpperCase()+n.slice(1)]);return e.__customGraphicType=n,e.name=t.name,e}(n)),Gf(t,e,n,r,0,h,o),"group"===u&&function(t,e,n,r,i){var a=n.children,o=a?a.length:0,s=n.$mergeChildren,u="byName"===s||n.diffChildrenByName,l=!1===s;if(o||u||l)if(u)!function(t){new bo(t.oldChildren,t.newChildren,Zf,Zf,t).add(Qf).update(Qf).remove(Kf).execute()}({oldChildren:t.children()||[],newChildren:a||[],dataIndex:e,animatableModel:r,group:t,data:i});else{l&&t.removeAll();for(var c=0;c<o;c++)a[c]&&$f(t.childAt(c),e,a[c],r,t,i)}}(t,e,n,r,a),i.add(t),t}}function Zf(t,e){var n=t&&t.name;return null!=n?n:ZM+e}function Qf(t,e){var n=this.context;$f(null!=e?n.oldChildren[e]:null,n.dataIndex,null!=t?n.newChildren[t]:null,n.animatableModel,n.group,n.data)}function Kf(t){var e=this.context,n=e.oldChildren[t];n&&e.group.remove(n)}function Jf(t){return t&&(t.pathData||t.d)}function td(t,e){return t&&t.hasOwnProperty(e)}function ed(t,e,n,r){var i=n.type,a=new(0,a_[i.charAt(0).toUpperCase()+i.slice(1)])(n);e.add(a),r.set(t,a),a.__ecGraphicId=t}function nd(t,e){var n=t&&t.parent;n&&("group"===t.type&&t.traverse(function(t){nd(t,e)}),e.removeKey(t.__ecGraphicId),n.remove(t))}function rd(t){return t=a({},t),f(["id","parentId","$action","hv","bounding"].concat(O_),function(e){delete t[e]}),t}function id(t,e){var n;return f(e,function(e){null!=t[e]&&"auto"!==t[e]&&(n=!0)}),n}function ad(t,e,n){var i=a({},n),o=t[e],s=n.$action||"merge";"merge"===s?o?(r(o,i,!0),bi(o,i,{ignoreSize:!0}),wi(n,o)):t[e]=i:"replace"===s?t[e]=i:"remove"===s&&o&&(t[e]=null)}function od(t,e,n){var r,i={},a="toggleSelected"===t;return n.eachComponent("legend",function(n){a&&null!=r?n[r?"select":"unSelect"](e.name):(n[t](e.name),r=n.isSelected(e.name)),f(n.getData(),function(t){var e=t.get("name");if("\n"!==e&&""!==e){var r=n.isSelected(e);i[e]=i.hasOwnProperty(e)?i[e]&&r:r}})}),{name:e.name,selected:i}}function sd(t,e){var n=m_(e.get("padding")),r=e.getItemStyle(["color","opacity"]);return r.fill=e.get("backgroundColor"),new Vy({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:r,silent:!0,z2:-1})}function ud(t,e){e.dispatchAction({type:"legendToggleSelect",name:t})}function ld(t,e,n,r){var i=n.getZr().storage.getDisplayList()[0];i&&i.useHoverLayer||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:r})}function cd(t,e,n,r){var i=n.getZr().storage.getDisplayList()[0];i&&i.useHoverLayer||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:r})}function hd(t,e,n){var r=[1,1];r[t.getOrient().index]=0,bi(e,n,{type:"box",ignoreSize:r})}function fd(t,e){if(Mg.wxa)return null;var n=document.createElement("div"),r=this._zr=e.getZr();this.el=n,this._x=e.getWidth()/2,this._y=e.getHeight()/2,t.appendChild(n),this._container=t,this._show=!1;var i=this;n.onmouseenter=function(){i._enterable&&(clearTimeout(i._hideTimeout),i._show=!0),i._inContent=!0},n.onmousemove=function(e){if(e=e||window.event,!i._enterable){var n=r.handler;st(t,e,!0),n.dispatch("mousemove",e)}},n.onmouseleave=function(){i._enterable&&i._show&&i.hideLater(i._hideDelay),i._inContent=!1}}function dd(t){this._zr=t.getZr(),this._show=!1}function pd(t){for(var e=t.pop();t.length;){var n=t.pop();n&&(Vr.isInstance(n)&&(n=n.get("tooltip",!0)),"string"==typeof n&&(n={formatter:n}),e=new Vr(n,e,e.ecModel))}return e}function gd(t,e){return t.dispatchAction||v(e.dispatchAction,e)}function vd(t){return"center"===t||"middle"===t}function md(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function yd(t){return t.dim}function _d(t,e){xw.call(this,"radius",t,e),this.type="category"}function bd(t,e){xw.call(this,"angle",t,e=e||[0,360]),this.type="category"}function xd(t,e){return e.type||(e.data?"category":"value")}function wd(t,e){var n=this,r=n.getAngleAxis(),i=n.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),i.scale.setExtent(1/0,-1/0),t.eachSeries(function(t){if(t.coordinateSystem===n){var e=t.getData();f(e.mapDimension("radius",!0),function(t){i.scale.unionExtentFromData(e,Bo(e,t))}),f(e.mapDimension("angle",!0),function(t){r.scale.unionExtentFromData(e,Bo(e,t))})}}),as(r.scale,r.model),as(i.scale,i.model),"category"===r.type&&!r.onBand){var a=r.getExtent(),o=360/r.scale.count();r.inverse?a[1]+=o:a[1]-=o,r.setExtent(a[0],a[1])}}function Sd(t,e){if(t.type=e.get("type"),t.scale=os(e),t.onBand=e.get("boundaryGap")&&"category"===t.type,t.inverse=e.get("inverse"),"angleAxis"===e.mainType){t.inverse^=e.get("clockwise");var n=e.get("startAngle");t.setExtent(n,n+(t.inverse?-360:360))}e.axis=t,t.model=e}function Td(t,e,n){e[1]>e[0]&&(e=e.slice().reverse());var r=t.coordToPoint([e[0],n]),i=t.coordToPoint([e[1],n]);return{x1:r[0],y1:r[1],x2:i[0],y2:i[1]}}function Od(t){return t.getRadiusAxis().inverse?0:1}function Md(t){var e=t[0],n=t[t.length-1];e&&n&&Math.abs(Math.abs(e.coord-n.coord)-360)<1e-4&&t.pop()}function kd(t,e){e.update="updateView",uo(e,function(e,n){var r={};return n.eachComponent({mainType:"geo",query:e},function(n){n[t](e.name),f(n.coordinateSystem.regions,function(t){r[t.name]=n.isSelected(t.name)||!1})}),{selected:r,name:e.name}})}function Cd(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!0}function Ed(t,e,r){var i={};return Ok(e,function(e){var a=i[e]=function(){var t=function(){};return t.prototype.__hidden=t.prototype,new t}();Ok(t[e],function(t,i){if(yT.isValidType(i)){var o={type:i,visual:t};r&&r(o,e),a[i]=new yT(o),"opacity"===i&&((o=n(o)).type="colorAlpha",a.__hidden.__alphaForOpacity=new yT(o))}})}),i}function Ad(t,e,r){var i;f(r,function(t){e.hasOwnProperty(t)&&Cd(e[t])&&(i=!0)}),i&&f(r,function(r){e.hasOwnProperty(r)&&Cd(e[r])?t[r]=n(e[r]):delete t[r]})}function Id(t){var e=["x","y"],n=["width","height"];return{point:function(e,n,r){if(e)return Pd(e[t],r.range)},rect:function(r,i,a){if(r){var o=a.range,s=[r[e[t]],r[e[t]]+r[n[t]]];return s[1]<s[0]&&s.reverse(),Pd(s[0],o)||Pd(s[1],o)||Pd(o[0],s)||Pd(o[1],s)}}}}function Pd(t,e){return e[0]<=t&&t<=e[1]}function Ld(t,e,n,r,i){for(var a=0,o=i[i.length-1];a<i.length;a++){var s=i[a];if(Dd(t,e,n,r,s[0],s[1],o[0],o[1]))return!0;o=s}}function Dd(t,e,n,r,i,a,o,s){var u=jd(n-t,i-o,r-e,a-s);if(u<=1e-6&&u>=-1e-6)return!1;var l=jd(i-t,i-o,a-e,a-s)/u;if(l<0||l>1)return!1;var c=jd(n-t,i-t,r-e,a-e)/u;return!(c<0||c>1)}function jd(t,e,n,r){return t*r-e*n}function Rd(t,e,n){var r=this._targetInfoList=[],i={},a=Bd(e,t);kk(Lk,function(t,e){(!n||!n.include||Ck(n.include,e)>=0)&&t(a,r,i)})}function Nd(t){return t[0]>t[1]&&t.reverse(),t}function Bd(t,e){return pn(t,e,{includeMainTypes:Ik})}function Fd(t,e,n,r){var i=n.getAxis(["x","y"][t]),a=Nd(d([0,1],function(t){return e?i.coordToData(i.toLocalCoord(r[t])):i.toGlobalCoord(i.dataToCoord(r[t]))})),o=[];return o[t]=a,o[1-t]=[NaN,NaN],{values:a,xyMinMax:o}}function Ud(t,e,n,r){return[e[0]-r[t]*n[0],e[1]-r[t]*n[1]]}function zd(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}function Vd(t,e){if(!t.isDisposed()){var n=t.getZr();n[Uk]=!0,t.dispatchAction({type:"brushSelect",batch:e}),n[Uk]=!1}}function Hd(t,e,n,r){for(var i=0,a=e.length;i<a;i++){var o=e[i];if(t[o.brushType](r,n,o.selectors,o))return!0}}function Gd(t){var e=t.brushSelector;if(b(e)){var n=[];return f(Mk,function(t,r){n[r]=function(n,r,i,a){var o=r.getItemLayout(n);return t[e](o,i,a)}}),n}if(_(e)){var r={};return f(Mk,function(t,n){r[n]=e}),r}return e}function Wd(t,e){var n=t.option.seriesIndex;return null!=n&&"all"!==n&&(y(n)?u(n,e)<0:e!==n)}function qd(t){return new re(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}function Yd(t,e){return r({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new Vr(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,!0)}function Xd(t,e,n,r){(!r||r.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(n)).enableBrush(t.brushOption).updateCovers(t.areas.slice())}function $d(t,e){Gk[t]=e}function Zd(t){return Gk[t]}function Qd(t,e,n){this.model=t,this.ecModel=e,this.api=n}function Kd(t,e,n){this._model=t}function Jd(t,e,n,r){var i=n.calendarModel,a=n.seriesModel,o=i?i.coordinateSystem:a?a.coordinateSystem:null;return o===this?o[t](r):null}function tp(t,e){var n=t.cellSize;y(n)?1===n.length&&(n[1]=n[0]):n=t.cellSize=[n,n];var r=d([0,1],function(t){return function(t,e){return null!=t[M_[e][0]]||null!=t[M_[e][1]]&&null!=t[M_[e][2]]}(e,t)&&(n[t]="auto"),null!=n[t]&&"auto"!==n[t]});bi(t,e,{type:"box",ignoreSize:r})}function ep(t,e){var n=t.getAxisModel(),r=t._percentWindow,i=t._valueWindow;if(r){var a=Kr(i,[0,500]);a=Math.min(a,20);var o=e||0===r[0]&&100===r[1];n.setRange(o?null:+i[0].toFixed(a),o?null:+i[1].toFixed(a))}}function np(t){var e={};return tC(["start","end","startValue","endValue","throttle"],function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}function rp(t,e){var n=t._rangePropMode,r=t.get("rangeMode");tC([["start","startValue"],["end","endValue"]],function(t,i){var a=null!=e[t[0]],o=null!=e[t[1]];a&&!o?n[i]="percent":!a&&o?n[i]="value":r?n[i]=r[i]:a&&(n[i]="percent")})}function ip(t){return"vertical"===t?"ns-resize":"ew-resize"}function ap(t){return t.type+"\0_"+t.id}function op(t){var e=t.getZr();return e[dC]||(e[dC]={})}function sp(t){f(t,function(e,n){e.count||(e.controller.dispose(),delete t[n])})}function up(t,e){t.dispatchAction({type:"dataZoom",batch:e})}function lp(t){return function(e,n,r,i){var a=this._range,o=a.slice(),s=e.axisModels[0];if(s){var u=t(o,s,e,n,r,i);return aO(u,o,[0,100],"all"),this._range=o,a[0]!==o[0]||a[1]!==o[1]?o:void 0}}}function cp(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}function hp(t,e,n,r){for(var i=e.targetVisuals[r],a=yT.prepareVisualTypes(i),o={color:t.getData().getVisual("color")},s=0,u=a.length;s<u;s++){var l=a[s],c=i["opacity"===l?"__alphaForOpacity":l];c&&c.applyVisual(n,function(t){return o[t]},function(t,e){o[t]=e})}return o.color}function fp(t,e,n){if(n[0]===n[1])return n.slice();for(var r=(n[1]-n[0])/200,i=n[0],a=[],o=0;o<=200&&i<n[1];o++)a.push(i),i+=r;return a.push(n[1]),a}function dp(t,e,n){var r=t.option,i=r.align;if(null!=i&&"auto"!==i)return i;for(var a={width:e.getWidth(),height:e.getHeight()},o="horizontal"===r.orient?1:0,s=[["left","right","width"],["top","bottom","height"]],u=s[o],l=[0,null,10],c={},h=0;h<3;h++)c[s[1-o][h]]=l[h],c[u[h]]=2===h?n[0]:r[u[h]];var f=[["x","width",3],["y","height",0]][o],d=yi(c,a,r.padding);return u[(d.margin[f[2]]||0)+d[f[0]]+.5*d[f[1]]<.5*a[f[1]]?0:1]}function pp(t){return f(t||[],function(e){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null)}),t}function gp(t,e,n,r){return new Uy({shape:{points:t},draggable:!!n,cursor:e,drift:n,onmousemove:function(t){$g(t.event)},ondragend:r})}function vp(t){var e=t.get("hoverLinkOnHandle");return!!(null==e?t.get("realtime"):e)}function mp(t){return"vertical"===t?"ns-resize":"ew-resize"}function yp(t,e){var n=t.inverse;("vertical"===t.orient?!n:n)&&e.reverse()}function _p(t){on(t,"label",["show"])}function bp(t,e,n,r,i,a){var o=[],s=No(e,r)?e.getCalculationInfo("stackResultDimension"):r,u=Op(e,s,t),l=e.indicesOfNearest(s,u)[0];o[i]=e.get(n,l),o[a]=e.get(r,l);var c=Zr(e.get(r,l));return(c=Math.min(c,20))>=0&&(o[a]=+o[a].toFixed(c)),o}function xp(t,e){var r=t.getData(),i=t.coordinateSystem;if(e&&!function(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}(e)&&!y(e.coord)&&i){var a=i.dimensions,o=wp(e,r,i,t);if((e=n(e)).type&&WC[e.type]&&o.baseAxis&&o.valueAxis){var s=HC(a,o.baseAxis.dim),u=HC(a,o.valueAxis.dim);e.coord=WC[e.type](r,o.baseDataDim,o.valueDataDim,s,u),e.value=e.coord[u]}else{for(var l=[null!=e.xAxis?e.xAxis:e.radiusAxis,null!=e.yAxis?e.yAxis:e.angleAxis],c=0;c<2;c++)WC[l[c]]&&(l[c]=Op(r,r.mapDimension(a[c]),l[c]));e.coord=l}}return e}function wp(t,e,n,r){var i={};return null!=t.valueIndex||null!=t.valueDim?(i.valueDataDim=null!=t.valueIndex?e.getDimension(t.valueIndex):t.valueDim,i.valueAxis=n.getAxis(function(t,e){var n=t.getData(),r=n.dimensions;e=n.getDimension(e);for(var i=0;i<r.length;i++){var a=n.getDimensionInfo(r[i]);if(a.name===e)return a.coordDim}}(r,i.valueDataDim)),i.baseAxis=n.getOtherAxis(i.valueAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim)):(i.baseAxis=r.getBaseAxis(),i.valueAxis=n.getOtherAxis(i.baseAxis),i.baseDataDim=e.mapDimension(i.baseAxis.dim),i.valueDataDim=e.mapDimension(i.valueAxis.dim)),i}function Sp(t,e){return!(t&&t.containData&&e.coord&&!function(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}(e))||t.containData(e.coord)}function Tp(t,e,n,r){return r<2?t.coord&&t.coord[r]:t.value}function Op(t,e,n){if("average"===n){var r=0,i=0;return t.each(e,function(t,e){isNaN(t)||(r+=t,i++)}),r/i}return"median"===n?t.getMedian(e):t.getDataExtent(e,!0)["max"===n?1:0]}function Mp(t,e,n){var r=e.coordinateSystem;t.each(function(i){var a,o=t.getItemModel(i),s=Yr(o.get("x"),n.getWidth()),u=Yr(o.get("y"),n.getHeight());if(isNaN(s)||isNaN(u)){if(e.getMarkerPosition)a=e.getMarkerPosition(t.getValues(t.dimensions,i));else if(r){var l=t.get(r.dimensions[0],i),c=t.get(r.dimensions[1],i);a=r.dataToPoint([l,c])}}else a=[s,u];isNaN(s)||(a[0]=s),isNaN(u)||(a[1]=u),t.setItemLayout(i,a)})}function kp(t,e,n){var r;r=t?d(t&&t.dimensions,function(t){return o({name:t},e.getData().getDimensionInfo(e.getData().mapDimension(t))||{})}):[{name:"value",type:"float"}];var i=new jx(r,n),a=d(n.get("data"),m(xp,e));return t&&(a=g(a,m(Sp,t))),i.initData(a,null,t?Tp:function(t){return t.value}),i}function Cp(t){return!isNaN(t)&&!isFinite(t)}function Ep(t,e,n,r){var i=1-t,a=r.dimensions[t];return Cp(e[i])&&Cp(n[i])&&e[t]===n[t]&&r.getAxis(a).containData(e[t])}function Ap(t,e){if("cartesian2d"===t.type){var n=e[0].coord,r=e[1].coord;if(n&&r&&(Ep(1,n,r,t)||Ep(0,n,r,t)))return!0}return Sp(t,e[0])&&Sp(t,e[1])}function Ip(t,e,n,r,i){var a,o=r.coordinateSystem,s=t.getItemModel(e),u=Yr(s.get("x"),i.getWidth()),l=Yr(s.get("y"),i.getHeight());if(isNaN(u)||isNaN(l)){if(r.getMarkerPosition)a=r.getMarkerPosition(t.getValues(t.dimensions,e));else{var c=t.get((f=o.dimensions)[0],e),h=t.get(f[1],e);a=o.dataToPoint([c,h])}if("cartesian2d"===o.type){var f,d=o.getAxis("x"),p=o.getAxis("y");Cp(t.get((f=o.dimensions)[0],e))?a[0]=d.toGlobalCoord(d.getExtent()[n?0:1]):Cp(t.get(f[1],e))&&(a[1]=p.toGlobalCoord(p.getExtent()[n?0:1]))}isNaN(u)||(a[0]=u),isNaN(l)||(a[1]=l)}else a=[u,l];t.setItemLayout(e,a)}function Pp(t,e,n){var r;r=t?d(t&&t.dimensions,function(t){return o({name:t},e.getData().getDimensionInfo(e.getData().mapDimension(t))||{})}):[{name:"value",type:"float"}];var i=new jx(r,n),a=new jx(r,n),s=new jx([],n),u=d(n.get("data"),m(YC,e,t,n));t&&(u=g(u,m(Ap,t)));var l=t?Tp:function(t){return t.value};return i.initData(d(u,function(t){return t[0]}),null,l),a.initData(d(u,function(t){return t[1]}),null,l),s.initData(d(u,function(t){return t[2]})),s.hasItemOption=!0,{from:i,to:a,line:s}}function Lp(t){return!isNaN(t)&&!isFinite(t)}function Dp(t,e,n,r){var i=1-t;return Lp(e[i])&&Lp(n[i])}function jp(t,e){var n=e.coord[0],r=e.coord[1];return!("cartesian2d"!==t.type||!n||!r||!Dp(1,n,r)&&!Dp(0,n,r))||Sp(t,{coord:n,x:e.x0,y:e.y0})||Sp(t,{coord:r,x:e.x1,y:e.y1})}function Rp(t,e,n,r,i){var a,o=r.coordinateSystem,s=t.getItemModel(e),u=Yr(s.get(n[0]),i.getWidth()),l=Yr(s.get(n[1]),i.getHeight());if(isNaN(u)||isNaN(l)){if(r.getMarkerPosition)a=r.getMarkerPosition(t.getValues(n,e));else{var c=[d=t.get(n[0],e),p=t.get(n[1],e)];o.clampData&&o.clampData(c,c),a=o.dataToPoint(c,!0)}if("cartesian2d"===o.type){var h=o.getAxis("x"),f=o.getAxis("y"),d=t.get(n[0],e),p=t.get(n[1],e);Lp(d)?a[0]=h.toGlobalCoord(h.getExtent()["x0"===n[0]?0:1]):Lp(p)&&(a[1]=f.toGlobalCoord(f.getExtent()["y0"===n[1]?0:1]))}isNaN(u)||(a[0]=u),isNaN(l)||(a[1]=l)}else a=[u,l];return a}function Np(t){var e=t.itemStyle||(t.itemStyle={}),n=e.emphasis||(e.emphasis={}),r=t.label||t.label||{},i=r.normal||(r.normal={}),a={normal:1,emphasis:1};f(r,function(t,e){a[e]||Bp(i,e)||(i[e]=t)}),n.label&&!Bp(r,"emphasis")&&(r.emphasis=n.label,delete n.label)}function Bp(t,e){return t.hasOwnProperty(e)}function Fp(t,e,r,i){return ar(t.get(e).replace(/^path:\/\//,""),n(i||{}),new re(r[0],r[1],r[2],r[3]),"center")}function Up(t,e,n,i,a,o){var s=e.get("color");a?(a.setColor(s),n.add(a),o&&o.onUpdate(a)):((a=hs(t.get("symbol"),-1,-1,2,2,s)).setStyle("strokeNoScale",!0),n.add(a),o&&o.onCreate(a));var u=e.getItemStyle(["color","symbol","symbolSize"]);a.setStyle(u),i=r({rectHover:!0,z2:100},i,!0);var l=t.get("symbolSize");(l=l instanceof Array?l.slice():[+l,+l])[0]/=2,l[1]/=2,i.scale=l;var c=t.get("symbolOffset");if(c){var h=i.position=i.position||[0,0];h[0]+=Yr(c[0],l[0]),h[1]+=Yr(c[1],l[1])}var f=t.get("symbolRotate");return i.rotation=(f||0)*Math.PI/180||0,a.attr(i),a.updateTransform(),a}function zp(t,e,n,r,i){if(!t.dragging){var a=r.getModel("checkpointStyle"),o=n.dataToCoord(r.getData().get(["value"],e));i||!a.get("animation",!0)?t.attr({position:[o,0]}):(t.stopAnimation(!0),t.animateTo({position:[o,0]},a.get("animationDuration",!0),a.get("animationEasing",!0)))}}function Vp(t){this.model=t}function Hp(t){this.model=t}function Gp(t){var e=function(t){var e={},n=[],r=[];return t.eachRawSeries(function(t){var i=t.coordinateSystem;if(!i||"cartesian2d"!==i.type&&"polar"!==i.type)n.push(t);else{var a=i.getBaseAxis();if("category"===a.type){var o=a.dim+"_"+a.index;e[o]||(e[o]={categoryAxis:a,valueAxis:i.getOtherAxis(a),series:[]},r.push({axisDim:a.dim,axisIndex:a.index})),e[o].series.push(t)}else n.push(t)}}),{seriesGroupByCategoryAxis:e,other:n,meta:r}}(t);return{value:g([function(t){var e=[];return f(t,function(t,n){var r=t.categoryAxis,i=t.valueAxis.dim,a=[" "].concat(d(t.series,function(t){return t.name})),o=[r.model.getCategories()];f(t.series,function(t){o.push(t.getRawData().mapArray(i,function(t){return t}))});for(var s=[a.join(lE)],u=0;u<o[0].length;u++){for(var l=[],c=0;c<o.length;c++)l.push(o[c][u]);s.push(l.join(lE))}e.push(s.join("\n"))}),e.join("\n\n"+uE+"\n\n")}(e.seriesGroupByCategoryAxis),d(e.other,function(t){var e=t.getRawData(),n=[t.name],r=[];return e.each(e.dimensions,function(){for(var t=arguments.length,i=e.getName(arguments[t-1]),a=0;a<t-1;a++)r[a]=arguments[a];n.push((i?i+lE:"")+r.join(lE))}),n.join("\n")}).join("\n\n"+uE+"\n\n")],function(t){return t.replace(/[\n\t\s]/g,"")}).join("\n\n"+uE+"\n\n"),meta:e.meta}}function Wp(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function qp(t,e){var n={series:[]};return f(t.split(new RegExp("\n*"+uE+"\n*","g")),function(t,r){if(function(t){if(t.slice(0,t.indexOf("\n")).indexOf(lE)>=0)return!0}(t)){var i=function(t){for(var e=t.split(/\n+/g),n=[],r=d(Wp(e.shift()).split(cE),function(t){return{name:t,data:[]}}),i=0;i<e.length;i++){var a=Wp(e[i]).split(cE);n.push(a.shift());for(var o=0;o<a.length;o++)r[o]&&(r[o].data[i]=a[o])}return{series:r,categories:n}}(t),a=e[r],o=a.axisDim+"Axis";a&&(n[o]=n[o]||[],n[o][a.axisIndex]={data:i.categories},n.series=n.series.concat(i.series))}else i=function(t){for(var e=t.split(/\n+/g),n=Wp(e.shift()),r=[],i=0;i<e.length;i++){var a,o=Wp(e[i]).split(cE),s="",u=!1;isNaN(o[0])?(u=!0,s=o[0],o=o.slice(1),r[i]={name:s,value:[]},a=r[i].value):a=r[i]=[];for(var l=0;l<o.length;l++)a.push(+o[l]);1===a.length&&(u?r[i].value=a[0]:r[i]=a[0])}return{name:n,data:r}}(t),n.series.push(i)}),n}function Yp(t){this._dom=null,this.model=t}function Xp(t){var e=t[fE];return e||(e=t[fE]=[{}]),e}function $p(t,e,n){(this._brushController=new kc(n.getZr())).on("brush",v(this._onBrush,this)).mount()}function Zp(t){var e={};return f(["xAxisIndex","yAxisIndex"],function(n){e[n]=t[n],null==e[n]&&(e[n]="all"),(!1===e[n]||"none"===e[n])&&(e[n]=[])}),e}function Qp(t){this.model=t}function Kp(t){return mE(t)}function Jp(t){return parseInt(t,10)}function tg(t,e){(function(){if(!bE&&xE){bE=!0;var t=xE.styleSheets;t.length<31?xE.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):t[0].addRule(".zrvml","behavior:url(#default#VML)")}})(),this.root=t,this.storage=e;var n=document.createElement("div"),r=document.createElement("div");n.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",r.style.cssText="position:absolute;left:0;top:0;",t.appendChild(n),this._vmlRoot=r,this._vmlViewport=n,this.resize();var i=e.delFromStorage,a=e.addToStorage;e.delFromStorage=function(t){i.call(e,t),t&&t.onRemove&&t.onRemove(r)},e.addToStorage=function(t){t.onAdd&&t.onAdd(r),a.call(e,t)},this._firstPaint=!0}function eg(t){return document.createElementNS(QE,t)}function ng(t){return eA(1e4*t)/1e4}function rg(t){return t<sA&&t>-sA}function ig(t,e){e&&ag(t,"transform","matrix("+JE.call(e,",")+")")}function ag(t,e,n){(!n||"linear"!==n.type&&"radial"!==n.type)&&("string"==typeof n&&n.indexOf("NaN")>-1&&console.log(n),t.setAttribute(e,n))}function og(t,e,n,r){if(function(t,e){var n=e?t.textFill:t.fill;return null!=n&&n!==tA}(e,n)){var i=n?e.textFill:e.fill;i="transparent"===i?tA:i,"none"!==t.getAttribute("clip-path")&&i===tA&&(i="rgba(0, 0, 0, 0.002)"),ag(t,"fill",i),ag(t,"fill-opacity",null!=e.fillOpacity?e.fillOpacity*e.opacity:e.opacity)}else ag(t,"fill",tA);if(function(t,e){var n=e?t.textStroke:t.stroke;return null!=n&&n!==tA}(e,n)){var a=n?e.textStroke:e.stroke;ag(t,"stroke",a="transparent"===a?tA:a),ag(t,"stroke-width",(n?e.textStrokeWidth:e.lineWidth)/(!n&&e.strokeNoScale?r.getLineScale():1)),ag(t,"paint-order",n?"stroke":"fill"),ag(t,"stroke-opacity",null!=e.strokeOpacity?e.strokeOpacity:e.opacity),e.lineDash?(ag(t,"stroke-dasharray",e.lineDash.join(",")),ag(t,"stroke-dashoffset",eA(e.lineDashOffset||0))):ag(t,"stroke-dasharray",""),e.lineCap&&ag(t,"stroke-linecap",e.lineCap),e.lineJoin&&ag(t,"stroke-linejoin",e.lineJoin),e.miterLimit&&ag(t,"stroke-miterlimit",e.miterLimit)}else ag(t,"stroke",tA)}function sg(t){return"middle"===t?"middle":"bottom"===t?"after-edge":"hanging"}function ug(){}function lg(t,e,n,r){for(var i=0,a=e.length,o=0,s=0;i<a;i++){var u=e[i];if(u.removed){for(var l=[],c=s;c<s+u.count;c++)l.push(c);u.indices=l,s+=u.count}else{for(l=[],c=o;c<o+u.count;c++)l.push(c);u.indices=l,o+=u.count,u.added||(s+=u.count)}}return e}function cg(t){return{newPos:t.newPos,components:t.components.slice(0)}}function hg(t,e,n,r,i){this._zrId=t,this._svgRoot=e,this._tagNames="string"==typeof n?[n]:n,this._markLabel=r,this._domName=i||"_dom",this.nextId=0}function fg(t,e){hg.call(this,t,e,["linearGradient","radialGradient"],"__gradient_in_use__")}function dg(t,e){hg.call(this,t,e,"clipPath","__clippath_in_use__")}function pg(t,e){hg.call(this,t,e,["filter"],"__filter_in_use__","_shadowDom")}function gg(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY||t.textShadowBlur||t.textShadowOffsetX||t.textShadowOffsetY)}function vg(t){return parseInt(t,10)}function mg(t){return t instanceof Zn?uA:t instanceof Xe?lA:t instanceof Py?cA:uA}function yg(t,e){return e&&t&&e.parentNode!==t}function _g(t,e,n){if(yg(t,e)&&n){var r=n.nextSibling;r?t.insertBefore(e,r):t.appendChild(e)}}function bg(t,e){if(yg(t,e)){var n=t.firstChild;n?t.insertBefore(e,n):t.appendChild(e)}}function xg(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)}function wg(t){return t.__textSvgEl}function Sg(t){return t.__svgEl}var Tg=2311,Og=function(){return Tg++},Mg="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:function(t){var e={},n=t.match(/Firefox\/([\d.]+)/),r=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),i=t.match(/Edge\/([\d.]+)/),a=/micromessenger/i.test(t);return n&&(e.firefox=!0,e.version=n[1]),r&&(e.ie=!0,e.version=r[1]),i&&(e.edge=!0,e.version=i[1]),a&&(e.weChat=!0),{browser:e,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!e.ie&&!e.edge,pointerEventsSupported:"onpointerdown"in window&&(e.edge||e.ie&&e.version>=11),domSupported:"undefined"!=typeof document}}(navigator.userAgent),kg={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},Cg={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},Eg=Object.prototype.toString,Ag=Array.prototype,Ig=Ag.forEach,Pg=Ag.filter,Lg=Ag.slice,Dg=Ag.map,jg=Ag.reduce,Rg={},Ng=function(){return Rg.createCanvas()};Rg.createCanvas=function(){return document.createElement("canvas")};var Bg,Fg="__ec_primitive__";j.prototype={constructor:j,get:function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},set:function(t,e){return this.data[t]=e},each:function(t,e){for(var n in void 0!==e&&(t=v(t,e)),this.data)this.data.hasOwnProperty(n)&&t(this.data[n],n)},removeKey:function(t){delete this.data[t]}};var Ug=(Object.freeze||Object)({$override:e,clone:n,merge:r,mergeAll:i,extend:a,defaults:o,createCanvas:Ng,getContext:s,indexOf:u,inherits:l,mixin:c,isArrayLike:h,each:f,map:d,reduce:p,filter:g,find:function(t,e,n){if(t&&e)for(var r=0,i=t.length;r<i;r++)if(e.call(n,t[r],r,t))return t[r]},bind:v,curry:m,isArray:y,isFunction:_,isString:b,isObject:x,isBuiltInObject:w,isTypedArray:S,isDom:T,eqNaN:O,retrieve:M,retrieve2:k,retrieve3:C,slice:E,normalizeCssArray:A,assert:I,trim:P,setAsPrimitive:L,isPrimitive:D,createHashMap:R,concatArray:N,noop:B}),zg="undefined"==typeof Float32Array?Array:Float32Array,Vg=Z,Hg=Q,Gg=(Object.freeze||Object)({create:F,copy:U,clone:z,set:V,add:H,scaleAndAdd:G,sub:W,len:q,length:q,lenSquare:Y,lengthSquare:Y,mul:function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},div:function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},scale:X,normalize:$,distance:Z,dist:Vg,distanceSquare:Q,distSquare:Hg,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},lerp:K,applyTransform:J,min:tt,max:et});nt.prototype={constructor:nt,_dragStart:function(t){var e=t.target;e&&e.draggable&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.dispatchToElement(rt(e,t),"dragstart",t.event))},_drag:function(t){var e=this._draggingTarget;if(e){var n=t.offsetX,r=t.offsetY,i=n-this._x,a=r-this._y;this._x=n,this._y=r,e.drift(i,a,t),this.dispatchToElement(rt(e,t),"drag",t.event);var o=this.findHover(n,r,e).target,s=this._dropTarget;this._dropTarget=o,e!==o&&(s&&o!==s&&this.dispatchToElement(rt(s,t),"dragleave",t.event),o&&o!==s&&this.dispatchToElement(rt(o,t),"dragenter",t.event))}},_dragEnd:function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.dispatchToElement(rt(e,t),"dragend",t.event),this._dropTarget&&this.dispatchToElement(rt(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null}};var Wg=Array.prototype.slice,qg=function(t){this._$handlers={},this._$eventProcessor=t};qg.prototype={constructor:qg,one:function(t,e,n,r){var i=this._$handlers;if("function"==typeof e&&(r=n,n=e,e=null),!n||!t)return this;e=it(this,e),i[t]||(i[t]=[]);for(var a=0;a<i[t].length;a++)if(i[t][a].h===n)return this;return i[t].push({h:n,one:!0,query:e,ctx:r||this}),this},on:function(t,e,n,r){var i=this._$handlers;if("function"==typeof e&&(r=n,n=e,e=null),!n||!t)return this;e=it(this,e),i[t]||(i[t]=[]);for(var a=0;a<i[t].length;a++)if(i[t][a].h===n)return this;return i[t].push({h:n,one:!1,query:e,ctx:r||this}),this},isSilent:function(t){var e=this._$handlers;return e[t]&&e[t].length},off:function(t,e){var n=this._$handlers;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var r=[],i=0,a=n[t].length;i<a;i++)n[t][i].h!==e&&r.push(n[t][i]);n[t]=r}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this},trigger:function(t){var e=this._$handlers[t],n=this._$eventProcessor;if(e){var r=arguments,i=r.length;i>3&&(r=Wg.call(r,1));for(var a=e.length,o=0;o<a;){var s=e[o];if(n&&n.filter&&null!=s.query&&!n.filter(t,s.query))o++;else{switch(i){case 1:s.h.call(s.ctx);break;case 2:s.h.call(s.ctx,r[1]);break;case 3:s.h.call(s.ctx,r[1],r[2]);break;default:s.h.apply(s.ctx,r)}s.one?(e.splice(o,1),a--):o++}}}return n&&n.afterTrigger&&n.afterTrigger(t),this},triggerWithContext:function(t){var e=this._$handlers[t],n=this._$eventProcessor;if(e){var r=arguments,i=r.length;i>4&&(r=Wg.call(r,1,r.length-1));for(var a=r[r.length-1],o=e.length,s=0;s<o;){var u=e[s];if(n&&n.filter&&null!=u.query&&!n.filter(t,u.query))s++;else{switch(i){case 1:u.h.call(a);break;case 2:u.h.call(a,r[1]);break;case 3:u.h.call(a,r[1],r[2]);break;default:u.h.apply(a,r)}u.one?(e.splice(s,1),o--):s++}}}return n&&n.afterTrigger&&n.afterTrigger(t),this}};var Yg="undefined"!=typeof window&&!!window.addEventListener,Xg=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,$g=Yg?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0},Zg="silent";ft.prototype.dispose=function(){};var Qg=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Kg=function(t,e,n,r){qg.call(this),this.storage=t,this.painter=e,this.painterRoot=r,n=n||new ft,this.proxy=null,this._hovered={},nt.call(this),this.setHandlerProxy(n)};Kg.prototype={constructor:Kg,setHandlerProxy:function(t){this.proxy&&this.proxy.dispose(),t&&(f(Qg,function(e){t.on&&t.on(e,this[e],this)},this),t.handler=this),this.proxy=t},mousemove:function(t){var e=t.zrX,n=t.zrY,r=this._hovered,i=r.target;i&&!i.__zr&&(i=(r=this.findHover(r.x,r.y)).target);var a=this._hovered=this.findHover(e,n),o=a.target,s=this.proxy;s.setCursor&&s.setCursor(o?o.cursor:"default"),i&&o!==i&&this.dispatchToElement(r,"mouseout",t),this.dispatchToElement(a,"mousemove",t),o&&o!==i&&this.dispatchToElement(a,"mouseover",t)},mouseout:function(t){this.dispatchToElement(this._hovered,"mouseout",t);var e,n=t.toElement||t.relatedTarget;do{n=n&&n.parentNode}while(n&&9!=n.nodeType&&!(e=n===this.painterRoot));!e&&this.trigger("globalout",{event:t})},resize:function(t){this._hovered={}},dispatch:function(t,e){var n=this[t];n&&n.call(this,e)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},dispatchToElement:function(t,e,n){var r=(t=t||{}).target;if(!r||!r.silent){for(var i="on"+e,a=function(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:ht}}(e,t,n);r&&(r[i]&&(a.cancelBubble=r[i].call(r,a)),r.trigger(e,a),r=r.parent,!a.cancelBubble););a.cancelBubble||(this.trigger(e,a),this.painter&&this.painter.eachOtherLayer(function(t){"function"==typeof t[i]&&t[i].call(t,a),t.trigger&&t.trigger(e,a)}))}},findHover:function(t,e,n){for(var r=this.storage.getDisplayList(),i={x:t,y:e},a=r.length-1;a>=0;a--){var o;if(r[a]!==n&&!r[a].ignore&&(o=dt(r[a],t,e))&&(!i.topTarget&&(i.topTarget=r[a]),o!==Zg)){i.target=r[a];break}}return i}},f(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){Kg.prototype[t]=function(e){var n=this.findHover(e.zrX,e.zrY),r=n.target;if("mousedown"===t)this._downEl=r,this._downPoint=[e.zrX,e.zrY],this._upEl=r;else if("mouseup"===t)this._upEl=r;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||Vg(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(n,t,e)}}),c(Kg,qg),c(Kg,nt);var Jg="undefined"==typeof Float32Array?Array:Float32Array,tv=(Object.freeze||Object)({create:pt,identity:gt,copy:vt,mul:mt,translate:yt,rotate:_t,scale:bt,invert:xt,clone:wt}),ev=gt,nv=5e-5,rv=function(t){(t=t||{}).position||(this.position=[0,0]),null==t.rotation&&(this.rotation=0),t.scale||(this.scale=[1,1]),this.origin=this.origin||null},iv=rv.prototype;iv.transform=null,iv.needLocalTransform=function(){return St(this.rotation)||St(this.position[0])||St(this.position[1])||St(this.scale[0]-1)||St(this.scale[1]-1)};var av=[];iv.updateTransform=function(){var t=this.parent,e=t&&t.transform,n=this.needLocalTransform(),r=this.transform;if(n||e){r=r||pt(),n?this.getLocalTransform(r):ev(r),e&&(n?mt(r,t.transform,r):vt(r,t.transform)),this.transform=r;var i=this.globalScaleRatio;if(null!=i&&1!==i){this.getGlobalScale(av);var a=av[0]<0?-1:1,o=av[1]<0?-1:1,s=((av[0]-a)*i+a)/av[0]||0,u=((av[1]-o)*i+o)/av[1]||0;r[0]*=s,r[1]*=s,r[2]*=u,r[3]*=u}this.invTransform=this.invTransform||pt(),xt(this.invTransform,r)}else r&&ev(r)},iv.getLocalTransform=function(t){return rv.getLocalTransform(this,t)},iv.setTransform=function(t){var e=this.transform,n=t.dpr||1;e?t.setTransform(n*e[0],n*e[1],n*e[2],n*e[3],n*e[4],n*e[5]):t.setTransform(n,0,0,n,0,0)},iv.restoreTransform=function(t){var e=t.dpr||1;t.setTransform(e,0,0,e,0,0)};var ov=[],sv=pt();iv.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],r=this.position,i=this.scale;St(e-1)&&(e=Math.sqrt(e)),St(n-1)&&(n=Math.sqrt(n)),t[0]<0&&(e=-e),t[3]<0&&(n=-n),r[0]=t[4],r[1]=t[5],i[0]=e,i[1]=n,this.rotation=Math.atan2(-t[1]/n,t[0]/e)}},iv.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(mt(ov,t.invTransform,e),e=ov);var n=this.origin;n&&(n[0]||n[1])&&(sv[4]=n[0],sv[5]=n[1],mt(ov,e,sv),ov[4]-=n[0],ov[5]-=n[1],e=ov),this.setLocalTransform(e)}},iv.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},iv.transformCoordToLocal=function(t,e){var n=[t,e],r=this.invTransform;return r&&J(n,n,r),n},iv.transformCoordToGlobal=function(t,e){var n=[t,e],r=this.transform;return r&&J(n,n,r),n},rv.getLocalTransform=function(t,e){ev(e=e||[]);var n=t.origin,r=t.scale||[1,1],i=t.rotation||0,a=t.position||[0,0];return n&&(e[4]-=n[0],e[5]-=n[1]),bt(e,e,r),i&&_t(e,e,i),n&&(e[4]+=n[0],e[5]+=n[1]),e[4]+=a[0],e[5]+=a[1],e};var uv={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-uv.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*uv.bounceIn(2*t):.5*uv.bounceOut(2*t-1)+.5}};Tt.prototype={constructor:Tt,step:function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),this._paused)this._pausedTime+=e;else{var n=(t-this._startTime-this._pausedTime)/this._life;if(!(n<0)){n=Math.min(n,1);var r=this.easing,i="string"==typeof r?uv[r]:r,a="function"==typeof i?i(n):n;return this.fire("frame",a),1==n?this.loop?(this.restart(t),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(t){this._startTime=t-(t-this._startTime-this._pausedTime)%this._life+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(t,e){this[t="on"+t]&&this[t](this._target,e)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var lv=function(){this.head=null,this.tail=null,this._len=0},cv=lv.prototype;cv.insert=function(t){var e=new hv(t);return this.insertEntry(e),e},cv.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},cv.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},cv.len=function(){return this._len},cv.clear=function(){this.head=this.tail=null,this._len=0};var hv=function(t){this.value=t},fv=function(t){this._list=new lv,this._map={},this._maxSize=t||10,this._lastRemovedEntry=null},dv=fv.prototype;dv.put=function(t,e){var n=this._list,r=this._map,i=null;if(null==r[t]){var a=n.len(),o=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var s=n.head;n.remove(s),delete r[s.key],i=s.value,this._lastRemovedEntry=s}o?o.value=e:o=new hv(e),o.key=t,n.insertEntry(o),r[t]=o}return i},dv.get=function(t){var e=this._map[t],n=this._list;if(null!=e)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},dv.clear=function(){this._list.clear(),this._map={}};var pv={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]},gv=new fv(20),vv=null,mv=(Object.freeze||Object)({parse:Dt,lift:Rt,toHex:Nt,fastLerp:Bt,fastMapToColor:Bt,lerp:Ft,mapToColor:Ft,modifyHSL:Ut,modifyAlpha:zt,stringify:Vt}),yv=Array.prototype.slice,_v=function(t,e,n,r){this._tracks={},this._target=t,this._loop=e||!1,this._getter=n||Ht,this._setter=r||Gt,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};_v.prototype={when:function(t,e){var n=this._tracks;for(var r in e)if(e.hasOwnProperty(r)){if(!n[r]){n[r]=[];var i=this._getter(this._target,r);if(null==i)continue;0!==t&&n[r].push({time:0,value:Kt(i)})}n[r].push({time:t,value:e[r]})}return this},during:function(t){return this._onframeList.push(t),this},pause:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].pause();this._paused=!0},resume:function(){for(var t=0;t<this._clipList.length;t++)this._clipList[t].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var t=this._doneList,e=t.length,n=0;n<e;n++)t[n].call(this)},start:function(t,e){var n,r=this,i=0;for(var a in this._tracks)if(this._tracks.hasOwnProperty(a)){var o=te(this,t,function(){--i||r._doneCallback()},this._tracks[a],a,e);o&&(this._clipList.push(o),i++,this.animation&&this.animation.addClip(o),n=o)}if(n){var s=n.onframe;n.onframe=function(t,e){s(t,e);for(var n=0;n<r._onframeList.length;n++)r._onframeList[n](t,e)}}return i||this._doneCallback(),this},stop:function(t){for(var e=this._clipList,n=this.animation,r=0;r<e.length;r++){var i=e[r];t&&i.onframe(this._target,1),n&&n.removeClip(i)}e.length=0},delay:function(t){return this._delay=t,this},done:function(t){return t&&this._doneList.push(t),this},getClips:function(){return this._clipList}};var bv=1;"undefined"!=typeof window&&(bv=Math.max(window.devicePixelRatio||1,1));var xv=bv,wv=function(){this.animators=[]};wv.prototype={constructor:wv,animate:function(t,e){var n,r=!1,i=this,a=this.__zr;if(t){var o=t.split("."),s=i;r="shape"===o[0];for(var l=0,c=o.length;l<c;l++)s&&(s=s[o[l]]);s&&(n=s)}else n=i;if(n){var h=i.animators,f=new _v(n,e);return f.during(function(t){i.dirty(r)}).done(function(){h.splice(u(h,f),1)}),h.push(f),a&&a.animation.addAnimator(f),f}},stopAnimation:function(t){for(var e=this.animators,n=e.length,r=0;r<n;r++)e[r].stop(t);return e.length=0,this},animateTo:function(t,e,n,r,i,a){ee(this,t,e,n,r,i,a)},animateFrom:function(t,e,n,r,i,a){ee(this,t,e,n,r,i,a,!0)}};var Sv=function(t){rv.call(this,t),qg.call(this,t),wv.call(this,t),this.id=t.id||Og()};Sv.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(t,e){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=t,n[5]+=e,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(t,e){},attrKV:function(t,e){if("position"===t||"scale"===t||"origin"===t){if(e){var n=this[t];n||(n=this[t]=[]),n[0]=e[0],n[1]=e[1]}}else this[t]=e},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(x(t))for(var n in t)t.hasOwnProperty(n)&&this.attrKV(n,t[n]);return this.dirty(!1),this},setClipPath:function(t){var e=this.__zr;e&&t.addSelfToZr(e),this.clipPath&&this.clipPath!==t&&this.removeClipPath(),this.clipPath=t,t.__zr=e,t.__clipTarget=this,this.dirty(!1)},removeClipPath:function(){var t=this.clipPath;t&&(t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this.clipPath&&this.clipPath.addSelfToZr(t)},removeSelfFromZr:function(t){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this.clipPath&&this.clipPath.removeSelfFromZr(t)}},c(Sv,wv),c(Sv,rv),c(Sv,qg);var Tv=J,Ov=Math.min,Mv=Math.max;re.prototype={constructor:re,union:function(t){var e=Ov(t.x,this.x),n=Ov(t.y,this.y);this.width=Mv(t.x+t.width,this.x+this.width)-e,this.height=Mv(t.y+t.height,this.y+this.height)-n,this.x=e,this.y=n},applyTransform:function(){var t=[],e=[],n=[],r=[];return function(i){if(i){t[0]=n[0]=this.x,t[1]=r[1]=this.y,e[0]=r[0]=this.x+this.width,e[1]=n[1]=this.y+this.height,Tv(t,t,i),Tv(e,e,i),Tv(n,n,i),Tv(r,r,i),this.x=Ov(t[0],e[0],n[0],r[0]),this.y=Ov(t[1],e[1],n[1],r[1]);var a=Mv(t[0],e[0],n[0],r[0]),o=Mv(t[1],e[1],n[1],r[1]);this.width=a-this.x,this.height=o-this.y}}}(),calculateTransform:function(t){var e=this,n=t.width/e.width,r=t.height/e.height,i=pt();return yt(i,i,[-e.x,-e.y]),bt(i,i,[n,r]),yt(i,i,[t.x,t.y]),i},intersect:function(t){if(!t)return!1;t instanceof re||(t=re.create(t));var e=this;return!(e.x+e.width<t.x||t.x+t.width<e.x||e.y+e.height<t.y||t.y+t.height<e.y)},contain:function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},clone:function(){return new re(this.x,this.y,this.width,this.height)},copy:function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},re.create=function(t){return new re(t.x,t.y,t.width,t.height)};var kv=function(t){for(var e in Sv.call(this,t=t||{}),t)t.hasOwnProperty(e)&&(this[e]=t[e]);this._children=[],this.__storage=null,this.__dirty=!0};kv.prototype={constructor:kv,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},childOfName:function(t){for(var e=this._children,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},childCount:function(){return this._children.length},add:function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},addBefore:function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var n=this._children,r=n.indexOf(e);r>=0&&(n.splice(r,0,t),this._doAdd(t))}return this},_doAdd:function(t){t.parent&&t.parent.remove(t),t.parent=this;var e=this.__storage,n=this.__zr;e&&e!==t.__storage&&(e.addToStorage(t),t instanceof kv&&t.addChildrenToStorage(e)),n&&n.refresh()},remove:function(t){var e=this.__zr,n=this.__storage,r=this._children,i=u(r,t);return i<0?this:(r.splice(i,1),t.parent=null,n&&(n.delFromStorage(t),t instanceof kv&&t.delChildrenFromStorage(n)),e&&e.refresh(),this)},removeAll:function(){var t,e,n=this._children,r=this.__storage;for(e=0;e<n.length;e++)t=n[e],r&&(r.delFromStorage(t),t instanceof kv&&t.delChildrenFromStorage(r)),t.parent=null;return n.length=0,this},eachChild:function(t,e){for(var n=this._children,r=0;r<n.length;r++)t.call(e,n[r],r);return this},traverse:function(t,e){for(var n=0;n<this._children.length;n++){var r=this._children[n];t.call(e,r),"group"===r.type&&r.traverse(t,e)}return this},addChildrenToStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.addToStorage(n),n instanceof kv&&n.addChildrenToStorage(t)}},delChildrenFromStorage:function(t){for(var e=0;e<this._children.length;e++){var n=this._children[e];t.delFromStorage(n),n instanceof kv&&n.delChildrenFromStorage(t)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(t){for(var e=null,n=new re(0,0,0,0),r=t||this._children,i=[],a=0;a<r.length;a++){var o=r[a];if(!o.ignore&&!o.invisible){var s=o.getBoundingRect(),u=o.getLocalTransform(i);u?(n.copy(s),n.applyTransform(u),(e=e||n.clone()).union(n)):(e=e||s.clone()).union(s)}}return e||n}},l(kv,Sv);var Cv=32,Ev=7,Av=function(){this._roots=[],this._displayList=[],this._displayListLen=0};Av.prototype={constructor:Av,traverse:function(t,e){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,e)},getDisplayList:function(t,e){return e=e||!1,t&&this.updateDisplayList(e),this._displayList},updateDisplayList:function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,r=0,i=e.length;r<i;r++)this._updateAndAddDisplayable(e[r],null,t);n.length=this._displayListLen,Mg.canvasSupported&&ue(n,le)},_updateAndAddDisplayable:function(t,e,n){if(!t.ignore||n){t.beforeUpdate(),t.__dirty&&t.update(),t.afterUpdate();var r=t.clipPath;if(r){e=e?e.slice():[];for(var i=r,a=t;i;)i.parent=a,i.updateTransform(),e.push(i),a=i,i=i.clipPath}if(t.isGroup){for(var o=t._children,s=0;s<o.length;s++){var u=o[s];t.__dirty&&(u.__dirty=!0),this._updateAndAddDisplayable(u,e,n)}t.__dirty=!1}else t.__clipPaths=e,this._displayList[this._displayListLen++]=t}},addRoot:function(t){t.__storage!==this&&(t instanceof kv&&t.addChildrenToStorage(this),this.addToStorage(t),this._roots.push(t))},delRoot:function(t){if(null==t){for(n=0;n<this._roots.length;n++){var e=this._roots[n];e instanceof kv&&e.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(t instanceof Array)for(var n=0,r=t.length;n<r;n++)this.delRoot(t[n]);else{var i=u(this._roots,t);i>=0&&(this.delFromStorage(t),this._roots.splice(i,1),t instanceof kv&&t.delChildrenFromStorage(this))}},addToStorage:function(t){return t&&(t.__storage=this,t.dirty(!1)),this},delFromStorage:function(t){return t&&(t.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:le};var Iv={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1},Pv=function(t,e,n){return Iv.hasOwnProperty(e)?n*=t.dpr:n},Lv=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],Dv=function(t){this.extendFrom(t,!1)};Dv.prototype={constructor:Dv,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(t,e,n){for(var r=this,i=n&&n.style,a=!i,o=0;o<Lv.length;o++){var s=Lv[o],u=s[0];(a||r[u]!==i[u])&&(t[u]=Pv(t,u,r[u]||s[1]))}(a||r.fill!==i.fill)&&(t.fillStyle=r.fill),(a||r.stroke!==i.stroke)&&(t.strokeStyle=r.stroke),(a||r.opacity!==i.opacity)&&(t.globalAlpha=null==r.opacity?1:r.opacity),(a||r.blend!==i.blend)&&(t.globalCompositeOperation=r.blend||"source-over"),this.hasStroke()&&(t.lineWidth=r.lineWidth/(this.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1))},hasFill:function(){var t=this.fill;return null!=t&&"none"!==t},hasStroke:function(){var t=this.stroke;return null!=t&&"none"!==t&&this.lineWidth>0},extendFrom:function(t,e){if(t)for(var n in t)!t.hasOwnProperty(n)||!0!==e&&(!1===e?this.hasOwnProperty(n):null==t[n])||(this[n]=t[n])},set:function(t,e){"string"==typeof t?this[t]=e:this.extendFrom(t,!0)},clone:function(){var t=new this.constructor;return t.extendFrom(this,!0),t},getGradient:function(t,e,n){for(var r=("radial"===e.type?function(t,e,n){var r=n.width,i=n.height,a=Math.min(r,i),o=null==e.x?.5:e.x,s=null==e.y?.5:e.y,u=null==e.r?.5:e.r;return e.global||(o=o*r+n.x,s=s*i+n.y,u*=a),t.createRadialGradient(o,s,0,o,s,u)}:function(t,e,n){var r=null==e.x?0:e.x,i=null==e.x2?1:e.x2,a=null==e.y?0:e.y,o=null==e.y2?0:e.y2;return e.global||(r=r*n.width+n.x,i=i*n.width+n.x,a=a*n.height+n.y,o=o*n.height+n.y),r=isNaN(r)?0:r,i=isNaN(i)?1:i,a=isNaN(a)?0:a,o=isNaN(o)?0:o,t.createLinearGradient(r,a,i,o)})(t,e,n),i=e.colorStops,a=0;a<i.length;a++)r.addColorStop(i[a].offset,i[a].color);return r}};for(var jv=Dv.prototype,Rv=0;Rv<Lv.length;Rv++){var Nv=Lv[Rv];Nv[0]in jv||(jv[Nv[0]]=Nv[1])}Dv.getGradient=jv.getGradient;var Bv=function(t,e){this.image=t,this.repeat=e,this.type="pattern"};Bv.prototype.getCanvasPattern=function(t){return t.createPattern(this.image,this.repeat||"repeat")};var Fv=function(t,e,n){var r;n=n||xv,"string"==typeof t?r=he(t,e,n):x(t)&&(t=(r=t).id),this.id=t,this.dom=r;var i=r.style;i&&(r.onselectstart=ce,i["-webkit-user-select"]="none",i["user-select"]="none",i["-webkit-touch-callout"]="none",i["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",i.padding=0,i.margin=0,i["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=e,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=n};Fv.prototype={constructor:Fv,__dirty:!0,__used:!1,__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var t=this.dpr;this.domBack=he("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!=t&&this.ctxBack.scale(t,t)},resize:function(t,e){var n=this.dpr,r=this.dom,i=r.style,a=this.domBack;i&&(i.width=t+"px",i.height=e+"px"),r.width=t*n,r.height=e*n,a&&(a.width=t*n,a.height=e*n,1!=n&&this.ctxBack.scale(n,n))},clear:function(t,e){var n,r=this.dom,i=this.ctx,a=r.width,o=r.height,s=(e=e||this.clearColor,this.motionBlur&&!t),u=this.lastFrameAlpha,l=this.dpr;if(s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(r,0,0,a/l,o/l)),i.clearRect(0,0,a,o),e&&"transparent"!==e&&(e.colorStops?(n=e.__canvasGradient||Dv.getGradient(i,e,{x:0,y:0,width:a,height:o}),e.__canvasGradient=n):e.image&&(n=Bv.prototype.getCanvasPattern.call(e,i)),i.save(),i.fillStyle=n||e,i.fillRect(0,0,a,o),i.restore()),s){var c=this.domBack;i.save(),i.globalAlpha=u,i.drawImage(c,0,0,a,o),i.restore()}}};var Uv="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){setTimeout(t,16)},zv=new fv(50),Vv={},Hv=0,Gv=5e3,Wv=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,qv="12px sans-serif",Yv={measureText:function(t,e){var n=s();return n.font=e||qv,n.measureText(t)}},Xv={left:1,right:1,center:1},$v={top:1,bottom:1,middle:1},Zv=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],Qv=new re,Kv=function(){};Kv.prototype={constructor:Kv,drawRectText:function(t,e){var n=this.style;e=n.textRect||e,this.__dirty&&Pe(n);var r=n.text;if(null!=r&&(r+=""),qe(r,n)){t.save();var i=this.transform;n.transformText?this.setTransform(t):i&&(Qv.copy(e),Qv.applyTransform(i),e=Qv),De(this,t,r,n,e),t.restore()}}},Ye.prototype={constructor:Ye,type:"displayable",__dirty:!0,invisible:!1,z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(t){},afterBrush:function(t){},brush:function(t,e){},getBoundingRect:function(){},contain:function(t,e){return this.rectContain(t,e)},traverse:function(t,e){t.call(e,this)},rectContain:function(t,e){var n=this.transformCoordToLocal(t,e);return this.getBoundingRect().contain(n[0],n[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(t){return this.animate("style",t)},attrKV:function(t,e){"style"!==t?Sv.prototype.attrKV.call(this,t,e):this.style.set(e)},setStyle:function(t,e){return this.style.set(t,e),this.dirty(!1),this},useStyle:function(t){return this.style=new Dv(t,this),this.dirty(!1),this}},l(Ye,Sv),c(Ye,Kv),Xe.prototype={constructor:Xe,type:"image",brush:function(t,e){var n=this.style,r=n.image;n.bind(t,this,e);var i=this._image=de(r,this._image,this,this.onload);if(i&&ge(i)){var a=n.x||0,o=n.y||0,s=n.width,u=n.height,l=i.width/i.height;if(null==s&&null!=u?s=u*l:null==u&&null!=s?u=s/l:null==s&&null==u&&(s=i.width,u=i.height),this.setTransform(t),n.sWidth&&n.sHeight){var c=n.sx||0,h=n.sy||0;t.drawImage(i,c,h,n.sWidth,n.sHeight,a,o,s,u)}else if(n.sx&&n.sy){var f=s-(c=n.sx),d=u-(h=n.sy);t.drawImage(i,c,h,f,d,a,o,s,u)}else t.drawImage(i,a,o,s,u);null!=n.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))}},getBoundingRect:function(){var t=this.style;return this._rect||(this._rect=new re(t.x||0,t.y||0,t.width||0,t.height||0)),this._rect}},l(Xe,Ye);var Jv=new re(0,0,0,0),tm=new re(0,0,0,0),em=function(t,e,n){this.type="canvas";var r=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=n=a({},n||{}),this.dpr=n.devicePixelRatio||xv,this._singleCanvas=r,this.root=t;var i=t.style;i&&(i["-webkit-tap-highlight-color"]="transparent",i["-webkit-user-select"]=i["user-select"]=i["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var o=this._zlevelList=[],s=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,r){var u=t.width,l=t.height;null!=n.width&&(u=n.width),null!=n.height&&(l=n.height),this.dpr=n.devicePixelRatio||1,t.width=u*this.dpr,t.height=l*this.dpr,this._width=u,this._height=l;var c=new Fv(t,this,this.dpr);c.__builtin__=!0,c.initContext(),s[314159]=c,c.zlevel=314159,o.push(314159),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var h=this._domRoot=function(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","overflow:hidden","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}(this._width,this._height);t.appendChild(h)}this._hoverlayer=null,this._hoverElements=[]};em.prototype={constructor:em,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(t){var e=this.storage.getDisplayList(!0),n=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,t,this._redrawId);for(var r=0;r<n.length;r++){var i=this._layers[n[r]];!i.__builtin__&&i.refresh&&i.refresh(0===r?this._backgroundColor:null)}return this.refreshHover(),this},addHover:function(t,e){if(!t.__hoverMir){var n=new t.constructor({style:t.style,shape:t.shape,z:t.z,z2:t.z2,silent:t.silent});return n.__from=t,t.__hoverMir=n,e&&n.setStyle(e),this._hoverElements.push(n),n}},removeHover:function(t){var e=this._hoverElements,n=u(e,t.__hoverMir);n>=0&&e.splice(n,1),t.__hoverMir=null},clearHover:function(t){for(var e=this._hoverElements,n=0;n<e.length;n++){var r=e[n].__from;r&&(r.__hoverMir=null)}e.length=0},refreshHover:function(){var t=this._hoverElements,e=t.length,n=this._hoverlayer;if(n&&n.clear(),e){ue(t,this.storage.displayableSortFunc),n||(n=this._hoverlayer=this.getLayer(1e5));var r={};n.ctx.save();for(var i=0;i<e;){var a=t[i],o=a.__from;o&&o.__zr?(i++,o.invisible||(a.transform=o.transform,a.invTransform=o.invTransform,a.__clipPaths=o.__clipPaths,this._doPaintEl(a,n,!0,r))):(t.splice(i,1),o.__hoverMir=null,e--)}n.ctx.restore()}},getHoverLayer:function(){return this.getLayer(1e5)},_paintList:function(t,e,n){if(this._redrawId===n){e=e||!1,this._updateLayerStatus(t);var r=this._doPaintList(t,e);if(this._needsManuallyCompositing&&this._compositeManually(),!r){var i=this;Uv(function(){i._paintList(t,e,n)})}}},_compositeManually:function(){var t=this.getLayer(314159).ctx,e=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,e,n),this.eachBuiltinLayer(function(r){r.virtual&&t.drawImage(r.dom,0,0,e,n)})},_doPaintList:function(t,e){for(var n=[],r=0;r<this._zlevelList.length;r++)(o=this._layers[this._zlevelList[r]]).__builtin__&&o!==this._hoverlayer&&(o.__dirty||e)&&n.push(o);for(var i=!0,a=0;a<n.length;a++){var o=n[a],s=o.ctx,u={};s.save();var l=e?o.__startIndex:o.__drawIndex,c=!e&&o.incremental&&Date.now,h=c&&Date.now(),d=o.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(o.__startIndex===o.__endIndex)o.clear(!1,d);else if(l===o.__startIndex){var p=t[l];p.incremental&&p.notClear&&!e||o.clear(!1,d)}-1===l&&(console.error("For some unknown reason. drawIndex is -1"),l=o.__startIndex);for(var g=l;g<o.__endIndex;g++){var v=t[g];if(this._doPaintEl(v,o,e,u),v.__dirty=v.__dirtyText=!1,c&&Date.now()-h>15)break}o.__drawIndex=g,o.__drawIndex<o.__endIndex&&(i=!1),u.prevElClipPaths&&s.restore(),s.restore()}return Mg.wxa&&f(this._layers,function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()}),i},_doPaintEl:function(t,e,n,r){var i=e.ctx,a=t.transform;if((e.__dirty||n)&&!t.invisible&&0!==t.style.opacity&&(!a||a[0]||a[3])&&(!t.culling||!function(t,e,n){return Jv.copy(t.getBoundingRect()),t.transform&&Jv.applyTransform(t.transform),tm.width=e,tm.height=n,!Jv.intersect(tm)}(t,this._width,this._height))){var o=t.__clipPaths;r.prevElClipPaths&&!function(t,e){if(t==e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0}(o,r.prevElClipPaths)||(r.prevElClipPaths&&(e.ctx.restore(),r.prevElClipPaths=null,r.prevEl=null),o&&(i.save(),function(t,e){for(var n=0;n<t.length;n++){var r=t[n];r.setTransform(e),e.beginPath(),r.buildPath(e,r.shape),e.clip(),r.restoreTransform(e)}}(o,i),r.prevElClipPaths=o)),t.beforeBrush&&t.beforeBrush(i),t.brush(i,r.prevEl||null),r.prevEl=t,t.afterBrush&&t.afterBrush(i)}},getLayer:function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=314159);var n=this._layers[t];return n||((n=new Fv("zr_"+t,this,this.dpr)).zlevel=t,n.__builtin__=!0,this._layerConfig[t]&&r(n,this._layerConfig[t],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},insertLayer:function(t,e){var n=this._layers,r=this._zlevelList,i=r.length,a=null,o=-1,s=this._domRoot;if(n[t]);else if(e&&(e.__builtin__||"function"==typeof e.resize&&"function"==typeof e.refresh)){if(i>0&&t>r[0]){for(o=0;o<i-1&&!(r[o]<t&&r[o+1]>t);o++);a=n[r[o]]}if(r.splice(o+1,0,t),n[t]=e,!e.virtual)if(a){var u=a.dom;u.nextSibling?s.insertBefore(e.dom,u.nextSibling):s.appendChild(e.dom)}else s.firstChild?s.insertBefore(e.dom,s.firstChild):s.appendChild(e.dom)}},eachLayer:function(t,e){var n,r,i=this._zlevelList;for(r=0;r<i.length;r++)t.call(e,this._layers[n=i[r]],n)},eachBuiltinLayer:function(t,e){var n,r,i,a=this._zlevelList;for(i=0;i<a.length;i++)(n=this._layers[r=a[i]]).__builtin__&&t.call(e,n,r)},eachOtherLayer:function(t,e){var n,r,i,a=this._zlevelList;for(i=0;i<a.length;i++)(n=this._layers[r=a[i]]).__builtin__||t.call(e,n,r)},getLayers:function(){return this._layers},_updateLayerStatus:function(t){function e(t){n&&(n.__endIndex!==t&&(n.__dirty=!0),n.__endIndex=t)}if(this.eachBuiltinLayer(function(t,e){t.__dirty=t.__used=!1}),this._singleCanvas)for(i=1;i<t.length;i++)if((o=t[i]).zlevel!==t[i-1].zlevel||o.incremental){this._needsManuallyCompositing=!0;break}for(var n=null,r=0,i=0;i<t.length;i++){var a,o=t[i],s=o.zlevel;o.incremental?((a=this.getLayer(s+.001,this._needsManuallyCompositing)).incremental=!0,r=1):a=this.getLayer(s+(r>0?.01:0),this._needsManuallyCompositing),a!==n&&(a.__used=!0,a.__startIndex!==i&&(a.__dirty=!0),a.__startIndex=i,a.__drawIndex=a.incremental?-1:i,e(i),n=a),o.__dirty&&(a.__dirty=!0,a.incremental&&a.__drawIndex<0&&(a.__drawIndex=i))}e(i),this.eachBuiltinLayer(function(t,e){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(t){t.clear()},setBackgroundColor:function(t){this._backgroundColor=t},configLayer:function(t,e){if(e){var n=this._layerConfig;n[t]?r(n[t],e,!0):n[t]=e;for(var i=0;i<this._zlevelList.length;i++){var a=this._zlevelList[i];a!==t&&a!==t+.01||r(this._layers[a],n[t],!0)}}},delLayer:function(t){var e=this._layers,n=this._zlevelList,r=e[t];r&&(r.dom.parentNode.removeChild(r.dom),delete e[t],n.splice(u(n,t),1))},resize:function(t,e){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var r=this._opts;if(null!=t&&(r.width=t),null!=e&&(r.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!=t||e!=this._height){for(var i in n.style.width=t+"px",n.style.height=e+"px",this._layers)this._layers.hasOwnProperty(i)&&this._layers[i].resize(t,e);f(this._progressiveLayers,function(n){n.resize(t,e)}),this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(314159).resize(t,e)}return this},clearLayer:function(t){var e=this._layers[t];e&&e.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var e=new Fv("image",this,t.pixelRatio||this.dpr);if(e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor),t.pixelRatio<=this.dpr){this.refresh();var n=e.dom.width,r=e.dom.height,i=e.ctx;this.eachLayer(function(t){t.__builtin__?i.drawImage(t.dom,0,0,n,r):t.renderToCanvas&&(e.ctx.save(),t.renderToCanvas(e.ctx),e.ctx.restore())})}else for(var a={},o=this.storage.getDisplayList(!0),s=0;s<o.length;s++)this._doPaintEl(o[s],e,!0,a);return e.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],r=["clientWidth","clientHeight"][t],i=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var o=this.root,s=document.defaultView.getComputedStyle(o);return(o[r]||$e(s[n])||$e(o.style[n]))-($e(s[i])||0)-($e(s[a])||0)|0},pathToImage:function(t,e){e=e||this.dpr;var n=document.createElement("canvas"),r=n.getContext("2d"),i=t.getBoundingRect(),a=t.style,o=a.shadowBlur*e,s=a.shadowOffsetX*e,u=a.shadowOffsetY*e,l=a.hasStroke()?a.lineWidth:0,c=Math.max(l/2,-s+o),h=Math.max(l/2,s+o),f=Math.max(l/2,-u+o),d=Math.max(l/2,u+o),p=i.width+c+h,g=i.height+f+d;n.width=p*e,n.height=g*e,r.scale(e,e),r.clearRect(0,0,p,g),r.dpr=e;var v={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[c-i.x,f-i.y],t.rotation=0,t.scale=[1,1],t.updateTransform(),t&&t.brush(r);var m=new Xe({style:{x:0,y:0,image:n}});return null!=v.position&&(m.position=t.position=v.position),null!=v.rotation&&(m.rotation=t.rotation=v.rotation),null!=v.scale&&(m.scale=t.scale=v.scale),m}};var nm=function(t){this.stage=(t=t||{}).stage||{},this.onframe=t.onframe||function(){},this._clips=[],this._running=!1,this._paused=!1,qg.call(this)};nm.prototype={constructor:nm,addClip:function(t){this._clips.push(t)},addAnimator:function(t){t.animation=this;for(var e=t.getClips(),n=0;n<e.length;n++)this.addClip(e[n])},removeClip:function(t){var e=u(this._clips,t);e>=0&&this._clips.splice(e,1)},removeAnimator:function(t){for(var e=t.getClips(),n=0;n<e.length;n++)this.removeClip(e[n]);t.animation=null},_update:function(){for(var t=(new Date).getTime()-this._pausedTime,e=t-this._time,n=this._clips,r=n.length,i=[],a=[],o=0;o<r;o++){var s=n[o],u=s.step(t,e);u&&(i.push(u),a.push(s))}for(o=0;o<r;)n[o]._needsRemove?(n[o]=n[r-1],n.pop(),r--):o++;for(r=i.length,o=0;o<r;o++)a[o].fire(i[o]);this._time=t,this.onframe(e),this.trigger("frame",e),this.stage.update&&this.stage.update()},_startLoop:function(){var t=this;this._running=!0,Uv(function e(){t._running&&(Uv(e),!t._paused&&t._update())})},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(t,e){var n=new _v(t,(e=e||{}).loop,e.getter,e.setter);return this.addAnimator(n),n}},c(nm,qg);var rm=function(){this._track=[]};rm.prototype={constructor:rm,recognize:function(t,e,n){return this._doTrack(t,e,n),this._recognize(t)},clear:function(){return this._track.length=0,this},_doTrack:function(t,e,n){var r=t.touches;if(r){for(var i={points:[],touches:[],target:e,event:t},a=0,o=r.length;a<o;a++){var s=r[a],u=at(n,s,{});i.points.push([u.zrX,u.zrY]),i.touches.push(s)}this._track.push(i)}},_recognize:function(t){for(var e in im)if(im.hasOwnProperty(e)){var n=im[e](this._track,t);if(n)return n}}};var im={pinch:function(t,e){var n=t.length;if(n){var r=(t[n-1]||{}).points,i=(t[n-2]||{}).points||r;if(i&&i.length>1&&r&&r.length>1){var a=Ze(r)/Ze(i);!isFinite(a)&&(a=1),e.pinchScale=a;var o=[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2];return e.pinchX=o[0],e.pinchY=o[1],{type:"pinch",target:t[0].target,event:e}}}}},am=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],om=["touchstart","touchend","touchmove"],sm={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},um=d(am,function(t){var e=t.replace("mouse","pointer");return sm[e]?e:t}),lm={mousemove:function(t){t=st(this.dom,t),this.trigger("mousemove",t)},mouseout:function(t){var e=(t=st(this.dom,t)).toElement||t.relatedTarget;if(e!=this.dom)for(;e&&9!=e.nodeType;){if(e===this.dom)return;e=e.parentNode}this.trigger("mouseout",t)},touchstart:function(t){(t=st(this.dom,t)).zrByTouch=!0,this._lastTouchMoment=new Date,Ke(this,t,"start"),lm.mousemove.call(this,t),lm.mousedown.call(this,t),Je(this)},touchmove:function(t){(t=st(this.dom,t)).zrByTouch=!0,Ke(this,t,"change"),lm.mousemove.call(this,t),Je(this)},touchend:function(t){(t=st(this.dom,t)).zrByTouch=!0,Ke(this,t,"end"),lm.mouseup.call(this,t),+new Date-this._lastTouchMoment<300&&lm.click.call(this,t),Je(this)},pointerdown:function(t){lm.mousedown.call(this,t)},pointermove:function(t){tn(t)||lm.mousemove.call(this,t)},pointerup:function(t){lm.mouseup.call(this,t)},pointerout:function(t){tn(t)||lm.mouseout.call(this,t)}};f(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){lm[t]=function(e){e=st(this.dom,e),this.trigger(t,e)}});var cm=en.prototype;cm.dispose=function(){for(var t=am.concat(om),e=0;e<t.length;e++){var n=t[e];lt(this.dom,Qe(n),this._handlers[n])}},cm.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},c(en,qg);var hm=!Mg.canvasSupported,fm={canvas:em},dm={},pm=function(t,e,n){n=n||{},this.dom=e,this.id=t;var r=this,i=new Av,a=n.renderer;if(hm){if(!fm.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");a="vml"}else a&&fm[a]||(a="canvas");var o=new fm[a](e,i,n,t);this.storage=i,this.painter=o;var s=Mg.node||Mg.worker?null:new en(o.getViewportRoot());this.handler=new Kg(i,o,s,o.root),this.animation=new nm({stage:{update:v(this.flush,this)}}),this.animation.start();var u=i.delFromStorage,l=i.addToStorage;i.delFromStorage=function(t){u.call(i,t),t&&t.removeSelfFromZr(r)},i.addToStorage=function(t){l.call(i,t),t.addSelfToZr(r)}};pm.prototype={constructor:pm,getId:function(){return this.id},add:function(t){this.storage.addRoot(t),this._needsRefresh=!0},remove:function(t){this.storage.delRoot(t),this._needsRefresh=!0},configLayer:function(t,e){this.painter.configLayer&&this.painter.configLayer(t,e),this._needsRefresh=!0},setBackgroundColor:function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var t;this._needsRefresh&&(t=!0,this.refreshImmediately()),this._needsRefreshHover&&(t=!0,this.refreshHoverImmediately()),t&&this.trigger("rendered")},addHover:function(t,e){if(this.painter.addHover){var n=this.painter.addHover(t,e);return this.refreshHover(),n}},removeHover:function(t){this.painter.removeHover&&(this.painter.removeHover(t),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(t){this.painter.resize((t=t||{}).width,t.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(t,e){return this.painter.pathToImage(t,e)},setCursorStyle:function(t){this.handler.setCursorStyle(t)},findHover:function(t,e){return this.handler.findHover(t,e)},on:function(t,e,n){this.handler.on(t,e,n)},off:function(t,e){this.handler.off(t,e)},trigger:function(t,e){this.handler.trigger(t,e)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,delete dm[this.id]}};var gm=(Object.freeze||Object)({version:"4.0.5",init:nn,dispose:function(t){if(t)t.dispose();else{for(var e in dm)dm.hasOwnProperty(e)&&dm[e].dispose();dm={}}return this},getInstance:function(t){return dm[t]},registerPainter:rn}),vm=f,mm=x,ym=y,_m="series\0",bm=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"],xm=0,wm=".",Sm="___EC__COMPONENT__CONTAINER___",Tm=0,Om=function(t){for(var e=0;e<t.length;e++)t[e][1]||(t[e][1]=t[e][0]);return function(e,n,r){for(var i={},a=0;a<t.length;a++){var o=t[a][1];if(!(n&&u(n,o)>=0||r&&u(r,o)<0)){var s=e.getShallow(o);null!=s&&(i[t[a][0]]=s)}}return i}},Mm=Om([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),km={getLineStyle:function(t){var e=Mm(this,t),n=this.getLineDash(e.lineWidth);return n&&(e.lineDash=n),e},getLineDash:function(t){null==t&&(t=1);var e=this.get("type"),n=Math.max(t,2),r=4*t;return"solid"===e||null==e?null:"dashed"===e?[r,r]:[n,n]}},Cm=Om([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),Em={getAreaStyle:function(t,e){return Cm(this,t,e)}},Am=Math.pow,Im=Math.sqrt,Pm=1e-8,Lm=1e-4,Dm=Im(3),jm=1/3,Rm=F(),Nm=F(),Bm=F(),Fm=Math.min,Um=Math.max,zm=Math.sin,Vm=Math.cos,Hm=2*Math.PI,Gm=F(),Wm=F(),qm=F(),Ym=[],Xm=[],$m={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Zm=[],Qm=[],Km=[],Jm=[],ty=Math.min,ey=Math.max,ny=Math.cos,ry=Math.sin,iy=Math.sqrt,ay=Math.abs,oy="undefined"!=typeof Float32Array,sy=function(t){this._saveData=!t,this._saveData&&(this.data=[]),this._ctx=null};sy.prototype={constructor:sy,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(t,e){this._ux=ay(1/xv/t)||0,this._uy=ay(1/xv/e)||0},getContext:function(){return this._ctx},beginPath:function(t){return this._ctx=t,t&&t.beginPath(),t&&(this.dpr=t.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(t,e){return this.addData($m.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},lineTo:function(t,e){var n=ay(t-this._xi)>this._ux||ay(e-this._yi)>this._uy||this._len<5;return this.addData($m.L,t,e),this._ctx&&n&&(this._needsDash()?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),n&&(this._xi=t,this._yi=e),this},bezierCurveTo:function(t,e,n,r,i,a){return this.addData($m.C,t,e,n,r,i,a),this._ctx&&(this._needsDash()?this._dashedBezierTo(t,e,n,r,i,a):this._ctx.bezierCurveTo(t,e,n,r,i,a)),this._xi=i,this._yi=a,this},quadraticCurveTo:function(t,e,n,r){return this.addData($m.Q,t,e,n,r),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(t,e,n,r):this._ctx.quadraticCurveTo(t,e,n,r)),this._xi=n,this._yi=r,this},arc:function(t,e,n,r,i,a){return this.addData($m.A,t,e,n,n,r,i-r,0,a?0:1),this._ctx&&this._ctx.arc(t,e,n,r,i,a),this._xi=ny(i)*n+t,this._yi=ry(i)*n+e,this},arcTo:function(t,e,n,r,i){return this._ctx&&this._ctx.arcTo(t,e,n,r,i),this},rect:function(t,e,n,r){return this._ctx&&this._ctx.rect(t,e,n,r),this.addData($m.R,t,e,n,r),this},closePath:function(){this.addData($m.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&(this._needsDash()&&this._dashedLineTo(e,n),t.closePath()),this._xi=e,this._yi=n,this},fill:function(t){t&&t.fill(),this.toStatic()},stroke:function(t){t&&t.stroke(),this.toStatic()},setLineDash:function(t){if(t instanceof Array){this._lineDash=t,this._dashIdx=0;for(var e=0,n=0;n<t.length;n++)e+=t[n];this._dashSum=e}return this},setLineDashOffset:function(t){return this._dashOffset=t,this},len:function(){return this._len},setData:function(t){var e=t.length;this.data&&this.data.length==e||!oy||(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},appendPath:function(t){t instanceof Array||(t=[t]);for(var e=t.length,n=0,r=this._len,i=0;i<e;i++)n+=t[i].len();for(oy&&this.data instanceof Float32Array&&(this.data=new Float32Array(r+n)),i=0;i<e;i++)for(var a=t[i].data,o=0;o<a.length;o++)this.data[r++]=a[o];this._len=r},addData:function(t){if(this._saveData){var e=this.data;this._len+arguments.length>e.length&&(this._expandData(),e=this.data);for(var n=0;n<arguments.length;n++)e[this._len++]=arguments[n];this._prevCmd=t}},_expandData:function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(t,e){var n,r,i=this._dashSum,a=this._dashOffset,o=this._lineDash,s=this._ctx,u=this._xi,l=this._yi,c=t-u,h=e-l,f=iy(c*c+h*h),d=u,p=l,g=o.length;for(c/=f,h/=f,a<0&&(a=i+a),d-=(a%=i)*c,p-=a*h;c>0&&d<=t||c<0&&d>=t||0==c&&(h>0&&p<=e||h<0&&p>=e);)d+=c*(n=o[r=this._dashIdx]),p+=h*n,this._dashIdx=(r+1)%g,c>0&&d<u||c<0&&d>u||h>0&&p<l||h<0&&p>l||s[r%2?"moveTo":"lineTo"](c>=0?ty(d,t):ey(d,t),h>=0?ty(p,e):ey(p,e));this._dashOffset=-iy((c=d-t)*c+(h=p-e)*h)},_dashedBezierTo:function(t,e,n,r,i,a){var o,s,u,l,c,h=this._dashSum,f=this._dashOffset,d=this._lineDash,p=this._ctx,g=this._xi,v=this._yi,m=Mn,y=0,_=this._dashIdx,b=d.length,x=0;for(f<0&&(f=h+f),f%=h,o=0;o<1;o+=.1)s=m(g,t,n,i,o+.1)-m(g,t,n,i,o),u=m(v,e,r,a,o+.1)-m(v,e,r,a,o),y+=iy(s*s+u*u);for(;_<b&&!((x+=d[_])>f);_++);for(o=(x-f)/y;o<=1;)l=m(g,t,n,i,o),c=m(v,e,r,a,o),_%2?p.moveTo(l,c):p.lineTo(l,c),o+=d[_]/y,_=(_+1)%b;_%2!=0&&p.lineTo(i,a),this._dashOffset=-iy((s=i-l)*s+(u=a-c)*u)},_dashedQuadraticTo:function(t,e,n,r){var i=n,a=r;n=(n+2*t)/3,r=(r+2*e)/3,this._dashedBezierTo(t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,n,r,i,a)},toStatic:function(){var t=this.data;t instanceof Array&&(t.length=this._len,oy&&(this.data=new Float32Array(t)))},getBoundingRect:function(){Zm[0]=Zm[1]=Km[0]=Km[1]=Number.MAX_VALUE,Qm[0]=Qm[1]=Jm[0]=Jm[1]=-Number.MAX_VALUE;for(var t=this.data,e=0,n=0,r=0,i=0,a=0;a<t.length;){var o=t[a++];switch(1==a&&(r=e=t[a],i=n=t[a+1]),o){case $m.M:e=r=t[a++],n=i=t[a++],Km[0]=r,Km[1]=i,Jm[0]=r,Jm[1]=i;break;case $m.L:jn(e,n,t[a],t[a+1],Km,Jm),e=t[a++],n=t[a++];break;case $m.C:Rn(e,n,t[a++],t[a++],t[a++],t[a++],t[a],t[a+1],Km,Jm),e=t[a++],n=t[a++];break;case $m.Q:Nn(e,n,t[a++],t[a++],t[a],t[a+1],Km,Jm),e=t[a++],n=t[a++];break;case $m.A:var s=t[a++],u=t[a++],l=t[a++],c=t[a++],h=t[a++],f=t[a++]+h,d=(a++,1-t[a++]);1==a&&(r=ny(h)*l+s,i=ry(h)*c+u),Bn(s,u,l,c,h,f,d,Km,Jm),e=ny(f)*l+s,n=ry(f)*c+u;break;case $m.R:jn(r=e=t[a++],i=n=t[a++],r+t[a++],i+t[a++],Km,Jm);break;case $m.Z:e=r,n=i}tt(Zm,Zm,Km),et(Qm,Qm,Jm)}return 0===a&&(Zm[0]=Zm[1]=Qm[0]=Qm[1]=0),new re(Zm[0],Zm[1],Qm[0]-Zm[0],Qm[1]-Zm[1])},rebuildPath:function(t){for(var e,n,r,i,a,o,s=this.data,u=this._ux,l=this._uy,c=this._len,h=0;h<c;){var f=s[h++];switch(1==h&&(e=r=s[h],n=i=s[h+1]),f){case $m.M:e=r=s[h++],n=i=s[h++],t.moveTo(r,i);break;case $m.L:a=s[h++],o=s[h++],(ay(a-r)>u||ay(o-i)>l||h===c-1)&&(t.lineTo(a,o),r=a,i=o);break;case $m.C:t.bezierCurveTo(s[h++],s[h++],s[h++],s[h++],s[h++],s[h++]),r=s[h-2],i=s[h-1];break;case $m.Q:t.quadraticCurveTo(s[h++],s[h++],s[h++],s[h++]),r=s[h-2],i=s[h-1];break;case $m.A:var d=s[h++],p=s[h++],g=s[h++],v=s[h++],m=s[h++],y=s[h++],_=s[h++],b=s[h++],x=g>v?g:v,w=g>v?1:g/v,S=g>v?v/g:1,T=m+y;Math.abs(g-v)>.001?(t.translate(d,p),t.rotate(_),t.scale(w,S),t.arc(0,0,x,m,T,1-b),t.scale(1/w,1/S),t.rotate(-_),t.translate(-d,-p)):t.arc(d,p,x,m,T,1-b),1==h&&(e=ny(m)*g+d,n=ry(m)*v+p),r=ny(T)*g+d,i=ry(T)*v+p;break;case $m.R:e=r=s[h],n=i=s[h+1],t.rect(s[h++],s[h++],s[h++],s[h++]);break;case $m.Z:t.closePath(),r=e,i=n}}}},sy.CMD=$m;var uy=2*Math.PI,ly=2*Math.PI,cy=sy.CMD,hy=2*Math.PI,fy=1e-4,dy=[-1,-1,-1],py=[-1,-1],gy=Bv.prototype.getCanvasPattern,vy=Math.abs,my=new sy(!0);Zn.prototype={constructor:Zn,type:"path",__dirtyPath:!0,strokeContainThreshold:5,brush:function(t,e){var n,r=this.style,i=this.path||my,a=r.hasStroke(),o=r.hasFill(),s=r.fill,u=r.stroke,l=o&&!!s.colorStops,c=a&&!!u.colorStops,h=o&&!!s.image,f=a&&!!u.image;r.bind(t,this,e),this.setTransform(t),this.__dirty&&(l&&(n=n||this.getBoundingRect(),this._fillGradient=r.getGradient(t,s,n)),c&&(n=n||this.getBoundingRect(),this._strokeGradient=r.getGradient(t,u,n))),l?t.fillStyle=this._fillGradient:h&&(t.fillStyle=gy.call(s,t)),c?t.strokeStyle=this._strokeGradient:f&&(t.strokeStyle=gy.call(u,t));var d=r.lineDash,p=r.lineDashOffset,g=!!t.setLineDash,v=this.getGlobalScale();if(i.setScale(v[0],v[1]),this.__dirtyPath||d&&!g&&a?(i.beginPath(t),d&&!g&&(i.setLineDash(d),i.setLineDashOffset(p)),this.buildPath(i,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(t.beginPath(),this.path.rebuildPath(t)),o&&(null!=r.fillOpacity?(m=t.globalAlpha,t.globalAlpha=r.fillOpacity*r.opacity,i.fill(t),t.globalAlpha=m):i.fill(t)),d&&g&&(t.setLineDash(d),t.lineDashOffset=p),a)if(null!=r.strokeOpacity){var m=t.globalAlpha;t.globalAlpha=r.strokeOpacity*r.opacity,i.stroke(t),t.globalAlpha=m}else i.stroke(t);d&&g&&t.setLineDash([]),null!=r.text&&(this.restoreTransform(t),this.drawRectText(t,this.getBoundingRect()))},buildPath:function(t,e,n){},createPathProxy:function(){this.path=new sy},getBoundingRect:function(){var t=this._rect,e=this.style,n=!t;if(n){var r=this.path;r||(r=this.path=new sy),this.__dirtyPath&&(r.beginPath(),this.buildPath(r,this.shape,!1)),t=r.getBoundingRect()}if(this._rect=t,e.hasStroke()){var i=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||n){i.copy(t);var a=e.lineWidth,o=e.strokeNoScale?this.getLineScale():1;e.hasFill()||(a=Math.max(a,this.strokeContainThreshold||4)),o>1e-10&&(i.width+=a/o,i.height+=a/o,i.x-=a/o/2,i.y-=a/o/2)}return i}return t},contain:function(t,e){var n=this.transformCoordToLocal(t,e),r=this.getBoundingRect(),i=this.style;if(r.contain(t=n[0],e=n[1])){var a=this.path.data;if(i.hasStroke()){var o=i.lineWidth,s=i.strokeNoScale?this.getLineScale():1;if(s>1e-10&&(i.hasFill()||(o=Math.max(o,this.strokeContainThreshold)),function(t,e,n,r){return $n(a,o/s,!0,n,r)}(0,0,t,e)))return!0}if(i.hasFill())return function(t,e,n){return $n(a,0,!1,e,n)}(0,t,e)}return!1},dirty:function(t){null==t&&(t=!0),t&&(this.__dirtyPath=t,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(t){return this.animate("shape",t)},attrKV:function(t,e){"shape"===t?(this.setShape(e),this.__dirtyPath=!0,this._rect=null):Ye.prototype.attrKV.call(this,t,e)},setShape:function(t,e){var n=this.shape;if(n){if(x(t))for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);else n[t]=e;this.dirty(!0)}return this},getLineScale:function(){var t=this.transform;return t&&vy(t[0]-1)>1e-10&&vy(t[3]-1)>1e-10?Math.sqrt(vy(t[0]*t[3]-t[2]*t[1])):1}},Zn.extend=function(t){var e=function(e){Zn.call(this,e),t.style&&this.style.extendFrom(t.style,!1);var n=t.shape;if(n){this.shape=this.shape||{};var r=this.shape;for(var i in n)!r.hasOwnProperty(i)&&n.hasOwnProperty(i)&&(r[i]=n[i])}t.init&&t.init.call(this,e)};for(var n in l(e,Zn),t)"style"!==n&&"shape"!==n&&(e.prototype[n]=t[n]);return e},l(Zn,Ye);var yy=sy.CMD,_y=[[],[],[]],by=Math.sqrt,xy=Math.atan2,wy=function(t,e){var n,r,i,a,o,s,u=t.data,l=yy.M,c=yy.C,h=yy.L,f=yy.R,d=yy.A,p=yy.Q;for(i=0,a=0;i<u.length;){switch(n=u[i++],a=i,r=0,n){case l:case h:r=1;break;case c:r=3;break;case p:r=2;break;case d:var g=e[4],v=e[5],m=by(e[0]*e[0]+e[1]*e[1]),y=by(e[2]*e[2]+e[3]*e[3]),_=xy(-e[1]/y,e[0]/m);u[i]*=m,u[i++]+=g,u[i]*=y,u[i++]+=v,u[i++]*=m,u[i++]*=y,u[i++]+=_,u[i++]+=_,a=i+=2;break;case f:s[0]=u[i++],s[1]=u[i++],J(s,s,e),u[a++]=s[0],u[a++]=s[1],s[0]+=u[i++],s[1]+=u[i++],J(s,s,e),u[a++]=s[0],u[a++]=s[1]}for(o=0;o<r;o++)(s=_y[o])[0]=u[i++],s[1]=u[i++],J(s,s,e),u[a++]=s[0],u[a++]=s[1]}},Sy=Math.sqrt,Ty=Math.sin,Oy=Math.cos,My=Math.PI,ky=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},Cy=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(ky(t)*ky(e))},Ey=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(Cy(t,e))},Ay=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,Iy=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g,Py=function(t){Ye.call(this,t)};Py.prototype={constructor:Py,type:"text",brush:function(t,e){var n=this.style;this.__dirty&&Pe(n),n.fill=n.stroke=n.shadowBlur=n.shadowColor=n.shadowOffsetX=n.shadowOffsetY=null;var r=n.text;null!=r&&(r+=""),qe(r,n)&&(this.setTransform(t),De(this,t,r,n,null,e),this.restoreTransform(t))},getBoundingRect:function(){var t=this.style;if(this.__dirty&&Pe(t),!this._rect){var e=t.text;null!=e?e+="":e="";var n=me(t.text+"",t.font,t.textAlign,t.textVerticalAlign,t.textPadding,t.rich);if(n.x+=t.x||0,n.y+=t.y||0,Ve(t.textStroke,t.textStrokeWidth)){var r=t.textStrokeWidth;n.x-=r/2,n.y-=r/2,n.width+=r,n.height+=r}this._rect=n}return this._rect}},l(Py,Ye);var Ly=Zn.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(t,e,n){n&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI,!0)}}),Dy=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]],jy=function(t){return Mg.browser.ie&&Mg.browser.version>=11?function(){var e,n=this.__clipPaths,r=this.style;if(n)for(var i=0;i<n.length;i++){var a=n[i],o=a&&a.shape,s=a&&a.type;if(o&&("sector"===s&&o.startAngle===o.endAngle||"rect"===s&&(!o.width||!o.height))){for(u=0;u<Dy.length;u++)Dy[u][2]=r[Dy[u][0]],r[Dy[u][0]]=Dy[u][1];e=!0;break}}if(t.apply(this,arguments),e)for(var u=0;u<Dy.length;u++)r[Dy[u][0]]=Dy[u][2]}:t},Ry=Zn.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:jy(Zn.prototype.brush),buildPath:function(t,e){var n=e.cx,r=e.cy,i=Math.max(e.r0||0,0),a=Math.max(e.r,0),o=e.startAngle,s=e.endAngle,u=e.clockwise,l=Math.cos(o),c=Math.sin(o);t.moveTo(l*i+n,c*i+r),t.lineTo(l*a+n,c*a+r),t.arc(n,r,a,o,s,!u),t.lineTo(Math.cos(s)*i+n,Math.sin(s)*i+r),0!==i&&t.arc(n,r,i,s,o,u),t.closePath()}}),Ny=Zn.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=2*Math.PI;t.moveTo(n+e.r,r),t.arc(n,r,e.r,0,i,!1),t.moveTo(n+e.r0,r),t.arc(n,r,e.r0,0,i,!0)}}),By=function(t,e){for(var n=t.length,r=[],i=0,a=1;a<n;a++)i+=Z(t[a-1],t[a]);var o=i/2;for(o=o<n?n:o,a=0;a<o;a++){var s,u,l,c=a/(o-1)*(e?n:n-1),h=Math.floor(c),f=c-h,d=t[h%n];e?(s=t[(h-1+n)%n],u=t[(h+1)%n],l=t[(h+2)%n]):(s=t[0===h?h:h-1],u=t[h>n-2?n-1:h+1],l=t[h>n-3?n-1:h+2]);var p=f*f,g=f*p;r.push([tr(s[0],d[0],u[0],l[0],f,p,g),tr(s[1],d[1],u[1],l[1],f,p,g)])}return r},Fy=function(t,e,n,r){var i,a,o,s,u=[],l=[],c=[],h=[];if(r){o=[1/0,1/0],s=[-1/0,-1/0];for(var f=0,d=t.length;f<d;f++)tt(o,o,t[f]),et(s,s,t[f]);tt(o,o,r[0]),et(s,s,r[1])}for(f=0,d=t.length;f<d;f++){var p=t[f];if(n)i=t[f?f-1:d-1],a=t[(f+1)%d];else{if(0===f||f===d-1){u.push(z(t[f]));continue}i=t[f-1],a=t[f+1]}W(l,a,i),X(l,l,e);var g=Z(p,i),v=Z(p,a),m=g+v;0!==m&&(g/=m,v/=m),X(c,l,-g),X(h,l,v);var y=H([],p,c),_=H([],p,h);r&&(et(y,y,o),tt(y,y,s),et(_,_,o),tt(_,_,s)),u.push(y),u.push(_)}return n&&u.push(u.shift()),u},Uy=Zn.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(t,e){er(t,e,!0)}}),zy=Zn.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(t,e){er(t,e,!1)}}),Vy=Zn.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,r=e.y,i=e.width,a=e.height;e.r?Ie(t,e):t.rect(n,r,i,a),t.closePath()}}),Hy=Zn.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2,o=e.percent;0!==o&&(t.moveTo(n,r),o<1&&(i=n*(1-o)+i*o,a=r*(1-o)+a*o),t.lineTo(i,a))},pointAt:function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]}}),Gy=[],Wy=Zn.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2,o=e.cpx1,s=e.cpy1,u=e.cpx2,l=e.cpy2,c=e.percent;0!==c&&(t.moveTo(n,r),null==u||null==l?(c<1&&(Ln(n,o,i,c,Gy),o=Gy[1],i=Gy[2],Ln(r,s,a,c,Gy),s=Gy[1],a=Gy[2]),t.quadraticCurveTo(o,s,i,a)):(c<1&&(En(n,o,u,i,c,Gy),o=Gy[1],u=Gy[2],i=Gy[3],En(r,s,l,a,c,Gy),s=Gy[1],l=Gy[2],a=Gy[3]),t.bezierCurveTo(o,s,u,l,i,a)))},pointAt:function(t){return nr(this.shape,t,!1)},tangentAt:function(t){var e=nr(this.shape,t,!0);return $(e,e)}}),qy=Zn.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(t,e){var n=e.cx,r=e.cy,i=Math.max(e.r,0),a=e.startAngle,o=e.endAngle,s=e.clockwise,u=Math.cos(a),l=Math.sin(a);t.moveTo(u*i+n,l*i+r),t.arc(n,r,i,a,o,!s)}}),Yy=Zn.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var t=this.__dirtyPath,e=this.shape.paths,n=0;n<e.length;n++)t=t||e[n].__dirtyPath;this.__dirtyPath=t,this.__dirty=this.__dirty||t},beforeBrush:function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(e[0],e[1])},buildPath:function(t,e){for(var n=e.paths||[],r=0;r<n.length;r++)n[r].buildPath(t,n[r].shape,!0)},afterBrush:function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),Zn.prototype.getBoundingRect.call(this)}}),Xy=function(t){this.colorStops=t||[]};Xy.prototype={constructor:Xy,addColorStop:function(t,e){this.colorStops.push({offset:t,color:e})}};var $y=function(t,e,n,r,i,a){this.x=null==t?0:t,this.y=null==e?0:e,this.x2=null==n?1:n,this.y2=null==r?0:r,this.type="linear",this.global=a||!1,Xy.call(this,i)};$y.prototype={constructor:$y},l($y,Xy);var Zy=function(t,e,n,r,i){this.x=null==t?.5:t,this.y=null==e?.5:e,this.r=null==n?.5:n,this.type="radial",this.global=i||!1,Xy.call(this,r)};Zy.prototype={constructor:Zy},l(Zy,Xy),rr.prototype.incremental=!0,rr.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},rr.prototype.addDisplayable=function(t,e){e?this._temporaryDisplayables.push(t):this._displayables.push(t),this.dirty()},rr.prototype.addDisplayables=function(t,e){e=e||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],e)},rr.prototype.eachPendingDisplayable=function(t){for(e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(var e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},rr.prototype.update=function(){for(this.updateTransform(),t=this._cursor;t<this._displayables.length;t++)(e=this._displayables[t]).parent=this,e.update(),e.parent=null;for(var t=0;t<this._temporaryDisplayables.length;t++){var e=this._temporaryDisplayables[t];e.parent=this,e.update(),e.parent=null}},rr.prototype.brush=function(t,e){for(n=this._cursor;n<this._displayables.length;n++)(r=this._displayables[n]).beforeBrush&&r.beforeBrush(t),r.brush(t,n===this._cursor?null:this._displayables[n-1]),r.afterBrush&&r.afterBrush(t);this._cursor=n;for(var n=0;n<this._temporaryDisplayables.length;n++){var r=this._temporaryDisplayables[n];r.beforeBrush&&r.beforeBrush(t),r.brush(t,0===n?null:this._temporaryDisplayables[n-1]),r.afterBrush&&r.afterBrush(t)}this._temporaryDisplayables=[],this.notClear=!0};var Qy=[];rr.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new re(1/0,1/0,-1/0,-1/0),e=0;e<this._displayables.length;e++){var n=this._displayables[e],r=n.getBoundingRect().clone();n.needLocalTransform()&&r.applyTransform(n.getLocalTransform(Qy)),t.union(r)}this._rect=t}return this._rect},rr.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e);if(this.getBoundingRect().contain(n[0],n[1]))for(var r=0;r<this._displayables.length;r++)if(this._displayables[r].contain(t,e))return!0;return!1},l(rr,Ye);var Ky=Math.round,Jy=Math.max,t_=Math.min,e_={},n_=function(t,e){for(var n=[],r=t.length,i=0;i<r;i++){var a=t[i];a.path||a.createPathProxy(),a.__dirtyPath&&a.buildPath(a.path,a.shape,!0),n.push(a.path)}var o=new Zn(e);return o.createPathProxy(),o.buildPath=function(t){t.appendPath(n);var e=t.getContext();e&&t.rebuildPath(e)},o},r_=R(),i_=0,a_=(Object.freeze||Object)({extendShape:ir,extendPath:function(t,e){return function(t,e){return Zn.extend(Kn(t,e))}(t,e)},makePath:ar,makeImage:or,mergePath:n_,resizePath:ur,subPixelOptimizeLine:lr,subPixelOptimizeRect:cr,subPixelOptimize:hr,setElementHoverStyle:mr,isInEmphasis:yr,setHoverStyle:Sr,setAsHoverStyleTrigger:Tr,setLabelStyle:Or,setTextStyle:Mr,setText:function(t,e,n){var r,i={isRectText:!0};!1===n?r=!0:i.autoColor=n,kr(t,e,i,r)},getFont:Pr,updateProps:Dr,initProps:jr,getTransform:Rr,applyTransform:Nr,transformDirection:Br,groupTransition:Fr,clipPointsByRect:Ur,clipRectByRect:function(t,e){var n=Jy(t.x,e.x),r=t_(t.x+t.width,e.x+e.width),i=Jy(t.y,e.y),a=t_(t.y+t.height,e.y+e.height);if(r>=n&&a>=i)return{x:n,y:i,width:r-n,height:a-i}},createIcon:zr,Group:kv,Image:Xe,Text:Py,Circle:Ly,Sector:Ry,Ring:Ny,Polygon:Uy,Polyline:zy,Rect:Vy,Line:Hy,BezierCurve:Wy,Arc:qy,IncrementalDisplayable:rr,CompoundPath:Yy,LinearGradient:$y,RadialGradient:Zy,BoundingRect:re}),o_=["textStyle","color"],s_={getTextColor:function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(o_):null)},getFont:function(){return Pr({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(t){return me(t,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("rich"),this.getShallow("truncateText"))}},u_=Om([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),l_={getItemStyle:function(t,e){var n=u_(this,t,e),r=this.getBorderLineDash();return r&&(n.lineDash=r),n},getBorderLineDash:function(){var t=this.get("borderType");return"solid"===t||null==t?null:"dashed"===t?[5,5]:[1,1]}},c_=c,h_=dn();Vr.prototype={constructor:Vr,init:null,mergeOption:function(t){r(this.option,t,!0)},get:function(t,e){return null==t?this.option:Hr(this.option,this.parsePath(t),!e&&Gr(this,t))},getShallow:function(t,e){var n=this.option,r=null==n?n:n[t],i=!e&&Gr(this,t);return null==r&&i&&(r=i.getShallow(t)),r},getModel:function(t,e){var n;return new Vr(null==t?this.option:Hr(this.option,t=this.parsePath(t)),e=e||(n=Gr(this,t))&&n.getModel(t),this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new(0,this.constructor)(n(this.option))},setReadOnly:function(t){},parsePath:function(t){return"string"==typeof t&&(t=t.split(".")),t},customizeGetParent:function(t){h_(this).getParent=t},isAnimationEnabled:function(){if(!Mg.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},_n(Vr),bn(Vr),c_(Vr,km),c_(Vr,Em),c_(Vr,s_),c_(Vr,l_);var f_=0,d_=1e-4,p_=9007199254740991,g_=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/,v_=(Object.freeze||Object)({linearMap:qr,parsePercent:Yr,round:Xr,asc:$r,getPrecision:Zr,getPrecisionSafe:Qr,getPixelPrecision:Kr,getPercentWithPrecision:Jr,MAX_SAFE_INTEGER:p_,remRadian:ti,isRadianAroundZero:ei,parseDate:ni,quantity:ri,nice:ai,quantile:function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],a=n-r;return a?i+a*(t[r]-i):i},reformIntervals:oi,isNumeric:si}),m_=A,y_=/([&<>"'])/g,__={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},b_=["a","b","c","d","e","f","g"],x_=function(t,e){return"{"+t+(null==e?"":e)+"}"},w_=xe,S_=(Object.freeze||Object)({addCommas:ui,toCamelCase:li,normalizeCssArray:m_,encodeHTML:ci,formatTpl:hi,formatTplSimple:fi,getTooltipMarker:di,formatTime:gi,capitalFirst:vi,truncateText:w_,getTextRect:me}),T_=f,O_=["left","right","top","bottom","width","height"],M_=[["width","left","right"],["height","top","bottom"]],k_=mi,C_=(m(mi,"vertical"),m(mi,"horizontal"),{getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}}),E_=dn(),A_=Vr.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(t,e,n,r){Vr.call(this,t,e,n,r),this.uid=Wr("ec_cpt_model")},init:function(t,e,n,r){this.mergeDefaultAndTheme(t,n)},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,i=n?xi(t):{};r(t,e.getTheme().get(this.mainType)),r(t,this.getDefaultOption()),n&&bi(t,i,n)},mergeOption:function(t,e){r(this.option,t,!0);var n=this.layoutMode;n&&bi(this.option,t,n)},optionUpdated:function(t,e){},getDefaultOption:function(){var t=E_(this);if(!t.defaultOption){for(var e=[],n=this.constructor;n;){var i=n.prototype.defaultOption;i&&e.push(i),n=n.superClass}for(var a={},o=e.length-1;o>=0;o--)a=r(a,e[o],!0);t.defaultOption=a}return t.defaultOption},getReferringComponents:function(t){return this.ecModel.queryComponents({mainType:t,index:this.get(t+"Index",!0),id:this.get(t+"Id",!0)})}});Sn(A_,{registerWhenExtend:!0}),function(t){var e={};t.registerSubTypeDefaulter=function(t,n){t=yn(t),e[t.main]=n},t.determineSubType=function(n,r){var i=r.type;if(!i){var a=yn(n).main;t.hasSubTypes(n)&&e[a]&&(i=e[a](r))}return i}}(A_),function(t,e){function n(t){var n={},i=[];return f(t,function(a){var o=r(n,a),s=function(t,e){var n=[];return f(t,function(t){u(e,t)>=0&&n.push(t)}),n}(o.originalDeps=e(a),t);o.entryCount=s.length,0===o.entryCount&&i.push(a),f(s,function(t){u(o.predecessor,t)<0&&o.predecessor.push(t);var e=r(n,t);u(e.successor,t)<0&&e.successor.push(a)})}),{graph:n,noEntryList:i}}function r(t,e){return t[e]||(t[e]={predecessor:[],successor:[]}),t[e]}A_.topologicalTravel=function(t,e,r,i){function a(t){s[t].entryCount--,0===s[t].entryCount&&u.push(t)}if(t.length){var o=n(e),s=o.graph,u=o.noEntryList,l={};for(f(t,function(t){l[t]=!0});u.length;){var c=u.pop(),h=s[c],d=!!l[c];d&&(r.call(i,c,h.originalDeps.slice()),delete l[c]),f(h.successor,d?function(t){l[t]=!0,a(t)}:a)}f(l,function(){throw new Error("Circle dependency may exists")})}}}(0,function(t){var e=[];return f(A_.getClassesByMainType(t),function(t){e=e.concat(t.prototype.dependencies||[])}),e=d(e,function(t){return yn(t).main}),"dataset"!==t&&u(e,"dataset")<=0&&e.unshift("dataset"),e}),c(A_,C_);var I_="";"undefined"!=typeof navigator&&(I_=navigator.platform||"");var P_={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:I_.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},L_=dn(),D_={clearColorPalette:function(){L_(this).colorIdx=0,L_(this).colorNameMap={}},getColorFromPalette:function(t,e,n){var r=L_(e=e||this),i=r.colorIdx||0,a=r.colorNameMap=r.colorNameMap||{};if(a.hasOwnProperty(t))return a[t];var o=an(this.get("color",!0)),s=this.get("colorLayer",!0),u=null!=n&&s?function(t,e){for(var n=t.length,r=0;r<n;r++)if(t[r].length>e)return t[r];return t[n-1]}(s,n):o;if((u=u||o)&&u.length){var l=u[i];return t&&(a[t]=l),r.colorIdx=(i+1)%u.length,l}}},j_={cartesian2d:function(t,e,n,r){var i=t.getReferringComponents("xAxis")[0],a=t.getReferringComponents("yAxis")[0];e.coordSysDims=["x","y"],n.set("x",i),n.set("y",a),Ti(i)&&(r.set("x",i),e.firstCategoryDimIndex=0),Ti(a)&&(r.set("y",a),e.firstCategoryDimIndex=1)},singleAxis:function(t,e,n,r){var i=t.getReferringComponents("singleAxis")[0];e.coordSysDims=["single"],n.set("single",i),Ti(i)&&(r.set("single",i),e.firstCategoryDimIndex=0)},polar:function(t,e,n,r){var i=t.getReferringComponents("polar")[0],a=i.findAxisModel("radiusAxis"),o=i.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",a),n.set("angle",o),Ti(a)&&(r.set("radius",a),e.firstCategoryDimIndex=0),Ti(o)&&(r.set("angle",o),e.firstCategoryDimIndex=1)},geo:function(t,e,n,r){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,r){var i=t.ecModel,a=i.getComponent("parallel",t.get("parallelIndex")),o=e.coordSysDims=a.dimensions.slice();f(a.parallelAxisIndex,function(t,a){var s=i.getComponent("parallelAxis",t),u=o[a];n.set(u,s),Ti(s)&&null==e.firstCategoryDimIndex&&(r.set(u,s),e.firstCategoryDimIndex=a)})}},R_="original",N_="arrayRows",B_="objectRows",F_="keyedColumns",U_="unknown",z_="typedArray",V_="column",H_="row";Oi.seriesDataToSource=function(t){return new Oi({data:t,sourceFormat:S(t)?z_:R_,fromDataset:!1})},bn(Oi);var G_=dn(),W_="\0_ec_inner",q_=Vr.extend({init:function(t,e,n,r){n=n||{},this.option=null,this._theme=new Vr(n),this._optionManager=r},setOption:function(t,e){I(!(W_ in t),"please use chart.getOption()"),this._optionManager.setOption(t,e),this.resetOption(null)},resetOption:function(t){var e=!1,n=this._optionManager;if(!t||"recreate"===t){var r=n.mountOption("recreate"===t);this.option&&"recreate"!==t?(this.restoreData(),this.mergeOption(r)):Ii.call(this,r),e=!0}if("timeline"!==t&&"media"!==t||this.restoreData(),!t||"recreate"===t||"timeline"===t){var i=n.getTimelineOption(this);i&&(this.mergeOption(i),e=!0)}if(!t||"recreate"===t||"media"===t){var a=n.getMediaOption(this,this._api);a.length&&f(a,function(t){this.mergeOption(t,e=!0)},this)}return e},mergeOption:function(t){var e=this.option,i=this._componentsMap,o=[];(function(t){G_(t).datasetMap=R()})(this),f(t,function(t,i){null!=t&&(A_.hasClass(i)?i&&o.push(i):e[i]=null==e[i]?n(t):r(e[i],t,!0))}),A_.topologicalTravel(o,A_.getAllClassMainTypes(),function(n,r){var o=an(t[n]),s=un(i.get(n),o);ln(s),f(s,function(t,e){var r=t.option;x(r)&&(t.keyInfo.mainType=n,t.keyInfo.subType=function(t,e,n){return r.type?r.type:n?n.subType:A_.determineSubType(t,r)}(n,0,t.exist))});var u=function(t,e){y(e)||(e=e?[e]:[]);var n={};return f(e,function(e){n[e]=(t.get(e)||[]).slice()}),n}(i,r);e[n]=[],i.set(n,[]),f(s,function(t,r){var o=t.exist,s=t.option;if(I(x(s)||o,"Empty component definition"),s){var l=A_.getClass(n,t.keyInfo.subType,!0);if(o&&o instanceof l)o.name=t.keyInfo.name,o.mergeOption(s,this),o.optionUpdated(s,!1);else{var c=a({dependentModels:u,componentIndex:r},t.keyInfo);a(o=new l(s,this,this,c),c),o.init(s,this,this,c),o.optionUpdated(null,!0)}}else o.mergeOption({},this),o.optionUpdated({},!1);i.get(n)[r]=o,e[n][r]=o.option},this),"series"===n&&Pi(this,i.get("series"))},this),this._seriesIndicesMap=R(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var t=n(this.option);return f(t,function(e,n){if(A_.hasClass(n)){for(var r=(e=an(e)).length-1;r>=0;r--)hn(e[r])&&e.splice(r,1);t[n]=e}}),delete t[W_],t},getTheme:function(){return this._theme},getComponent:function(t,e){var n=this._componentsMap.get(t);if(n)return n[e||0]},queryComponents:function(t){var e=t.mainType;if(!e)return[];var n,r=t.index,i=t.id,a=t.name,o=this._componentsMap.get(e);if(!o||!o.length)return[];if(null!=r)y(r)||(r=[r]),n=g(d(r,function(t){return o[t]}),function(t){return!!t});else if(null!=i){var s=y(i);n=g(o,function(t){return s&&u(i,t.id)>=0||!s&&t.id===i})}else if(null!=a){var l=y(a);n=g(o,function(t){return l&&u(a,t.name)>=0||!l&&t.name===a})}else n=o.slice();return Li(n,t)},findComponents:function(t){var e=t.mainType,n=function(t){var n=e+"Index",r=e+"Id",i=e+"Name";return!t||null==t[n]&&null==t[r]&&null==t[i]?null:{mainType:e,index:t[n],id:t[r],name:t[i]}}(t.query);return function(e){return t.filter?g(e,t.filter):e}(Li(n?this.queryComponents(n):this._componentsMap.get(e),t))},eachComponent:function(t,e,n){var r=this._componentsMap;"function"==typeof t?(n=e,e=t,r.each(function(t,r){f(t,function(t,i){e.call(n,r,t,i)})})):b(t)?f(r.get(t),e,n):x(t)&&f(this.findComponents(t),e,n)},getSeriesByName:function(t){return g(this._componentsMap.get("series"),function(e){return e.name===t})},getSeriesByIndex:function(t){return this._componentsMap.get("series")[t]},getSeriesByType:function(t){return g(this._componentsMap.get("series"),function(e){return e.subType===t})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(t,e){f(this._seriesIndices,function(n){var r=this._componentsMap.get("series")[n];t.call(e,r,n)},this)},eachRawSeries:function(t,e){f(this._componentsMap.get("series"),t,e)},eachSeriesByType:function(t,e,n){f(this._seriesIndices,function(r){var i=this._componentsMap.get("series")[r];i.subType===t&&e.call(n,i,r)},this)},eachRawSeriesByType:function(t,e,n){return f(this.getSeriesByType(t),e,n)},isSeriesFiltered:function(t){return null==this._seriesIndicesMap.get(t.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(t,e){Pi(this,g(this._componentsMap.get("series"),t,e))},restoreData:function(t){var e=this._componentsMap;Pi(this,e.get("series"));var n=[];e.each(function(t,e){n.push(e)}),A_.topologicalTravel(n,A_.getAllClassMainTypes(),function(n,r){f(e.get(n),function(e){("series"!==n||!function(t,e){if(e){var n=e.seiresIndex,r=e.seriesId,i=e.seriesName;return null!=n&&t.componentIndex!==n||null!=r&&t.id!==r||null!=i&&t.name!==i}}(e,t))&&e.restoreData()})})}});c(q_,D_);var Y_=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"],X_={};ji.prototype={constructor:ji,create:function(t,e){var n=[];f(X_,function(r,i){var a=r.create(t,e);n=n.concat(a||[])}),this._coordinateSystems=n},update:function(t,e){f(this._coordinateSystems,function(n){n.update&&n.update(t,e)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},ji.register=function(t,e){X_[t]=e},ji.get=function(t){return X_[t]};var $_=f,Z_=n,Q_=d,K_=r,J_=/^(min|max)?(.+)$/;Ri.prototype={constructor:Ri,setOption:function(t,e){t&&f(an(t.series),function(t){t&&t.data&&S(t.data)&&L(t.data)}),t=Z_(t,!0);var n=this._optionBackup,r=(function(t,e,n){var r,i,a=[],o=[],s=t.timeline;return t.baseOption&&(i=t.baseOption),(s||t.options)&&(i=i||{},a=(t.options||[]).slice()),t.media&&(i=i||{},$_(t.media,function(t){t&&t.option&&(t.query?o.push(t):r||(r=t))})),i||(i=t),i.timeline||(i.timeline=s),$_([i].concat(a).concat(d(o,function(t){return t.option})),function(t){$_(e,function(e){e(t,n)})}),{baseOption:i,timelineOptions:a,mediaDefault:r,mediaList:o}}).call(this,t,e,!n);this._newBaseOption=r.baseOption,n?(function(t,e){$_(e=e||{},function(e,n){if(null!=e){var r=t[n];if(A_.hasClass(n)){e=an(e);var i=un(r=an(r),e);t[n]=Q_(i,function(t){return t.option&&t.exist?K_(t.exist,t.option,!0):t.exist||t.option})}else t[n]=K_(r,e,!0)}})}(n.baseOption,r.baseOption),r.timelineOptions.length&&(n.timelineOptions=r.timelineOptions),r.mediaList.length&&(n.mediaList=r.mediaList),r.mediaDefault&&(n.mediaDefault=r.mediaDefault)):this._optionBackup=r},mountOption:function(t){var e=this._optionBackup;return this._timelineOptions=Q_(e.timelineOptions,Z_),this._mediaList=Q_(e.mediaList,Z_),this._mediaDefault=Z_(e.mediaDefault),this._currentMediaIndices=[],Z_(t?e.baseOption:this._newBaseOption)},getTimelineOption:function(t){var e,n=this._timelineOptions;if(n.length){var r=t.getComponent("timeline");r&&(e=Z_(n[r.getCurrentIndex()],!0))}return e},getMediaOption:function(t){var e=this._api.getWidth(),n=this._api.getHeight(),r=this._mediaList,i=this._mediaDefault,a=[],o=[];if(!r.length&&!i)return o;for(var s=0,u=r.length;s<u;s++)Ni(r[s].query,e,n)&&a.push(s);return!a.length&&i&&(a=[-1]),a.length&&!function(t,e){return a.join(",")===e.join(",")}(0,this._currentMediaIndices)&&(o=Q_(a,function(t){return Z_(-1===t?i.option:r[t].option)})),this._currentMediaIndices=a,o}};var tb=f,eb=x,nb=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"],rb=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],ib=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],ab=function(t,e){(function(t,e){tb(Hi(t.series),function(t){eb(t)&&function(t){if(eb(t)){Bi(t),Ui(t),zi(t,"label"),zi(t,"upperLabel"),zi(t,"edgeLabel"),t.emphasis&&(zi(t.emphasis,"label"),zi(t.emphasis,"upperLabel"),zi(t.emphasis,"edgeLabel"));var e=t.markPoint;e&&(Bi(e),Vi(e));var n=t.markLine;n&&(Bi(n),Vi(n));var r=t.markArea;r&&Vi(r);var i=t.data;if("graph"===t.type){i=i||t.nodes;var a=t.links||t.edges;if(a&&!S(a))for(s=0;s<a.length;s++)Vi(a[s]);f(t.categories,function(t){Ui(t)})}if(i&&!S(i))for(s=0;s<i.length;s++)Vi(i[s]);if((e=t.markPoint)&&e.data)for(var o=e.data,s=0;s<o.length;s++)Vi(o[s]);if((n=t.markLine)&&n.data){var u=n.data;for(s=0;s<u.length;s++)y(u[s])?(Vi(u[s][0]),Vi(u[s][1])):Vi(u[s])}"gauge"===t.type?(zi(t,"axisLabel"),zi(t,"title"),zi(t,"detail")):"treemap"===t.type?(Fi(t.breadcrumb,"itemStyle"),f(t.levels,function(t){Ui(t)})):"tree"===t.type&&Ui(t.leaves)}}(t)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),tb(n,function(e){tb(Hi(t[e]),function(t){t&&(zi(t,"axisLabel"),zi(t.axisPointer,"label"))})}),tb(Hi(t.parallel),function(t){var e=t&&t.parallelAxisDefault;zi(e,"axisLabel"),zi(e&&e.axisPointer,"label")}),tb(Hi(t.calendar),function(t){Fi(t,"itemStyle"),zi(t,"dayLabel"),zi(t,"monthLabel"),zi(t,"yearLabel")}),tb(Hi(t.radar),function(t){zi(t,"name")}),tb(Hi(t.geo),function(t){eb(t)&&(Vi(t),tb(Hi(t.regions),function(t){Vi(t)}))}),tb(Hi(t.timeline),function(t){Vi(t),Fi(t,"label"),Fi(t,"itemStyle"),Fi(t,"controlStyle",!0);var e=t.data;y(e)&&f(e,function(t){x(t)&&(Fi(t,"label"),Fi(t,"itemStyle"))})}),tb(Hi(t.toolbox),function(t){Fi(t,"iconStyle"),tb(t.feature,function(t){Fi(t,"iconStyle")})}),zi(Gi(t.axisPointer),"label"),zi(Gi(t.tooltip).axisPointer,"label")})(t,e),t.series=an(t.series),f(t.series,function(t){if(x(t)){var e=t.type;if("pie"!==e&&"gauge"!==e||null!=t.clockWise&&(t.clockwise=t.clockWise),"gauge"===e){var n=function(t,e){e=e.split(",");for(var n=t,r=0;r<e.length&&null!=(n=n&&n[e[r]]);r++);return n}(t,"pointer.color");null!=n&&function(t,e,n,r){e=e.split(",");for(var i,a=t,o=0;o<e.length-1;o++)null==a[i=e[o]]&&(a[i]={}),a=a[i];null==a[e[o]]&&(a[e[o]]=n)}(t,"itemStyle.normal.color",n)}Wi(t)}}),t.dataRange&&(t.visualMap=t.dataRange),f(ib,function(e){var n=t[e];n&&(y(n)||(n=[n]),f(n,function(t){Wi(t)}))})},ob=Yi.prototype;ob.pure=!1,ob.persistent=!0,ob.getSource=function(){return this._source};var sb={arrayRows_column:{pure:!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(t){return this._data[t+this._source.startIndex]},appendData:Zi},arrayRows_row:{pure:!0,count:function(){var t=this._data[0];return t?Math.max(0,t.length-this._source.startIndex):0},getItem:function(t){t+=this._source.startIndex;for(var e=[],n=this._data,r=0;r<n.length;r++){var i=n[r];e.push(i?i[t]:null)}return e},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:Xi,getItem:$i,appendData:Zi},keyedColumns:{pure:!0,count:function(){var t=this._data[this._source.dimensionsDefine[0].name];return t?t.length:0},getItem:function(t){for(var e=[],n=this._source.dimensionsDefine,r=0;r<n.length;r++){var i=this._data[n[r].name];e.push(i?i[t]:null)}return e},appendData:function(t){var e=this._data;f(t,function(t,n){for(var r=e[n]||(e[n]=[]),i=0;i<(t||[]).length;i++)r.push(t[i])})}},original:{count:Xi,getItem:$i,appendData:Zi},typedArray:{persistent:!1,pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(t,e){e=e||[];for(var n=this._dimSize*(t-=this._offset),r=0;r<this._dimSize;r++)e[r]=this._data[n+r];return e},appendData:function(t){this._data=t},clean:function(){this._offset+=this.count(),this._data=null}}},ub={arrayRows:Qi,objectRows:function(t,e,n,r){return null!=n?t[r]:t},keyedColumns:Qi,original:function(t,e,n,r){var i=sn(t);return null!=n&&i instanceof Array?i[n]:i},typedArray:Qi},lb={arrayRows:Ki,objectRows:function(t,e,n,r){return Ji(t[e],this._dimensionInfos[e])},keyedColumns:Ki,original:function(t,e,n,r){var i=t&&(null==t.value?t:t.value);return!this._rawData.pure&&function(t){return mm(t)&&!(t instanceof Array)}(t)&&(this.hasItemOption=!0),Ji(i instanceof Array?i[r]:i,this._dimensionInfos[e])},typedArray:function(t,e,n,r){return t[r]}},cb=/\{@(.+?)\}/g,hb={getDataParams:function(t,e){var n=this.getData(e),r=this.getRawValue(t,e),i=n.getRawIndex(t),a=n.getName(t),o=n.getRawDataItem(t),s=n.getItemVisual(t,"color"),u=this.ecModel.getComponent("tooltip"),l=mn(u&&u.get("renderMode")),c=this.mainType,h="series"===c;return{componentType:c,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:a,dataIndex:i,data:o,dataType:e,value:r,color:s,marker:di({color:s,renderMode:l}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(t,e,n,r,i){e=e||"normal";var a=this.getData(n),o=a.getItemModel(t),s=this.getDataParams(t,n);null!=r&&s.value instanceof Array&&(s.value=s.value[r]);var u=o.get("normal"===e?[i||"label","formatter"]:[e,i||"label","formatter"]);return"function"==typeof u?(s.status=e,u(s)):"string"==typeof u?hi(u,s).replace(cb,function(e,n){var r=n.length;return"["===n.charAt(0)&&"]"===n.charAt(r-1)&&(n=+n.slice(1,r-1)),ta(a,t,n)}):void 0},getRawValue:function(t,e){return ta(this.getData(e),t)},formatTooltip:function(){}},fb=ra.prototype;fb.perform=function(t){function e(t){return!(t>=1)&&(t=1),t}var n,r=this._upstream,i=t&&t.skip;if(this._dirty&&r){var a=this.context;a.data=a.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!i&&(n=this._plan(this.context));var o,s=e(this._modBy),u=this._modDataCount||0,l=e(t&&t.modBy),c=t&&t.modDataCount||0;s===l&&u===c||(n="reset"),(this._dirty||"reset"===n)&&(this._dirty=!1,o=function(t,e){var n,r;t._dueIndex=t._outputDueEnd=t._dueEnd=0,t._settedOutputEnd=null,!e&&t._reset&&((n=t._reset(t.context))&&n.progress&&(r=n.forceFirstProgress,n=n.progress),y(n)&&!n.length&&(n=null)),t._progress=n,t._modBy=t._modDataCount=null;var i=t._downstream;return i&&i.dirty(),r}(this,i)),this._modBy=l,this._modDataCount=c;var h=t&&t.step;if(this._dueEnd=r?r._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var f=this._dueIndex,d=Math.min(null!=h?this._dueIndex+h:1/0,this._dueEnd);if(!i&&(o||f<d)){var p=this._progress;if(y(p))for(var g=0;g<p.length;g++)ia(this,p[g],f,d,l,c);else ia(this,p,f,d,l,c)}this._dueIndex=d,this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:d}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var db=function(){function t(){return r<n?r++:null}function e(){var t=r%o*i+Math.ceil(r/o),e=r>=n?null:t<a?t:r;return r++,e}var n,r,i,a,o,s={reset:function(u,l,c,h){r=u,n=l,i=c,a=h,o=Math.ceil(a/i),s.next=i>1&&a>0?e:t}};return s}();fb.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},fb.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},fb.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},fb.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},fb.getUpstream=function(){return this._upstream},fb.getDownstream=function(){return this._downstream},fb.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t};var pb=dn(),gb=A_.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendDataProvider:null,visualColorAccessPath:"itemStyle.color",layoutMode:null,init:function(t,e,n,r){this.seriesIndex=this.componentIndex,this.dataTask=na({count:oa,reset:sa}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,n),Mi(this);var i=this.getInitialData(t,n);la(i,this),this.dataTask.context.data=i,pb(this).dataBeforeProcessed=i,aa(this)},mergeDefaultAndTheme:function(t,e){var n=this.layoutMode,i=n?xi(t):{},a=this.subType;A_.hasClass(a)&&(a+="Series"),r(t,e.getTheme().get(this.subType)),r(t,this.getDefaultOption()),on(t,"label",["show"]),this.fillDataTextStyle(t.data),n&&bi(t,i,n)},mergeOption:function(t,e){t=r(this.option,t,!0),this.fillDataTextStyle(t.data);var n=this.layoutMode;n&&bi(this.option,t,n),Mi(this);var i=this.getInitialData(t,e);la(i,this),this.dataTask.dirty(),this.dataTask.context.data=i,pb(this).dataBeforeProcessed=i,aa(this)},fillDataTextStyle:function(t){if(t&&!S(t))for(var e=["show"],n=0;n<t.length;n++)t[n]&&t[n].label&&on(t[n],"label",e)},getInitialData:function(){},appendData:function(t){this.getRawData().appendData(t.data)},getData:function(t){var e=ha(this);if(e){var n=e.context.data;return null==t?n:n.getLinkedData(t)}return pb(this).data},setData:function(t){var e=ha(this);if(e){var n=e.context;n.data!==t&&e.modifyOutputEnd&&e.setOutputEnd(t.count()),n.outputData=t,e!==this.dataTask&&(n.data=t)}pb(this).data=t},getSource:function(){return G_(this).source},getRawData:function(){return pb(this).dataBeforeProcessed},getBaseAxis:function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},formatTooltip:function(t,e,n,r){var i=this,a="html"===(r=r||"html")?"<br/>":"\n",o="richText"===r,s={},u=0,l=this.getData(),c=l.mapDimension("defaultedTooltip",!0),h=c.length,d=this.getRawValue(t),g=y(d),v=l.getItemVisual(t,"color");x(v)&&v.colorStops&&(v=(v.colorStops[0]||{}).color),v=v||"transparent";var m=(h>1||g&&!h?function(n){function a(t,n){var a=l.getDimensionInfo(n);if(a&&!1!==a.otherDims.tooltip){var c=a.type,f="sub"+i.seriesIndex+"at"+u,p=di({color:v,type:"subItem",renderMode:r,markerId:f}),g=(h?("string"==typeof p?p:p.content)+ci(a.displayName||"-")+": ":"")+ci("ordinal"===c?t+"":"time"===c?e?"":gi("yyyy/MM/dd hh:mm:ss",t):ui(t));g&&d.push(g),o&&(s[f]=v,++u)}}var h=p(n,function(t,e,n){var r=l.getDimensionInfo(n);return t|(r&&!1!==r.tooltip&&null!=r.displayName)},0),d=[];c.length?f(c,function(e){a(ta(l,t,e),e)}):f(n,a);var g=h?o?"\n":"<br/>":"",m=g+d.join(g||", ");return{renderMode:r,content:m,style:s}}(d):function(t){return{renderMode:r,content:ci(ui(t)),style:s}}(h?ta(l,t,c[0]):g?d[0]:d)).content,_=i.seriesIndex+"at"+u,b=di({color:v,type:"item",renderMode:r,markerId:_});s[_]=v,++u;var w=l.getName(t),S=this.name;cn(this)||(S=""),S=S?ci(S)+(e?": ":a):"";var T="string"==typeof b?b:b.content;return{html:e?T+S+m:S+T+(w?ci(w)+": "+m:m),markers:s}},isAnimationEnabled:function(){if(Mg.node)return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),t},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(t,e,n){var r=this.ecModel,i=D_.getColorFromPalette.call(this,t,e,n);return i||(i=r.getColorFromPalette(t,e,n)),i},coordDimToDataDim:function(t){return this.getRawData().mapDimension(t,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});c(gb,hb),c(gb,D_);var vb=function(){this.group=new kv,this.uid=Wr("viewComponent")};vb.prototype={constructor:vb,init:function(t,e){},render:function(t,e,n,r){},dispose:function(){},filterForExposedEvent:null};var mb=vb.prototype;mb.updateView=mb.updateLayout=mb.updateVisual=function(t,e,n,r){},_n(vb),Sn(vb,{registerWhenExtend:!0});var yb=function(){var t=dn();return function(e){var n=t(e),r=e.pipelineContext,i=n.large,a=n.progressiveRender,o=n.large=r.large,s=n.progressiveRender=r.progressiveRender;return!!(i^o||a^s)&&"reset"}},_b=dn(),bb=yb(),xb=fa.prototype={type:"chart",init:function(t,e){},render:function(t,e,n,r){},highlight:function(t,e,n,r){pa(t.getData(),r,"emphasis")},downplay:function(t,e,n,r){pa(t.getData(),r,"normal")},remove:function(t,e){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};xb.updateView=xb.updateLayout=xb.updateVisual=function(t,e,n,r){this.render(t,e,n,r)},_n(fa),Sn(fa,{registerWhenExtend:!0}),fa.markUpdateMethod=function(t,e){_b(t).updateMethod=e};var wb={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},Sb="\0__throttleOriginMethod",Tb="\0__throttleRate",Ob="\0__throttleType",Mb={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData(),r=(t.visualColorAccessPath||"itemStyle.color").split("."),i=t.get(r)||t.getColorFromPalette(t.name,null,e.getSeriesCount());if(n.setVisual("color",i),!e.isSeriesFiltered(t))return"function"!=typeof i||i instanceof Xy||n.each(function(e){n.setItemVisual(e,"color",i(t.getDataParams(e)))}),{dataEach:n.hasItemOption?function(t,e){var n=t.getItemModel(e).get(r,!0);null!=n&&t.setItemVisual(e,"color",n)}:null}}},kb={toolbox:{brush:{title:{rect:"\u77e9\u5f62\u9009\u62e9",polygon:"\u5708\u9009",lineX:"\u6a2a\u5411\u9009\u62e9",lineY:"\u7eb5\u5411\u9009\u62e9",keep:"\u4fdd\u6301\u9009\u62e9",clear:"\u6e05\u9664\u9009\u62e9"}},dataView:{title:"\u6570\u636e\u89c6\u56fe",lang:["\u6570\u636e\u89c6\u56fe","\u5173\u95ed","\u5237\u65b0"]},dataZoom:{title:{zoom:"\u533a\u57df\u7f29\u653e",back:"\u533a\u57df\u7f29\u653e\u8fd8\u539f"}},magicType:{title:{line:"\u5207\u6362\u4e3a\u6298\u7ebf\u56fe",bar:"\u5207\u6362\u4e3a\u67f1\u72b6\u56fe",stack:"\u5207\u6362\u4e3a\u5806\u53e0",tiled:"\u5207\u6362\u4e3a\u5e73\u94fa"}},restore:{title:"\u8fd8\u539f"},saveAsImage:{title:"\u4fdd\u5b58\u4e3a\u56fe\u7247",lang:["\u53f3\u952e\u53e6\u5b58\u4e3a\u56fe\u7247"]}},series:{typeNames:{pie:"\u997c\u56fe",bar:"\u67f1\u72b6\u56fe",line:"\u6298\u7ebf\u56fe",scatter:"\u6563\u70b9\u56fe",effectScatter:"\u6d9f\u6f2a\u6563\u70b9\u56fe",radar:"\u96f7\u8fbe\u56fe",tree:"\u6811\u56fe",treemap:"\u77e9\u5f62\u6811\u56fe",boxplot:"\u7bb1\u578b\u56fe",candlestick:"K\u7ebf\u56fe",k:"K\u7ebf\u56fe",heatmap:"\u70ed\u529b\u56fe",map:"\u5730\u56fe",parallel:"\u5e73\u884c\u5750\u6807\u56fe",lines:"\u7ebf\u56fe",graph:"\u5173\u7cfb\u56fe",sankey:"\u6851\u57fa\u56fe",funnel:"\u6f0f\u6597\u56fe",gauge:"\u4eea\u8868\u76d8\u56fe",pictorialBar:"\u8c61\u5f62\u67f1\u56fe",themeRiver:"\u4e3b\u9898\u6cb3\u6d41\u56fe",sunburst:"\u65ed\u65e5\u56fe"}},aria:{general:{withTitle:"\u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e\u201c{title}\u201d\u7684\u56fe\u8868\u3002",withoutTitle:"\u8fd9\u662f\u4e00\u4e2a\u56fe\u8868\uff0c"},series:{single:{prefix:"",withName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\uff0c\u8868\u793a{seriesName}\u3002",withoutName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\u3002"},multiple:{prefix:"\u5b83\u7531{seriesCount}\u4e2a\u56fe\u8868\u7cfb\u5217\u7ec4\u6210\u3002",withName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a\u8868\u793a{seriesName}\u7684{seriesType}\uff0c",withoutName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a{seriesType}\uff0c",separator:{middle:"\uff1b",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636e\u662f\u2014\u2014",partialData:"\u5176\u4e2d\uff0c\u524d{displayCnt}\u9879\u662f\u2014\u2014",withName:"{name}\u7684\u6570\u636e\u662f{value}",withoutName:"{value}",separator:{middle:"\uff0c",end:""}}}},Cb=function(t,e){function n(t,e){if("string"!=typeof t)return t;var n=t;return f(e,function(t,e){n=n.replace(new RegExp("\\{\\s*"+e+"\\s*\\}","g"),t)}),n}function r(t){var e=i.get(t);if(null==e){for(var n=t.split("."),r=kb.aria,a=0;a<n.length;++a)r=r[n[a]];return r}return e}var i=e.getModel("aria");if(i.get("show"))if(i.get("description"))t.setAttribute("aria-label",i.get("description"));else{var a=0;e.eachSeries(function(t,e){++a},this);var o,s=i.get("data.maxCount")||10,u=i.get("series.maxCount")||10,l=Math.min(a,u);if(!(a<1)){var c=function(){var t=e.getModel("title").option;return t&&t.length&&(t=t[0]),t&&t.text}();o=c?n(r("general.withTitle"),{title:c}):r("general.withoutTitle");var h=[];o+=n(r(a>1?"series.multiple.prefix":"series.single.prefix"),{seriesCount:a}),e.eachSeries(function(t,e){if(e<l){var i,o=t.get("name"),u="series."+(a>1?"multiple":"single")+".";i=n(i=r(o?u+"withName":u+"withoutName"),{seriesId:t.seriesIndex,seriesName:t.get("name"),seriesType:function(t){return kb.series.typeNames[t]||"\u81ea\u5b9a\u4e49\u56fe"}(t.subType)});var c=t.getData();window.data=c,c.count()>s?i+=n(r("data.partialData"),{displayCnt:s}):i+=r("data.allData");for(var f=[],d=0;d<c.count();d++)if(d<s){var p=c.getName(d),g=ta(c,d);f.push(n(r(p?"data.withName":"data.withoutName"),{name:p,value:g}))}i+=f.join(r("data.separator.middle"))+r("data.separator.end"),h.push(i)}}),o+=h.join(r("series.multiple.separator.middle"))+r("series.multiple.separator.end"),t.setAttribute("aria-label",o)}}},Eb=Math.PI,Ab=ba.prototype;Ab.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each(function(t){var e=t.overallTask;e&&e.dirty()})},Ab.getPerformArgs=function(t,e){if(t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),r=n.context,i=!e&&n.progressiveEnabled&&(!r||r.progressiveRender)&&t.__idxInPipeline>n.blockIndex?n.step:null,a=r&&r.modDataCount;return{step:i,modBy:null!=a?Math.ceil(a/i):null,modDataCount:a}}},Ab.getPipeline=function(t){return this._pipelineMap.get(t)},Ab.updateStreamModes=function(t,e){var n=this._pipelineMap.get(t.uid),r=t.getData().count(),i=n.progressiveEnabled&&e.incrementalPrepareRender&&r>=n.threshold,a=t.get("large")&&r>=t.get("largeThreshold"),o="mod"===t.get("progressiveChunkMode")?r:null;t.pipelineContext=n.context={progressiveRender:i,modDataCount:o,large:a}},Ab.restorePipelines=function(t){var e=this,n=e._pipelineMap=R();t.eachSeries(function(t){var r=t.getProgressive(),i=t.uid;n.set(i,{id:i,head:null,tail:null,threshold:t.getProgressiveThreshold(),progressiveEnabled:r&&!(t.preventIncremental&&t.preventIncremental()),blockIndex:-1,step:Math.round(r||700),count:0}),Aa(e,t,t.dataTask)})},Ab.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.ecInstance.getModel(),n=this.api;f(this._allHandlers,function(r){var i=t.get(r.uid)||t.set(r.uid,[]);r.reset&&function(t,e,n,r,i){function a(n){var a=n.uid,s=o.get(a)||o.set(a,na({plan:Ma,reset:ka,count:Ea}));s.context={model:n,ecModel:r,api:i,useClearVisual:e.isVisual&&!e.isLayout,plan:e.plan,reset:e.reset,scheduler:t},Aa(t,n,s)}var o=n.seriesTaskMap||(n.seriesTaskMap=R()),s=e.seriesType,u=e.getTargetSeries;e.createOnAllSeries?r.eachRawSeries(a):s?r.eachRawSeriesByType(s,a):u&&u(r,i).each(a);var l=t._pipelineMap;o.each(function(t,e){l.get(e)||(t.dispose(),o.removeKey(e))})}(this,r,i,e,n),r.overallReset&&function(t,e,n,r,i){function a(e){var n=e.uid,r=s.get(n);r||(r=s.set(n,na({reset:Sa,onDirty:Oa})),o.dirty()),r.context={model:e,overallProgress:c,modifyOutputEnd:h},r.agent=o,r.__block=c,Aa(t,e,r)}var o=n.overallTask=n.overallTask||na({reset:wa});o.context={ecModel:r,api:i,overallReset:e.overallReset,scheduler:t};var s=o.agentStubMap=o.agentStubMap||R(),u=e.seriesType,l=e.getTargetSeries,c=!0,h=e.modifyOutputEnd;u?r.eachRawSeriesByType(u,a):l?l(r,i).each(a):(c=!1,f(r.getSeries(),a));var d=t._pipelineMap;s.each(function(t,e){d.get(e)||(t.dispose(),o.dirty(),s.removeKey(e))})}(this,r,i,e,n)},this)},Ab.prepareView=function(t,e,n,r){var i=t.renderTask,a=i.context;a.model=e,a.ecModel=n,a.api=r,i.__block=!t.incrementalPrepareRender,Aa(this,e,i)},Ab.performDataProcessorTasks=function(t,e){xa(this,this._dataProcessorHandlers,t,e,{block:!0})},Ab.performVisualTasks=function(t,e,n){xa(this,this._visualHandlers,t,e,n)},Ab.performSeriesTasks=function(t){var e;t.eachSeries(function(t){e|=t.dataTask.perform()}),this.unfinished|=e},Ab.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)})};var Ib=Ab.updatePayload=function(t,e){"remain"!==e&&(t.context.payload=e)},Pb=Ca(0);ba.wrapStageHandler=function(t,e){return _(t)&&(t={overallReset:t,seriesType:function(t){Lb=null;try{t(Db,jb)}catch(t){}return Lb}(t)}),t.uid=Wr("stageHandler"),e&&(t.visualType=e),t};var Lb,Db={},jb={};Ia(Db,q_),Ia(jb,Di),Db.eachSeriesByType=Db.eachRawSeriesByType=function(t){Lb=t},Db.eachComponent=function(t){"series"===t.mainType&&t.subType&&(Lb=t.subType)};var Rb=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],Nb={color:Rb,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],Rb]},Bb=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],Fb={color:Bb,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:"#eee"},crossStyle:{color:"#eee"}}},legend:{textStyle:{color:"#eee"}},textStyle:{color:"#eee"},title:{textStyle:{color:"#eee"}},toolbox:{iconStyle:{normal:{borderColor:"#eee"}}},dataZoom:{textStyle:{color:"#eee"}},visualMap:{textStyle:{color:"#eee"}},timeline:{lineStyle:{color:"#eee"},itemStyle:{normal:{color:Bb[1]}},label:{normal:{textStyle:{color:"#eee"}}},controlStyle:{normal:{color:"#eee",borderColor:"#eee"}}},timeAxis:{axisLine:{lineStyle:{color:"#eee"}},axisTick:{lineStyle:{color:"#eee"}},axisLabel:{textStyle:{color:"#eee"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#eee"}}},logAxis:{axisLine:{lineStyle:{color:"#eee"}},axisTick:{lineStyle:{color:"#eee"}},axisLabel:{textStyle:{color:"#eee"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#eee"}}},valueAxis:{axisLine:{lineStyle:{color:"#eee"}},axisTick:{lineStyle:{color:"#eee"}},axisLabel:{textStyle:{color:"#eee"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#eee"}}},categoryAxis:{axisLine:{lineStyle:{color:"#eee"}},axisTick:{lineStyle:{color:"#eee"}},axisLabel:{textStyle:{color:"#eee"}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:"#eee"}}},line:{symbol:"circle"},graph:{color:Bb},gauge:{title:{textStyle:{color:"#eee"}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};Fb.categoryAxis.splitLine.show=!1,A_.extend({type:"dataset",defaultOption:{seriesLayoutBy:V_,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){!function(t){var e=t.option.source,n=U_;if(S(e))n=z_;else if(y(e)){0===e.length&&(n=N_);for(var r=0,i=e.length;r<i;r++){var a=e[r];if(null!=a){if(y(a)){n=N_;break}if(x(a)){n=B_;break}}}}else if(x(e)){for(var o in e)if(e.hasOwnProperty(o)&&h(e[o])){n=F_;break}}else if(null!=e)throw new Error("Invalid data");G_(t).sourceFormat=n}(this)}}),vb.extend({type:"dataset"});var Ub=Zn.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(t,e){var n=.5522848,r=e.cx,i=e.cy,a=e.rx,o=e.ry,s=a*n,u=o*n;t.moveTo(r-a,i),t.bezierCurveTo(r-a,i-u,r-s,i-o,r,i-o),t.bezierCurveTo(r+s,i-o,r+a,i-u,r+a,i),t.bezierCurveTo(r+a,i+u,r+s,i+o,r,i+o),t.bezierCurveTo(r-s,i+o,r-a,i+u,r-a,i),t.closePath()}}),zb=/[\s,]+/;La.prototype.parse=function(t,e){e=e||{};var n=Pa(t);if(!n)throw new Error("Illegal svg");var r=new kv;this._root=r;var i,a,o=n.getAttribute("viewBox")||"",s=parseFloat(n.getAttribute("width")||e.width),u=parseFloat(n.getAttribute("height")||e.height);isNaN(s)&&(s=null),isNaN(u)&&(u=null),Ra(n,r,null,!0);for(var l=n.firstChild;l;)this._parseNode(l,r),l=l.nextSibling;if(o){var c=P(o).split(zb);c.length>=4&&(i={x:parseFloat(c[0]||0),y:parseFloat(c[1]||0),width:parseFloat(c[2]),height:parseFloat(c[3])})}if(i&&null!=s&&null!=u&&(a=Ba(i,s,u),!e.ignoreViewBox)){var h=r;(r=new kv).add(h),h.scale=a.scale.slice(),h.position=a.position.slice()}return e.ignoreRootClip||null==s||null==u||r.setClipPath(new Vy({shape:{x:0,y:0,width:s,height:u}})),{root:r,width:s,height:u,viewBoxRect:i,viewBoxTransform:a}},La.prototype._parseNode=function(t,e){var n,r=t.nodeName.toLowerCase();if("defs"===r?this._isDefine=!0:"text"===r&&(this._isText=!0),this._isDefine){if(o=Hb[r]){var i=o.call(this,t),a=t.getAttribute("id");a&&(this._defs[a]=i)}}else{var o=Vb[r];o&&(n=o.call(this,t,e),e.add(n))}for(var s=t.firstChild;s;)1===s.nodeType&&this._parseNode(s,n),3===s.nodeType&&this._isText&&this._parseText(s,n),s=s.nextSibling;"defs"===r?this._isDefine=!1:"text"===r&&(this._isText=!1)},La.prototype._parseText=function(t,e){if(1===t.nodeType){var n=t.getAttribute("dx")||0,r=t.getAttribute("dy")||0;this._textX+=parseFloat(n),this._textY+=parseFloat(r)}var i=new Py({style:{text:t.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});Da(e,i),Ra(t,i,this._defs);var a=i.style.fontSize;a&&a<9&&(i.style.fontSize=9,i.scale=i.scale||[1,1],i.scale[0]*=a/9,i.scale[1]*=a/9);var o=i.getBoundingRect();return this._textX+=o.width,e.add(i),i};var Vb={g:function(t,e){var n=new kv;return Da(e,n),Ra(t,n,this._defs),n},rect:function(t,e){var n=new Vy;return Da(e,n),Ra(t,n,this._defs),n.setShape({x:parseFloat(t.getAttribute("x")||0),y:parseFloat(t.getAttribute("y")||0),width:parseFloat(t.getAttribute("width")||0),height:parseFloat(t.getAttribute("height")||0)}),n},circle:function(t,e){var n=new Ly;return Da(e,n),Ra(t,n,this._defs),n.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),r:parseFloat(t.getAttribute("r")||0)}),n},line:function(t,e){var n=new Hy;return Da(e,n),Ra(t,n,this._defs),n.setShape({x1:parseFloat(t.getAttribute("x1")||0),y1:parseFloat(t.getAttribute("y1")||0),x2:parseFloat(t.getAttribute("x2")||0),y2:parseFloat(t.getAttribute("y2")||0)}),n},ellipse:function(t,e){var n=new Ub;return Da(e,n),Ra(t,n,this._defs),n.setShape({cx:parseFloat(t.getAttribute("cx")||0),cy:parseFloat(t.getAttribute("cy")||0),rx:parseFloat(t.getAttribute("rx")||0),ry:parseFloat(t.getAttribute("ry")||0)}),n},polygon:function(t,e){var n=t.getAttribute("points");n&&(n=ja(n));var r=new Uy({shape:{points:n||[]}});return Da(e,r),Ra(t,r,this._defs),r},polyline:function(t,e){var n=new Zn;Da(e,n),Ra(t,n,this._defs);var r=t.getAttribute("points");return r&&(r=ja(r)),new zy({shape:{points:r||[]}})},image:function(t,e){var n=new Xe;return Da(e,n),Ra(t,n,this._defs),n.setStyle({image:t.getAttribute("xlink:href"),x:t.getAttribute("x"),y:t.getAttribute("y"),width:t.getAttribute("width"),height:t.getAttribute("height")}),n},text:function(t,e){var n=t.getAttribute("x")||0,r=t.getAttribute("y")||0,i=t.getAttribute("dx")||0,a=t.getAttribute("dy")||0;this._textX=parseFloat(n)+parseFloat(i),this._textY=parseFloat(r)+parseFloat(a);var o=new kv;return Da(e,o),Ra(t,o,this._defs),o},tspan:function(t,e){var n=t.getAttribute("x"),r=t.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=r&&(this._textY=parseFloat(r));var i=t.getAttribute("dx")||0,a=t.getAttribute("dy")||0,o=new kv;return Da(e,o),Ra(t,o,this._defs),this._textX+=i,this._textY+=a,o},path:function(t,e){var n=Jn(t.getAttribute("d")||"");return Da(e,n),Ra(t,n,this._defs),n}},Hb={lineargradient:function(t){var e=parseInt(t.getAttribute("x1")||0,10),n=parseInt(t.getAttribute("y1")||0,10),r=parseInt(t.getAttribute("x2")||10,10),i=parseInt(t.getAttribute("y2")||0,10),a=new $y(e,n,r,i);return function(t,e){for(var n=t.firstChild;n;){if(1===n.nodeType){var r=n.getAttribute("offset");r=r.indexOf("%")>0?parseInt(r,10)/100:r?parseFloat(r):0;var i=n.getAttribute("stop-color")||"#000000";e.addColorStop(r,i)}n=n.nextSibling}}(t,a),a},radialgradient:function(t){}},Gb={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"},Wb=/url\(\s*#(.*?)\)/,qb=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g,Yb=/([^\s:;]+)\s*:\s*([^:;]+)/g,Xb=R(),$b={registerMap:function(t,e,n){var r;return y(e)?r=e:e.svg?r=[{type:"svg",source:e.svg,specialAreas:e.specialAreas}]:(e.geoJson&&!e.features&&(n=e.specialAreas,e=e.geoJson),r=[{type:"geoJSON",source:e,specialAreas:n}]),f(r,function(t){var e=t.type;"geoJson"===e&&(e=t.type="geoJSON"),(0,Zb[e])(t)}),Xb.set(t,r)},retrieveMap:function(t){return Xb.get(t)}},Zb={geoJSON:function(t){var e=t.source;t.geoJSON=b(e)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(e):new Function("return ("+e+");")():e},svg:function(t){t.svgXML=Pa(t.source)}},Qb=I,Kb=f,Jb=_,tx=x,ex=A_.parseClassType,nx=1e3,rx=1e3,ix=3e3,ax={PROCESSOR:{FILTER:nx,STATISTIC:5e3},VISUAL:{LAYOUT:rx,GLOBAL:2e3,CHART:ix,COMPONENT:4e3,BRUSH:5e3}},ox="__flagInMainProcess",sx="__optionUpdated",ux=/^[a-zA-Z0-9_]+$/;Ua.prototype.on=Fa("on"),Ua.prototype.off=Fa("off"),Ua.prototype.one=Fa("one"),c(Ua,qg);var lx=za.prototype;lx._onframe=function(){if(!this._disposed){var t=this._scheduler;if(this[sx]){var e=this[sx].silent;this[ox]=!0,Ha(this),cx.update.call(this),this[ox]=!1,this[sx]=!1,Ya.call(this,e),Xa.call(this,e)}else if(t.unfinished){var n=1,r=this._model;t.unfinished=!1;do{var i=+new Date;t.performSeriesTasks(r),t.performDataProcessorTasks(r),Wa(this,r),t.performVisualTasks(r),Ka(this,this._model,0,"remain"),n-=+new Date-i}while(n>0&&t.unfinished);t.unfinished||this._zr.flush()}}},lx.getDom=function(){return this._dom},lx.getZr=function(){return this._zr},lx.setOption=function(t,e,n){var r;if(tx(e)&&(n=e.lazyUpdate,r=e.silent,e=e.notMerge),this[ox]=!0,!this._model||e){var i=new Ri(this._api),a=this._theme,o=this._model=new q_(null,null,a,i);o.scheduler=this._scheduler,o.init(null,null,a,i)}this._model.setOption(t,gx),n?(this[sx]={silent:r},this[ox]=!1):(Ha(this),cx.update.call(this),this._zr.flush(),this[sx]=!1,this[ox]=!1,Ya.call(this,r),Xa.call(this,r))},lx.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},lx.getModel=function(){return this._model},lx.getOption=function(){return this._model&&this._model.getOption()},lx.getWidth=function(){return this._zr.getWidth()},lx.getHeight=function(){return this._zr.getHeight()},lx.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},lx.getRenderedCanvas=function(t){if(Mg.canvasSupported)return(t=t||{}).pixelRatio=t.pixelRatio||1,t.backgroundColor=t.backgroundColor||this._model.get("backgroundColor"),this._zr.painter.getRenderedCanvas(t)},lx.getSvgDataUrl=function(){if(Mg.svgSupported){var t=this._zr;return f(t.storage.getDisplayList(),function(t){t.stopAnimation(!0)}),t.painter.pathToDataUrl()}},lx.getDataURL=function(t){var e=(t=t||{}).excludeComponents,n=this._model,r=[],i=this;Kb(e,function(t){n.eachComponent({mainType:t},function(t){var e=i._componentsMap[t.__viewId];e.group.ignore||(r.push(e),e.group.ignore=!0)})});var a="svg"===this._zr.painter.getType()?this.getSvgDataUrl():this.getRenderedCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return Kb(r,function(t){t.group.ignore=!1}),a},lx.getConnectedDataURL=function(t){if(Mg.canvasSupported){var e=this.group,r=Math.min,i=Math.max;if(xx[e]){var a=1/0,o=1/0,s=-1/0,u=-1/0,l=[],c=t&&t.pixelRatio||1;f(bx,function(c,h){if(c.group===e){var f=c.getRenderedCanvas(n(t)),d=c.getDom().getBoundingClientRect();a=r(d.left,a),o=r(d.top,o),s=i(d.right,s),u=i(d.bottom,u),l.push({dom:f,left:d.left,top:d.top})}});var h=(s*=c)-(a*=c),d=(u*=c)-(o*=c),p=Ng();p.width=h,p.height=d;var g=nn(p);return Kb(l,function(t){var e=new Xe({style:{x:t.left*c-a,y:t.top*c-o,image:t.dom}});g.add(e)}),g.refreshImmediately(),p.toDataURL("image/"+(t&&t.type||"png"))}return this.getDataURL(t)}},lx.convertToPixel=m(Va,"convertToPixel"),lx.convertFromPixel=m(Va,"convertFromPixel"),lx.containPixel=function(t,e){var n;return f(t=pn(this._model,t),function(t,r){r.indexOf("Models")>=0&&f(t,function(t){var i=t.coordinateSystem;if(i&&i.containPoint)n|=!!i.containPoint(e);else if("seriesModels"===r){var a=this._chartsMap[t.__viewId];a&&a.containPoint&&(n|=a.containPoint(e,t))}},this)},this),!!n},lx.getVisual=function(t,e){var n=(t=pn(this._model,t,{defaultMainType:"series"})).seriesModel.getData(),r=t.hasOwnProperty("dataIndexInside")?t.dataIndexInside:t.hasOwnProperty("dataIndex")?n.indexOfRawIndex(t.dataIndex):null;return null!=r?n.getItemVisual(r,e):n.getVisual(e)},lx.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},lx.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]};var cx={prepareAndUpdate:function(t){Ha(this),cx.update.call(this,t)},update:function(t){var e=this._model,n=this._api,r=this._zr,i=this._coordSysMgr,a=this._scheduler;if(e){a.restoreData(e,t),a.performSeriesTasks(e),i.create(e,n),a.performDataProcessorTasks(e,t),Wa(this,e),i.update(e,n),Za(e),a.performVisualTasks(e,t),Qa(this,e,n,t);var o=e.get("backgroundColor")||"transparent";if(Mg.canvasSupported)r.setBackgroundColor(o);else{var s=Dt(o);o=Vt(s,"rgb"),0===s[3]&&(o="transparent")}Ja(e,n)}},updateTransform:function(t){var e=this._model,n=this,r=this._api;if(e){var i=[];e.eachComponent(function(a,o){var s=n.getViewOfComponentModel(o);if(s&&s.__alive)if(s.updateTransform){var u=s.updateTransform(o,e,r,t);u&&u.update&&i.push(s)}else i.push(s)});var a=R();e.eachSeries(function(i){var o=n._chartsMap[i.__viewId];if(o.updateTransform){var s=o.updateTransform(i,e,r,t);s&&s.update&&a.set(i.uid,1)}else a.set(i.uid,1)}),Za(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0,dirtyMap:a}),Ka(n,e,0,t,a),Ja(e,this._api)}},updateView:function(t){var e=this._model;e&&(fa.markUpdateMethod(t,"updateView"),Za(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0}),Qa(this,this._model,this._api,t),Ja(e,this._api))},updateVisual:function(t){cx.update.call(this,t)},updateLayout:function(t){cx.update.call(this,t)}};lx.resize=function(t){this._zr.resize(t);var e=this._model;if(this._loadingFX&&this._loadingFX.resize(),e){var n=e.resetOption("media"),r=t&&t.silent;this[ox]=!0,n&&Ha(this),cx.update.call(this),this[ox]=!1,Ya.call(this,r),Xa.call(this,r)}},lx.showLoading=function(t,e){if(tx(t)&&(e=t,t=""),t=t||"default",this.hideLoading(),_x[t]){var n=_x[t](this._api,e),r=this._zr;this._loadingFX=n,r.add(n)}},lx.hideLoading=function(){this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},lx.makeActionFromEvent=function(t){var e=a({},t);return e.type=dx[t.type],e},lx.dispatchAction=function(t,e){tx(e)||(e={silent:!!e}),fx[t.type]&&this._model&&(this[ox]?this._pendingActions.push(t):(qa.call(this,t,e.silent),e.flush?this._zr.flush(!0):!1!==e.flush&&Mg.browser.weChat&&this._throttledZrFlush(),Ya.call(this,e.silent),Xa.call(this,e.silent)))},lx.appendData=function(t){var e=t.seriesIndex;this.getModel().getSeriesByIndex(e).appendData(t),this._scheduler.unfinished=!0},lx.on=Fa("on"),lx.off=Fa("off"),lx.one=Fa("one");var hx=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];lx._initEvents=function(){Kb(hx,function(t){this._zr.on(t,function(e){var n,r=this.getModel(),i=e.target;if("globalout"===t)n={};else if(i&&null!=i.dataIndex){var o=i.dataModel||r.getSeriesByIndex(i.seriesIndex);n=o&&o.getDataParams(i.dataIndex,i.dataType,i)||{}}else i&&i.eventData&&(n=a({},i.eventData));if(n){var s=n.componentType,u=n.componentIndex;"markLine"!==s&&"markPoint"!==s&&"markArea"!==s||(s="series",u=n.seriesIndex);var l=s&&null!=u&&r.getComponent(s,u),c=l&&this["series"===l.mainType?"_chartsMap":"_componentsMap"][l.__viewId];n.event=e,n.type=t,this._ecEventProcessor.eventInfo={targetEl:i,packedEvent:n,model:l,view:c},this.trigger(t,n)}},this)},this),Kb(dx,function(t,e){this._messageCenter.on(e,function(t){this.trigger(e,t)},this)},this)},lx.isDisposed=function(){return this._disposed},lx.clear=function(){this.setOption({series:[]},!0)},lx.dispose=function(){if(!this._disposed){this._disposed=!0,vn(this.getDom(),Ox,"");var t=this._api,e=this._model;Kb(this._componentsViews,function(n){n.dispose(e,t)}),Kb(this._chartsViews,function(n){n.dispose(e,t)}),this._zr.dispose(),delete bx[this.id]}},c(za,qg),no.prototype={constructor:no,normalizeQuery:function(t){var e={},n={},r={};if(b(t)){var i=ex(t);e.mainType=i.main||null,e.subType=i.sub||null}else{var a=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1};f(t,function(t,i){for(var s=!1,u=0;u<a.length;u++){var l=a[u],c=i.lastIndexOf(l);if(c>0&&c===i.length-l.length){var h=i.slice(0,c);"data"!==h&&(e.mainType=h,e[l.toLowerCase()]=t,s=!0)}}o.hasOwnProperty(i)&&(n[i]=t,s=!0),s||(r[i]=t)})}return{cptQuery:e,dataQuery:n,otherQuery:r}},filter:function(t,e,n){function r(t,e,n,r){return null==t[n]||e[r||n]===t[n]}var i=this.eventInfo;if(!i)return!0;var a=i.targetEl,o=i.packedEvent,s=i.model,u=i.view;if(!s||!u)return!0;var l=e.cptQuery,c=e.dataQuery;return r(l,s,"mainType")&&r(l,s,"subType")&&r(l,s,"index","componentIndex")&&r(l,s,"name")&&r(l,s,"id")&&r(c,o,"name")&&r(c,o,"dataIndex")&&r(c,o,"dataType")&&(!u.filterForExposedEvent||u.filterForExposedEvent(t,e.otherQuery,a,o))},afterTrigger:function(){this.eventInfo=null}};var fx={},dx={},px=[],gx=[],vx=[],mx=[],yx={},_x={},bx={},xx={},Sx=new Date-0,Tx=new Date-0,Ox="_echarts_instance_",Mx=ro;ho(2e3,Mb),oo(ab),so(5e3,function(t){var e=R();t.eachSeries(function(t){var n=t.get("stack");if(n){var r=e.get(n)||e.set(n,[]),i=t.getData(),a={stackResultDimension:i.getCalculationInfo("stackResultDimension"),stackedOverDimension:i.getCalculationInfo("stackedOverDimension"),stackedDimension:i.getCalculationInfo("stackedDimension"),stackedByDimension:i.getCalculationInfo("stackedByDimension"),isStackedByIndex:i.getCalculationInfo("isStackedByIndex"),data:i,seriesModel:t};if(!a.stackedDimension||!a.isStackedByIndex&&!a.stackedByDimension)return;r.length&&i.setCalculationInfo("stackedOnSeries",r[r.length-1].seriesModel),r.push(a)}}),e.each(qi)}),po("default",function(t,e){o(e=e||{},{text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0});var n=new Vy({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4}),r=new qy({shape:{startAngle:-Eb/2,endAngle:-Eb/2+.1,r:10},style:{stroke:e.color,lineCap:"round",lineWidth:5},zlevel:e.zlevel,z:10001}),i=new Vy({style:{fill:"none",text:e.text,textPosition:"right",textDistance:10,textFill:e.textColor},zlevel:e.zlevel,z:10001});r.animateShape(!0).when(1e3,{endAngle:3*Eb/2}).start("circularInOut"),r.animateShape(!0).when(1e3,{startAngle:3*Eb/2}).delay(300).start("circularInOut");var a=new kv;return a.add(r),a.add(i),a.add(n),a.resize=function(){var e=t.getWidth()/2,a=t.getHeight()/2;r.setShape({cx:e,cy:a});var o=r.shape.r;i.setShape({x:e-o,y:a-o,width:2*o,height:2*o}),n.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},a.resize(),a}),uo({type:"highlight",event:"highlight",update:"highlight"},B),uo({type:"downplay",event:"downplay",update:"downplay"},B),ao("light",Nb),ao("dark",Fb),bo.prototype={constructor:bo,add:function(t){return this._add=t,this},update:function(t){return this._update=t,this},remove:function(t){return this._remove=t,this},execute:function(){var t=this._old,e=this._new,n={},r=[],i=[];for(xo(t,{},r,"_oldKeyGetter",this),xo(e,n,i,"_newKeyGetter",this),a=0;a<t.length;a++)null!=(s=n[o=r[a]])?((l=s.length)?(1===l&&(n[o]=null),s=s.unshift()):n[o]=null,this._update&&this._update(s,a)):this._remove&&this._remove(a);for(var a=0;a<i.length;a++){var o=i[a];if(n.hasOwnProperty(o)){var s=n[o];if(null==s)continue;if(s.length)for(var u=0,l=s.length;u<l;u++)this._add&&this._add(s[u]);else this._add&&this._add(s)}}}};var kx=R(["tooltip","label","itemName","itemId","seriesName"]),Cx=x,Ex="e\0\0",Ax={float:"undefined"==typeof Float64Array?Array:Float64Array,int:"undefined"==typeof Int32Array?Array:Int32Array,ordinal:Array,number:Array,time:Array},Ix="undefined"==typeof Uint32Array?Array:Uint32Array,Px="undefined"==typeof Uint16Array?Array:Uint16Array,Lx=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],Dx=["_extent","_approximateExtent","_rawExtent"],jx=function(t,e){t=t||["x","y"];for(var n={},r=[],i={},a=0;a<t.length;a++){var o=t[a];b(o)&&(o={name:o});var s=o.name;o.type=o.type||"float",o.coordDim||(o.coordDim=s,o.coordDimIndex=0),o.otherDims=o.otherDims||{},r.push(s),n[s]=o,o.index=a,o.createInvertedIndices&&(i[s]=[])}this.dimensions=r,this._dimensionInfos=n,this.hostModel=e,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=function(t){var e={},n=e.encode={},r=R(),i=[],a=[];f(t.dimensions,function(e){var o=t.getDimensionInfo(e),s=o.coordDim;if(s){var u=n[s];n.hasOwnProperty(s)||(u=n[s]=[]),u[o.coordDimIndex]=e,o.isExtraCoord||(r.set(s,1),function(t){return!("ordinal"===t||"time"===t)}(o.type)&&(i[0]=e)),o.defaultTooltip&&a.push(e)}kx.each(function(t,e){var r=n[e];n.hasOwnProperty(e)||(r=n[e]=[]);var i=o.otherDims[e];null!=i&&!1!==i&&(r[i]=o.name)})});var o=[],s={};r.each(function(t,e){var r=n[e];s[e]=r[0],o=o.concat(r)}),e.dataDimsOnCoord=o,e.encodeFirstDimNotExtra=s;var u=n.label;u&&u.length&&(i=u.slice());var l=n.tooltip;return l&&l.length?a=l.slice():a.length||(a=i.slice()),n.defaultedLabel=i,n.defaultedTooltip=a,e}(this),this._invertedIndicesMap=i,this._calculationInfo={}},Rx=jx.prototype;Rx.type="list",Rx.hasItemOption=!0,Rx.getDimension=function(t){return isNaN(t)||(t=this.dimensions[t]||t),t},Rx.getDimensionInfo=function(t){return this._dimensionInfos[this.getDimension(t)]},Rx.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},Rx.mapDimension=function(t,e){var n=this._dimensionsSummary;if(null==e)return n.encodeFirstDimNotExtra[t];var r=n.encode[t];return!0===e?(r||[]).slice():r&&r[e]},Rx.initData=function(t,e,n){(Oi.isInstance(t)||h(t))&&(t=new Yi(t,this.dimensions.length)),this._rawData=t,this._storage={},this._indices=null,this._nameList=e||[],this._idList=[],this._nameRepeatCount={},n||(this.hasItemOption=!1),this.defaultDimValueGetter=lb[this._rawData.getSource().sourceFormat],this._dimValueGetter=n=n||this.defaultDimValueGetter,this._rawExtent={},this._initDataFromProvider(0,t.count()),t.pure&&(this.hasItemOption=!1)},Rx.getProvider=function(){return this._rawData},Rx.appendData=function(t){var e=this._rawData,n=this.count();e.appendData(t);var r=e.count();e.persistent||(r+=n),this._initDataFromProvider(n,r)},Rx._initDataFromProvider=function(t,e){if(!(t>=e)){for(var n,r=this._chunkSize,i=this._rawData,a=this._storage,o=this.dimensions,s=o.length,u=this._dimensionInfos,l=this._nameList,c=this._idList,h=this._rawExtent,f=this._nameRepeatCount={},d=this._chunkCount,p=d-1,g=0;g<s;g++){h[M=o[g]]||(h[M]=[1/0,-1/0]);var v=u[M];0===v.otherDims.itemName&&(n=this._nameDimIdx=g),0===v.otherDims.itemId&&(this._idDimIdx=g);var m=Ax[v.type];a[M]||(a[M]=[]);var y=a[M][p];if(y&&y.length<r){for(var _=new m(Math.min(e-p*r,r)),b=0;b<y.length;b++)_[b]=y[b];a[M][p]=_}for(O=d*r;O<e;O+=r)a[M].push(new m(Math.min(e-O,r)));this._chunkCount=a[M].length}for(var x=new Array(s),w=t;w<e;w++){x=i.getItem(w,x);for(var S=Math.floor(w/r),T=w%r,O=0;O<s;O++){var M=o[O],k=a[M][S],C=this._dimValueGetter(x,M,w,O);k[T]=C;var E=h[M];C<E[0]&&(E[0]=C),C>E[1]&&(E[1]=C)}if(!i.pure){var A=l[w];if(x&&null==A)if(null!=x.name)l[w]=A=x.name;else if(null!=n){var I=o[n],P=a[I][S];if(P){A=P[T];var L=u[I].ordinalMeta;L&&L.categories.length&&(A=L.categories[A])}}var D=null==x?null:x.id;null==D&&null!=A&&(f[A]=f[A]||0,D=A,f[A]>0&&(D+="__ec__"+f[A]),f[A]++),null!=D&&(c[w]=D)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=e,this._extent={},Mo(this)}},Rx.count=function(){return this._count},Rx.getIndices=function(){var t=this._indices;if(t){var e=t.constructor,n=this._count;if(e===Array)for(r=new e(n),i=0;i<n;i++)r[i]=t[i];else r=new e(t.buffer,0,n)}else for(var r=new(e=So(this))(this.count()),i=0;i<r.length;i++)r[i]=i;return r},Rx.get=function(t,e){if(!(e>=0&&e<this._count))return NaN;var n=this._storage;if(!n[t])return NaN;e=this.getRawIndex(e);var r=Math.floor(e/this._chunkSize);return n[t][r][e%this._chunkSize]},Rx.getByRawIndex=function(t,e){if(!(e>=0&&e<this._rawCount))return NaN;var n=this._storage[t];return n?n[Math.floor(e/this._chunkSize)][e%this._chunkSize]:NaN},Rx._getFast=function(t,e){var n=Math.floor(e/this._chunkSize);return this._storage[t][n][e%this._chunkSize]},Rx.getValues=function(t,e){var n=[];y(t)||(e=t,t=this.dimensions);for(var r=0,i=t.length;r<i;r++)n.push(this.get(t[r],e));return n},Rx.hasValue=function(t){for(var e=this._dimensionsSummary.dataDimsOnCoord,n=this._dimensionInfos,r=0,i=e.length;r<i;r++)if("ordinal"!==n[e[r]].type&&isNaN(this.get(e[r],t)))return!1;return!0},Rx.getDataExtent=function(t){t=this.getDimension(t);var e=[1/0,-1/0];if(!this._storage[t])return e;var n,r=this.count();if(!this._indices)return this._rawExtent[t].slice();if(n=this._extent[t])return n.slice();for(var i=(n=e)[0],a=n[1],o=0;o<r;o++){var s=this._getFast(t,this.getRawIndex(o));s<i&&(i=s),s>a&&(a=s)}return this._extent[t]=n=[i,a],n},Rx.getApproximateExtent=function(t){return t=this.getDimension(t),this._approximateExtent[t]||this.getDataExtent(t)},Rx.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},Rx.getCalculationInfo=function(t){return this._calculationInfo[t]},Rx.setCalculationInfo=function(t,e){Cx(t)?a(this._calculationInfo,t):this._calculationInfo[t]=e},Rx.getSum=function(t){var e=0;if(this._storage[t])for(var n=0,r=this.count();n<r;n++){var i=this.get(t,n);isNaN(i)||(e+=i)}return e},Rx.getMedian=function(t){var e=[];this.each(t,function(t,n){isNaN(t)||e.push(t)});var n=[].concat(e).sort(function(t,e){return t-e}),r=this.count();return 0===r?0:r%2==1?n[(r-1)/2]:(n[r/2]+n[r/2-1])/2},Rx.rawIndexOf=function(t,e){var n=(t&&this._invertedIndicesMap[t])[e];return null==n||isNaN(n)?-1:n},Rx.indexOfName=function(t){for(var e=0,n=this.count();e<n;e++)if(this.getName(e)===t)return e;return-1},Rx.indexOfRawIndex=function(t){if(!this._indices)return t;if(t>=this._rawCount||t<0)return-1;var e=this._indices,n=e[t];if(null!=n&&n<this._count&&n===t)return t;for(var r=0,i=this._count-1;r<=i;){var a=(r+i)/2|0;if(e[a]<t)r=a+1;else{if(!(e[a]>t))return a;i=a-1}}return-1},Rx.indicesOfNearest=function(t,e,n){var r=[];if(!this._storage[t])return r;null==n&&(n=1/0);for(var i=Number.MAX_VALUE,a=-1,o=0,s=this.count();o<s;o++){var u=e-this.get(t,o),l=Math.abs(u);u<=n&&l<=i&&((l<i||u>=0&&a<0)&&(i=l,a=u,r.length=0),r.push(o))}return r},Rx.getRawIndex=Co,Rx.getRawDataItem=function(t){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(t));for(var e=[],n=0;n<this.dimensions.length;n++)e.push(this.get(this.dimensions[n],t));return e},Rx.getName=function(t){var e=this.getRawIndex(t);return this._nameList[e]||ko(this,this._nameDimIdx,e)||""},Rx.getId=function(t){return Ao(this,this.getRawIndex(t))},Rx.each=function(t,e,n,r){if(this._count){"function"==typeof t&&(r=n,n=e,e=t,t=[]),n=n||r||this;for(var i=(t=d(Io(t),this.getDimension,this)).length,a=0;a<this.count();a++)switch(i){case 0:e.call(n,a);break;case 1:e.call(n,this.get(t[0],a),a);break;case 2:e.call(n,this.get(t[0],a),this.get(t[1],a),a);break;default:for(var o=0,s=[];o<i;o++)s[o]=this.get(t[o],a);s[o]=a,e.apply(n,s)}}},Rx.filterSelf=function(t,e,n,r){if(this._count){"function"==typeof t&&(r=n,n=e,e=t,t=[]),n=n||r||this,t=d(Io(t),this.getDimension,this);for(var i=this.count(),a=new(So(this))(i),o=[],s=t.length,u=0,l=t[0],c=0;c<i;c++){var h,f=this.getRawIndex(c);if(0===s)h=e.call(n,c);else if(1===s){var p=this._getFast(l,f);h=e.call(n,p,c)}else{for(var g=0;g<s;g++)o[g]=this._getFast(l,f);o[g]=c,h=e.apply(n,o)}h&&(a[u++]=f)}return u<i&&(this._indices=a),this._count=u,this._extent={},this.getRawIndex=this._indices?Eo:Co,this}},Rx.selectRange=function(t){if(this._count){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);var r=e.length;if(r){var i=this.count(),a=new(So(this))(i),o=0,s=e[0],u=t[s][0],l=t[s][1],c=!1;if(!this._indices){var h=0;if(1===r){for(var f=this._storage[e[0]],d=0;d<this._chunkCount;d++)for(var p=f[d],g=Math.min(this._count-d*this._chunkSize,this._chunkSize),v=0;v<g;v++)((x=p[v])>=u&&x<=l||isNaN(x))&&(a[o++]=h),h++;c=!0}else if(2===r){f=this._storage[s];var m=this._storage[e[1]],y=t[e[1]][0],_=t[e[1]][1];for(d=0;d<this._chunkCount;d++){p=f[d];var b=m[d];for(g=Math.min(this._count-d*this._chunkSize,this._chunkSize),v=0;v<g;v++){var x=p[v],w=b[v];(x>=u&&x<=l||isNaN(x))&&(w>=y&&w<=_||isNaN(w))&&(a[o++]=h),h++}}c=!0}}if(!c)if(1===r)for(v=0;v<i;v++)T=this.getRawIndex(v),((x=this._getFast(s,T))>=u&&x<=l||isNaN(x))&&(a[o++]=T);else for(v=0;v<i;v++){var S=!0,T=this.getRawIndex(v);for(d=0;d<r;d++){var O=e[d];((x=this._getFast(n,T))<t[O][0]||x>t[O][1])&&(S=!1)}S&&(a[o++]=this.getRawIndex(v))}return o<i&&(this._indices=a),this._count=o,this._extent={},this.getRawIndex=this._indices?Eo:Co,this}}},Rx.mapArray=function(t,e,n,r){"function"==typeof t&&(r=n,n=e,e=t,t=[]);var i=[];return this.each(t,function(){i.push(e&&e.apply(this,arguments))},n=n||r||this),i},Rx.map=function(t,e,n,r){n=n||r||this;var i=Po(this,t=d(Io(t),this.getDimension,this));i._indices=this._indices,i.getRawIndex=i._indices?Eo:Co;for(var a=i._storage,o=[],s=this._chunkSize,u=t.length,l=this.count(),c=[],h=i._rawExtent,f=0;f<l;f++){for(var p=0;p<u;p++)c[p]=this.get(t[p],f);c[u]=f;var g=e&&e.apply(n,c);if(null!=g){"object"!=typeof g&&(o[0]=g,g=o);for(var v=this.getRawIndex(f),m=Math.floor(v/s),y=v%s,_=0;_<g.length;_++){var b=t[_],x=g[_],w=h[b],S=a[b];S&&(S[m][y]=x),x<w[0]&&(w[0]=x),x>w[1]&&(w[1]=x)}}}return i},Rx.downSample=function(t,e,n,r){for(var i=Po(this,[t]),a=i._storage,o=[],s=Math.floor(1/e),u=a[t],l=this.count(),c=this._chunkSize,h=i._rawExtent[t],f=new(So(this))(l),d=0,p=0;p<l;p+=s){s>l-p&&(o.length=s=l-p);for(var g=0;g<s;g++){var v=this.getRawIndex(p+g),m=Math.floor(v/c);o[g]=u[m][v%c]}var y=n(o),_=this.getRawIndex(Math.min(p+r(o,y)||0,l-1)),b=_%c;u[Math.floor(_/c)][b]=y,y<h[0]&&(h[0]=y),y>h[1]&&(h[1]=y),f[d++]=_}return i._count=d,i._indices=f,i.getRawIndex=Eo,i},Rx.getItemModel=function(t){var e=this.hostModel;return new Vr(this.getRawDataItem(t),e,e&&e.ecModel)},Rx.diff=function(t){var e=this;return new bo(t?t.getIndices():[],this.getIndices(),function(e){return Ao(t,e)},function(t){return Ao(e,t)})},Rx.getVisual=function(t){var e=this._visual;return e&&e[t]},Rx.setVisual=function(t,e){if(Cx(t))for(var n in t)t.hasOwnProperty(n)&&this.setVisual(n,t[n]);else this._visual=this._visual||{},this._visual[t]=e},Rx.setLayout=function(t,e){if(Cx(t))for(var n in t)t.hasOwnProperty(n)&&this.setLayout(n,t[n]);else this._layout[t]=e},Rx.getLayout=function(t){return this._layout[t]},Rx.getItemLayout=function(t){return this._itemLayouts[t]},Rx.setItemLayout=function(t,e,n){this._itemLayouts[t]=n?a(this._itemLayouts[t]||{},e):e},Rx.clearItemLayouts=function(){this._itemLayouts.length=0},Rx.getItemVisual=function(t,e,n){var r=this._itemVisuals[t],i=r&&r[e];return null!=i||n?i:this.getVisual(e)},Rx.setItemVisual=function(t,e,n){var r=this._itemVisuals[t]||{},i=this.hasItemVisual;if(this._itemVisuals[t]=r,Cx(e))for(var a in e)e.hasOwnProperty(a)&&(r[a]=e[a],i[a]=!0);else r[e]=n,i[e]=!0},Rx.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}};var Nx=function(t){t.seriesIndex=this.seriesIndex,t.dataIndex=this.dataIndex,t.dataType=this.dataType};Rx.setItemGraphicEl=function(t,e){var n=this.hostModel;e&&(e.dataIndex=t,e.dataType=this.dataType,e.seriesIndex=n&&n.seriesIndex,"group"===e.type&&e.traverse(Nx,e)),this._graphicEls[t]=e},Rx.getItemGraphicEl=function(t){return this._graphicEls[t]},Rx.eachItemGraphicEl=function(t,e){f(this._graphicEls,function(n,r){n&&t&&t.call(e,n,r)})},Rx.cloneShallow=function(t){if(!t){var e=d(this.dimensions,this.getDimensionInfo,this);t=new jx(e,this.hostModel)}return t._storage=this._storage,Oo(t,this),t._indices=this._indices?new(0,this._indices.constructor)(this._indices):null,t.getRawIndex=t._indices?Eo:Co,t},Rx.wrapMethod=function(t,e){var n=this[t];"function"==typeof n&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var t=n.apply(this,arguments);return e.apply(this,[t].concat(E(arguments)))})},Rx.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],Rx.CHANGABLE_METHODS=["filterSelf","selectRange"];var Bx=function(t,e){return Do((e=e||{}).coordDimensions||[],t,{dimsDef:e.dimensionsDefine||t.dimensionsDefine,encodeDef:e.encodeDefine||t.encodeDefine,dimCount:e.dimensionsCount,generateCoord:e.generateCoord,generateCoordCount:e.generateCoordCount})};Uo.prototype.parse=function(t){return t},Uo.prototype.getSetting=function(t){return this._setting[t]},Uo.prototype.contain=function(t){var e=this._extent;return t>=e[0]&&t<=e[1]},Uo.prototype.normalize=function(t){var e=this._extent;return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])},Uo.prototype.scale=function(t){var e=this._extent;return t*(e[1]-e[0])+e[0]},Uo.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},Uo.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},Uo.prototype.getExtent=function(){return this._extent.slice()},Uo.prototype.setExtent=function(t,e){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(e)||(n[1]=e)},Uo.prototype.isBlank=function(){return this._isBlank},Uo.prototype.setBlank=function(t){this._isBlank=t},Uo.prototype.getLabel=null,_n(Uo),Sn(Uo,{registerWhenExtend:!0}),zo.createByAxisModel=function(t){var e=t.option,n=e.data,r=n&&d(n,Ho);return new zo({categories:r,needCollect:!r,deduplication:!1!==e.dedplication})};var Fx=zo.prototype;Fx.getOrdinal=function(t){return Vo(this).get(t)},Fx.parseAndCollect=function(t){var e,n=this._needCollect;if("string"!=typeof t&&!n)return t;if(n&&!this._deduplication)return this.categories[e=this.categories.length]=t,e;var r=Vo(this);return null==(e=r.get(t))&&(n?(this.categories[e=this.categories.length]=t,r.set(t,e)):e=NaN),e};var Ux=Uo.prototype,zx=Uo.extend({type:"ordinal",init:function(t,e){t&&!y(t)||(t=new zo({categories:t})),this._ordinalMeta=t,this._extent=e||[0,t.categories.length-1]},parse:function(t){return"string"==typeof t?this._ordinalMeta.getOrdinal(t):Math.round(t)},contain:function(t){return t=this.parse(t),Ux.contain.call(this,t)&&null!=this._ordinalMeta.categories[t]},normalize:function(t){return Ux.normalize.call(this,this.parse(t))},scale:function(t){return Math.round(Ux.scale.call(this,t))},getTicks:function(){for(var t=[],e=this._extent,n=e[0];n<=e[1];)t.push(n),n++;return t},getLabel:function(t){if(!this.isBlank())return this._ordinalMeta.categories[t]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:B,niceExtent:B});zx.create=function(){return new zx};var Vx=Xr,Hx=Xr,Gx=Uo.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(t,e){var n=this._extent;isNaN(t)||(n[0]=parseFloat(t)),isNaN(e)||(n[1]=parseFloat(e))},unionExtent:function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1]),Gx.prototype.setExtent.call(this,e[0],e[1])},getInterval:function(){return this._interval},setInterval:function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=Go(t)},getTicks:function(){return function(t,e,n,r){var i=[];if(!t)return i;e[0]<n[0]&&i.push(e[0]);for(var a=n[0];a<=n[1]&&(i.push(a),(a=Vx(a+t,r))!==i[i.length-1]);)if(i.length>1e4)return[];return e[1]>(i.length?i[i.length-1]:n[1])&&i.push(e[1]),i}(this._interval,this._extent,this._niceExtent,this._intervalPrecision)},getLabel:function(t,e){if(null==t)return"";var n=e&&e.precision;return null==n?n=Qr(t)||0:"auto"===n&&(n=this._intervalPrecision),ui(t=Hx(t,n,!0))},niceTicks:function(t,e,n){t=t||5;var r=this._extent,i=r[1]-r[0];if(isFinite(i)){i<0&&(i=-i,r.reverse());var a=function(t,e,n,r){var i={},a=i.interval=ai((t[1]-t[0])/e,!0);null!=n&&a<n&&(a=i.interval=n),null!=r&&a>r&&(a=i.interval=r);var o=i.intervalPrecision=Go(a);return qo(i.niceTickExtent=[Vx(Math.ceil(t[0]/a)*a,o),Vx(Math.floor(t[1]/a)*a,o)],t),i}(r,t,e,n);this._intervalPrecision=a.intervalPrecision,this._interval=a.interval,this._niceExtent=a.niceTickExtent}},niceExtent:function(t){var e=this._extent;if(e[0]===e[1])if(0!==e[0]){var n=e[0];t.fixMax?e[0]-=n/2:(e[1]+=n/2,e[0]-=n/2)}else e[1]=1;isFinite(e[1]-e[0])||(e[0]=0,e[1]=1),this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var r=this._interval;t.fixMin||(e[0]=Hx(Math.floor(e[0]/r)*r)),t.fixMax||(e[1]=Hx(Math.ceil(e[1]/r)*r))}});Gx.create=function(){return new Gx};var Wx="__ec_stack_",qx="undefined"!=typeof Float32Array?Float32Array:Array,Yx={seriesType:"bar",plan:yb(),reset:function(t){if(ts(t)&&es(t)){var e=t.getData(),n=t.coordinateSystem,r=n.getBaseAxis(),i=n.getOtherAxis(r),a=e.mapDimension(i.dim),o=e.mapDimension(r.dim),s=i.isHorizontal(),u=s?0:1,l=Ko(Zo([t]),r,t).width;return l>.5||(l=.5),{progress:function(t,e){for(var r,c=new qx(2*t.count),h=[],f=[],d=0;null!=(r=t.next());)f[u]=e.get(a,r),f[1-u]=e.get(o,r),h=n.dataToPoint(f,null,h),c[d++]=h[0],c[d++]=h[1];e.setLayout({largePoints:c,barWidth:l,valueAxisStart:ns(0,i),valueAxisHorizontal:s})}}}}},Xx=Gx.prototype,$x=Math.ceil,Zx=Math.floor,Qx=Gx.extend({type:"time",getLabel:function(t){var e=this._stepLvl,n=new Date(t);return gi(e[0],n,this.getSetting("useUTC"))},niceExtent:function(t){var e=this._extent;if(e[0]===e[1]&&(e[0]-=864e5,e[1]+=864e5),e[1]===-1/0&&e[0]===1/0){var n=new Date;e[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),e[0]=e[1]-864e5}this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var r=this._interval;t.fixMin||(e[0]=Xr(Zx(e[0]/r)*r)),t.fixMax||(e[1]=Xr($x(e[1]/r)*r))},niceTicks:function(t,e,n){var r=this._extent,i=r[1]-r[0],a=i/(t=t||10);null!=e&&a<e&&(a=e),null!=n&&a>n&&(a=n);var o=Kx.length,s=function(t,e,n,r){for(;n<r;){var i=n+r>>>1;t[i][1]<e?n=i+1:r=i}return n}(Kx,a,0,o),u=Kx[Math.min(s,o-1)],l=u[1];"year"===u[0]&&(l*=ai(i/l/t,!0));var c=this.getSetting("useUTC")?0:60*new Date(+r[0]||+r[1]).getTimezoneOffset()*1e3,h=[Math.round($x((r[0]-c)/l)*l+c),Math.round(Zx((r[1]-c)/l)*l+c)];qo(h,r),this._stepLvl=u,this._interval=l,this._niceExtent=h},parse:function(t){return+ni(t)}});f(["contain","normalize"],function(t){Qx.prototype[t]=function(e){return Xx[t].call(this,this.parse(e))}});var Kx=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],["hh:mm\nMM-dd",6e4],["hh:mm\nMM-dd",3e5],["hh:mm\nMM-dd",6e5],["hh:mm\nMM-dd",9e5],["hh:mm\nMM-dd",18e5],["hh:mm\nMM-dd",36e5],["hh:mm\nMM-dd",72e5],["hh:mm\nMM-dd",216e5],["hh:mm\nMM-dd",432e5],["MM-dd\nyyyy",864e5],["MM-dd\nyyyy",1728e5],["MM-dd\nyyyy",2592e5],["MM-dd\nyyyy",3456e5],["MM-dd\nyyyy",432e6],["MM-dd\nyyyy",5184e5],["week",6048e5],["MM-dd\nyyyy",864e6],["week",12096e5],["week",18144e5],["month",26784e5],["week",36288e5],["month",53568e5],["week",6048e6],["quarter",8208e6],["month",107136e5],["month",13392e6],["half-year",16416e6],["month",214272e5],["month",26784e6],["year",32832e6]];Qx.create=function(t){return new Qx({useUTC:t.ecModel.get("useUTC")})};var Jx=Uo.prototype,tw=Gx.prototype,ew=Qr,nw=Xr,rw=Math.floor,iw=Math.ceil,aw=Math.pow,ow=Math.log,sw=Uo.extend({type:"log",base:10,$constructor:function(){Uo.apply(this,arguments),this._originalScale=new Gx},getTicks:function(){var t=this._originalScale,e=this._extent,n=t.getExtent();return d(tw.getTicks.call(this),function(r){var i=Xr(aw(this.base,r));return i=r===e[0]&&t.__fixMin?rs(i,n[0]):i,r===e[1]&&t.__fixMax?rs(i,n[1]):i},this)},getLabel:tw.getLabel,scale:function(t){return t=Jx.scale.call(this,t),aw(this.base,t)},setExtent:function(t,e){var n=this.base;t=ow(t)/ow(n),e=ow(e)/ow(n),tw.setExtent.call(this,t,e)},getExtent:function(){var t=this.base,e=Jx.getExtent.call(this);e[0]=aw(t,e[0]),e[1]=aw(t,e[1]);var n=this._originalScale,r=n.getExtent();return n.__fixMin&&(e[0]=rs(e[0],r[0])),n.__fixMax&&(e[1]=rs(e[1],r[1])),e},unionExtent:function(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=ow(t[0])/ow(e),t[1]=ow(t[1])/ow(e),Jx.unionExtent.call(this,t)},unionExtentFromData:function(t,e){this.unionExtent(t.getApproximateExtent(e))},niceTicks:function(t){t=t||10;var e=this._extent,n=e[1]-e[0];if(!(n===1/0||n<=0)){var r=ri(n);for(t/n*r<=.5&&(r*=10);!isNaN(r)&&Math.abs(r)<1&&Math.abs(r)>0;)r*=10;var i=[Xr(iw(e[0]/r)*r),Xr(rw(e[1]/r)*r)];this._interval=r,this._niceExtent=i}},niceExtent:function(t){tw.niceExtent.call(this,t);var e=this._originalScale;e.__fixMin=t.fixMin,e.__fixMax=t.fixMax}});f(["contain","normalize"],function(t){sw.prototype[t]=function(e){return e=ow(e)/ow(this.base),Jx[t].call(this,e)}}),sw.create=function(){return new sw};var uw={getMin:function(t){var e=this.option,n=t||null==e.rangeStart?e.min:e.rangeStart;return this.axis&&null!=n&&"dataMin"!==n&&"function"!=typeof n&&!O(n)&&(n=this.axis.scale.parse(n)),n},getMax:function(t){var e=this.option,n=t||null==e.rangeEnd?e.max:e.rangeEnd;return this.axis&&null!=n&&"dataMax"!==n&&"function"!=typeof n&&!O(n)&&(n=this.axis.scale.parse(n)),n},getNeedCrossZero:function(){var t=this.option;return null==t.rangeStart&&null==t.rangeEnd&&!t.scale},getCoordSysModel:B,setRange:function(t,e){this.option.rangeStart=t,this.option.rangeEnd=e},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}},lw=ir({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=e.width/2,a=e.height/2;t.moveTo(n,r-a),t.lineTo(n+i,r+a),t.lineTo(n-i,r+a),t.closePath()}}),cw=ir({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,r=e.cy,i=e.width/2,a=e.height/2;t.moveTo(n,r-a),t.lineTo(n+i,r),t.lineTo(n,r+a),t.lineTo(n-i,r),t.closePath()}}),hw=ir({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,r=e.y,i=e.width/5*3,a=Math.max(i,e.height),o=i/2,s=o*o/(a-o),u=r-a+o+s,l=Math.asin(s/o),c=Math.cos(l)*o,h=Math.sin(l),f=Math.cos(l),d=.6*o,p=.7*o;t.moveTo(n-c,u+s),t.arc(n,u,o,Math.PI-l,2*Math.PI+l),t.bezierCurveTo(n+c-h*d,u+s+f*d,n,r-p,n,r),t.bezierCurveTo(n,r-p,n-c+h*d,u+s+f*d,n-c,u+s),t.closePath()}}),fw=ir({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,r=e.x,i=e.y,a=e.width/3*2;t.moveTo(r,i),t.lineTo(r+a,i+n),t.lineTo(r,i+n/4*3),t.lineTo(r-a,i+n),t.lineTo(r,i),t.closePath()}}),dw={line:function(t,e,n,r,i){i.x1=t,i.y1=e+r/2,i.x2=t+n,i.y2=e+r/2},rect:function(t,e,n,r,i){i.x=t,i.y=e,i.width=n,i.height=r},roundRect:function(t,e,n,r,i){i.x=t,i.y=e,i.width=n,i.height=r,i.r=Math.min(n,r)/4},square:function(t,e,n,r,i){var a=Math.min(n,r);i.x=t,i.y=e,i.width=a,i.height=a},circle:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.r=Math.min(n,r)/2},diamond:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.width=n,i.height=r},pin:function(t,e,n,r,i){i.x=t+n/2,i.y=e+r/2,i.width=n,i.height=r},arrow:function(t,e,n,r,i){i.x=t+n/2,i.y=e+r/2,i.width=n,i.height=r},triangle:function(t,e,n,r,i){i.cx=t+n/2,i.cy=e+r/2,i.width=n,i.height=r}},pw={};f({line:Hy,rect:Vy,roundRect:Vy,square:Vy,circle:Ly,diamond:cw,pin:hw,arrow:fw,triangle:lw},function(t,e){pw[e]=new t});var gw=ir({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},beforeBrush:function(){var t=this.style;"pin"===this.shape.symbolType&&"inside"===t.textPosition&&(t.textPosition=["50%","40%"],t.textAlign="center",t.textVerticalAlign="middle")},buildPath:function(t,e,n){var r=e.symbolType,i=pw[r];"none"!==e.symbolType&&(i||(i=pw[r="rect"]),dw[r](e.x,e.y,e.width,e.height,i.shape),i.buildPath(t,i.shape,n))}}),vw=(Object.freeze||Object)({createList:function(t){return Fo(t.getSource(),t)},getLayoutRect:yi,dataStack:{isDimensionStacked:No,enableDataStack:Ro,getStackedDimension:Bo},createScale:function(t,e){var n=e;Vr.isInstance(e)||c(n=new Vr(e),uw);var r=os(n);return r.setExtent(t[0],t[1]),as(r,n),r},mixinAxisModelCommonMethods:function(t){c(t,uw)},completeDimensions:Do,createDimensions:Bx,createSymbol:hs}),mw=1e-8;ps.prototype={constructor:ps,properties:null,getBoundingRect:function(){var t=this._rect;if(t)return t;for(var e=Number.MAX_VALUE,n=[e,e],r=[-e,-e],i=[],a=[],o=this.geometries,s=0;s<o.length;s++)"polygon"===o[s].type&&(Dn(o[s].exterior,i,a),tt(n,n,i),et(r,r,a));return 0===s&&(n[0]=n[1]=r[0]=r[1]=0),this._rect=new re(n[0],n[1],r[0]-n[0],r[1]-n[1])},contain:function(t){var e=this.getBoundingRect(),n=this.geometries;if(!e.contain(t[0],t[1]))return!1;t:for(var r=0,i=n.length;r<i;r++)if("polygon"===n[r].type){var a=n[r].interiors;if(ds(n[r].exterior,t[0],t[1])){for(var o=0;o<(a?a.length:0);o++)if(ds(a[o]))continue t;return!0}}return!1},transformTo:function(t,e,n,r){var i=this.getBoundingRect(),a=i.width/i.height;n?r||(r=n/a):n=a*r;for(var o=new re(t,e,n,r),s=i.calculateTransform(o),u=this.geometries,l=0;l<u.length;l++)if("polygon"===u[l].type){for(var c=u[l].exterior,h=u[l].interiors,f=0;f<c.length;f++)J(c[f],c[f],s);for(var d=0;d<(h?h.length:0);d++)for(f=0;f<h[d].length;f++)J(h[d][f],h[d][f],s)}(i=this._rect).copy(o),this.center=[i.x+i.width/2,i.y+i.height/2]},cloneShallow:function(t){null==t&&(t=this.name);var e=new ps(t,this.geometries,this.center);return e._rect=this._rect,e.transformTo=null,e}};var yw=function(t){return function(t){if(!t.UTF8Encoding)return t;var e=t.UTF8Scale;null==e&&(e=1024);for(var n=t.features,r=0;r<n.length;r++)for(var i=n[r].geometry,a=i.coordinates,o=i.encodeOffsets,s=0;s<a.length;s++){var u=a[s];if("Polygon"===i.type)a[s]=gs(u,o[s],e);else if("MultiPolygon"===i.type)for(var l=0;l<u.length;l++)u[l]=gs(u[l],o[s][l],e)}t.UTF8Encoding=!1}(t),d(g(t.features,function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0}),function(t){var e=t.properties,n=t.geometry,r=n.coordinates,i=[];"Polygon"===n.type&&i.push({type:"polygon",exterior:r[0],interiors:r.slice(1)}),"MultiPolygon"===n.type&&f(r,function(t){t[0]&&i.push({type:"polygon",exterior:t[0],interiors:t.slice(1)})});var a=new ps(e.name,i,e.cp);return a.properties=e,a})},_w=dn(),bw=[0,1],xw=function(t,e,n){this.dim=t,this.scale=e,this._extent=n||[0,0],this.inverse=!1,this.onBand=!1};xw.prototype={constructor:xw,contain:function(t){var e=this._extent,n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]);return t>=n&&t<=r},containData:function(t){return this.contain(this.dataToCoord(t))},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(t){return Kr(t||this.scale.getExtent(),this._extent)},setExtent:function(t,e){var n=this._extent;n[0]=t,n[1]=e},dataToCoord:function(t,e){var n=this._extent,r=this.scale;return t=r.normalize(t),this.onBand&&"ordinal"===r.type&&Ss(n=n.slice(),r.count()),qr(t,bw,n,e)},coordToData:function(t,e){var n=this._extent,r=this.scale;this.onBand&&"ordinal"===r.type&&Ss(n=n.slice(),r.count());var i=qr(t,n,bw,e);return this.scale.scale(i)},pointToData:function(t,e){},getTicksCoords:function(t){var e=(t=t||{}).tickModel||this.getTickModel(),n=d(function(t,e){return"category"===t.type?function(t,e){var n,r,i=ms(t,"ticks"),a=ws(e),o=ys(i,a);if(o)return o;if(e.get("show")&&!t.scale.isBlank()||(n=[]),_(a))n=xs(t,a,!0);else if("auto"===a){var s=vs(t,t.getLabelModel());r=s.labelCategoryInterval,n=d(s.labels,function(t){return t.tickValue})}else n=bs(t,r=a,!0);return _s(i,a,{ticks:n,tickCategoryInterval:r})}(t,e):{ticks:t.scale.getTicks()}}(this,e).ticks,function(t){return{coord:this.dataToCoord(t),tickValue:t}},this);return function(t,e,n,r,i){function a(t,e){return c?t>e:t<e}var o=e.length;if(t.onBand&&!r&&o){var s,u=t.getExtent();if(1===o)e[0].coord=u[0],s=e[1]={coord:u[0]};else{var l=e[1].coord-e[0].coord;f(e,function(t){t.coord-=l/2;var e=e||0;e%2>0&&(t.coord-=l/(2*(e+1)))}),e.push(s={coord:e[o-1].coord+l})}var c=u[0]>u[1];a(e[0].coord,u[0])&&(i?e[0].coord=u[0]:e.shift()),i&&a(u[0],e[0].coord)&&e.unshift({coord:u[0]}),a(u[1],s.coord)&&(i?s.coord=u[1]:e.pop()),i&&a(s.coord,u[1])&&e.push({coord:u[1]})}}(this,n,0,e.get("alignWithLabel"),t.clamp),n},getViewLabels:function(){return(t=this,"category"===t.type?function(t){var e=t.getLabelModel(),n=vs(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}(t):function(t){var e=t.scale.getTicks(),n=ss(t);return{labels:d(e,function(e,r){return{formattedLabel:n(e,r),rawLabel:t.scale.getLabel(e),tickValue:e}})}}(t)).labels;var t},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var t=this._extent,e=this.scale.getExtent(),n=e[1]-e[0]+(this.onBand?1:0);0===n&&(n=1);var r=Math.abs(t[1]-t[0]);return Math.abs(r)/n},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return function(t){var e=function(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}(t),n=ss(t),r=(e.axisRotate-e.labelRotate)/180*Math.PI,i=t.scale,a=i.getExtent(),o=i.count();if(a[1]-a[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var u=a[0],l=t.dataToCoord(u+1)-t.dataToCoord(u),c=Math.abs(l*Math.cos(r)),h=Math.abs(l*Math.sin(r)),f=0,d=0;u<=a[1];u+=s){var p,g=me(n(u),e.font,"center","top");p=1.3*g.height,f=Math.max(f,1.3*g.width,7),d=Math.max(d,p,7)}var v=f/c,m=d/h;isNaN(v)&&(v=1/0),isNaN(m)&&(m=1/0);var y=Math.max(0,Math.floor(Math.min(v,m))),_=_w(t.model),b=_.lastAutoInterval,x=_.lastTickCount;return null!=b&&null!=x&&Math.abs(b-y)<=1&&Math.abs(x-o)<=1&&b>y?y=b:(_.lastTickCount=o,_.lastAutoInterval=y),y}(this)}};var ww=yw,Sw={};f(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(t){Sw[t]=Ug[t]});var Tw={};f(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],function(t){Tw[t]=a_[t]}),gb.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(t,e){return Fo(this.getSource(),this)},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clipOverflow:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});var Ow=Os.prototype,Mw=Os.getSymbolSize=function(t,e){var n=t.getItemVisual(e,"symbolSize");return n instanceof Array?n.slice():[+n,+n]};Ow._createSymbol=function(t,e,n,r,i){this.removeAll();var a=hs(t,-1,-1,2,2,e.getItemVisual(n,"color"),i);a.attr({z2:100,culling:!0,scale:Ms(r)}),a.drift=ks,this._symbolType=t,this.add(a)},Ow.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(t)},Ow.getSymbolPath=function(){return this.childAt(0)},Ow.getScale=function(){return this.childAt(0).scale},Ow.highlight=function(){this.childAt(0).trigger("emphasis")},Ow.downplay=function(){this.childAt(0).trigger("normal")},Ow.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},Ow.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=t?"move":"pointer"},Ow.updateData=function(t,e,n){this.silent=!1;var r=t.getItemVisual(e,"symbol")||"circle",i=t.hostModel,a=Mw(t,e),o=r!==this._symbolType;if(o){var s=t.getItemVisual(e,"symbolKeepAspect");this._createSymbol(r,t,e,a,s)}else(u=this.childAt(0)).silent=!1,Dr(u,{scale:Ms(a)},i,e);if(this._updateCommon(t,e,a,n),o){var u=this.childAt(0),l=n&&n.fadeIn,c={scale:u.scale.slice()};l&&(c.style={opacity:u.style.opacity}),u.scale=[0,0],l&&(u.style.opacity=0),jr(u,c,i,e)}this._seriesModel=i};var kw=["itemStyle"],Cw=["emphasis","itemStyle"],Ew=["label"],Aw=["emphasis","label"];Ow._updateCommon=function(t,e,n,r){var i=this.childAt(0),o=t.hostModel,s=t.getItemVisual(e,"color");"image"!==i.type&&i.useStyle({strokeNoScale:!0});var u=r&&r.itemStyle,l=r&&r.hoverItemStyle,c=r&&r.symbolRotate,h=r&&r.symbolOffset,f=r&&r.labelModel,d=r&&r.hoverLabelModel,p=r&&r.hoverAnimation,g=r&&r.cursorStyle;if(!r||t.hasItemOption){var v=r&&r.itemModel?r.itemModel:t.getItemModel(e);u=v.getModel(kw).getItemStyle(["color"]),l=v.getModel(Cw).getItemStyle(),c=v.getShallow("symbolRotate"),h=v.getShallow("symbolOffset"),f=v.getModel(Ew),d=v.getModel(Aw),p=v.getShallow("hoverAnimation"),g=v.getShallow("cursor")}else l=a({},l);var m=i.style;i.attr("rotation",(c||0)*Math.PI/180||0),h&&i.attr("position",[Yr(h[0],n[0]),Yr(h[1],n[1])]),g&&i.attr("cursor",g),i.setColor(s,r&&r.symbolInnerColor),i.setStyle(u);var y=t.getItemVisual(e,"opacity");null!=y&&(m.opacity=y);var _=t.getItemVisual(e,"liftZ"),b=i.__z2Origin;null!=_?null==b&&(i.__z2Origin=i.z2,i.z2+=_):null!=b&&(i.z2=b,i.__z2Origin=null);var x=r&&r.useNameLabel;Or(m,l,f,d,{labelFetcher:o,labelDataIndex:e,defaultText:function(e,n){return x?t.getName(e):Ts(t,e)},isRectText:!0,autoColor:s}),i.off("mouseover").off("mouseout").off("emphasis").off("normal"),i.hoverStyle=l,Sr(i),i.__symbolOriginalScale=Ms(n),p&&o.isAnimationEnabled()&&i.on("mouseover",Cs).on("mouseout",Es).on("emphasis",As).on("normal",Is)},Ow.fadeOut=function(t,e){var n=this.childAt(0);this.silent=n.silent=!0,!(e&&e.keepLabel)&&(n.style.text=null),Dr(n,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,t)},l(Os,kv);var Iw=Ps.prototype;Iw.updateData=function(t,e){e=Ds(e);var n=this.group,r=t.hostModel,i=this._data,a=this._symbolCtor,o=js(t);i||n.removeAll(),t.diff(i).add(function(r){var i=t.getItemLayout(r);if(Ls(t,i,r,e)){var s=new a(t,r,o);s.attr("position",i),t.setItemGraphicEl(r,s),n.add(s)}}).update(function(s,u){var l=i.getItemGraphicEl(u),c=t.getItemLayout(s);Ls(t,c,s,e)?(l?(l.updateData(t,s,o),Dr(l,{position:c},r)):(l=new a(t,s)).attr("position",c),n.add(l),t.setItemGraphicEl(s,l)):n.remove(l)}).remove(function(t){var e=i.getItemGraphicEl(t);e&&e.fadeOut(function(){n.remove(e)})}).execute(),this._data=t},Iw.isPersistent=function(){return!0},Iw.updateLayout=function(){var t=this._data;t&&t.eachItemGraphicEl(function(e,n){var r=t.getItemLayout(n);e.attr("position",r)})},Iw.incrementalPrepareUpdate=function(t){this._seriesScope=js(t),this._data=null,this.group.removeAll()},Iw.incrementalUpdate=function(t,e,n){n=Ds(n);for(var r=t.start;r<t.end;r++){var i=e.getItemLayout(r);if(Ls(e,i,r,n)){var a=new this._symbolCtor(e,r,this._seriesScope);a.traverse(function(t){t.isGroup||(t.incremental=t.useHoverLayer=!0)}),a.attr("position",i),this.group.add(a),e.setItemGraphicEl(r,a)}}},Iw.remove=function(t){var e=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(t){t.fadeOut(function(){e.remove(t)})}):e.removeAll()};var Pw=tt,Lw=et,Dw=G,jw=U,Rw=[],Nw=[],Bw=[],Fw=Zn.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:jy(Zn.prototype.brush),buildPath:function(t,e){var n=e.points,r=0,i=n.length,a=Us(n,e.smoothConstraint);if(e.connectNulls){for(;i>0&&Bs(n[i-1]);i--);for(;r<i&&Bs(n[r]);r++);}for(;r<i;)r+=Fs(t,n,r,i,i,1,a.min,a.max,e.smooth,e.smoothMonotone,e.connectNulls)+1}}),Uw=Zn.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:jy(Zn.prototype.brush),buildPath:function(t,e){var n=e.points,r=e.stackedOnPoints,i=0,a=n.length,o=e.smoothMonotone,s=Us(n,e.smoothConstraint),u=Us(r,e.smoothConstraint);if(e.connectNulls){for(;a>0&&Bs(n[a-1]);a--);for(;i<a&&Bs(n[i]);i++);}for(;i<a;){var l=Fs(t,n,i,a,a,1,s.min,s.max,e.smooth,o,e.connectNulls);Fs(t,r,i+l-1,l,a,-1,u.min,u.max,e.stackedOnSmooth,o,e.connectNulls),i+=l+1,t.closePath()}}});fa.extend({type:"line",init:function(){var t=new kv,e=new Ps;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},render:function(t,e,n){var r=t.coordinateSystem,i=this.group,a=t.getData(),s=t.getModel("lineStyle"),u=t.getModel("areaStyle"),l=a.mapArray(a.getItemLayout),c="polar"===r.type,h=this._coordSys,f=this._symbolDraw,d=this._polyline,p=this._polygon,g=this._lineGroup,v=t.get("animation"),m=!u.isEmpty(),y=u.get("origin"),_=function(t,e,n){if(!n.valueDim)return[];for(var r=[],i=0,a=e.count();i<a;i++)r.push(Ns(n,t,e,i));return r}(r,a,Rs(r,a,y)),b=t.get("showSymbol"),x=b&&!c&&Ys(t,a,r),w=this._data;w&&w.eachItemGraphicEl(function(t,e){t.__temp&&(i.remove(t),w.setItemGraphicEl(e,null))}),b||f.remove(),i.add(g);var S=!c&&t.get("step");d&&h.type===r.type&&S===this._step?(m&&!p?p=this._newPolygon(l,_,r,v):p&&!m&&(g.remove(p),p=this._polygon=null),g.setClipPath(Gs(r,!1,!1,t)),b&&f.updateData(a,{isIgnore:x,clipShape:Gs(r,!1,!0,t)}),a.eachItemGraphicEl(function(t){t.stopAnimation(!0)}),zs(this._stackedOnPoints,_)&&zs(this._points,l)||(v?this._updateAnimation(a,_,r,n,S,y):(S&&(l=Ws(l,r,S),_=Ws(_,r,S)),d.setShape({points:l}),p&&p.setShape({points:l,stackedOnPoints:_})))):(b&&f.updateData(a,{isIgnore:x,clipShape:Gs(r,!1,!0,t)}),S&&(l=Ws(l,r,S),_=Ws(_,r,S)),d=this._newPolyline(l,r,v),m&&(p=this._newPolygon(l,_,r,v)),g.setClipPath(Gs(r,!0,!1,t)));var T=qs(a,r)||a.getVisual("color");d.useStyle(o(s.getLineStyle(),{fill:"none",stroke:T,lineJoin:"bevel"}));var O=t.get("smooth");if(O=Vs(t.get("smooth")),d.setShape({smooth:O,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")}),p){var M=a.getCalculationInfo("stackedOnSeries"),k=0;p.useStyle(o(u.getAreaStyle(),{fill:T,opacity:.7,lineJoin:"bevel"})),M&&(k=Vs(M.get("smooth"))),p.setShape({smooth:O,stackedOnSmooth:k,smoothMonotone:t.get("smoothMonotone"),connectNulls:t.get("connectNulls")})}this._data=a,this._coordSys=r,this._stackedOnPoints=_,this._points=l,this._step=S,this._valueOrigin=y},dispose:function(){},highlight:function(t,e,n,r){var i=t.getData(),a=fn(i,r);if(!(a instanceof Array)&&null!=a&&a>=0){var o=i.getItemGraphicEl(a);if(!o){var s=i.getItemLayout(a);if(!s)return;(o=new Os(i,a)).position=s,o.setZ(t.get("zlevel"),t.get("z")),o.ignore=isNaN(s[0])||isNaN(s[1]),o.__temp=!0,i.setItemGraphicEl(a,o),o.stopSymbolAnimation(!0),this.group.add(o)}o.highlight()}else fa.prototype.highlight.call(this,t,e,n,r)},downplay:function(t,e,n,r){var i=t.getData(),a=fn(i,r);if(null!=a&&a>=0){var o=i.getItemGraphicEl(a);o&&(o.__temp?(i.setItemGraphicEl(a,null),this.group.remove(o)):o.downplay())}else fa.prototype.downplay.call(this,t,e,n,r)},_newPolyline:function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new Fw({shape:{points:t},silent:!0,z2:10}),this._lineGroup.add(e),this._polyline=e,e},_newPolygon:function(t,e){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new Uw({shape:{points:t,stackedOnPoints:e},silent:!0}),this._lineGroup.add(n),this._polygon=n,n},_updateAnimation:function(t,e,n,r,i,a){var o=this._polyline,s=this._polygon,u=t.hostModel,l=function(t,e,n,r,i,a,o,s){for(var u=function(t,e){var n=[];return e.diff(t).add(function(t){n.push({cmd:"+",idx:t})}).update(function(t,e){n.push({cmd:"=",idx:e,idx1:t})}).remove(function(t){n.push({cmd:"-",idx:t})}).execute(),n}(t,e),l=[],c=[],h=[],f=[],d=[],p=[],g=[],v=Rs(i,e,o),m=Rs(a,t,s),y=0;y<u.length;y++){var _=u[y],b=!0;switch(_.cmd){case"=":var x=t.getItemLayout(_.idx),w=e.getItemLayout(_.idx1);(isNaN(x[0])||isNaN(x[1]))&&(x=w.slice()),l.push(x),c.push(w),h.push(n[_.idx]),f.push(r[_.idx1]),g.push(e.getRawIndex(_.idx1));break;case"+":l.push(i.dataToPoint([e.get(v.dataDimsForPoint[0],S=_.idx),e.get(v.dataDimsForPoint[1],S)])),c.push(e.getItemLayout(S).slice()),h.push(Ns(v,i,e,S)),f.push(r[S]),g.push(e.getRawIndex(S));break;case"-":var S=_.idx,T=t.getRawIndex(S);T!==S?(l.push(t.getItemLayout(S)),c.push(a.dataToPoint([t.get(m.dataDimsForPoint[0],S),t.get(m.dataDimsForPoint[1],S)])),h.push(n[S]),f.push(Ns(m,a,t,S)),g.push(T)):b=!1}b&&(d.push(_),p.push(p.length))}p.sort(function(t,e){return g[t]-g[e]});var O=[],M=[],k=[],C=[],E=[];for(y=0;y<p.length;y++)O[y]=l[S=p[y]],M[y]=c[S],k[y]=h[S],C[y]=f[S],E[y]=d[S];return{current:O,next:M,stackedOnCurrent:k,stackedOnNext:C,status:E}}(this._data,t,this._stackedOnPoints,e,this._coordSys,n,this._valueOrigin,a),c=l.current,h=l.stackedOnCurrent,f=l.next,d=l.stackedOnNext;i&&(c=Ws(l.current,n,i),h=Ws(l.stackedOnCurrent,n,i),f=Ws(l.next,n,i),d=Ws(l.stackedOnNext,n,i)),o.shape.__points=l.current,o.shape.points=c,Dr(o,{shape:{points:f}},u),s&&(s.setShape({points:c,stackedOnPoints:h}),Dr(s,{shape:{points:f,stackedOnPoints:d}},u));for(var p=[],g=l.status,v=0;v<g.length;v++)if("="===g[v].cmd){var m=t.getItemGraphicEl(g[v].idx1);m&&p.push({el:m,ptIdx:v})}o.animators&&o.animators.length&&o.animators[0].during(function(){for(var t=0;t<p.length;t++)p[t].el.attr("position",o.shape.__points[p[t].ptIdx])})},remove:function(t){var e=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(t,r){t.__temp&&(e.remove(t),n.setItemGraphicEl(r,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var zw=function(t,e,n){return{seriesType:t,performRawSeries:!0,reset:function(t,r,i){var a=t.getData(),o=t.get("symbol")||e,s=t.get("symbolSize"),u=t.get("symbolKeepAspect");if(a.setVisual({legendSymbol:n||o,symbol:o,symbolSize:s,symbolKeepAspect:u}),!r.isSeriesFiltered(t))return{dataEach:a.hasItemOption||"function"==typeof s?function(e,n){if("function"==typeof s){var r=t.getRawValue(n),i=t.getDataParams(n);e.setItemVisual(n,"symbolSize",s(r,i))}if(e.hasItemOption){var a=e.getItemModel(n),o=a.getShallow("symbol",!0),u=a.getShallow("symbolSize",!0),l=a.getShallow("symbolKeepAspect",!0);null!=o&&e.setItemVisual(n,"symbol",o),null!=u&&e.setItemVisual(n,"symbolSize",u),null!=l&&e.setItemVisual(n,"symbolKeepAspect",l)}}:null}}}},Vw=function(t){return{seriesType:t,plan:yb(),reset:function(t){var e=t.getData(),n=t.coordinateSystem,r=t.pipelineContext.large;if(n){var i=d(n.dimensions,function(t){return e.mapDimension(t)}).slice(0,2),a=i.length,o=e.getCalculationInfo("stackResultDimension");return No(e,i[0])&&(i[0]=o),No(e,i[1])&&(i[1]=o),a&&{progress:function(t,e){for(var o=r&&new Float32Array((t.end-t.start)*a),s=t.start,u=0,l=[],c=[];s<t.end;s++){var h;if(1===a)f=e.get(i[0],s),h=!isNaN(f)&&n.dataToPoint(f,null,c);else{var f=l[0]=e.get(i[0],s),d=l[1]=e.get(i[1],s);h=!isNaN(f)&&!isNaN(d)&&n.dataToPoint(l,null,c)}r?(o[u++]=h?h[0]:NaN,o[u++]=h?h[1]:NaN):e.setItemLayout(s,h&&h.slice()||[NaN,NaN])}r&&e.setLayout("symbolPoints",o)}}}}}},Hw={average:function(t){for(var e=0,n=0,r=0;r<t.length;r++)isNaN(t[r])||(e+=t[r],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]||0;return e},max:function(t){for(var e=-1/0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,n=0;n<t.length;n++)t[n]<e&&(e=t[n]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}},Gw=function(t,e){return Math.round(t.length/2)},Ww=function(t){this._axes={},this._dimList=[],this.name=t||""};Ww.prototype={constructor:Ww,type:"cartesian",getAxis:function(t){return this._axes[t]},getAxes:function(){return d(this._dimList,Xs,this)},getAxesByScale:function(t){return t=t.toLowerCase(),g(this.getAxes(),function(e){return e.scale.type===t})},addAxis:function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},dataToCoord:function(t){return this._dataCoordConvert(t,"dataToCoord")},coordToData:function(t){return this._dataCoordConvert(t,"coordToData")},_dataCoordConvert:function(t,e){for(var n=this._dimList,r=t instanceof Array?[]:{},i=0;i<n.length;i++){var a=n[i];r[a]=this._axes[a][e](t[a])}return r}},$s.prototype={constructor:$s,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(t){var e=this.getAxis("x"),n=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},dataToPoint:function(t,e,n){var r=this.getAxis("x"),i=this.getAxis("y");return(n=n||[])[0]=r.toGlobalCoord(r.dataToCoord(t[0])),n[1]=i.toGlobalCoord(i.dataToCoord(t[1])),n},clampData:function(t,e){var n=this.getAxis("x").scale,r=this.getAxis("y").scale,i=n.getExtent(),a=r.getExtent(),o=n.parse(t[0]),s=r.parse(t[1]);return(e=e||[])[0]=Math.min(Math.max(Math.min(i[0],i[1]),o),Math.max(i[0],i[1])),e[1]=Math.min(Math.max(Math.min(a[0],a[1]),s),Math.max(a[0],a[1])),e},pointToData:function(t,e){var n=this.getAxis("x"),r=this.getAxis("y");return(e=e||[])[0]=n.coordToData(n.toLocalCoord(t[0])),e[1]=r.coordToData(r.toLocalCoord(t[1])),e},getOtherAxis:function(t){return this.getAxis("x"===t.dim?"y":"x")}},l($s,Ww);var qw=function(t,e,n,r,i){xw.call(this,t,e,n),this.type=r||"value",this.position=i||"bottom"};qw.prototype={constructor:qw,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},getGlobalExtent:function(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]>e[1]&&e.reverse(),e},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(t,e){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),e)},toLocalCoord:null,toGlobalCoord:null},l(qw,xw);var Yw={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},Xw={};Xw.categoryAxis=r({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},Yw),Xw.valueAxis=r({boundaryGap:[0,0],splitNumber:5},Yw),Xw.timeAxis=o({scale:!0,min:"dataMin",max:"dataMax"},Xw.valueAxis),Xw.logAxis=o({scale:!0,logBase:10},Xw.valueAxis);var $w=["value","category","time","log"],Zw=function(t,e,n,a){f($w,function(o){e.extend({type:t+"Axis."+o,mergeDefaultAndTheme:function(e,i){var a=this.layoutMode,s=a?xi(e):{};r(e,i.getTheme().get(o+"Axis")),r(e,this.getDefaultOption()),e.type=n(t,e),a&&bi(e,s,a)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=zo.createByAxisModel(this))},getCategories:function(t){var e=this.option;if("category"===e.type)return t?e.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:i([{},Xw[o+"Axis"],a],!0)})}),A_.registerSubTypeDefaulter(t+"Axis",m(n,t))},Qw=A_.extend({type:"cartesian2dAxis",axis:null,init:function(){Qw.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){Qw.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){Qw.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});r(Qw.prototype,uw);var Kw={offset:0};Zw("x",Qw,Zs,Kw),Zw("y",Qw,Zs,Kw),A_.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});var Jw=Ks.prototype;Jw.type="grid",Jw.axisPointerEnabled=!0,Jw.getRect=function(){return this._rect},Jw.update=function(t,e){var n=this._axesMap;this._updateScale(t,this.model),f(n.x,function(t){as(t.scale,t.model)}),f(n.y,function(t){as(t.scale,t.model)});var r={};f(n.x,function(t){Js(n,"y",t,r)}),f(n.y,function(t){Js(n,"x",t,r)}),this.resize(this.model,e)},Jw.resize=function(t,e,n){function r(){f(a,function(t){var e=t.isHorizontal(),n=e?[0,i.width]:[0,i.height],r=t.inverse?1:0;t.setExtent(n[r],n[1-r]),function(t,e){var n=t.getExtent(),r=n[0]+n[1];t.toGlobalCoord="x"===t.dim?function(t){return t+e}:function(t){return r-t+e},t.toLocalCoord="x"===t.dim?function(t){return t-e}:function(t){return r-t+e}}(t,e?i.x:i.y)})}var i=yi(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()});this._rect=i;var a=this._axesList;r(),!n&&t.get("containLabel")&&(f(a,function(t){if(!t.model.get("axisLabel.inside")){var e=function(t){var e=t.scale;if(t.model.get("axisLabel.show")&&!e.isBlank()){var n,r,i="category"===t.type,a=e.getExtent();r=i?e.count():(n=e.getTicks()).length;var o,s=t.getLabelModel(),u=ss(t),l=1;r>40&&(l=Math.ceil(r/40));for(var c=0;c<r;c+=l){var h=u(n?n[c]:a[0]+c),f=ls(s.getTextRect(h),s.get("rotate")||0);o?o.union(f):o=f}return o}}(t);if(e){var n=t.isHorizontal()?"height":"width",r=t.model.get("axisLabel.margin");i[n]-=e[n]+r,"top"===t.position?i.y+=e.height+r:"left"===t.position&&(i.x+=e.width+r)}}}),r())},Jw.getAxis=function(t,e){var n=this._axesMap[t];if(null!=n){if(null==e)for(var r in n)if(n.hasOwnProperty(r))return n[r];return n[e]}},Jw.getAxes=function(){return this._axesList.slice()},Jw.getCartesian=function(t,e){if(null!=t&&null!=e)return this._coordsMap["x"+t+"y"+e];x(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var n=0,r=this._coordsList;n<r.length;n++)if(r[n].getAxis("x").index===t||r[n].getAxis("y").index===e)return r[n]},Jw.getCartesians=function(){return this._coordsList.slice()},Jw.convertToPixel=function(t,e,n){var r=this._findConvertTarget(t,e);return r.cartesian?r.cartesian.dataToPoint(n):r.axis?r.axis.toGlobalCoord(r.axis.dataToCoord(n)):null},Jw.convertFromPixel=function(t,e,n){var r=this._findConvertTarget(t,e);return r.cartesian?r.cartesian.pointToData(n):r.axis?r.axis.coordToData(r.axis.toLocalCoord(n)):null},Jw._findConvertTarget=function(t,e){var n,r,i=e.seriesModel,a=e.xAxisModel||i&&i.getReferringComponents("xAxis")[0],o=e.yAxisModel||i&&i.getReferringComponents("yAxis")[0],s=e.gridModel;return i?u(this._coordsList,n=i.coordinateSystem)<0&&(n=null):a&&o?n=this.getCartesian(a.componentIndex,o.componentIndex):a?r=this.getAxis("x",a.componentIndex):o?r=this.getAxis("y",o.componentIndex):s&&s.coordinateSystem===this&&(n=this._coordsList[0]),{cartesian:n,axis:r}},Jw.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},Jw._initCartesian=function(t,e,n){function r(e){return function(n,r){if(Qs(n,t)){var s=n.get("position");"x"===e?"top"!==s&&"bottom"!==s&&i[s="bottom"]&&(s="top"===s?"bottom":"top"):"left"!==s&&"right"!==s&&i[s="left"]&&(s="left"===s?"right":"left"),i[s]=!0;var u=new qw(e,os(n),[0,0],n.get("type"),s);u.onBand="category"===u.type&&n.get("boundaryGap"),u.inverse=n.get("inverse"),n.axis=u,u.model=n,u.grid=this,u.index=r,this._axesList.push(u),a[e][r]=u,o[e]++}}}var i={left:!1,right:!1,top:!1,bottom:!1},a={x:{},y:{}},o={x:0,y:0};if(e.eachComponent("xAxis",r("x"),this),e.eachComponent("yAxis",r("y"),this),!o.x||!o.y)return this._axesMap={},void(this._axesList=[]);this._axesMap=a,f(a.x,function(e,n){f(a.y,function(r,i){var a="x"+n+"y"+i,o=new $s(a);o.grid=this,o.model=t,this._coordsMap[a]=o,this._coordsList.push(o),o.addAxis(e),o.addAxis(r)},this)},this)},Jw._updateScale=function(t,e){function n(t,e,n){f(t.mapDimension(e.dim,!0),function(n){e.scale.unionExtentFromData(t,Bo(t,n))})}f(this._axesList,function(t){t.scale.setExtent(1/0,-1/0)}),t.eachSeries(function(t){if(nu(t)){var r=eu(t),i=r[0],a=r[1];if(!Qs(i,e)||!Qs(a,e))return;var o=this.getCartesian(i.componentIndex,a.componentIndex),s=t.getData(),u=o.getAxis("x"),l=o.getAxis("y");"list"===s.type&&(n(s,u),n(s,l))}},this)},Jw.getTooltipAxes=function(t){var e=[],n=[];return f(this.getCartesians(),function(r){var i=null!=t&&"auto"!==t?r.getAxis(t):r.getBaseAxis(),a=r.getOtherAxis(i);u(e,i)<0&&e.push(i),u(n,a)<0&&n.push(a)}),{baseAxes:e,otherAxes:n}};var tS=["xAxis","yAxis"];Ks.create=function(t,e){var n=[];return t.eachComponent("grid",function(r,i){var a=new Ks(r,t,e);a.name="grid_"+i,a.resize(r,e,!0),r.coordinateSystem=a,n.push(a)}),t.eachSeries(function(t){if(nu(t)){var e=eu(t),n=e[0],r=e[1],i=n.getCoordSysModel().coordinateSystem;t.coordinateSystem=i.getCartesian(n.componentIndex,r.componentIndex)}}),n},Ks.dimensions=Ks.prototype.dimensions=$s.prototype.dimensions,ji.register("cartesian2d",Ks);var eS=Math.PI,nS=function(t,e){this.opt=e,this.axisModel=t,o(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new kv;var n=new kv({position:e.position.slice(),rotation:e.rotation});n.updateTransform(),this._transform=n.transform,this._dumbGroup=n};nS.prototype={constructor:nS,hasBuilder:function(t){return!!rS[t]},add:function(t){rS[t].call(this)},getGroup:function(){return this.group}};var rS={axisLine:function(){var t=this.opt,e=this.axisModel;if(e.get("axisLine.show")){var n=this.axisModel.axis.getExtent(),r=this._transform,i=[n[0],0],o=[n[1],0];r&&(J(i,i,r),J(o,o,r));var s=a({lineCap:"round"},e.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new Hy(lr({anid:"line",shape:{x1:i[0],y1:i[1],x2:o[0],y2:o[1]},style:s,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1})));var u=e.get("axisLine.symbol"),l=e.get("axisLine.symbolSize"),c=e.get("axisLine.symbolOffset")||0;if("number"==typeof c&&(c=[c,c]),null!=u){"string"==typeof u&&(u=[u,u]),"string"!=typeof l&&"number"!=typeof l||(l=[l,l]);var h=l[0],d=l[1];f([{rotate:t.rotation+Math.PI/2,offset:c[0],r:0},{rotate:t.rotation-Math.PI/2,offset:c[1],r:Math.sqrt((i[0]-o[0])*(i[0]-o[0])+(i[1]-o[1])*(i[1]-o[1]))}],function(e,n){if("none"!==u[n]&&null!=u[n]){var r=hs(u[n],-h/2,-d/2,h,d,s.stroke,!0),a=e.r+e.offset,o=[i[0]+a*Math.cos(t.rotation),i[1]-a*Math.sin(t.rotation)];r.attr({rotation:e.rotate,position:o,silent:!0}),this.group.add(r)}},this)}}},axisTickLabel:function(){var t=this.axisModel,e=this.opt,n=function(t,e,n){var r=e.axis;if(e.get("axisTick.show")&&!r.scale.isBlank()){for(var i=e.getModel("axisTick"),a=i.getModel("lineStyle"),s=i.get("length"),u=r.getTicksCoords(),l=[],c=[],h=t._transform,f=[],d=0;d<u.length;d++){var p=u[d].coord;l[0]=p,l[1]=0,c[0]=p,c[1]=n.tickDirection*s,h&&(J(l,l,h),J(c,c,h));var g=new Hy(lr({anid:"tick_"+u[d].tickValue,shape:{x1:l[0],y1:l[1],x2:c[0],y2:c[1]},style:o(a.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}),z2:2,silent:!0}));t.group.add(g),f.push(g)}return f}}(this,t,e);!function(t,e,n){var r=t.get("axisLabel.showMinLabel"),i=t.get("axisLabel.showMaxLabel"),a=(e=e||[])[0],o=e[1],s=e[e.length-1],u=e[e.length-2],l=(n=n||[])[0],c=n[1],h=n[n.length-1],f=n[n.length-2];!1===r?(au(a),au(l)):ou(a,o)&&(r?(au(o),au(c)):(au(a),au(l))),!1===i?(au(s),au(h)):ou(u,s)&&(i?(au(u),au(f)):(au(s),au(h)))}(t,function(t,e,n){var r=e.axis;if(M(n.axisLabelShow,e.get("axisLabel.show"))&&!r.scale.isBlank()){var i=e.getModel("axisLabel"),a=i.get("margin"),o=r.getViewLabels(),s=(M(n.labelRotate,i.get("rotate"))||0)*eS/180,u=iS(n.rotation,s,n.labelDirection),l=e.getCategories(!0),c=[],h=iu(e),d=e.get("triggerEvent");return f(o,function(o,s){var f=o.tickValue,p=o.formattedLabel,g=o.rawLabel,v=i;l&&l[f]&&l[f].textStyle&&(v=new Vr(l[f].textStyle,i,e.ecModel));var m=v.getTextColor()||e.get("axisLine.lineStyle.color"),y=[r.dataToCoord(f),n.labelOffset+n.labelDirection*a],_=new Py({anid:"label_"+f,position:y,rotation:u.rotation,silent:h,z2:10});Mr(_.style,v,{text:p,textAlign:v.getShallow("align",!0)||u.textAlign,textVerticalAlign:v.getShallow("verticalAlign",!0)||v.getShallow("baseline",!0)||u.textVerticalAlign,textFill:"function"==typeof m?m("category"===r.type?g:"value"===r.type?f+"":f,s):m}),d&&(_.eventData=ru(e),_.eventData.targetType="axisLabel",_.eventData.value=g),t._dumbGroup.add(_),_.updateTransform(),c.push(_),t.group.add(_),_.decomposeTransform()}),c}}(this,t,e),n)},axisName:function(){var t=this.opt,e=this.axisModel,n=M(t.axisName,e.get("name"));if(n){var r,i,o=e.get("nameLocation"),s=t.nameDirection,u=e.getModel("nameTextStyle"),l=e.get("nameGap")||0,c=this.axisModel.axis.getExtent(),h=c[0]>c[1]?-1:1,f=["start"===o?c[0]-h*l:"end"===o?c[1]+h*l:(c[0]+c[1])/2,su(o)?t.labelOffset+s*l:0],d=e.get("nameRotate");null!=d&&(d=d*eS/180),su(o)?r=iS(t.rotation,null!=d?d:t.rotation,s):(r=function(t,e,n,r){var i,a,o=ti((d||0)-t.rotation),s=r[0]>r[1],u="start"===e&&!s||"start"!==e&&s;return ei(o-eS/2)?(a=u?"bottom":"top",i="center"):ei(o-1.5*eS)?(a=u?"top":"bottom",i="center"):(a="middle",i=o<1.5*eS&&o>eS/2?u?"left":"right":u?"right":"left"),{rotation:o,textAlign:i,textVerticalAlign:a}}(t,o,0,c),null!=(i=t.axisNameAvailableWidth)&&(i=Math.abs(i/Math.sin(r.rotation)),!isFinite(i)&&(i=null)));var p=u.getFont(),g=e.get("nameTruncate",!0)||{},v=g.ellipsis,m=M(t.nameTruncateMaxWidth,g.maxWidth,i),y=null!=v&&null!=m?w_(n,m,p,v,{minChar:2,placeholder:g.placeholder}):n,_=e.get("tooltip",!0),b=e.mainType,x={componentType:b,name:n,$vars:["name"]};x[b+"Index"]=e.componentIndex;var w=new Py({anid:"name",__fullText:n,__truncatedText:y,position:f,rotation:r.rotation,silent:iu(e),z2:1,tooltip:_&&_.show?a({content:n,formatter:function(){return n},formatterParams:x},_):null});Mr(w.style,u,{text:y,textFont:p,textFill:u.getTextColor()||e.get("axisLine.lineStyle.color"),textAlign:r.textAlign,textVerticalAlign:r.textVerticalAlign}),e.get("triggerEvent")&&(w.eventData=ru(e),w.eventData.targetType="axisName",w.eventData.name=n),this._dumbGroup.add(w),w.updateTransform(),this.group.add(w),w.decomposeTransform()}}},iS=nS.innerTextLayout=function(t,e,n){var r,i,a=ti(e-t);return ei(a)?(i=n>0?"top":"bottom",r="center"):ei(a-eS)?(i=n>0?"bottom":"top",r="center"):(i="middle",r=a>0&&a<eS?n>0?"right":"left":n>0?"left":"right"),{rotation:a,textAlign:r,textVerticalAlign:i}},aS=f,oS=m,sS=vo({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(t,e,n,r){this.axisPointerClass&&function(t){var e=cu(t);if(e){var n=e.axisPointerModel,r=e.axis.scale,i=n.option,a=n.get("status"),o=n.get("value");null!=o&&(o=r.parse(o));var s=hu(n);null==a&&(i.status=s?"show":"hide");var u=r.getExtent().slice();u[0]>u[1]&&u.reverse(),(null==o||o>u[1])&&(o=u[1]),o<u[0]&&(o=u[0]),i.value=o,s&&(i.status=e.axis.scale.isBlank()?"hide":"show")}}(t),sS.superApply(this,"render",arguments),du(this,t,0,n,0,!0)},updateAxisPointer:function(t,e,n,r,i){du(this,t,0,n,0,!1)},remove:function(t,e){var n=this._axisPointer;n&&n.remove(e),sS.superApply(this,"remove",arguments)},dispose:function(t,e){pu(this,e),sS.superApply(this,"dispose",arguments)}}),uS=[];sS.registerAxisPointerClass=function(t,e){uS[t]=e},sS.getAxisPointerClass=function(t){return t&&uS[t]};var lS=["axisLine","axisTickLabel","axisName"],cS=["splitArea","splitLine"],hS=sS.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(t,e,n,r){this.group.removeAll();var i=this._axisGroup;if(this._axisGroup=new kv,this.group.add(this._axisGroup),t.get("show")){var a=t.getCoordSysModel(),o=gu(a,t),s=new nS(t,o);f(lS,s.add,s),this._axisGroup.add(s.getGroup()),f(cS,function(e){t.get(e+".show")&&this["_"+e](t,a)},this),Fr(i,this._axisGroup,t),hS.superCall(this,"render",t,e,n,r)}},remove:function(){this._splitAreaColors=null},_splitLine:function(t,e){var n=t.axis;if(!n.scale.isBlank()){var r=t.getModel("splitLine"),i=r.getModel("lineStyle"),a=i.get("color");a=y(a)?a:[a];for(var s=e.coordinateSystem.getRect(),u=n.isHorizontal(),l=0,c=n.getTicksCoords({tickModel:r}),h=[],f=[],d=i.getLineStyle(),p=0;p<c.length;p++){var g=n.toGlobalCoord(c[p].coord);u?(h[0]=g,h[1]=s.y,f[0]=g,f[1]=s.y+s.height):(h[0]=s.x,h[1]=g,f[0]=s.x+s.width,f[1]=g);var v=l++%a.length;this._axisGroup.add(new Hy(lr({anid:null!=c[p].tickValue?"line_"+c[p].tickValue:null,shape:{x1:h[0],y1:h[1],x2:f[0],y2:f[1]},style:o({stroke:a[v]},d),silent:!0})))}}},_splitArea:function(t,e){var n=t.axis;if(!n.scale.isBlank()){var r=t.getModel("splitArea"),i=r.getModel("areaStyle"),a=i.get("color"),s=e.coordinateSystem.getRect(),u=n.getTicksCoords({tickModel:r,clamp:!0});if(u.length){var l=a.length,c=this._splitAreaColors,h=R(),f=0;if(c)for(v=0;v<u.length;v++){var d=c.get(u[v].tickValue);if(null!=d){f=(d+(l-1)*v)%l;break}}var p=n.toGlobalCoord(u[0].coord),g=i.getAreaStyle();a=y(a)?a:[a];for(var v=1;v<u.length;v++){var m,_,b,x,w=n.toGlobalCoord(u[v].coord);n.isHorizontal()?(_=s.y,x=s.height,p=(m=p)+(b=w-m)):(m=s.x,b=s.width,p=(_=p)+(x=w-_));var S=u[v-1].tickValue;null!=S&&h.set(S,f),this._axisGroup.add(new Vy({anid:null!=S?"area_"+S:null,shape:{x:m,y:_,width:b,height:x},style:o({fill:a[f]},g),silent:!0})),f=(f+1)%l}this._splitAreaColors=h}}}});hS.extend({type:"xAxis"}),hS.extend({type:"yAxis"}),vo({type:"grid",render:function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new Vy({shape:t.coordinateSystem.getRect(),style:o({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))}}),oo(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})}),ho(zw("line","circle","line")),co(Vw("line")),so(ax.PROCESSOR.STATISTIC,{seriesType:"line",modifyOutputEnd:!0,reset:function(t,e,n){var r=t.getData(),i=t.get("sampling"),a=t.coordinateSystem;if("cartesian2d"===a.type&&i){var o,s=a.getBaseAxis(),u=a.getOtherAxis(s),l=s.getExtent(),c=l[1]-l[0],h=Math.round(r.count()/c);h>1&&("string"==typeof i?o=Hw[i]:"function"==typeof i&&(o=i),o&&t.setData(r.downSample(r.mapDimension(u.dim),1/h,o,Gw)))}}});var fS=gb.extend({type:"series.__base_bar__",getInitialData:function(t,e){return Fo(this.getSource(),this)},getMarkerPosition:function(t){var e=this.coordinateSystem;if(e){var n=e.dataToPoint(e.clampData(t)),r=this.getData(),i=r.getLayout("offset"),a=r.getLayout("size");return n[e.getBaseAxis().isHorizontal()?0:1]+=i+a/2,n}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});fS.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return e>t&&(t=e),t}});var dS=Om([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),pS=["itemStyle","barBorderWidth"];a(Vr.prototype,{getBarItemStyle:function(t){var e=dS(this,t);if(this.getBorderLineDash){var n=this.getBorderLineDash();n&&(e.lineDash=n)}return e}}),yo({type:"bar",render:function(t,e,n){this._updateDrawMode(t);var r=t.get("coordinateSystem");return"cartesian2d"!==r&&"polar"!==r||(this._isLargeDraw?this._renderLarge(t,e,n):this._renderNormal(t,e,n)),this.group},incrementalPrepareRender:function(t,e,n){this._clear(),this._updateDrawMode(t)},incrementalRender:function(t,e,n,r){this._incrementalRenderLarge(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormal:function(t,e,n){var r,i=this.group,a=t.getData(),o=this._data,s=t.coordinateSystem,u=s.getBaseAxis();"cartesian2d"===s.type?r=u.isHorizontal():"polar"===s.type&&(r="angle"===u.dim);var l=t.isAnimationEnabled()?t:null;a.diff(o).add(function(e){if(a.hasValue(e)){var n=a.getItemModel(e),o=vS[s.type](a,e,n),u=gS[s.type](a,e,n,o,r,l);a.setItemGraphicEl(e,u),i.add(u),bu(u,a,e,n,0,t,0,"polar"===s.type)}}).update(function(e,n){var u=o.getItemGraphicEl(n);if(a.hasValue(e)){var c=a.getItemModel(e),h=vS[s.type](a,e,c);u?Dr(u,{shape:h},l,e):u=gS[s.type](a,e,c,h,r,l,!0),a.setItemGraphicEl(e,u),i.add(u),bu(u,a,e,c,0,t,0,"polar"===s.type)}else i.remove(u)}).remove(function(t){var e=o.getItemGraphicEl(t);"cartesian2d"===s.type?e&&yu(t,l,e):e&&_u(t,l,e)}).execute(),this._data=a},_renderLarge:function(t,e,n){this._clear(),xu(t,this.group)},_incrementalRenderLarge:function(t,e){xu(e,this.group,!0)},dispose:B,remove:function(t){this._clear(t)},_clear:function(t){var e=this.group,n=this._data;t&&t.get("animation")&&n&&!this._isLargeDraw?n.eachItemGraphicEl(function(e){"sector"===e.type?_u(e.dataIndex,t,e):yu(e.dataIndex,t,e)}):e.removeAll(),this._data=null}});var gS={cartesian2d:function(t,e,n,r,i,o,s){var u=new Vy({shape:a({},r)});if(o){var l=i?"height":"width",c={};u.shape[l]=0,c[l]=r[l],a_[s?"updateProps":"initProps"](u,{shape:c},o,e)}return u},polar:function(t,e,n,r,i,a,s){var u=new Ry({shape:o({clockwise:r.startAngle<r.endAngle},r)});if(a){var l=i?"r":"endAngle",c={};u.shape[l]=i?0:r.startAngle,c[l]=r[l],a_[s?"updateProps":"initProps"](u,{shape:c},a,e)}return u}},vS={cartesian2d:function(t,e,n){var r=t.getItemLayout(e),i=function(t,e){var n=t.get(pS)||0;return Math.min(n,Math.abs(e.width),Math.abs(e.height))}(n,r),a=r.width>0?1:-1,o=r.height>0?1:-1;return{x:r.x+a*i/2,y:r.y+o*i/2,width:r.width-a*i,height:r.height-o*i}},polar:function(t,e,n){var r=t.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle}}},mS=Zn.extend({type:"largeBar",shape:{points:[]},buildPath:function(t,e){for(var n=e.points,r=this.__startPoint,i=this.__valueIdx,a=0;a<n.length;a+=2)r[this.__valueIdx]=n[a+i],t.moveTo(r[0],r[1]),t.lineTo(n[a],n[a+1])}});co(m(Jo,"bar")),co(Yx),ho({seriesType:"bar",reset:function(t){t.getData().setVisual("legendSymbol","roundRect")}});var yS=function(t,e,n){e=y(e)&&{coordDimensions:e}||a({},e);var r=t.getSource(),i=Bx(r,e),o=new jx(i,t);return o.initData(r,n),o},_S={updateSelectedMap:function(t){this._targetList=y(t)?t.slice():[],this._selectTargetMap=p(t||[],function(t,e){return t.set(e.name,e),t},R())},select:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);"single"===this.get("selectedMode")&&this._selectTargetMap.each(function(t){t.selected=!1}),n&&(n.selected=!0)},unSelect:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);n&&(n.selected=!1)},toggleSelected:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);if(null!=n)return this[n.selected?"unSelect":"select"](t,e),n.selected},isSelected:function(t,e){var n=null!=e?this._targetList[e]:this._selectTargetMap.get(t);return n&&n.selected}},bS=mo({type:"series.pie",init:function(t){bS.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()},this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(t)},mergeOption:function(t){bS.superCall(this,"mergeOption",t),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(t,e){return yS(this,["value"])},_createSelectableList:function(){for(var t=this.getRawData(),e=t.mapDimension("value"),n=[],r=0,i=t.count();r<i;r++)n.push({name:t.getName(r),value:t.get(e,r),selected:ea(t,r,"selected")});return n},getDataParams:function(t){var e=this.getData(),n=bS.superCall(this,"getDataParams",t),r=[];return e.each(e.mapDimension("value"),function(t){r.push(t)}),n.percent=Jr(r,t,e.hostModel.get("percentPrecision")),n.$vars.push("percent"),n},_defaultLabelLine:function(t){on(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,label:{rotate:!1,show:!0,position:"outer"},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationEasing:"cubicOut"}});c(bS,_S);var xS=Tu.prototype;xS.updateData=function(t,e,n){function r(){s.stopAnimation(!0),s.animateTo({shape:{r:c.r+u.get("hoverOffset")}},300,"elasticOut")}function i(){s.stopAnimation(!0),s.animateTo({shape:{r:c.r}},300,"elasticOut")}var s=this.childAt(0),u=t.hostModel,l=t.getItemModel(e),c=t.getItemLayout(e),h=a({},c);h.label=null,n?(s.setShape(h),"scale"===u.getShallow("animationType")?(s.shape.r=c.r0,jr(s,{shape:{r:c.r}},u,e)):(s.shape.endAngle=c.startAngle,Dr(s,{shape:{endAngle:c.endAngle}},u,e))):Dr(s,{shape:h},u,e);var f=t.getItemVisual(e,"color");s.useStyle(o({lineJoin:"bevel",fill:f},l.getModel("itemStyle").getItemStyle())),s.hoverStyle=l.getModel("emphasis.itemStyle").getItemStyle();var d=l.getShallow("cursor");d&&s.attr("cursor",d),Su(this,t.getItemLayout(e),u.isSelected(null,e),u.get("selectedOffset"),u.get("animation")),s.off("mouseover").off("mouseout").off("emphasis").off("normal"),l.get("hoverAnimation")&&u.isAnimationEnabled()&&s.on("mouseover",r).on("mouseout",i).on("emphasis",r).on("normal",i),this._updateLabel(t,e),Sr(this)},xS._updateLabel=function(t,e){var n=this.childAt(1),r=this.childAt(2),i=t.hostModel,a=t.getItemModel(e),o=t.getItemLayout(e).label,s=t.getItemVisual(e,"color");Dr(n,{shape:{points:o.linePoints||[[o.x,o.y],[o.x,o.y],[o.x,o.y]]}},i,e),Dr(r,{style:{x:o.x,y:o.y}},i,e),r.attr({rotation:o.rotation,origin:[o.x,o.y],z2:10});var u=a.getModel("label"),l=a.getModel("emphasis.label"),c=a.getModel("labelLine"),h=a.getModel("emphasis.labelLine");s=t.getItemVisual(e,"color"),Or(r.style,r.hoverStyle={},u,l,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:t.getName(e),autoColor:s,useInsideStyle:!!o.inside},{textAlign:o.textAlign,textVerticalAlign:o.verticalAlign,opacity:t.getItemVisual(e,"opacity")}),r.ignore=r.normalIgnore=!u.get("show"),r.hoverIgnore=!l.get("show"),n.ignore=n.normalIgnore=!c.get("show"),n.hoverIgnore=!h.get("show"),n.setStyle({stroke:s,opacity:t.getItemVisual(e,"opacity")}),n.setStyle(c.getModel("lineStyle").getLineStyle()),n.hoverStyle=h.getModel("lineStyle").getLineStyle();var f=c.get("smooth");f&&!0===f&&(f=.4),n.setShape({smooth:f})},l(Tu,kv),fa.extend({type:"pie",init:function(){var t=new kv;this._sectorGroup=t},render:function(t,e,n,r){if(!r||r.from!==this.uid){var i=t.getData(),a=this._data,o=this.group,s=e.get("animation"),u=!a,l=t.get("animationType"),c=m(wu,this.uid,t,s,n),h=t.get("selectedMode");if(i.diff(a).add(function(t){var e=new Tu(i,t);u&&"scale"!==l&&e.eachChild(function(t){t.stopAnimation(!0)}),h&&e.on("click",c),i.setItemGraphicEl(t,e),o.add(e)}).update(function(t,e){var n=a.getItemGraphicEl(e);n.updateData(i,t),n.off("click"),h&&n.on("click",c),o.add(n),i.setItemGraphicEl(t,n)}).remove(function(t){var e=a.getItemGraphicEl(t);o.remove(e)}).execute(),s&&u&&i.count()>0&&"scale"!==l){var f=i.getItemLayout(0),d=Math.max(n.getWidth(),n.getHeight())/2,p=v(o.removeClipPath,o);o.setClipPath(this._createClipPath(f.cx,f.cy,d,f.startAngle,f.clockwise,p,t))}else o.removeClipPath();this._data=i}},dispose:function(){},_createClipPath:function(t,e,n,r,i,a,o){var s=new Ry({shape:{cx:t,cy:e,r0:0,r:n,startAngle:r,endAngle:r,clockwise:i}});return jr(s,{shape:{endAngle:r+(i?1:-1)*Math.PI*2}},o,a),s},containPoint:function(t,e){var n=e.getData().getItemLayout(0);if(n){var r=t[0]-n.cx,i=t[1]-n.cy,a=Math.sqrt(r*r+i*i);return a<=n.r&&a>=n.r0}}});var wS=function(t,e){f(e,function(e){e.update="updateView",uo(e,function(n,r){var i={};return r.eachComponent({mainType:"series",subType:t,query:n},function(t){t[e.method]&&t[e.method](n.name,n.dataIndex);var r=t.getData();r.each(function(e){var n=r.getName(e);i[n]=t.isSelected(n)||!1})}),{name:n.name,selected:i}})})},SS=function(t){return{getTargetSeries:function(e){var n={},r=R();return e.eachSeriesByType(t,function(t){t.__paletteScope=n,r.set(t.uid,t)}),r},reset:function(t,e){var n=t.getRawData(),r={},i=t.getData();i.each(function(t){var e=i.getRawIndex(t);r[e]=t}),n.each(function(e){var a=r[e],o=null!=a&&i.getItemVisual(a,"color",!0);if(o)n.setItemVisual(e,"color",o);else{var s=n.getItemModel(e).get("itemStyle.color")||t.getColorFromPalette(n.getName(e)||e+"",t.__paletteScope,n.count());n.setItemVisual(e,"color",s),null!=a&&i.setItemVisual(a,"color",s)}})}}},TS=2*Math.PI,OS=Math.PI/180,MS=function(t){return{seriesType:t,reset:function(t,e){var n=e.findComponents({mainType:"legend"});if(n&&n.length){var r=t.getData();r.filterSelf(function(t){for(var e=r.getName(t),i=0;i<n.length;i++)if(!n[i].isSelected(e))return!1;return!0})}}}};wS("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),ho(SS("pie")),co(m(function(t,e,n,r){e.eachSeriesByType(t,function(t){var e=t.getData(),r=e.mapDimension("value"),i=t.get("center"),a=t.get("radius");y(a)||(a=[0,a]),y(i)||(i=[i,i]);var o=n.getWidth(),s=n.getHeight(),u=Math.min(o,s),l=Yr(i[0],o),c=Yr(i[1],s),h=Yr(a[0],u/2),f=Yr(a[1],u/2),d=-t.get("startAngle")*OS,p=t.get("minAngle")*OS,g=0;e.each(r,function(t){!isNaN(t)&&g++});var v=e.getSum(r),m=Math.PI/(v||g)*2,_=t.get("clockwise"),b=t.get("roseType"),x=t.get("stillShowZeroSum"),w=e.getDataExtent(r);w[0]=0;var S=TS,T=0,O=d,M=_?1:-1;if(e.each(r,function(t,n){var r;if(isNaN(t))e.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:_,cx:l,cy:c,r0:h,r:b?NaN:f});else{(r="area"!==b?0===v&&x?m:t*m:TS/g)<p?(r=p,S-=p):T+=t;var i=O+M*r;e.setItemLayout(n,{angle:r,startAngle:O,endAngle:i,clockwise:_,cx:l,cy:c,r0:h,r:b?qr(t,w,[h,f]):f}),O=i}}),S<TS&&g)if(S<=.001){var k=TS/g;e.each(r,function(t,n){if(!isNaN(t)){var r=e.getItemLayout(n);r.angle=k,r.startAngle=d+M*n*k,r.endAngle=d+M*(n+1)*k}})}else m=S/T,O=d,e.each(r,function(t,n){if(!isNaN(t)){var r=e.getItemLayout(n),i=r.angle===p?p:t*m;r.startAngle=O,r.endAngle=O+M*i,O+=M*i}});!function(t,e,n,r){var i,a,o=t.getData(),s=[],u=!1;o.each(function(n){var r,l,c,h,f=o.getItemLayout(n),d=o.getItemModel(n),p=d.getModel("label"),g=p.get("position")||d.get("emphasis.label.position"),v=d.getModel("labelLine"),m=v.get("length"),y=v.get("length2"),_=(f.startAngle+f.endAngle)/2,b=Math.cos(_),x=Math.sin(_);i=f.cx,a=f.cy;var w="inside"===g||"inner"===g;if("center"===g)r=f.cx,l=f.cy,h="center";else{var S=(w?(f.r+f.r0)/2*b:f.r*b)+i,T=(w?(f.r+f.r0)/2*x:f.r*x)+a;if(r=S+3*b,l=T+3*x,!w){var O=S+b*(m+e-f.r),M=T+x*(m+e-f.r),k=O+(b<0?-1:1)*y;r=k+(b<0?-5:5),l=M,c=[[S,T],[O,M],[k,M]]}h=w?"center":b>0?"left":"right"}var C=p.getFont(),E=p.get("rotate")?b<0?-_+Math.PI:-_:0,A=me(t.getFormattedLabel(n,"normal")||o.getName(n),C,h,"top");u=!!E,f.label={x:r,y:l,position:g,height:A.height,len:m,len2:y,linePoints:c,textAlign:h,verticalAlign:"middle",rotation:E,inside:w},w||s.push(f.label)}),!u&&t.get("avoidLabelOverlap")&&function(t,e,n,r,i,a){for(var o=[],s=[],u=0;u<t.length;u++)t[u].x<e?o.push(t[u]):s.push(t[u]);for(Ou(s,e,n,r,1,0,a),Ou(o,e,n,r,-1,0,a),u=0;u<t.length;u++){var l=t[u].linePoints;if(l){var c=l[1][0]-l[2][0];l[2][0]=t[u].x<e?t[u].x+3:t[u].x-3,l[1][1]=l[2][1]=t[u].y,l[1][0]=l[2][0]+c}}}(s,i,a,e,0,r)}(t,f,0,s)})},"pie")),so(MS("pie")),gb.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(t,e){return Fo(this.getSource(),this)},brushSelector:"point",getProgressive:function(){var t=this.option.progressive;return null==t?this.option.large?5e3:this.get("progressive"):t},getProgressiveThreshold:function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?1e4:this.get("progressiveThreshold"):t},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8}}});var kS=ir({shape:{points:null},symbolProxy:null,buildPath:function(t,e){var n=e.points,r=e.size,i=this.symbolProxy,a=i.shape;if(!((t.getContext?t.getContext():t)&&r[0]<4))for(var o=0;o<n.length;){var s=n[o++],u=n[o++];isNaN(s)||isNaN(u)||(a.x=s-r[0]/2,a.y=u-r[1]/2,a.width=r[0],a.height=r[1],i.buildPath(t,a,!0))}},afterBrush:function(t){var e=this.shape,n=e.points,r=e.size;if(r[0]<4){this.setTransform(t);for(var i=0;i<n.length;){var a=n[i++],o=n[i++];isNaN(a)||isNaN(o)||t.fillRect(a-r[0]/2,o-r[1]/2,r[0],r[1])}this.restoreTransform(t)}},findDataIndex:function(t,e){for(var n=this.shape,r=n.points,i=n.size,a=Math.max(i[0],4),o=Math.max(i[1],4),s=r.length/2-1;s>=0;s--){var u=2*s,l=r[u]-a/2,c=r[u+1]-o/2;if(t>=l&&e>=c&&t<=l+a&&e<=c+o)return s}return-1}}),CS=Mu.prototype;CS.isPersistent=function(){return!this._incremental},CS.updateData=function(t){this.group.removeAll();var e=new kS({rectHover:!0,cursor:"default"});e.setShape({points:t.getLayout("symbolPoints")}),this._setCommon(e,t),this.group.add(e),this._incremental=null},CS.updateLayout=function(t){if(!this._incremental){var e=t.getLayout("symbolPoints");this.group.eachChild(function(t){null!=t.startIndex&&(e=new Float32Array(e.buffer,4*t.startIndex*2,2*(t.endIndex-t.startIndex))),t.setShape("points",e)})}},CS.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),t.count()>2e6?(this._incremental||(this._incremental=new rr({silent:!0})),this.group.add(this._incremental)):this._incremental=null},CS.incrementalUpdate=function(t,e){var n;this._incremental?(n=new kS,this._incremental.addDisplayable(n,!0)):((n=new kS({rectHover:!0,cursor:"default",startIndex:t.start,endIndex:t.end})).incremental=!0,this.group.add(n)),n.setShape({points:e.getLayout("symbolPoints")}),this._setCommon(n,e,!!this._incremental)},CS._setCommon=function(t,e,n){var r=e.hostModel,i=e.getVisual("symbolSize");t.setShape("size",i instanceof Array?i:[i,i]),t.symbolProxy=hs(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]<4;t.useStyle(r.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var o=e.getVisual("color");o&&t.setColor(o),n||(t.seriesIndex=r.seriesIndex,t.on("mousemove",function(e){t.dataIndex=null;var n=t.findDataIndex(e.offsetX,e.offsetY);n>=0&&(t.dataIndex=n+(t.startIndex||0))}))},CS.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},CS._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()},yo({type:"scatter",render:function(t,e,n){var r=t.getData();this._updateSymbolDraw(r,t).updateData(r),this._finished=!0},incrementalPrepareRender:function(t,e,n){var r=t.getData();this._updateSymbolDraw(r,t).incrementalPrepareUpdate(r),this._finished=!1},incrementalRender:function(t,e,n){this._symbolDraw.incrementalUpdate(t,e.getData()),this._finished=t.end===e.getData().count()},updateTransform:function(t,e,n){var r=t.getData();if(this.group.dirty(),!this._finished||r.count()>1e4||!this._symbolDraw.isPersistent())return{update:!0};var i=Vw().reset(t);i.progress&&i.progress({start:0,end:r.count()},r),this._symbolDraw.updateLayout(r)},_updateSymbolDraw:function(t,e){var n=this._symbolDraw,r=e.pipelineContext.large;return n&&r===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=r?new Mu:new Ps,this._isLargeDraw=r,this.group.removeAll()),this.group.add(n.group),n},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}}),ho(zw("scatter","circle")),co(Vw("scatter")),l(ku,xw),Cu.prototype.getIndicatorAxes=function(){return this._indicatorAxes},Cu.prototype.dataToPoint=function(t,e){return this.coordToPoint(this._indicatorAxes[e].dataToCoord(t),e)},Cu.prototype.coordToPoint=function(t,e){var n=this._indicatorAxes[e].angle;return[this.cx+t*Math.cos(n),this.cy-t*Math.sin(n)]},Cu.prototype.pointToData=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,r=Math.sqrt(e*e+n*n);e/=r,n/=r;for(var i,a=Math.atan2(-n,e),o=1/0,s=-1,u=0;u<this._indicatorAxes.length;u++){var l=this._indicatorAxes[u],c=Math.abs(a-l.angle);c<o&&(i=l,s=u,o=c)}return[s,+(i&&i.coodToData(r))]},Cu.prototype.resize=function(t,e){var n=t.get("center"),r=e.getWidth(),i=e.getHeight(),a=Math.min(r,i)/2;this.cx=Yr(n[0],r),this.cy=Yr(n[1],i),this.startAngle=t.get("startAngle")*Math.PI/180;var o=t.get("radius");"string"!=typeof o&&"number"!=typeof o||(o=[0,o]),this.r0=Yr(o[0],a),this.r=Yr(o[1],a),f(this._indicatorAxes,function(t,e){t.setExtent(this.r0,this.r);var n=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),t.angle=n},this)},Cu.prototype.update=function(t,e){function n(t){var e=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),n=t/e;return 2===n?n=5:n*=2,n*e}var r=this._indicatorAxes,i=this._model;f(r,function(t){t.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(e,n){if("radar"===e.get("coordinateSystem")&&t.getComponent("radar",e.get("radarIndex"))===i){var a=e.getData();f(r,function(t){t.scale.unionExtentFromData(a,a.mapDimension(t.dim))})}},this);var a=i.get("splitNumber");f(r,function(t,e){var r=is(t.scale,t.model);as(t.scale,t.model);var i=t.model,o=t.scale,s=i.getMin(),u=i.getMax(),l=o.getInterval();if(null!=s&&null!=u)o.setExtent(+s,+u),o.setInterval((u-s)/a);else if(null!=s){var c;do{o.setExtent(+s,c=s+l*a),o.setInterval(l),l=n(l)}while(c<r[1]&&isFinite(c)&&isFinite(r[1]))}else if(null!=u){var h;do{o.setExtent(h=u-l*a,+u),o.setInterval(l),l=n(l)}while(h>r[0]&&isFinite(h)&&isFinite(r[0]))}else{o.getTicks().length-1>a&&(l=n(l));var f=Math.round((r[0]+r[1])/2/l)*l,d=Math.round(a/2);o.setExtent(Xr(f-d*l),Xr(f+(a-d)*l)),o.setInterval(l)}})},Cu.dimensions=[],Cu.create=function(t,e){var n=[];return t.eachComponent("radar",function(r){var i=new Cu(r,t,e);n.push(i),r.coordinateSystem=i}),t.eachSeriesByType("radar",function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=n[t.get("radarIndex")||0])}),n},ji.register("radar",Cu);var ES=Xw.valueAxis,AS=(go({type:"radar",optionUpdated:function(){var t=this.get("boundaryGap"),e=this.get("splitNumber"),i=this.get("scale"),s=this.get("axisLine"),u=this.get("axisTick"),l=this.get("axisLabel"),c=this.get("name"),h=this.get("name.show"),f=this.get("name.formatter"),p=this.get("nameGap"),g=this.get("triggerEvent"),v=d(this.get("indicator")||[],function(d){null!=d.max&&d.max>0&&!d.min?d.min=0:null!=d.min&&d.min<0&&!d.max&&(d.max=0);var v=c;if(null!=d.color&&(v=o({color:d.color},c)),d=r(n(d),{boundaryGap:t,splitNumber:e,scale:i,axisLine:s,axisTick:u,axisLabel:l,name:d.text,nameLocation:"end",nameGap:p,nameTextStyle:v,triggerEvent:g},!1),h||(d.name=""),"string"==typeof f){var m=d.name;d.name=f.replace("{value}",null!=m?m:"")}else"function"==typeof f&&(d.name=f(d.name,d));var y=a(new Vr(d,null,this.ecModel),uw);return y.mainType="radar",y.componentIndex=this.componentIndex,y},this);this.getIndicatorModels=function(){return v}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:r({lineStyle:{color:"#bbb"}},ES.axisLine),axisLabel:Eu(ES.axisLabel,!1),axisTick:Eu(ES.axisTick,!1),splitLine:Eu(ES.splitLine,!0),splitArea:Eu(ES.splitArea,!0),indicator:[]}}),["axisLine","axisTickLabel","axisName"]);vo({type:"radar",render:function(t,e,n){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},_buildAxes:function(t){var e=t.coordinateSystem;f(d(e.getIndicatorAxes(),function(t){return new nS(t.model,{position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(t){f(AS,t.add,t),this.group.add(t.getGroup())},this)},_buildSplitLineAndArea:function(t){function e(t,e,n){var r=n%e.length;return t[r]=t[r]||[],r}var n=t.coordinateSystem,r=n.getIndicatorAxes();if(r.length){var i=t.get("shape"),a=t.getModel("splitLine"),s=t.getModel("splitArea"),u=a.getModel("lineStyle"),l=s.getModel("areaStyle"),c=a.get("show"),h=s.get("show"),p=u.get("color"),g=l.get("color");p=y(p)?p:[p],g=y(g)?g:[g];var v=[],m=[];if("circle"===i)for(var _=r[0].getTicksCoords(),b=n.cx,x=n.cy,w=0;w<_.length;w++)c&&v[C=e(v,p,w)].push(new Ly({shape:{cx:b,cy:x,r:_[w].coord}})),h&&w<_.length-1&&m[C=e(m,g,w)].push(new Ny({shape:{cx:b,cy:x,r0:_[w].coord,r:_[w+1].coord}}));else{var S,T=d(r,function(t,e){var r=t.getTicksCoords();return S=null==S?r.length-1:Math.min(r.length-1,S),d(r,function(t){return n.coordToPoint(t.coord,e)})}),O=[];for(w=0;w<=S;w++){for(var M=[],k=0;k<r.length;k++)M.push(T[k][w]);if(M[0]&&M.push(M[0].slice()),c&&v[C=e(v,p,w)].push(new zy({shape:{points:M}})),h&&O){var C=e(m,g,w-1);m[C].push(new Uy({shape:{points:M.concat(O)}}))}O=M.slice().reverse()}}var E=u.getLineStyle(),A=l.getAreaStyle();f(m,function(t,e){this.group.add(n_(t,{style:o({stroke:"none",fill:g[e%g.length]},A),silent:!0}))},this),f(v,function(t,e){this.group.add(n_(t,{style:o({fill:"none",stroke:p[e%p.length]},E),silent:!0}))},this)}}});var IS=gb.extend({type:"series.radar",dependencies:["radar"],init:function(t){IS.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()}},getInitialData:function(t,e){return yS(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(t){var e=this.getData(),n=this.coordinateSystem.getIndicatorAxes(),r=this.getData().getName(t);return ci(""===r?this.name:r)+"<br/>"+d(n,function(n,r){var i=e.get(e.mapDimension(n.dim),t);return ci(n.name+" : "+i)}).join("<br />")},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}});yo({type:"radar",render:function(t,e,r){function i(t,e){var n=t.getItemVisual(e,"symbol")||"circle",r=t.getItemVisual(e,"color");if("none"!==n){var i=function(t){return y(t)||(t=[+t,+t]),t}(t.getItemVisual(e,"symbolSize")),a=hs(n,-1,-1,2,2,r);return a.attr({style:{strokeNoScale:!0},z2:100,scale:[i[0]/2,i[1]/2]}),a}}function a(e,n,r,a,o,s){r.removeAll();for(var u=0;u<n.length-1;u++){var l=i(a,o);l&&(l.__dimIdx=u,e[u]?(l.attr("position",e[u]),a_[s?"initProps":"updateProps"](l,{position:n[u]},t,o)):l.attr("position",n[u]),r.add(l))}}function s(t){return d(t,function(t){return[u.cx,u.cy]})}var u=t.coordinateSystem,l=this.group,c=t.getData(),h=this._data;c.diff(h).add(function(e){var n=c.getItemLayout(e);if(n){var r=new Uy,i=new zy,o={shape:{points:n}};r.shape.points=s(n),i.shape.points=s(n),jr(r,o,t,e),jr(i,o,t,e);var u=new kv,l=new kv;u.add(i),u.add(r),u.add(l),a(i.shape.points,n,l,c,e,!0),c.setItemGraphicEl(e,u)}}).update(function(e,n){var r=h.getItemGraphicEl(n),i=r.childAt(0),o=r.childAt(1),s=r.childAt(2),u={shape:{points:c.getItemLayout(e)}};u.shape.points&&(a(i.shape.points,u.shape.points,s,c,e,!1),Dr(i,u,t),Dr(o,u,t),c.setItemGraphicEl(e,r))}).remove(function(t){l.remove(h.getItemGraphicEl(t))}).execute(),c.eachItemGraphicEl(function(t,e){function r(){u.attr("ignore",v)}function i(){u.attr("ignore",g)}var a=c.getItemModel(e),s=t.childAt(0),u=t.childAt(1),h=t.childAt(2),f=c.getItemVisual(e,"color");l.add(t),s.useStyle(o(a.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:f})),s.hoverStyle=a.getModel("emphasis.lineStyle").getLineStyle();var d=a.getModel("areaStyle"),p=a.getModel("emphasis.areaStyle"),g=d.isEmpty()&&d.parentModel.isEmpty(),v=p.isEmpty()&&p.parentModel.isEmpty();v=v&&g,u.ignore=g,u.useStyle(o(d.getAreaStyle(),{fill:f,opacity:.7})),u.hoverStyle=p.getAreaStyle();var m=a.getModel("itemStyle").getItemStyle(["color"]),y=a.getModel("emphasis.itemStyle").getItemStyle(),_=a.getModel("label"),b=a.getModel("emphasis.label");h.eachChild(function(t){t.setStyle(m),t.hoverStyle=n(y),Or(t.style,t.hoverStyle,_,b,{labelFetcher:c.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:c.get(c.dimensions[t.__dimIdx],e),autoColor:f,isRectText:!0})}),t.off("mouseover").off("mouseout").off("normal").off("emphasis"),t.on("emphasis",r).on("mouseover",r).on("normal",i).on("mouseout",i),Sr(t)}),this._data=c},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),ho(SS("radar")),ho(zw("radar","circle")),co(function(t){t.eachSeriesByType("radar",function(t){var e=t.getData(),n=[],r=t.coordinateSystem;if(r){for(var i=r.getIndicatorAxes(),a=0;a<i.length;a++)e.each(e.mapDimension(i[a].dim),function(t,e){n[e]=n[e]||[],n[e][a]=r.dataToPoint(t,a)});e.each(function(t){n[t][0]&&n[t].push(n[t][0].slice()),e.setItemLayout(t,n[t])})}})}),so(MS("radar")),oo(function(t){var e=t.polar;if(e){y(e)||(e=[e]);var n=[];f(e,function(e,r){e.indicator?(e.type&&!e.shape&&(e.shape=e.type),t.radar=t.radar||[],y(t.radar)||(t.radar=[t.radar]),t.radar.push(e)):n.push(e)}),t.polar=n}f(t.series,function(t){t&&"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)})});var PS=J;c(Au,rv),Iu.prototype={constructor:Iu,type:"view",dimensions:["x","y"],setBoundingRect:function(t,e,n,r){return this._rect=new re(t,e,n,r),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(t,e,n,r){this.transformTo(t,e,n,r),this._viewRect=new re(t,e,n,r)},transformTo:function(t,e,n,r){var i=this.getBoundingRect(),a=this._rawTransformable;a.transform=i.calculateTransform(new re(t,e,n,r)),a.decomposeTransform(),this._updateTransform()},setCenter:function(t){t&&(this._center=t,this._updateCenterAndZoom())},setZoom:function(t){t=t||1;var e=this.zoomLimit;e&&(null!=e.max&&(t=Math.min(e.max,t)),null!=e.min&&(t=Math.max(e.min,t))),this._zoom=t,this._updateCenterAndZoom()},getDefaultCenter:function(){var t=this.getBoundingRect();return[t.x+t.width/2,t.y+t.height/2]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var t=this._rawTransformable.getLocalTransform(),e=this._roamTransformable,n=this.getDefaultCenter(),r=this.getCenter(),i=this.getZoom();r=J([],r,t),n=J([],n,t),e.origin=r,e.position=[n[0]-r[0],n[1]-r[1]],e.scale=[i,i],this._updateTransform()},_updateTransform:function(){var t=this._roamTransformable,e=this._rawTransformable;e.parent=t,t.updateTransform(),e.updateTransform(),vt(this.transform||(this.transform=[]),e.transform||pt()),this._rawTransform=e.getLocalTransform(),this.invTransform=this.invTransform||[],xt(this.invTransform,this.transform),this.decomposeTransform()},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},dataToPoint:function(t,e,n){var r=e?this._rawTransform:this.transform;return n=n||[],r?PS(n,t,r):U(n,t)},pointToData:function(t){var e=this.invTransform;return e?PS([],t,e):[t[0],t[1]]},convertToPixel:m(Pu,"dataToPoint"),convertFromPixel:m(Pu,"pointToData"),containPoint:function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])}},c(Iu,rv);for(var LS=[126,25],DS=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],jS=0;jS<DS.length;jS++)for(var RS=0;RS<DS[jS].length;RS++)DS[jS][RS][0]/=10.5,DS[jS][RS][1]/=-14,DS[jS][RS][0]+=LS[0],DS[jS][RS][1]+=LS[1];var NS={"\u5357\u6d77\u8bf8\u5c9b":[32,80],"\u5e7f\u4e1c":[0,-10],"\u9999\u6e2f":[10,5],"\u6fb3\u95e8":[-10,10],"\u5929\u6d25":[5,5]},BS={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},FS=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],US=dn(),zS={load:function(t,e){var n=US(e).parsed;if(n)return n;var r,i=e.specialAreas||{},a=e.geoJSON;try{r=a?yw(a):[]}catch(t){throw new Error("Invalid geoJson format\n"+t.message)}return f(r,function(e){var n=e.name;(function(t,e){if("china"===t){var n=NS[e.name];if(n){var r=e.center;r[0]+=n[0]/10.5,r[1]+=-n[1]/14}}})(t,e),function(t,e){if("world"===t){var n=BS[e.name];if(n){var r=e.center;r[0]=n[0],r[1]=n[1]}}}(t,e),function(t,e){"china"===t&&"\u53f0\u6e7e"===e.name&&e.geometries.push({type:"polygon",exterior:FS[0]})}(t,e);var r=i[n];r&&e.transformTo(r.left,r.top,r.width,r.height)}),function(t,e){"china"===t&&r.push(new ps("\u5357\u6d77\u8bf8\u5c9b",d(DS,function(t){return{type:"polygon",exterior:t}}),LS))}(t),US(e).parsed={regions:r,boundingRect:function(t){for(var e,n=0;n<t.length;n++){var r=t[n].getBoundingRect();(e=e||r.clone()).union(r)}return e}(r)}}},VS=dn(),HS={geoJSON:zS,svg:{load:function(t,e){var n=VS(e).originRoot;if(n)return{root:n,boundingRect:VS(e).boundingRect};var r=Lu(e);return VS(e).originRoot=r.root,VS(e).boundingRect=r.boundingRect,r},makeGraphic:function(t,e,n){var r=VS(e),i=r.rootMap||(r.rootMap=R()),a=i.get(n);if(a)return a;var o=r.originRoot;return r.originRootHostKey?a=Lu(e,r.boundingRect).root:(r.originRootHostKey=n,a=o),i.set(n,a)},removeGraphic:function(t,e,n){var r=VS(e),i=r.rootMap;i&&i.removeKey(n),n===r.originRootHostKey&&(r.originRootHostKey=null)}}},GS={load:function(t,e){var n,r=[],i=R(),a=R();return f(ju(t),function(o){var s=HS[o.type].load(t,o);f(s.regions,function(t){var n=t.name;e&&e.hasOwnProperty(n)&&(t=t.cloneShallow(n=e[n])),r.push(t),i.set(n,t),a.set(n,t.center)});var u=s.boundingRect;u&&(n?n.union(u):n=u.clone())}),{regions:r,regionsMap:i,nameCoordMap:a,boundingRect:n||new re(0,0,0,0)}},makeGraphic:Du("makeGraphic"),removeGraphic:Du("removeGraphic")};Ru.prototype={constructor:Ru,type:"geo",dimensions:["lng","lat"],containCoord:function(t){for(var e=this.regions,n=0;n<e.length;n++)if(e[n].contain(t))return!0;return!1},transformTo:function(t,e,n,r){var i=this.getBoundingRect(),a=this._invertLongitute;i=i.clone(),a&&(i.y=-i.y-i.height);var o=this._rawTransformable;if(o.transform=i.calculateTransform(new re(t,e,n,r)),o.decomposeTransform(),a){var s=o.scale;s[1]=-s[1]}o.updateTransform(),this._updateTransform()},getRegion:function(t){return this._regionsMap.get(t)},getRegionByCoord:function(t){for(var e=this.regions,n=0;n<e.length;n++)if(e[n].contain(t))return e[n]},addGeoCoord:function(t,e){this._nameCoordMap.set(t,e)},getGeoCoord:function(t){return this._nameCoordMap.get(t)},getBoundingRect:function(){return this._rect},dataToPoint:function(t,e,n){if("string"==typeof t&&(t=this.getGeoCoord(t)),t)return Iu.prototype.dataToPoint.call(this,t,e,n)},convertToPixel:m(Nu,"dataToPoint"),convertFromPixel:m(Nu,"pointToData")},c(Ru,Iu);var WS={dimensions:Ru.prototype.dimensions,create:function(t,e){var n=[];t.eachComponent("geo",function(t,r){var i=t.get("map"),a=t.get("aspectScale"),o=!0,s=$b.retrieveMap(i);s&&s[0]&&"svg"===s[0].type?(null==a&&(a=1),o=!1):null==a&&(a=.75);var u=new Ru(i+r,i,t.get("nameMap"),o);u.aspectScale=a,u.zoomLimit=t.get("scaleLimit"),n.push(u),Fu(u,t),t.coordinateSystem=u,u.model=t,u.resize=Bu,u.resize(t,e)}),t.eachSeries(function(t){if("geo"===t.get("coordinateSystem")){var e=t.get("geoIndex")||0;t.coordinateSystem=n[e]}});var r={};return t.eachSeriesByType("map",function(t){if(!t.getHostGeoModel()){var e=t.getMapType();r[e]=r[e]||[],r[e].push(t)}}),f(r,function(t,r){var a=new Ru(r,r,i(d(t,function(t){return t.get("nameMap")})));a.zoomLimit=M.apply(null,d(t,function(t){return t.get("scaleLimit")})),n.push(a),a.resize=Bu,a.aspectScale=t[0].get("aspectScale"),a.resize(t[0],e),f(t,function(t){t.coordinateSystem=a,Fu(a,t)})}),n},getFilledRegions:function(t,e,n){for(var r=(t||[]).slice(),i=R(),a=0;a<r.length;a++)i.set(r[a].name,r[a]);return f(GS.load(e,n).regions,function(t){var e=t.name;!i.get(e)&&r.push({name:e})}),r}};lo("geo",WS);var qS=gb.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],init:function(t){qS.superApply(this,"init",arguments),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(t){return yS(this,["value"])},mergeOption:function(t){qS.superApply(this,"mergeOption",arguments),this.updateSelectedMap(this._createSelectableList())},_createSelectableList:function(){for(var t=this.getRawData(),e=t.mapDimension("value"),n=[],r=0,i=t.count();r<i;r++)n.push({name:t.getName(r),value:t.get(e,r),selected:ea(t,r,"selected")});return WS.getFilledRegions(n,this.getMapType(),this.option.nameMap)},getHostGeoModel:function(){var t=this.option.geoIndex;return null!=t?this.dependentModels.geo[t]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},_fillOption:function(t,e){},getRawValue:function(t){var e=this.getData();return e.get(e.mapDimension("value"),t)},getRegionModel:function(t){var e=this.getData();return e.getItemModel(e.indexOfName(t))},formatTooltip:function(t){for(var e=this.getData(),n=ui(this.getRawValue(t)),r=e.getName(t),i=this.seriesGroup,a=[],o=0;o<i.length;o++){var s=i[o].originalData.indexOfName(r),u=e.mapDimension("value");isNaN(i[o].originalData.get(u,s))||a.push(ci(i[o].name))}return a.join(", ")+"<br />"+ci(r+" : "+n)},getTooltipPosition:function(t){if(null!=t){var e=this.getData().getName(t),n=this.coordinateSystem,r=n.getRegion(e);return r&&n.dataToPoint(r.center)}},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}}}});c(qS,_S);var YS="\0_ec_interaction_mutex";uo({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),c(Vu,qg);var XS={axisPointer:1,tooltip:1,brush:1};rl.prototype={constructor:rl,draw:function(t,e,n,r,i){var a="geo"===t.mainType,o=t.getData&&t.getData();a&&e.eachComponent({mainType:"series",subType:"map"},function(e){o||e.getHostGeoModel()!==t||(o=e.getData())});var s=t.coordinateSystem;this._updateBackground(s);var u=this._regionsGroup,l=this.group,c=s.scale,h={position:s.position,scale:c};!u.childAt(0)||i?l.attr(h):Dr(l,h,t),u.removeAll();var d=["itemStyle"],p=["emphasis","itemStyle"],g=["label"],v=["emphasis","label"],m=R();f(s.regions,function(e){var n=m.get(e.name)||m.set(e.name,new kv),r=new Yy({shape:{paths:[]}});n.add(r);var i,s=(E=t.getRegionModel(e.name)||t).getModel(d),l=E.getModel(p),h=tl(s),y=tl(l),_=E.getModel(g),b=E.getModel(v);if(o){i=o.indexOfName(e.name);var x=o.getItemVisual(i,"color",!0);x&&(h.fill=x)}f(e.geometries,function(t){if("polygon"===t.type){r.shape.paths.push(new Uy({shape:{points:t.exterior}}));for(var e=0;e<(t.interiors?t.interiors.length:0);e++)r.shape.paths.push(new Uy({shape:{points:t.interiors[e]}}))}}),r.setStyle(h),r.style.strokeNoScale=!0,r.culling=!0;var w=_.get("show"),S=b.get("show"),T=o&&isNaN(o.get(o.mapDimension("value"),i)),O=o&&o.getItemLayout(i);if(a||T&&(w||S)||O&&O.showLabel){var M,k=a?e.name:i;(!o||i>=0)&&(M=t);var C=new Py({position:e.center.slice(),scale:[1/c[0],1/c[1]],z2:10,silent:!0});Or(C.style,C.hoverStyle={},_,b,{labelFetcher:M,labelDataIndex:k,defaultText:e.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),n.add(C)}if(o)o.setItemGraphicEl(i,n);else{var E=t.getRegionModel(e.name);r.eventData={componentType:"geo",componentIndex:t.componentIndex,geoIndex:t.componentIndex,name:e.name,region:E&&E.option||{}}}(n.__regions||(n.__regions=[])).push(e),Sr(n,y,{hoverSilentOnTouch:!!t.get("selectedMode")}),u.add(n)}),this._updateController(t,e,n),el(this,t,u,n,r),nl(t,u)},remove:function(){this._regionsGroup.removeAll(),this._backgroundGroup.removeAll(),this._controller.dispose(),this._mapName&&GS.removeGraphic(this._mapName,this.uid),this._mapName=null,this._controllerHost={}},_updateBackground:function(t){var e=t.map;this._mapName!==e&&f(GS.makeGraphic(e,this.uid),function(t){this._backgroundGroup.add(t)},this),this._mapName=e},_updateController:function(t,e,n){function r(){var e={type:"geoRoam",componentType:u};return e[u+"Id"]=t.id,e}var i=t.coordinateSystem,o=this._controller,s=this._controllerHost;s.zoomLimit=t.get("scaleLimit"),s.zoom=i.getZoom(),o.enable(t.get("roam")||!1);var u=t.mainType;o.off("pan").on("pan",function(t){this._mouseDownFlag=!1,Qu(s,t.dx,t.dy),n.dispatchAction(a(r(),{dx:t.dx,dy:t.dy}))},this),o.off("zoom").on("zoom",function(t){if(this._mouseDownFlag=!1,Ku(s,t.scale,t.originX,t.originY),n.dispatchAction(a(r(),{zoom:t.scale,originX:t.originX,originY:t.originY})),this._updateGroup){var e=this.group.scale;this._regionsGroup.traverse(function(t){"text"===t.type&&t.attr("scale",[1/e[0],1/e[1]])})}},this),o.setPointerChecker(function(e,r,a){return i.getViewRectAfterRoam().contain(r,a)&&!Ju(e,n,t)})}},yo({type:"map",render:function(t,e,n,r){if(!r||"mapToggleSelect"!==r.type||r.from!==this.uid){var i=this.group;if(i.removeAll(),!t.getHostGeoModel()){if(r&&"geoRoam"===r.type&&"series"===r.componentType&&r.seriesId===t.id)(a=this._mapDraw)&&i.add(a.group);else if(t.needsDrawMap){var a=this._mapDraw||new rl(n,!0);i.add(a.group),a.draw(t,e,n,this,r),this._mapDraw=a}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&e.getComponent("legend")&&this._renderSymbols(t,e,n)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(t,e,n){var r=t.originalData,i=this.group;r.each(r.mapDimension("value"),function(e,n){if(!isNaN(e)){var a=r.getItemLayout(n);if(a&&a.point){var o=a.point,s=a.offset,u=new Ly({style:{fill:t.getData().getVisual("color")},shape:{cx:o[0]+9*s,cy:o[1],r:3},silent:!0,z2:s?8:10});if(!s){var l=t.mainSeries.getData(),c=r.getName(n),h=l.indexOfName(c),f=r.getItemModel(n),d=f.getModel("label"),p=f.getModel("emphasis.label"),g=l.getItemGraphicEl(h),v=k(t.getFormattedLabel(n,"normal"),c),m=k(t.getFormattedLabel(n,"emphasis"),v),y=function(){var t=Mr({},p,{text:p.get("show")?m:null},{isRectText:!0,useInsideStyle:!1},!0);u.style.extendFrom(t),u.__mapOriginalZ2=u.z2,u.z2+=1},_=function(){Mr(u.style,d,{text:d.get("show")?v:null,textPosition:d.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),null!=u.__mapOriginalZ2&&(u.z2=u.__mapOriginalZ2,u.__mapOriginalZ2=null)};g.on("mouseover",y).on("mouseout",_).on("emphasis",y).on("normal",_),_()}i.add(u)}}})}}),uo({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(t,e){var n=t.componentType||"series";e.eachComponent({mainType:n,query:t},function(e){var r=e.coordinateSystem;if("geo"===r.type){var i=il(r,t,e.get("scaleLimit"));e.setCenter&&e.setCenter(i.center),e.setZoom&&e.setZoom(i.zoom),"series"===n&&f(e.seriesGroup,function(t){t.setCenter(i.center),t.setZoom(i.zoom)})}})}),co(function(t){var e={};t.eachSeriesByType("map",function(n){var r=n.getMapType();if(!n.getHostGeoModel()&&!e[r]){var i={};f(n.seriesGroup,function(e){var n=e.coordinateSystem,r=e.originalData;e.get("showLegendSymbol")&&t.getComponent("legend")&&r.each(r.mapDimension("value"),function(t,e){var a=r.getName(e),o=n.getRegion(a);if(o&&!isNaN(t)){var s=i[a]||0,u=n.dataToPoint(o.center);i[a]=s+1,r.setItemLayout(e,{point:u,offset:s})}})});var a=n.getData();a.each(function(t){var e=a.getName(t),n=a.getItemLayout(t)||{};n.showLabel=!i[e],a.setItemLayout(t,n)}),e[r]=!0}})}),ho(function(t){t.eachSeriesByType("map",function(t){var e=t.get("color"),n=t.getModel("itemStyle"),r=n.get("areaColor"),i=n.get("color")||e[t.seriesIndex%e.length];t.getData().setVisual({areaColor:r,color:i})})}),so(ax.PROCESSOR.STATISTIC,function(t){var e={};t.eachSeriesByType("map",function(t){var n=t.getHostGeoModel(),r=n?"o"+n.id:"i"+t.getMapType();(e[r]=e[r]||[]).push(t)}),f(e,function(t,e){for(var n=function(t,e){var n={};return f(t,function(t){t.each(t.mapDimension("value"),function(e,r){var i="ec-"+t.getName(r);n[i]=n[i]||[],isNaN(e)||n[i].push(e)})}),t[0].map(t[0].mapDimension("value"),function(r,i){for(var a="ec-"+t[0].getName(i),o=0,s=1/0,u=-1/0,l=n[a].length,c=0;c<l;c++)s=Math.min(s,n[a][c]),u=Math.max(u,n[a][c]),o+=n[a][c];return 0===l?NaN:"min"===e?s:"max"===e?u:"average"===e?o/l:o})}(d(t,function(t){return t.getData()}),t[0].get("mapValueCalculation")),r=0;r<t.length;r++)t[r].originalData=t[r].getData();for(r=0;r<t.length;r++)t[r].seriesGroup=t,t[r].needsDrawMap=0===r&&!t[r].getHostGeoModel(),t[r].setData(n.cloneShallow()),t[r].mainSeries=t[0]})}),oo(function(t){var e=[];f(t.series,function(t){t&&"map"===t.type&&(e.push(t),t.map=t.map||t.mapType,o(t,t.mapLocation))})}),wS("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}]);var $S=f,ZS="\0__link_datas",QS="\0__link_mainData",KS=function(t,e){this.name=t||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=e};KS.prototype={constructor:KS,isRemoved:function(){return this.dataIndex<0},eachNode:function(t,e,n){"function"==typeof t&&(n=e,e=t,t=null),b(t=t||{})&&(t={order:t});var r,i=t.order||"preorder",a=this[t.attr||"children"];"preorder"===i&&(r=e.call(n,this));for(var o=0;!r&&o<a.length;o++)a[o].eachNode(t,e,n);"postorder"===i&&e.call(n,this)},updateDepthAndHeight:function(t){var e=0;this.depth=t;for(var n=0;n<this.children.length;n++){var r=this.children[n];r.updateDepthAndHeight(t+1),r.height>e&&(e=r.height)}this.height=e+1},getNodeById:function(t){if(this.getId()===t)return this;for(var e=0,n=this.children,r=n.length;e<r;e++){var i=n[e].getNodeById(t);if(i)return i}},contains:function(t){if(t===this)return!0;for(var e=0,n=this.children,r=n.length;e<r;e++){var i=n[e].contains(t);if(i)return i}},getAncestors:function(t){for(var e=[],n=t?this:this.parentNode;n;)e.push(n),n=n.parentNode;return e.reverse(),e},getValue:function(t){var e=this.hostTree.data;return e.get(e.getDimension(t||"value"),this.dataIndex)},setLayout:function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(t){if(!(this.dataIndex<0)){var e,n=this.hostTree,r=n.data.getItemModel(this.dataIndex),i=this.getLevelModel();return i||0!==this.children.length&&(0===this.children.length||!1!==this.isExpand)||(e=this.getLeavesModel()),r.getModel(t,(i||e||n.hostModel).getModel(t))}},getLevelModel:function(){return(this.hostTree.levelModels||[])[this.depth]},getLeavesModel:function(){return this.hostTree.leavesModel},setVisual:function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},getVisual:function(t,e){return this.hostTree.data.getItemVisual(this.dataIndex,t,e)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},isDescendantOf:function(t){return t!==this&&t.isAncestorOf(this)}},fl.prototype={constructor:fl,type:"tree",eachNode:function(t,e,n){this.root.eachNode(t,e,n)},getNodeByDataIndex:function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},getNodeByName:function(t){return this.root.getNodeByName(t)},update:function(){for(var t=this.data,e=this._nodes,n=0,r=e.length;n<r;n++)e[n].dataIndex=-1;for(n=0,r=t.count();n<r;n++)e[t.getRawIndex(n)].dataIndex=n},clearLayouts:function(){this.data.clearItemLayouts()}},fl.createTree=function(t,e,n){var r=new fl(e,n.levels,n.leaves),i=[],a=1;(function t(e,n){var o=e.value;a=Math.max(a,y(o)?o.length:1),i.push(e);var s=new KS(e.name,r);n?function(t,e){t.parentNode!==e&&(e.children.push(t),t.parentNode=e)}(s,n):r.root=s,r._nodes.push(s);var u=e.children;if(u)for(var l=0;l<u.length;l++)t(u[l],s)})(t),r.root.updateDepthAndHeight(0);var o=Bx(i,{coordDimensions:["value"],dimensionsCount:a}),s=new jx(o,e);return s.initData(i),al({mainData:s,struct:r,structAttr:"tree"}),r.update(),r},gb.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(t){var e={name:t.name,children:t.data},n={};n.leaves=t.leaves||{};var r=fl.createTree(e,this,n),i=0;r.eachNode("preorder",function(t){t.depth>i&&(i=t.depth)});var a=t.expandAndCollapse&&t.initialTreeDepth>=0?t.initialTreeDepth:i;return r.root.eachNode("preorder",function(t){var e=t.hostTree.data.getRawDataItem(t.dataIndex);t.isExpand=e&&null!=e.collapsed?!e.collapsed:t.depth<=a}),r.data},getOrient:function(){var t=this.get("orient");return"horizontal"===t?t="LR":"vertical"===t&&(t="TB"),t},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},formatTooltip:function(t){for(var e=this.getData().tree,n=e.root.children[0],r=e.getNodeByDataIndex(t),i=r.getValue(),a=r.name;r&&r!==n;)a=r.parentNode.name+"."+a,r=r.parentNode;return ci(a+(isNaN(i)||null==i?"":" : "+i))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}}),yo({type:"tree",init:function(t,e){this._mainGroup=new kv,this._controller=new Vu(e.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},render:function(t,e,n,r){var i=t.getData(),a=t.layoutInfo,o=this._mainGroup,s=t.get("layout");o.attr("position","radial"===s?[a.x+a.width/2,a.y+a.height/2]:[a.x,a.y]),this._updateViewCoordSys(t),this._updateController(t,e,n);var u=this._data,l={expandAndCollapse:t.get("expandAndCollapse"),layout:s,orient:t.getOrient(),curvature:t.get("lineStyle.curveness"),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};i.diff(u).add(function(e){wl(i,e)&&Tl(i,e,null,o,t,l)}).update(function(e,n){var r=u.getItemGraphicEl(n);wl(i,e)?Tl(i,e,r,o,t,l):r&&Ol(u,n,r,o,t,l)}).remove(function(e){var n=u.getItemGraphicEl(e);n&&Ol(u,e,n,o,t,l)}).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),!0===l.expandAndCollapse&&i.eachItemGraphicEl(function(e,r){e.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:r})})}),this._data=i},_updateViewCoordSys:function(t){var e=t.getData(),n=[];e.each(function(t){var r=e.getItemLayout(t);!r||isNaN(r.x)||isNaN(r.y)||n.push([+r.x,+r.y])});var r=[],i=[];Dn(n,r,i),i[0]-r[0]==0&&(i[0]+=1,r[0]-=1),i[1]-r[1]==0&&(i[1]+=1,r[1]-=1);var a=t.coordinateSystem=new Iu;a.zoomLimit=t.get("scaleLimit"),a.setBoundingRect(r[0],r[1],i[0]-r[0],i[1]-r[1]),a.setCenter(t.get("center")),a.setZoom(t.get("zoom")),this.group.attr({position:a.position,scale:a.scale}),this._viewCoordSys=a},_updateController:function(t,e,n){var r=this._controller,i=this._controllerHost,a=this.group;r.setPointerChecker(function(e,r,i){var o=a.getBoundingRect();return o.applyTransform(a.transform),o.contain(r,i)&&!Ju(e,n,t)}),r.enable(t.get("roam")),i.zoomLimit=t.get("scaleLimit"),i.zoom=t.coordinateSystem.getZoom(),r.off("pan").off("zoom").on("pan",function(e){Qu(i,e.dx,e.dy),n.dispatchAction({seriesId:t.id,type:"treeRoam",dx:e.dx,dy:e.dy})},this).on("zoom",function(e){Ku(i,e.scale,e.originX,e.originY),n.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),this._updateNodeAndLinkScale(t)},this)},_updateNodeAndLinkScale:function(t){var e=t.getData(),n=this._getNodeGlobalScale(t),r=[n,n];e.eachItemGraphicEl(function(t,e){t.attr("scale",r)})},_getNodeGlobalScale:function(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=this._nodeScaleRatio,r=e.scale,i=r&&r[0]||1;return((e.getZoom()-1)*n+1)/i},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},remove:function(){this._mainGroup.removeAll(),this._data=null}}),uo({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(e){var n=t.dataIndex,r=e.getData().tree.getNodeByDataIndex(n);r.isExpand=!r.isExpand})}),uo({type:"treeRoam",event:"treeRoam",update:"none"},function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},function(e){var n=il(e.coordinateSystem,t);e.setCenter&&e.setCenter(n.center),e.setZoom&&e.setZoom(n.zoom)})}),ho(zw("tree","circle")),co(function(t,e){t.eachSeriesByType("tree",function(t){!function(t,e){var n=function(t,e){return yi(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e);t.layoutInfo=n;var r=t.get("layout"),i=0,a=0,o=null;"radial"===r?(i=2*Math.PI,a=Math.min(n.height,n.width)/2,o=gl(function(t,e){return(t.parentNode===e.parentNode?1:2)/t.depth})):(i=n.width,a=n.height,o=gl());var s=t.getData().tree.root,u=s.children[0];if(u){(function(t){t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var e,n,r=[t];e=r.pop();)if(n=e.children,e.isExpand&&n.length)for(var i=n.length-1;i>=0;i--){var a=n[i];a.hierNode={defaultAncestor:null,ancestor:a,prelim:0,modifier:0,change:0,shift:0,i:i,thread:null},r.push(a)}})(s),function(t,e,n){for(var r,i=[u],a=[];r=i.pop();)if(a.push(r),r.isExpand){var o=r.children;if(o.length)for(var s=0;s<o.length;s++)i.push(o[s])}for(;r=a.pop();)e(r,n)}(0,dl,o),s.hierNode.modifier=-u.hierNode.prelim,kl(u,pl);var l=u,c=u,h=u;kl(u,function(t){var e=t.getLayout().x;e<l.getLayout().x&&(l=t),e>c.getLayout().x&&(c=t),t.depth>h.depth&&(h=t)});var f=l===c?1:o(l,c)/2,d=f-l.getLayout().x,p=0,g=0,v=0,m=0;if("radial"===r)p=i/(c.getLayout().x+f+d),g=a/(h.depth-1||1),kl(u,function(t){var e=vl(v=(t.getLayout().x+d)*p,m=(t.depth-1)*g);t.setLayout({x:e.x,y:e.y,rawX:v,rawY:m},!0)});else{var y=t.getOrient();"RL"===y||"LR"===y?(g=a/(c.getLayout().x+f+d),p=i/(h.depth-1||1),kl(u,function(t){m=(t.getLayout().x+d)*g,t.setLayout({x:v="LR"===y?(t.depth-1)*p:i-(t.depth-1)*p,y:m},!0)})):"TB"!==y&&"BT"!==y||(p=i/(c.getLayout().x+f+d),g=a/(h.depth-1||1),kl(u,function(t){v=(t.getLayout().x+d)*p,t.setLayout({x:v,y:m="TB"===y?(t.depth-1)*g:a-(t.depth-1)*g},!0)}))}}}(t,e)})}),gb.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],_viewRoot:null,defaultOption:{progressive:0,hoverLayerThreshold:1/0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25b6",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(t,e){var n={name:t.name,children:t.data};!function t(e){var n=0;f(e.children,function(e){t(e);var r=e.value;y(r)&&(r=r[0]),n+=r});var r=e.value;y(r)&&(r=r[0]),(null==r||isNaN(r))&&(r=n),r<0&&(r=0),y(e.value)?e.value[0]=r:e.value=r}(n);var r=t.levels||[];r=t.levels=function(t,e){var n,r=e.get("color");if(r)return f(t=t||[],function(t){var e=new Vr(t),r=e.get("color");(e.get("itemStyle.color")||r&&"none"!==r)&&(n=!0)}),n||((t[0]||(t[0]={})).color=r.slice()),t}(r,e);var i={};return i.levels=r,fl.createTree(n,this,i).data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(t){var e=this.getData(),n=this.getRawValue(t),r=ui(y(n)?n[0]:n);return ci(e.getName(t)+": "+r)},getDataParams:function(t){var e=gb.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return e.treePathInfo=Il(n,this),e},setLayoutInfo:function(t){this.layoutInfo=this.layoutInfo||{},a(this.layoutInfo,t)},mapIdToIndex:function(t){var e=this._idIndexMap;e||(e=this._idIndexMap=R(),this._idIndexMapCount=0);var n=e.get(t);return null==n&&e.set(t,n=this._idIndexMapCount++),n},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)}});var JS=5;Pl.prototype={constructor:Pl,render:function(t,e,n,r){var i=t.getModel("breadcrumb"),a=this.group;if(a.removeAll(),i.get("show")&&n){var o=i.getModel("itemStyle"),s=o.getModel("textStyle"),u={pos:{left:i.get("left"),right:i.get("right"),top:i.get("top"),bottom:i.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:i.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,u,s),this._renderContent(t,u,o,s,r),_i(a,u.pos,u.box)}},_prepare:function(t,e,n){for(var r=t;r;r=r.parentNode){var i=r.getModel().get("name"),a=n.getTextRect(i),o=Math.max(a.width+16,e.emptyItemWidth);e.totalWidth+=o+8,e.renderList.push({node:r,text:i,width:o})}},_renderContent:function(t,e,n,r,i){for(var a=0,s=e.emptyItemWidth,u=t.get("breadcrumb.height"),l=function(t,e,n){var r=e.width,i=e.height,a=Yr(t.x,r),o=Yr(t.y,i),s=Yr(t.x2,r),u=Yr(t.y2,i);return(isNaN(a)||isNaN(parseFloat(t.x)))&&(a=0),(isNaN(s)||isNaN(parseFloat(t.x2)))&&(s=r),(isNaN(o)||isNaN(parseFloat(t.y)))&&(o=0),(isNaN(u)||isNaN(parseFloat(t.y2)))&&(u=i),n=m_(n||0),{width:Math.max(s-a-n[1]-n[3],0),height:Math.max(u-o-n[0]-n[2],0)}}(e.pos,e.box),c=e.totalWidth,h=e.renderList,f=h.length-1;f>=0;f--){var d=h[f],p=d.node,g=d.width,v=d.text;c>l.width&&(c-=g-s,g=s,v=null);var y=new Uy({shape:{points:Ll(a,0,g,u,f===h.length-1,0===f)},style:o(n.getItemStyle(),{lineJoin:"bevel",text:v,textFill:r.getTextColor(),textFont:r.getFont()}),z:10,onclick:m(i,p)});this.group.add(y),Dl(y,t,p),a+=g+8}},remove:function(){this.group.removeAll()}};var tT=v,eT=kv,nT=Vy,rT=f,iT=["label"],aT=["emphasis","label"],oT=["upperLabel"],sT=["emphasis","upperLabel"],uT=10,lT=1,cT=2,hT=Om([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),fT=function(t){var e=hT(t);return e.stroke=e.fill=e.lineWidth=null,e};yo({type:"treemap",init:function(t,e){this._storage={nodeGroup:[],background:[],content:[]},this._state="ready"},render:function(t,e,n,r){if(!(u(e.findComponents({mainType:"series",subType:"treemap",query:r}),t)<0)){this.seriesModel=t,this.api=n,this.ecModel=e;var i=Cl(r,["treemapZoomToNode","treemapRootToNode"],t),a=r&&r.type,o=t.layoutInfo,s=!this._oldTree,l=this._storage,c="treemapRootToNode"===a&&i&&l?{rootNodeGroup:l.nodeGroup[i.node.getRawIndex()],direction:r.direction}:null,h=this._giveContainerGroup(o),f=this._doRender(h,t,c);s||a&&"treemapZoomToNode"!==a&&"treemapRootToNode"!==a?f.renderFinally():this._doAnimation(h,f,t,c),this._resetController(n),this._renderBreadcrumb(t,n,i)}},_giveContainerGroup:function(t){var e=this._containerGroup;return e||(e=this._containerGroup=new eT,this._initEvents(e),this.group.add(e)),e.attr("position",[t.x,t.y]),e},_doRender:function(t,e,n){var r=e.getData().tree,i=this._oldTree,a={nodeGroup:[],background:[],content:[]},o={nodeGroup:[],background:[],content:[]},s=this._storage,u=[],l=m(jl,e,o,s,n,a,u);!function t(e,n,r,i,a){function o(t){return t.getId()}function s(o,s){var u=null!=o?e[o]:null,c=null!=s?n[s]:null,h=l(u,c,r,a);h&&t(u&&u.viewChildren||[],c&&c.viewChildren||[],h,i,a+1)}i?(n=e,rT(e,function(t,e){!t.isRemoved()&&s(e,e)})):new bo(n,e,o,o).add(s).update(s).remove(m(s,null)).execute()}(r.root?[r.root]:[],i&&i.root?[i.root]:[],t,r===i||!i,0);var c=function(t){var e={nodeGroup:[],background:[],content:[]};return s&&rT(s,function(t,n){var r=e[n];rT(t,function(t){t&&(r.push(t),t.__tmWillDelete=1)})}),e}();return this._oldTree=r,this._storage=o,{lastsForAnimation:a,willDeleteEls:c,renderFinally:function(){rT(c,function(t){rT(t,function(t){t.parent&&t.parent.remove(t)})}),rT(u,function(t){t.invisible=!0,t.dirty()})}}},_doAnimation:function(t,e,n,r){if(n.get("animation")){var i=n.get("animationDurationUpdate"),o=n.get("animationEasing"),s=function(){var t,e=[],n={};return{add:function(t,r,i,a,o){return b(a)&&(o=a,a=0),!n[t.id]&&(n[t.id]=1,e.push({el:t,target:r,time:i,delay:a,easing:o}),!0)},done:function(e){return t=e,this},start:function(){for(var r=e.length,i=0,a=e.length;i<a;i++){var o=e[i];o.el.animateTo(o.target,o.time,o.delay,o.easing,function(){--r||(e.length=0,n={},t&&t())})}return this}}}();rT(e.willDeleteEls,function(t,e){rT(t,function(t,n){if(!t.invisible){var a,u=t.parent;if(r&&"drillDown"===r.direction)a=u===r.rootNodeGroup?{shape:{x:0,y:0,width:u.__tmNodeWidth,height:u.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var l=0,c=0;u.__tmWillDelete||(l=u.__tmNodeWidth/2,c=u.__tmNodeHeight/2),a="nodeGroup"===e?{position:[l,c],style:{opacity:0}}:{shape:{x:l,y:c,width:0,height:0},style:{opacity:0}}}a&&s.add(t,a,i,o)}})}),rT(this._storage,function(t,n){rT(t,function(t,r){var u=e.lastsForAnimation[n][r],l={};u&&("nodeGroup"===n?u.old&&(l.position=t.position.slice(),t.attr("position",u.old)):(u.old&&(l.shape=a({},t.shape),t.setShape(u.old)),u.fadein?(t.setStyle("opacity",0),l.style={opacity:1}):1!==t.style.opacity&&(l.style={opacity:1})),s.add(t,l,i,o))})},this),this._state="animating",s.done(tT(function(){this._state="ready",e.renderFinally()},this)).start()}},_resetController:function(t){var e=this._controller;e||((e=this._controller=new Vu(t.getZr())).enable(this.seriesModel.get("roam")),e.on("pan",tT(this._onPan,this)),e.on("zoom",tT(this._onZoom,this)));var n=new re(0,0,t.getWidth(),t.getHeight());e.setPointerChecker(function(t,e,r){return n.contain(e,r)})},_clearController:function(){var t=this._controller;t&&(t.dispose(),t=null)},_onPan:function(t){if("animating"!==this._state&&(Math.abs(t.dx)>3||Math.abs(t.dy)>3)){var e=this.seriesModel.getData().tree.root;if(!e)return;var n=e.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+t.dx,y:n.y+t.dy,width:n.width,height:n.height}})}},_onZoom:function(t){var e=t.originX,n=t.originY;if("animating"!==this._state){var r=this.seriesModel.getData().tree.root;if(!r)return;var i=r.getLayout();if(!i)return;var a=new re(i.x,i.y,i.width,i.height),o=this.seriesModel.layoutInfo;e-=o.x,n-=o.y;var s=pt();yt(s,s,[-e,-n]),bt(s,s,[t.scale,t.scale]),yt(s,s,[e,n]),a.applyTransform(s),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:a.x,y:a.y,width:a.width,height:a.height}})}},_initEvents:function(t){t.on("click",function(t){if("ready"===this._state){var e=this.seriesModel.get("nodeClick",!0);if(e){var n=this.findTarget(t.offsetX,t.offsetY);if(n){var r=n.node;if(r.getLayout().isLeafRoot)this._rootToNode(n);else if("zoomToNode"===e)this._zoomToNode(n);else if("link"===e){var i=r.hostTree.data.getItemModel(r.dataIndex),a=i.get("link",!0),o=i.get("target",!0)||"blank";a&&window.open(a,o)}}}}},this)},_renderBreadcrumb:function(t,e,n){n||(n=null!=t.get("leafDepth",!0)?{node:t.getViewRoot()}:this.findTarget(e.getWidth()/2,e.getHeight()/2))||(n={node:t.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new Pl(this.group))).render(t,e,n.node,tT(function(e){"animating"!==this._state&&(Al(t.getViewRoot(),e)?this._rootToNode({node:e}):this._zoomToNode({node:e}))},this))},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},_rootToNode:function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},findTarget:function(t,e){var n;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(r){var i=this._storage.background[r.getRawIndex()];if(i){var a=i.transformCoordToLocal(t,e),o=i.shape;if(!(o.x<=a[0]&&a[0]<=o.x+o.width&&o.y<=a[1]&&a[1]<=o.y+o.height))return!1;n={node:r,offsetX:a[0],offsetY:a[1]}}},this),n}});for(var dT=["treemapZoomToNode","treemapRender","treemapMove"],pT=0;pT<dT.length;pT++)uo({type:dT[pT],update:"updateView"},function(){});uo({type:"treemapRootToNode",update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"treemap",query:t},function(e,n){var r=Cl(t,["treemapZoomToNode","treemapRootToNode"],e);if(r){var i=e.getViewRoot();i&&(t.direction=Al(i,r.node)?"rollUp":"drillDown"),e.resetViewRoot(r.node)}})});var gT=f,vT=x,mT=-1,yT=function(t){var e=t.mappingMethod,r=t.type,i=this.option=n(t);this.type=r,this.mappingMethod=e,this._normalizeData=bT[e];var a=_T[r];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._doMap=a._doMap[e],"piecewise"===e?(Rl(i),function(t){var e=t.pieceList;t.hasSpecialVisual=!1,f(e,function(e,n){e.originIndex=n,null!=e.visual&&(t.hasSpecialVisual=!0)})}(i)):"category"===e?i.categories?function(t){var e=t.categories,n=t.visual,r=t.categoryMap={};if(gT(e,function(t,e){r[t]=e}),!y(n)){var i=[];x(n)?gT(n,function(t,e){var n=r[e];i[null!=n?n:mT]=t}):i[mT]=n,n=Gl(t,i)}for(var a=e.length-1;a>=0;a--)null==n[a]&&(delete r[e[a]],e.pop())}(i):Rl(i,!0):(I("linear"!==e||i.dataExtent),Rl(i))};yT.prototype={constructor:yT,mapValueToVisual:function(t){var e=this._normalizeData(t);return this._doMap(e,t)},getNormalizer:function(){return v(this._normalizeData,this)}};var _T=yT.visualHandlers={color:{applyVisual:Fl("color"),getColorMapper:function(){var t=this.option;return v("category"===t.mappingMethod?function(t,e){return!e&&(t=this._normalizeData(t)),Ul.call(this,t)}:function(e,n,r){var i=!!r;return!n&&(e=this._normalizeData(e)),r=Bt(e,t.parsedVisual,r),i?r:Vt(r,"rgba")},this)},_doMap:{linear:function(t){return Vt(Bt(t,this.option.parsedVisual),"rgba")},category:Ul,piecewise:function(t,e){var n=Hl.call(this,e);return null==n&&(n=Vt(Bt(t,this.option.parsedVisual),"rgba")),n},fixed:zl}},colorHue:Nl(function(t,e){return Ut(t,e)}),colorSaturation:Nl(function(t,e){return Ut(t,null,e)}),colorLightness:Nl(function(t,e){return Ut(t,null,null,e)}),colorAlpha:Nl(function(t,e){return zt(t,e)}),opacity:{applyVisual:Fl("opacity"),_doMap:Vl([0,1])},liftZ:{applyVisual:Fl("liftZ"),_doMap:{linear:zl,category:zl,piecewise:zl,fixed:zl}},symbol:{applyVisual:function(t,e,n){var r=this.mapValueToVisual(t);if(b(r))n("symbol",r);else if(vT(r))for(var i in r)r.hasOwnProperty(i)&&n(i,r[i])},_doMap:{linear:Bl,category:Ul,piecewise:function(t,e){var n=Hl.call(this,e);return null==n&&(n=Bl.call(this,t)),n},fixed:zl}},symbolSize:{applyVisual:Fl("symbolSize"),_doMap:Vl([0,1])}},bT={linear:function(t){return qr(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=yT.findPieceIndex(t,e,!0);if(null!=n)return qr(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?mT:e},fixed:B};yT.listVisualTypes=function(){var t=[];return f(_T,function(e,n){t.push(n)}),t},yT.addVisualHandler=function(t,e){_T[t]=e},yT.isValidType=function(t){return _T.hasOwnProperty(t)},yT.eachVisual=function(t,e,n){x(t)?f(t,e,n):e.call(n,t)},yT.mapVisual=function(t,e,n){var r,i=y(t)?[]:x(t)?{}:(r=!0,null);return yT.eachVisual(t,function(t,a){var o=e.call(n,t,a);r?i=o:i[a]=o}),i},yT.retrieveVisuals=function(t){var e,n={};return t&&gT(_T,function(r,i){t.hasOwnProperty(i)&&(n[i]=t[i],e=!0)}),e?n:null},yT.prepareVisualTypes=function(t){if(vT(t)){var e=[];gT(t,function(t,n){e.push(n)}),t=e}else{if(!y(t))return[];t=t.slice()}return t.sort(function(t,e){return"color"===e&&"color"!==t&&0===t.indexOf("color")?1:-1}),t},yT.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},yT.findPieceIndex=function(t,e,n){function r(e,n){var r=Math.abs(e-t);r<a&&(a=r,i=n)}for(var i,a=1/0,o=0,s=e.length;o<s;o++){var u=e[o].value;if(null!=u){if(u===t||"string"==typeof u&&u===t+"")return o;n&&r(u,o)}}for(o=0,s=e.length;o<s;o++){var l=e[o],c=l.interval,h=l.close;if(c){if(c[0]===-1/0){if(Wl(h[1],t,c[1]))return o}else if(c[1]===1/0){if(Wl(h[0],c[0],t))return o}else if(Wl(h[0],c[0],t)&&Wl(h[1],t,c[1]))return o;n&&r(c[0],o),n&&r(c[1],o)}}if(n)return t===1/0?e.length-1:t===-1/0?0:i};var xT=y,wT="itemStyle",ST=Math.max,TT=Math.min,OT=M,MT=f,kT=["itemStyle","borderWidth"],CT=["itemStyle","gapWidth"],ET=["upperLabel","show"],AT=["upperLabel","height"],IT={seriesType:"treemap",reset:function(t,e,n,r){var i=n.getWidth(),o=n.getHeight(),s=t.option,u=yi(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),l=s.size||[],c=Yr(OT(u.width,l[0]),i),h=Yr(OT(u.height,l[1]),o),f=r&&r.type,d=Cl(r,["treemapZoomToNode","treemapRootToNode"],t),p="treemapRender"===f||"treemapMove"===f?r.rootRect:null,g=t.getViewRoot(),v=El(g);if("treemapMove"!==f){var m="treemapZoomToNode"===f?function(t,e,n,r,i){var a=(e||{}).node,o=[r,i];if(!a||a===n)return o;for(var s,u=r*i,l=u*t.option.zoomToNodeRatio;s=a.parentNode;){for(var c=0,h=s.children,f=0,d=h.length;f<d;f++)c+=h[f].getValue();var p=a.getValue();if(0===p)return o;l*=c/p;var g=s.getModel(),v=g.get(kT);(l+=4*v*v+(3*v+Math.max(v,tc(g)))*Math.pow(l,.5))>p_&&(l=p_),a=s}l<u&&(l=u);var m=Math.pow(l/u,.5);return[r*m,i*m]}(t,d,g,c,h):p?[p.width,p.height]:[c,h],y=s.sort;y&&"asc"!==y&&"desc"!==y&&(y="desc");var _={squareRatio:s.squareRatio,sort:y,leafDepth:s.leafDepth};g.hostTree.clearLayouts(),g.setLayout({x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]}),function t(e,n,r,i){var a,o;if(!e.isRemoved()){var s=e.getLayout();a=s.width,o=s.height;var u=(p=e.getModel()).get(kT),l=p.get(CT)/2,c=tc(p),h=Math.max(u,c),f=u-l,d=h-l,p=e.getModel();e.setLayout({borderWidth:u,upperHeight:h,upperLabelHeight:c},!0);var g=(a=ST(a-2*f,0))*(o=ST(o-f-d,0)),v=Ql(e,p,g,n,r,i);if(v.length){var m={x:f,y:d,width:a,height:o},y=TT(a,o),_=1/0,b=[];b.area=0;for(var x=0,w=v.length;x<w;){var S=v[x];b.push(S),b.area+=S.getLayout().area;var T=Kl(b,y,n.squareRatio);T<=_?(x++,_=T):(b.area-=b.pop().getLayout().area,Jl(b,y,m,l,!1),y=TT(m.width,m.height),b.length=b.area=0,_=1/0)}if(b.length&&Jl(b,y,m,l,!0),!r){var O=p.get("childrenVisibleMin");null!=O&&g<O&&(r=!0)}for(x=0,w=v.length;x<w;x++)t(v[x],n,r,i+1)}}}(g,_,!1,0);var b=g.getLayout();MT(v,function(t,e){var n=(v[e+1]||g).getValue();t.setLayout(a({dataExtent:[n,n],borderWidth:0,upperHeight:0},b))})}var x=t.getData().tree.root;x.setLayout(function(t,e,n){if(p)return{x:p.x,y:p.y};var r={x:0,y:0};if(!n)return r;var i=n.node,a=i.getLayout();if(!a)return r;for(var o=[a.width/2,a.height/2],s=i;s;){var u=s.getLayout();o[0]+=u.x,o[1]+=u.y,s=s.parentNode}return{x:t.width/2-o[0],y:t.height/2-o[1]}}(u,0,d),!0),t.setLayoutInfo(u),function t(e,n,r,i,a){var o=e.getLayout(),s=r[a],u=s&&s===e;if(!(s&&!u||a===r.length&&e!==i)){e.setLayout({isInView:!0,invisible:!u&&!n.intersect(o),isAboveViewRoot:u},!0);var l=new re(n.x-o.x,n.y-o.y,n.width,n.height);MT(e.viewChildren||[],function(e){t(e,l,r,i,a+1)})}}(x,new re(-u.x,-u.y,i,o),v,g,0)}};ho({seriesType:"treemap",reset:function(t,e,n,r){var i=t.getData().tree,a=i.root,o=t.getModel(wT);a.isRemoved()||function t(e,n,r,i,a,o){var s=e.getModel(),u=e.getLayout();if(u&&!u.invisible&&u.isInView){var l,c=e.getModel(wT),h=ql(c,n,r[e.depth],i),d=c.get("borderColor"),p=c.get("borderColorSaturation");null!=p&&(d=function(t,e){return null!=e?Ut(e,null,null,t):null}(p,l=Yl(h))),e.setVisual("borderColor",d);var g=e.viewChildren;if(g&&g.length){var v=function(t,e,n,r,i,a){if(g&&g.length){var o=$l(e,"color")||null!=i.color&&"none"!==i.color&&($l(e,"colorAlpha")||$l(e,"colorSaturation"));if(o){var s=e.get("visualMin"),u=e.get("visualMax"),l=n.dataExtent.slice();null!=s&&s<l[0]&&(l[0]=s),null!=u&&u>l[1]&&(l[1]=u);var c=e.get("colorMappingBy"),h={type:o.name,dataExtent:l,visual:o.range};"color"!==h.type||"index"!==c&&"id"!==c?h.mappingMethod="linear":(h.mappingMethod="category",h.loop=!0);var f=new yT(h);return f.__drColorMappingBy=c,f}}}(0,s,u,0,h);f(g,function(e,n){(e.depth>=a.length||e===a[e.depth])&&t(e,Zl(s,h,e,n,v,o),r,i,a,o)})}else l=Yl(h),e.setVisual("color",l)}}(a,{},d(i.levelModels,function(t){return t?t.get(wT):null}),o,t.getViewRoot().getAncestors(),t)}}),co(IT);var PT=function(t){this._directed=t||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={}},LT=PT.prototype;LT.type="graph",LT.isDirected=function(){return this._directed},LT.addNode=function(t,e){var n=this._nodesMap;if(!n[ec(t=t||""+e)]){var r=new nc(t,e);return r.hostGraph=this,this.nodes.push(r),n[ec(t)]=r,r}},LT.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},LT.getNodeById=function(t){return this._nodesMap[ec(t)]},LT.addEdge=function(t,e,n){var r=this._nodesMap,i=this._edgesMap;if("number"==typeof t&&(t=this.nodes[t]),"number"==typeof e&&(e=this.nodes[e]),nc.isInstance(t)||(t=r[ec(t)]),nc.isInstance(e)||(e=r[ec(e)]),t&&e){var a=t.id+"-"+e.id;if(!i[a]){var o=new rc(t,e,n);return o.hostGraph=this,this._directed&&(t.outEdges.push(o),e.inEdges.push(o)),t.edges.push(o),t!==e&&e.edges.push(o),this.edges.push(o),i[a]=o,o}}},LT.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},LT.getEdge=function(t,e){nc.isInstance(t)&&(t=t.id),nc.isInstance(e)&&(e=e.id);var n=this._edgesMap;return this._directed?n[t+"-"+e]:n[t+"-"+e]||n[e+"-"+t]},LT.eachNode=function(t,e){for(var n=this.nodes,r=n.length,i=0;i<r;i++)n[i].dataIndex>=0&&t.call(e,n[i],i)},LT.eachEdge=function(t,e){for(var n=this.edges,r=n.length,i=0;i<r;i++)n[i].dataIndex>=0&&n[i].node1.dataIndex>=0&&n[i].node2.dataIndex>=0&&t.call(e,n[i],i)},LT.breadthFirstTraverse=function(t,e,n,r){if(nc.isInstance(e)||(e=this._nodesMap[ec(e)]),e){for(var i="out"===n?"outEdges":"in"===n?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!t.call(r,e,null))for(var o=[e];o.length;){var s=o.shift(),u=s[i];for(a=0;a<u.length;a++){var l=u[a],c=l.node1===s?l.node2:l.node1;if(!c.__visited){if(t.call(r,c,s))return;o.push(c),c.__visited=!0}}}}},LT.update=function(){for(var t=this.data,e=this.edgeData,n=this.nodes,r=this.edges,i=0,a=n.length;i<a;i++)n[i].dataIndex=-1;for(i=0,a=t.count();i<a;i++)n[t.getRawIndex(i)].dataIndex=i;for(e.filterSelf(function(t){var n=r[e.getRawIndex(t)];return n.node1.dataIndex>=0&&n.node2.dataIndex>=0}),i=0,a=r.length;i<a;i++)r[i].dataIndex=-1;for(i=0,a=e.count();i<a;i++)r[e.getRawIndex(i)].dataIndex=i},LT.clone=function(){for(var t=new PT(this._directed),e=this.nodes,n=this.edges,r=0;r<e.length;r++)t.addNode(e[r].id,e[r].dataIndex);for(r=0;r<n.length;r++){var i=n[r];t.addEdge(i.node1.id,i.node2.id,i.dataIndex)}return t},nc.prototype={constructor:nc,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(t){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(t)}},rc.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(t)};var DT=function(t,e){return{getValue:function(n){var r=this[t][e];return r.get(r.getDimension(n||"value"),this.dataIndex)},setVisual:function(n,r){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,n,r)},getVisual:function(n,r){return this[t][e].getItemVisual(this.dataIndex,n,r)},setLayout:function(n,r){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,n,r)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}};c(nc,DT("hostGraph","data")),c(rc,DT("hostGraph","edgeData")),PT.Node=nc,PT.Edge=rc,bn(nc),bn(rc);var jT=function(t,e,n,r,i){for(var a=new PT(r),o=0;o<t.length;o++)a.addNode(M(t[o].id,t[o].name,o),o);var s=[],l=[],c=0;for(o=0;o<e.length;o++){var h=e[o],f=h.source,d=h.target;a.addEdge(f,d,c)&&(l.push(h),s.push(M(h.id,f+" > "+d)),c++)}var p,g=n.get("coordinateSystem");if("cartesian2d"===g||"polar"===g)p=Fo(t,n);else{var v=ji.get(g),m=v&&"view"!==v.type&&v.dimensions||[];u(m,"value")<0&&m.concat(["value"]);var y=Bx(t,{coordDimensions:m});(p=new jx(y,n)).initData(t)}var _=new jx(["value"],n);return _.initData(l,s),i&&i(p,_),al({mainData:p,struct:a,structAttr:"graph",datas:{node:p,edge:_},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a},RT=mo({type:"series.graph",init:function(t){RT.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._categoriesData},this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},mergeOption:function(t){RT.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(t.edges||t.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(t){RT.superApply(this,"mergeDefaultAndTheme",arguments),on(t,["edgeLabel"],["show"])},getInitialData:function(t,e){var n=t.edges||t.links||[],r=t.data||t.nodes||[],i=this;if(r&&n)return jT(r,n,this,!0,function(t,n){function r(t){return(t=this.parsePath(t))&&"label"===t[0]?o:t&&"emphasis"===t[0]&&"label"===t[1]?u:this.parentModel}t.wrapMethod("getItemModel",function(t){var e=i._categoriesModels[t.getShallow("category")];return e&&(e.parentModel=t.parentModel,t.parentModel=e),t});var a=i.getModel("edgeLabel"),o=new Vr({label:a.option},a.parentModel,e),s=i.getModel("emphasis.edgeLabel"),u=new Vr({emphasis:{label:s.option}},s.parentModel,e);n.wrapMethod("getItemModel",function(t){return t.customizeGetParent(r),t})}).data},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(t,e,n){if("edge"===n){var r=this.getData(),i=this.getDataParams(t,n),a=r.graph.getEdgeByIndex(t),o=r.getName(a.node1.dataIndex),s=r.getName(a.node2.dataIndex),u=[];return null!=o&&u.push(o),null!=s&&u.push(s),u=ci(u.join(" > ")),i.value&&(u+=" : "+ci(i.value)),u}return RT.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var t=d(this.option.categories||[],function(t){return null!=t.value?t:a({value:0},t)}),e=new jx(["value"],this);e.initData(t),this._categoriesData=e,this._categoriesModels=e.mapArray(function(t){return e.getItemModel(t,!0)})},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t},isAnimationEnabled:function(){return RT.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle"},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,curveness:0,opacity:.5},emphasis:{label:{show:!0}}}}),NT=Hy.prototype,BT=Wy.prototype,FT=ir({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(t,e){(ic(e)?NT:BT).buildPath(t,e)},pointAt:function(t){return ic(this.shape)?NT.pointAt.call(this,t):BT.pointAt.call(this,t)},tangentAt:function(t){var e=this.shape,n=ic(e)?[e.x2-e.x1,e.y2-e.y1]:BT.tangentAt.call(this,t);return $(n,n)}}),UT=["fromSymbol","toSymbol"],zT=uc.prototype;zT.beforeUpdate=function(){var t=this,e=t.childOfName("fromSymbol"),n=t.childOfName("toSymbol"),r=t.childOfName("label");if(e||n||!r.ignore){for(var i=1,a=this.parent;a;)a.scale&&(i/=a.scale[0]),a=a.parent;var o=t.childOfName("line");if(this.__dirty||o.__dirty){var s=o.shape.percent,u=o.pointAt(0),l=o.pointAt(s),c=W([],l,u);if($(c,c),e&&(e.attr("position",u),h=o.tangentAt(0),e.attr("rotation",Math.PI/2-Math.atan2(h[1],h[0])),e.attr("scale",[i*s,i*s])),n){n.attr("position",l);var h=o.tangentAt(1);n.attr("rotation",-Math.PI/2-Math.atan2(h[1],h[0])),n.attr("scale",[i*s,i*s])}if(!r.ignore){r.attr("position",l);var f,d,p,g=5*i;if("end"===r.__position)f=[c[0]*g+l[0],c[1]*g+l[1]],d=c[0]>.8?"left":c[0]<-.8?"right":"center",p=c[1]>.8?"top":c[1]<-.8?"bottom":"middle";else if("middle"===r.__position){var v=s/2,m=[(h=o.tangentAt(v))[1],-h[0]],y=o.pointAt(v);m[1]>0&&(m[0]=-m[0],m[1]=-m[1]),f=[y[0]+m[0]*g,y[1]+m[1]*g],d="center",p="bottom";var _=-Math.atan2(h[1],h[0]);l[0]<u[0]&&(_=Math.PI+_),r.attr("rotation",_)}else f=[-c[0]*g+u[0],-c[1]*g+u[1]],d=c[0]>.8?"right":c[0]<-.8?"left":"center",p=c[1]>.8?"bottom":c[1]<-.8?"top":"middle";r.attr({style:{textVerticalAlign:r.__verticalAlign||p,textAlign:r.__textAlign||d},position:f,scale:[i,i]})}}}},zT._createLine=function(t,e,n){var r=t.hostModel,i=function(t){var e=new FT({name:"line"});return sc(e.shape,t),e}(t.getItemLayout(e));i.shape.percent=0,jr(i,{shape:{percent:1}},r,e),this.add(i);var a=new Py({name:"label"});this.add(a),f(UT,function(n){var r=oc(n,t,e);this.add(r),this[ac(n)]=t.getItemVisual(e,n)},this),this._updateCommonStl(t,e,n)},zT.updateData=function(t,e,n){var r=t.hostModel,i=this.childOfName("line"),a=t.getItemLayout(e),o={shape:{}};sc(o.shape,a),Dr(i,o,r,e),f(UT,function(n){var r=t.getItemVisual(e,n),i=ac(n);if(this[i]!==r){this.remove(this.childOfName(n));var a=oc(n,t,e);this.add(a)}this[i]=r},this),this._updateCommonStl(t,e,n)},zT._updateCommonStl=function(t,e,n){var r=t.hostModel,i=this.childOfName("line"),a=n&&n.lineStyle,s=n&&n.hoverLineStyle,u=n&&n.labelModel,l=n&&n.hoverLabelModel;if(!n||t.hasItemOption){var c=t.getItemModel(e);a=c.getModel("lineStyle").getLineStyle(),s=c.getModel("emphasis.lineStyle").getLineStyle(),u=c.getModel("label"),l=c.getModel("emphasis.label")}var h=t.getItemVisual(e,"color"),d=C(t.getItemVisual(e,"opacity"),a.opacity,1);i.useStyle(o({strokeNoScale:!0,fill:"none",stroke:h,opacity:d},a)),i.hoverStyle=s,f(UT,function(t){var e=this.childOfName(t);e&&(e.setColor(h),e.setStyle({opacity:d}))},this);var p,g,v=u.getShallow("show"),m=l.getShallow("show"),y=this.childOfName("label");if((v||m)&&(p=h||"#000",null==(g=r.getFormattedLabel(e,"normal",t.dataType)))){var _=r.getRawValue(e);g=null==_?t.getName(e):isFinite(_)?Xr(_):_}var b=v?g:null,x=m?k(r.getFormattedLabel(e,"emphasis",t.dataType),g):null,w=y.style;null==b&&null==x||(Mr(y.style,u,{text:b},{autoColor:p}),y.__textAlign=w.textAlign,y.__verticalAlign=w.textVerticalAlign,y.__position=u.get("position")||"middle"),y.hoverStyle=null!=x?{text:x,textFill:l.getTextColor(!0),fontStyle:l.getShallow("fontStyle"),fontWeight:l.getShallow("fontWeight"),fontSize:l.getShallow("fontSize"),fontFamily:l.getShallow("fontFamily")}:{text:null},y.ignore=!v&&!m,Sr(this)},zT.highlight=function(){this.trigger("emphasis")},zT.downplay=function(){this.trigger("normal")},zT.updateLayout=function(t,e){this.setLinePoints(t.getItemLayout(e))},zT.setLinePoints=function(t){var e=this.childOfName("line");sc(e.shape,t),e.dirty()},l(uc,kv);var VT=lc.prototype;VT.isPersistent=function(){return!0},VT.updateData=function(t){var e=this,n=e.group,r=e._lineData;e._lineData=t,r||n.removeAll();var i=cc(t);t.diff(r).add(function(n){!function(t,e,n,r){if(fc(e.getItemLayout(n))){var i=new t._ctor(e,n,r);e.setItemGraphicEl(n,i),t.group.add(i)}}(e,t,n,i)}).update(function(n,a){!function(t,e,n,r,i,a){var o=e.getItemGraphicEl(r);fc(n.getItemLayout(i))?(o?o.updateData(n,i,a):o=new t._ctor(n,i,a),n.setItemGraphicEl(i,o),t.group.add(o)):t.group.remove(o)}(e,r,t,a,n,i)}).remove(function(t){n.remove(r.getItemGraphicEl(t))}).execute()},VT.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,n){e.updateLayout(t,n)},this)},VT.incrementalPrepareUpdate=function(t){this._seriesScope=cc(t),this._lineData=null,this.group.removeAll()},VT.incrementalUpdate=function(t,e){for(var n=t.start;n<t.end;n++)if(fc(e.getItemLayout(n))){var r=new this._ctor(e,n,this._seriesScope);r.traverse(function(t){t.isGroup||(t.incremental=t.useHoverLayer=!0)}),this.group.add(r),e.setItemGraphicEl(n,r)}},VT.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},VT._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()};var HT=[],GT=[],WT=[],qT=An,YT=Hg,XT=Math.abs,$T=function(t,e){function n(t){var e=t.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),e}var r=[],i=Ln,a=[[],[],[]],o=[[],[]],s=[];e/=2,t.eachEdge(function(t,u){var l=t.getLayout(),c=t.getVisual("fromSymbol"),h=t.getVisual("toSymbol");l.__original||(l.__original=[z(l[0]),z(l[1])],l[2]&&l.__original.push(z(l[2])));var f=l.__original;if(null!=l[2]){if(U(a[0],f[0]),U(a[1],f[2]),U(a[2],f[1]),c&&"none"!==c){var d=n(t.node1),p=dc(a,f[0],d*e);i(a[0][0],a[1][0],a[2][0],p,r),a[0][0]=r[3],a[1][0]=r[4],i(a[0][1],a[1][1],a[2][1],p,r),a[0][1]=r[3],a[1][1]=r[4]}h&&"none"!==h&&(d=n(t.node2),p=dc(a,f[1],d*e),i(a[0][0],a[1][0],a[2][0],p,r),a[1][0]=r[1],a[2][0]=r[2],i(a[0][1],a[1][1],a[2][1],p,r),a[1][1]=r[1],a[2][1]=r[2]),U(l[0],a[0]),U(l[1],a[2]),U(l[2],a[1])}else U(o[0],f[0]),U(o[1],f[1]),W(s,o[1],o[0]),$(s,s),c&&"none"!==c&&(d=n(t.node1),G(o[0],o[0],s,d*e)),h&&"none"!==h&&(d=n(t.node2),G(o[1],o[1],s,-d*e)),U(l[0],o[0]),U(l[1],o[1])})},ZT=["itemStyle","opacity"],QT=["lineStyle","opacity"];yo({type:"graph",init:function(t,e){var n=new Ps,r=new lc,i=this.group;this._controller=new Vu(e.getZr()),this._controllerHost={target:i},i.add(n.group),i.add(r.group),this._symbolDraw=n,this._lineDraw=r,this._firstRender=!0},render:function(t,e,n){var r=t.coordinateSystem;this._model=t,this._nodeScaleRatio=t.get("nodeScaleRatio");var i=this._symbolDraw,a=this._lineDraw,o=this.group;if("view"===r.type){var s={position:r.position,scale:r.scale};this._firstRender?o.attr(s):Dr(o,s,t)}$T(t.getGraph(),this._getNodeGlobalScale(t));var u=t.getData();i.updateData(u);var l=t.getEdgeData();a.updateData(l),this._updateNodeAndLinkScale(),this._updateController(t,e,n),clearTimeout(this._layoutTimeout);var c=t.forceLayout,h=t.get("force.layoutAnimation");c&&this._startForceLayoutIteration(c,h),u.eachItemGraphicEl(function(e,r){var i=u.getItemModel(r);e.off("drag").off("dragend");var a=i.get("draggable");a&&e.on("drag",function(){c&&(c.warmUp(),!this._layouting&&this._startForceLayoutIteration(c,h),c.setFixed(r),u.setItemLayout(r,e.position))},this).on("dragend",function(){c&&c.setUnfixed(r)},this),e.setDraggable(a&&c),e.off("mouseover",e.__focusNodeAdjacency),e.off("mouseout",e.__unfocusNodeAdjacency),i.get("focusNodeAdjacency")&&(e.on("mouseover",e.__focusNodeAdjacency=function(){n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,dataIndex:e.dataIndex})}),e.on("mouseout",e.__unfocusNodeAdjacency=function(){n.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t.id})}))},this),u.graph.eachEdge(function(e){var r=e.getGraphicEl();r.off("mouseover",r.__focusNodeAdjacency),r.off("mouseout",r.__unfocusNodeAdjacency),e.getModel().get("focusNodeAdjacency")&&(r.on("mouseover",r.__focusNodeAdjacency=function(){n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,edgeDataIndex:e.dataIndex})}),r.on("mouseout",r.__unfocusNodeAdjacency=function(){n.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t.id})}))});var f="circular"===t.get("layout")&&t.get("circular.rotateLabel"),d=u.getLayout("cx"),p=u.getLayout("cy");u.eachItemGraphicEl(function(t,e){var n=t.getSymbolPath();if(f){var r=u.getItemLayout(e),i=Math.atan2(r[1]-p,r[0]-d);i<0&&(i=2*Math.PI+i);var a=r[0]<d;a&&(i-=Math.PI);var o=a?"left":"right";n.setStyle({textRotation:-i,textPosition:o,textOrigin:"center"}),n.hoverStyle&&(n.hoverStyle.textPosition=o)}else n.setStyle({textRotation:0})}),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},focusNodeAdjacency:function(t,e,n,r){var i=this._model.getData().graph,a=r.edgeDataIndex,o=i.getNodeByIndex(r.dataIndex),s=i.getEdgeByIndex(a);(o||s)&&(i.eachNode(function(t){gc(t,ZT,.1)}),i.eachEdge(function(t){gc(t,QT,.1)}),o&&(vc(o,ZT),f(o.edges,function(t){t.dataIndex<0||(vc(t,QT),vc(t.node1,ZT),vc(t.node2,ZT))})),s&&(vc(s,QT),vc(s.node1,ZT),vc(s.node2,ZT)))},unfocusNodeAdjacency:function(t,e,n,r){var i=this._model.getData().graph;i.eachNode(function(t){gc(t,ZT)}),i.eachEdge(function(t){gc(t,QT)})},_startForceLayoutIteration:function(t,e){var n=this;!function r(){t.step(function(t){n.updateLayout(n._model),(n._layouting=!t)&&(e?n._layoutTimeout=setTimeout(r,16):r())})}()},_updateController:function(t,e,n){var r=this._controller,i=this._controllerHost,a=this.group;r.setPointerChecker(function(e,r,i){var o=a.getBoundingRect();return o.applyTransform(a.transform),o.contain(r,i)&&!Ju(e,n,t)}),"view"===t.coordinateSystem.type?(r.enable(t.get("roam")),i.zoomLimit=t.get("scaleLimit"),i.zoom=t.coordinateSystem.getZoom(),r.off("pan").off("zoom").on("pan",function(e){Qu(i,e.dx,e.dy),n.dispatchAction({seriesId:t.id,type:"graphRoam",dx:e.dx,dy:e.dy})}).on("zoom",function(e){Ku(i,e.scale,e.originX,e.originY),n.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),this._updateNodeAndLinkScale(),$T(t.getGraph(),this._getNodeGlobalScale(t)),this._lineDraw.updateLayout()},this)):r.disable()},_updateNodeAndLinkScale:function(){var t=this._model,e=t.getData(),n=this._getNodeGlobalScale(t),r=[n,n];e.eachItemGraphicEl(function(t,e){t.attr("scale",r)})},_getNodeGlobalScale:function(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=this._nodeScaleRatio,r=e.scale,i=r&&r[0]||1;return((e.getZoom()-1)*n+1)/i},updateLayout:function(t){$T(t.getGraph(),this._getNodeGlobalScale(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}}),uo({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),uo({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){}),uo({type:"graphRoam",event:"graphRoam",update:"none"},function(t,e){e.eachComponent({mainType:"series",query:t},function(e){var n=il(e.coordinateSystem,t);e.setCenter&&e.setCenter(n.center),e.setZoom&&e.setZoom(n.zoom)})});var KT=G;so(function(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.eachSeriesByType("graph",function(t){var n=t.getCategoriesData(),r=t.getGraph().data,i=n.mapArray(n.getName);r.filterSelf(function(t){var n=r.getItemModel(t).getShallow("category");if(null!=n){"number"==typeof n&&(n=i[n]);for(var a=0;a<e.length;a++)if(!e[a].isSelected(n))return!1}return!0})},this)}),ho(zw("graph","circle",null)),ho(function(t){var e={};t.eachSeriesByType("graph",function(t){var n=t.getCategoriesData(),r=t.getData(),i={};n.each(function(r){var a=n.getName(r);i["ec-"+a]=r;var o=n.getItemModel(r).get("itemStyle.color")||t.getColorFromPalette(a,e);n.setItemVisual(r,"color",o)}),n.count()&&r.each(function(t){var e=r.getItemModel(t).getShallow("category");null!=e&&("string"==typeof e&&(e=i["ec-"+e]),r.getItemVisual(t,"color",!0)||r.setItemVisual(t,"color",n.getItemVisual(e,"color")))})})}),ho(function(t){t.eachSeriesByType("graph",function(t){var e=t.getGraph(),n=t.getEdgeData(),r=mc(t.get("edgeSymbol")),i=mc(t.get("edgeSymbolSize")),a="lineStyle.color".split("."),o="lineStyle.opacity".split(".");n.setVisual("fromSymbol",r&&r[0]),n.setVisual("toSymbol",r&&r[1]),n.setVisual("fromSymbolSize",i&&i[0]),n.setVisual("toSymbolSize",i&&i[1]),n.setVisual("color",t.get(a)),n.setVisual("opacity",t.get(o)),n.each(function(t){var r=n.getItemModel(t),i=e.getEdgeByIndex(t),s=mc(r.getShallow("symbol",!0)),u=mc(r.getShallow("symbolSize",!0)),l=r.get(a),c=r.get(o);switch(l){case"source":l=i.node1.getVisual("color");break;case"target":l=i.node2.getVisual("color")}s[0]&&i.setVisual("fromSymbol",s[0]),s[1]&&i.setVisual("toSymbol",s[1]),u[0]&&i.setVisual("fromSymbolSize",u[0]),u[1]&&i.setVisual("toSymbolSize",u[1]),i.setVisual("color",l),i.setVisual("opacity",c)})})}),co(function(t,e){t.eachSeriesByType("graph",function(t){var e=t.get("layout"),n=t.coordinateSystem;if(n&&"view"!==n.type){var r=t.getData(),i=[];f(n.dimensions,function(t){i=i.concat(r.mapDimension(t,!0))});for(var a=0;a<r.count();a++){for(var o=[],s=!1,u=0;u<i.length;u++){var l=r.get(i[u],a);isNaN(l)||(s=!0),o.push(l)}r.setItemLayout(a,s?n.dataToPoint(o):[NaN,NaN])}_c(r.graph)}else e&&"none"!==e||yc(t)})}),co(function(t){t.eachSeriesByType("graph",function(t){"circular"===t.get("layout")&&bc(t)})}),co(function(t){t.eachSeriesByType("graph",function(t){var e=t.coordinateSystem;if(!e||"view"===e.type)if("force"===t.get("layout")){var n=t.preservedPoints||{},r=t.getGraph(),i=r.data,a=r.edgeData,o=t.getModel("force"),s=o.get("initLayout");t.preservedPoints?i.each(function(t){var e=i.getId(t);i.setItemLayout(t,n[e]||[NaN,NaN])}):s&&"none"!==s?"circular"===s&&bc(t):yc(t);var u=i.getDataExtent("value"),l=a.getDataExtent("value"),c=o.get("repulsion"),h=o.get("edgeLength");y(c)||(c=[c,c]),y(h)||(h=[h,h]),h=[h[1],h[0]];var f=i.mapArray("value",function(t,e){var n=i.getItemLayout(e),r=qr(t,u,c);return isNaN(r)&&(r=(c[0]+c[1])/2),{w:r,rep:r,fixed:i.getItemModel(e).get("fixed"),p:!n||isNaN(n[0])||isNaN(n[1])?null:n}}),d=a.mapArray("value",function(t,e){var n=r.getEdgeByIndex(e),i=qr(t,l,h);return isNaN(i)&&(i=(h[0]+h[1])/2),{n1:f[n.node1.dataIndex],n2:f[n.node2.dataIndex],d:i,curveness:n.getModel().get("lineStyle.curveness")||0}}),p=(e=t.coordinateSystem).getBoundingRect(),g=function(t,e,n){for(var r=n.rect,i=r.width,a=r.height,o=[r.x+i/2,r.y+a/2],s=null==n.gravity?.1:n.gravity,u=0;u<t.length;u++){var l=t[u];l.p||(l.p=F(i*(Math.random()-.5)+o[0],a*(Math.random()-.5)+o[1])),l.pp=z(l.p),l.edges=null}var c=.6;return{warmUp:function(){c=.5},setFixed:function(e){t[e].fixed=!0},setUnfixed:function(e){t[e].fixed=!1},step:function(n){for(var r=[],i=t.length,a=0;a<e.length;a++){var u=e[a];W(r,(p=u.n2).p,(f=u.n1).p);var l=q(r)-u.d,h=p.w/(f.w+p.w);isNaN(h)&&(h=0),$(r,r),!f.fixed&&KT(f.p,f.p,r,h*l*c),!p.fixed&&KT(p.p,p.p,r,-(1-h)*l*c)}for(a=0;a<i;a++)(m=t[a]).fixed||(W(r,o,m.p),KT(m.p,m.p,r,s*c));for(a=0;a<i;a++)for(var f=t[a],d=a+1;d<i;d++){var p=t[d];W(r,p.p,f.p),0===(l=q(r))&&(V(r,Math.random()-.5,Math.random()-.5),l=1);var g=(f.rep+p.rep)/l/l;!f.fixed&&KT(f.pp,f.pp,r,g),!p.fixed&&KT(p.pp,p.pp,r,-g)}var v=[];for(a=0;a<i;a++){var m=t[a];m.fixed||(W(v,m.p,m.pp),KT(m.p,m.p,v,c),U(m.pp,m.p))}c*=.992,n&&n(t,e,c<.01)}}}(f,d,{rect:p,gravity:o.get("gravity")}),v=g.step;g.step=function(t){for(var e=0,a=f.length;e<a;e++)f[e].fixed&&U(f[e].p,r.getNodeByIndex(e).getLayout());v(function(e,a,o){for(var s=0,u=e.length;s<u;s++)e[s].fixed||r.getNodeByIndex(s).setLayout(e[s].p),n[i.getId(s)]=e[s].p;for(s=0,u=a.length;s<u;s++){var l=a[s],c=r.getEdgeByIndex(s),h=l.n1.p,f=l.n2.p,d=c.getLayout();(d=d?d.slice():[])[0]=d[0]||[],d[1]=d[1]||[],U(d[0],h),U(d[1],f),+l.curveness&&(d[2]=[(h[0]+f[0])/2-(h[1]-f[1])*l.curveness,(h[1]+f[1])/2-(f[0]-h[0])*l.curveness]),c.setLayout(d)}t&&t(o)})},t.forceLayout=g,t.preservedPoints=n,g.step()}else t.forceLayout=null})}),lo("graphView",{create:function(t,e){var n=[];return t.eachSeriesByType("graph",function(t){var r=t.get("coordinateSystem");if(!r||"view"===r){var i=t.getData(),a=[],o=[];Dn(i.mapArray(function(t){var e=i.getItemModel(t);return[+e.get("x"),+e.get("y")]}),a,o),o[0]-a[0]==0&&(o[0]+=1,a[0]-=1),o[1]-a[1]==0&&(o[1]+=1,a[1]-=1);var s=(o[0]-a[0])/(o[1]-a[1]),u=function(t,e,n){var r=t.getBoxLayoutParams();return r.aspect=n,yi(r,{width:e.getWidth(),height:e.getHeight()})}(t,e,s);isNaN(s)&&(a=[u.x,u.y],o=[u.x+u.width,u.y+u.height]);var l=o[0]-a[0],c=o[1]-a[1],h=u.width,f=u.height,d=t.coordinateSystem=new Iu;d.zoomLimit=t.get("scaleLimit"),d.setBoundingRect(a[0],a[1],l,c),d.setViewRect(u.x,u.y,h,f),d.setCenter(t.get("center")),d.setZoom(t.get("zoom")),n.push(d)}}),n}}),gb.extend({type:"series.gauge",getInitialData:function(t,e){var n=t.data||[];return y(n)||(n=[n]),t.data=n,yS(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});var JT=Zn.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(t,e){var n=Math.cos,r=Math.sin,i=e.r,a=e.width,o=e.angle,s=e.x-n(o)*a*(a>=i/3?1:2),u=e.y-r(o)*a*(a>=i/3?1:2);o=e.angle-Math.PI/2,t.moveTo(s,u),t.lineTo(e.x+n(o)*a,e.y+r(o)*a),t.lineTo(e.x+n(e.angle)*i,e.y+r(e.angle)*i),t.lineTo(e.x-n(o)*a,e.y-r(o)*a),t.lineTo(s,u)}}),tO=2*Math.PI,eO=(fa.extend({type:"gauge",render:function(t,e,n){this.group.removeAll();var r=t.get("axisLine.lineStyle.color"),i=function(t,e){var n=t.get("center"),r=e.getWidth(),i=e.getHeight(),a=Math.min(r,i);return{cx:Yr(n[0],e.getWidth()),cy:Yr(n[1],e.getHeight()),r:Yr(t.get("radius"),a/2)}}(t,n);this._renderMain(t,e,n,r,i)},dispose:function(){},_renderMain:function(t,e,n,r,i){for(var a=this.group,o=t.getModel("axisLine").getModel("lineStyle"),s=t.get("clockwise"),u=-t.get("startAngle")/180*Math.PI,l=-t.get("endAngle")/180*Math.PI,c=(l-u)%tO,h=u,f=o.get("width"),d=0;d<r.length;d++){var p=Math.min(Math.max(r[d][0],0),1),g=new Ry({shape:{startAngle:h,endAngle:l=u+c*p,cx:i.cx,cy:i.cy,clockwise:s,r0:i.r-f,r:i.r},silent:!0});g.setStyle({fill:r[d][1]}),g.setStyle(o.getLineStyle(["color","borderWidth","borderColor"])),a.add(g),h=l}var v=function(t){if(t<=0)return r[0][1];for(var e=0;e<r.length;e++)if(r[e][0]>=t&&(0===e?0:r[e-1][0])<t)return r[e][1];return r[e-1][1]};if(!s){var m=u;u=l,l=m}this._renderTicks(t,e,n,v,i,u,l,s),this._renderPointer(t,e,n,v,i,u,l,s),this._renderTitle(t,e,n,v,i),this._renderDetail(t,e,n,v,i)},_renderTicks:function(t,e,n,r,i,a,o,s){for(var u=this.group,l=i.cx,c=i.cy,h=i.r,f=+t.get("min"),d=+t.get("max"),p=t.getModel("splitLine"),g=t.getModel("axisTick"),v=t.getModel("axisLabel"),m=t.get("splitNumber"),y=g.get("splitNumber"),_=Yr(p.get("length"),h),b=Yr(g.get("length"),h),x=a,w=(o-a)/m,S=w/y,T=p.getModel("lineStyle").getLineStyle(),O=g.getModel("lineStyle").getLineStyle(),M=0;M<=m;M++){var k=Math.cos(x),C=Math.sin(x);if(p.get("show")){var E=new Hy({shape:{x1:k*h+l,y1:C*h+c,x2:k*(h-_)+l,y2:C*(h-_)+c},style:T,silent:!0});"auto"===T.stroke&&E.setStyle({stroke:r(M/m)}),u.add(E)}if(v.get("show")){var A=xc(Xr(M/m*(d-f)+f),v.get("formatter")),I=v.get("distance"),P=r(M/m);u.add(new Py({style:Mr({},v,{text:A,x:k*(h-_-I)+l,y:C*(h-_-I)+c,textVerticalAlign:C<-.4?"top":C>.4?"bottom":"middle",textAlign:k<-.4?"left":k>.4?"right":"center"},{autoColor:P}),silent:!0}))}if(g.get("show")&&M!==m){for(var L=0;L<=y;L++){k=Math.cos(x),C=Math.sin(x);var D=new Hy({shape:{x1:k*h+l,y1:C*h+c,x2:k*(h-b)+l,y2:C*(h-b)+c},silent:!0,style:O});"auto"===O.stroke&&D.setStyle({stroke:r((M+L/y)/m)}),u.add(D),x+=S}x-=S}else x+=w}},_renderPointer:function(t,e,n,r,i,a,o,s){var u=this.group,l=this._data;if(t.get("pointer.show")){var c=[+t.get("min"),+t.get("max")],h=[a,o],f=t.getData(),d=f.mapDimension("value");f.diff(l).add(function(e){var n=new JT({shape:{angle:a}});jr(n,{shape:{angle:qr(f.get(d,e),c,h,!0)}},t),u.add(n),f.setItemGraphicEl(e,n)}).update(function(e,n){var r=l.getItemGraphicEl(n);Dr(r,{shape:{angle:qr(f.get(d,e),c,h,!0)}},t),u.add(r),f.setItemGraphicEl(e,r)}).remove(function(t){var e=l.getItemGraphicEl(t);u.remove(e)}).execute(),f.eachItemGraphicEl(function(t,e){var n=f.getItemModel(e),a=n.getModel("pointer");t.setShape({x:i.cx,y:i.cy,width:Yr(a.get("width"),i.r),r:Yr(a.get("length"),i.r)}),t.useStyle(n.getModel("itemStyle").getItemStyle()),"auto"===t.style.fill&&t.setStyle("fill",r(qr(f.get(d,e),c,[0,1],!0))),Sr(t,n.getModel("emphasis.itemStyle").getItemStyle())}),this._data=f}else l&&l.eachItemGraphicEl(function(t){u.remove(t)})},_renderTitle:function(t,e,n,r,i){var a=t.getData(),o=a.mapDimension("value"),s=t.getModel("title");if(s.get("show")){var u=s.get("offsetCenter"),l=i.cx+Yr(u[0],i.r),c=i.cy+Yr(u[1],i.r),h=+t.get("min"),f=+t.get("max"),d=r(qr(t.getData().get(o,0),[h,f],[0,1],!0));this.group.add(new Py({silent:!0,style:Mr({},s,{x:l,y:c,text:a.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:d,forceRich:!0})}))}},_renderDetail:function(t,e,n,r,i){var a=t.getModel("detail"),o=+t.get("min"),s=+t.get("max");if(a.get("show")){var u=a.get("offsetCenter"),l=i.cx+Yr(u[0],i.r),c=i.cy+Yr(u[1],i.r),h=Yr(a.get("width"),i.r),f=Yr(a.get("height"),i.r),d=t.getData(),p=d.get(d.mapDimension("value"),0),g=r(qr(p,[o,s],[0,1],!0));this.group.add(new Py({silent:!0,style:Mr({},a,{x:l,y:c,text:xc(p,a.get("formatter")),textWidth:isNaN(h)?null:h,textHeight:isNaN(f)?null:f,textAlign:"center",textVerticalAlign:"middle"},{autoColor:g,forceRich:!0})}))}}}),mo({type:"series.funnel",init:function(t){eO.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()},this._defaultLabelLine(t)},getInitialData:function(t,e){return yS(this,["value"])},_defaultLabelLine:function(t){on(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},getDataParams:function(t){var e=this.getData(),n=eO.superCall(this,"getDataParams",t),r=e.mapDimension("value"),i=e.getSum(r);return n.percent=i?+(e.get(r,t)/i*100).toFixed(2):0,n.$vars.push("percent"),n},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}})),nO=wc.prototype,rO=["itemStyle","opacity"];nO.updateData=function(t,e,n){var r=this.childAt(0),i=t.hostModel,a=t.getItemModel(e),s=t.getItemLayout(e),u=t.getItemModel(e).get(rO);u=null==u?1:u,r.useStyle({}),n?(r.setShape({points:s.points}),r.setStyle({opacity:0}),jr(r,{style:{opacity:u}},i,e)):Dr(r,{style:{opacity:u},shape:{points:s.points}},i,e);var l=a.getModel("itemStyle"),c=t.getItemVisual(e,"color");r.setStyle(o({lineJoin:"round",fill:c},l.getItemStyle(["opacity"]))),r.hoverStyle=l.getModel("emphasis").getItemStyle(),this._updateLabel(t,e),Sr(this)},nO._updateLabel=function(t,e){var n=this.childAt(1),r=this.childAt(2),i=t.hostModel,a=t.getItemModel(e),o=t.getItemLayout(e).label,s=t.getItemVisual(e,"color");Dr(n,{shape:{points:o.linePoints||o.linePoints}},i,e),Dr(r,{style:{x:o.x,y:o.y}},i,e),r.attr({rotation:o.rotation,origin:[o.x,o.y],z2:10});var u=a.getModel("label"),l=a.getModel("emphasis.label"),c=a.getModel("labelLine"),h=a.getModel("emphasis.labelLine");s=t.getItemVisual(e,"color"),Or(r.style,r.hoverStyle={},u,l,{labelFetcher:t.hostModel,labelDataIndex:e,defaultText:t.getName(e),autoColor:s,useInsideStyle:!!o.inside},{textAlign:o.textAlign,textVerticalAlign:o.verticalAlign}),r.ignore=r.normalIgnore=!u.get("show"),r.hoverIgnore=!l.get("show"),n.ignore=n.normalIgnore=!c.get("show"),n.hoverIgnore=!h.get("show"),n.setStyle({stroke:s}),n.setStyle(c.getModel("lineStyle").getLineStyle()),n.hoverStyle=h.getModel("lineStyle").getLineStyle()},l(wc,kv),fa.extend({type:"funnel",render:function(t,e,n){var r=t.getData(),i=this._data,a=this.group;r.diff(i).add(function(t){var e=new wc(r,t);r.setItemGraphicEl(t,e),a.add(e)}).update(function(t,e){var n=i.getItemGraphicEl(e);n.updateData(r,t),a.add(n),r.setItemGraphicEl(t,n)}).remove(function(t){var e=i.getItemGraphicEl(t);a.remove(e)}).execute(),this._data=r},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),ho(SS("funnel")),co(function(t,e,n){t.eachSeriesByType("funnel",function(t){var n=t.getData(),r=n.mapDimension("value"),i=t.get("sort"),a=function(t,e){return yi(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e),o=function(t,e){for(var n=t.mapDimension("value"),r=t.mapArray(n,function(t){return t}),i=[],a="ascending"===e,o=0,s=t.count();o<s;o++)i[o]=o;return"function"==typeof e?i.sort(e):"none"!==e&&i.sort(function(t,e){return a?r[t]-r[e]:r[e]-r[t]}),i}(n,i),s=[Yr(t.get("minSize"),a.width),Yr(t.get("maxSize"),a.width)],u=n.getDataExtent(r),l=t.get("min"),c=t.get("max");null==l&&(l=Math.min(u[0],0)),null==c&&(c=u[1]);var h=t.get("funnelAlign"),f=t.get("gap"),d=(a.height-f*(n.count()-1))/n.count(),p=a.y,g=function(t,e){var i,o=qr(n.get(r,t)||0,[l,c],s,!0);switch(h){case"left":i=a.x;break;case"center":i=a.x+(a.width-o)/2;break;case"right":i=a.x+a.width-o}return[[i,e],[i+o,e]]};"ascending"===i&&(d=-d,f=-f,p+=a.height,o=o.reverse());for(var v=0;v<o.length;v++){var m=o[v],y=o[v+1],_=n.getItemModel(m).get("itemStyle.height");null==_?_=d:(_=Yr(_,a.height),"ascending"===i&&(_=-_));var b=g(m,p),x=g(y,p+_);p+=_+f,n.setItemLayout(m,{points:b.concat(x.slice().reverse())})}!function(t){t.each(function(e){var n,r,i,a,o=t.getItemModel(e),s=o.getModel("label").get("position"),u=o.getModel("labelLine"),l=t.getItemLayout(e),c=l.points,h="inner"===s||"inside"===s||"center"===s;if(h)n="center",a=[[r=(c[0][0]+c[1][0]+c[2][0]+c[3][0])/4,i=(c[0][1]+c[1][1]+c[2][1]+c[3][1])/4],[r,i]];else{var f,d,p,g=u.get("length");"left"===s?(d=(c[3][1]+c[0][1])/2,r=(p=(f=(c[3][0]+c[0][0])/2)-g)-5,n="right"):(d=(c[1][1]+c[2][1])/2,r=(p=(f=(c[1][0]+c[2][0])/2)+g)+5,n="left"),a=[[f,d],[p,d]],i=d}l.label={linePoints:a,x:r,y:i,verticalAlign:"middle",textAlign:n,inside:h}})}(n)})}),so(MS("funnel"));var iO=function(t,e,n,r,i){xw.call(this,t,e,n),this.type=r||"value",this.axisIndex=i};iO.prototype={constructor:iO,model:null,isHorizontal:function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")}},l(iO,xw);var aO=function(t,e,n,r,i,a){e[0]=Tc(e[0],n),e[1]=Tc(e[1],n),t=t||0,null!=i&&(i=Tc(i,[0,n[1]-n[0]])),null!=a&&(a=Math.max(a,null!=i?i:0)),"all"===r&&(i=a=Math.abs(e[1]-e[0]),r=0);var o=Sc(e,r);e[r]+=t;var s=i||0,u=n.slice();o.sign<0?u[0]+=s:u[1]-=s,e[r]=Tc(e[r],u),l=Sc(e,r),null!=i&&(l.sign!==o.sign||l.span<i)&&(e[1-r]=e[r]+o.sign*i);var l=Sc(e,r);return null!=a&&l.span>a&&(e[1-r]=e[r]+l.sign*a),e},oO=f,sO=Math.min,uO=Math.max,lO=Math.floor,cO=Math.ceil,hO=Xr,fO=Math.PI;Oc.prototype={type:"parallel",constructor:Oc,_init:function(t,e,n){var r=t.parallelAxisIndex;oO(t.dimensions,function(t,n){var i=r[n],a=e.getComponent("parallelAxis",i),o=this._axesMap.set(t,new iO(t,os(a),[0,0],a.get("type"),i));o.onBand="category"===o.type&&a.get("boundaryGap"),o.inverse=a.get("inverse"),a.axis=o,o.model=a,o.coordinateSystem=a.coordinateSystem=this},this)},update:function(t,e){this._updateAxesFromSeries(this._model,t)},containPoint:function(t){var e=this._makeLayoutInfo(),n=e.axisBase,r=e.layoutBase,i=e.pixelDimIndex,a=t[1-i],o=t[i];return a>=n&&a<=n+e.axisLength&&o>=r&&o<=r+e.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(t,e){e.eachSeries(function(n){if(t.contains(n,e)){var r=n.getData();oO(this.dimensions,function(t){var e=this._axesMap.get(t);e.scale.unionExtentFromData(r,r.mapDimension(t)),as(e.scale,e.model)},this)}},this)},resize:function(t,e){this._rect=yi(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var t,e=this._model,n=this._rect,r=["x","y"],i=["width","height"],a=e.get("layout"),o="horizontal"===a?0:1,s=n[i[o]],u=[0,s],l=this.dimensions.length,c=Mc(e.get("axisExpandWidth"),u),h=Mc(e.get("axisExpandCount")||0,[0,l]),f=e.get("axisExpandable")&&l>3&&l>h&&h>1&&c>0&&s>0,d=e.get("axisExpandWindow");d?(t=Mc(d[1]-d[0],u),d[1]=d[0]+t):(t=Mc(c*(h-1),u),(d=[c*(e.get("axisExpandCenter")||lO(l/2))-t/2])[1]=d[0]+t);var p=(s-t)/(l-h);p<3&&(p=0);var g=[lO(hO(d[0]/c,1))+1,cO(hO(d[1]/c,1))-1];return{layout:a,pixelDimIndex:o,layoutBase:n[r[o]],layoutLength:s,axisBase:n[r[1-o]],axisLength:n[i[1-o]],axisExpandable:f,axisExpandWidth:c,axisCollapseWidth:p,axisExpandWindow:d,axisCount:l,winInnerIndices:g,axisExpandWindow0Pos:p/c*d[0]}},_layoutAxes:function(){var t=this._rect,e=this._axesMap,n=this.dimensions,r=this._makeLayoutInfo(),i=r.layout;e.each(function(t){var e=[0,r.axisLength],n=t.inverse?1:0;t.setExtent(e[n],e[1-n])}),oO(n,function(e,n){var a=(r.axisExpandable?function(t,e){var n,r,i=e.axisExpandWidth,a=e.axisCollapseWidth,o=e.winInnerIndices,s=a,u=!1;return t<o[0]?(n=t*a,r=a):t<=o[1]?(n=e.axisExpandWindow0Pos+t*i-e.axisExpandWindow[0],s=i,u=!0):(n=e.layoutLength-(e.axisCount-1-t)*a,r=a),{position:n,axisNameAvailableWidth:s,axisLabelShow:u,nameTruncateMaxWidth:r}}:function(t,e){var n=e.layoutLength/(e.axisCount-1);return{position:n*t,axisNameAvailableWidth:n,axisLabelShow:!0}})(n,r),o={horizontal:{x:a.position,y:r.axisLength},vertical:{x:0,y:a.position}},s=[o[i].x+t.x,o[i].y+t.y],u={horizontal:fO/2,vertical:0}[i],l=pt();_t(l,l,u),yt(l,l,s),this._axesLayout[e]={position:s,rotation:u,transform:l,axisNameAvailableWidth:a.axisNameAvailableWidth,axisLabelShow:a.axisLabelShow,nameTruncateMaxWidth:a.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(t){return this._axesMap.get(t)},dataToPoint:function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},eachActiveState:function(t,e,n,r){null==n&&(n=0),null==r&&(r=t.count());var i=this._axesMap,a=this.dimensions,o=[],s=[];f(a,function(e){o.push(t.mapDimension(e)),s.push(i.get(e).model)});for(var u=this.hasAxisBrushed(),l=n;l<r;l++){var c;if(u){c="active";for(var h=t.getValues(o,l),d=0,p=a.length;d<p;d++)if("inactive"===s[d].getActiveState(h[d])){c="inactive";break}}else c="normal";e(c,l)}},hasAxisBrushed:function(){for(var t=this.dimensions,e=this._axesMap,n=!1,r=0,i=t.length;r<i;r++)"normal"!==e.get(t[r]).model.getActiveState()&&(n=!0);return n},axisCoordToPoint:function(t,e){return Nr([t,0],this._axesLayout[e].transform)},getAxisLayout:function(t){return n(this._axesLayout[t])},getSlidedAxisExpandWindow:function(t){var e=this._makeLayoutInfo(),n=e.pixelDimIndex,r=e.axisExpandWindow.slice(),i=r[1]-r[0],a=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:r};var o,s=t[n]-e.layoutBase-e.axisExpandWindow0Pos,u="slide",l=e.axisCollapseWidth,c=this._model.get("axisExpandSlideTriggerArea"),h=null!=c[0];return l?(h&&l&&s<i*c[0]?(u="jump",o=s-i*c[2]):h&&l&&s>i*(1-c[0])?(u="jump",o=s-i*(1-c[2])):(o=s-i*c[1])>=0&&(o=s-i*(1-c[1]))<=0&&(o=0),(o*=e.axisExpandWidth/l)?aO(o,r,a,"all"):u="none"):((r=[uO(0,a[1]*s/(i=r[1]-r[0])-i/2)])[1]=sO(a[1],r[0]+i),r[0]=r[1]-i),{axisExpandWindow:r,behavior:u}}},ji.register("parallel",{create:function(t,e){var n=[];return t.eachComponent("parallel",function(r,i){var a=new Oc(r,t,e);a.name="parallel_"+i,a.resize(r,e),r.coordinateSystem=a,a.model=r,n.push(a)}),t.eachSeries(function(e){if("parallel"===e.get("coordinateSystem")){var n=t.queryComponents({mainType:"parallel",index:e.get("parallelIndex"),id:e.get("parallelId")})[0];e.coordinateSystem=n.coordinateSystem}}),n}});var dO=A_.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return Om([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(t){var e=this.activeIntervals=n(t);if(e)for(var r=e.length-1;r>=0;r--)$r(e[r])},getActiveState:function(t){var e=this.activeIntervals;if(!e.length)return"normal";if(null==t||isNaN(t))return"inactive";if(1===e.length){var n=e[0];if(n[0]<=t&&t<=n[1])return"active"}else for(var r=0,i=e.length;r<i;r++)if(e[r][0]<=t&&t<=e[r][1])return"active";return"inactive"}});r(dO.prototype,uw),Zw("parallel",dO,function(t,e){return e.type||(e.data?"category":"value")},{type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10}),A_.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){A_.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(t){t&&r(this.option,t,!0),this._initDimensions()},contains:function(t,e){var n=t.get("parallelIndex");return null!=n&&e.getComponent("parallel",n)===this},setAxisExpand:function(t){f(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(e){t.hasOwnProperty(e)&&(this.option[e]=t[e])},this)},_initDimensions:function(){var t=this.dimensions=[],e=this.parallelAxisIndex=[];f(g(this.dependentModels.parallelAxis,function(t){return(t.get("parallelIndex")||0)===this.componentIndex},this),function(n){t.push("dim"+n.get("dim")),e.push(n.componentIndex)})}}),uo({type:"axisAreaSelect",event:"axisAreaSelected"},function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},function(e){e.axis.model.setActiveIntervals(t.intervals)})}),uo("parallelAxisExpand",function(t,e){e.eachComponent({mainType:"parallel",query:t},function(e){e.setAxisExpand(t)})});var pO=m,gO=f,vO=d,mO=Math.min,yO=Math.max,_O=Math.pow,bO=1e4,xO=6,wO=6,SO="globalPan",TO={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},OO={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},MO={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},kO=0;kc.prototype={constructor:kc,enableBrush:function(t){return this._brushType&&function(t){var e=t._zr;(function(t,e,n){var r=zu(t);r[e]===n&&(r[e]=null)})(e,SO,t._uid),gO(t._handlers,function(t,n){e.off(n,t)}),t._brushType=t._brushOption=null}(this),t.brushType&&function(t,e){var i=t._zr;t._enableGlobalPan||function(t,e,n){zu(i).globalPan=n}(0,0,t._uid),gO(t._handlers,function(t,e){i.on(e,t)}),t._brushType=e.brushType,t._brushOption=r(n(MO),e,!0)}(this,t),this},setPanels:function(t){if(t&&t.length){var e=this._panels={};f(t,function(t){e[t.panelId]=n(t)})}else this._panels=null;return this},mount:function(t){this._enableGlobalPan=(t=t||{}).enableGlobalPan;var e=this.group;return this._zr.add(e),e.attr({position:t.position||[0,0],rotation:t.rotation||0,scale:t.scale||[1,1]}),this._transform=e.getLocalTransform(),this},eachCover:function(t,e){gO(this._covers,t,e)},updateCovers:function(t){function e(t,e){return(null!=t.id?t.id:a+e)+"-"+t.brushType}function i(e,n){var r=t[e];if(null!=n&&o[n]===l)s[e]=o[n];else{var i=s[e]=null!=n?(o[n].__brushOption=r,o[n]):Ec(u,Cc(u,r));Pc(u,i)}}t=d(t,function(t){return r(n(MO),t,!0)});var a="\0-brush-index-",o=this._covers,s=this._covers=[],u=this,l=this._creatingCover;return new bo(o,t,function(t,n){return e(t.__brushOption,n)},e).add(i).update(i).remove(function(t){o[t]!==l&&u.group.remove(o[t])}).execute(),this},unmount:function(){return this.enableBrush(!1),Rc(this),this._zr.remove(this.group),this},dispose:function(){this.unmount(),this.off()}},c(kc,qg);var CO={mousedown:function(t){if(this._dragging)Jc.call(this,t);else if(!t.target||!t.target.draggable){$c(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null,(this._creatingPanel=Dc(this,t,e))&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);if(function(t,e,n){if(t._brushType){var r=t._zr,i=t._covers,a=Dc(t,e,n);if(!t._dragging)for(var o=0;o<i.length;o++){var s=i[o].__brushOption;if(a&&(!0===a||s.panelId===a.panelId)&&EO[s.brushType].contain(i[o],n[0],n[1]))return}a&&r.setCursorStyle("crosshair")}}(this,t,e),this._dragging){$c(t);var n=Qc(this,t,e,!1);n&&Nc(this,n)}},mouseup:Jc},EO={lineX:th(0),lineY:th(1),rect:{createCover:function(t,e){return Fc(pO(Wc,function(t){return t},function(t){return t}),t,e,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(t){var e=Bc(t);return Gc(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,n,r){Uc(t,e,n,r)},updateCommon:zc,contain:Zc},polygon:{createCover:function(t,e){var n=new kv;return n.add(new zy({name:"main",style:Hc(e),silent:!0})),n},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new Uy({name:"main",draggable:!0,drift:pO(qc,t,e),ondragend:pO(Nc,t,{isEnd:!0})}))},updateCoverShape:function(t,e,n,r){e.childAt(0).setShape({points:Xc(t,e,n)})},updateCommon:zc,contain:Zc}},AO=["axisLine","axisTickLabel","axisName"],IO=vo({type:"parallelAxis",init:function(t,e){IO.superApply(this,"init",arguments),(this._brushController=new kc(e.getZr())).on("brush",v(this._onBrush,this))},render:function(t,e,n,r){if(!function(t,e,n){return r&&"axisAreaSelect"===r.type&&e.findComponents({mainType:"parallelAxis",query:r})[0]===t}(t,e)){this.axisModel=t,this.api=n,this.group.removeAll();var i=this._axisGroup;if(this._axisGroup=new kv,this.group.add(this._axisGroup),t.get("show")){var o=function(t,e){return e.getComponent("parallel",t.get("parallelIndex"))}(t,e),s=o.coordinateSystem,u=t.getAreaSelectStyle(),l=u.width,c=a({strokeContainThreshold:l},s.getAxisLayout(t.axis.dim)),h=new nS(t,c);f(AO,h.add,h),this._axisGroup.add(h.getGroup()),this._refreshBrushController(c,u,t,o,l,n),Fr(i,this._axisGroup,r&&!1===r.animation?null:t)}}},_refreshBrushController:function(t,e,n,r,i,a){var o=n.axis.getExtent(),s=o[1]-o[0],u=Math.min(30,.1*Math.abs(s)),l=re.create({x:o[0],y:-i/2,width:s,height:i});l.x-=u,l.width+=2*u,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,position:t.position}).setPanels([{panelId:"pl",clipPath:eh(l),isTargetByCursor:rh(l,a,r),getLinearBrushOtherExtent:nh(l,0)}]).enableBrush({brushType:"lineX",brushStyle:e,removeOnClick:!0}).updateCovers(function(t){var e=n.axis;return d(n.activeIntervals,function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}})}())},_onBrush:function(t,e){var n=this.axisModel,r=n.axis,i=d(t,function(t){return[r.coordToData(t.range[0],!0),r.coordToData(t.range[1],!0)]});(!n.option.realtime===e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:i})},dispose:function(){this._brushController.dispose()}});vo({type:"parallel",render:function(t,e,n){this._model=t,this._api=n,this._handlers||(this._handlers={},f(PO,function(t,e){n.getZr().on(e,this._handlers[e]=v(t,this))},this)),ya(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},dispose:function(t,e){f(this._handlers,function(t,n){e.getZr().off(n,t)}),this._handlers=null},_throttledDispatchExpand:function(t){this._dispatchExpand(t)},_dispatchExpand:function(t){t&&this._api.dispatchAction(a({type:"parallelAxisExpand"},t))}});var PO={mousedown:function(t){ah(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var e=this._mouseDownPoint;if(ah(this,"click")&&e){var n=[t.offsetX,t.offsetY];if(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)>5)return;var r=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);"none"!==r.behavior&&this._dispatchExpand({axisExpandWindow:r.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!this._mouseDownPoint&&ah(this,"mousemove")){var e=this._model,n=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),r=n.behavior;"jump"===r&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===r?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===r&&null})}}};oo(function(t){(function(t){if(!t.parallel){var e=!1;f(t.series,function(t){t&&"parallel"===t.type&&(e=!0)}),e&&(t.parallel=[{}])}})(t),function(t){f(an(t.parallelAxis),function(e){if(x(e)){var n=e.parallelIndex||0,i=an(t.parallel)[n];i&&i.parallelAxisDefault&&r(e,i.parallelAxisDefault,!1)}})}(t)}),gb.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(t,e){var n=this.getSource();return function(t,e){if(!t.encodeDefine){var n=e.ecModel.getComponent("parallel",e.get("parallelIndex"));if(n){var r=t.encodeDefine=R();f(n.dimensions,function(t){var e=function(t){return+t.replace("dim","")}(t);r.set(t,e)})}}}(n,this),Fo(n,this)},getRawIndicesByActiveState:function(t){var e=this.coordinateSystem,n=this.getData(),r=[];return e.eachActiveState(n,function(e,i){t===e&&r.push(n.getRawIndex(i))}),r},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}});var LO=.3,DO=(fa.extend({type:"parallel",init:function(){this._dataGroup=new kv,this.group.add(this._dataGroup)},render:function(t,e,n,r){var i=this._dataGroup,a=t.getData(),o=this._data,s=t.coordinateSystem,u=s.dimensions,l=uh(t);if(a.diff(o).add(function(t){lh(sh(a,i,t,u,s),a,t,l)}).update(function(e,n){var i=o.getItemGraphicEl(n),c=oh(a,e,u,s);a.setItemGraphicEl(e,i),Dr(i,{shape:{points:c}},r&&!1===r.animation?null:t,e),lh(i,a,e,l)}).remove(function(t){var e=o.getItemGraphicEl(t);i.remove(e)}).execute(),!this._initialized){this._initialized=!0;var c=function(t,e,n){var r=s.model,i=s.getRect(),a=new Vy({shape:{x:i.x,y:i.y,width:i.width,height:i.height}}),o="horizontal"===r.get("layout")?"width":"height";return a.setShape(o,0),jr(a,{shape:{width:i.width,height:i.height}},e,n),a}(0,t,function(){setTimeout(function(){i.removeClipPath()})});i.setClipPath(c)}this._data=a},incrementalPrepareRender:function(t,e,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(t,e,n){for(var r=e.getData(),i=e.coordinateSystem,a=i.dimensions,o=uh(e),s=t.start;s<t.end;s++){var u=sh(r,this._dataGroup,s,a,i);u.incremental=!0,lh(u,r,s,o)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}}),["lineStyle","normal","opacity"]);ho({seriesType:"parallel",reset:function(t,e,n){var r=t.getModel("itemStyle"),i=t.getModel("lineStyle"),a=e.get("color"),o=i.get("color")||r.get("color")||a[t.seriesIndex%a.length],s=t.get("inactiveOpacity"),u=t.get("activeOpacity"),l=t.getModel("lineStyle").getLineStyle(),c=t.coordinateSystem,h=t.getData(),f={normal:l.opacity,active:u,inactive:s};return h.setVisual("color",o),{progress:function(t,e){c.eachActiveState(e,function(t,n){var r=f[t];if("normal"===t&&e.hasItemOption){var i=e.getItemModel(n).get(DO,!0);null!=i&&(r=i)}e.setItemVisual(n,"opacity",r)},t.start,t.end)}}}});var jO=gb.extend({type:"series.sankey",layoutInfo:null,getInitialData:function(t){var e=t.edges||t.links,n=t.data||t.nodes;if(n&&e)return jT(n,e,this,!0).data},setNodePosition:function(t,e){var n=this.option.data[t];n.localX=e[0],n.localY=e[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(t,e,n){if("edge"===n){var r=this.getDataParams(t,n),i=r.data,a=i.source+" -- "+i.target;return r.value&&(a+=" : "+r.value),ci(a)}return jO.superCall(this,"formatTooltip",t,e)},optionUpdated:function(){var t=this.option;!0===t.focusNodeAdjacency&&(t.focusNodeAdjacency="allEdges")},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.6}},animationEasing:"linear",animationDuration:1e3}}),RO=["itemStyle","opacity"],NO=["lineStyle","opacity"],BO=ir({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(t,e){var n=e.extent;"vertical"===e.orient?(t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),t.lineTo(e.x2+n,e.y2),t.bezierCurveTo(e.cpx2+n,e.cpy2,e.cpx1+n,e.cpy1,e.x1+n,e.y1)):(t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),t.lineTo(e.x2,e.y2+n),t.bezierCurveTo(e.cpx2,e.cpy2+n,e.cpx1,e.cpy1+n,e.x1,e.y1+n)),t.closePath()}});yo({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(t,e,n){var r=this,i=t.getGraph(),a=this.group,o=t.layoutInfo,s=o.width,u=o.height,l=t.getData(),c=t.getData("edge"),h=t.get("orient");this._model=t,a.removeAll(),a.attr("position",[o.x,o.y]),i.eachEdge(function(e){var n=new BO;n.dataIndex=e.dataIndex,n.seriesIndex=t.seriesIndex,n.dataType="edge";var r,i,o,l,f,d,p,g,v=e.getModel("lineStyle"),m=v.get("curveness"),y=e.node1.getLayout(),_=e.node1.getModel(),b=_.get("localX"),x=_.get("localY"),w=e.node2.getLayout(),S=e.node2.getModel(),T=S.get("localX"),O=S.get("localY"),M=e.getLayout();switch(n.shape.extent=Math.max(1,M.dy),n.shape.orient=h,"vertical"===h?(r=(null!=b?b*s:y.x)+M.sy,i=(null!=x?x*u:y.y)+y.dy,o=(null!=T?T*s:w.x)+M.ty,f=r,d=i*(1-m)+(l=null!=O?O*u:w.y)*m,p=o,g=i*m+l*(1-m)):(r=(null!=b?b*s:y.x)+y.dx,i=(null!=x?x*u:y.y)+M.sy,f=r*(1-m)+(o=null!=T?T*s:w.x)*m,d=i,p=r*m+o*(1-m),g=l=(null!=O?O*u:w.y)+M.ty),n.setShape({x1:r,y1:i,x2:o,y2:l,cpx1:f,cpy1:d,cpx2:p,cpy2:g}),n.setStyle(v.getItemStyle()),n.style.fill){case"source":n.style.fill=e.node1.getVisual("color");break;case"target":n.style.fill=e.node2.getVisual("color")}Sr(n,e.getModel("emphasis.lineStyle").getItemStyle()),a.add(n),c.setItemGraphicEl(e.dataIndex,n)}),i.eachNode(function(e){var n=e.getLayout(),r=e.getModel(),i=r.get("localX"),o=r.get("localY"),c=r.getModel("label"),h=r.getModel("emphasis.label"),f=new Vy({shape:{x:null!=i?i*s:n.x,y:null!=o?o*u:n.y,width:n.dx,height:n.dy},style:r.getModel("itemStyle").getItemStyle()}),d=e.getModel("emphasis.itemStyle").getItemStyle();Or(f.style,d,c,h,{labelFetcher:t,labelDataIndex:e.dataIndex,defaultText:e.id,isRectText:!0}),f.setStyle("fill",e.getVisual("color")),Sr(f,d),a.add(f),l.setItemGraphicEl(e.dataIndex,f),f.dataType="node"}),l.eachItemGraphicEl(function(e,i){var a=l.getItemModel(i);a.get("draggable")&&(e.drift=function(e,a){r._focusAdjacencyDisabled=!0,this.shape.x+=e,this.shape.y+=a,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:l.getRawIndex(i),localX:this.shape.x/s,localY:this.shape.y/u})},e.ondragend=function(){r._focusAdjacencyDisabled=!1},e.draggable=!0,e.cursor="move"),a.get("focusNodeAdjacency")&&(e.off("mouseover").on("mouseover",function(){r._focusAdjacencyDisabled||n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,dataIndex:e.dataIndex})}),e.off("mouseout").on("mouseout",function(){r._focusAdjacencyDisabled||n.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t.id})}))}),c.eachItemGraphicEl(function(e,i){c.getItemModel(i).get("focusNodeAdjacency")&&(e.off("mouseover").on("mouseover",function(){r._focusAdjacencyDisabled||n.dispatchAction({type:"focusNodeAdjacency",seriesId:t.id,edgeDataIndex:e.dataIndex})}),e.off("mouseout").on("mouseout",function(){r._focusAdjacencyDisabled||n.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t.id})}))}),!this._data&&t.get("animation")&&a.setClipPath(function(t,e,n){var r=new Vy({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return jr(r,{shape:{width:t.width+20,height:t.height+20}},e,function(){a.removeClipPath()}),r}(a.getBoundingRect(),t)),this._data=t.getData()},dispose:function(){},focusNodeAdjacency:function(t,e,n,r){var i=this._model.getData(),a=i.graph,o=r.dataIndex,s=i.getItemModel(o),u=r.edgeDataIndex;if(null!=o||null!=u){var l=a.getNodeByIndex(o),c=a.getEdgeByIndex(u);if(a.eachNode(function(t){fh(t,RO,.1)}),a.eachEdge(function(t){fh(t,NO,.1)}),l){dh(l,RO);var h=s.get("focusNodeAdjacency");"outEdges"===h?f(l.outEdges,function(t){t.dataIndex<0||(dh(t,NO),dh(t.node2,RO))}):"inEdges"===h?f(l.inEdges,function(t){t.dataIndex<0||(dh(t,NO),dh(t.node1,RO))}):"allEdges"===h&&f(l.edges,function(t){t.dataIndex<0||(dh(t,NO),dh(t.node1,RO),dh(t.node2,RO))})}c&&(dh(c,NO),dh(c.node1,RO),dh(c.node2,RO))}},unfocusNodeAdjacency:function(t,e,n,r){var i=this._model.getGraph();i.eachNode(function(t){fh(t,RO)}),i.eachEdge(function(t){fh(t,NO)})}}),uo({type:"dragNode",event:"dragNode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])})}),co(function(t,e,n){t.eachSeriesByType("sankey",function(t){var n=t.get("nodeWidth"),r=t.get("nodeGap"),i=function(t,e){return yi(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e);t.layoutInfo=i;var a=i.width,o=i.height,s=t.getGraph(),u=s.nodes,l=s.edges;f(u,function(t){var e=Sh(t.outEdges,wh),n=Sh(t.inEdges,wh),r=Math.max(e,n);t.setLayout({value:r},!0)}),function(t,e,n,r,i,a,o,s){(function(t,e,n,r,i,a){for(var o=[],s=[],u=[],l=[],c=0,h=0;h<e.length;h++)o[h]=1;for(h=0;h<t.length;h++)s[h]=t[h].inEdges.length,0===s[h]&&u.push(t[h]);for(;u.length;){for(var f=0;f<u.length;f++){var d=u[f];"vertical"===a?(d.setLayout({y:c},!0),d.setLayout({dy:n},!0)):(d.setLayout({x:c},!0),d.setLayout({dx:n},!0));for(var p=0;p<d.outEdges.length;p++){var g=d.outEdges[p];o[e.indexOf(g)]=0;var v=g.node2;0==--s[t.indexOf(v)]&&l.push(v)}}++c,u=l,l=[]}for(h=0;h<o.length;h++);gh(t,c,a),vh(t,"vertical"===a?(i-n)/(c-1):(r-n)/(c-1),a)})(t,e,n,i,a,s),function(t,e,n,r,i,a,o){var s=ph().key("vertical"===o?function(t){return t.getLayout().y}:function(t){return t.getLayout().x}).sortKeys(function(t,e){return t-e}).entries(t).map(function(t){return t.values});(function(t,e,n,r,i,a,o){var s=[];f(e,function(t){var e=t.length,n=0;f(t,function(t){n+=t.getLayout().value}),s.push("vertical"===o?(i-(e-1)*a)/n:(r-(e-1)*a)/n)}),s.sort(function(t,e){return t-e});var u=s[0];f(e,function(t){f(t,function(t,e){var n=t.getLayout().value*u;"vertical"===o?(t.setLayout({x:e},!0),t.setLayout({dx:n},!0)):(t.setLayout({y:e},!0),t.setLayout({dy:n},!0))})}),f(n,function(t){var e=+t.getValue()*u;t.setLayout({dy:e},!0)})})(0,s,e,n,r,i,o),mh(s,i,n,r,o);for(var u=1;a>0;a--)yh(s,u*=.99,o),mh(s,i,n,r,o),Th(s,u,o),mh(s,i,n,r,o)}(t,e,a,i,r,o,s),function(t,e){f(t,function(t){"vertical"===e?(t.outEdges.sort(function(t,e){return t.node2.getLayout().x-e.node2.getLayout().x}),t.inEdges.sort(function(t,e){return t.node1.getLayout().x-e.node1.getLayout().x})):(t.outEdges.sort(function(t,e){return t.node2.getLayout().y-e.node2.getLayout().y}),t.inEdges.sort(function(t,e){return t.node1.getLayout().y-e.node1.getLayout().y}))}),f(t,function(t){var e=0,n=0;f(t.outEdges,function(t){t.setLayout({sy:e},!0),e+=t.getLayout().dy}),f(t.inEdges,function(t){t.setLayout({ty:n},!0),n+=t.getLayout().dy})})}(t,s)}(u,l,n,r,a,o,0!==g(u,function(t){return 0===t.getLayout().value}).length?0:t.get("layoutIterations"),t.get("orient"))})}),ho(function(t,e){t.eachSeriesByType("sankey",function(t){var e=t.getGraph().nodes;if(e.length){var n=1/0,r=-1/0;f(e,function(t){var e=t.getLayout().value;e<n&&(n=e),e>r&&(r=e)}),f(e,function(e){var i=new yT({type:"color",mappingMethod:"linear",dataExtent:[n,r],visual:t.get("color")}).mapValueToVisual(e.getLayout().value);e.setVisual("color",i);var a=e.getModel().get("itemStyle.color");null!=a&&e.setVisual("color",a)})}})});var FO={_baseAxisDim:null,getInitialData:function(t,e){var n,r,i=e.getComponent("xAxis",this.get("xAxisIndex")),a=e.getComponent("yAxis",this.get("yAxisIndex")),o=i.get("type"),s=a.get("type");"category"===o?(t.layout="horizontal",n=i.getOrdinalMeta(),r=!0):"category"===s?(t.layout="vertical",n=a.getOrdinalMeta(),r=!0):t.layout=t.layout||"horizontal";var u=["x","y"],l="horizontal"===t.layout?0:1,c=this._baseAxisDim=u[l],h=u[1-l],d=[i,a],p=d[l].get("type"),g=d[1-l].get("type"),v=t.data;if(v&&r){var m=[];f(v,function(t,e){var n;t.value&&y(t.value)?(n=t.value.slice(),t.value.unshift(e)):y(t)?(n=t.slice(),t.unshift(e)):n=t,m.push(n)}),t.data=m}var _=this.defaultValueDimensions;return yS(this,{coordDimensions:[{name:c,type:wo(p),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:h,type:wo(g),dimsDef:_.slice()}],dimensionsCount:_.length+1})},getBaseAxis:function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis}};c(gb.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}}),FO,!0);var UO=["itemStyle"],zO=["emphasis","itemStyle"],VO=(fa.extend({type:"boxplot",render:function(t,e,n){var r=t.getData(),i=this.group,a=this._data;this._data||i.removeAll();var o="horizontal"===t.get("layout")?1:0;r.diff(a).add(function(t){if(r.hasValue(t)){var e=Oh(r.getItemLayout(t),r,t,o,!0);r.setItemGraphicEl(t,e),i.add(e)}}).update(function(t,e){var n=a.getItemGraphicEl(e);if(r.hasValue(t)){var s=r.getItemLayout(t);n?Mh(s,n,r,t):n=Oh(s,r,t,o),i.add(n),r.setItemGraphicEl(t,n)}else i.remove(n)}).remove(function(t){var e=a.getItemGraphicEl(t);e&&i.remove(e)}).execute(),this._data=r},remove:function(t){var e=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(t){t&&e.remove(t)})},dispose:B}),Zn.extend({type:"boxplotBoxPath",shape:{},buildPath:function(t,e){var n=e.points,r=0;for(t.moveTo(n[r][0],n[r][1]),r++;r<4;r++)t.lineTo(n[r][0],n[r][1]);for(t.closePath();r<n.length;r++)t.moveTo(n[r][0],n[r][1]),t.lineTo(n[++r][0],n[r][1])}})),HO=["itemStyle","borderColor"],GO=f;ho(function(t,e){var n=t.get("color");t.eachRawSeriesByType("boxplot",function(e){var r=n[e.seriesIndex%n.length],i=e.getData();i.setVisual({legendSymbol:"roundRect",color:e.get(HO)||r}),t.isSeriesFiltered(e)||i.each(function(t){var e=i.getItemModel(t);i.setItemVisual(t,{color:e.get(HO,!0)})})})}),co(function(t){var e=function(t){var e=[],n=[];return t.eachSeriesByType("boxplot",function(t){var r=t.getBaseAxis(),i=u(n,r);i<0&&(n[i=n.length]=r,e[i]={axis:r,seriesModels:[]}),e[i].seriesModels.push(t)}),e}(t);GO(e,function(t){var e=t.seriesModels;e.length&&(function(t){var e,n,r=t.axis,i=t.seriesModels,a=i.length,o=t.boxWidthList=[],s=t.boxOffsetList=[],u=[];if("category"===r.type)n=r.getBandWidth();else{var l=0;GO(i,function(t){l=Math.max(l,t.getData().count())}),e=r.getExtent(),Math.abs(e[1]-e[0])}GO(i,function(t){var e=t.get("boxWidth");y(e)||(e=[e,e]),u.push([Yr(e[0],n)||0,Yr(e[1],n)||0])});var c=.8*n-2,h=c/a*.3,f=(c-h*(a-1))/a,d=f/2-c/2;GO(i,function(t,e){s.push(d),d+=h+f,o.push(Math.min(Math.max(f,u[e][0]),u[e][1]))})}(t),GO(e,function(e,n){!function(t,e,n){function r(t,n,r){var i,a=s.get(n,r),u=[];return u[l]=t,u[c]=a,isNaN(t)||isNaN(a)?i=[NaN,NaN]:(i=o.dataToPoint(u))[l]+=e,i}function i(t,e,n){var r=e.slice(),i=e.slice();r[l]+=u,i[l]-=u,n?t.push(r,i):t.push(i,r)}function a(t,e){var n=e.slice(),r=e.slice();n[l]-=u,r[l]+=u,t.push(n,r)}var o=t.coordinateSystem,s=t.getData(),u=n/2,l="horizontal"===t.get("layout")?0:1,c=1-l,h=["x","y"],f=s.mapDimension(h[l]),d=s.mapDimension(h[c],!0);if(!(null==f||d.length<5))for(var p=0;p<s.count();p++){var g=s.get(f,p),v=r(g,d[2],p),m=r(g,d[0],p),y=r(g,d[1],p),_=r(g,d[3],p),b=r(g,d[4],p),x=[];i(x,y,0),i(x,_,1),x.push(m,y,b,_),a(x,m),a(x,b),a(x,v),s.setItemLayout(p,{initBaseline:v[c],ends:x})}}(e,t.boxOffsetList[n],t.boxWidthList[n])}))})}),c(gb.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(t,e,n){var r=e.getItemLayout(t);return r&&n.rect(r.brushRect)}}),FO,!0);var WO=["itemStyle"],qO=["emphasis","itemStyle"],YO=["color","color0","borderColor","borderColor0"],XO=(fa.extend({type:"candlestick",render:function(t,e,n){this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},incrementalPrepareRender:function(t,e,n){this._clear(),this._updateDrawMode(t)},incrementalRender:function(t,e,n,r){this._isLargeDraw?this._incrementalRenderLarge(t,e):this._incrementalRenderNormal(t,e)},_updateDrawMode:function(t){var e=t.pipelineContext.large;(null==this._isLargeDraw||e^this._isLargeDraw)&&(this._isLargeDraw=e,this._clear())},_renderNormal:function(t){var e=t.getData(),n=this._data,r=this.group,i=e.getLayout("isSimpleBox");this._data||r.removeAll(),e.diff(n).add(function(n){if(e.hasValue(n)){var a,o=e.getItemLayout(n);jr(a=kh(o,0,!0),{shape:{points:o.ends}},t,n),Ch(a,e,n,i),r.add(a),e.setItemGraphicEl(n,a)}}).update(function(a,o){var s=n.getItemGraphicEl(o);if(e.hasValue(a)){var u=e.getItemLayout(a);s?Dr(s,{shape:{points:u.ends}},t,a):s=kh(u),Ch(s,e,a,i),r.add(s),e.setItemGraphicEl(a,s)}else r.remove(s)}).remove(function(t){var e=n.getItemGraphicEl(t);e&&r.remove(e)}).execute(),this._data=e},_renderLarge:function(t){this._clear(),Eh(t,this.group)},_incrementalRenderNormal:function(t,e){for(var n,r=e.getData(),i=r.getLayout("isSimpleBox");null!=(n=t.next());){var a;Ch(a=kh(r.getItemLayout(n)),r,n,i),a.incremental=!0,this.group.add(a)}},_incrementalRenderLarge:function(t,e){Eh(e,this.group,!0)},remove:function(t){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:B}),Zn.extend({type:"normalCandlestickBox",shape:{},buildPath:function(t,e){var n=e.points;this.__simpleBox?(t.moveTo(n[4][0],n[4][1]),t.lineTo(n[6][0],n[6][1])):(t.moveTo(n[0][0],n[0][1]),t.lineTo(n[1][0],n[1][1]),t.lineTo(n[2][0],n[2][1]),t.lineTo(n[3][0],n[3][1]),t.closePath(),t.moveTo(n[4][0],n[4][1]),t.lineTo(n[5][0],n[5][1]),t.moveTo(n[6][0],n[6][1]),t.lineTo(n[7][0],n[7][1]))}})),$O=Zn.extend({type:"largeCandlestickBox",shape:{},buildPath:function(t,e){for(var n=e.points,r=0;r<n.length;)if(this.__sign===n[r++]){var i=n[r++];t.moveTo(i,n[r++]),t.lineTo(i,n[r++])}else r+=3}}),ZO=["itemStyle","borderColor"],QO=["itemStyle","borderColor0"],KO=["itemStyle","color"],JO=["itemStyle","color0"],tM={seriesType:"candlestick",plan:yb(),performRawSeries:!0,reset:function(t,e){function n(t,e){return e.get(t>0?KO:JO)}function r(t,e){return e.get(t>0?ZO:QO)}var i=t.getData(),a=t.pipelineContext.large;if(i.setVisual({legendSymbol:"roundRect",colorP:n(1,t),colorN:n(-1,t),borderColorP:r(1,t),borderColorN:r(-1,t)}),!e.isSeriesFiltered(t))return!a&&{progress:function(t,e){for(var i;null!=(i=t.next());){var a=e.getItemModel(i),o=e.getItemLayout(i).sign;e.setItemVisual(i,{color:n(o,a),borderColor:r(o,a)})}}}}},eM="undefined"!=typeof Float32Array?Float32Array:Array,nM={seriesType:"candlestick",plan:yb(),reset:function(t){var e=t.coordinateSystem,n=t.getData(),r=function(t,e){var n,r=t.getBaseAxis(),i="category"===r.type?r.getBandWidth():(n=r.getExtent(),Math.abs(n[1]-n[0])/e.count()),a=Yr(k(t.get("barMaxWidth"),i),i),o=Yr(k(t.get("barMinWidth"),1),i),s=t.get("barWidth");return null!=s?Yr(s,i):Math.max(Math.min(i/2,a),o)}(t,n),i=0,a=1,o=["x","y"],s=n.mapDimension(o[i]),u=n.mapDimension(o[a],!0),l=u[0],c=u[1],h=u[2],f=u[3];if(n.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),!(null==s||u.length<4))return{progress:t.pipelineContext.large?function(t,n){for(var r,o,u=new eM(5*t.count),d=0,p=[],g=[];null!=(o=t.next());){var v=n.get(s,o),m=n.get(l,o),y=n.get(c,o),_=n.get(h,o),b=n.get(f,o);isNaN(v)||isNaN(_)||isNaN(b)?(u[d++]=NaN,d+=4):(u[d++]=Ih(n,o,m,y,c),p[i]=v,p[a]=_,r=e.dataToPoint(p,null,g),u[d++]=r?r[0]:NaN,u[d++]=r?r[1]:NaN,p[a]=b,r=e.dataToPoint(p,null,g),u[d++]=r?r[1]:NaN)}n.setLayout("largePoints",u)}:function(t,n){function o(t,n){var r=[];return r[i]=n,r[a]=t,isNaN(n)||isNaN(t)?[NaN,NaN]:e.dataToPoint(r)}function u(t,e,n){var a=e.slice(),o=e.slice();a[i]=hr(a[i]+r/2,1,!1),o[i]=hr(o[i]-r/2,1,!0),n?t.push(a,o):t.push(o,a)}function d(t){return t[i]=hr(t[i],1),t}for(var p;null!=(p=t.next());){var g=n.get(s,p),v=n.get(l,p),m=n.get(c,p),y=n.get(h,p),_=n.get(f,p),b=Math.min(v,m),x=Math.max(v,m),w=o(b,g),S=o(x,g),T=o(y,g),O=o(_,g),M=[];u(M,S,0),u(M,w,1),M.push(d(O),d(S),d(T),d(w)),n.setItemLayout(p,{sign:Ih(n,p,v,m,c),initBaseline:v>m?S[a]:w[a],ends:M,brushRect:function(t,e,n){var s=o(y,n),u=o(e,n);return s[i]-=r/2,u[i]-=r/2,{x:s[0],y:s[1],width:a?r:u[0]-s[0],height:a?u[1]-s[1]:r}}(0,_,g)})}}}}};oo(function(t){t&&y(t.series)&&f(t.series,function(t){x(t)&&"k"===t.type&&(t.type="candlestick")})}),ho(tM),co(nM),gb.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(t,e){return Fo(this.getSource(),this)},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});var rM=Lh.prototype;rM.stopEffectAnimation=function(){this.childAt(1).removeAll()},rM.startEffectAnimation=function(t){for(var e=t.symbolType,n=t.color,r=this.childAt(1),i=0;i<3;i++){var a=hs(e,-1,-1,2,2,n);a.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]});var o=-i/3*t.period+t.effectOffset;a.animate("",!0).when(t.period,{scale:[t.rippleScale/2,t.rippleScale/2]}).delay(o).start(),a.animateStyle(!0).when(t.period,{opacity:0}).delay(o).start(),r.add(a)}Ph(r,t)},rM.updateEffectAnimation=function(t){for(var e=this._effectCfg,n=this.childAt(1),r=["symbolType","period","rippleScale"],i=0;i<r.length;i++){var a=r[i];if(e[a]!==t[a])return this.stopEffectAnimation(),void this.startEffectAnimation(t)}Ph(n,t)},rM.highlight=function(){this.trigger("emphasis")},rM.downplay=function(){this.trigger("normal")},rM.updateData=function(t,e){var n=t.hostModel;this.childAt(0).updateData(t,e);var r=this.childAt(1),i=t.getItemModel(e),a=t.getItemVisual(e,"symbol"),o=function(t){return y(t)||(t=[+t,+t]),t}(t.getItemVisual(e,"symbolSize")),s=t.getItemVisual(e,"color");r.attr("scale",o),r.traverse(function(t){t.attr({fill:s})});var u=i.getShallow("symbolOffset");if(u){var l=r.position;l[0]=Yr(u[0],o[0]),l[1]=Yr(u[1],o[1])}r.rotation=(i.getShallow("symbolRotate")||0)*Math.PI/180||0;var c={};if(c.showEffectOn=n.get("showEffectOn"),c.rippleScale=i.get("rippleEffect.scale"),c.brushType=i.get("rippleEffect.brushType"),c.period=1e3*i.get("rippleEffect.period"),c.effectOffset=e/t.count(),c.z=i.getShallow("z")||0,c.zlevel=i.getShallow("zlevel")||0,c.symbolType=a,c.color=s,this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===c.showEffectOn)this._effectCfg?this.updateEffectAnimation(c):this.startEffectAnimation(c),this._effectCfg=c;else{this._effectCfg=null,this.stopEffectAnimation();var h=this.childAt(0),f=function(){h.highlight(),"render"!==c.showEffectOn&&this.startEffectAnimation(c)},d=function(){h.downplay(),"render"!==c.showEffectOn&&this.stopEffectAnimation()};this.on("mouseover",f,this).on("mouseout",d,this).on("emphasis",f,this).on("normal",d,this)}this._effectCfg=c},rM.fadeOut=function(t){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),t&&t()},l(Lh,kv),yo({type:"effectScatter",init:function(){this._symbolDraw=new Ps(Lh)},render:function(t,e,n){var r=t.getData(),i=this._symbolDraw;i.updateData(r),this.group.add(i.group)},updateTransform:function(t,e,n){var r=t.getData();this.group.dirty();var i=Vw().reset(t);i.progress&&i.progress({start:0,end:r.count()},r),this._symbolDraw.updateLayout(r)},_updateGroupTransform:function(t){var e=t.coordinateSystem;e&&e.getRoamTransform&&(this.group.transform=wt(e.getRoamTransform()),this.group.decomposeTransform())},remove:function(t,e){this._symbolDraw&&this._symbolDraw.remove(e)},dispose:function(){}}),ho(zw("effectScatter","circle")),co(Vw("effectScatter"));var iM="undefined"==typeof Uint32Array?Array:Uint32Array,aM="undefined"==typeof Float64Array?Array:Float64Array,oM=gb.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(t){t.data=t.data||[],Dh(t);var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count)),oM.superApply(this,"init",arguments)},mergeOption:function(t){if(t.data=t.data||[],Dh(t),t.data){var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count))}oM.superApply(this,"mergeOption",arguments)},appendData:function(t){var e=this._processFlatCoordsArray(t.data);e.flatCoords&&(this._flatCoords?(this._flatCoords=N(this._flatCoords,e.flatCoords),this._flatCoordsOffset=N(this._flatCoordsOffset,e.flatCoordsOffset)):(this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset),t.data=new Float32Array(e.count)),this.getRawData().appendData(t.data)},_getCoordsFromItemModel:function(t){var e=this.getData().getItemModel(t);return e.option instanceof Array?e.option:e.getShallow("coords")},getLineCoordsCount:function(t){return this._flatCoordsOffset?this._flatCoordsOffset[2*t+1]:this._getCoordsFromItemModel(t).length},getLineCoords:function(t,e){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*t],r=this._flatCoordsOffset[2*t+1],i=0;i<r;i++)e[i]=e[i]||[],e[i][0]=this._flatCoords[n+2*i],e[i][1]=this._flatCoords[n+2*i+1];return r}var a=this._getCoordsFromItemModel(t);for(i=0;i<a.length;i++)e[i]=e[i]||[],e[i][0]=a[i][0],e[i][1]=a[i][1];return a.length},_processFlatCoordsArray:function(t){var e=0;if(this._flatCoords&&(e=this._flatCoords.length),"number"==typeof t[0]){for(var n=t.length,r=new iM(n),i=new aM(n),a=0,o=0,s=0,u=0;u<n;){s++;var l=t[u++];r[o++]=a+e,r[o++]=l;for(var c=0;c<l;c++){var h=t[u++],f=t[u++];i[a++]=h,i[a++]=f}}return{flatCoordsOffset:new Uint32Array(r.buffer,0,o),flatCoords:i,count:s}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},getInitialData:function(t,e){var n=new jx(["value"],this);return n.hasItemOption=!1,n.initData(t.data,[],function(t,e,r,i){if(t instanceof Array)return NaN;n.hasItemOption=!0;var a=t.value;return null!=a?a instanceof Array?a[i]:a:void 0}),n},formatTooltip:function(t){var e=this.getData().getItemModel(t),n=e.get("name");if(n)return n;var r=e.get("fromName"),i=e.get("toName"),a=[];return null!=r&&a.push(r),null!=i&&a.push(i),ci(a.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var t=this.option.progressive;return null==t?this.option.large?1e4:this.get("progressive"):t},getProgressiveThreshold:function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?2e4:this.get("progressiveThreshold"):t},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}}),sM=jh.prototype;sM.createLine=function(t,e,n){return new uc(t,e,n)},sM._updateEffectSymbol=function(t,e){var n=t.getItemModel(e).getModel("effect"),r=n.get("symbolSize"),i=n.get("symbol");y(r)||(r=[r,r]);var a=n.get("color")||t.getItemVisual(e,"color"),o=this.childAt(1);this._symbolType!==i&&(this.remove(o),(o=hs(i,-.5,-.5,1,1,a)).z2=100,o.culling=!0,this.add(o)),o&&(o.setStyle("shadowColor",a),o.setStyle(n.getItemStyle(["color"])),o.attr("scale",r),o.setColor(a),o.attr("scale",r),this._symbolType=i,this._updateEffectAnimation(t,n,e))},sM._updateEffectAnimation=function(t,e,n){var r=this.childAt(1);if(r){var i=this,a=t.getItemLayout(n),o=1e3*e.get("period"),s=e.get("loop"),u=e.get("constantSpeed"),l=M(e.get("delay"),function(e){return e/t.count()*o/3}),c="function"==typeof l;if(r.ignore=!0,this.updateAnimationPoints(r,a),u>0&&(o=this.getLineLength(r)/u*1e3),o!==this._period||s!==this._loop){r.stopAnimation();var h=l;c&&(h=l(n)),r.__t>0&&(h=-o*r.__t),r.__t=0;var f=r.animate("",s).when(o,{__t:1}).delay(h).during(function(){i.updateSymbolPosition(r)});s||f.done(function(){i.remove(r)}),f.start()}this._period=o,this._loop=s}},sM.getLineLength=function(t){return Vg(t.__p1,t.__cp1)+Vg(t.__cp1,t.__p2)},sM.updateAnimationPoints=function(t,e){t.__p1=e[0],t.__p2=e[1],t.__cp1=e[2]||[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]},sM.updateData=function(t,e,n){this.childAt(0).updateData(t,e,n),this._updateEffectSymbol(t,e)},sM.updateSymbolPosition=function(t){var e=t.__p1,n=t.__p2,r=t.__cp1,i=t.__t,a=t.position,o=An,s=In;a[0]=o(e[0],r[0],n[0],i),a[1]=o(e[1],r[1],n[1],i);var u=s(e[0],r[0],n[0],i),l=s(e[1],r[1],n[1],i);t.rotation=-Math.atan2(l,u)-Math.PI/2,t.ignore=!1},sM.updateLayout=function(t,e){this.childAt(0).updateLayout(t,e);var n=t.getItemModel(e).getModel("effect");this._updateEffectAnimation(t,n,e)},l(jh,kv);var uM=Rh.prototype;uM._createPolyline=function(t,e,n){var r=t.getItemLayout(e),i=new zy({shape:{points:r}});this.add(i),this._updateCommonStl(t,e,n)},uM.updateData=function(t,e,n){var r=t.hostModel;Dr(this.childAt(0),{shape:{points:t.getItemLayout(e)}},r,e),this._updateCommonStl(t,e,n)},uM._updateCommonStl=function(t,e,n){var r=this.childAt(0),i=t.getItemModel(e),a=t.getItemVisual(e,"color"),s=n&&n.lineStyle,u=n&&n.hoverLineStyle;n&&!t.hasItemOption||(s=i.getModel("lineStyle").getLineStyle(),u=i.getModel("emphasis.lineStyle").getLineStyle()),r.useStyle(o({strokeNoScale:!0,fill:"none",stroke:a},s)),r.hoverStyle=u,Sr(this)},uM.updateLayout=function(t,e){this.childAt(0).setShape("points",t.getItemLayout(e))},l(Rh,kv);var lM=Nh.prototype;lM.createLine=function(t,e,n){return new Rh(t,e,n)},lM.updateAnimationPoints=function(t,e){this._points=e;for(var n=[0],r=0,i=1;i<e.length;i++)r+=Vg(e[i-1],e[i]),n.push(r);if(0!==r){for(i=0;i<n.length;i++)n[i]/=r;this._offsets=n,this._length=r}},lM.getLineLength=function(t){return this._length},lM.updateSymbolPosition=function(t){var e=t.__t,n=this._points,r=this._offsets,i=n.length;if(r){var a=this._lastFrame;if(e<this._lastFramePercent){for(o=Math.min(a+1,i-1);o>=0&&!(r[o]<=e);o--);o=Math.min(o,i-2)}else{for(var o=a;o<i&&!(r[o]>e);o++);o=Math.min(o-1,i-2)}K(t.position,n[o],n[o+1],(e-r[o])/(r[o+1]-r[o])),t.rotation=-Math.atan2(n[o+1][1]-n[o][1],n[o+1][0]-n[o][0])-Math.PI/2,this._lastFrame=o,this._lastFramePercent=e,t.ignore=!1}},l(Nh,jh);var cM=ir({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(t,e){var n=e.segs,r=e.curveness;if(e.polyline)for(o=0;o<n.length;){var i=n[o++];if(i>0){t.moveTo(n[o++],n[o++]);for(var a=1;a<i;a++)t.lineTo(n[o++],n[o++])}}else for(var o=0;o<n.length;){var s=n[o++],u=n[o++],l=n[o++],c=n[o++];t.moveTo(s,u),r>0?t.quadraticCurveTo((s+l)/2-(u-c)*r,(u+c)/2-(l-s)*r,l,c):t.lineTo(l,c)}},findDataIndex:function(t,e){var n=this.shape,r=n.segs,i=n.curveness;if(n.polyline)for(var a=0,o=0;o<r.length;){var s=r[o++];if(s>0)for(var u=r[o++],l=r[o++],c=1;c<s;c++)if(Fn(u,l,h=r[o++],f=r[o++]))return a;a++}else for(a=0,o=0;o<r.length;){u=r[o++],l=r[o++];var h=r[o++],f=r[o++];if(i>0){if(zn(u,l,(u+h)/2-(l-f)*i,(l+f)/2-(h-u)*i,h,f))return a}else if(Fn(u,l,h,f))return a;a++}return-1}}),hM=Bh.prototype;hM.isPersistent=function(){return!this._incremental},hM.updateData=function(t){this.group.removeAll();var e=new cM({rectHover:!0,cursor:"default"});e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t),this.group.add(e),this._incremental=null},hM.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),t.count()>5e5?(this._incremental||(this._incremental=new rr({silent:!0})),this.group.add(this._incremental)):this._incremental=null},hM.incrementalUpdate=function(t,e){var n=new cM;n.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(n,e,!!this._incremental),this._incremental?this._incremental.addDisplayable(n,!0):(n.rectHover=!0,n.cursor="default",n.__startIndex=t.start,this.group.add(n))},hM.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},hM._setCommon=function(t,e,n){var r=e.hostModel;t.setShape({polyline:r.get("polyline"),curveness:r.get("lineStyle.curveness")}),t.useStyle(r.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var i=e.getVisual("color");i&&t.setStyle("stroke",i),t.setStyle("fill"),n||(t.seriesIndex=r.seriesIndex,t.on("mousemove",function(e){t.dataIndex=null;var n=t.findDataIndex(e.offsetX,e.offsetY);n>0&&(t.dataIndex=n+t.__startIndex)}))},hM._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()};var fM={seriesType:"lines",plan:yb(),reset:function(t){var e=t.coordinateSystem,n=t.get("polyline"),r=t.pipelineContext.large;return{progress:function(i,a){var o=[];if(r){var s,u=i.end-i.start;if(n){for(var l=0,c=i.start;c<i.end;c++)l+=t.getLineCoordsCount(c);s=new Float32Array(u+2*l)}else s=new Float32Array(4*u);var h=0,f=[];for(c=i.start;c<i.end;c++){g=t.getLineCoords(c,o),n&&(s[h++]=g);for(var d=0;d<g;d++)f=e.dataToPoint(o[d],!1,f),s[h++]=f[0],s[h++]=f[1]}a.setLayout("linesPoints",s)}else for(c=i.start;c<i.end;c++){var p=a.getItemModel(c),g=t.getLineCoords(c,o),v=[];if(n)for(var m=0;m<g;m++)v.push(e.dataToPoint(o[m]));else{v[0]=e.dataToPoint(o[0]),v[1]=e.dataToPoint(o[1]);var y=p.get("lineStyle.curveness");+y&&(v[2]=[(v[0][0]+v[1][0])/2-(v[0][1]-v[1][1])*y,(v[0][1]+v[1][1])/2-(v[1][0]-v[0][0])*y])}a.setItemLayout(c,v)}}}}};yo({type:"lines",init:function(){},render:function(t,e,n){var r=t.getData(),i=this._updateLineDraw(r,t),a=t.get("zlevel"),o=t.get("effect.trailLength"),s=n.getZr(),u="svg"===s.painter.getType();u||s.painter.getLayer(a).clear(!0),null==this._lastZlevel||u||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&o&&(u||s.configLayer(a,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(o/10+.9,1),0)})),i.updateData(r),this._lastZlevel=a,this._finished=!0},incrementalPrepareRender:function(t,e,n){var r=t.getData();this._updateLineDraw(r,t).incrementalPrepareUpdate(r),this._clearLayer(n),this._finished=!1},incrementalRender:function(t,e,n){this._lineDraw.incrementalUpdate(t,e.getData()),this._finished=t.end===e.getData().count()},updateTransform:function(t,e,n){var r=t.getData(),i=t.pipelineContext;if(!this._finished||i.large||i.progressiveRender)return{update:!0};var a=fM.reset(t);a.progress&&a.progress({start:0,end:r.count()},r),this._lineDraw.updateLayout(),this._clearLayer(n)},_updateLineDraw:function(t,e){var n=this._lineDraw,r=this._showEffect(e),i=!!e.get("polyline"),a=e.pipelineContext.large;return n&&r===this._hasEffet&&i===this._isPolyline&&a===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=a?new Bh:new lc(i?r?Nh:Rh:r?jh:uc),this._hasEffet=r,this._isPolyline=i,this._isLargeDraw=a,this.group.removeAll()),this.group.add(n.group),n},_showEffect:function(t){return!!t.get("effect.show")},_clearLayer:function(t){var e=t.getZr();"svg"===e.painter.getType()||null==this._lastZlevel||e.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(t,e){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(e)},dispose:function(){}});var dM="lineStyle.opacity".split("."),pM={seriesType:"lines",reset:function(t,e,n){var r=Fh(t.get("symbol")),i=Fh(t.get("symbolSize")),a=t.getData();return a.setVisual("fromSymbol",r&&r[0]),a.setVisual("toSymbol",r&&r[1]),a.setVisual("fromSymbolSize",i&&i[0]),a.setVisual("toSymbolSize",i&&i[1]),a.setVisual("opacity",t.get(dM)),{dataEach:a.hasItemOption?function(t,e){var n=t.getItemModel(e),r=Fh(n.getShallow("symbol",!0)),i=Fh(n.getShallow("symbolSize",!0)),a=n.get(dM);r[0]&&t.setItemVisual(e,"fromSymbol",r[0]),r[1]&&t.setItemVisual(e,"toSymbol",r[1]),i[0]&&t.setItemVisual(e,"fromSymbolSize",i[0]),i[1]&&t.setItemVisual(e,"toSymbolSize",i[1]),t.setItemVisual(e,"opacity",a)}:null}}};co(fM),ho(pM),gb.extend({type:"series.heatmap",getInitialData:function(t,e){return Fo(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var t=ji.get(this.get("coordinateSystem"));if(t&&t.dimensions)return"lng"===t.dimensions[0]&&"lat"===t.dimensions[1]},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}}),Uh.prototype={update:function(t,e,n,r,i,a){var o=this._getBrush(),s=this._getGradient(t,i,"inRange"),u=this._getGradient(t,i,"outOfRange"),l=this.pointSize+this.blurSize,c=this.canvas,h=c.getContext("2d"),f=t.length;c.width=e,c.height=n;for(var d=0;d<f;++d){var p=t[d],g=p[0],v=p[1],m=r(p[2]);h.globalAlpha=m,h.drawImage(o,g-l,v-l)}if(!c.width||!c.height)return c;for(var y=h.getImageData(0,0,c.width,c.height),_=y.data,b=0,x=_.length,w=this.minOpacity,S=this.maxOpacity-w;b<x;){m=_[b+3]/256;var T=4*Math.floor(255*m);if(m>0){var O=a(m)?s:u;m>0&&(m=m*S+w),_[b++]=O[T],_[b++]=O[T+1],_[b++]=O[T+2],_[b++]=O[T+3]*m*256}else b+=4}return h.putImageData(y,0,0),c},_getBrush:function(){var t=this._brushCanvas||(this._brushCanvas=Ng()),e=this.pointSize+this.blurSize,n=2*e;t.width=n,t.height=n;var r=t.getContext("2d");return r.clearRect(0,0,n,n),r.shadowOffsetX=n,r.shadowBlur=this.blurSize,r.shadowColor="#000",r.beginPath(),r.arc(-e,e,this.pointSize,0,2*Math.PI,!0),r.closePath(),r.fill(),t},_getGradient:function(t,e,n){for(var r=this._gradientPixels,i=r[n]||(r[n]=new Uint8ClampedArray(1024)),a=[0,0,0,0],o=0,s=0;s<256;s++)e[n](s/255,!0,a),i[o++]=a[0],i[o++]=a[1],i[o++]=a[2],i[o++]=a[3];return i}},yo({type:"heatmap",render:function(t,e,n){var r;e.eachComponent("visualMap",function(e){e.eachTargetSeries(function(n){n===t&&(r=e)})}),this.group.removeAll(),this._incrementalDisplayable=null;var i=t.coordinateSystem;"cartesian2d"===i.type||"calendar"===i.type?this._renderOnCartesianAndCalendar(t,n,0,t.getData().count()):function(t){var e=i.dimensions;return"lng"===e[0]&&"lat"===e[1]}()&&this._renderOnGeo(i,t,r,n)},incrementalPrepareRender:function(t,e,n){this.group.removeAll()},incrementalRender:function(t,e,n,r){e.coordinateSystem&&this._renderOnCartesianAndCalendar(e,r,t.start,t.end,!0)},_renderOnCartesianAndCalendar:function(t,e,n,r,i){var o,s,u=t.coordinateSystem;if("cartesian2d"===u.type){var l=u.getAxis("x"),c=u.getAxis("y");o=l.getBandWidth(),s=c.getBandWidth()}for(var h=this.group,f=t.getData(),d=t.getModel("itemStyle").getItemStyle(["color"]),p=t.getModel("emphasis.itemStyle").getItemStyle(),g=t.getModel("label"),v=t.getModel("emphasis.label"),m=u.type,y="cartesian2d"===m?[f.mapDimension("x"),f.mapDimension("y"),f.mapDimension("value")]:[f.mapDimension("time"),f.mapDimension("value")],_=n;_<r;_++){var b;if("cartesian2d"===m){if(isNaN(f.get(y[2],_)))continue;var x=u.dataToPoint([f.get(y[0],_),f.get(y[1],_)]);b=new Vy({shape:{x:x[0]-o/2,y:x[1]-s/2,width:o,height:s},style:{fill:f.getItemVisual(_,"color"),opacity:f.getItemVisual(_,"opacity")}})}else{if(isNaN(f.get(y[1],_)))continue;b=new Vy({z2:1,shape:u.dataToRect([f.get(y[0],_)]).contentShape,style:{fill:f.getItemVisual(_,"color"),opacity:f.getItemVisual(_,"opacity")}})}var w=f.getItemModel(_);f.hasItemOption&&(d=w.getModel("itemStyle").getItemStyle(["color"]),p=w.getModel("emphasis.itemStyle").getItemStyle(),g=w.getModel("label"),v=w.getModel("emphasis.label"));var S=t.getRawValue(_),T="-";S&&null!=S[2]&&(T=S[2]),Or(d,p,g,v,{labelFetcher:t,labelDataIndex:_,defaultText:T,isRectText:!0}),b.setStyle(d),Sr(b,f.hasItemOption?p:a({},p)),b.incremental=i,i&&(b.useHoverLayer=!0),h.add(b),f.setItemGraphicEl(_,b)}},_renderOnGeo:function(t,e,n,r){var i=n.targetVisuals.inRange,a=n.targetVisuals.outOfRange,o=e.getData(),s=this._hmLayer||this._hmLayer||new Uh;s.blurSize=e.get("blurSize"),s.pointSize=e.get("pointSize"),s.minOpacity=e.get("minOpacity"),s.maxOpacity=e.get("maxOpacity");var u=t.getViewRect().clone(),l=t.getRoamTransform();u.applyTransform(l);var c=Math.max(u.x,0),h=Math.max(u.y,0),f=Math.min(u.width+u.x,r.getWidth()),d=Math.min(u.height+u.y,r.getHeight()),p=f-c,g=d-h,v=[o.mapDimension("lng"),o.mapDimension("lat"),o.mapDimension("value")],m=o.mapArray(v,function(e,n,r){var i=t.dataToPoint([e,n]);return i[0]-=c,i[1]-=h,i.push(r),i}),y=n.getExtent(),_="visualMap.continuous"===n.type?function(t,e){var n=y[1]-y[0];return e=[(e[0]-y[0])/n,(e[1]-y[0])/n],function(t){return t>=e[0]&&t<=e[1]}}(0,n.option.range):zh(y,n.getPieceList(),n.option.selected);s.update(m,p,g,i.color.getNormalizer(),{inRange:i.color.getColorMapper(),outOfRange:a.color.getColorMapper()},_);var b=new Xe({style:{width:p,height:g,x:c,y:h,image:s.canvas},silent:!0});this.group.add(b)},dispose:function(){}});var gM=fS.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(t){return t.stack=null,gM.superApply(this,"getInitialData",arguments)}}),vM=["itemStyle","borderWidth"],mM=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],yM=new Ly;yo({type:"pictorialBar",render:function(t,e,n){var r=this.group,i=t.getData(),a=this._data,o=t.coordinateSystem,s=!!o.getBaseAxis().isHorizontal(),u=o.grid.getRect(),l={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:t,coordSys:o,coordSysExtent:[[u.x,u.x+u.width],[u.y,u.y+u.height]],isHorizontal:s,valueDim:mM[+s],categoryDim:mM[1-s]};return i.diff(a).add(function(t){if(i.hasValue(t)){var e=Zh(i,t),n=Vh(i,t,e,l),a=tf(i,l,n);i.setItemGraphicEl(t,a),r.add(a),of(a,l,n)}}).update(function(t,e){var n=a.getItemGraphicEl(e);if(i.hasValue(t)){var o=Zh(i,t),s=Vh(i,t,o,l),u=nf(i,s);n&&u!==n.__pictorialShapeStr&&(r.remove(n),i.setItemGraphicEl(t,null),n=null),n?function(t,e,n){var r=n.animationModel,i=n.dataIndex;Dr(t.__pictorialBundle,{position:n.bundlePosition.slice()},r,i),n.symbolRepeat?qh(t,e,n,!0):Yh(t,0,n,!0),Xh(t,n,!0),$h(t,e,n,!0)}(n,l,s):n=tf(i,l,s,!0),i.setItemGraphicEl(t,n),n.__pictorialSymbolMeta=s,r.add(n),of(n,l,s)}else r.remove(n)}).remove(function(t){var e=a.getItemGraphicEl(t);e&&ef(a,t,e.__pictorialSymbolMeta.animationModel,e)}).execute(),this._data=i,this.group},dispose:B,remove:function(t,e){var n=this.group,r=this._data;t.get("animation")?r&&r.eachItemGraphicEl(function(e){ef(r,e.dataIndex,t,e)}):n.removeAll()}}),co(m(Jo,"pictorialBar")),ho(zw("pictorialBar","roundRect"));var _M=function(t,e,n,r,i){xw.call(this,t,e,n),this.type=r||"value",this.position=i||"bottom",this.orient=null};_M.prototype={constructor:_M,model:null,isHorizontal:function(){var t=this.position;return"top"===t||"bottom"===t},pointToData:function(t,e){return this.coordinateSystem.pointToData(t,e)[0]},toGlobalCoord:null,toLocalCoord:null},l(_M,xw),ji.register("single",{create:function(t,e){var n=[];return t.eachComponent("singleAxis",function(r,i){var a=new uf(r,t,e);a.name="single_"+i,a.resize(r,e),r.coordinateSystem=a,n.push(a)}),t.eachSeries(function(e){if("singleAxis"===e.get("coordinateSystem")){var n=t.queryComponents({mainType:"singleAxis",index:e.get("singleAxisIndex"),id:e.get("singleAxisId")})[0];e.coordinateSystem=n&&n.coordinateSystem}}),n},dimensions:(uf.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:uf,_init:function(t,e,n){var r=new _M(this.dimension,os(t),[0,0],t.get("type"),t.get("position"));r.onBand="category"===r.type&&t.get("boundaryGap"),r.inverse=t.get("inverse"),r.orient=t.get("orient"),t.axis=r,r.model=t,r.coordinateSystem=this,this._axis=r},update:function(t,e){t.eachSeries(function(t){if(t.coordinateSystem===this){var e=t.getData();f(e.mapDimension(this.dimension,!0),function(t){this._axis.scale.unionExtentFromData(e,t)},this),as(this._axis.scale,this._axis.model)}},this)},resize:function(t,e){this._rect=yi({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var t=this._rect,e=this._axis,n=e.isHorizontal(),r=n?[0,t.width]:[0,t.height],i=e.reverse?1:0;e.setExtent(r[i],r[1-i]),this._updateAxisTransform(e,n?t.x:t.y)},_updateAxisTransform:function(t,e){var n=t.getExtent(),r=n[0]+n[1],i=t.isHorizontal();t.toGlobalCoord=i?function(t){return t+e}:function(t){return r-t+e},t.toLocalCoord=i?function(t){return t-e}:function(t){return r-t+e}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(t){var e=this.getRect(),n=this.getAxis();return"horizontal"===n.orient?n.contain(n.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:n.contain(n.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},pointToData:function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t["horizontal"===e.orient?0:1]))]},dataToPoint:function(t){var e=this.getAxis(),n=this.getRect(),r=[],i="horizontal"===e.orient?0:1;return t instanceof Array&&(t=t[0]),r[i]=e.toGlobalCoord(e.dataToCoord(+t)),r[1-i]=0===i?n.y+n.height/2:n.x+n.width/2,r}}).dimensions});var bM=["axisLine","axisTickLabel","axisName"],xM=sS.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(t,e,n,r){var i=this.group;i.removeAll();var a=lf(t),o=new nS(t,a);f(bM,o.add,o),i.add(o.getGroup()),t.get("splitLine.show")&&this._splitLine(t),xM.superCall(this,"render",t,e,n,r)},_splitLine:function(t){var e=t.axis;if(!e.scale.isBlank()){var n=t.getModel("splitLine"),r=n.getModel("lineStyle"),i=r.get("width"),a=r.get("color");a=a instanceof Array?a:[a];for(var o=t.coordinateSystem.getRect(),s=e.isHorizontal(),u=[],l=0,c=e.getTicksCoords({tickModel:n}),h=[],f=[],d=0;d<c.length;++d){var p=e.toGlobalCoord(c[d].coord);s?(h[0]=p,h[1]=o.y,f[0]=p,f[1]=o.y+o.height):(h[0]=o.x,h[1]=p,f[0]=o.x+o.width,f[1]=p);var g=l++%a.length;u[g]=u[g]||[],u[g].push(new Hy(lr({shape:{x1:h[0],y1:h[1],x2:f[0],y2:f[1]},style:{lineWidth:i},silent:!0})))}for(d=0;d<u.length;++d)this.group.add(n_(u[d],{style:{stroke:a[d%a.length],lineDash:r.getLineDash(i),lineWidth:i},silent:!0}))}}}),wM=A_.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});r(wM.prototype,uw),Zw("single",wM,function(t,e){return e.type||(e.data?"category":"value")},{left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:2,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:2}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}});var SM=function(t,e){var n,r=[],i=t.seriesIndex;if(null==i||!(n=e.getSeriesByIndex(i)))return{point:[]};var a=n.getData(),o=fn(a,t);if(null==o||o<0||y(o))return{point:[]};var s=a.getItemGraphicEl(o),u=n.coordinateSystem;if(n.getTooltipPosition)r=n.getTooltipPosition(o)||[];else if(u&&u.dataToPoint)r=u.dataToPoint(a.getValues(d(u.dimensions,function(t){return a.mapDimension(t)}),o,!0))||[];else if(s){var l=s.getBoundingRect().clone();l.applyTransform(s.transform),r=[l.x+l.width/2,l.y+l.height/2]}return{point:r,el:s}},TM=f,OM=m,MM=dn(),kM=(go({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}}),dn()),CM=f,EM=vo({type:"axisPointer",render:function(t,e,n){var r=e.getComponent("tooltip"),i=t.get("triggerOn")||r&&r.get("triggerOn")||"mousemove|click";vf("axisPointer",n,function(t,e,n){"none"!==i&&("leave"===t||i.indexOf(t)>=0)&&n({type:"updateAxisPointer",currTrigger:t,x:e&&e.offsetX,y:e&&e.offsetY})})},remove:function(t,e){_f(e.getZr(),"axisPointer"),EM.superApply(this._model,"remove",arguments)},dispose:function(t,e){_f("axisPointer",e),EM.superApply(this._model,"dispose",arguments)}}),AM=dn(),IM=n,PM=v;(bf.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(t,e,n,r){var i=e.get("value"),a=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=n,r||this._lastValue!==i||this._lastStatus!==a){this._lastValue=i,this._lastStatus=a;var o=this._group,s=this._handle;if(!a||"hide"===a)return o&&o.hide(),void(s&&s.hide());o&&o.show(),s&&s.show();var u={};this.makeElOption(u,i,t,e,n);var l=u.graphicKey;l!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=l;var c=this._moveAnimation=this.determineAnimation(t,e);if(o){var h=m(xf,e,c);this.updatePointerEl(o,u,h,e),this.updateLabelEl(o,u,h,e)}else o=this._group=new kv,this.createPointerEl(o,u,t,e),this.createLabelEl(o,u,t,e),n.getZr().add(o);Tf(o,e,!0),this._renderHandle(i)}},remove:function(t){this.clear(t)},dispose:function(t){this.clear(t)},determineAnimation:function(t,e){var n=e.get("animation"),r=t.axis,i="category"===r.type,a=e.get("snap");if(!a&&!i)return!1;if("auto"===n||null==n){var o=this.animationThreshold;if(i&&r.getBandWidth()>o)return!0;if(a){var s=cu(t).seriesDataCount,u=r.getExtent();return Math.abs(u[0]-u[1])/s>o}return!1}return!0===n},makeElOption:function(t,e,n,r,i){},createPointerEl:function(t,e,n,r){var i=e.pointer;if(i){var a=AM(t).pointerEl=new a_[i.type](IM(e.pointer));t.add(a)}},createLabelEl:function(t,e,n,r){if(e.label){var i=AM(t).labelEl=new Vy(IM(e.label));t.add(i),wf(i,r)}},updatePointerEl:function(t,e,n){var r=AM(t).pointerEl;r&&(r.setStyle(e.pointer.style),n(r,{shape:e.pointer.shape}))},updateLabelEl:function(t,e,n,r){var i=AM(t).labelEl;i&&(i.setStyle(e.label.style),n(i,{shape:e.label.shape,position:e.label.position}),wf(i,r))},_renderHandle:function(t){if(!this._dragging&&this.updateHandleTransform){var e,n=this._axisPointerModel,r=this._api.getZr(),i=this._handle,a=n.getModel("handle"),o=n.get("status");if(!a.get("show")||!o||"hide"===o)return i&&r.remove(i),void(this._handle=null);this._handle||(e=!0,i=this._handle=zr(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(t){$g(t.event)},onmousedown:PM(this._onHandleDragMove,this,0,0),drift:PM(this._onHandleDragMove,this),ondragend:PM(this._onHandleDragEnd,this)}),r.add(i)),Tf(i,n,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=a.get("size");y(s)||(s=[s,s]),i.attr("scale",[s[0]/2,s[1]/2]),ya(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,e)}},_moveHandleToValue:function(t,e){xf(this._axisPointerModel,!e&&this._moveAnimation,this._handle,Sf(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(t,e){var n=this._handle;if(n){this._dragging=!0;var r=this.updateHandleTransform(Sf(n),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=r,n.stopAnimation(),n.attr(Sf(r)),AM(n).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){if(this._handle){var t=this._payloadInfo,e=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:e.axis.dim,axisIndex:e.componentIndex}]})}},_onHandleDragEnd:function(t){if(this._dragging=!1,this._handle){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),n=this._group,r=this._handle;e&&n&&(this._lastGraphicKey=null,n&&e.remove(n),r&&e.remove(r),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(t,e,n){return{x:t[n=n||0],y:t[1-n],width:e[n],height:e[1-n]}}}).constructor=bf,_n(bf);var LM=bf.extend({makeElOption:function(t,e,n,r,i){var a=n.axis,o=a.grid,s=r.get("type"),u=Lf(o,a).getOtherAxis(a).getGlobalExtent(),l=a.toGlobalCoord(a.dataToCoord(e,!0));if(s&&"none"!==s){var c=Of(r),h=DM[s](a,l,u,c);h.style=c,t.graphicKey=h.type,t.pointer=h}Ef(e,t,gu(o.model,n),n,r,i)},getHandleTransform:function(t,e,n){var r=gu(e.axis.grid.model,e,{labelInside:!1});return r.labelMargin=n.get("handle.margin"),{position:Cf(e.axis,t,r),rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,n,r){var i=n.axis,a=i.grid,o=i.getGlobalExtent(!0),s=Lf(a,i).getOtherAxis(i).getGlobalExtent(),u="x"===i.dim?0:1,l=t.position;l[u]+=e[u],l[u]=Math.min(o[1],l[u]),l[u]=Math.max(o[0],l[u]);var c=(s[1]+s[0])/2,h=[c,c];return h[u]=l[u],{position:l,rotation:t.rotation,cursorPoint:h,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][u]}}}),DM={line:function(t,e,n,r){var i=Af([e,n[0]],[e,n[1]],Df(t));return lr({shape:i,style:r}),{type:"Line",shape:i}},shadow:function(t,e,n,r){var i=Math.max(1,t.getBandWidth());return{type:"Rect",shape:If([e-i/2,n[0]],[i,n[1]-n[0]],Df(t))}}};sS.registerAxisPointerClass("CartesianAxisPointer",LM),oo(function(t){if(t){(!t.axisPointer||0===t.axisPointer.length)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!y(e)&&(t.axisPointer.link=[e])}}),so(ax.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=function(t,e){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(t,e,n){var r=e.getComponent("tooltip"),i=e.getComponent("axisPointer"),a=i.get("link",!0)||[],o=[];aS(n.getCoordinateSystems(),function(n){function s(r,s,u){var h=u.model.getModel("axisPointer",i),f=h.get("show");if(f&&("auto"!==f||r||hu(h))){null==s&&(s=h.get("triggerTooltip"));var d=(h=r?uu(u,c,i,e,r,s):h).get("snap"),p=fu(u.model),g=s||d||"category"===u.type,v=t.axesInfo[p]={key:p,axis:u,coordSys:n,axisPointerModel:h,triggerTooltip:s,involveSeries:g,snap:d,useHandle:hu(h),seriesModels:[]};l[p]=v,t.seriesInvolved|=g;var m=function(t,e){for(var n=u.model,r=u.dim,i=0;i<t.length;i++){var a=t[i]||{};if(lu(a[r+"AxisId"],n.id)||lu(a[r+"AxisIndex"],n.componentIndex)||lu(a[r+"AxisName"],n.name))return i}}(a);if(null!=m){var y=o[m]||(o[m]={axesInfo:{}});y.axesInfo[p]=v,y.mapper=a[m].mapper,v.linkGroup=y}}}if(n.axisPointerEnabled){var u=fu(n.model),l=t.coordSysAxesInfo[u]={};t.coordSysMap[u]=n;var c=n.model.getModel("tooltip",r);if(aS(n.getAxes(),oS(s,!1,null)),n.getTooltipAxes&&r&&c.get("show")){var h="axis"===c.get("trigger"),f="cross"===c.get("axisPointer.type"),d=n.getTooltipAxes(c.get("axisPointer.axis"));(h||f)&&aS(d.baseAxes,oS(s,!f||"cross",h)),f&&aS(d.otherAxes,oS(s,"cross",!1))}}})}(n,t,e),n.seriesInvolved&&function(t,e){e.eachSeries(function(e){var n=e.coordinateSystem,r=e.get("tooltip.trigger",!0),i=e.get("tooltip.show",!0);n&&"none"!==r&&!1!==r&&"item"!==r&&!1!==i&&!1!==e.get("axisPointer.show",!0)&&aS(t.coordSysAxesInfo[fu(n.model)],function(t){var r=t.axis;n.getAxis(r.dim)===r&&(t.seriesModels.push(e),null==t.seriesDataCount&&(t.seriesDataCount=0),t.seriesDataCount+=e.getData().count())})},this)}(n,t),n}(t,e)}),uo({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},function(t,e,n){var r=t.currTrigger,i=[t.x,t.y],a=t,o=t.dispatchAction||v(n.dispatchAction,n),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){gf(i)&&(i=SM({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},e).point);var u=gf(i),l=a.axesInfo,c=s.axesInfo,h="leave"===r||gf(i),f={},d={},p={list:[],map:{}},g={showPointer:OM(hf,d),showTooltip:OM(ff,p)};TM(s.coordSysMap,function(t,e){var n=u||t.containPoint(i);TM(s.coordSysAxesInfo[e],function(t,e){var r=t.axis,a=function(t,e){for(var n=0;n<(t||[]).length;n++){var r=t[n];if(e.axis.dim===r.axisDim&&e.axis.model.componentIndex===r.axisIndex)return r}}(l,t);if(!h&&n&&(!l||a)){var o=a&&a.value;null!=o||u||(o=r.pointToData(i)),null!=o&&cf(t,o,g,!1,f)}})});var m={};return TM(c,function(t,e){var n=t.linkGroup;n&&!d[e]&&TM(n.axesInfo,function(e,r){var i=d[r];if(e!==t&&i){var a=i.value;n.mapper&&(a=t.axis.scale.parse(n.mapper(a,pf(e),pf(t)))),m[t.key]=a}})}),TM(m,function(t,e){cf(c[e],t,g,!0,f)}),function(t,e,n){var r=f.axesInfo=[];TM(e,function(e,n){var i=e.axisPointerModel.option,a=t[n];a?(!e.useHandle&&(i.status="show"),i.value=a.value,i.seriesDataIndices=(a.payloadBatch||[]).slice()):!e.useHandle&&(i.status="hide"),"show"===i.status&&r.push({axisDim:e.axis.dim,axisIndex:e.axis.model.componentIndex,value:i.value})})}(d,c),function(t,e,n,r){if(!gf(e)&&t.list.length){var i=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};r({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:t.list})}else r({type:"hideTip"})}(p,i,t,o),df(c,0,n),f}});var jM=["x","y"],RM=["width","height"],NM=bf.extend({makeElOption:function(t,e,n,r,i){var a=n.axis,o=a.coordinateSystem,s=Rf(o,1-jf(a)),u=o.dataToPoint(e)[0],l=r.get("type");if(l&&"none"!==l){var c=Of(r),h=BM[l](a,u,s,c);h.style=c,t.graphicKey=h.type,t.pointer=h}Ef(e,t,lf(n),n,r,i)},getHandleTransform:function(t,e,n){var r=lf(e,{labelInside:!1});return r.labelMargin=n.get("handle.margin"),{position:Cf(e.axis,t,r),rotation:r.rotation+(r.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(t,e,n,r){var i=n.axis,a=i.coordinateSystem,o=jf(i),s=Rf(a,o),u=t.position;u[o]+=e[o],u[o]=Math.min(s[1],u[o]),u[o]=Math.max(s[0],u[o]);var l=Rf(a,1-o),c=(l[1]+l[0])/2,h=[c,c];return h[o]=u[o],{position:u,rotation:t.rotation,cursorPoint:h,tooltipOption:{verticalAlign:"middle"}}}}),BM={line:function(t,e,n,r){var i=Af([e,n[0]],[e,n[1]],jf(t));return lr({shape:i,style:r}),{type:"Line",shape:i}},shadow:function(t,e,n,r){var i=t.getBandWidth();return{type:"Rect",shape:If([e-i/2,n[0]],[i,n[1]-n[0]],jf(t))}}};sS.registerAxisPointerClass("SingleAxisPointer",NM),vo({type:"single"});var FM=gb.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(t){FM.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()}},fixData:function(t){for(var e=t.length,n=d(ph().key(function(t){return t[2]}).entries(t),function(t){return{name:t.key,dataList:t.values}}),r=n.length,i=-1,a=-1,o=0;o<r;++o){var s=n[o].dataList.length;s>i&&(i=s,a=o)}for(var u=0;u<r;++u)if(u!==a)for(var l=n[u].name,c=0;c<i;++c){for(var h=n[a].dataList[c][0],f=n[u].dataList.length,p=-1,g=0;g<f;++g)if(n[u].dataList[g][0]===h){p=g;break}-1===p&&(t[e]=[],t[e][0]=h,t[e][1]=0,t[e][2]=l,e++)}return t},getInitialData:function(t,e){for(var n=e.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),r=g(t.data,function(t){return void 0!==t[2]}),i=this.fixData(r||[]),a=[],o=this.nameMap=R(),s=0,u=0;u<i.length;++u)a.push(i[u][2]),o.get(i[u][2])||(o.set(i[u][2],s),s++);var l=Bx(i,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:wo(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),c=new jx(l,this);return c.initData(i),c},getLayerSeries:function(){for(var t=this.getData(),e=t.count(),n=[],r=0;r<e;++r)n[r]=r;for(var i=d(ph().key(function(e){return t.get("name",e)}).entries(n),function(t){return{name:t.key,indices:t.values}}),a=t.mapDimension("single"),o=0;o<i.length;++o)i[o].indices.sort(function(e,n){return t.get(a,e)-t.get(a,n)});return i},getAxisTooltipData:function(t,e,n){y(t)||(t=t?[t]:[]);for(var r,i=this.getData(),a=this.getLayerSeries(),o=[],s=a.length,u=0;u<s;++u){for(var l=Number.MAX_VALUE,c=-1,h=a[u].indices.length,f=0;f<h;++f){var d=i.get(t[0],a[u].indices[f]),p=Math.abs(d-e);p<=l&&(r=d,l=p,c=a[u].indices[f])}o.push(c)}return{dataIndices:o,nestestValue:r}},formatTooltip:function(t){var e=this.getData(),n=e.getName(t),r=e.get(e.mapDimension("value"),t);return(isNaN(r)||null==r)&&(r="-"),ci(n+" : "+r)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}});yo({type:"themeRiver",init:function(){this._layers=[]},render:function(t,e,n){function r(t){return t.name}function i(e,n,r){var i=this._layers;if("remove"!==e){for(var l,h=[],f=[],d=u[n].indices,p=0;p<d.length;p++){var g=o.getItemLayout(d[p]),v=g.x,m=g.y0,y=g.y;h.push([v,m]),f.push([v,m+y]),l=o.getItemVisual(d[p],"color")}var _,b,x=o.getItemLayout(d[0]),w=o.getItemModel(d[p-1]),S=w.getModel("label"),T=S.get("margin");if("add"===e)O=c[n]=new kv,_=new Uw({shape:{points:h,stackedOnPoints:f,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),b=new Py({style:{x:x.x-T,y:x.y0+x.y/2}}),O.add(_),O.add(b),s.add(O),_.setClipPath(function(t,e,n){var r=new Vy({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return jr(r,{shape:{width:t.width+20,height:t.height+20}},e,function(){_.removeClipPath()}),r}(_.getBoundingRect(),t));else{var O=i[r];_=O.childAt(0),b=O.childAt(1),s.add(O),c[n]=O,Dr(_,{shape:{points:h,stackedOnPoints:f}},t),Dr(b,{style:{x:x.x-T,y:x.y0+x.y/2}},t)}var M=w.getModel("emphasis.itemStyle"),k=w.getModel("itemStyle");Mr(b.style,S,{text:S.get("show")?t.getFormattedLabel(d[p-1],"normal")||o.getName(d[p-1]):null,textVerticalAlign:"middle"}),_.setStyle(a({fill:l},k.getItemStyle(["color"]))),Sr(_,M.getItemStyle())}else s.remove(i[n])}var o=t.getData(),s=this.group,u=t.getLayerSeries(),l=o.getLayout("layoutInfo");s.attr("position",[0,l.rect.y+l.boundaryGap[0]]);var c={};new bo(this._layersSeries||[],u,r,r).add(v(i,this,"add")).update(v(i,this,"update")).remove(v(i,this,"remove")).execute(),this._layersSeries=u,this._layers=c},dispose:function(){}}),co(function(t,e){t.eachSeriesByType("themeRiver",function(t){var e=t.getData(),n=t.coordinateSystem,r={},i=n.getRect();r.rect=i;var a=t.get("boundaryGap"),o=n.getAxis();r.boundaryGap=a,"horizontal"===o.orient?(a[0]=Yr(a[0],i.height),a[1]=Yr(a[1],i.height),Nf(e,t,i.height-a[0]-a[1])):(a[0]=Yr(a[0],i.width),a[1]=Yr(a[1],i.width),Nf(e,t,i.width-a[0]-a[1])),e.setLayout("layoutInfo",r)})}),ho(function(t){t.eachSeriesByType("themeRiver",function(t){var e=t.getData(),n=t.getRawData(),r=t.get("color"),i=R();e.each(function(t){i.set(e.getRawIndex(t),t)}),n.each(function(a){var o=n.getName(a),s=r[(t.nameMap.get(o)-1)%r.length];n.setItemVisual(a,"color",s);var u=i.get(a);null!=u&&e.setItemVisual(u,"color",s)})})}),so(MS("themeRiver")),gb.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(t,e){var n={name:t.name,children:t.data};!function t(e){var n=0;f(e.children,function(e){t(e);var r=e.value;y(r)&&(r=r[0]),n+=r});var r=e.value;y(r)&&(r=r[0]),(null==r||isNaN(r))&&(r=n),r<0&&(r=0),y(e.value)?e.value[0]=r:e.value=r}(n);var r={};return r.levels=t.levels||[],fl.createTree(n,this,r).data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(t){var e=gb.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(t);return e.treePathInfo=Il(n,this),e},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0,emphasis:{}},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1,emphasis:{},highlight:{opacity:1},downplay:{opacity:.9}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)}});var UM=2,zM=4,VM=Bf.prototype;VM.updateData=function(t,e,n,i,s){this.node=e,e.piece=this,i=i||this._seriesModel,s=s||this._ecModel;var u=this.childAt(0);u.dataIndex=e.dataIndex;var l=e.getModel(),c=e.getLayout();c||console.log(e.getLayout());var h=a({},c);h.label=null;var f,d=Ff(e,0,s),p=l.getModel("itemStyle").getItemStyle();f=o({lineJoin:"bevel",fill:(f="normal"===n?p:r(l.getModel(n+".itemStyle").getItemStyle(),p)).fill||d},f),t?(u.setShape(h),u.shape.r=c.r0,Dr(u,{shape:{r:c.r}},i,e.dataIndex),u.useStyle(f)):"object"==typeof f.fill&&f.fill.type||"object"==typeof u.style.fill&&u.style.fill.type?(Dr(u,{shape:h},i),u.useStyle(f)):Dr(u,{shape:h,style:f},i),this._updateLabel(i,d,n);var g=l.getShallow("cursor");if(g&&u.attr("cursor",g),t){var v=i.getShallow("highlightPolicy");this._initEvents(u,e,i,v)}this._seriesModel=i||this._seriesModel,this._ecModel=s||this._ecModel},VM.onEmphasis=function(t){var e=this;this.node.hostTree.root.eachNode(function(n){n.piece&&(e.node===n?n.piece.updateData(!1,n,"emphasis"):function(t,e,n){return"none"!==n&&("self"===n?t===e:"ancestor"===n?t===e||t.isAncestorOf(e):t===e||t.isDescendantOf(e))}(n,e.node,t)?n.piece.childAt(0).trigger("highlight"):"none"!==t&&n.piece.childAt(0).trigger("downplay"))})},VM.onNormal=function(){this.node.hostTree.root.eachNode(function(t){t.piece&&t.piece.updateData(!1,t,"normal")})},VM.onHighlight=function(){this.updateData(!1,this.node,"highlight")},VM.onDownplay=function(){this.updateData(!1,this.node,"downplay")},VM._updateLabel=function(t,e,n){function r(t){var e=o.get(t);return null==e?a.get(t):e}var i=this.node.getModel(),a=i.getModel("label"),o="normal"===n||"emphasis"===n?a:i.getModel(n+".label"),s=i.getModel("emphasis.label"),u=M(t.getFormattedLabel(this.node.dataIndex,"normal",null,null,"label"),this.node.name);!1===r("show")&&(u="");var l=this.node.getLayout(),c=o.get("minAngle");null==c&&(c=a.get("minAngle")),null!=(c=c/180*Math.PI)&&Math.abs(l.endAngle-l.startAngle)<c&&(u="");var h=this.childAt(1);Or(h.style,h.hoverStyle||{},a,s,{defaultText:o.getShallow("show")?u:null,autoColor:e,useInsideStyle:!0});var f,d=(l.startAngle+l.endAngle)/2,p=Math.cos(d),g=Math.sin(d),v=r("position"),m=r("distance")||0,y=r("align");"outside"===v?(f=l.r+m,y=d>Math.PI/2?"right":"left"):y&&"center"!==y?"left"===y?(f=l.r0+m,d>Math.PI/2&&(y="right")):"right"===y&&(f=l.r-m,d>Math.PI/2&&(y="left")):(f=(l.r+l.r0)/2,y="center"),h.attr("style",{text:u,textAlign:y,textVerticalAlign:r("verticalAlign")||"middle",opacity:r("opacity")}),h.attr("position",[f*p+l.cx,f*g+l.cy]);var _=r("rotate"),b=0;"radial"===_?(b=-d)<-Math.PI/2&&(b+=Math.PI):"tangential"===_?(b=Math.PI/2-d)>Math.PI/2?b-=Math.PI:b<-Math.PI/2&&(b+=Math.PI):"number"==typeof _&&(b=_*Math.PI/180),h.attr("rotation",b)},VM._initEvents=function(t,e,n,r){t.off("mouseover").off("mouseout").off("emphasis").off("normal");var i=this,a=function(){i.onEmphasis(r)},o=function(){i.onNormal()};n.isAnimationEnabled()&&t.on("mouseover",a).on("mouseout",o).on("emphasis",a).on("normal",o).on("downplay",function(){i.onDownplay()}).on("highlight",function(){i.onHighlight()})},l(Bf,kv),fa.extend({type:"sunburst",init:function(){},render:function(t,e,n,r){function i(n,r){if(c||!n||n.getValue()||(n=null),n!==s&&r!==s)if(r&&r.piece)n?(r.piece.updateData(!1,n,"normal",t,e),o.setItemGraphicEl(n.dataIndex,r.piece)):function(t){t&&t.piece&&(l.remove(t.piece),t.piece=null)}(r);else if(n){var i=new Bf(n,t,e);l.add(i),o.setItemGraphicEl(n.dataIndex,i)}}var a=this;this.seriesModel=t,this.api=n,this.ecModel=e;var o=t.getData(),s=o.tree.root,u=t.getViewRoot(),l=this.group,c=t.get("renderLabelForZeroData"),h=[];if(u.eachNode(function(t){h.push(t)}),function(t,e){function n(t){return t.getId()}function r(n,r){i(null==n?null:t[n],null==r?null:e[r])}0===t.length&&0===e.length||new bo(e,t,n,n).add(r).update(r).remove(m(r,null)).execute()}(h,this._oldChildren||[]),function(n,r){if(r.depth>0){a.virtualPiece?a.virtualPiece.updateData(!1,n,"normal",t,e):(a.virtualPiece=new Bf(n,t,e),l.add(a.virtualPiece)),r.piece._onclickEvent&&r.piece.off("click",r.piece._onclickEvent);var i=function(t){a._rootToNode(r.parentNode)};r.piece._onclickEvent=i,a.virtualPiece.on("click",i)}else a.virtualPiece&&(l.remove(a.virtualPiece),a.virtualPiece=null)}(s,u),r&&r.highlight&&r.highlight.piece){var f=t.getShallow("highlightPolicy");r.highlight.piece.onEmphasis(f)}else if(r&&r.unhighlight){var d=this.virtualPiece;!d&&s.children.length&&(d=s.children[0].piece),d&&d.onNormal()}this._initEvents(),this._oldChildren=h},dispose:function(){},_initEvents:function(){var t=this,e=function(e){var n=!1;t.seriesModel.getViewRoot().eachNode(function(r){if(!n&&r.piece&&r.piece.childAt(0)===e.target){var i=r.getModel().get("nodeClick");if("rootToNode"===i)t._rootToNode(r);else if("link"===i){var a=r.getModel(),o=a.get("link");if(o){var s=a.get("target",!0)||"_blank";window.open(o,s)}}n=!0}})};this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",e),this.group._onclickEvent=e},_rootToNode:function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},containPoint:function(t,e){var n=e.getData().getItemLayout(0);if(n){var r=t[0]-n.cx,i=t[1]-n.cy,a=Math.sqrt(r*r+i*i);return a<=n.r&&a>=n.r0}}});var HM="sunburstRootToNode";uo({type:HM,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(e,n){var r=Cl(t,[HM],e);if(r){var i=e.getViewRoot();i&&(t.direction=Al(i,r.node)?"rollUp":"drillDown"),e.resetViewRoot(r.node)}})});var GM="sunburstHighlight";uo({type:GM,update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(e,n){var r=Cl(t,[GM],e);r&&(t.highlight=r.node)})}),uo({type:"sunburstUnhighlight",update:"updateView"},function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},function(e,n){t.unhighlight=!0})});var WM=Math.PI/180;ho(m(SS,"sunburst")),co(m(function(t,e,n,r){e.eachSeriesByType(t,function(t){var e=t.get("center"),r=t.get("radius");y(r)||(r=[0,r]),y(e)||(e=[e,e]);var i=n.getWidth(),a=n.getHeight(),o=Math.min(i,a),s=Yr(e[0],i),u=Yr(e[1],a),l=Yr(r[0],o/2),c=Yr(r[1],o/2),h=-t.get("startAngle")*WM,d=t.get("minAngle")*WM,p=t.getData().tree.root,g=t.getViewRoot(),v=g.depth,m=t.get("sort");null!=m&&function t(e,n){var r=e.children||[];e.children=function(t,e){if("function"==typeof e)return t.sort(e);var n="asc"===e;return t.sort(function(t,e){var r=(t.getValue()-e.getValue())*(n?1:-1);return 0===r?(t.dataIndex-e.dataIndex)*(n?-1:1):r})}(r,n),r.length&&f(e.children,function(e){t(e,n)})}(g,m);var _=0;f(g.children,function(t){!isNaN(t.getValue())&&_++});var b=g.getValue(),x=Math.PI/(b||_)*2,w=g.depth>0,S=(c-l)/(g.height-(w?-1:1)||1),T=t.get("clockwise"),O=t.get("stillShowZeroSum"),M=T?1:-1,k=function(t,e){if(t){var n=e;if(t!==p){var r=t.getValue(),i=0===b&&O?x:r*x;i<d&&(i=d),n=e+M*i;var a=t.depth-v-(w?-1:1),c=l+S*a,h=l+S*(a+1),g=t.getModel();null!=g.get("r0")&&(c=Yr(g.get("r0"),o/2)),null!=g.get("r")&&(h=Yr(g.get("r"),o/2)),t.setLayout({angle:i,startAngle:e,endAngle:n,clockwise:T,cx:s,cy:u,r0:c,r:h})}if(t.children&&t.children.length){var m=0;f(t.children,function(t){m+=k(t,e+m)})}return n-e}};if(w){var C=2*Math.PI;p.setLayout({angle:C,startAngle:h,endAngle:h+C,clockwise:T,cx:s,cy:u,r0:l,r:l+S})}k(g,h)})},"sunburst")),so(m(MS,"sunburst"));var qM=["itemStyle"],YM=["emphasis","itemStyle"],XM=["label"],$M=["emphasis","label"],ZM="e\0\0",QM={cartesian2d:function(t){var e=t.grid.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:v(Uf,t)}}},geo:function(t){var e=t.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:t.getZoom()},api:{coord:function(e){return t.dataToPoint(e)},size:v(zf,t)}}},singleAxis:function(t){var e=t.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:v(Vf,t)}}},polar:function(t){var e=t.getRadiusAxis(),n=t.getAngleAxis(),r=e.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:r[1],r0:r[0]},api:{coord:v(function(r){var i=e.dataToRadius(r[0]),a=n.dataToAngle(r[1]),o=t.coordToPoint([i,a]);return o.push(i,a*Math.PI/180),o}),size:v(Hf,t)}}},calendar:function(t){var e=t.getRect(),n=t.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(e,n){return t.dataToPoint(e,n)}}}}};gb.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,useTransform:!0},getInitialData:function(t,e){return Fo(this.getSource(),this)},getDataParams:function(t,e,n){var r=gb.prototype.getDataParams.apply(this,arguments);return n&&(r.info=n.info),r}}),fa.extend({type:"custom",_data:null,render:function(t,e,n,r){var i=this._data,a=t.getData(),o=this.group,s=qf(t,a,e,n);a.diff(i).add(function(e){Xf(null,e,s(e,r),t,o,a)}).update(function(e,n){Xf(i.getItemGraphicEl(n),e,s(e,r),t,o,a)}).remove(function(t){var e=i.getItemGraphicEl(t);e&&o.remove(e)}).execute(),this._data=a},incrementalPrepareRender:function(t,e,n){this.group.removeAll(),this._data=null},incrementalRender:function(t,e,n,r,i){for(var a=e.getData(),o=qf(e,a,n,r),s=t.start;s<t.end;s++)Xf(null,s,o(s,i),e,this.group,a).traverse(function(t){t.isGroup||(t.incremental=!0,t.useHoverLayer=!0)})},dispose:B,filterForExposedEvent:function(t,e,n,r){var i=e.element;if(null==i||n.name===i)return!0;for(;(n=n.parent)&&n!==this.group;)if(n.name===i)return!0;return!1}}),oo(function(t){var e=t.graphic;y(e)?t.graphic=e[0]&&e[0].elements?[t.graphic[0]]:[{elements:e}]:e&&!e.elements&&(t.graphic=[{elements:[e]}])});var KM=go({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(t){var e=this.option.elements;this.option.elements=null,KM.superApply(this,"mergeOption",arguments),this.option.elements=e},optionUpdated:function(t,e){var n=this.option,r=(e?n:t).elements,i=n.elements=e?[]:n.elements,a=[];this._flatten(r,a);var o=un(i,a);ln(o);var s=this._elOptionsToUpdate=[];f(o,function(t,e){var n=t.option;n&&(s.push(n),function(t,e){var n=t.exist;if(e.id=t.keyInfo.id,!e.type&&n&&(e.type=n.type),null==e.parentId){var r=e.parentOption;r?e.parentId=r.id:n&&(e.parentId=n.parentId)}e.parentOption=null}(t,n),ad(i,e,n),function(t,e){t&&(t.hv=e.hv=[id(e,["left","right"]),id(e,["top","bottom"])],"group"===t.type&&(null==t.width&&(t.width=e.width=0),null==t.height&&(t.height=e.height=0)))}(i[e],n))},this);for(var u=i.length-1;u>=0;u--)null==i[u]?i.splice(u,1):delete i[u].$action},_flatten:function(t,e,n){f(t,function(t){if(t){n&&(t.parentOption=n),e.push(t);var r=t.children;"group"===t.type&&r&&this._flatten(r,e,t),delete t.children}},this)},useElOptionsToUpdate:function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t}});vo({type:"graphic",init:function(t,e){this._elMap=R()},render:function(t,e,n){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,n)},_updateElements:function(t){var e=t.useElOptionsToUpdate();if(e){var n=this._elMap,r=this.group;f(e,function(e){var i=e.$action,a=e.id,o=n.get(a),s=e.parentId,u=null!=s?n.get(s):r,l=e.style;"text"===e.type&&l&&(e.hv&&e.hv[1]&&(l.textVerticalAlign=l.textBaseline=null),!l.hasOwnProperty("textFill")&&l.fill&&(l.textFill=l.fill),!l.hasOwnProperty("textStroke")&&l.stroke&&(l.textStroke=l.stroke));var c=rd(e);i&&"merge"!==i?"replace"===i?(nd(o,n),ed(a,u,c,n)):"remove"===i&&nd(o,n):o?o.attr(c):ed(a,u,c,n);var h=n.get(a);h&&(h.__ecGraphicWidth=e.width,h.__ecGraphicHeight=e.height,function(t,e,n){var r=t.eventData;t.silent||t.ignore||r||(r=t.eventData={componentType:"graphic",componentIndex:e.componentIndex,name:t.name}),r&&(r.info=t.info)}(h,t))})}},_relocate:function(t,e){for(var n=t.option.elements,r=this.group,i=this._elMap,a=n.length-1;a>=0;a--){var o=n[a],s=i.get(o.id);if(s){var u=s.parent;_i(s,o,u===r?{width:e.getWidth(),height:e.getHeight()}:{width:u.__ecGraphicWidth||0,height:u.__ecGraphicHeight||0},null,{hv:o.hv,boundingMode:o.bounding})}}},_clear:function(){var t=this._elMap;t.each(function(e){nd(e,t)}),this._elMap=R()},dispose:function(){this._clear()}});var JM=go({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(t,e,n){this.mergeDefaultAndTheme(t,n),t.selected=t.selected||{}},mergeOption:function(t){JM.superCall(this,"mergeOption",t)},optionUpdated:function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,n=0;n<t.length;n++){var r=t[n].get("name");if(this.isSelected(r)){this.select(r),e=!0;break}}!e&&this.select(t[0].get("name"))}},_updateData:function(t){var e=[],n=[];t.eachRawSeries(function(r){var i;if(n.push(r.name),r.legendDataProvider){var a=r.legendDataProvider(),o=a.mapArray(a.getName);t.isSeriesFiltered(r)||(n=n.concat(o)),o.length?e=e.concat(o):i=!0}else i=!0;i&&cn(r)&&e.push(r.name)}),this._availableNames=n;var r=d(this.get("data")||e,function(t){return"string"!=typeof t&&"number"!=typeof t||(t={name:t}),new Vr(t,this,this.ecModel)},this);this._data=r},getData:function(){return this._data},select:function(t){var e=this.option.selected;"single"===this.get("selectedMode")&&f(this._data,function(t){e[t.get("name")]=!1}),e[t]=!0},unSelect:function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},toggleSelected:function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},isSelected:function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&u(this._availableNames,t)>=0},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",textStyle:{color:"#333"},selectedMode:!0,tooltip:{show:!1}}});uo("legendToggleSelect","legendselectchanged",m(od,"toggleSelected")),uo("legendSelect","legendselected",m(od,"select")),uo("legendUnSelect","legendunselected",m(od,"unSelect"));var tk=m,ek=f,nk=kv,rk=vo({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new nk)},getContentGroup:function(){return this._contentGroup},render:function(t,e,n){if(this.resetInner(),t.get("show",!0)){var r=t.get("align");r&&"auto"!==r||(r="right"===t.get("left")&&"vertical"===t.get("orient")?"right":"left"),this.renderInner(r,t,e,n);var i=t.getBoxLayoutParams(),a={width:n.getWidth(),height:n.getHeight()},s=t.get("padding"),u=yi(i,a,s),l=this.layoutInner(t,r,u),c=yi(o({width:l.width,height:l.height},i),a,s);this.group.attr("position",[c.x-l.x,c.y-l.y]),this.group.add(this._backgroundEl=sd(l,t))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl)},renderInner:function(t,e,n,r){var i=this.getContentGroup(),a=R(),o=e.get("selectedMode"),s=[];n.eachRawSeries(function(t){!t.get("legendHoverLink")&&s.push(t.id)}),ek(e.getData(),function(u,l){var c=u.get("name");if(this.newlineDisabled||""!==c&&"\n"!==c){var h=n.getSeriesByName(c)[0];if(!a.get(c))if(h){var f=h.getData(),d=f.getVisual("color");"function"==typeof d&&(d=d(h.getDataParams(0)));var p=f.getVisual("legendSymbol")||"roundRect",g=f.getVisual("symbol");this._createItem(c,l,u,e,p,g,t,d,o).on("click",tk(ud,c,r)).on("mouseover",tk(ld,h.name,null,r,s)).on("mouseout",tk(cd,h.name,null,r,s)),a.set(c,!0)}else n.eachRawSeries(function(n){if(!a.get(c)&&n.legendDataProvider){var i=n.legendDataProvider(),h=i.indexOfName(c);if(h<0)return;var f=i.getItemVisual(h,"color");this._createItem(c,l,u,e,"roundRect",null,t,f,o).on("click",tk(ud,c,r)).on("mouseover",tk(ld,null,c,r,s)).on("mouseout",tk(cd,null,c,r,s)),a.set(c,!0)}},this)}else i.add(new nk({newline:!0}))},this)},_createItem:function(t,e,n,r,i,o,s,u,l){var c=r.get("itemWidth"),h=r.get("itemHeight"),f=r.get("inactiveColor"),d=r.get("symbolKeepAspect"),p=r.isSelected(t),g=new nk,v=n.getModel("textStyle"),m=n.get("icon"),y=n.getModel("tooltip"),_=y.parentModel;if(g.add(hs(i=m||i,0,0,c,h,p?u:f,null==d||d)),!m&&o&&(o!==i||"none"===o)){var b=.8*h;"none"===o&&(o="circle"),g.add(hs(o,(c-b)/2,(h-b)/2,b,b,p?u:f,null==d||d))}var x="left"===s?c+5:-5,w=s,S=r.get("formatter"),T=t;"string"==typeof S&&S?T=S.replace("{name}",null!=t?t:""):"function"==typeof S&&(T=S(t)),g.add(new Py({style:Mr({},v,{text:T,x:x,y:h/2,textFill:p?v.getTextColor():f,textAlign:w,textVerticalAlign:"middle"})}));var O=new Vy({shape:g.getBoundingRect(),invisible:!0,tooltip:y.get("show")?a({content:t,formatter:_.get("formatter",!0)||function(){return t},formatterParams:{componentType:"legend",legendIndex:r.componentIndex,name:t,$vars:["name"]}},y.option):null});return g.add(O),g.eachChild(function(t){t.silent=!0}),O.silent=!l,this.getContentGroup().add(g),Sr(g),g.__legendDataIndex=e,g},layoutInner:function(t,e,n){var r=this.getContentGroup();k_(t.get("orient"),r,t.get("itemGap"),n.width,n.height);var i=r.getBoundingRect();return r.attr("position",[-i.x,-i.y]),this.group.getBoundingRect()}});so(function(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries(function(t){for(var n=0;n<e.length;n++)if(!e[n].isSelected(t.name))return!1;return!0})}),A_.registerSubTypeDefaulter("legend",function(){return"plain"});var ik=JM.extend({type:"legend.scroll",setScrollDataIndex:function(t){this.option.scrollDataIndex=t},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(t,e,n,r){var i=xi(t);ik.superCall(this,"init",t,e,n,r),hd(this,t,i)},mergeOption:function(t,e){ik.superCall(this,"mergeOption",t,e),hd(this,this.option,t)},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}}}),ak=kv,ok=["width","height"],sk=["x","y"],uk=rk.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){uk.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new ak),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new ak)},resetInner:function(){uk.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(t,e,n,r){function i(t,n){var i=t+"DataIndex",u=zr(e.get("pageIcons",!0)[e.getOrient().name][n],{onclick:v(a._pageGo,a,i,e,r)},{x:-s[0]/2,y:-s[1]/2,width:s[0],height:s[1]});u.name=t,o.add(u)}var a=this;uk.superCall(this,"renderInner",t,e,n,r);var o=this._controllerGroup,s=e.get("pageIconSize",!0);y(s)||(s=[s,s]),i("pagePrev",0);var u=e.getModel("pageTextStyle");o.add(new Py({name:"pageText",style:{textFill:u.getTextColor(),font:u.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),i("pageNext",1)},layoutInner:function(t,e,n){var r=this.getContentGroup(),i=this._containerGroup,a=this._controllerGroup,o=t.getOrient().index,s=ok[o],u=ok[1-o],l=sk[1-o];k_(t.get("orient"),r,t.get("itemGap"),o?n.width:null,o?null:n.height),k_("horizontal",a,t.get("pageButtonItemGap",!0));var c=r.getBoundingRect(),h=a.getBoundingRect(),f=this._showController=c[s]>n[s],d=[-c.x,-c.y];d[o]=r.position[o];var p=[0,0],g=[-h.x,-h.y],v=k(t.get("pageButtonGap",!0),t.get("itemGap",!0));f&&("end"===t.get("pageButtonPosition",!0)?g[o]+=n[s]-h[s]:p[o]+=h[s]+v),g[1-o]+=c[u]/2-h[u]/2,r.attr("position",d),i.attr("position",p),a.attr("position",g);var m=this.group.getBoundingRect();if((m={x:0,y:0})[s]=f?n[s]:c[s],m[u]=Math.max(c[u],h[u]),m[l]=Math.min(0,h[l]+g[1-o]),i.__rectSize=n[s],f){var y={x:0,y:0};y[s]=Math.max(n[s]-h[s]-v,0),y[u]=m[u],i.setClipPath(new Vy({shape:y})),i.__rectSize=y[s]}else a.eachChild(function(t){t.attr({invisible:!0,silent:!0})});var _=this._getPageInfo(t);return null!=_.pageIndex&&Dr(r,{position:_.contentPosition},!!f&&t),this._updatePageInfoView(t,_),m},_pageGo:function(t,e,n){var r=this._getPageInfo(e)[t];null!=r&&n.dispatchAction({type:"legendScroll",scrollDataIndex:r,legendId:e.id})},_updatePageInfoView:function(t,e){var n=this._controllerGroup;f(["pagePrev","pageNext"],function(r){var i=null!=e[r+"DataIndex"],a=n.childOfName(r);a&&(a.setStyle("fill",t.get(i?"pageIconColor":"pageIconInactiveColor",!0)),a.cursor=i?"pointer":"default")});var r=n.childOfName("pageText"),i=t.get("pageFormatter"),a=e.pageIndex,o=null!=a?a+1:0,s=e.pageCount;r&&i&&r.setStyle("text",b(i)?i.replace("{current}",o).replace("{total}",s):i({current:o,total:s}))},_getPageInfo:function(t){function e(t){var e=t.getBoundingRect().clone();return e[d]+=t.position[c],e}var n,r,i,a,o=t.get("scrollDataIndex",!0),s=this.getContentGroup(),u=s.getBoundingRect(),l=this._containerGroup.__rectSize,c=t.getOrient().index,h=ok[c],f=ok[1-c],d=sk[c],p=s.position.slice();this._showController?s.eachChild(function(t){t.__legendDataIndex===o&&(a=t)}):a=s.childAt(0);var g=l?Math.ceil(u[h]/l):0;if(a){var v=a.getBoundingRect(),m=a.position[c]+v[d];p[c]=-m-u[d],n=Math.floor(g*(m+v[d]+l/2)/u[h]),n=u[h]&&g?Math.max(0,Math.min(g-1,n)):-1;var y={x:0,y:0};y[h]=l,y[f]=u[f],y[d]=-p[c]-u[d];var _,b=s.children();if(s.eachChild(function(t,n){var r=e(t);r.intersect(y)&&(null==_&&(_=n),i=t.__legendDataIndex),n===b.length-1&&r[d]+r[h]<=y[d]+y[h]&&(i=null)}),null!=_){var x=e(b[_]);if(y[d]=x[d]+x[h]-y[h],_<=0&&x[d]>=y[d])r=null;else{for(;_>0&&e(b[_-1]).intersect(y);)_--;r=b[_].__legendDataIndex}}}return{contentPosition:p,pageIndex:n,pageCount:g,pagePrevDataIndex:r,pageNextDataIndex:i}}});uo("legendScroll","legendscroll",function(t,e){var n=t.scrollDataIndex;null!=n&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},function(t){t.setScrollDataIndex(n)})}),go({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});var lk=f,ck=li,hk=["","-webkit-","-moz-","-o-"];fd.prototype={constructor:fd,_enterable:!0,update:function(){var t=this._container,e=t.currentStyle||document.defaultView.getComputedStyle(t),n=t.style;"absolute"!==n.position&&"absolute"!==e.position&&(n.position="relative")},show:function(t){clearTimeout(this._hideTimeout);var e=this.el;e.style.cssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+function(t){var e=[],n=t.get("transitionDuration"),r=t.get("backgroundColor"),i=t.getModel("textStyle"),a=t.get("padding");return n&&e.push(function(t){var e="left "+n+"s cubic-bezier(0.23, 1, 0.32, 1),top "+n+"s cubic-bezier(0.23, 1, 0.32, 1)";return d(hk,function(t){return t+"transition:"+e}).join(";")}()),r&&(Mg.canvasSupported?e.push("background-Color:"+r):(e.push("background-Color:#"+Nt(r)),e.push("filter:alpha(opacity=70)"))),lk(["width","color","radius"],function(n){var r="border-"+n,i=ck(r),a=t.get(i);null!=a&&e.push(r+":"+a+("color"===n?"":"px"))}),e.push(function(t){var e=[],n=t.get("fontSize"),r=t.getTextColor();return r&&e.push("color:"+r),e.push("font:"+t.getFont()),n&&e.push("line-height:"+Math.round(3*n/2)+"px"),lk(["decoration","align"],function(n){var r=t.get(n);r&&e.push("text-"+n+":"+r)}),e.join(";")}(i)),null!=a&&e.push("padding:"+m_(a).join("px ")+"px"),e.join(";")+";"}(t)+";left:"+this._x+"px;top:"+this._y+"px;"+(t.get("extraCssText")||""),e.style.display=e.innerHTML?"block":"none",e.style.pointerEvents=this._enterable?"auto":"none",this._show=!0},setContent:function(t){this.el.innerHTML=null==t?"":t},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el;return[t.clientWidth,t.clientHeight]},moveTo:function(t,e){var n,r=this._zr;r&&r.painter&&(n=r.painter.getViewportRootOffset())&&(t+=n.offsetLeft,e+=n.offsetTop);var i=this.el.style;i.left=t+"px",i.top=e+"px",this._x=t,this._y=e},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(v(this.hide,this),t)):this.hide())},isShow:function(){return this._show},getOuterSize:function(){var t=this.el.clientWidth,e=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var n=document.defaultView.getComputedStyle(this.el);n&&(t+=parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10)+parseInt(n.borderLeftWidth,10)+parseInt(n.borderRightWidth,10),e+=parseInt(n.paddingTop,10)+parseInt(n.paddingBottom,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10))}return{width:t,height:e}}},dd.prototype={constructor:dd,_enterable:!0,update:function(){},show:function(t){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr("show",!0),this._show=!0},setContent:function(t,e,n){this.el&&this._zr.remove(this.el);for(var r={},i=t,a=i.indexOf("{marker");a>=0;){var o=i.indexOf("|}"),s=i.substr(a+"{marker".length,o-a-"{marker".length);r["marker"+s]=s.indexOf("sub")>-1?{textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:e[s],textOffset:[3,0]}:{textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:e[s]},a=(i=i.substr(o+1)).indexOf("{marker")}this.el=new Py({style:{rich:r,text:t,textLineHeight:20,textBackgroundColor:n.get("backgroundColor"),textBorderRadius:n.get("borderRadius"),textFill:n.get("textStyle.color"),textPadding:n.get("padding")},z:n.get("z")}),this._zr.add(this.el);var u=this;this.el.on("mouseover",function(){u._enterable&&(clearTimeout(u._hideTimeout),u._show=!0),u._inContent=!0}),this.el.on("mouseout",function(){u._enterable&&u._show&&u.hideLater(u._hideDelay),u._inContent=!1})},setEnterable:function(t){this._enterable=t},getSize:function(){var t=this.el.getBoundingRect();return[t.width,t.height]},moveTo:function(t,e){this.el&&this.el.attr("position",[t,e])},hide:function(){this.el.hide(),this._show=!1},hideLater:function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(v(this.hide,this),t)):this.hide())},isShow:function(){return this._show},getOuterSize:function(){return this.getSize()}};var fk=v,dk=f,pk=Yr,gk=new Vy({shape:{x:-1,y:-1,width:2,height:2}});vo({type:"tooltip",init:function(t,e){if(!Mg.node){var n,r=t.getComponent("tooltip").get("renderMode");this._renderMode=mn(r),"html"===this._renderMode?(n=new fd(e.getDom(),e),this._newLine="<br/>"):(n=new dd(e),this._newLine="\n"),this._tooltipContent=n}},render:function(t,e,n){if(!Mg.node){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=n,this._lastDataByCoordSys=null,this._alwaysShowContent=t.get("alwaysShowContent");var r=this._tooltipContent;r.update(),r.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var t=this._tooltipModel.get("triggerOn");vf("itemTooltip",this._api,fk(function(e,n,r){"none"!==t&&(t.indexOf(e)>=0?this._tryShow(n,r):"leave"===e&&this._hide(r))},this))},_keepShow:function(){var t=this._tooltipModel,e=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==t.get("triggerOn")){var r=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){r.manuallyShowTip(t,e,n,{x:r._lastX,y:r._lastY})})}},manuallyShowTip:function(t,e,n,r){if(r.from!==this.uid&&!Mg.node){var i=gd(r,n);this._ticket="";var a=r.dataByCoordSys;if(r.tooltip&&null!=r.x&&null!=r.y){var o=gk;o.position=[r.x,r.y],o.update(),o.tooltip=r.tooltip,this._tryShow({offsetX:r.x,offsetY:r.y,target:o},i)}else if(a)this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,event:{},dataByCoordSys:r.dataByCoordSys,tooltipOption:r.tooltipOption},i);else if(null!=r.seriesIndex){if(this._manuallyAxisShowTip(t,e,n,r))return;var s=SM(r,e),u=s.point[0],l=s.point[1];null!=u&&null!=l&&this._tryShow({offsetX:u,offsetY:l,position:r.position,target:s.el,event:{}},i)}else null!=r.x&&null!=r.y&&(n.dispatchAction({type:"updateAxisPointer",x:r.x,y:r.y}),this._tryShow({offsetX:r.x,offsetY:r.y,position:r.position,target:n.getZr().findHover(r.x,r.y).target,event:{}},i))}},manuallyHideTip:function(t,e,n,r){!this._alwaysShowContent&&this._tooltipModel&&this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,r.from!==this.uid&&this._hide(gd(r,n))},_manuallyAxisShowTip:function(t,e,n,r){var i=r.seriesIndex,a=r.dataIndex,o=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=i&&null!=a&&null!=o){var s=e.getSeriesByIndex(i);if(s&&"axis"===(t=pd([s.getData().getItemModel(a),s,(s.coordinateSystem||{}).model,t])).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:i,dataIndex:a,position:r.position}),!0}},_tryShow:function(t,e){var n=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var r=t.dataByCoordSys;r&&r.length?this._showAxisTooltip(r,t):n&&null!=n.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(t,n,e)):n&&n.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(t,n,e)):(this._lastDataByCoordSys=null,this._hide(e))}},_showOrMove:function(t,e){var n=t.get("showDelay");e=v(e,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(e,n):e()},_showAxisTooltip:function(t,e){var n=this._ecModel,i=[e.offsetX,e.offsetY],a=[],o=[],s=pd([e.tooltipOption,this._tooltipModel]),u=this._renderMode,l=this._newLine,c={};dk(t,function(t){dk(t.dataByAxis,function(t){var e=n.getComponent(t.axisDim+"Axis",t.axisIndex),i=t.value,s=[];if(e&&null!=i){var h=kf(i,e.axis,n,t.seriesDataIndices,t.valueLabelOpt);f(t.seriesDataIndices,function(a){var l=n.getSeriesByIndex(a.seriesIndex),f=a.dataIndexInside,d=l&&l.getDataParams(f);if(d.axisDim=t.axisDim,d.axisIndex=t.axisIndex,d.axisType=t.axisType,d.axisId=t.axisId,d.axisValue=us(e.axis,i),d.axisValueLabel=h,d){o.push(d);var p,g=l.formatTooltip(f,!0,null,u);x(g)?(p=g.html,r(c,g.markers)):p=g,s.push(p)}});var d=h;a.push("html"!==u?s.join(l):(d?ci(d)+l:"")+s.join(l))}})},this),a.reverse(),a=a.join(this._newLine+this._newLine);var h=e.position;this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(t)?this._updatePosition(s,h,i[0],i[1],this._tooltipContent,o):this._showTooltipContent(s,a,o,Math.random(),i[0],i[1],h,void 0,c)})},_showSeriesItemTooltip:function(t,e,n){var r=e.seriesIndex,i=this._ecModel.getSeriesByIndex(r),a=e.dataModel||i,o=e.dataIndex,s=e.dataType,u=a.getData(),l=pd([u.getItemModel(o),a,i&&(i.coordinateSystem||{}).model,this._tooltipModel]),c=l.get("trigger");if(null==c||"item"===c){var h,f,d=a.getDataParams(o,s),p=a.formatTooltip(o,!1,s,this._renderMode);x(p)?(h=p.html,f=p.markers):(h=p,f=null);var g="item_"+a.name+"_"+o;this._showOrMove(l,function(){this._showTooltipContent(l,h,d,g,t.offsetX,t.offsetY,t.position,t.target,f)}),n({type:"showTip",dataIndexInside:o,dataIndex:u.getRawIndex(o),seriesIndex:r,from:this.uid})}},_showComponentItemTooltip:function(t,e,n){var r=e.tooltip;"string"==typeof r&&(r={content:r,formatter:r});var i=new Vr(r,this._tooltipModel,this._ecModel),a=i.get("content"),o=Math.random();this._showOrMove(i,function(){this._showTooltipContent(i,a,i.get("formatterParams")||{},o,t.offsetX,t.offsetY,t.position,e)}),n({type:"showTip",from:this.uid})},_showTooltipContent:function(t,e,n,r,i,a,o,s,u){if(this._ticket="",t.get("showContent")&&t.get("show")){var l=this._tooltipContent,c=t.get("formatter");o=o||t.get("position");var h=e;if(c&&"string"==typeof c)h=hi(c,n,!0);else if("function"==typeof c){var f=fk(function(e,r){e===this._ticket&&(l.setContent(r,u,t),this._updatePosition(t,o,i,a,l,n,s))},this);this._ticket=r,h=c(n,r,f)}l.setContent(h,u,t),l.show(t),this._updatePosition(t,o,i,a,l,n,s)}},_updatePosition:function(t,e,n,r,i,a,o){var s=this._api.getWidth(),u=this._api.getHeight();e=e||t.get("position");var l=i.getSize(),c=t.get("align"),h=t.get("verticalAlign"),f=o&&o.getBoundingRect().clone();if(o&&f.applyTransform(o.transform),"function"==typeof e&&(e=e([n,r],a,i.el,f,{viewSize:[s,u],contentSize:l.slice()})),y(e))n=pk(e[0],s),r=pk(e[1],u);else if(x(e)){e.width=l[0],e.height=l[1];var d=yi(e,{width:s,height:u});n=d.x,r=d.y,c=null,h=null}else"string"==typeof e&&o?(n=(p=function(t,e,n){var r=l[0],i=l[1],a=0,o=0,s=e.width,u=e.height;switch(t){case"inside":a=e.x+s/2-r/2,o=e.y+u/2-i/2;break;case"top":a=e.x+s/2-r/2,o=e.y-i-5;break;case"bottom":a=e.x+s/2-r/2,o=e.y+u+5;break;case"left":a=e.x-r-5,o=e.y+u/2-i/2;break;case"right":a=e.x+s+5,o=e.y+u/2-i/2}return[a,o]}(e,f))[0],r=p[1]):(n=(p=function(t,e,n,r,i,a,o){var s=n.getOuterSize(),u=s.width,l=s.height;return null!=a&&(t+u+a>r?t-=u+a:t+=a),null!=o&&(e+l+o>i?e-=l+o:e+=o),[t,e]}(n,r,i,s,u,c?null:20,h?null:20))[0],r=p[1]);if(c&&(n-=vd(c)?l[0]/2:"right"===c?l[0]:0),h&&(r-=vd(h)?l[1]/2:"bottom"===h?l[1]:0),t.get("confine")){var p=function(t,e,n,r,i){var a=n.getOuterSize(),o=a.width,s=a.height;return t=Math.min(t+o,r)-o,e=Math.min(e+s,i)-s,[t=Math.max(t,0),e=Math.max(e,0)]}(n,r,i,s,u);n=p[0],r=p[1]}i.moveTo(n,r)},_updateContentNotChangedOnAxis:function(t){var e=this._lastDataByCoordSys,n=!!e&&e.length===t.length;return n&&dk(e,function(e,r){var i=e.dataByAxis||{},a=(t[r]||{}).dataByAxis||[];(n&=i.length===a.length)&&dk(i,function(t,e){var r=a[e]||{},i=t.seriesDataIndices||[],o=r.seriesDataIndices||[];(n&=t.value===r.value&&t.axisType===r.axisType&&t.axisId===r.axisId&&i.length===o.length)&&dk(i,function(t,e){var r=o[e];n&=t.seriesIndex===r.seriesIndex&&t.dataIndex===r.dataIndex})})}),this._lastDataByCoordSys=t,!!n},_hide:function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},dispose:function(t,e){Mg.node||(this._tooltipContent.hide(),_f("itemTooltip",e))}}),uo({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),uo({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){}),_d.prototype={constructor:_d,pointToData:function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},dataToRadius:xw.prototype.dataToCoord,radiusToData:xw.prototype.coordToData},l(_d,xw);var vk=dn();bd.prototype={constructor:bd,pointToData:function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},dataToAngle:xw.prototype.dataToCoord,angleToData:xw.prototype.coordToData,calculateCategoryInterval:function(){var t=this,e=t.getLabelModel(),n=t.scale,r=n.getExtent(),i=n.count();if(r[1]-r[0]<1)return 0;var a=r[0],o=t.dataToCoord(a+1)-t.dataToCoord(a),s=Math.abs(o),u=me(a,e.getFont(),"center","top"),l=Math.max(u.height,7)/s;isNaN(l)&&(l=1/0);var c=Math.max(0,Math.floor(l)),h=vk(t.model),f=h.lastAutoInterval,d=h.lastTickCount;return null!=f&&null!=d&&Math.abs(f-c)<=1&&Math.abs(d-i)<=1&&f>c?c=f:(h.lastTickCount=i,h.lastAutoInterval=c),c}},l(bd,xw);var mk=function(t){this.name=t||"",this.cx=0,this.cy=0,this._radiusAxis=new _d,this._angleAxis=new bd,this._radiusAxis.polar=this._angleAxis.polar=this};mk.prototype={type:"polar",axisPointerEnabled:!0,constructor:mk,dimensions:["radius","angle"],model:null,containPoint:function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},containData:function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},getAxis:function(t){return this["_"+t+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(t){var e=[],n=this._angleAxis,r=this._radiusAxis;return n.scale.type===t&&e.push(n),r.scale.type===t&&e.push(r),e},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(t){var e=null!=t&&"auto"!==t?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},dataToPoint:function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},pointToData:function(t,e){var n=this.pointToCoord(t);return[this._radiusAxis.radiusToData(n[0],e),this._angleAxis.angleToData(n[1],e)]},pointToCoord:function(t){var e=t[0]-this.cx,n=t[1]-this.cy,r=this.getAngleAxis(),i=r.getExtent(),a=Math.min(i[0],i[1]),o=Math.max(i[0],i[1]);r.inverse?a=o-360:o=a+360;var s=Math.sqrt(e*e+n*n);e/=s,n/=s;for(var u=Math.atan2(-n,e)/Math.PI*180,l=u<a?1:-1;u<a||u>o;)u+=360*l;return[s,u]},coordToPoint:function(t){var e=t[0],n=t[1]/180*Math.PI;return[Math.cos(n)*e+this.cx,-Math.sin(n)*e+this.cy]}};var yk=A_.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});r(yk.prototype,uw),Zw("angle",yk,xd,{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}}),Zw("radius",yk,xd,{splitNumber:5}),go({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(t){var e;return this.ecModel.eachComponent(t,function(t){t.getCoordSysModel()===this&&(e=t)},this),e},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}}),ji.register("polar",{dimensions:mk.prototype.dimensions,create:function(t,e){var n=[];return t.eachComponent("polar",function(t,r){var i=new mk(r);i.update=wd;var a=i.getRadiusAxis(),o=i.getAngleAxis(),s=t.findAxisModel("radiusAxis"),u=t.findAxisModel("angleAxis");Sd(a,s),Sd(o,u),function(t,e,n){var r=e.get("center"),i=n.getWidth(),a=n.getHeight();t.cx=Yr(r[0],i),t.cy=Yr(r[1],a);var o=t.getRadiusAxis(),s=Math.min(i,a)/2,u=Yr(e.get("radius"),s);o.inverse?o.setExtent(u,0):o.setExtent(0,u)}(i,t,e),n.push(i),t.coordinateSystem=i,i.model=t}),t.eachSeries(function(e){if("polar"===e.get("coordinateSystem")){var n=t.queryComponents({mainType:"polar",index:e.get("polarIndex"),id:e.get("polarId")})[0];e.coordinateSystem=n.coordinateSystem}}),n}});var _k=["axisLine","axisLabel","axisTick","splitLine","splitArea"];sS.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(t,e){if(this.group.removeAll(),t.get("show")){var r=t.axis,i=r.polar,a=i.getRadiusAxis().getExtent(),o=r.getTicksCoords(),s=d(r.getViewLabels(),function(t){return(t=n(t)).coord=r.dataToCoord(t.tickValue),t});Md(s),Md(o),f(_k,function(e){!t.get(e+".show")||r.scale.isBlank()&&"axisLine"!==e||this["_"+e](t,i,o,a,s)},this)}},_axisLine:function(t,e,n,r){var i=t.getModel("axisLine.lineStyle"),a=new Ly({shape:{cx:e.cx,cy:e.cy,r:r[Od(e)]},style:i.getLineStyle(),z2:1,silent:!0});a.style.fill=null,this.group.add(a)},_axisTick:function(t,e,n,r){var i=t.getModel("axisTick"),a=(i.get("inside")?-1:1)*i.get("length"),s=r[Od(e)],u=d(n,function(t){return new Hy({shape:Td(e,[s,s+a],t.coord)})});this.group.add(n_(u,{style:o(i.getModel("lineStyle").getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")})}))},_axisLabel:function(t,e,n,r,i){var a=t.getCategories(!0),o=t.getModel("axisLabel"),s=o.get("margin");f(i,function(n,i){var u=o,l=n.tickValue,c=r[Od(e)],h=e.coordToPoint([c+s,n.coord]),f=e.cx,d=e.cy,p=Math.abs(h[0]-f)/c<.3?"center":h[0]>f?"left":"right",g=Math.abs(h[1]-d)/c<.3?"middle":h[1]>d?"top":"bottom";a&&a[l]&&a[l].textStyle&&(u=new Vr(a[l].textStyle,o,o.ecModel));var v=new Py({silent:!0});this.group.add(v),Mr(v.style,u,{x:h[0],y:h[1],textFill:u.getTextColor()||t.get("axisLine.lineStyle.color"),text:n.formattedLabel,textAlign:p,textVerticalAlign:g})},this)},_splitLine:function(t,e,n,r){var i=t.getModel("splitLine").getModel("lineStyle"),a=i.get("color"),s=0;a=a instanceof Array?a:[a];for(var u=[],l=0;l<n.length;l++){var c=s++%a.length;u[c]=u[c]||[],u[c].push(new Hy({shape:Td(e,r,n[l].coord)}))}for(l=0;l<u.length;l++)this.group.add(n_(u[l],{style:o({stroke:a[l%a.length]},i.getLineStyle()),silent:!0,z:t.get("z")}))},_splitArea:function(t,e,n,r){if(n.length){var i=t.getModel("splitArea").getModel("areaStyle"),a=i.get("color"),s=0;a=a instanceof Array?a:[a];for(var u=[],l=Math.PI/180,c=-n[0].coord*l,h=Math.min(r[0],r[1]),f=Math.max(r[0],r[1]),d=t.get("clockwise"),p=1;p<n.length;p++){var g=s++%a.length;u[g]=u[g]||[],u[g].push(new Ry({shape:{cx:e.cx,cy:e.cy,r0:h,r:f,startAngle:c,endAngle:-n[p].coord*l,clockwise:d},silent:!0})),c=-n[p].coord*l}for(p=0;p<u.length;p++)this.group.add(n_(u[p],{style:o({fill:a[p%a.length]},i.getAreaStyle()),silent:!0}))}}});var bk=["axisLine","axisTickLabel","axisName"],xk=["splitLine","splitArea"];sS.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(t,e){if(this.group.removeAll(),t.get("show")){var n=t.axis,r=n.polar,i=r.getAngleAxis(),a=n.getTicksCoords(),o=i.getExtent()[0],s=n.getExtent(),u=function(t,e,n){return{position:[r.cx,r.cy],rotation:o/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}(0,t),l=new nS(t,u);f(bk,l.add,l),this.group.add(l.getGroup()),f(xk,function(e){t.get(e+".show")&&!n.scale.isBlank()&&this["_"+e](t,r,o,s,a)},this)}},_splitLine:function(t,e,n,r,i){var a=t.getModel("splitLine").getModel("lineStyle"),s=a.get("color"),u=0;s=s instanceof Array?s:[s];for(var l=[],c=0;c<i.length;c++){var h=u++%s.length;l[h]=l[h]||[],l[h].push(new Ly({shape:{cx:e.cx,cy:e.cy,r:i[c].coord},silent:!0}))}for(c=0;c<l.length;c++)this.group.add(n_(l[c],{style:o({stroke:s[c%s.length],fill:null},a.getLineStyle()),silent:!0}))},_splitArea:function(t,e,n,r,i){if(i.length){var a=t.getModel("splitArea").getModel("areaStyle"),s=a.get("color"),u=0;s=s instanceof Array?s:[s];for(var l=[],c=i[0].coord,h=1;h<i.length;h++){var f=u++%s.length;l[f]=l[f]||[],l[f].push(new Ry({shape:{cx:e.cx,cy:e.cy,r0:c,r:i[h].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),c=i[h].coord}for(h=0;h<l.length;h++)this.group.add(n_(l[h],{style:o({fill:s[h%s.length]},a.getAreaStyle()),silent:!0}))}}});var wk=bf.extend({makeElOption:function(t,e,n,r,i){var a=n.axis;"angle"===a.dim&&(this.animationThreshold=Math.PI/18);var o,s=a.polar,u=s.getOtherAxis(a).getExtent();o=a["dataTo"+vi(a.dim)](e);var l=r.get("type");if(l&&"none"!==l){var c=Of(r),h=Sk[l](a,s,o,u,c);h.style=c,t.graphicKey=h.type,t.pointer=h}Mf(t,n,r,i,function(t,e,n,r,i){var a=e.axis,o=a.dataToCoord(t),s=r.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var u,l,c,h=r.getRadiusAxis().getExtent();if("radius"===a.dim){var f=pt();_t(f,f,s),yt(f,f,[r.cx,r.cy]),u=Nr([o,-i],f);var d=e.getModel("axisLabel").get("rotate")||0,p=nS.innerTextLayout(s,d*Math.PI/180,-1);l=p.textAlign,c=p.textVerticalAlign}else{var g=h[1];u=r.coordToPoint([g+i,o]);var v=r.cx,m=r.cy;l=Math.abs(u[0]-v)/g<.3?"center":u[0]>v?"left":"right",c=Math.abs(u[1]-m)/g<.3?"middle":u[1]>m?"top":"bottom"}return{position:u,align:l,verticalAlign:c}}(e,n,0,s,r.get("label.margin")))}}),Sk={line:function(t,e,n,r,i){return"angle"===t.dim?{type:"Line",shape:Af(e.coordToPoint([r[0],n]),e.coordToPoint([r[1],n]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:n}}},shadow:function(t,e,n,r,i){var a=Math.max(1,t.getBandWidth()),o=Math.PI/180;return"angle"===t.dim?{type:"Sector",shape:Pf(e.cx,e.cy,r[0],r[1],(-n-a/2)*o,(a/2-n)*o)}:{type:"Sector",shape:Pf(e.cx,e.cy,n-a/2,n+a/2,0,2*Math.PI)}}};sS.registerAxisPointerClass("PolarAxisPointer",wk),co(m(function(t,e,n){var r={},i=function(t,e){var n={};f(t,function(t,e){var r=t.getData(),i=t.coordinateSystem.getBaseAxis(),a=i.getExtent(),o="category"===i.type?i.getBandWidth():Math.abs(a[1]-a[0])/r.count(),s=n[yd(i)]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},u=s.stacks;n[yd(i)]=s;var l=md(t);u[l]||s.autoWidthCount++,u[l]=u[l]||{width:0,maxWidth:0};var c=Yr(t.get("barWidth"),o),h=Yr(t.get("barMaxWidth"),o),f=t.get("barGap"),d=t.get("barCategoryGap");c&&!u[l].width&&(c=Math.min(s.remainedWidth,c),u[l].width=c,s.remainedWidth-=c),h&&(u[l].maxWidth=h),null!=f&&(s.gap=f),null!=d&&(s.categoryGap=d)});var r={};return f(n,function(t,e){r[e]={};var n=t.stacks,i=Yr(t.categoryGap,t.bandWidth),a=Yr(t.gap,1),o=t.remainedWidth,s=t.autoWidthCount,u=(o-i)/(s+(s-1)*a);u=Math.max(u,0),f(n,function(t,e){var n=t.maxWidth;n&&n<u&&(n=Math.min(n,o),t.width&&(n=Math.min(n,t.width)),o-=n,t.width=n,s--)}),u=(o-i)/(s+(s-1)*a),u=Math.max(u,0);var l,c=0;f(n,function(t,e){t.width||(t.width=u),l=t,c+=t.width*(1+a)}),l&&(c-=l.width*a);var h=-c/2;f(n,function(t,n){r[e][n]=r[e][n]||{offset:h,width:t.width},h+=t.width*(1+a)})}),r}(g(e.getSeriesByType(t),function(t){return!e.isSeriesFiltered(t)&&t.coordinateSystem&&"polar"===t.coordinateSystem.type}));e.eachSeriesByType(t,function(t){if("polar"===t.coordinateSystem.type){var e=t.getData(),n=t.coordinateSystem,a=n.getBaseAxis(),o=md(t),s=i[yd(a)][o],u=s.offset,l=s.width,c=n.getOtherAxis(a),h=t.coordinateSystem.cx,f=t.coordinateSystem.cy,d=t.get("barMinHeight")||0,p=t.get("barMinAngle")||0;r[o]=r[o]||[];for(var g=e.mapDimension(c.dim),v=e.mapDimension(a.dim),m=No(e,g),y=c.getExtent()[0],_=0,b=e.count();_<b;_++){var x=e.get(g,_),w=e.get(v,_);if(!isNaN(x)){var S,T,O,M,k=x>=0?"p":"n",C=y;if(m&&(r[o][w]||(r[o][w]={p:y,n:y}),C=r[o][w][k]),"radius"===c.dim){var E=c.dataToRadius(x)-y,A=a.dataToAngle(w);Math.abs(E)<d&&(E=(E<0?-1:1)*d),S=C,T=C+E,M=(O=A-u)-l,m&&(r[o][w][k]=T)}else{var I=c.dataToAngle(x,!0)-y,P=a.dataToRadius(w);Math.abs(I)<p&&(I=(I<0?-1:1)*p),T=(S=P+u)+l,O=C,M=C+I,m&&(r[o][w][k]=M)}e.setItemLayout(_,{cx:h,cy:f,r0:S,r:T,startAngle:-O*Math.PI/180,endAngle:-M*Math.PI/180})}}}},this)},"bar")),vo({type:"polar"}),c(A_.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(t){A_.prototype.init.apply(this,arguments),on(t,"label",["show"])},optionUpdated:function(){var t=this.option,e=this;t.regions=WS.getFilledRegions(t.regions,t.map,t.nameMap),this._optionModelMap=p(t.regions||[],function(t,n){return n.name&&t.set(n.name,new Vr(n,e)),t},R()),this.updateSelectedMap(t.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(t){return this._optionModelMap.get(t)||new Vr(null,this,this.ecModel)},getFormattedLabel:function(t,e){var n=this.getRegionModel(t).get("label."+e+".formatter"),r={name:t};return"function"==typeof n?(r.status=e,n(r)):"string"==typeof n?n.replace("{a}",null!=t?t:""):void 0},setZoom:function(t){this.option.zoom=t},setCenter:function(t){this.option.center=t}}),_S),vo({type:"geo",init:function(t,e){var n=new rl(e,!0);this._mapDraw=n,this.group.add(n.group)},render:function(t,e,n,r){if(!r||"geoToggleSelect"!==r.type||r.from!==this.uid){var i=this._mapDraw;t.get("show")?i.draw(t,e,n,this,r):this._mapDraw.group.removeAll(),this.group.silent=t.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}}),kd("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),kd("select",{type:"geoSelect",event:"geoselected"}),kd("unSelect",{type:"geoUnSelect",event:"geounselected"});var Tk=["rect","polygon","keep","clear"],Ok=f,Mk={lineX:Id(0),lineY:Id(1),rect:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])},rect:function(t,e,n){return t&&n.boundingRect.intersect(t)}},polygon:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])&&ds(n.range,t[0],t[1])},rect:function(t,e,n){var r=n.range;if(!t||r.length<=1)return!1;var i=t.x,a=t.y,o=t.width,s=t.height,u=r[0];return!!(ds(r,i,a)||ds(r,i+o,a)||ds(r,i,a+s)||ds(r,i+o,a+s)||re.create(t).contain(u[0],u[1])||Ld(i,a,i+o,a,r)||Ld(i,a,i,a+s,r)||Ld(i+o,a,i+o,a+s,r)||Ld(i,a+s,i+o,a+s,r))||void 0}}},kk=f,Ck=u,Ek=m,Ak=["dataToPoint","pointToData"],Ik=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Pk=Rd.prototype;Pk.setOutputRanges=function(t,e){this.matchOutputRanges(t,e,function(t,e,n){if((t.coordRanges||(t.coordRanges=[])).push(e),!t.coordRange){t.coordRange=e;var r=Rk[t.brushType](0,n,e);t.__rangeOffset={offset:Nk[t.brushType](r.values,t.range,[1,1]),xyMinMax:r.xyMinMax}}})},Pk.matchOutputRanges=function(t,e,n){kk(t,function(t){var r=this.findTargetInfo(t,e);r&&!0!==r&&f(r.coordSyses,function(r){var i=Rk[t.brushType](1,r,t.range);n(t,i.values,r,e)})},this)},Pk.setInputRanges=function(t,e){kk(t,function(t){var n=this.findTargetInfo(t,e);if(t.range=t.range||[],n&&!0!==n){t.panelId=n.panelId;var r=Rk[t.brushType](0,n.coordSys,t.coordRange),i=t.__rangeOffset;t.range=i?Nk[t.brushType](r.values,i.offset,function(t,e){var n=zd(t),r=zd(e),i=[n[0]/r[0],n[1]/r[1]];return isNaN(i[0])&&(i[0]=1),isNaN(i[1])&&(i[1]=1),i}(r.xyMinMax,i.xyMinMax)):r.values}},this)},Pk.makePanelOpts=function(t,e){return d(this._targetInfoList,function(n){var r=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:e&&e(n),clipPath:eh(r),isTargetByCursor:rh(r,t,n.coordSysModel),getLinearBrushOtherExtent:nh(r)}})},Pk.controlSeries=function(t,e,n){var r=this.findTargetInfo(t,n);return!0===r||r&&Ck(r.coordSyses,e.coordinateSystem)>=0},Pk.findTargetInfo=function(t,e){for(var n=this._targetInfoList,r=Bd(e,t),i=0;i<n.length;i++){var a=n[i],o=t.panelId;if(o){if(a.panelId===o)return a}else for(i=0;i<Dk.length;i++)if(Dk[i](r,a))return a}return!0};var Lk={grid:function(t,e){var n=t.xAxisModels,r=t.yAxisModels,i=t.gridModels,a=R(),o={},s={};(n||r||i)&&(kk(n,function(t){var e=t.axis.grid.model;a.set(e.id,e),o[e.id]=!0}),kk(r,function(t){var e=t.axis.grid.model;a.set(e.id,e),s[e.id]=!0}),kk(i,function(t){a.set(t.id,t),o[t.id]=!0,s[t.id]=!0}),a.each(function(t){var i=[];kk(t.coordinateSystem.getCartesians(),function(t,e){(Ck(n,t.getAxis("x").model)>=0||Ck(r,t.getAxis("y").model)>=0)&&i.push(t)}),e.push({panelId:"grid--"+t.id,gridModel:t,coordSysModel:t,coordSys:i[0],coordSyses:i,getPanelRect:jk.grid,xAxisDeclared:o[t.id],yAxisDeclared:s[t.id]})}))},geo:function(t,e){kk(t.geoModels,function(t){var n=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:jk.geo})})}},Dk=[function(t,e){var n=t.xAxisModel,r=t.yAxisModel,i=t.gridModel;return!i&&n&&(i=n.axis.grid.model),!i&&r&&(i=r.axis.grid.model),i&&i===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],jk={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(Rr(t)),e}},Rk={lineX:Ek(Fd,0),lineY:Ek(Fd,1),rect:function(t,e,n){var r=e[Ak[t]]([n[0][0],n[1][0]]),i=e[Ak[t]]([n[0][1],n[1][1]]),a=[Nd([r[0],i[0]]),Nd([r[1],i[1]])];return{values:a,xyMinMax:a}},polygon:function(t,e,n){var r=[[1/0,-1/0],[1/0,-1/0]];return{values:d(n,function(n){var i=e[Ak[t]](n);return r[0][0]=Math.min(r[0][0],i[0]),r[1][0]=Math.min(r[1][0],i[1]),r[0][1]=Math.max(r[0][1],i[0]),r[1][1]=Math.max(r[1][1],i[1]),i}),xyMinMax:r}}},Nk={lineX:Ek(Ud,0),lineY:Ek(Ud,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return d(t,function(t,r){return[t[0]-n[0]*e[r][0],t[1]-n[1]*e[r][1]]})}},Bk=["inBrush","outOfBrush"],Fk="__ecBrushSelect",Uk="__ecInBrushSelectEvent",zk=ax.VISUAL.BRUSH;co(zk,function(t,e,n){t.eachComponent({mainType:"brush"},function(e){n&&"takeGlobalCursor"===n.type&&e.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1}),(e.brushTargetManager=new Rd(e.option,t)).setInputRanges(e.areas,t)})}),ho(zk,function(t,e,r){var i,a,s=[];t.eachComponent({mainType:"brush"},function(e,r){function u(t){return"all"===g||v[t]}function l(t){return!!t.length}function c(n,r,i){var a=Gd(n);if(a&&!Wd(e,r)&&(f(x,function(r){a[r.brushType]&&e.brushTargetManager.controlSeries(r,n,t)&&i.push(r),b|=l(i)}),u(r)&&l(i))){var o=n.getData();o.each(function(t){Hd(a,i,o,t)&&(m[t]=1)})}}var h={brushId:e.id,brushIndex:r,brushName:e.name,areas:n(e.areas),selected:[]};s.push(h);var p=e.option,g=p.brushLink,v=[],m=[],_=[],b=0;r||(i=p.throttleType,a=p.throttleDelay);var x=d(e.areas,function(t){return function(t){var e=t.selectors={};return f(Mk[t.brushType],function(n,r){e[r]=function(r){return n(r,e,t)}}),t}(o({boundingRect:Vk[t.brushType](t)},t))}),w=Ed(e.option,Bk,function(t){t.mappingMethod="fixed"});y(g)&&f(g,function(t){v[t]=1}),t.eachSeries(function(t,e){var n=_[e]=[];"parallel"===t.subType?function(t,e){var n=t.coordinateSystem;b|=n.hasAxisBrushed(),u(e)&&n.eachActiveState(t.getData(),function(t,e){"active"===t&&(m[e]=1)})}(t,e):c(t,e,n)}),t.eachSeries(function(t,e){var n={seriesId:t.id,seriesIndex:e,seriesName:t.name,dataIndex:[]};h.selected.push(n);var r=Gd(t),i=_[e],a=t.getData(),o=u(e)?function(t){return m[t]?(n.dataIndex.push(a.getRawIndex(t)),"inBrush"):"outOfBrush"}:function(t){return Hd(r,i,a,t)?(n.dataIndex.push(a.getRawIndex(t)),"inBrush"):"outOfBrush"};(u(e)?b:l(i))&&function(t,e,n,r,i,a){function o(t){return n.getItemVisual(l,t)}function s(t,e){n.setItemVisual(l,t,e)}function u(t,u){var h=n.getRawDataItem(l=null==a?t:u);if(!h||!1!==h.visualMap)for(var f=r.call(i,t),d=e[f],p=c[f],g=0,v=p.length;g<v;g++){var m=p[g];d[m]&&d[m].applyVisual(t,o,s)}}var l,c={};f(Bk,function(t){var n=yT.prepareVisualTypes(e[t]);c[t]=n}),null==a?n.each(u):n.each([a],u)}(0,w,a,o)})}),function(t,e,n,r,i){if(i){var a=t.getZr();a[Uk]||(a[Fk]||(a[Fk]=Vd),ya(a,Fk,n,e)(t,r))}}(e,i,a,s,r)});var Vk={lineX:B,lineY:B,rect:function(t){return qd(t.range)},polygon:function(t){for(var e,n=t.range,r=0,i=n.length;r<i;r++){var a=n[r];a[0]<(e=e||[[1/0,-1/0],[1/0,-1/0]])[0][0]&&(e[0][0]=a[0]),a[0]>e[0][1]&&(e[0][1]=a[0]),a[1]<e[1][0]&&(e[1][0]=a[1]),a[1]>e[1][1]&&(e[1][1]=a[1])}return e&&qd(e)}},Hk=["#ddd"];go({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(t,e){var n=this.option;!e&&Ad(n,t,["inBrush","outOfBrush"]);var r=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:Hk},r.hasOwnProperty("liftZ")||(r.liftZ=5)},setAreas:function(t){t&&(this.areas=d(t,function(t){return Yd(this.option,t)},this))},setBrushOption:function(t){this.brushOption=Yd(this.option,t),this.brushType=this.brushOption.brushType}}),vo({type:"brush",init:function(t,e){this.ecModel=t,this.api=e,(this._brushController=new kc(e.getZr())).on("brush",v(this._onBrush,this)).mount()},render:function(t){return this.model=t,Xd.apply(this,arguments)},updateTransform:Xd,updateView:Xd,dispose:function(){this._brushController.dispose()},_onBrush:function(t,e){var r=this.model.id;this.model.brushTargetManager.setOutputRanges(t,this.ecModel),(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:n(t),$from:r})}}),uo({type:"brush",event:"brush"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(e){e.setAreas(t.areas)})}),uo({type:"brushSelect",event:"brushSelected",update:"none"},function(){});var Gk={};Qd.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:n(kb.toolbox.brush.title)};var Wk=Qd.prototype;Wk.render=Wk.updateView=function(t,e,n){var r,i,a;e.eachComponent({mainType:"brush"},function(t){r=t.brushType,i=t.brushOption.brushMode||"single",a|=t.areas.length}),this._brushType=r,this._brushMode=i,f(t.get("type",!0),function(e){t.setIconStatus(e,("keep"===e?"multiple"===i:"clear"===e?a:e===r)?"emphasis":"normal")})},Wk.getIcons=function(){var t=this.model,e=t.get("icon",!0),n={};return f(t.get("type",!0),function(t){e[t]&&(n[t]=e[t])}),n},Wk.onclick=function(t,e,n){var r=this._brushType,i=this._brushMode;"clear"===n?(e.dispatchAction({type:"axisAreaSelect",intervals:[]}),e.dispatchAction({type:"brush",command:"clear",areas:[]})):e.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?r:r!==n&&n,brushMode:"keep"===n?"multiple"===i?"single":"multiple":i}})},$d("brush",Qd),oo(function(t,e){var n=t&&t.brush;if(y(n)||(n=n?[n]:[]),n.length){var r=[];f(n,function(t){var e=t.hasOwnProperty("toolbox")?t.toolbox:[];e instanceof Array&&(r=r.concat(e))});var i=t&&t.toolbox;y(i)&&(i=i[0]),i||(t.toolbox=[i={feature:{}}]);var a=i.feature||(i.feature={}),o=a.brush||(a.brush={}),s=o.type||(o.type=[]);s.push.apply(s,r),function(t){var e={};f(t,function(t){e[t]=1}),t.length=0,f(e,function(e,n){t.push(n)})}(s),e&&!s.length&&s.push.apply(s,Tk)}}),Kd.prototype={constructor:Kd,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(t){var e=(t=ni(t)).getFullYear(),n=t.getMonth()+1;n=n<10?"0"+n:n;var r=t.getDate();r=r<10?"0"+r:r;var i=t.getDay();return{y:e,m:n,d:r,day:i=Math.abs((i+7-this.getFirstDayOfWeek())%7),time:t.getTime(),formatedDate:e+"-"+n+"-"+r,date:t}},getNextNDay:function(t,e){return 0===(e=e||0)?this.getDateInfo(t):((t=new Date(this.getDateInfo(t).time)).setDate(t.getDate()+e),this.getDateInfo(t))},update:function(t,e){function n(t,e){return null!=t[e]&&"auto"!==t[e]}this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1,i=["width","height"],a=this._model.get("cellSize").slice(),o=this._model.getBoxLayoutParams(),s="horizontal"===this._orient?[r,7]:[7,r];f([0,1],function(t){n(a,t)&&(o[i[t]]=a[t]*s[t])});var u={width:e.getWidth(),height:e.getHeight()},l=this._rect=yi(o,u);f([0,1],function(t){n(a,t)||(a[t]=l[i[t]]/s[t])}),this._sw=a[0],this._sh=a[1]},dataToPoint:function(t,e){y(t)&&(t=t[0]),null==e&&(e=!0);var n=this.getDateInfo(t),r=this._rangeInfo,i=n.formatedDate;if(e&&!(n.time>=r.start.time&&n.time<r.end.time+864e5))return[NaN,NaN];var a=n.day,o=this._getRangeInfo([r.start.time,i]).nthWeek;return"vertical"===this._orient?[this._rect.x+a*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]:[this._rect.x+o*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]},pointToData:function(t){var e=this.pointToDate(t);return e&&e.time},dataToRect:function(t,e){var n=this.dataToPoint(t,e);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},pointToDate:function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,n=Math.floor((t[1]-this._rect.y)/this._sh)+1,r=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,e-1,r):this._getDateByWeeksAndDay(e,n-1,r)},convertToPixel:m(Jd,"dataToPoint"),convertFromPixel:m(Jd,"pointToData"),_initRangeOption:function(){var t=this._model.get("range"),e=t;if(y(e)&&1===e.length&&(e=e[0]),/^\d{4}$/.test(e)&&(t=[e+"-01-01",e+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(e)){var n=this.getDateInfo(e),r=n.date;r.setMonth(r.getMonth()+1);var i=this.getNextNDay(r,-1);t=[n.formatedDate,i.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(e)&&(t=[e,e]);var a=this._getRangeInfo(t);return a.start.time>a.end.time&&t.reverse(),t},_getRangeInfo:function(t){var e;(t=[this.getDateInfo(t[0]),this.getDateInfo(t[1])])[0].time>t[1].time&&(e=!0,t.reverse());var n=Math.floor(t[1].time/864e5)-Math.floor(t[0].time/864e5)+1,r=new Date(t[0].time),i=r.getDate(),a=t[1].date.getDate();if(r.setDate(i+n-1),r.getDate()!==a)for(var o=r.getTime()-t[1].time>0?1:-1;r.getDate()!==a&&(r.getTime()-t[1].time)*o>0;)r.setDate(i+(n-=o)-1);var s=Math.floor((n+t[0].day+6)/7),u=e?1-s:s-1;return e&&t.reverse(),{range:[t[0].formatedDate,t[1].formatedDate],start:t[0],end:t[1],allDay:n,weeks:s,nthWeek:u,fweek:t[0].day,lweek:t[1].day}},_getDateByWeeksAndDay:function(t,e,n){var r=this._getRangeInfo(n);if(t>r.weeks||0===t&&e<r.fweek||t===r.weeks&&e>r.lweek)return!1;var i=7*(t-1)-r.fweek+e,a=new Date(r.start.time);return a.setDate(r.start.d+i),this.getDateInfo(a)}},Kd.dimensions=Kd.prototype.dimensions,Kd.getDimensionsInfo=Kd.prototype.getDimensionsInfo,Kd.create=function(t,e){var n=[];return t.eachComponent("calendar",function(r){var i=new Kd(r,t,e);n.push(i),r.coordinateSystem=i}),t.eachSeries(function(t){"calendar"===t.get("coordinateSystem")&&(t.coordinateSystem=n[t.get("calendarIndex")||0])}),n},ji.register("calendar",Kd);var qk=A_.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(t,e,n,r){var i=xi(t);qk.superApply(this,"init",arguments),tp(t,i)},mergeOption:function(t,e){qk.superApply(this,"mergeOption",arguments),tp(this.option,t)}}),Yk={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]},Xk={EN:["S","M","T","W","T","F","S"],CN:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]};vo({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(t,e,n){var r=this.group;r.removeAll();var i=t.coordinateSystem,a=i.getRangeInfo(),o=i.getOrient();this._renderDayRect(t,a,r),this._renderLines(t,a,o,r),this._renderYearText(t,a,o,r),this._renderMonthText(t,o,r),this._renderWeekText(t,a,o,r)},_renderDayRect:function(t,e,n){for(var r=t.coordinateSystem,i=t.getModel("itemStyle").getItemStyle(),a=r.getCellWidth(),o=r.getCellHeight(),s=e.start.time;s<=e.end.time;s=r.getNextNDay(s,1).time){var u=r.dataToRect([s],!1).tl,l=new Vy({shape:{x:u[0],y:u[1],width:a,height:o},cursor:"default",style:i});n.add(l)}},_renderLines:function(t,e,n,r){function i(e){a._firstDayOfMonth.push(o.getDateInfo(e)),a._firstDayPoints.push(o.dataToRect([e],!1).tl);var i=a._getLinePointsOfOneWeek(t,e,n);a._tlpoints.push(i[0]),a._blpoints.push(i[i.length-1]),u&&a._drawSplitline(i,s,r)}var a=this,o=t.coordinateSystem,s=t.getModel("splitLine.lineStyle").getLineStyle(),u=t.get("splitLine.show"),l=s.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var c=e.start,h=0;c.time<=e.end.time;h++){i(c.formatedDate),0===h&&(c=o.getDateInfo(e.start.y+"-"+e.start.m));var f=c.date;f.setMonth(f.getMonth()+1),c=o.getDateInfo(f)}i(o.getNextNDay(e.end.time,1).formatedDate),u&&this._drawSplitline(a._getEdgesPoints(a._tlpoints,l,n),s,r),u&&this._drawSplitline(a._getEdgesPoints(a._blpoints,l,n),s,r)},_getEdgesPoints:function(t,e,n){var r=[t[0].slice(),t[t.length-1].slice()],i="horizontal"===n?0:1;return r[0][i]=r[0][i]-e/2,r[1][i]=r[1][i]+e/2,r},_drawSplitline:function(t,e,n){var r=new zy({z2:20,shape:{points:t},style:e});n.add(r)},_getLinePointsOfOneWeek:function(t,e,n){var r=t.coordinateSystem;e=r.getDateInfo(e);for(var i=[],a=0;a<7;a++){var o=r.getNextNDay(e.time,a),s=r.dataToRect([o.time],!1);i[2*o.day]=s.tl,i[2*o.day+1]=s["horizontal"===n?"bl":"tr"]}return i},_formatterLabel:function(t,e){return"string"==typeof t&&t?fi(t,e):"function"==typeof t?t(e):e.nameMap},_yearTextPositionControl:function(t,e,n,r,i){e=e.slice();var a=["center","bottom"];"bottom"===r?(e[1]+=i,a=["center","top"]):"left"===r?e[0]-=i:"right"===r?(e[0]+=i,a=["center","top"]):e[1]-=i;var o=0;return"left"!==r&&"right"!==r||(o=Math.PI/2),{rotation:o,position:e,style:{textAlign:a[0],textVerticalAlign:a[1]}}},_renderYearText:function(t,e,n,r){var i=t.getModel("yearLabel");if(i.get("show")){var a=i.get("margin"),o=i.get("position");o||(o="horizontal"!==n?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],u=(s[0][0]+s[1][0])/2,l=(s[0][1]+s[1][1])/2,c="horizontal"===n?0:1,h={top:[u,s[c][1]],bottom:[u,s[1-c][1]],left:[s[1-c][0],l],right:[s[c][0],l]},f=e.start.y;+e.end.y>+e.start.y&&(f=f+"-"+e.end.y);var d=i.get("formatter"),p=this._formatterLabel(d,{start:e.start.y,end:e.end.y,nameMap:f}),g=new Py({z2:30});Mr(g.style,i,{text:p}),g.attr(this._yearTextPositionControl(g,h[o],n,o,a)),r.add(g)}},_monthTextPositionControl:function(t,e,n,r,i){var a="left",o="top",s=t[0],u=t[1];return"horizontal"===n?(u+=i,e&&(a="center"),"start"===r&&(o="bottom")):(s+=i,e&&(o="middle"),"start"===r&&(a="right")),{x:s,y:u,textAlign:a,textVerticalAlign:o}},_renderMonthText:function(t,e,n){var r=t.getModel("monthLabel");if(r.get("show")){var i=r.get("nameMap"),o=r.get("margin"),s=r.get("position"),u=r.get("align"),l=[this._tlpoints,this._blpoints];b(i)&&(i=Yk[i.toUpperCase()]||[]);var c="start"===s?0:1,h="horizontal"===e?0:1;o="start"===s?-o:o;for(var f="center"===u,d=0;d<l[c].length-1;d++){var p=l[c][d].slice(),g=this._firstDayOfMonth[d];f&&(p[h]=(this._firstDayPoints[d][h]+l[0][d+1][h])/2);var v=r.get("formatter"),m=i[+g.m-1],y={yyyy:g.y,yy:(g.y+"").slice(2),MM:g.m,M:+g.m,nameMap:m},_=this._formatterLabel(v,y),x=new Py({z2:30});a(Mr(x.style,r,{text:_}),this._monthTextPositionControl(p,f,e,s,o)),n.add(x)}}},_weekTextPositionControl:function(t,e,n,r,i){var a="center",o="middle",s=t[0],u=t[1],l="start"===n;return"horizontal"===e?(s=s+r+(l?1:-1)*i[0]/2,a=l?"right":"left"):(u=u+r+(l?1:-1)*i[1]/2,o=l?"bottom":"top"),{x:s,y:u,textAlign:a,textVerticalAlign:o}},_renderWeekText:function(t,e,n,r){var i=t.getModel("dayLabel");if(i.get("show")){var o=t.coordinateSystem,s=i.get("position"),u=i.get("nameMap"),l=i.get("margin"),c=o.getFirstDayOfWeek();b(u)&&(u=Xk[u.toUpperCase()]||[]);var h=o.getNextNDay(e.end.time,7-e.lweek).time,f=[o.getCellWidth(),o.getCellHeight()];l=Yr(l,f["horizontal"===n?0:1]),"start"===s&&(h=o.getNextNDay(e.start.time,-(7+e.fweek)).time,l=-l);for(var d=0;d<7;d++){var p,g=o.getNextNDay(h,d),v=o.dataToRect([g.time],!1).center;p=Math.abs((d+c)%7);var m=new Py({z2:30});a(Mr(m.style,i,{text:u[p]}),this._weekTextPositionControl(v,n,s,l,f)),r.add(m)}}}}),go({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),vo({type:"title",render:function(t,e,n){if(this.group.removeAll(),t.get("show")){var r=this.group,i=t.getModel("textStyle"),a=t.getModel("subtextStyle"),o=t.get("textAlign"),s=t.get("textBaseline"),u=new Py({style:Mr({},i,{text:t.get("text"),textFill:i.getTextColor()},{disableBox:!0}),z2:10}),l=u.getBoundingRect(),c=t.get("subtext"),h=new Py({style:Mr({},a,{text:c,textFill:a.getTextColor(),y:l.height+t.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),f=t.get("link"),d=t.get("sublink"),p=t.get("triggerEvent",!0);u.silent=!f&&!p,h.silent=!d&&!p,f&&u.on("click",function(){window.open(f,"_"+t.get("target"))}),d&&h.on("click",function(){window.open(d,"_"+t.get("subtarget"))}),u.eventData=h.eventData=p?{componentType:"title",componentIndex:t.componentIndex}:null,r.add(u),c&&r.add(h);var g=r.getBoundingRect(),v=t.getBoxLayoutParams();v.width=g.width,v.height=g.height;var m=yi(v,{width:n.getWidth(),height:n.getHeight()},t.get("padding"));o||("middle"===(o=t.get("left")||t.get("right"))&&(o="center"),"right"===o?m.x+=m.width:"center"===o&&(m.x+=m.width/2)),s||("center"===(s=t.get("top")||t.get("bottom"))&&(s="middle"),"bottom"===s?m.y+=m.height:"middle"===s&&(m.y+=m.height/2),s=s||"top"),r.attr("position",[m.x,m.y]);var y={textAlign:o,textVerticalAlign:s};u.setStyle(y),h.setStyle(y),g=r.getBoundingRect();var _=m.margin,b=t.getItemStyle(["color","opacity"]);b.fill=t.get("backgroundColor");var x=new Vy({shape:{x:g.x-_[3],y:g.y-_[0],width:g.width+_[1]+_[3],height:g.height+_[0]+_[2],r:t.get("borderRadius")},style:b,silent:!0});cr(x),r.add(x)}}}),A_.registerSubTypeDefaulter("dataZoom",function(){return"slider"});var $k=["cartesian2d","polar","singleAxis"],Zk=function(t,e){var n=d(t=t.slice(),vi),r=d(e=(e||[]).slice(),vi);return function(i,a){f(t,function(t,o){for(var s={name:t,capital:n[o]},u=0;u<e.length;u++)s[e[u]]=t+r[u];i.call(a,s)})}}(["x","y","z","radius","angle","single"],["axisIndex","axis","index","id"]),Qk=f,Kk=$r,Jk=function(t,e,n,r){this._dimName=t,this._axisIndex=e,this.ecModel=r,this._dataZoomModel=n};Jk.prototype={constructor:Jk,hostedBy:function(t){return this._dataZoomModel===t},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var t=[],e=this.ecModel;return e.eachSeries(function(n){if(function(t){return u($k,t)>=0}(n.get("coordinateSystem"))){var r=this._dimName,i=e.queryComponents({mainType:r+"Axis",index:n.get(r+"AxisIndex"),id:n.get(r+"AxisId")})[0];this._axisIndex===(i&&i.componentIndex)&&t.push(n)}},this),t},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var t,e,n,r=this._dimName,i=this.ecModel,a=this.getAxisModel();return"x"===r||"y"===r?(e="gridIndex",t="x"===r?"y":"x"):(e="polarIndex",t="angle"===r?"radius":"angle"),i.eachComponent(t+"Axis",function(t){(t.get(e)||0)===(a.get(e)||0)&&(n=t)}),n},getMinMaxSpan:function(){return n(this._minMaxSpan)},calculateDataWindow:function(t){var e=this._dataExtent,n=this.getAxisModel().axis.scale,r=this._dataZoomModel.getRangePropMode(),i=[0,100],a=[t.start,t.end],o=[];return Qk(["startValue","endValue"],function(e){o.push(null!=t[e]?n.parse(t[e]):null)}),Qk([0,1],function(t){var s=o[t],u=a[t];"percent"===r[t]?(null==u&&(u=i[t]),s=n.parse(qr(u,i,e,!0))):u=qr(s,e,i,!0),o[t]=s,a[t]=u}),{valueWindow:Kk(o),percentWindow:Kk(a)}},reset:function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=function(t,e,n){var r=[1/0,-1/0];return Qk(n,function(t){var n=t.getData();n&&Qk(n.mapDimension(e,!0),function(t){var e=n.getApproximateExtent(t);e[0]<r[0]&&(r[0]=e[0]),e[1]>r[1]&&(r[1]=e[1])})}),r[1]<r[0]&&(r=[NaN,NaN]),function(t,e){var n=t.getAxisModel(),r=n.getMin(!0),i="category"===n.get("type"),a=i&&n.getCategories().length;null!=r&&"dataMin"!==r&&"function"!=typeof r?e[0]=r:i&&(e[0]=a>0?0:NaN);var o=n.getMax(!0);null!=o&&"dataMax"!==o&&"function"!=typeof o?e[1]=o:i&&(e[1]=a>0?a-1:NaN),n.get("scale",!0)||(e[0]>0&&(e[0]=0),e[1]<0&&(e[1]=0))}(t,r),r}(this,this._dimName,e);var n=this.calculateDataWindow(t.option);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,function(t){var e=t._minMaxSpan={},n=t._dataZoomModel;Qk(["min","max"],function(r){e[r+"Span"]=n.get(r+"Span");var i=n.get(r+"ValueSpan");if(null!=i&&(e[r+"ValueSpan"]=i,null!=(i=t.getAxisModel().axis.scale.parse(i)))){var a=t._dataExtent;e[r+"Span"]=qr(a[0]+i,a,[0,100],!0)}})}(this),ep(this)}},restore:function(t){t===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,ep(this,!0))},filterData:function(t,e){if(t===this._dataZoomModel){var n=this._dimName,r=this.getTargetSeriesModels(),i=t.get("filterMode"),a=this._valueWindow;"none"!==i&&Qk(r,function(t){var e=t.getData(),r=e.mapDimension(n,!0);r.length&&("weakFilter"===i?e.filterSelf(function(t){for(var n,i,o,s=0;s<r.length;s++){var u=e.get(r[s],t),l=!isNaN(u),c=u<a[0],h=u>a[1];if(l&&!c&&!h)return!0;l&&(o=!0),c&&(n=!0),h&&(i=!0)}return o&&n&&i}):Qk(r,function(n){if("empty"===i)t.setData(e.map(n,function(t){return function(t){return t>=a[0]&&t<=a[1]}(t)?t:NaN}));else{var r={};r[n]=a,e.selectRange(r)}}),Qk(r,function(t){e.setApproximateExtent(a,t)}))})}}};var tC=f,eC=Zk,nC=go({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(t,e,n){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var r=np(t);this.mergeDefaultAndTheme(t,n),this.doInit(r)},mergeOption:function(t){var e=np(t);r(this.option,t,!0),this.doInit(e)},doInit:function(t){var e=this.option;Mg.canvasSupported||(e.realtime=!1),this._setDefaultThrottle(t),rp(this,t),tC([["start","startValue"],["end","endValue"]],function(t,n){"value"===this._rangePropMode[n]&&(e[t[0]]=null)},this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var t=this._axisProxies;this.eachTargetAxis(function(e,n,r,i){var a=this.dependentModels[e.axis][n],o=a.__dzAxisProxy||(a.__dzAxisProxy=new Jk(e.name,n,this,i));t[e.name+"_"+n]=o},this)},_resetTarget:function(){var t=this.option,e=this._judgeAutoMode();eC(function(e){var n=e.axisIndex;t[n]=an(t[n])},this),"axisIndex"===e?this._autoSetAxisIndex():"orient"===e&&this._autoSetOrient()},_judgeAutoMode:function(){var t=this.option,e=!1;eC(function(n){null!=t[n.axisIndex]&&(e=!0)},this);var n=t.orient;return null==n&&e?"orient":e?void 0:(null==n&&(t.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var t=!0,e=this.get("orient",!0),n=this.option,r=this.dependentModels;if(t){var i="vertical"===e?"y":"x";r[i+"Axis"].length?(n[i+"AxisIndex"]=[0],t=!1):tC(r.singleAxis,function(r){t&&r.get("orient",!0)===e&&(n.singleAxisIndex=[r.componentIndex],t=!1)})}t&&eC(function(e){if(t){var r=[],i=this.dependentModels[e.axis];if(i.length&&!r.length)for(var a=0,o=i.length;a<o;a++)"category"===i[a].get("type")&&r.push(a);n[e.axisIndex]=r,r.length&&(t=!1)}},this),t&&this.ecModel.eachSeries(function(t){this._isSeriesHasAllAxesTypeOf(t,"value")&&eC(function(e){var r=n[e.axisIndex],i=t.get(e.axisIndex),a=t.get(e.axisId);u(r,i=t.ecModel.queryComponents({mainType:e.axis,index:i,id:a})[0].componentIndex)<0&&r.push(i)})},this)},_autoSetOrient:function(){var t;this.eachTargetAxis(function(e){!t&&(t=e.name)},this),this.option.orient="y"===t?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(t,e){var n=!0;return eC(function(r){var i=t.get(r.axisIndex),a=this.dependentModels[r.axis][i];a&&a.get("type")===e||(n=!1)},this),n},_setDefaultThrottle:function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},getFirstTargetAxisModel:function(){var t;return eC(function(e){if(null==t){var n=this.get(e.axisIndex);n.length&&(t=this.dependentModels[e.axis][n[0]])}},this),t},eachTargetAxis:function(t,e){var n=this.ecModel;eC(function(r){tC(this.get(r.axisIndex),function(i){t.call(e,r,i,this,n)},this)},this)},getAxisProxy:function(t,e){return this._axisProxies[t+"_"+e]},getAxisModel:function(t,e){var n=this.getAxisProxy(t,e);return n&&n.getAxisModel()},setRawRange:function(t,e){var n=this.option;tC([["start","startValue"],["end","endValue"]],function(e){null==t[e[0]]&&null==t[e[1]]||(n[e[0]]=t[e[0]],n[e[1]]=t[e[1]])},this),!e&&rp(this,t)},getPercentRange:function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},getValueRange:function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(t){if(t)return t.__dzAxisProxy;var e=this._axisProxies;for(var n in e)if(e.hasOwnProperty(n)&&e[n].hostedBy(this))return e[n];for(var n in e)if(e.hasOwnProperty(n)&&!e[n].hostedBy(this))return e[n]},getRangePropMode:function(){return this._rangePropMode.slice()}}),rC=vb.extend({type:"dataZoom",render:function(t,e,n,r){this.dataZoomModel=t,this.ecModel=e,this.api=n},getTargetCoordInfo:function(){var t=this.ecModel,e={};return this.dataZoomModel.eachTargetAxis(function(n,r){var i=t.getComponent(n.axis,r);if(i){var a=i.getCoordSysModel();a&&function(t,e,n,r){for(var i,a=0;a<n.length;a++)if(n[a].model===t){i=n[a];break}i||n.push(i={model:t,axisModels:[],coordIndex:r}),i.axisModels.push(e)}(a,i,e[a.mainType]||(e[a.mainType]=[]),a.componentIndex)}},this),e}}),iC=(nC.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}}),Vy),aC=qr,oC=$r,sC=v,uC=f,lC="horizontal",cC=5,hC=["line","bar","candlestick","scatter"],fC=rC.extend({type:"dataZoom.slider",init:function(t,e){this._displayables={},this.api=e},render:function(t,e,n,r){fC.superApply(this,"render",arguments),ya(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=t.get("orient"),!1!==this.dataZoomModel.get("show")?(r&&"dataZoom"===r.type&&r.from===this.uid||this._buildView(),this._updateView()):this.group.removeAll()},remove:function(){fC.superApply(this,"remove",arguments),_a(this,"_dispatchZoomAction")},dispose:function(){fC.superApply(this,"dispose",arguments),_a(this,"_dispatchZoomAction")},_buildView:function(){var t=this.group;t.removeAll(),this._resetLocation(),this._resetInterval();var e=this._displayables.barGroup=new kv;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},_resetLocation:function(){var t=this.dataZoomModel,e=this.api,n=this._findCoordRect(),r={width:e.getWidth(),height:e.getHeight()},i=this._orient===lC?{right:r.width-n.x-n.width,top:r.height-30-7,width:n.width,height:30}:{right:7,top:n.y,width:30,height:n.height},a=xi(t.option);f(["right","top","width","height"],function(t){"ph"===a[t]&&(a[t]=i[t])});var o=yi(a,r,t.padding);this._location={x:o.x,y:o.y},this._size=[o.width,o.height],"vertical"===this._orient&&this._size.reverse()},_positionGroup:function(){var t=this.group,e=this._location,n=this._orient,r=this.dataZoomModel.getFirstTargetAxisModel(),i=r&&r.get("inverse"),a=this._displayables.barGroup,o=(this._dataShadowInfo||{}).otherAxisInverse;a.attr(n!==lC||i?n===lC&&i?{scale:o?[-1,1]:[-1,-1]}:"vertical"!==n||i?{scale:o?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:o?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:o?[1,1]:[1,-1]});var s=t.getBoundingRect([a]);t.attr("position",[e.x-s.x,e.y-s.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var t=this._size,e=this._displayables.barGroup;e.add(new iC({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:this.dataZoomModel.get("backgroundColor")},z2:-40})),e.add(new iC({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:v(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(t){var e=this._size,n=t.series,r=n.getRawData(),i=n.getShadowDim?n.getShadowDim():t.otherDim;if(null!=i){var a=r.getDataExtent(i),s=.3*(a[1]-a[0]);a=[a[0]-s,a[1]+s];var u,l=[0,e[1]],c=[[e[0],0],[0,0]],h=[],f=e[0]/(r.count()-1),d=0,p=Math.round(r.count()/e[0]);r.each([i],function(t,e){if(p>0&&e%p)d+=f;else{var n=null==t||isNaN(t)||""===t,r=n?0:aC(t,a,l,!0);n&&!u&&e?(c.push([c[c.length-1][0],0]),h.push([h[h.length-1][0],0])):!n&&u&&(c.push([d,0]),h.push([d,0])),c.push([d,r]),h.push([d,r]),d+=f,u=n}});var g=this.dataZoomModel;this._displayables.barGroup.add(new Uy({shape:{points:c},style:o({fill:g.get("dataBackgroundColor")},g.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new zy({shape:{points:h},style:g.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(!1!==e){var n,r=this.ecModel;return t.eachTargetAxis(function(i,a){f(t.getAxisProxy(i.name,a).getTargetSeriesModels(),function(t){if(!(n||!0!==e&&u(hC,t.get("type"))<0)){var o,s=r.getComponent(i.axis,a).axis,l={x:"y",y:"x",radius:"angle",angle:"radius"}[i.name],c=t.coordinateSystem;null!=l&&c.getOtherAxis&&(o=c.getOtherAxis(s).inverse),l=t.getData().mapDimension(l),n={thisAxis:s,series:t,thisDim:i.name,otherDim:l,otherAxisInverse:o}}},this)},this),n}},_renderHandle:function(){var t=this._displayables,e=t.handles=[],n=t.handleLabels=[],r=this._displayables.barGroup,i=this._size,a=this.dataZoomModel;r.add(t.filler=new iC({draggable:!0,cursor:ip(this._orient),drift:sC(this._onDragMove,this,"all"),onmousemove:function(t){$g(t.event)},ondragstart:sC(this._showDataInfo,this,!0),ondragend:sC(this._onDragEnd,this),onmouseover:sC(this._showDataInfo,this,!0),onmouseout:sC(this._showDataInfo,this,!1),style:{fill:a.get("fillerColor"),textPosition:"inside"}})),r.add(new iC(cr({silent:!0,shape:{x:0,y:0,width:i[0],height:i[1]},style:{stroke:a.get("dataBackgroundColor")||a.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}}))),uC([0,1],function(t){var i=zr(a.get("handleIcon"),{cursor:ip(this._orient),draggable:!0,drift:sC(this._onDragMove,this,t),onmousemove:function(t){$g(t.event)},ondragend:sC(this._onDragEnd,this),onmouseover:sC(this._showDataInfo,this,!0),onmouseout:sC(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),o=i.getBoundingRect();this._handleHeight=Yr(a.get("handleSize"),this._size[1]),this._handleWidth=o.width/o.height*this._handleHeight,i.setStyle(a.getModel("handleStyle").getItemStyle());var s=a.get("handleColor");null!=s&&(i.style.fill=s),r.add(e[t]=i);var u=a.textStyleModel;this.group.add(n[t]=new Py({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:u.getTextColor(),textFont:u.getFont()},z2:10}))},this)},_resetInterval:function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[aC(t[0],[0,100],e,!0),aC(t[1],[0,100],e,!0)]},_updateInterval:function(t,e){var n=this.dataZoomModel,r=this._handleEnds,i=this._getViewExtent(),a=n.findRepresentativeAxisProxy().getMinMaxSpan(),o=[0,100];aO(e,r,i,n.get("zoomLock")?"all":t,null!=a.minSpan?aC(a.minSpan,o,i,!0):null,null!=a.maxSpan?aC(a.maxSpan,o,i,!0):null);var s=this._range,u=this._range=oC([aC(r[0],i,o,!0),aC(r[1],i,o,!0)]);return!s||s[0]!==u[0]||s[1]!==u[1]},_updateView:function(t){var e=this._displayables,n=this._handleEnds,r=oC(n.slice()),i=this._size;uC([0,1],function(t){var r=this._handleHeight;e.handles[t].attr({scale:[r/2,r/2],position:[n[t],i[1]/2-r/2]})},this),e.filler.setShape({x:r[0],y:0,width:r[1]-r[0],height:i[1]}),this._updateDataInfo(t)},_updateDataInfo:function(t){function e(t){var e=Rr(r.handles[t].parent,this.group),n=Br(0===t?"right":"left",e),s=this._handleWidth/2+cC,u=Nr([h[t]+(0===t?-s:s),this._size[1]/2],e);i[t].setStyle({x:u[0],y:u[1],textVerticalAlign:a===lC?"middle":n,textAlign:a===lC?n:"center",text:o[t]})}var n=this.dataZoomModel,r=this._displayables,i=r.handleLabels,a=this._orient,o=["",""];if(n.get("showDetail")){var s=n.findRepresentativeAxisProxy();if(s){var u=s.getAxisModel().axis,l=this._range,c=t?s.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:s.getDataValueWindow();o=[this._formatLabel(c[0],u),this._formatLabel(c[1],u)]}}var h=oC(this._handleEnds.slice());e.call(this,0),e.call(this,1)},_formatLabel:function(t,e){var n=this.dataZoomModel,r=n.get("labelFormatter"),i=n.get("labelPrecision");null!=i&&"auto"!==i||(i=e.getPixelPrecision());var a=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel(Math.round(t)):t.toFixed(Math.min(i,20));return _(r)?r(t,a):b(r)?r.replace("{value}",a):a},_showDataInfo:function(t){var e=this._displayables.handleLabels;e[0].attr("invisible",!(t=this._dragging||t)),e[1].attr("invisible",!t)},_onDragMove:function(t,e,n){this._dragging=!0;var r=Nr([e,n],this._displayables.barGroup.getLocalTransform(),!0),i=this._updateInterval(t,r[0]),a=this.dataZoomModel.get("realtime");this._updateView(!a),i&&a&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction()},_onClickPanelClick:function(t){var e=this._size,n=this._displayables.barGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>e[0]||n[1]<0||n[1]>e[1])){var r=this._handleEnds,i=this._updateInterval("all",n[0]-(r[0]+r[1])/2);this._updateView(),i&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var t=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:t[0],end:t[1]})},_findCoordRect:function(){var t;if(uC(this.getTargetCoordInfo(),function(e){if(!t&&e.length){var n=e[0].model.coordinateSystem;t=n.getRect&&n.getRect()}}),!t){var e=this.api.getWidth(),n=this.api.getHeight();t={x:.2*e,y:.2*n,width:.6*e,height:.6*n}}return t}});nC.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}});var dC="\0_ec_dataZoom_roams",pC=v,gC=rC.extend({type:"dataZoom.inside",init:function(t,e){},render:function(t,e,n,r){gC.superApply(this,"render",arguments),this._range=t.getPercentRange(),f(this.getTargetCoordInfo(),function(e,r){var i=d(e,function(t){return ap(t.model)});f(e,function(e){var a=e.model,o={};f(["pan","zoom","scrollMove"],function(t){o[t]=pC(vC[t],this,e,r)},this),function(t,e){var n=op(t),r=e.dataZoomId,i=e.coordId;f(n,function(t,n){var a=t.dataZoomInfos;a[r]&&u(e.allCoordIds,i)<0&&(delete a[r],t.count--)}),sp(n);var a=n[i];a||((a=n[i]={coordId:i,dataZoomInfos:{},count:0}).controller=function(t,e){var n=new Vu(t.getZr());return f(["pan","zoom","scrollMove"],function(t){n.on(t,function(n){var r=[];f(e.dataZoomInfos,function(i){if(n.isAvailableBehavior(i.dataZoomModel.option)){var a=(i.getRange||{})[t],o=a&&a(e.controller,n);!i.dataZoomModel.get("disabled",!0)&&o&&r.push({dataZoomId:i.dataZoomId,start:o[0],end:o[1]})}}),r.length&&e.dispatchAction(r)})}),n}(t,a),a.dispatchAction=m(up,t)),!a.dataZoomInfos[r]&&a.count++,a.dataZoomInfos[r]=e;var o=function(t){var e,n={type_true:2,type_move:1,type_false:0,type_undefined:-1},r=!0;return f(a.dataZoomInfos,function(t){var i=t.dataZoomModel,a=!i.get("disabled",!0)&&(!i.get("zoomLock",!0)||"move");n["type_"+a]>n["type_"+e]&&(e=a),r&=i.get("preventDefaultMouseMove",!0)}),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!r}}}();a.controller.enable(o.controlType,o.opt),a.controller.setPointerChecker(e.containsPoint),ya(a,"dispatchAction",e.dataZoomModel.get("throttle",!0),"fixRate")}(n,{coordId:ap(a),allCoordIds:i,containsPoint:function(t,e,n){return a.coordinateSystem.containPoint([e,n])},dataZoomId:t.id,dataZoomModel:t,getRange:o})},this)},this)},dispose:function(){var t,e;t=this.dataZoomModel.id,f(e=op(this.api),function(e){e.controller.dispose();var n=e.dataZoomInfos;n[t]&&(delete n[t],e.count--)}),sp(e),gC.superApply(this,"dispose",arguments),this._range=null}}),vC={zoom:function(t,e,n,r){var i=this._range,a=i.slice(),o=t.axisModels[0];if(o){var s=mC[e](null,[r.originX,r.originY],o,n,t),u=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(a[1]-a[0])+a[0],l=Math.max(1/r.scale,0);a[0]=(a[0]-u)*l+u,a[1]=(a[1]-u)*l+u;var c=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return aO(0,a,[0,100],0,c.minSpan,c.maxSpan),this._range=a,i[0]!==a[0]||i[1]!==a[1]?a:void 0}},pan:lp(function(t,e,n,r,i,a){var o=mC[r]([a.oldX,a.oldY],[a.newX,a.newY],e,i,n);return o.signal*(t[1]-t[0])*o.pixel/o.pixelLength}),scrollMove:lp(function(t,e,n,r,i,a){return mC[r]([0,0],[a.scrollDelta,a.scrollDelta],e,i,n).signal*(t[1]-t[0])*a.scrollDelta})},mC={grid:function(t,e,n,r,i){var a=n.axis,o={},s=i.model.coordinateSystem.getRect();return t=t||[0,0],"x"===a.dim?(o.pixel=e[0]-t[0],o.pixelLength=s.width,o.pixelStart=s.x,o.signal=a.inverse?1:-1):(o.pixel=e[1]-t[1],o.pixelLength=s.height,o.pixelStart=s.y,o.signal=a.inverse?-1:1),o},polar:function(t,e,n,r,i){var a=n.axis,o={},s=i.model.coordinateSystem,u=s.getRadiusAxis().getExtent(),l=s.getAngleAxis().getExtent();return t=t?s.pointToCoord(t):[0,0],e=s.pointToCoord(e),"radiusAxis"===n.mainType?(o.pixel=e[0]-t[0],o.pixelLength=u[1]-u[0],o.pixelStart=u[0],o.signal=a.inverse?1:-1):(o.pixel=e[1]-t[1],o.pixelLength=l[1]-l[0],o.pixelStart=l[0],o.signal=a.inverse?-1:1),o},singleAxis:function(t,e,n,r,i){var a=n.axis,o=i.model.coordinateSystem.getRect(),s={};return t=t||[0,0],"horizontal"===a.orient?(s.pixel=e[0]-t[0],s.pixelLength=o.width,s.pixelStart=o.x,s.signal=a.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=o.height,s.pixelStart=o.y,s.signal=a.inverse?-1:1),s}};so({getTargetSeries:function(t){var e=R();return t.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(t,n,r){f(r.getAxisProxy(t.name,n).getTargetSeriesModels(),function(t){e.set(t.uid,t)})})}),e},modifyOutputEnd:!0,overallReset:function(t,e){t.eachComponent("dataZoom",function(t){t.eachTargetAxis(function(t,n,r){r.getAxisProxy(t.name,n).reset(r,e)}),t.eachTargetAxis(function(t,n,r){r.getAxisProxy(t.name,n).filterData(r,e)})}),t.eachComponent("dataZoom",function(t){var e=t.findRepresentativeAxisProxy(),n=e.getDataPercentWindow(),r=e.getDataValueWindow();t.setRawRange({start:n[0],end:n[1],startValue:r[0],endValue:r[1]},!0)})}}),uo("dataZoom",function(t,e){var n=function(t,e,n){function r(t,e){return u(e.nodes,t)>=0}function i(t,r){var i=!1;return e(function(e){f(n(t,e)||[],function(t){r.records[e.name][t]&&(i=!0)})}),i}function a(t,r){r.nodes.push(t),e(function(e){f(n(t,e)||[],function(t){r.records[e.name][t]=!0})})}return function(n){var o,s={nodes:[],records:{}};if(e(function(t){s.records[t.name]={}}),!n)return s;a(n,s);do{o=!1,t(function(t){!r(t,s)&&i(t,s)&&(a(t,s),o=!0)})}while(o);return s}}(v(e.eachComponent,e,"dataZoom"),Zk,function(t,e){return t.get(e.axisIndex)}),r=[];e.eachComponent({mainType:"dataZoom",query:t},function(t,e){r.push.apply(r,n(t).nodes)}),f(r,function(e,n){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})})});var yC=f,_C=function(t){var e=t&&t.visualMap;y(e)||(e=e?[e]:[]),yC(e,function(t){if(t){cp(t,"splitList")&&!cp(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&y(e)&&yC(e,function(t){x(t)&&(cp(t,"start")&&!cp(t,"min")&&(t.min=t.start),cp(t,"end")&&!cp(t,"max")&&(t.max=t.end))})}})};A_.registerSubTypeDefaulter("visualMap",function(t){return t.categories||(t.pieces?t.pieces.length>0:t.splitNumber>0)&&!t.calculable?"piecewise":"continuous"});var bC=ax.VISUAL.COMPONENT;ho(bC,{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",function(e){var r=t.pipelineContext;!e.isTargetSeries(t)||r&&r.large||n.push(function(t,e,n,r){var i={};return f(t,function(t){var n=yT.prepareVisualTypes(e[t]);i[t]=n}),{progress:function(t,a){null!=r&&(r=a.getDimension(r));for(var o;null!=(o=t.next());){var s=a.getRawDataItem(o);if(s&&!1===s.visualMap)return;for(var u=null!=r?a.get(r,o,!0):o,l=n(u),c=e[l],h=i[l],f=0,d=h.length;f<d;f++){var p=h[f];c[p]&&c[p].applyVisual(u,function(t){return a.getItemVisual(o,t)},function(t,e){a.setItemVisual(o,t,e)})}}}}}(e.stateList,e.targetVisuals,v(e.getValueState,e),e.getDataDimension(t.getData())))}),n}}),ho(bC,{createOnAllSeries:!0,reset:function(t,e){var n=t.getData(),r=[];e.eachComponent("visualMap",function(e){if(e.isTargetSeries(t)){var i=e.getVisualMeta(v(hp,null,t,e))||{stops:[],outerColors:[]},a=e.getDataDimension(n),o=n.getDimensionInfo(a);null!=o&&(i.dimension=o.index,r.push(i))}}),t.getData().setVisual("visualMeta",r)}});var xC={get:function(t,e,r){var i=n((wC[t]||{})[e]);return r&&y(i)?i[i.length-1]:i}},wC={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},SC=yT.mapVisual,TC=yT.eachVisual,OC=y,MC=f,kC=$r,CC=qr,EC=go({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(t,e,n){this.targetVisuals={},this.controllerVisuals={},this.mergeDefaultAndTheme(t,n)},optionUpdated:function(t,e){var n=this.option;Mg.canvasSupported||(n.realtime=!1),!e&&Ad(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(t){var e=this.stateList;t=v(t,this),this.controllerVisuals=Ed(this.option.controller,e,t),this.targetVisuals=Ed(this.option.target,e,t)},getTargetSeriesIndices:function(){var t=this.option.seriesIndex,e=[];return null==t||"all"===t?this.ecModel.eachSeries(function(t,n){e.push(n)}):e=an(t),e},eachTargetSeries:function(t,e){f(this.getTargetSeriesIndices(),function(n){t.call(e,this.ecModel.getSeriesByIndex(n))},this)},isTargetSeries:function(t){var e=!1;return this.eachTargetSeries(function(n){n===t&&(e=!0)}),e},formatValueText:function(t,e,n){function r(t){return t===u[0]?"min":t===u[1]?"max":(+t).toFixed(Math.min(s,20))}var i,a,o=this.option,s=o.precision,u=this.dataBound,l=o.formatter;return n=n||["<",">"],y(t)&&(t=t.slice(),i=!0),a=e?t:i?[r(t[0]),r(t[1])]:r(t),b(l)?l.replace("{value}",i?a[0]:a).replace("{value2}",i?a[1]:a):_(l)?i?l(t[0],t[1]):l(t):i?t[0]===u[0]?n[0]+" "+a[1]:t[1]===u[1]?n[1]+" "+a[0]:a[0]+" - "+a[1]:a},resetExtent:function(){var t=this.option,e=kC([t.min,t.max]);this._dataExtent=e},getDataDimension:function(t){var e=this.option.dimension;if(null!=e||t.dimensions.length){if(null!=e)return t.getDimension(e);for(var n=t.dimensions,r=n.length-1;r>=0;r--){var i=n[r];if(!t.getDimensionInfo(i).isCalculationCoord)return i}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){function t(t){OC(i.color)&&!t.inRange&&(t.inRange={color:i.color.slice().reverse()}),t.inRange=t.inRange||{color:e.get("gradientColor")},MC(this.stateList,function(e){var n=t[e];if(b(n)){var r=xC.get(n,"active",u);r?(t[e]={},t[e][n]=r):delete t[e]}},this)}var e=this.ecModel,i=this.option,a={inRange:i.inRange,outOfRange:i.outOfRange},o=i.target||(i.target={}),s=i.controller||(i.controller={});r(o,a),r(s,a);var u=this.isCategory();t.call(this,o),t.call(this,s),(function(t,e,n){var r=t[e],i=t[n];r&&!i&&(i=t[n]={},MC(r,function(t,e){if(yT.isValidType(e)){var n=xC.get(e,"inactive",u);null!=n&&(i[e]=n,"color"!==e||i.hasOwnProperty("opacity")||i.hasOwnProperty("colorAlpha")||(i.opacity=[0,0]))}}))}).call(this,o,"inRange","outOfRange"),(function(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,r=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,i=this.get("inactiveColor");MC(this.stateList,function(a){var o=this.itemSize,s=t[a];s||(s=t[a]={color:u?i:[i]}),null==s.symbol&&(s.symbol=e&&n(e)||(u?"roundRect":["roundRect"])),null==s.symbolSize&&(s.symbolSize=r&&n(r)||(u?o[0]:[o[0],o[0]])),s.symbol=SC(s.symbol,function(t){return"none"===t||"square"===t?"roundRect":t});var l=s.symbolSize;if(null!=l){var c=-1/0;TC(l,function(t){t>c&&(c=t)}),s.symbolSize=SC(l,function(t){return CC(t,[0,c],[0,o[0]],!0)})}},this)}).call(this,s)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:B,getValueState:B,getVisualMeta:B}),AC=[20,140],IC=EC.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(t,e){IC.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual(function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()}),this._resetRange()},resetItemSize:function(){IC.superApply(this,"resetItemSize",arguments);var t=this.itemSize;"horizontal"===this._orient&&t.reverse(),(null==t[0]||isNaN(t[0]))&&(t[0]=AC[0]),(null==t[1]||isNaN(t[1]))&&(t[1]=AC[1])},_resetRange:function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):y(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},completeVisualOption:function(){EC.prototype.completeVisualOption.apply(this,arguments),f(this.stateList,function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=0)},this)},setSelected:function(t){this.option.range=t.slice(),this._resetRange()},getSelected:function(){var t=this.getExtent(),e=$r((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},getValueState:function(t){var e=this.option.range,n=this.getExtent();return(e[0]<=n[0]||e[0]<=t)&&(e[1]>=n[1]||t<=e[1])?"inRange":"outOfRange"},findTargetDataIndices:function(t){var e=[];return this.eachTargetSeries(function(n){var r=[],i=n.getData();i.each(this.getDataDimension(i),function(e,n){t[0]<=e&&e<=t[1]&&r.push(n)},this),e.push({seriesId:n.id,dataIndex:r})},this),e},getVisualMeta:function(t){function e(e,n){i.push({value:e,color:t(e,n)})}for(var n=fp(0,0,this.getExtent()),r=fp(0,0,this.option.range.slice()),i=[],a=0,o=0,s=r.length,u=n.length;o<u&&(!r.length||n[o]<=r[0]);o++)n[o]<r[a]&&e(n[o],"outOfRange");for(l=1;a<s;a++,l=0)l&&i.length&&e(r[a],"outOfRange"),e(r[a],"inRange");for(var l=1;o<u;o++)(!r.length||r[r.length-1]<n[o])&&(l&&(i.length&&e(i[i.length-1].value,"outOfRange"),l=0),e(n[o],"outOfRange"));var c=i.length;return{stops:i,outerColors:[c?i[0].color:"transparent",c?i[c-1].color:"transparent"]}}}),PC=vo({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(t,e){this.ecModel=t,this.api=e},render:function(t,e,n,r){this.visualMapModel=t,!1!==t.get("show")?this.doRender.apply(this,arguments):this.group.removeAll()},renderBackground:function(t){var e=this.visualMapModel,n=m_(e.get("padding")||0),r=t.getBoundingRect();t.add(new Vy({z2:-1,silent:!0,shape:{x:r.x-n[3],y:r.y-n[0],width:r.width+n[3]+n[1],height:r.height+n[0]+n[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},getControllerVisual:function(t,e,n){function r(t){return s[t]}function i(t,e){s[t]=e}var a=(n=n||{}).forceState,o=this.visualMapModel,s={};if("symbol"===e&&(s.symbol=o.get("itemSymbol")),"color"===e){var u=o.get("contentColor");s.color=u}var l=o.controllerVisuals[a||o.getValueState(t)];return f(yT.prepareVisualTypes(l),function(a){var o=l[a];n.convertOpacityToAlpha&&"opacity"===a&&(a="colorAlpha",o=l.__alphaForOpacity),yT.dependsOn(a,e)&&o&&o.applyVisual(t,r,i)}),s[e]},positionGroup:function(t){var e=this.api;_i(t,this.visualMapModel.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})},doRender:B}),LC=qr,DC=f,jC=Math.min,RC=Math.max,NC=PC.extend({type:"visualMap.continuous",init:function(){NC.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._hoverLinkDataIndices=[]},doRender:function(t,e,n,r){r&&"selectDataRange"===r.type&&r.from===this.uid||this._buildView()},_buildView:function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var n=t.get("text");this._renderEndsText(e,n,0),this._renderEndsText(e,n,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},_renderEndsText:function(t,e,n){if(e){var r=e[1-n];r=null!=r?r+"":"";var i=this.visualMapModel,a=i.get("textGap"),o=i.itemSize,s=this._shapes.barGroup,u=this._applyTransform([o[0]/2,0===n?-a:o[1]+a],s),l=this._applyTransform(0===n?"bottom":"top",s),c=this._orient,h=this.visualMapModel.textStyleModel;this.group.add(new Py({style:{x:u[0],y:u[1],textVerticalAlign:"horizontal"===c?"middle":l,textAlign:"horizontal"===c?l:"center",text:r,textFont:h.getFont(),textFill:h.getTextColor()}}))}},_renderBar:function(t){var e=this.visualMapModel,n=this._shapes,r=e.itemSize,i=this._orient,a=this._useHandle,o=dp(e,this.api,r),s=n.barGroup=this._createBarGroup(o);s.add(n.outOfRange=gp()),s.add(n.inRange=gp(null,a?mp(this._orient):null,v(this._dragHandle,this,"all",!1),v(this._dragHandle,this,"all",!0)));var u=e.textStyleModel.getTextRect("\u56fd"),l=RC(u.width,u.height);a&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(s,0,r,l,i,o),this._createHandle(s,1,r,l,i,o)),this._createIndicator(s,r,l,i),t.add(s)},_createHandle:function(t,e,n,r,i){var a=v(this._dragHandle,this,e,!1),o=v(this._dragHandle,this,e,!0),s=gp(function(t,e){return 0===t?[[0,0],[r,0],[r,-r]]:[[0,0],[r,0],[r,r]]}(e),mp(this._orient),a,o);s.position[0]=n[0],t.add(s);var u=this.visualMapModel.textStyleModel,l=new Py({draggable:!0,drift:a,onmousemove:function(t){$g(t.event)},ondragend:o,style:{x:0,y:0,text:"",textFont:u.getFont(),textFill:u.getTextColor()}});this.group.add(l);var c=["horizontal"===i?r/2:1.5*r,"horizontal"===i?0===e?-1.5*r:1.5*r:0===e?-r/2:r/2],h=this._shapes;h.handleThumbs[e]=s,h.handleLabelPoints[e]=c,h.handleLabels[e]=l},_createIndicator:function(t,e,n,r){var i=gp([[0,0]],"move");i.position[0]=e[0],i.attr({invisible:!0,silent:!0}),t.add(i);var a=this.visualMapModel.textStyleModel,o=new Py({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:a.getFont(),textFill:a.getTextColor()}});this.group.add(o);var s=["horizontal"===r?n/2:9,0],u=this._shapes;u.indicator=i,u.indicatorLabel=o,u.indicatorLabelPoint=s},_dragHandle:function(t,e,n,r){if(this._useHandle){if(this._dragging=!e,!e){var i=this._applyTransform([n,r],this._shapes.barGroup,!0);this._updateInterval(t,i[1]),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?!this._hovering&&this._clearHoverLinkToSeries():vp(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},_resetInterval:function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),n=t.getExtent(),r=[0,t.itemSize[1]];this._handleEnds=[LC(e[0],n,r,!0),LC(e[1],n,r,!0)]},_updateInterval:function(t,e){var n=this.visualMapModel,r=this._handleEnds,i=[0,n.itemSize[1]];aO(e=e||0,r,i,t,0);var a=n.getExtent();this._dataInterval=[LC(r[0],i,a,!0),LC(r[1],i,a,!0)]},_updateView:function(t){var e=this.visualMapModel,n=e.getExtent(),r=this._shapes,i=[0,e.itemSize[1]],a=t?i:this._handleEnds,o=this._createBarVisual(this._dataInterval,n,a,"inRange"),s=this._createBarVisual(n,n,i,"outOfRange");r.inRange.setStyle({fill:o.barColor,opacity:o.opacity}).setShape("points",o.barPoints),r.outOfRange.setStyle({fill:s.barColor,opacity:s.opacity}).setShape("points",s.barPoints),this._updateHandle(a,o)},_createBarVisual:function(t,e,n,r){var i={forceState:r,convertOpacityToAlpha:!0},a=this._makeColorGradient(t,i),o=[this.getControllerVisual(t[0],"symbolSize",i),this.getControllerVisual(t[1],"symbolSize",i)],s=this._createBarPoints(n,o);return{barColor:new $y(0,0,0,1,a),barPoints:s,handlesColor:[a[0].color,a[a.length-1].color]}},_makeColorGradient:function(t,e){var n=[],r=(t[1]-t[0])/100;n.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var i=1;i<100;i++){var a=t[0]+r*i;if(a>t[1])break;n.push({color:this.getControllerVisual(a,"color",e),offset:i/100})}return n.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),n},_createBarPoints:function(t,e){var n=this.visualMapModel.itemSize;return[[n[0]-e[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-e[1],t[1]]]},_createBarGroup:function(t){var e=this._orient,n=this.visualMapModel.get("inverse");return new kv("horizontal"!==e||n?"horizontal"===e&&n?{scale:"bottom"===t?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==e||n?{scale:"left"===t?[1,1]:[-1,1]}:{scale:"left"===t?[1,-1]:[-1,-1]}:{scale:"bottom"===t?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(t,e){if(this._useHandle){var n=this._shapes,r=this.visualMapModel,i=n.handleThumbs,a=n.handleLabels;DC([0,1],function(o){var s=i[o];s.setStyle("fill",e.handlesColor[o]),s.position[1]=t[o];var u=Nr(n.handleLabelPoints[o],Rr(s,this.group));a[o].setStyle({x:u[0],y:u[1],text:r.formatValueText(this._dataInterval[o]),textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===o?"bottom":"top":"left",n.barGroup)})},this)}},_showIndicator:function(t,e,n,r){var i=this.visualMapModel,a=i.getExtent(),o=i.itemSize,s=LC(t,a,[0,o[1]],!0),u=this._shapes,l=u.indicator;if(l){l.position[1]=s,l.attr("invisible",!1),l.setShape("points",function(t,e,n,r){return t?[[0,-jC(e,RC(n,0))],[6,0],[0,jC(e,RC(r-n,0))]]:[[0,0],[5,-5],[5,5]]}(!!n,r,s,o[1]));var c=this.getControllerVisual(t,"color",{convertOpacityToAlpha:!0});l.setStyle("fill",c);var h=Nr(u.indicatorLabelPoint,Rr(l,this.group)),f=u.indicatorLabel;f.attr("invisible",!1);var d=this._applyTransform("left",u.barGroup),p=this._orient;f.setStyle({text:(n||"")+i.formatValueText(e),textVerticalAlign:"horizontal"===p?d:"middle",textAlign:"horizontal"===p?"center":d,x:h[0],y:h[1]})}},_enableHoverLinkToSeries:function(){var t=this;this._shapes.barGroup.on("mousemove",function(e){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,r=t._applyTransform([e.offsetX,e.offsetY],t._shapes.barGroup,!0,!0);r[1]=jC(RC(0,r[1]),n[1]),t._doHoverLinkToSeries(r[1],0<=r[0]&&r[0]<=n[0])}}).on("mouseout",function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(t,e){var n=this.visualMapModel;if(n.option.hoverLink){var r=[0,n.itemSize[1]],i=n.getExtent();t=jC(RC(r[0],t),r[1]);var a=function(t,e,n){var r=6,i=t.get("hoverLinkDataSize");return i&&(r=LC(i,e,n,!0)/2),r}(n,i,r),o=[t-a,t+a],s=LC(t,r,i,!0),u=[LC(o[0],r,i,!0),LC(o[1],r,i,!0)];o[0]<r[0]&&(u[0]=-1/0),o[1]>r[1]&&(u[1]=1/0),e&&(u[0]===-1/0?this._showIndicator(s,u[1],"< ",a):u[1]===1/0?this._showIndicator(s,u[0],"> ",a):this._showIndicator(s,s,"\u2248 ",a));var l=this._hoverLinkDataIndices,c=[];(e||vp(n))&&(c=this._hoverLinkDataIndices=n.findTargetDataIndices(u));var h=function(t,e){function n(t,e,n){for(var r=0,i=t.length;r<i;r++)for(var a=t[r].seriesId,o=an(t[r].dataIndex),s=n&&n[a],u=0,l=o.length;u<l;u++){var c=o[u];s&&s[c]?s[c]=null:(e[a]||(e[a]={}))[c]=1}}function r(t,e){var n=[];for(var i in t)if(t.hasOwnProperty(i)&&null!=t[i])if(e)n.push(+i);else{var a=r(t[i],!0);a.length&&n.push({seriesId:i,dataIndex:a})}return n}var i={},a={};return n(l||[],i),n(e||[],a,i),[r(i),r(a)]}(0,c);this._dispatchHighDown("downplay",pp(h[0])),this._dispatchHighDown("highlight",pp(h[1]))}},_hoverLinkFromSeriesMouseOver:function(t){var e=t.target,n=this.visualMapModel;if(e&&null!=e.dataIndex){var r=this.ecModel.getSeriesByIndex(e.seriesIndex);if(n.isTargetSeries(r)){var i=r.getData(e.dataType),a=i.get(n.getDataDimension(i),e.dataIndex,!0);isNaN(a)||this._showIndicator(a,a)}}},_hideIndicator:function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",pp(t)),t.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},_applyTransform:function(t,e,n,r){var i=Rr(e,r?null:this.group);return a_[y(t)?"applyTransform":"transformDirection"](t,i,n)},_dispatchHighDown:function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});uo({type:"selectDataRange",event:"dataRangeSelected",update:"update"},function(t,e){e.eachComponent({mainType:"visualMap",query:t},function(e){e.setSelected(t.selected)})}),oo(_C);var BC=EC.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(t,e){BC.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent();var r=this._mode=this._determineMode();FC[this._mode].call(this),this._resetSelected(t,e);var i=this.option.categories;this.resetVisual(function(t,e){"categories"===r?(t.mappingMethod="category",t.categories=n(i)):(t.dataExtent=this.getExtent(),t.mappingMethod="piecewise",t.pieceList=d(this._pieceList,function(t){return t=n(t),"inRange"!==e&&(t.visual=null),t}))})},completeVisualOption:function(){function t(t,e,n){return t&&t[e]&&(x(t[e])?t[e].hasOwnProperty(n):t[e]===n)}var e=this.option,n={},r=yT.listVisualTypes(),i=this.isCategory();f(e.pieces,function(t){f(r,function(e){t.hasOwnProperty(e)&&(n[e]=1)})}),f(n,function(n,r){var a=0;f(this.stateList,function(n){a|=t(e,n,r)||t(e.target,n,r)},this),!a&&f(this.stateList,function(t){(e[t]||(e[t]={}))[r]=xC.get(r,"inRange"===t?"active":"inactive",i)})},this),EC.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(t,e){var n=this.option,r=this._pieceList,i=(e?n:t).selected||{};if(n.selected=i,f(r,function(t,e){var n=this.getSelectedMapKey(t);i.hasOwnProperty(n)||(i[n]=!0)},this),"single"===n.selectedMode){var a=!1;f(r,function(t,e){var n=this.getSelectedMapKey(t);i[n]&&(a?i[n]=!1:a=!0)},this)}},getSelectedMapKey:function(t){return"categories"===this._mode?t.value+"":t.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(t){this.option.selected=n(t)},getValueState:function(t){var e=yT.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},findTargetDataIndices:function(t){var e=[];return this.eachTargetSeries(function(n){var r=[],i=n.getData();i.each(this.getDataDimension(i),function(e,n){yT.findPieceIndex(e,this._pieceList)===t&&r.push(n)},this),e.push({seriesId:n.id,dataIndex:r})},this),e},getRepresentValue:function(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var n=t.interval||[];e=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return e},getVisualMeta:function(t){function e(e,a){var o=i.getRepresentValue({interval:e});a||(a=i.getValueState(o));var s=t(o,a);e[0]===-1/0?r[0]=s:e[1]===1/0?r[1]=s:n.push({value:e[0],color:s},{value:e[1],color:s})}if(!this.isCategory()){var n=[],r=[],i=this,a=this._pieceList.slice();if(a.length){var o=a[0].interval[0];o!==-1/0&&a.unshift({interval:[-1/0,o]}),(o=a[a.length-1].interval[1])!==1/0&&a.push({interval:[o,1/0]})}else a.push({interval:[-1/0,1/0]});var s=-1/0;return f(a,function(t){var n=t.interval;n&&(n[0]>s&&e([s,n[0]],"outOfRange"),e(n.slice()),s=n[1])},this),{stops:n,outerColors:r}}}}),FC={splitNumber:function(){var t=this.option,e=this._pieceList,n=Math.min(t.precision,20),r=this.getExtent(),i=t.splitNumber;i=Math.max(parseInt(i,10),1),t.splitNumber=i;for(var a=(r[1]-r[0])/i;+a.toFixed(n)!==a&&n<5;)n++;t.precision=n,a=+a.toFixed(n);var o=0;t.minOpen&&e.push({index:o++,interval:[-1/0,r[0]],close:[0,0]});for(var s=r[0],u=o+i;o<u;s+=a){var l=o===i-1?r[1]:s+a;e.push({index:o++,interval:[s,l],close:[1,1]})}t.maxOpen&&e.push({index:o++,interval:[r[1],1/0],close:[0,0]}),oi(e),f(e,function(t){t.text=this.formatValueText(t.interval)},this)},categories:function(){var t=this.option;f(t.categories,function(t){this._pieceList.push({text:this.formatValueText(t,!0),value:t})},this),yp(t,this._pieceList)},pieces:function(){var t=this.option,e=this._pieceList;f(t.pieces,function(t,n){x(t)||(t={value:t});var r={text:"",index:n};if(null!=t.label&&(r.text=t.label),t.hasOwnProperty("value")){var i=r.value=t.value;r.interval=[i,i],r.close=[1,1]}else{for(var a=r.interval=[],o=r.close=[0,0],s=[1,0,1],u=[-1/0,1/0],l=[],c=0;c<2;c++){for(var h=[["gte","gt","min"],["lte","lt","max"]][c],f=0;f<3&&null==a[c];f++)a[c]=t[h[f]],o[c]=s[f],l[c]=2===f;null==a[c]&&(a[c]=u[c])}l[0]&&a[1]===1/0&&(o[0]=0),l[1]&&a[0]===-1/0&&(o[1]=0),a[0]===a[1]&&o[0]&&o[1]&&(r.value=a[0])}r.visual=yT.retrieveVisuals(t),e.push(r)},this),yp(t,e),oi(e),f(e,function(t){var e=t.close;t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,[["<","\u2264"][e[1]],[">","\u2265"][e[0]]])},this)}};PC.extend({type:"visualMap.piecewise",doRender:function(){var t=this.group;t.removeAll();var e=this.visualMapModel,n=e.get("textGap"),r=e.textStyleModel,i=r.getFont(),a=r.getTextColor(),o=this._getItemAlign(),s=e.itemSize,u=this._getViewData(),l=u.endsText,c=M(e.get("showLabel",!0),!l);l&&this._renderEndsText(t,l[0],s,c,o),f(u.viewPieceList,function(r){var u=r.piece,l=new kv;l.onclick=v(this._onItemClick,this,u),this._enableHoverLink(l,r.indexInModelPieceList);var h=e.getRepresentValue(u);if(this._createItemSymbol(l,h,[0,0,s[0],s[1]]),c){var f=this.visualMapModel.getValueState(h);l.add(new Py({style:{x:"right"===o?-n:s[0]+n,y:s[1]/2,text:u.text,textVerticalAlign:"middle",textAlign:o,textFont:i,textFill:a,opacity:"outOfRange"===f?.5:1}}))}t.add(l)},this),l&&this._renderEndsText(t,l[1],s,c,o),k_(e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},_enableHoverLink:function(t,e){function n(t){var n=this.visualMapModel;n.option.hoverLink&&this.api.dispatchAction({type:t,batch:pp(n.findTargetDataIndices(e))})}t.on("mouseover",v(n,this,"highlight")).on("mouseout",v(n,this,"downplay"))},_getItemAlign:function(){var t=this.visualMapModel,e=t.option;if("vertical"===e.orient)return dp(t,this.api,t.itemSize);var n=e.align;return n&&"auto"!==n||(n="left"),n},_renderEndsText:function(t,e,n,r,i){if(e){var a=new kv,o=this.visualMapModel.textStyleModel;a.add(new Py({style:{x:r?"right"===i?n[0]:0:n[0]/2,y:n[1]/2,textVerticalAlign:"middle",textAlign:r?i:"center",text:e,textFont:o.getFont(),textFill:o.getTextColor()}})),t.add(a)}},_getViewData:function(){var t=this.visualMapModel,e=d(t.getPieceList(),function(t,e){return{piece:t,indexInModelPieceList:e}}),n=t.get("text"),r=t.get("orient"),i=t.get("inverse");return("horizontal"===r?i:!i)?e.reverse():n&&(n=n.slice().reverse()),{viewPieceList:e,endsText:n}},_createItemSymbol:function(t,e,n){t.add(hs(this.getControllerVisual(e,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(e,"color")))},_onItemClick:function(t){var e=this.visualMapModel,r=e.option,i=n(r.selected),a=e.getSelectedMapKey(t);"single"===r.selectedMode?(i[a]=!0,f(i,function(t,e){i[e]=e===a})):i[a]=!i[a],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:i})}}),oo(_C);var UC=ui,zC=ci,VC=go({type:"marker",dependencies:["series","grid","polar","geo"],init:function(t,e,n,r){this.mergeDefaultAndTheme(t,n),this.mergeOption(t,n,r.createdBySelf,!0)},isAnimationEnabled:function(){if(Mg.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},mergeOption:function(t,e,n,r){var i=this.constructor,o=this.mainType+"Model";n||e.eachSeries(function(t){var n=t.get(this.mainType,!0),s=t[o];n&&n.data?(s?s.mergeOption(n,e,!0):(r&&_p(n),f(n.data,function(t){t instanceof Array?(_p(t[0]),_p(t[1])):_p(t)}),a(s=new i(n,this,e),{mainType:this.mainType,seriesIndex:t.seriesIndex,name:t.name,createdBySelf:!0}),s.__hostSeries=t),t[o]=s):t[o]=null},this)},formatTooltip:function(t){var e=this.getData(),n=this.getRawValue(t),r=y(n)?d(n,UC).join(", "):UC(n),i=e.getName(t),a=zC(this.name);return(null!=n||i)&&(a+="<br />"),i&&(a+=zC(i),null!=n&&(a+=" : ")),null!=n&&(a+=zC(r)),a},getData:function(){return this._data},setData:function(t){this._data=t}});c(VC,hb),VC.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});var HC=u,GC=m,WC={min:GC(bp,"min"),max:GC(bp,"max"),average:GC(bp,"average")},qC=vo({type:"marker",init:function(){this.markerGroupMap=R()},render:function(t,e,n){var r=this.markerGroupMap;r.each(function(t){t.__keep=!1});var i=this.type+"Model";e.eachSeries(function(t){var r=t[i];r&&this.renderSeries(t,r,e,n)},this),r.each(function(t){!t.__keep&&this.group.remove(t.group)},this)},renderSeries:function(){}});qC.extend({type:"markPoint",updateTransform:function(t,e,n){e.eachSeries(function(t){var e=t.markPointModel;e&&(Mp(e.getData(),t,n),this.markerGroupMap.get(t.id).updateLayout(e))},this)},renderSeries:function(t,e,n,r){var i=t.coordinateSystem,a=t.id,o=t.getData(),s=this.markerGroupMap,u=s.get(a)||s.set(a,new Ps),l=kp(i,t,e);e.setData(l),Mp(e.getData(),t,r),l.each(function(t){var n=l.getItemModel(t),r=n.getShallow("symbolSize");"function"==typeof r&&(r=r(e.getRawValue(t),e.getDataParams(t))),l.setItemVisual(t,{symbolSize:r,color:n.get("itemStyle.color")||o.getVisual("color"),symbol:n.getShallow("symbol")})}),u.updateData(l),this.group.add(u.group),l.eachItemGraphicEl(function(t){t.traverse(function(t){t.dataModel=e})}),u.__keep=!0,u.group.silent=e.get("silent")||t.get("silent")}}),oo(function(t){t.markPoint=t.markPoint||{}}),VC.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end"},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}});var YC=function(t,e,i,o){var s=t.getData(),u=o.type;if(!y(o)&&("min"===u||"max"===u||"average"===u||"median"===u||null!=o.xAxis||null!=o.yAxis)){var l,c;null!=o.yAxis||null!=o.xAxis?(e.getAxis(l=null!=o.yAxis?"y":"x"),c=M(o.yAxis,o.xAxis)):c=Op(s,l=wp(o,s,e,t).valueDataDim,u);var h="x"===l?0:1,f=1-h,d=n(o),p={};d.type=null,d.coord=[],p.coord=[],d.coord[f]=-1/0,p.coord[f]=1/0;var g=i.get("precision");g>=0&&"number"==typeof c&&(c=+c.toFixed(Math.min(g,20))),d.coord[h]=p.coord[h]=c,o=[d,p,{type:u,valueIndex:o.valueIndex,value:c}]}return(o=[xp(t,o[0]),xp(t,o[1]),a({},o[2])])[2].type=o[2].type||"",r(o[2],o[0]),r(o[2],o[1]),o};qC.extend({type:"markLine",updateTransform:function(t,e,n){e.eachSeries(function(t){var e=t.markLineModel;if(e){var r=e.getData(),i=e.__from,a=e.__to;i.each(function(e){Ip(i,e,!0,t,n),Ip(a,e,!1,t,n)}),r.each(function(t){r.setItemLayout(t,[i.getItemLayout(t),a.getItemLayout(t)])}),this.markerGroupMap.get(t.id).updateLayout()}},this)},renderSeries:function(t,e,n,r){function i(e,n,i){var a=e.getItemModel(n);Ip(e,n,i,t,r),e.setItemVisual(n,{symbolSize:a.get("symbolSize")||g[i?0:1],symbol:a.get("symbol",!0)||p[i?0:1],color:a.get("itemStyle.color")||s.getVisual("color")})}var a=t.coordinateSystem,o=t.id,s=t.getData(),u=this.markerGroupMap,l=u.get(o)||u.set(o,new lc);this.group.add(l.group);var c=Pp(a,t,e),h=c.from,f=c.to,d=c.line;e.__from=h,e.__to=f,e.setData(d);var p=e.get("symbol"),g=e.get("symbolSize");y(p)||(p=[p,p]),"number"==typeof g&&(g=[g,g]),c.from.each(function(t){i(h,t,!0),i(f,t,!1)}),d.each(function(t){var e=d.getItemModel(t).get("lineStyle.color");d.setItemVisual(t,{color:e||h.getItemVisual(t,"color")}),d.setItemLayout(t,[h.getItemLayout(t),f.getItemLayout(t)]),d.setItemVisual(t,{fromSymbolSize:h.getItemVisual(t,"symbolSize"),fromSymbol:h.getItemVisual(t,"symbol"),toSymbolSize:f.getItemVisual(t,"symbolSize"),toSymbol:f.getItemVisual(t,"symbol")})}),l.updateData(d),c.line.eachItemGraphicEl(function(t,n){t.traverse(function(t){t.dataModel=e})}),l.__keep=!0,l.group.silent=e.get("silent")||t.get("silent")}}),oo(function(t){t.markLine=t.markLine||{}}),VC.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});var XC=function(t,e,n,r){var a=xp(t,r[0]),o=xp(t,r[1]),s=M,u=a.coord,l=o.coord;u[0]=s(u[0],-1/0),u[1]=s(u[1],-1/0),l[0]=s(l[0],1/0),l[1]=s(l[1],1/0);var c=i([{},a,o]);return c.coord=[a.coord,o.coord],c.x0=a.x,c.y0=a.y,c.x1=o.x,c.y1=o.y,c},$C=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];qC.extend({type:"markArea",updateTransform:function(t,e,n){e.eachSeries(function(t){var e=t.markAreaModel;if(e){var r=e.getData();r.each(function(e){var i=d($C,function(i){return Rp(r,e,i,t,n)});r.setItemLayout(e,i),r.getItemGraphicEl(e).setShape("points",i)})}},this)},renderSeries:function(t,e,n,r){var i=t.coordinateSystem,a=t.id,s=t.getData(),u=this.markerGroupMap,l=u.get(a)||u.set(a,{group:new kv});this.group.add(l.group),l.__keep=!0;var c=function(t,e,n){var r,i;t?(r=d(t&&t.dimensions,function(t){var n=e.getData();return o({name:t},n.getDimensionInfo(n.mapDimension(t))||{})}),i=new jx(d(["x0","y0","x1","y1"],function(t,e){return{name:t,type:r[e%2].type}}),n)):i=new jx(r=[{name:"value",type:"float"}],n);var a=d(n.get("data"),m(XC,e,t,n));return t&&(a=g(a,m(jp,t))),i.initData(a,null,t?function(t,e,n,r){return t.coord[Math.floor(r/2)][r%2]}:function(t){return t.value}),i.hasItemOption=!0,i}(i,t,e);e.setData(c),c.each(function(e){c.setItemLayout(e,d($C,function(n){return Rp(c,e,n,t,r)})),c.setItemVisual(e,{color:s.getVisual("color")})}),c.diff(l.__data).add(function(t){var e=new Uy({shape:{points:c.getItemLayout(t)}});c.setItemGraphicEl(t,e),l.group.add(e)}).update(function(t,n){var r=l.__data.getItemGraphicEl(n);Dr(r,{shape:{points:c.getItemLayout(t)}},e,t),l.group.add(r),c.setItemGraphicEl(t,r)}).remove(function(t){var e=l.__data.getItemGraphicEl(t);l.group.remove(e)}).execute(),c.eachItemGraphicEl(function(t,n){var r=c.getItemModel(n),i=r.getModel("label"),a=r.getModel("emphasis.label"),s=c.getItemVisual(n,"color");t.useStyle(o(r.getModel("itemStyle").getItemStyle(),{fill:zt(s,.4),stroke:s})),t.hoverStyle=r.getModel("emphasis.itemStyle").getItemStyle(),Or(t.style,t.hoverStyle,i,a,{labelFetcher:e,labelDataIndex:n,defaultText:c.getName(n)||"",isRectText:!0,autoColor:s}),Sr(t,{}),t.dataModel=e}),l.__data=c,l.group.silent=e.get("silent")||t.get("silent")}}),oo(function(t){t.markArea=t.markArea||{}}),A_.registerSubTypeDefaulter("timeline",function(){return"slider"}),uo({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(t,e){var n=e.getComponent("timeline");return n&&null!=t.currentIndex&&(n.setCurrentIndex(t.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.setPlayState(!1)),e.resetOption("timeline"),o({currentIndex:n.option.currentIndex},t)}),uo({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(t,e){var n=e.getComponent("timeline");n&&null!=t.playState&&n.setPlayState(t.playState)});var ZC=A_.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(t,e,n){this.mergeDefaultAndTheme(t,n),this._initData()},mergeOption:function(t){ZC.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(t){null==t&&(t=this.option.currentIndex);var e=this._data.count();this.option.loop?t=(t%e+e)%e:(t>=e&&(t=e-1),t<0&&(t=0)),this.option.currentIndex=t},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(t){this.option.autoPlay=!!t},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var t=this.option,e=t.data||[],r=t.axisType,i=this._names=[];if("category"===r){var a=[];f(e,function(t,e){var r,o=sn(t);x(t)?(r=n(t)).value=e:r=e,a.push(r),b(o)||null!=o&&!isNaN(o)||(o=""),i.push(o+"")}),e=a}(this._data=new jx([{name:"value",type:{category:"ordinal",time:"time"}[r]||"number"}],this)).initData(e,i)},getData:function(){return this._data},getCategories:function(){if("category"===this.get("axisType"))return this._names.slice()}});c(ZC.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}}),hb);var QC=vb.extend({type:"timeline"}),KC=function(t,e,n,r){xw.call(this,t,e,n),this.type=r||"value",this.model=null};KC.prototype={constructor:KC,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return"horizontal"===this.model.get("orient")}},l(KC,xw);var JC=v,tE=f,eE=Math.PI;QC.extend({type:"timeline.slider",init:function(t,e){this.api=e},render:function(t,e,n,r){if(this.model=t,this.api=n,this.ecModel=e,this.group.removeAll(),t.get("show",!0)){var i=this._layout(t,n),a=this._createGroup("mainGroup"),o=this._createGroup("labelGroup"),s=this._axis=this._createAxis(i,t);t.formatTooltip=function(t){return ci(s.scale.getLabel(t))},tE(["AxisLine","AxisTick","Control","CurrentPointer"],function(e){this["_render"+e](i,a,s,t)},this),this._renderAxisLabel(i,o,s,t),this._position(i,t)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(t,e){var n=t.get("label.position"),r=t.get("orient"),i=function(t,e){return yi(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}(t,e);null==n||"auto"===n?n="horizontal"===r?i.y+i.height/2<e.getHeight()/2?"-":"+":i.x+i.width/2<e.getWidth()/2?"+":"-":isNaN(n)&&(n={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[r][n]);var a={horizontal:"center",vertical:n>=0||"+"===n?"left":"right"},o={horizontal:n>=0||"+"===n?"top":"bottom",vertical:"middle"},s={horizontal:0,vertical:eE/2},u="vertical"===r?i.height:i.width,l=t.getModel("controlStyle"),c=l.get("show",!0),h=c?l.get("itemSize"):0,f=c?l.get("itemGap"):0,d=h+f,p=t.get("label.rotate")||0;p=p*eE/180;var g,v,m,y,_=l.get("position",!0),b=c&&l.get("showPlayBtn",!0),x=c&&l.get("showPrevBtn",!0),w=c&&l.get("showNextBtn",!0),S=0,T=u;return"left"===_||"bottom"===_?(b&&(g=[0,0],S+=d),x&&(v=[S,0],S+=d),w&&(m=[T-h,0],T-=d)):(b&&(g=[T-h,0],T-=d),x&&(v=[0,0],S+=d),w&&(m=[T-h,0],T-=d)),y=[S,T],t.get("inverse")&&y.reverse(),{viewRect:i,mainLength:u,orient:r,rotation:s[r],labelRotation:p,labelPosOpt:n,labelAlign:t.get("label.align")||a[r],labelBaseline:t.get("label.verticalAlign")||t.get("label.baseline")||o[r],playPosition:g,prevBtnPosition:v,nextBtnPosition:m,axisExtent:y,controlSize:h,controlGap:f}},_position:function(t,e){function n(t){var e=t.position;t.origin=[h[0][0]-e[0],h[1][0]-e[1]]}function r(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function i(t,e,n,r,i){t[r]+=n[r][i]-e[r][i]}var a=this._mainGroup,o=this._labelGroup,s=t.viewRect;if("vertical"===t.orient){var u=pt(),l=s.x,c=s.y+s.height;yt(u,u,[-l,-c]),_t(u,u,-eE/2),yt(u,u,[l,c]),(s=s.clone()).applyTransform(u)}var h=r(s),f=r(a.getBoundingRect()),d=r(o.getBoundingRect()),p=a.position,g=o.position;g[0]=p[0]=h[0][0];var v=t.labelPosOpt;if(isNaN(v))i(p,f,h,1,m="+"===v?0:1),i(g,d,h,1,1-m);else{var m=v>=0?0:1;i(p,f,h,1,m),g[1]=p[1]+v}a.attr("position",p),o.attr("position",g),a.rotation=o.rotation=t.rotation,n(a),n(o)},_createAxis:function(t,e){var n=e.getData(),r=e.get("axisType"),i=os(e,r);i.getTicks=function(){return n.mapArray(["value"],function(t){return t})};var a=n.getDataExtent("value");i.setExtent(a[0],a[1]),i.niceTicks();var o=new KC("value",i,t.axisExtent,r);return o.model=e,o},_createGroup:function(t){var e=this["_"+t]=new kv;return this.group.add(e),e},_renderAxisLine:function(t,e,n,r){var i=n.getExtent();r.get("lineStyle.show")&&e.add(new Hy({shape:{x1:i[0],y1:0,x2:i[1],y2:0},style:a({lineCap:"round"},r.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(t,e,n,r){var i=r.getData(),a=n.scale.getTicks();tE(a,function(t){var a=n.dataToCoord(t),o=i.getItemModel(t),s=o.getModel("itemStyle"),u=o.getModel("emphasis.itemStyle"),l={position:[a,0],onclick:JC(this._changeTimeline,this,t)},c=Up(o,s,e,l);Sr(c,u.getItemStyle()),o.get("tooltip")?(c.dataIndex=t,c.dataModel=r):c.dataIndex=c.dataModel=null},this)},_renderAxisLabel:function(t,e,n,r){if(n.getLabelModel().get("show")){var i=r.getData(),a=n.getViewLabels();tE(a,function(r){var a=r.tickValue,o=i.getItemModel(a),s=o.getModel("label"),u=o.getModel("emphasis.label"),l=n.dataToCoord(r.tickValue),c=new Py({position:[l,0],rotation:t.labelRotation-t.rotation,onclick:JC(this._changeTimeline,this,a),silent:!1});Mr(c.style,s,{text:r.formattedLabel,textAlign:t.labelAlign,textVerticalAlign:t.labelBaseline}),e.add(c),Sr(c,Mr({},u))},this)}},_renderControl:function(t,e,n,r){function i(t,n,i,c){if(t){var h=Fp(r,n,l,{position:t,origin:[a/2,0],rotation:c?-o:0,rectHover:!0,style:s,onclick:i});e.add(h),Sr(h,u)}}var a=t.controlSize,o=t.rotation,s=r.getModel("controlStyle").getItemStyle(),u=r.getModel("emphasis.controlStyle").getItemStyle(),l=[0,-a/2,a,a],c=r.getPlayState(),h=r.get("inverse",!0);i(t.nextBtnPosition,"controlStyle.nextIcon",JC(this._changeTimeline,this,h?"-":"+")),i(t.prevBtnPosition,"controlStyle.prevIcon",JC(this._changeTimeline,this,h?"+":"-")),i(t.playPosition,"controlStyle."+(c?"stopIcon":"playIcon"),JC(this._handlePlayClick,this,!c),!0)},_renderCurrentPointer:function(t,e,n,r){var i=r.getData(),a=r.getCurrentIndex(),o=i.getItemModel(a).getModel("checkpointStyle"),s=this;this._currentPointer=Up(o,o,this._mainGroup,{},this._currentPointer,{onCreate:function(t){t.draggable=!0,t.drift=JC(s._handlePointerDrag,s),t.ondragend=JC(s._handlePointerDragend,s),zp(t,a,n,r,!0)},onUpdate:function(t){zp(t,a,n,r)}})},_handlePlayClick:function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},_handlePointerDrag:function(t,e,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},_handlePointerDragend:function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},_pointerChangeTimeline:function(t,e){var n=this._toAxisCoord(t)[0],r=$r(this._axis.getExtent().slice());n>r[1]&&(n=r[1]),n<r[0]&&(n=r[0]),this._currentPointer.position[0]=n,this._currentPointer.dirty();var i=this._findNearestTick(n),a=this.model;(e||i!==a.getCurrentIndex()&&a.get("realtime"))&&this._changeTimeline(i)},_doPlayStop:function(){this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(JC(function(){var t=this.model;this._changeTimeline(t.getCurrentIndex()+(t.get("rewind",!0)?-1:1))},this),this.model.get("playInterval")))},_toAxisCoord:function(t){return Nr(t,this._mainGroup.getLocalTransform(),!0)},_findNearestTick:function(t){var e,n=this.model.getData(),r=1/0,i=this._axis;return n.each(["value"],function(n,a){var o=i.dataToCoord(n),s=Math.abs(o-t);s<r&&(r=s,e=a)}),e},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(t){var e=this.model.getCurrentIndex();"+"===t?t=e+1:"-"===t&&(t=e-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})}}),oo(function(t){var e=t&&t.timeline;y(e)||(e=e?[e]:[]),f(e,function(t){t&&function(t){var e=t.type,n={number:"value",time:"time"};if(n[e]&&(t.axisType=n[e],delete t.type),Np(t),Bp(t,"controlPosition")){var r=t.controlStyle||(t.controlStyle={});Bp(r,"position")||(r.position=t.controlPosition),"none"!==r.position||Bp(r,"show")||(r.show=!1,delete r.position),delete t.controlPosition}f(t.data||[],function(t){x(t)&&!y(t)&&(!Bp(t,"value")&&Bp(t,"name")&&(t.value=t.name),Np(t))})}(t)})});var nE=go({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){nE.superApply(this,"optionUpdated",arguments),f(this.option.feature,function(t,e){var n=Zd(e);n&&r(t,n.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}}}});vo({type:"toolbox",render:function(t,e,n,r){function i(i,o){var s,h=c[i],f=c[o],d=new Vr(u[h],t,t.ecModel);if(h&&!f){if(0===h.indexOf("my"))s={model:d,onclick:d.option.onclick,featureName:h};else{var p=Zd(h);if(!p)return;s=new p(d,e,n)}l[h]=s}else{if(!(s=l[f]))return;s.model=d,s.ecModel=e,s.api=n}h||!f?d.get("show")&&!s.unusable?(a(d,s,h),d.setIconStatus=function(t,e){var n=this.option,r=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[t]=e,r[t]&&r[t].trigger(e)},s.render&&s.render(d,e,n,r)):s.remove&&s.remove(e,n):s.dispose&&s.dispose(e,n)}function a(r,i,a){var u=r.getModel("iconStyle"),l=r.getModel("emphasis.iconStyle"),c=i.getIcons?i.getIcons():r.get("icon"),h=r.get("title")||{};if("string"==typeof c){var d=c,p=h;h={},(c={})[a]=d,h[a]=p}var g=r.iconPaths={};f(c,function(a,c){var f=zr(a,{},{x:-s/2,y:-s/2,width:s,height:s});f.setStyle(u.getItemStyle()),f.hoverStyle=l.getItemStyle(),Sr(f),t.get("showTitle")&&(f.__title=h[c],f.on("mouseover",function(){var t=l.getItemStyle();f.setStyle({text:h[c],textPosition:t.textPosition||"bottom",textFill:t.fill||t.stroke||"#000",textAlign:t.textAlign||"center"})}).on("mouseout",function(){f.setStyle({textFill:null})})),f.trigger(r.get("iconStatus."+c)||"normal"),o.add(f),f.on("click",v(i.onclick,i,e,n,c)),g[c]=f})}var o=this.group;if(o.removeAll(),t.get("show")){var s=+t.get("itemSize"),u=t.get("feature")||{},l=this._features||(this._features={}),c=[];f(u,function(t,e){c.push(e)}),new bo(this._featureNames||[],c).add(i).update(i).remove(m(i,null)).execute(),this._featureNames=c,function(t,e,n){var r=e.getBoxLayoutParams(),i=e.get("padding"),a={width:n.getWidth(),height:n.getHeight()},o=yi(r,a,i);k_(e.get("orient"),t,e.get("itemGap"),o.width,o.height),_i(t,r,a,i)}(o,t,n),o.add(sd(o.getBoundingRect(),t)),o.eachChild(function(t){var e=t.__title,r=t.hoverStyle;if(r&&e){var i=me(e,Ae(r)),a=t.position[0]+o.position[0],u=!1;t.position[1]+o.position[1]+s+i.height>n.getHeight()&&(r.textPosition="top",u=!0);var l=u?-5-i.height:s+8;a+i.width/2>n.getWidth()?(r.textPosition=["100%",l],r.textAlign="right"):a-i.width/2<0&&(r.textPosition=[0,l],r.textAlign="left")}})}},updateView:function(t,e,n,r){f(this._features,function(t){t.updateView&&t.updateView(t.model,e,n,r)})},remove:function(t,e){f(this._features,function(n){n.remove&&n.remove(t,e)}),this.group.removeAll()},dispose:function(t,e){f(this._features,function(n){n.dispose&&n.dispose(t,e)})}});var rE=kb.toolbox.saveAsImage;Vp.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:rE.title,type:"png",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:rE.lang.slice()},Vp.prototype.unusable=!Mg.canvasSupported,Vp.prototype.onclick=function(t,e){var n=this.model,r=n.get("name")||t.get("title.0.text")||"echarts",i=document.createElement("a"),a=n.get("type",!0)||"png";i.download=r+"."+a,i.target="_blank";var o=e.getConnectedDataURL({type:a,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")});if(i.href=o,"function"!=typeof MouseEvent||Mg.browser.ie||Mg.browser.edge)if(window.navigator.msSaveOrOpenBlob){for(var s=atob(o.split(",")[1]),u=s.length,l=new Uint8Array(u);u--;)l[u]=s.charCodeAt(u);var c=new Blob([l]);window.navigator.msSaveOrOpenBlob(c,r+"."+a)}else{var h=n.get("lang"),f='<body style="margin:0;"><img src="'+o+'" style="max-width:100%;" title="'+(h&&h[0]||"")+'" /></body>';window.open().document.write(f)}else{var d=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});i.dispatchEvent(d)}},$d("saveAsImage",Vp),Hp.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z",tiled:"M2.3,2.2h22.8V25H2.3V2.2z M35,2.2h22.8V25H35V2.2zM2.3,35h22.8v22.8H2.3V35z M35,35h22.8v22.8H35V35z"},title:n(kb.toolbox.magicType.title),option:{},seriesIndex:{}};var iE=Hp.prototype;iE.getIcons=function(){var t=this.model,e=t.get("icon"),n={};return f(t.get("type"),function(t){e[t]&&(n[t]=e[t])}),n};var aE={line:function(t,e,n,i){if("bar"===t)return r({id:e,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get("option.line")||{},!0)},bar:function(t,e,n,i){if("line"===t)return r({id:e,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get("option.bar")||{},!0)},stack:function(t,e,n,i){if("line"===t||"bar"===t)return r({id:e,stack:"__ec_magicType_stack__"},i.get("option.stack")||{},!0)},tiled:function(t,e,n,i){if("line"===t||"bar"===t)return r({id:e,stack:""},i.get("option.tiled")||{},!0)}},oE=[["line","bar"],["stack","tiled"]];iE.onclick=function(t,e,n){var r=this.model,i=r.get("seriesIndex."+n);if(aE[n]){var a={series:[]};f(oE,function(t){u(t,n)>=0&&f(t,function(t){r.setIconStatus(t,"normal")})}),r.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:null==i?null:{seriesIndex:i}},function(e){var i=aE[n](e.subType,e.id,e,r);i&&(o(i,e.option),a.series.push(i));var s=e.coordinateSystem;if(s&&"cartesian2d"===s.type&&("line"===n||"bar"===n)){var u=s.getAxesByScale("ordinal")[0];if(u){var l=u.dim+"Axis",c=t.queryComponents({mainType:l,index:e.get(name+"Index"),id:e.get(name+"Id")})[0].componentIndex;a[l]=a[l]||[];for(var h=0;h<=c;h++)a[l][c]=a[l][c]||{};a[l][c].boundaryGap="bar"===n}}}),e.dispatchAction({type:"changeMagicType",currentType:n,newOption:a})}},uo({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(t,e){e.mergeOption(t.newOption)}),$d("magicType",Hp);var sE=kb.toolbox.dataView,uE=new Array(60).join("-"),lE="\t",cE=new RegExp("["+lE+"]+","g");Yp.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:n(sE.title),lang:n(sE.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},Yp.prototype.onclick=function(t,e){function n(){r.removeChild(a),_._dom=null}var r=e.getDom(),i=this.model;this._dom&&r.removeChild(this._dom);var a=document.createElement("div");a.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",a.style.backgroundColor=i.get("backgroundColor")||"#fff";var o=document.createElement("h4"),s=i.get("lang")||[];o.innerHTML=s[0]||i.get("title"),o.style.cssText="margin: 10px 20px;",o.style.color=i.get("textColor");var u=document.createElement("div"),l=document.createElement("textarea");u.style.cssText="display:block;width:100%;overflow:auto;";var c=i.get("optionToContent"),h=i.get("contentToOption"),f=Gp(t);if("function"==typeof c){var d=c(e.getOption());"string"==typeof d?u.innerHTML=d:T(d)&&u.appendChild(d)}else u.appendChild(l),l.readOnly=i.get("readOnly"),l.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",l.style.color=i.get("textColor"),l.style.borderColor=i.get("textareaBorderColor"),l.style.backgroundColor=i.get("textareaColor"),l.value=f.value;var p=f.meta,g=document.createElement("div");g.style.cssText="position:absolute;bottom:0;left:0;right:0;";var v="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",m=document.createElement("div"),y=document.createElement("div");v+=";background-color:"+i.get("buttonColor"),v+=";color:"+i.get("buttonTextColor");var _=this;ut(m,"click",n),ut(y,"click",function(){var t;try{t="function"==typeof h?h(u,e.getOption()):qp(l.value,p)}catch(t){throw n(),new Error("Data view format error "+t)}t&&e.dispatchAction({type:"changeDataView",newOption:t}),n()}),m.innerHTML=s[1],y.innerHTML=s[2],y.style.cssText=v,m.style.cssText=v,!i.get("readOnly")&&g.appendChild(y),g.appendChild(m),ut(l,"keydown",function(t){if(9===(t.keyCode||t.which)){var e=this.value,n=this.selectionStart,r=this.selectionEnd;this.value=e.substring(0,n)+lE+e.substring(r),this.selectionStart=this.selectionEnd=n+1,$g(t)}}),a.appendChild(o),a.appendChild(u),a.appendChild(g),u.style.height=r.clientHeight-80+"px",r.appendChild(a),this._dom=a},Yp.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)},Yp.prototype.dispose=function(t,e){this.remove(t,e)},$d("dataView",Yp),uo({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(t,e){var n=[];f(t.newOption.series,function(t){var r=e.getSeriesByName(t.name)[0];if(r){var i=r.get("data");n.push({name:t.name,data:function(t,e){return d(t,function(t,n){var r=e&&e[n];return x(r)&&!y(r)?(x(t)&&!y(t)&&(t=t.value),o({value:t},r)):t})}(t.data,i)})}else n.push(a({type:"scatter"},t))}),e.mergeOption(o({series:n},t.newOption))});var hE=f,fE="\0_ec_hist_store";nC.extend({type:"dataZoom.select"}),rC.extend({type:"dataZoom.select"});var dE=f,pE="\0_ec_\0toolbox-dataZoom_";$p.defaultOption={show:!0,icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:n(kb.toolbox.dataZoom.title)};var gE=$p.prototype;gE.render=function(t,e,n,r){this.model=t,this.ecModel=e,this.api=n,function(t,e,n,r,i){var a=n._isZoomActive;r&&"takeGlobalCursor"===r.type&&(a="dataZoomSelect"===r.key&&r.dataZoomSelectActive),n._isZoomActive=a,t.setIconStatus("zoom",a?"emphasis":"normal");var o=new Rd(Zp(t.option),e,{include:["grid"]});n._brushController.setPanels(o.makePanelOpts(i,function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"})).enableBrush(!!a&&{brushType:"auto",brushStyle:{lineWidth:0,fill:"rgba(0,0,0,0.2)"}})}(t,e,this,r,n),function(t,e){t.setIconStatus("back",Xp(e).length>1?"emphasis":"normal")}(t,e)},gE.onclick=function(t,e,n){vE[n].call(this)},gE.remove=function(t,e){this._brushController.unmount()},gE.dispose=function(t,e){this._brushController.dispose()};var vE={zoom:function(){this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!this._isZoomActive})},back:function(){this._dispatchZoomAction(function(t){var e=Xp(t),n=e[e.length-1];e.length>1&&e.pop();var r={};return hE(n,function(t,n){for(var i=e.length-1;i>=0;i--)if(t=e[i][n]){r[n]=t;break}}),r}(this.ecModel))}};gE._onBrush=function(t,e){function n(t,e,n){var a=e.getAxis(t),o=a.model,s=function(t,e,n){var r;return i.eachComponent({mainType:"dataZoom",subType:"select"},function(n){n.getAxisModel(t,e.componentIndex)&&(r=n)}),r}(t,o),u=s.findRepresentativeAxisProxy(o).getMinMaxSpan();null==u.minValueSpan&&null==u.maxValueSpan||(n=aO(0,n.slice(),a.scale.getExtent(),0,u.minValueSpan,u.maxValueSpan)),s&&(r[s.id]={dataZoomId:s.id,startValue:n[0],endValue:n[1]})}if(e.isEnd&&t.length){var r={},i=this.ecModel;this._brushController.updateCovers([]),new Rd(Zp(this.model.option),i,{include:["grid"]}).matchOutputRanges(t,i,function(t,e,r){if("cartesian2d"===r.type){var i=t.brushType;"rect"===i?(n("x",r,e[0]),n("y",r,e[1])):n({lineX:"x",lineY:"y"}[i],r,e)}}),function(t,e){var n=Xp(t);hE(e,function(e,r){for(var i=n.length-1;i>=0&&!n[i][r];i--);if(i<0){var a=t.queryComponents({mainType:"dataZoom",subType:"select",id:r})[0];if(a){var o=a.getPercentRange();n[0][r]={dataZoomId:r,start:o[0],end:o[1]}}}}),n.push(e)}(i,r),this._dispatchZoomAction(r)}},gE._dispatchZoomAction=function(t){var e=[];dE(t,function(t,r){e.push(n(t))}),e.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:e})},$d("dataZoom",$p),oo(function(t){function e(t,e){if(e){var i=t+"Index",a=e[i];null==a||"all"===a||y(a)||(a=!1===a||"none"===a?[]:[a]),n(t,function(e,n){if(null==a||"all"===a||-1!==u(a,n)){var o={type:"select",$fromToolbox:!0,id:pE+t+n};o[i]=n,r.push(o)}})}}function n(e,n){var r=t[e];y(r)||(r=r?[r]:[]),dE(r,n)}if(t){var r=t.dataZoom||(t.dataZoom=[]);y(r)||(t.dataZoom=r=[r]);var i=t.toolbox;if(i&&(y(i)&&(i=i[0]),i&&i.feature)){var a=i.feature.dataZoom;e("xAxis",a),e("yAxis",a)}}}),Qp.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:kb.toolbox.restore.title},Qp.prototype.onclick=function(t,e,n){(function(t){t[fE]=null})(t),e.dispatchAction({type:"restore",from:this.uid})},$d("restore",Qp),uo({type:"restore",event:"restore",update:"prepareAndUpdate"},function(t,e){e.resetOption("recreate")});var mE,yE="urn:schemas-microsoft-com:vml",_E="undefined"==typeof window?null:window,bE=!1,xE=_E&&_E.document;if(xE&&!Mg.canvasSupported)try{!xE.namespaces.zrvml&&xE.namespaces.add("zrvml",yE),mE=function(t){return xE.createElement("<zrvml:"+t+' class="zrvml">')}}catch(t){mE=function(t){return xE.createElement("<"+t+' xmlns="'+yE+'" class="zrvml">')}}var wE=sy.CMD,SE=Math.round,TE=Math.sqrt,OE=Math.abs,ME=Math.cos,kE=Math.sin,CE=Math.max;if(!Mg.canvasSupported){var EE=21600,AE=EE/2,IE=function(t){t.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",t.coordsize=EE+","+EE,t.coordorigin="0,0"},PE=function(t){return String(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;")},LE=function(t,e,n){return"rgb("+[t,e,n].join(",")+")"},DE=function(t,e){e&&t&&e.parentNode!==t&&t.appendChild(e)},jE=function(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)},RE=function(t,e,n){return 1e5*(parseFloat(t)||0)+1e3*(parseFloat(e)||0)+n},NE=function(t,e){return"string"==typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t},BE=function(t,e,n){var r=Dt(e);n=+n,isNaN(n)&&(n=1),r&&(t.color=LE(r[0],r[1],r[2]),t.opacity=n*r[3])},FE=function(t){var e=Dt(t);return[LE(e[0],e[1],e[2]),e[3]]},UE=function(t,e,n,r){var i="fill"==e,a=t.getElementsByTagName(e)[0];null!=n[e]&&"none"!==n[e]&&(i||!i&&n.lineWidth)?(t[i?"filled":"stroked"]="true",n[e]instanceof Xy&&jE(t,a),a||(a=Kp(e)),i?function(t,e,n){var r=e.fill;if(null!=r)if(r instanceof Xy){var i,a=0,o=[0,0],s=0,u=1,l=n.getBoundingRect(),c=l.width,h=l.height;if("linear"===r.type){i="gradient";var f=[r.x*c,r.y*h],d=[r.x2*c,r.y2*h];(p=n.transform)&&(J(f,f,p),J(d,d,p)),(a=180*Math.atan2(d[0]-f[0],d[1]-f[1])/Math.PI)<0&&(a+=360),a<1e-6&&(a=0)}else{i="gradientradial";var p,g=n.scale,v=c,m=h;o=[((f=[r.x*c,r.y*h])[0]-l.x)/v,(f[1]-l.y)/m],(p=n.transform)&&J(f,f,p);var y=CE(v/=g[0]*EE,m/=g[1]*EE);u=2*r.r/y-(s=0/y)}var _=r.colorStops.slice();_.sort(function(t,e){return t.offset-e.offset});for(var b=_.length,x=[],w=[],S=0;S<b;S++){var T=_[S],O=FE(T.color);w.push(T.offset*u+s+" "+O[0]),0!==S&&S!==b-1||x.push(O)}if(b>=2){var M=x[0][0],k=x[1][0],C=x[0][1]*e.opacity,E=x[1][1]*e.opacity;t.type=i,t.method="none",t.focus="100%",t.angle=a,t.color=M,t.color2=k,t.colors=w.join(","),t.opacity=E,t.opacity2=C}"radial"===i&&(t.focusposition=o.join(","))}else BE(t,r,e.opacity)}(a,n,r):function(t,e){null!=e.lineDash&&(t.dashstyle=e.lineDash.join(" ")),null==e.stroke||e.stroke instanceof Xy||BE(t,e.stroke,e.opacity)}(a,n),DE(t,a)):(t[i?"filled":"stroked"]="false",jE(t,a))},zE=[[],[],[]];Zn.prototype.brushVML=function(t){var e=this.style,n=this._vmlEl;n||(n=Kp("shape"),IE(n),this._vmlEl=n),UE(n,"fill",e,this),UE(n,"stroke",e,this);var r=this.transform,i=null!=r,a=n.getElementsByTagName("stroke")[0];if(a){var o=e.lineWidth;i&&!e.strokeNoScale&&(o*=TE(OE(r[0]*r[3]-r[1]*r[2]))),a.weight=o+"px"}var s=this.path||(this.path=new sy);this.__dirtyPath&&(s.beginPath(),this.buildPath(s,this.shape),s.toStatic(),this.__dirtyPath=!1),n.path=function(t,e){var n,r,i,a,o,s,u=wE.M,l=wE.C,c=wE.L,h=wE.A,f=wE.Q,d=[],p=t.data,g=t.len();for(a=0;a<g;){switch(r="",n=0,i=p[a++]){case u:r=" m ",n=1,o=p[a++],s=p[a++],zE[0][0]=o,zE[0][1]=s;break;case c:r=" l ",n=1,o=p[a++],s=p[a++],zE[0][0]=o,zE[0][1]=s;break;case f:case l:r=" c ",n=3;var v,m,y=p[a++],_=p[a++],b=p[a++],x=p[a++];i===f?(v=b,m=x,b=(b+2*y)/3,x=(x+2*_)/3,y=(o+2*y)/3,_=(s+2*_)/3):(v=p[a++],m=p[a++]),zE[0][0]=y,zE[0][1]=_,zE[1][0]=b,zE[1][1]=x,zE[2][0]=v,zE[2][1]=m,o=v,s=m;break;case h:var w=0,S=0,T=1,O=1,M=0;e&&(w=e[4],S=e[5],T=TE(e[0]*e[0]+e[1]*e[1]),O=TE(e[2]*e[2]+e[3]*e[3]),M=Math.atan2(-e[1]/O,e[0]/T));var k=p[a++],C=p[a++],E=p[a++],A=p[a++],I=p[a++]+M,P=p[a++]+I+M;a++;var L=p[a++],D=k+ME(I)*E,j=C+kE(I)*A,R=(y=k+ME(P)*E,_=C+kE(P)*A,L?" wa ":" at ");Math.abs(D-y)<1e-4&&(Math.abs(P-I)>.01?L&&(D+=.0125):Math.abs(j-C)<1e-4?L&&D<k||!L&&D>k?_-=.0125:_+=.0125:L&&j<C||!L&&j>C?y+=.0125:y-=.0125),d.push(R,SE(((k-E)*T+w)*EE-AE),",",SE(((C-A)*O+S)*EE-AE),",",SE(((k+E)*T+w)*EE-AE),",",SE(((C+A)*O+S)*EE-AE),",",SE((D*T+w)*EE-AE),",",SE((j*O+S)*EE-AE),",",SE((y*T+w)*EE-AE),",",SE((_*O+S)*EE-AE)),o=y,s=_;break;case wE.R:var N=zE[0],B=zE[1];N[0]=p[a++],N[1]=p[a++],B[0]=N[0]+p[a++],B[1]=N[1]+p[a++],e&&(J(N,N,e),J(B,B,e)),N[0]=SE(N[0]*EE-AE),B[0]=SE(B[0]*EE-AE),N[1]=SE(N[1]*EE-AE),B[1]=SE(B[1]*EE-AE),d.push(" m ",N[0],",",N[1]," l ",B[0],",",N[1]," l ",B[0],",",B[1]," l ",N[0],",",B[1]);break;case wE.Z:d.push(" x ")}if(n>0){d.push(r);for(var F=0;F<n;F++){var U=zE[F];e&&J(U,U,e),d.push(SE(U[0]*EE-AE),",",SE(U[1]*EE-AE),F<n-1?",":"")}}}return d.join("")}(s,this.transform),n.style.zIndex=RE(this.zlevel,this.z,this.z2),DE(t,n),null!=e.text?this.drawRectText(t,this.getBoundingRect()):this.removeRectText(t)},Zn.prototype.onRemove=function(t){jE(t,this._vmlEl),this.removeRectText(t)},Zn.prototype.onAdd=function(t){DE(t,this._vmlEl),this.appendRectText(t)},Xe.prototype.brushVML=function(t){var e,n,r=this.style,i=r.image;if("object"==typeof i&&i.tagName&&"IMG"===i.tagName.toUpperCase()){var a=i.src;if(a===this._imageSrc)e=this._imageWidth,n=this._imageHeight;else{var o=i.runtimeStyle,s=o.width,u=o.height;o.width="auto",o.height="auto",e=i.width,n=i.height,o.width=s,o.height=u,this._imageSrc=a,this._imageWidth=e,this._imageHeight=n}i=a}else i===this._imageSrc&&(e=this._imageWidth,n=this._imageHeight);if(i){var l=r.x||0,c=r.y||0,h=r.width,f=r.height,d=r.sWidth,p=r.sHeight,g=r.sx||0,v=r.sy||0,m=d&&p,y=this._vmlEl;y||(y=xE.createElement("div"),IE(y),this._vmlEl=y);var _,b=y.style,x=!1,w=1,S=1;if(this.transform&&(w=TE((_=this.transform)[0]*_[0]+_[1]*_[1]),S=TE(_[2]*_[2]+_[3]*_[3]),x=_[1]||_[2]),x){var T=[l,c],O=[l+h,c],M=[l,c+f],k=[l+h,c+f];J(T,T,_),J(O,O,_),J(M,M,_),J(k,k,_);var C=CE(T[0],O[0],M[0],k[0]),E=CE(T[1],O[1],M[1],k[1]),A=[];A.push("M11=",_[0]/w,",","M12=",_[2]/S,",","M21=",_[1]/w,",","M22=",_[3]/S,",","Dx=",SE(l*w+_[4]),",","Dy=",SE(c*S+_[5])),b.padding="0 "+SE(C)+"px "+SE(E)+"px 0",b.filter="progid:DXImageTransform.Microsoft.Matrix("+A.join("")+", SizingMethod=clip)"}else _&&(l=l*w+_[4],c=c*S+_[5]),b.filter="",b.left=SE(l)+"px",b.top=SE(c)+"px";var I=this._imageEl,P=this._cropEl;I||(I=xE.createElement("div"),this._imageEl=I);var L=I.style;if(m){if(e&&n)L.width=SE(w*e*h/d)+"px",L.height=SE(S*n*f/p)+"px";else{var D=new Image,j=this;D.onload=function(){D.onload=null,n=D.height,L.width=SE(w*(e=D.width)*h/d)+"px",L.height=SE(S*n*f/p)+"px",j._imageWidth=e,j._imageHeight=n,j._imageSrc=i},D.src=i}P||((P=xE.createElement("div")).style.overflow="hidden",this._cropEl=P);var R=P.style;R.width=SE((h+g*h/d)*w),R.height=SE((f+v*f/p)*S),R.filter="progid:DXImageTransform.Microsoft.Matrix(Dx="+-g*h/d*w+",Dy="+-v*f/p*S+")",P.parentNode||y.appendChild(P),I.parentNode!=P&&P.appendChild(I)}else L.width=SE(w*h)+"px",L.height=SE(S*f)+"px",y.appendChild(I),P&&P.parentNode&&(y.removeChild(P),this._cropEl=null);var N="",B=r.opacity;B<1&&(N+=".Alpha(opacity="+SE(100*B)+") "),L.filter=N+="progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+i+", SizingMethod=scale)",y.style.zIndex=RE(this.zlevel,this.z,this.z2),DE(t,y),null!=r.text&&this.drawRectText(t,this.getBoundingRect())}},Xe.prototype.onRemove=function(t){jE(t,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(t)},Xe.prototype.onAdd=function(t){DE(t,this._vmlEl),this.appendRectText(t)};var VE,HE={},GE=0,WE=document.createElement("div"),qE=function(t){var e=HE[t];if(!e){GE>100&&(GE=0,HE={});var n,r=WE.style;try{r.font=t,n=r.fontFamily.split(",")[0]}catch(t){}e={style:r.fontStyle||"normal",variant:r.fontVariant||"normal",weight:r.fontWeight||"normal",size:0|parseFloat(r.fontSize||12),family:n||"Microsoft YaHei"},HE[t]=e,GE++}return e};Yv.measureText=function(t,e){var n=xE;VE||((VE=n.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",xE.body.appendChild(VE));try{VE.style.font=e}catch(t){}return VE.innerHTML="",VE.appendChild(n.createTextNode(t)),{width:VE.offsetWidth}};for(var YE=new re,XE=[Kv,Ye,Xe,Zn,Py],$E=0;$E<XE.length;$E++){var ZE=XE[$E].prototype;ZE.drawRectText=function(t,e,n,r){var i=this.style;this.__dirty&&Pe(i);var a=i.text;if(null!=a&&(a+=""),a){if(i.rich){var o=Ce(a,i);a=[];for(var s=0;s<o.lines.length;s++){for(var u=o.lines[s].tokens,l=[],c=0;c<u.length;c++)l.push(u[c].text);a.push(l.join(""))}a=a.join("\n")}var h,f,d=i.textAlign,p=i.textVerticalAlign,g=qE(i.font),v=g.style+" "+g.variant+" "+g.weight+" "+g.size+'px "'+g.family+'"';n=n||me(a,v,d,p);var m=this.transform;if(m&&!r&&(YE.copy(e),YE.applyTransform(m),e=YE),r)h=e.x,f=e.y;else{var y=i.textPosition,_=i.textDistance;if(y instanceof Array)h=e.x+NE(y[0],e.width),f=e.y+NE(y[1],e.height),d=d||"left";else{var b=be(y,e,_);h=b.x,f=b.y,d=d||b.textAlign,p=p||b.textVerticalAlign}}h=ye(h,n.width,d),f=_e(f,n.height,p),f+=n.height/2;var x,w,S,T=Kp,O=this._textVmlEl;O?w=(x=(S=O.firstChild).nextSibling).nextSibling:(O=T("line"),x=T("path"),w=T("textpath"),S=T("skew"),w.style["v-text-align"]="left",IE(O),x.textpathok=!0,w.on=!0,O.from="0 0",O.to="1000 0.05",DE(O,S),DE(O,x),DE(O,w),this._textVmlEl=O);var M=[h,f],k=O.style;m&&r?(J(M,M,m),S.on=!0,S.matrix=m[0].toFixed(3)+","+m[2].toFixed(3)+","+m[1].toFixed(3)+","+m[3].toFixed(3)+",0,0",S.offset=(SE(M[0])||0)+","+(SE(M[1])||0),S.origin="0 0",k.left="0px",k.top="0px"):(S.on=!1,k.left=SE(h)+"px",k.top=SE(f)+"px"),w.string=PE(a);try{w.style.font=v}catch(t){}UE(O,"fill",{fill:i.textFill,opacity:i.opacity},this),UE(O,"stroke",{stroke:i.textStroke,opacity:i.opacity,lineDash:i.lineDash},this),O.style.zIndex=RE(this.zlevel,this.z,this.z2),DE(t,O)}},ZE.removeRectText=function(t){jE(t,this._textVmlEl),this._textVmlEl=null},ZE.appendRectText=function(t){DE(t,this._textVmlEl)}}Py.prototype.brushVML=function(t){var e=this.style;null!=e.text?this.drawRectText(t,{x:e.x||0,y:e.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(t)},Py.prototype.onRemove=function(t){this.removeRectText(t)},Py.prototype.onAdd=function(t){this.appendRectText(t)}}tg.prototype={constructor:tg,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0,!0);this._paintList(t)},_paintList:function(t){for(var e=this._vmlRoot,n=0;n<t.length;n++){var r=t[n];r.invisible||r.ignore?(r.__alreadyNotVisible||r.onRemove(e),r.__alreadyNotVisible=!0):(r.__alreadyNotVisible&&r.onAdd(e),r.__alreadyNotVisible=!1,r.__dirty&&(r.beforeBrush&&r.beforeBrush(),(r.brushVML||r.brush).call(r,e),r.afterBrush&&r.afterBrush())),r.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(e),this._firstPaint=!1)},resize:function(t,e){if(t=null==t?this._getWidth():t,e=null==e?this._getHeight():e,this._width!=t||this._height!=e){this._width=t,this._height=e;var n=this._vmlViewport.style;n.width=t+"px",n.height=e+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var t=this.root,e=t.currentStyle;return(t.clientWidth||Jp(e.width))-Jp(e.paddingLeft)-Jp(e.paddingRight)|0},_getHeight:function(){var t=this.root,e=t.currentStyle;return(t.clientHeight||Jp(e.height))-Jp(e.paddingTop)-Jp(e.paddingBottom)|0}},f(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(t){tg.prototype[t]=function(){}}),rn("vml",tg);var QE="http://www.w3.org/2000/svg",KE=sy.CMD,JE=Array.prototype.join,tA="none",eA=Math.round,nA=Math.sin,rA=Math.cos,iA=Math.PI,aA=2*Math.PI,oA=180/iA,sA=1e-4,uA={brush:function(t){var e=t.style,n=t.__svgEl;n||(n=eg("path"),t.__svgEl=n),t.path||t.createPathProxy();var r=t.path;if(t.__dirtyPath){r.beginPath(),t.buildPath(r,t.shape),t.__dirtyPath=!1;var i=function(t){for(var e=[],n=t.data,r=t.len(),i=0;i<r;){var a="",o=0;switch(n[i++]){case KE.M:a="M",o=2;break;case KE.L:a="L",o=2;break;case KE.Q:a="Q",o=4;break;case KE.C:a="C",o=6;break;case KE.A:var s=n[i++],u=n[i++],l=n[i++],c=n[i++],h=n[i++],f=n[i++],d=n[i++],p=n[i++],g=Math.abs(f),v=rg(g-aA)&&!rg(g),m=!1;m=g>=aA||!rg(g)&&(f>-iA&&f<0||f>iA)==!!p;var y=ng(s+l*rA(h)),_=ng(u+c*nA(h));v&&(f=p?aA-1e-4:1e-4-aA,m=!0,9===i&&e.push("M",y,_));var b=ng(s+l*rA(h+f)),x=ng(u+c*nA(h+f));e.push("A",ng(l),ng(c),eA(d*oA),+m,+p,b,x);break;case KE.Z:a="Z";break;case KE.R:b=ng(n[i++]),x=ng(n[i++]);var w=ng(n[i++]),S=ng(n[i++]);e.push("M",b,x,"L",b+w,x,"L",b+w,x+S,"L",b,x+S,"L",b,x)}a&&e.push(a);for(var T=0;T<o;T++)e.push(ng(n[i++]))}return e.join(" ")}(r);i.indexOf("NaN")<0&&ag(n,"d",i)}og(n,e,!1,t),ig(n,t.transform),null!=e.text&&fA(t,t.getBoundingRect())}},lA={brush:function(t){var e=t.style,n=e.image;if(n instanceof HTMLImageElement&&(n=n.src),n){var r=e.x||0,i=e.y||0,a=e.width,o=e.height,s=t.__svgEl;s||(s=eg("image"),t.__svgEl=s),n!==t.__imageSrc&&(function(t,e,n){s.setAttributeNS("http://www.w3.org/1999/xlink","href",n)}(0,0,n),t.__imageSrc=n),ag(s,"width",a),ag(s,"height",o),ag(s,"x",r),ag(s,"y",i),ig(s,t.transform),null!=e.text&&fA(t,t.getBoundingRect())}}},cA={},hA=new re,fA=function(t,e,n){var r=t.style;t.__dirty&&Pe(r);var i=r.text;if(null!=i){i+="";var a=t.__textSvgEl;a||(a=eg("text"),t.__textSvgEl=a);var o,s,u=r.textPosition,l=r.textDistance,c=r.textAlign||"left";"number"==typeof r.fontSize&&(r.fontSize+="px");var h=r.font||[r.fontStyle||"",r.fontWeight||"",r.fontSize||"",r.fontFamily||""].join(" ")||qv,f=sg(r.textVerticalAlign),d=(n=me(i,h,c,f)).lineHeight;if(u instanceof Array)o=e.x+u[0],s=e.y+u[1];else{var p=be(u,e,l);o=p.x,s=p.y,f=sg(p.textVerticalAlign),c=p.textAlign}ag(a,"alignment-baseline",f),h&&(a.style.font=h);var g=r.textPadding;if(ag(a,"x",o),ag(a,"y",s),og(a,r,!0,t),t instanceof Py||t.style.transformText)ig(a,t.transform);else{if(t.transform)hA.copy(e),hA.applyTransform(t.transform),e=hA;else{var v=t.transformCoordToGlobal(e.x,e.y);e.x=v[0],e.y=v[1],t.transform=gt(pt())}var m=r.textOrigin;"center"===m?(o=n.width/2+o,s=n.height/2+s):m&&(o=m[0]+o,s=m[1]+s);var y=-r.textRotation||0,_=pt();_t(_,_,y),yt(_,_,v=[t.transform[4],t.transform[5]]),ig(a,_)}var b=i.split("\n"),x=b.length,w=c;"left"===w?(w="start",g&&(o+=g[3])):"right"===w?(w="end",g&&(o-=g[1])):"center"===w&&(w="middle",g&&(o+=(g[3]-g[1])/2));var S=0;if("after-edge"===f?(S=-n.height+d,g&&(S-=g[2])):"middle"===f?(S=(-n.height+d)/2,g&&(s+=(g[0]-g[2])/2)):g&&(S+=g[0]),t.__text!==i||t.__textFont!==h){var T=t.__tspanList||[];for(t.__tspanList=T,M=0;M<x;M++)(k=T[M])?k.innerHTML="":(k=T[M]=eg("tspan"),a.appendChild(k),ag(k,"alignment-baseline",f),ag(k,"text-anchor",w)),ag(k,"x",o),ag(k,"y",s+M*d+S),k.appendChild(document.createTextNode(b[M]));for(;M<T.length;M++)a.removeChild(T[M]);T.length=x,t.__text=i,t.__textFont=h}else if(t.__tspanList.length)for(var O=t.__tspanList.length,M=0;M<O;++M){var k=t.__tspanList[M];k&&(ag(k,"x",o),ag(k,"y",s+M*d+S))}}};cA.drawRectText=fA,cA.brush=function(t){var e=t.style;null!=e.text&&(e.textPosition=[0,0],fA(t,{x:e.x||0,y:e.y||0,width:0,height:0},t.getBoundingRect()))},ug.prototype={diff:function(t,e,n){n||(n=function(t,e){return t===e}),this.equals=n;var r=this;t=t.slice();var i=(e=e.slice()).length,a=t.length,o=1,s=i+a,u=[{newPos:-1,components:[]}],l=this.extractCommon(u[0],e,t,0);if(u[0].newPos+1>=i&&l+1>=a){for(var c=[],h=0;h<e.length;h++)c.push(h);return[{indices:c,count:e.length}]}for(;o<=s;){var f=function(){for(var n=-1*o;n<=o;n+=2){var s,l=u[n-1],c=u[n+1],h=(c?c.newPos:0)-n;l&&(u[n-1]=void 0);var f=l&&l.newPos+1<i,d=c&&0<=h&&h<a;if(f||d){if(!f||d&&l.newPos<c.newPos?(s=cg(c),r.pushComponent(s.components,void 0,!0)):((s=l).newPos++,r.pushComponent(s.components,!0,void 0)),h=r.extractCommon(s,e,t,n),s.newPos+1>=i&&h+1>=a)return lg(0,s.components);u[n]=s}else u[n]=void 0}o++}();if(f)return f}},pushComponent:function(t,e,n){var r=t[t.length-1];r&&r.added===e&&r.removed===n?t[t.length-1]={count:r.count+1,added:e,removed:n}:t.push({count:1,added:e,removed:n})},extractCommon:function(t,e,n,r){for(var i=e.length,a=n.length,o=t.newPos,s=o-r,u=0;o+1<i&&s+1<a&&this.equals(e[o+1],n[s+1]);)o++,s++,u++;return u&&t.components.push({count:u}),t.newPos=o,s},tokenize:function(t){return t.slice()},join:function(t){return t.slice()}};var dA=new ug;hg.prototype.createElement=eg,hg.prototype.getDefs=function(t){var e=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");return 0===n.length?t?((n=e.insertBefore(this.createElement("defs"),e.firstChild)).contains||(n.contains=function(t){var e=n.children;if(!e)return!1;for(var r=e.length-1;r>=0;--r)if(e[r]===t)return!0;return!1}),n):null:n[0]},hg.prototype.update=function(t,e){if(t){var n=this.getDefs(!1);if(t[this._domName]&&n.contains(t[this._domName]))"function"==typeof e&&e(t);else{var r=this.add(t);r&&(t[this._domName]=r)}}},hg.prototype.addDom=function(t){this.getDefs(!0).appendChild(t)},hg.prototype.removeDom=function(t){var e=this.getDefs(!1);e&&t[this._domName]&&(e.removeChild(t[this._domName]),t[this._domName]=null)},hg.prototype.getDoms=function(){var t=this.getDefs(!1);if(!t)return[];var e=[];return f(this._tagNames,function(n){var r=t.getElementsByTagName(n);e=e.concat([].slice.call(r))}),e},hg.prototype.markAllUnused=function(){var t=this;f(this.getDoms(),function(e){e[t._markLabel]="0"})},hg.prototype.markUsed=function(t){t&&(t[this._markLabel]="1")},hg.prototype.removeUnused=function(){var t=this.getDefs(!1);if(t){var e=this;f(this.getDoms(),function(n){"1"!==n[e._markLabel]&&t.removeChild(n)})}},hg.prototype.getSvgProxy=function(t){return t instanceof Zn?uA:t instanceof Xe?lA:t instanceof Py?cA:uA},hg.prototype.getTextSvgElement=function(t){return t.__textSvgEl},hg.prototype.getSvgElement=function(t){return t.__svgEl},l(fg,hg),fg.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var n=this;f(["fill","stroke"],function(r){if(e.style[r]&&("linear"===e.style[r].type||"radial"===e.style[r].type)){var i,a=e.style[r],o=n.getDefs(!0);a._dom?(i=a._dom,o.contains(a._dom)||n.addDom(i)):i=n.add(a),n.markUsed(e);var s=i.getAttribute("id");t.setAttribute(r,"url(#"+s+")")}})}},fg.prototype.add=function(t){var e;if("linear"===t.type)e=this.createElement("linearGradient");else{if("radial"!==t.type)return null;e=this.createElement("radialGradient")}return t.id=t.id||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-gradient-"+t.id),this.updateDom(t,e),this.addDom(e),e},fg.prototype.update=function(t){var e=this;hg.prototype.update.call(this,t,function(){var n=t.type,r=t._dom.tagName;"linear"===n&&"linearGradient"===r||"radial"===n&&"radialGradient"===r?e.updateDom(t,t._dom):(e.removeDom(t),e.add(t))})},fg.prototype.updateDom=function(t,e){if("linear"===t.type)e.setAttribute("x1",t.x),e.setAttribute("y1",t.y),e.setAttribute("x2",t.x2),e.setAttribute("y2",t.y2);else{if("radial"!==t.type)return;e.setAttribute("cx",t.x),e.setAttribute("cy",t.y),e.setAttribute("r",t.r)}e.setAttribute("gradientUnits",t.global?"userSpaceOnUse":"objectBoundingBox"),e.innerHTML="";for(var n=t.colorStops,r=0,i=n.length;r<i;++r){var a=this.createElement("stop");a.setAttribute("offset",100*n[r].offset+"%"),a.setAttribute("stop-color",n[r].color),e.appendChild(a)}t._dom=e},fg.prototype.markUsed=function(t){if(t.style){var e=t.style.fill;e&&e._dom&&hg.prototype.markUsed.call(this,e._dom),(e=t.style.stroke)&&e._dom&&hg.prototype.markUsed.call(this,e._dom)}},l(dg,hg),dg.prototype.update=function(t){var e=this.getSvgElement(t);e&&this.updateDom(e,t.__clipPaths,!1);var n=this.getTextSvgElement(t);n&&this.updateDom(n,t.__clipPaths,!0),this.markUsed(t)},dg.prototype.updateDom=function(t,e,n){if(e&&e.length>0){var r,i,a=this.getDefs(!0),o=e[0],s=n?"_textDom":"_dom";o[s]?(i=o[s].getAttribute("id"),a.contains(r=o[s])||a.appendChild(r)):(i="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(r=this.createElement("clipPath")).setAttribute("id",i),a.appendChild(r),o[s]=r);var u=this.getSvgProxy(o);if(o.transform&&o.parent.invTransform&&!n){var l=Array.prototype.slice.call(o.transform);mt(o.transform,o.parent.invTransform,o.transform),u.brush(o),o.transform=l}else u.brush(o);var c=this.getSvgElement(o);r.innerHTML="",r.appendChild(c.cloneNode()),t.setAttribute("clip-path","url(#"+i+")"),e.length>1&&this.updateDom(r,e.slice(1),n)}else t&&t.setAttribute("clip-path","none")},dg.prototype.markUsed=function(t){var e=this;t.__clipPaths&&t.__clipPaths.length>0&&f(t.__clipPaths,function(t){t._dom&&hg.prototype.markUsed.call(e,t._dom),t._textDom&&hg.prototype.markUsed.call(e,t._textDom)})},l(pg,hg),pg.prototype.addWithoutUpdate=function(t,e){if(e&&gg(e.style)){var n,r=e.style;r._shadowDom?(n=r._shadowDom,this.getDefs(!0).contains(r._shadowDom)||this.addDom(n)):n=this.add(e),this.markUsed(e);var i=n.getAttribute("id");t.style.filter="url(#"+i+")"}},pg.prototype.add=function(t){var e=this.createElement("filter"),n=t.style;return n._shadowDomId=n._shadowDomId||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-shadow-"+n._shadowDomId),this.updateDom(t,e),this.addDom(e),e},pg.prototype.update=function(t,e){var n=e.style;if(gg(n)){var r=this;hg.prototype.update.call(this,e,function(t){r.updateDom(e,t._shadowDom)})}else this.remove(t,n)},pg.prototype.remove=function(t,e){null!=e._shadowDomId&&(this.removeDom(e),t.style.filter="")},pg.prototype.updateDom=function(t,e){var n=e.getElementsByTagName("feDropShadow");n=0===n.length?this.createElement("feDropShadow"):n[0];var r,i,a,o,s=t.style,u=t.scale&&t.scale[0]||1,l=t.scale&&t.scale[1]||1;if(s.shadowBlur||s.shadowOffsetX||s.shadowOffsetY)r=s.shadowOffsetX||0,i=s.shadowOffsetY||0,a=s.shadowBlur,o=s.shadowColor;else{if(!s.textShadowBlur)return void this.removeDom(e,s);r=s.textShadowOffsetX||0,i=s.textShadowOffsetY||0,a=s.textShadowBlur,o=s.textShadowColor}n.setAttribute("dx",r/u),n.setAttribute("dy",i/l),n.setAttribute("flood-color",o),n.setAttribute("stdDeviation",a/2/u+" "+a/2/l),e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width",Math.ceil(a/2*200)+"%"),e.setAttribute("height",Math.ceil(a/2*200)+"%"),e.appendChild(n),s._shadowDom=e},pg.prototype.markUsed=function(t){var e=t.style;e&&e._shadowDom&&hg.prototype.markUsed.call(this,e._shadowDom)};var pA=function(t,e,n,r){this.root=t,this.storage=e,this._opts=n=a({},n||{});var i=eg("svg");i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("version","1.1"),i.setAttribute("baseProfile","full"),i.style.cssText="user-select:none;position:absolute;left:0;top:0;",this.gradientManager=new fg(r,i),this.clipPathManager=new dg(r,i),this.shadowManager=new pg(r,i);var o=document.createElement("div");o.style.cssText="overflow:hidden;position:relative",this._svgRoot=i,this._viewport=o,t.appendChild(o),o.appendChild(i),this.resize(n.width,n.height),this._visibleList=[]};pA.prototype={constructor:pA,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getViewportRootOffset:function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},refresh:function(){var t=this.storage.getDisplayList(!0);this._paintList(t)},setBackgroundColor:function(t){this._viewport.style.background=t},_paintList:function(t){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var e,n=this._svgRoot,r=this._visibleList,i=t.length,a=[];for(e=0;e<i;e++){var o=mg(d=t[e]),s=Sg(d)||wg(d);d.invisible||(d.__dirty&&(o&&o.brush(d),this.clipPathManager.update(d),d.style&&(this.gradientManager.update(d.style.fill),this.gradientManager.update(d.style.stroke),this.shadowManager.update(s,d)),d.__dirty=!1),a.push(d))}var u,l=dA.diff(r,a,void 0);for(e=0;e<l.length;e++)if((h=l[e]).removed)for(f=0;f<h.count;f++){s=Sg(d=r[h.indices[f]]);var c=wg(d);xg(n,s),xg(n,c)}for(e=0;e<l.length;e++){var h=l[e];if(h.added)for(f=0;f<h.count;f++)s=Sg(d=a[h.indices[f]]),c=wg(d),u?_g(n,s,u):bg(n,s),s?_g(n,c,s):u?_g(n,c,u):bg(n,c),_g(n,c,s),u=c||s||u,this.gradientManager.addWithoutUpdate(s,d),this.shadowManager.addWithoutUpdate(u,d),this.clipPathManager.markUsed(d);else if(!h.removed)for(var f=0;f<h.count;f++){var d=a[h.indices[f]];u=s=wg(d)||Sg(d)||u,this.gradientManager.markUsed(d),this.gradientManager.addWithoutUpdate(s,d),this.shadowManager.markUsed(d),this.shadowManager.addWithoutUpdate(s,d),this.clipPathManager.markUsed(d)}}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=a},_getDefs:function(t){var e=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");return 0===n.length?t?((n=e.insertBefore(eg("defs"),e.firstChild)).contains||(n.contains=function(t){var e=n.children;if(!e)return!1;for(var r=e.length-1;r>=0;--r)if(e[r]===t)return!0;return!1}),n):null:n[0]},resize:function(t,e){var n=this._viewport;n.style.display="none";var r=this._opts;if(null!=t&&(r.width=t),null!=e&&(r.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||this._height!==e){this._width=t,this._height=e;var i=n.style;i.width=t+"px",i.height=e+"px";var a=this._svgRoot;a.setAttribute("width",t),a.setAttribute("height",e)}},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(t){var e=this._opts,n=["width","height"][t],r=["clientWidth","clientHeight"][t],i=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var o=this.root,s=document.defaultView.getComputedStyle(o);return(o[r]||vg(s[n])||vg(o.style[n]))-(vg(s[i])||0)-(vg(s[a])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},pathToDataUrl:function(){return this.refresh(),"data:image/svg+xml;charset=UTF-8,"+this._svgRoot.outerHTML}},f(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(t){pA.prototype[t]=function(){}}),rn("svg",pA),t.version="4.2.0",t.dependencies={zrender:"4.0.5"},t.PRIORITY=ax,t.init=function(t,e,n){var r=io(t);if(r)return r;var i=new za(t,e,n);return i.id="ec_"+Sx++,bx[i.id]=i,vn(t,Ox,i.id),function(t){function e(t,e){for(var r=0;r<t.length;r++)t[r][n]=e}var n="__connectUpdateStatus";Kb(dx,function(r,i){t._messageCenter.on(i,function(r){if(xx[t.group]&&0!==t[n]){if(r&&r.escapeConnect)return;var i=t.makeActionFromEvent(r),a=[];Kb(bx,function(e){e!==t&&e.group===t.group&&a.push(e)}),e(a,0),Kb(a,function(t){1!==t[n]&&t.dispatchAction(i)}),e(a,2)}})})}(i),i},t.connect=function(t){if(y(t)){var e=t;t=null,Kb(e,function(e){null!=e.group&&(t=e.group)}),t=t||"g_"+Tx++,Kb(e,function(e){e.group=t})}return xx[t]=!0,t},t.disConnect=ro,t.disconnect=Mx,t.dispose=function(t){"string"==typeof t?t=bx[t]:t instanceof za||(t=io(t)),t instanceof za&&!t.isDisposed()&&t.dispose()},t.getInstanceByDom=io,t.getInstanceById=function(t){return bx[t]},t.registerTheme=ao,t.registerPreprocessor=oo,t.registerProcessor=so,t.registerPostUpdate=function(t){vx.push(t)},t.registerAction=uo,t.registerCoordinateSystem=lo,t.getCoordinateSystemDimensions=function(t){var e=ji.get(t);if(e)return e.getDimensionsInfo?e.getDimensionsInfo():e.dimensions.slice()},t.registerLayout=co,t.registerVisual=ho,t.registerLoading=po,t.extendComponentModel=go,t.extendComponentView=vo,t.extendSeriesModel=mo,t.extendChartView=yo,t.setCanvasCreator=function(t){e("createCanvas",t)},t.registerMap=function(t,e,n){$b.registerMap(t,e,n)},t.getMap=function(t){var e=$b.retrieveMap(t);return e&&e[0]&&{geoJson:e[0].geoJSON,specialAreas:e[0].specialAreas}},t.dataTool={},t.zrender=gm,t.number=v_,t.format=S_,t.throttle=ma,t.helper=vw,t.matrix=tv,t.vector=Gg,t.color=mv,t.parseGeoJSON=yw,t.parseGeoJson=ww,t.util=Sw,t.graphic=Tw,t.List=jx,t.Model=Vr,t.Axis=xw,t.env=Mg}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.G2_3=e():t.G2_3=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=371)}([function(t,e,n){var r=n(68),i=r.mix({},r,{assign:r.mix,merge:r.deepMix,cloneDeep:r.clone,isFinite:isFinite,isNaN:isNaN,snapEqual:r.isNumberEqual,remove:r.pull,inArray:r.contains,toAllPadding:function(t){var e=0,n=0,r=0,a=0;return i.isNumber(t)||i.isString(t)?e=n=r=a=t:i.isArray(t)?(e=t[0],r=i.isNil(t[1])?t[0]:t[1],a=i.isNil(t[2])?t[0]:t[2],n=i.isNil(t[3])?r:t[3]):i.isObject(t)&&(e=t.top||0,r=t.right||0,a=t.bottom||0,n=t.left||0),[e,r,a,n]}});i.Array={groupToMap:r.groupToMap,group:r.group,merge:r.merge,values:r.valuesOfKey,getRange:r.getRange,firstValue:r.firstValue,remove:r.pull},t.exports=i},function(t,e,n){var r=n(67),i={};r.merge(i,r,{mixin:function(t,e){var n=t.CFG?"CFG":"ATTRS";if(t&&e){t._mixins=e,t[n]=t[n]||{};var r={};i.each(e,function(e){i.augment(t,e);var a=e[n];a&&i.merge(r,a)}),t[n]=i.merge(r,t[n])}}}),t.exports=i},function(t,e,n){var r=n(28),i=n(4);t.exports=function(t,e){if(t)if(i(t))for(var n=0,a=t.length;n<a&&!1!==e(t[n],n);n++);else if(r(t))for(var o in t)if(t.hasOwnProperty(o)&&!1===e(t[o],o))break}},function(t,e,n){var r=n(0),i=n(126),a={version:"3.2.8",renderer:"canvas",trackable:!0,trackingInfo:{},animate:!0,widthRatio:{column:.5,rose:.9999999,multiplePie:1/1.3},showSinglePoint:!1,connectNulls:!1,scales:{},registerTheme:function(t,e){i[t]=e},setTheme:function(t){var e;e=r.isObject(t)?t:-1!==r.indexOf(Object.keys(i),t)?i[t]:i.default,r.deepMix(a,e)}};a.setTheme("default"),t.exports=a},function(t,e,n){var r=n(13),i=Array.isArray?Array.isArray:function(t){return r(t,"Array")};t.exports=i},function(t,e,n){var r=n(1),i=n(241),a=n(94),o=n(44),s=function t(e){t.superclass.constructor.call(this,e)};s.ATTRS={},r.extend(s,a),r.augment(s,i,{isShape:!0,drawInner:function(t){var e=this._attrs;this.createPath(t);var n=t.globalAlpha;if(this.hasFill()){var i=e.fillOpacity;r.isNil(i)||1===i?t.fill():(t.globalAlpha=i,t.fill(),t.globalAlpha=n)}if(this.hasStroke()&&this._attrs.lineWidth>0){var a=e.strokeOpacity;r.isNil(a)||1===a||(t.globalAlpha=a),t.stroke()}this.afterPath(t)},afterPath:function(){},isHitBox:function(){return!0},isHit:function(t,e){var n=[t,e,1];if(this.invert(n),this.isHitBox()){var r=this.getBBox();if(r&&!o.box(r.minX,r.maxX,r.minY,r.maxY,n[0],n[1]))return!1}var i=this._attrs.clip;return i?(i.invert(n,this.get("canvas")),!!i.isPointInPath(n[0],n[1])&&this.isPointInPath(n[0],n[1])):this.isPointInPath(n[0],n[1])},calculateBox:function(){return null},getHitLineWidth:function(){var t=this._attrs;return(t.lineWidth||0)+(t.lineAppendWidth||0)},clearTotalMatrix:function(){this._cfg.totalMatrix=null,this._cfg.region=null},clearBBox:function(){this._cfg.box=null,this._cfg.region=null},getBBox:function(){var t=this._cfg.box;return t||((t=this.calculateBox())&&(t.x=t.minX,t.y=t.minY,t.width=t.maxX-t.minX,t.height=t.maxY-t.minY),this._cfg.box=t),t}}),t.exports=s},function(t,e,n){var r=n(153);t.exports=r},function(t,e){t.exports=function(t){return null===t||void 0===t}},function(t,e,n){var r=n(13);t.exports=function(t){return r(t,"Number")}},function(t,e,n){var r=n(13);t.exports=function(t){return r(t,"String")}},function(t,e,n){var r=n(13);t.exports=function(t){return r(t,"Function")}},function(t,e){t.exports=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)}},function(t,e){function n(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}t.exports=function(t,e,r,i){return e&&n(t,e),r&&n(t,r),i&&n(t,i),t}},function(t,e){var n={}.toString;t.exports=function(t,e){return n.call(t)==="[object "+e+"]"}},function(t,e,n){var r=n(12),i=n(2),a=n(28),o=n(7),s=function(){function t(t){this._initDefaultCfg(),r(this,t),this.init()}var e=t.prototype;return e._initDefaultCfg=function(){this.type="base",this.formatter=null,this.range=[0,1],this.ticks=null,this.values=[]},e.init=function(){},e.getTicks=function(){var t=this,e=[];return i(t.ticks,function(n){var r;r=a(n)?n:{text:t.getText(n),tickValue:n,value:t.scale(n)},e.push(r)}),e},e.getText=function(t,e){var n=this.formatter;return t=n?n(t,e):t,!o(t)&&t.toString||(t=""),t.toString()},e.rangeMin=function(){return this.range[0]},e.rangeMax=function(){var t=this.range;return t[t.length-1]},e.invert=function(t){return t},e.translate=function(t){return t},e.scale=function(t){return t},e.clone=function(){var t=this,e=t.constructor,n={};return i(t,function(e,r){n[r]=t[r]}),new e(n)},e.change=function(t){return this.ticks=null,r(this,t),this.init(),this},t}();t.exports=s},function(t,e,n){var r=n(288),i=n(16);t.exports=function(t,e){if(t)if(i(t))for(var n=0,a=t.length;n<a&&!1!==e(t[n],n);n++);else if(r(t))for(var o in t)if(t.hasOwnProperty(o)&&!1===e(t[o],o))break}},function(t,e,n){var r=n(121),i=Array.isArray?Array.isArray:function(t){return r(t,"Array")};t.exports=i},function(t,e,n){var r=n(0),i=n(21),a=r.PathUtil,o={},s={_coord:null,draw:function(t,e){return this.drawShape?this.drawShape(t,e):null},setCoord:function(t){this._coord=t},parsePath:function(t,e){var n=this._coord;return t=a.parsePathString(t),n.isPolar&&!1!==e?i.convertPolarPath(n,t):i.convertNormalPath(n,t)},parsePoint:function(t){return this._coord.convertPoint(t)},parsePoints:function(t){var e=this._coord,n=[];return r.each(t,function(t){n.push(e.convertPoint(t))}),n}},u={defaultShapeType:null,setCoord:function(t){this._coord=t},getShape:function(t){r.isArray(t)&&(t=t[0]);var e=this[t]||this[this.defaultShapeType];return e._coord=this._coord,e},getShapePoints:function(t,e){var n=this.getShape(t);return(n.getPoints||n.getShapePoints||this.getDefaultPoints)(e)},getDefaultPoints:function(){return[]},getMarkerCfg:function(t,e){var n=this.getShape(t);return n.getMarkerCfg||(n=this.getShape(this.defaultShapeType)),n.getMarkerCfg(e)},getSelectedCfg:function(){return{}},drawShape:function(t,e,n){var r=this.getShape(t).draw(e,n);return r&&(r.setSilent("origin",e.origin),r._id=e.yIndex?e._id+e.yIndex:e._id,r.name=this.name),r}};o.registerFactory=function(t,e){var n=r.upperFirst(t),i=r.assign({},u,e);return o[n]=i,i.name=t,i},o.registerShape=function(t,e,n){var i=r.upperFirst(t),a=o[i],u=r.assign({},s,n);return a[e]=u,u},o.getShapeFactory=function(t){return this[r.upperFirst(t=t||"point")]},t.exports=o},function(t,e,n){function r(t){var e;return i.each(t,function(t){if(t)return e=t,!1}),e}var i=n(0),a=["min","max","median","start","end"],o=function(){function t(t){var e=this.getDefaultCfg();t=i.deepMix({},e,t),i.mix(this,t)}var e=t.prototype;return e.getDefaultCfg=function(){return{zIndex:1,xScales:null,yScales:null,el:null}},e._getNormalizedValue=function(t,e){return-1!==i.indexOf(a,t)?"start"===t?0:"end"===t?1:e.scale("median"===t?e.isCategory?(e.values.length-1)/2:(e.min+e.max)/2:e.isCategory?"min"===t?0:e.values.length-1:e[t]):e.scale(t)},e.parsePoint=function(t,e){var n,a,o=this.xScales,s=this.yScales;if(i.isFunction(e)&&(e=e(o,s)),i.isArray(e)&&i.isString(e[0])&&-1!==e[0].indexOf("%"))return this.parsePercentPoint(t,e);if(i.isArray(e))n=this._getNormalizedValue(e[0],r(o)),a=this._getNormalizedValue(e[1],r(s));else for(var u in e){var l=e[u];o[u]&&(n=this._getNormalizedValue(l,o[u])),s[u]&&(a=this._getNormalizedValue(l,s[u]))}return i.isNil(n)||i.isNil(a)?void 0:t.convert({x:n,y:a})},e.parsePercentPoint=function(t,e){var n=parseFloat(e[0])/100,r=parseFloat(e[1])/100,i=t.start,a=t.end,o=Math.min(i.x,a.x),s=Math.min(i.y,a.y);return{x:t.width*n+o,y:t.height*r+s}},e.setVisible=function(t){var e=this.el;e&&(e.set?e.set("visible",t):e.style.display=t?"":"none")},e.render=function(){},e.remove=function(){var t=this.el;t&&t.remove()},t}();t.exports=o},function(t,e,n){"use strict";var r=n(50);n.d(e,"a",function(){return r.e}),n.d(e,"f",function(){return r.g}),n.d(e,"d",function(){return r.f});var i=n(255);n.d(e,"e",function(){return i.a}),n.d(e,"c",function(){return i.b});var a=n(256);n.d(e,"b",function(){return a.a})},function(t,e,n){function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t){return(u.isString(t)||u.isPlainObject(t))&&(t=[t]),u.each(t,function(e,n){u.isObject(e)||(t[n]={type:e})}),t}var a=n(59),o=n(286),s=n(53),u=n(0),l=n(3),c=n(299),h=n(17),f=n(303),d=n(304),p=n(305),g=n(306),v=["color","shape","size"],m=function(t){function e(e){var n;return(n=t.call(this,e)||this).viewTheme=n.get("viewTheme"),u.assign(r(r(n)),f,d,p),n.get("container")&&n._initContainer(),n._initOptions(),n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){return{_id:null,type:"base",coord:null,attrs:{},view:null,data:[],scales:{},container:null,labelContainer:null,shapeContainer:null,attrOptions:{},styleOptions:null,selectedOptions:null,activedOptions:null,hasDefaultAdjust:!1,adjusts:null,shapeType:null,generatePoints:!1,sortable:!1,labelCfg:null,shareTooltip:!0,tooltipCfg:null,animate:!0,animateCfg:null,visible:!0}},n._initOptions=function(){var t=this.get("adjusts");t&&(t=i(t),this.set("adjusts",t))},n._createScale=function(t,e){var n=this.get("scales"),r=n[t];return r||(r=this.get("view").createScale(t,e),n[t]=r),r},n._setAttrOptions=function(t,e){this.get("attrOptions")[t]=e},n._createAttrOption=function(t,e,n,r){var i={};i.field=e,n?u.isFunction(n)?i.callback=n:i.values=n:"color"!==t&&(i.values=r),this._setAttrOptions(t,i)},n.position=function(t){return this._setAttrOptions("position",{field:t}),this},n.color=function(t,e){return this._createAttrOption("color",t,e,(this.viewTheme||l).colors),this},n.size=function(t,e){return this._createAttrOption("size",t,e,(this.viewTheme||l).sizes),this},n.shape=function(t,e){var n=this.viewTheme||l,r=this.get("type");return this._createAttrOption("shape",t,e,n.shapes[r]||[]),this},n.opacity=function(t,e){return this._createAttrOption("opacity",t,e,(this.viewTheme||l).opacities),this},n.style=function(t,e){var n,r=this.get("styleOptions");return r||this.set("styleOptions",r={}),u.isObject(t)&&(e=t,t=null),t&&(n=g(t)),r.fields=n,r.style=e,this},n.label=function(t,e,n){var r,i=this.get("labelCfg");return i||this.set("labelCfg",i={}),t&&(r=g(t)),i.fields=r,u.isFunction(e)?(n||(n={}),n.content=e):u.isObject(e)&&(n=e),i.cfg=n,this},n.tooltip=function(t,e){var n,r=this.get("tooltipCfg");return r||(r={}),!1===t?this.set("tooltipCfg",!1):(t&&(n=g(t)),r.fields=n,r.cfg=e),this.set("tooltipCfg",r),this},n.animate=function(t){return this.set("animateCfg",t),this},n.active=function(t,e){return!1===t?this.set("allowActive",!1):u.isObject(t)?(this.set("allowActive",!0),this.set("activedOptions",t)):(this.set("allowActive",!0),this.set("activedOptions",e)),this},n.adjust=function(t){return this.get("hasDefaultAdjust")||(t&&(t=i(t)),this.set("adjusts",t)),this},n.select=function(t,e){return!1===t?this.set("allowSelect",!1):u.isObject(t)?(this.set("allowSelect",!0),this.set("selectedOptions",t)):(this.set("allowSelect",!0),this.set("selectedOptions",e)),this},n.hasAdjust=function(t){var e=this.get("adjusts");if(!t)return!1;var n=!1;return u.each(e,function(e){if(e.type===t)return n=!0,!1}),n},n.hasStack=function(){var t=this.get("isStacked");return u.isNil(t)&&(t=this.hasAdjust("stack"),this.set("isStacked",t)),t},n.isInCircle=function(){var t=this.get("coord");return t&&t.isPolar},n._initContainer=function(){var t=this.get("shapeContainer");if(!t){var e=this.get("container"),n=this.get("view"),r=n&&n.get("_id");t=e.addGroup({viewId:r,visible:this.get("visible")}),this.set("shapeContainer",t)}},n.init=function(){var t=this;if(t._initContainer(),t._initAttrs(),t.get("tooltipCfg")&&t.get("tooltipCfg").fields){var e=t.get("tooltipCfg").fields;u.each(e,function(e){t._createScale(e)})}var n=t._processData();t.get("adjusts")&&t._adjust(n),t.set("dataArray",n)},n._initAttrs=function(){var t=this.get("attrs"),e=this.get("attrOptions"),n=this.get("coord"),r=this.viewTheme||l,i=!1;for(var o in e)if(e.hasOwnProperty(o)){var s=e[o],c=u.upperFirst(o),h=g(s.field);"position"===o&&(s.coord=n,1===h.length&&"theta"===n.type&&(h.unshift("1"),i=!0));for(var f=[],d=0;d<h.length;d++){var p=this._createScale(h[d]);"color"===o&&u.isNil(s.values)&&(s.values=p.values.length<=8?i?r.colors_pie:r.colors:p.values.length<=16?i?r.colors_pie_16:r.colors_16:r.colors_24,u.isNil(s.values)&&(s.values=r.colors)),f.push(p)}if("theta"===n.type&&"position"===o&&f.length>1){var v=f[1];v.change({nice:!1,min:0,max:Math.max.apply(null,v.values)})}s.scales=f;var m=new a[c](s);t[o]=m}},n._processData=function(){for(var t=this.get("data"),e=[],n=this._groupData(t),r=0;r<n.length;r++){var i=this._saveOrigin(n[r]);this._numberic(i),e.push(i)}return e},n._groupData=function(t){var e=this._getGroupScales().map(function(t){return t.field});return u.Array.group(t,e)},n._saveOrigin=function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i={};for(var a in r)i[a]=r[a];i._origin=r,e.push(i)}return e},n._numberic=function(t){for(var e=this.getAttr("position").scales,n=0;n<t.length;n++)for(var r=t[n],i=0;i<Math.min(2,e.length);i++){var a=e[i];if(a.isCategory){var o=a.field;r[o]=a.translate(r[o])}}},n._getGroupScales=function(){var t=this.get("groupScales");if(!t){t=[];var e=this.get("attrs");u.each(e,function(e){-1!==v.indexOf(e.type)&&u.each(e.scales,function(e){e.isCategory&&-1===u.indexOf(t,e)&&t.push(e)})}),this.set("groupScales",t)}return t},n._updateStackRange=function(t,e,n){for(var r=u.Array.merge(n),i=e.min,a=e.max,o=0;o<r.length;o++){var s=r[o],l=Math.min.apply(null,s[t]),c=Math.max.apply(null,s[t]);l<i&&(i=l),c>a&&(a=c)}(i<e.min||a>e.max)&&e.change({min:i,max:a})},n._adjust=function(t){var e=this,n=e.get("adjusts"),r=this.viewTheme||l,i=e.getYScale(),a=e.getXScale(),s=a.field,c=i?i.field:null;u.each(n,function(n){var l=u.mix({xField:s,yField:c},n),h=u.upperFirst(n.type);if("Dodge"===h){var f=[];if(a.isCategory||a.isIdentity)f.push("x");else{if(i)throw new Error("dodge is not support linear attribute, please use category attribute!");f.push("y")}l.adjustNames=f,l.dodgeRatio=r.widthRatio.column}else if("Stack"===h){var d=e.get("coord");if(!i){l.height=d.getHeight();var p=e.getDefaultValue("size")||3;l.size=p}!d.isTransposed&&u.isNil(l.reverseOrder)&&(l.reverseOrder=!0)}new o[h](l).processAdjust(t),"Stack"===h&&i&&e._updateStackRange(c,i,t)})},n.setCoord=function(t){this.set("coord",t);var e=this.getAttr("position");this.get("shapeContainer").setMatrix(t.matrix),e&&(e.coord=t)},n.paint=function(){var t=this.get("dataArray"),e=[],n=this.getShapeFactory();n.setCoord(this.get("coord"));var r=this.get("shapeContainer");this._beforeMapping(t);for(var i=0;i<t.length;i++){var a=t[i],o=i;a=this._mapping(a),e.push(a),this.draw(a,r,n,o)}this.get("labelCfg")&&this._addLabels(u.union.apply(null,e)),this.get("sortable")?this.set("dataArray",e):this._sort(e)},n._sort=function(t){var e=this.getXScale(),n=e.field;u.each(t,function(t){t.sort(function(t,r){return e.translate(t._origin[n])-e.translate(r._origin[n])})}),this.set("dataArray",t)},n._beforeMapping=function(t){var e=this;if(e.get("sortable")){var n=e.getXScale(),r=n.field;u.each(t,function(t){t.sort(function(t,e){return n.translate(t[r])-n.translate(e[r])})})}e.get("generatePoints")&&(u.each(t,function(t){e._generatePoints(t)}),u.each(t,function(e,n){var r=t[n+1];r&&(e[0].nextPoints=r[0].points)}))},n._addLabels=function(t){var e=this,n=e.get("type"),r=e.get("viewTheme")||l,i=e.get("coord"),a=c.getLabelsClass(i.type,n),o=e.get("container"),s=u.map(e.get("labelCfg").fields,function(t){return e._createScale(t)}),h=o.addGroup(a,{_id:this.get("_id"),labelCfg:u.mix({scales:s},e.get("labelCfg")),coord:i,geom:e,geomType:n,viewTheme:r,visible:e.get("visible")});h.showLabels(t),e.set("labelContainer",h)},n.getShapeFactory=function(){var t=this.get("shapeFactory");if(!t){var e=this.get("shapeType");t=h.getShapeFactory(e),this.set("shapeFactory",t)}return t},n._generatePoints=function(t){for(var e=this.getShapeFactory(),n=this.getAttr("shape"),r=0;r<t.length;r++){var i=t[r],a=this.createShapePointsCfg(i),o=n?this._getAttrValues(n,i):null,s=e.getShapePoints(o,a);i.points=s}},n.createShapePointsCfg=function(t){var e=this.getXScale(),n=this.getYScale();return{x:this._normalizeValues(t[e.field],e),y:n?this._normalizeValues(t[n.field],n):t.y?t.y:.1,y0:n?n.scale(this.getYMinValue()):void 0}},n.getYMinValue=function(){var t=this.getYScale(),e=t.min,n=t.max;return e>=0?e:n<=0?n:0},n._normalizeValues=function(t,e){var n=[];if(u.isArray(t))for(var r=0;r<t.length;r++)n.push(e.scale(t[r]));else n=e.scale(t);return n},n._mapping=function(t){for(var e=this.get("attrs"),n=[],r=0;r<t.length;r++){var i=t[r],a={};for(var o in a._origin=i._origin,a.points=i.points,a.nextPoints=i.nextPoints,e)if(e.hasOwnProperty(o)){var s=e[o],l=s.names,c=this._getAttrValues(s,i);if(l.length>1)for(var h=0;h<c.length;h++){var f=c[h];a[l[h]]=u.isArray(f)&&1===f.length?f[0]:f}else a[l[0]]=1===c.length?c[0]:c}n.push(a)}return n},n._getAttrValues=function(t,e){for(var n=t.scales,r=[],i=0;i<n.length;i++){var a=n[i];r.push("identity"===a.type?a.value:e[a.field])}return t.mapping.apply(t,r)},n.getAttrValue=function(t,e){var n=this.getAttr(t),r=null;return n&&(r=this._getAttrValues(n,e)[0]),r},n.getDefaultValue=function(t){var e=this.get(t),n=this.getAttr(t);if(n){var r=n.getScale(t);"identity"===r.type&&(e=r.value)}return e},n.draw=function(t,e,n,r){for(var i=0;i<t.length;i++)this.drawPoint(t[i],e,n,r+i)},n.getCallbackCfg=function(t,e,n){if(!t)return e;var r={},i=t.map(function(t){return n[t]});return u.each(e,function(t,e){r[e]=u.isFunction(t)?t.apply(null,i):t}),r},n._getShapeId=function(t){var e=this.get("_id"),n=this.get("keyFields");if(n&&n.length>0)u.each(n,function(n){e+="-"+t[n]});else{var r,i=this.get("type"),a=this.getXScale(),o=this.getYScale();r=a.isIdentity?a.value:t[a.field||"x"],e+="interval"===i||"schema"===i?"-"+r:"line"===i||"area"===i||"path"===i?"-"+i:"-"+r+"-"+t[o.field||"y"];var s=this._getGroupScales();u.isEmpty(s)||u.each(s,function(n){"identity"!==n.type&&(e+="-"+t[n.field])})}return e},n.getDrawCfg=function(t){var e={origin:t,x:t.x,y:t.y,color:t.color,size:t.size,shape:t.shape,isInCircle:this.isInCircle(),opacity:t.opacity},n=this.get("styleOptions");return n&&n.style&&(e.style=this.getCallbackCfg(n.fields,n.style,t._origin)),this.get("generatePoints")&&(e.points=t.points,e.nextPoints=t.nextPoints),this.get("animate")&&(e._id=this._getShapeId(t._origin)),e},n.appendShapeInfo=function(t,e){t&&(t.setSilent("index",e),t.setSilent("coord",this.get("coord")),this.get("animate")&&this.get("animateCfg")&&t.setSilent("animateCfg",this.get("animateCfg")))},n.drawPoint=function(t,e,n,r){var i=t.shape,a=this.getDrawCfg(t),o=n.drawShape(i,a,e);this.appendShapeInfo(o,r)},n.getAttr=function(t){return this.get("attrs")[t]},n.getXScale=function(){return this.getAttr("position").scales[0]},n.getYScale=function(){return this.getAttr("position").scales[1]},n.getShapes=function(){var t=[],e=this.get("shapeContainer").get("children");return u.each(e,function(e){e.get("origin")&&t.push(e)}),t},n.getAttrsForLegend=function(){var t=this.get("attrs"),e=[];return u.each(t,function(t){-1!==v.indexOf(t.type)&&e.push(t)}),e},n.getFieldsForLegend=function(){var t=[],e=this.get("attrOptions");return u.each(v,function(n){var r=e[n];r&&r.field&&u.isString(r.field)&&(t=t.concat(r.field.split("*")))}),u.uniq(t)},n.changeVisible=function(t,e){this.set("visible",t);var n=this.get("shapeContainer");n&&n.set("visible",t);var r=this.get("labelContainer");r&&r.set("visible",t),!e&&n&&n.get("canvas").draw()},n.reset=function(){this.set("attrOptions",{}),this.clearInner()},n.clearInner=function(){this.clearActivedShapes(),this.clearSelected();var t=this.get("shapeContainer");t&&t.clear();var e=this.get("labelContainer");e&&e.remove(),this.set("attrs",{}),this.set("groupScales",null),this.set("labelContainer",null),this.set("xDistance",null),this.set("isStacked",null)},n.clear=function(){this.clearInner(),this.set("scales",{})},n.destroy=function(){this.clear();var e=this.get("shapeContainer");e&&e.remove(),this.offEvents(),t.prototype.destroy.call(this)},n.bindEvents=function(){this.get("view")&&(this._bindActiveAction(),this._bindSelectedAction())},n.offEvents=function(){this.get("view")&&(this._offActiveAction(),this._offSelectedAction())},e}(s);t.exports=m},function(t,e,n){function r(t,e){var n=t.getCenter();return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function i(t,e){for(var n=t.length,r=[t[0]],i=1;i<n;i+=2){var a=e.convertPoint({x:t[i],y:t[i+1]});r.push(a.x,a.y)}return r}var a=n(0),o=n(301),s={getLinePath:function(t,e){return function(t,e){if(!t.length)return[];for(var n=[],r=0,i=t.length;r<i;r++){var a=t[r];n.push(0===r?["M",a.x,a.y]:["L",a.x,a.y])}return e&&n.push(["Z"]),n}(t,e)},getSplinePath:function(t,e,n){var r=[],i=t[0],u=null;if(t.length<=2)return s.getLinePath(t,e);a.each(t,function(t){u&&u.x===t.x&&u.y===t.y||(r.push(t.x),r.push(t.y),u=t)});var l=o.catmullRom2bezier(r,e,n=n||[[0,0],[1,1]]);return l.unshift(["M",i.x,i.y]),l},getPointRadius:function(t,e){return r(t,e)},getPointAngle:function(t,e){var n=t.getCenter();return Math.atan2(e.y-n.y,e.x-n.x)},convertNormalPath:function(t,e){var n=[];return a.each(e,function(e){switch(e[0].toLowerCase()){case"m":case"l":case"c":n.push(i(e,t));break;case"z":default:n.push(e)}}),n},convertPolarPath:function(t,e){var n,o,s=[];return a.each(e,function(a,u){switch(a[0].toLowerCase()){case"m":case"c":case"q":s.push(i(a,t));break;case"l":n=e[u-1],o=a,(t.isTransposed?n[n.length-2]===o[1]:n[n.length-1]===o[2])?s=s.concat(function(t,e,n){var i=n.startAngle,a=n.endAngle,o={x:t[1],y:t[2]},s={x:e[1],y:e[2]},u=[],l=n.isTransposed?"y":"x",c=Math.abs(s[l]-o[l])*(a-i),h=s[l]>=o[l]?1:0,f=c>Math.PI?1:0,d=n.convertPoint(s),p=r(n,d);if(p>=.5)if(c===2*Math.PI){var g=n.convertPoint({x:(s.x+o.x)/2,y:(s.y+o.y)/2});u.push(["A",p,p,0,f,h,g.x,g.y]),u.push(["A",p,p,0,f,h,d.x,d.y])}else u.push(["A",p,p,0,f,h,d.x,d.y]);return u}(n,o,t)):s.push(i(a,t));break;case"z":default:s.push(a)}}),function(t){a.each(t,function(e,n){if("a"===e[0].toLowerCase()){var r=t[n-1],i=t[n+1];i&&"a"===i[0].toLowerCase()?r&&"l"===r[0].toLowerCase()&&(r[0]="M"):r&&"a"===r[0].toLowerCase()&&i&&"l"===i[0].toLowerCase()&&(i[0]="M")}})}(s),s}};t.exports=s},function(t,e,n){var r=n(7);t.exports=function(t){return r(t)?"":t.toString()}},function(t,e,n){var r=n(40),i=n(13);t.exports=function(t){if(!r(t)||!i(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}},function(t,e,n){var r=n(1),i=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,a=/[^\s\,]+/gi,o={};t.exports={parseRadius:function(t){var e=0,n=0,i=0,a=0;return r.isArray(t)?1===t.length?e=n=i=a=t[0]:2===t.length?(e=i=t[0],n=a=t[1]):3===t.length?(e=t[0],n=a=t[1],i=t[2]):(e=t[0],n=t[1],i=t[2],a=t[3]):e=n=i=a=t,{r1:e,r2:n,r3:i,r4:a}},parsePath:function(t){return r.isArray(t=t||[])?t:r.isString(t)?(t=t.match(i),r.each(t,function(e,n){if((e=e.match(a))[0].length>1){var i=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=i}r.each(e,function(t,n){isNaN(t)||(e[n]=+t)}),t[n]=e}),t):void 0},numberToColor:function(t){var e=o[t];if(!e){for(var n=t.toString(16),r=n.length;r<6;r++)n="0"+n;o[t]=e="#"+n}return e}}},function(t,e,n){"use strict";function r(t,e){return function(n){return t+n*e}}function i(t,e){var n=e-t;return n?r(t,n):Object(a.a)(isNaN(t)?e:t)}e.c=function(t,e){var n=e-t;return n?r(t,n>180||n<-180?n-360*Math.round(n/360):n):Object(a.a)(isNaN(t)?e:t)},e.b=function(t){return 1==(t=+t)?i:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Object(a.a)(isNaN(e)?n:e)}},e.a=i;var a=n(114)},function(t,e,n){function r(t,e){return i(e)?e:t.invert(t.scale(e))}var i=n(9),a=n(4),o=n(12),s=n(2),u=function(){function t(t){this.type="base",this.name=null,this.method=null,this.values=[],this.scales=[],this.linear=null,o(this,t)}var e=t.prototype;return e._getAttrValue=function(t,e){var n=this.values;if(t.isCategory&&!this.linear)return n[t.translate(e)%n.length];var r=t.scale(e);return this.getLinearValue(r)},e.getLinearValue=function(t){var e=this.values,n=e.length-1,r=Math.floor(n*t),i=e[r];return i+((r===n?i:e[r+1])-i)*(n*t-r)},e.callback=function(t){var e=this.scales[0];return"identity"===e.type?e.value:this._getAttrValue(e,t)},e.getNames=function(){for(var t=this.names,e=Math.min(this.scales.length,t.length),n=[],r=0;r<e;r++)n.push(t[r]);return n},e.getFields=function(){var t=[];return s(this.scales,function(e){t.push(e.field)}),t},e.getScale=function(t){return this.scales[this.names.indexOf(t)]},e.mapping=function(){for(var t=this.scales,e=this.callback,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r;if(e){for(var o=0,s=r.length;o<s;o++)r[o]=this._toOriginParam(r[o],t[o]);a=e.apply(this,r)}return[].concat(a)},e._toOriginParam=function(t,e){var n=t;if(!e.isLinear)if(a(t)){n=[];for(var i=0,o=t.length;i<o;i++)n.push(r(e,t[i]))}else n=r(e,t);return n},t}();t.exports=u},function(t,e,n){var r=n(54),i=function(){function t(t){this._initDefaultCfg(),r(this,t)}var e=t.prototype;return e._initDefaultCfg=function(){this.adjustNames=["x","y"]},e.processAdjust=function(){},t}();t.exports=i},function(t,e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){var e=void 0===t?"undefined":n(t);return null!==t&&"object"===e||"function"===e}},function(t,e,n){var r=n(7),i=n(2),a=n(14),o=n(145),s=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n._initDefaultCfg=function(){t.prototype._initDefaultCfg.call(this),this.type="linear",this.isLinear=!0,this.nice=!1,this.min=null,this.minLimit=null,this.max=null,this.maxLimit=null,this.tickCount=null,this.tickInterval=null,this.minTickInterval=null,this.snapArray=null},n.init=function(){if(this.ticks){var t=this.ticks,e=this.translate(t[0]),n=this.translate(t[t.length-1]);(r(this.min)||this.min>e)&&(this.min=e),(r(this.max)||this.max<n)&&(this.max=n)}else this.min=this.translate(this.min),this.max=this.translate(this.max),this.initTicks()},n.calculateTicks=function(){var t=this.min,e=this.max,n=this.minLimit,r=this.maxLimit,i=this.tickCount,a=this.tickInterval,s=this.minTickInterval,u=this.snapArray;if(1===i)throw new Error("linear scale'tickCount should not be 1");if(e<t)throw new Error("max: "+e+" should not be less than min: "+t);return o({min:t,max:e,minLimit:n,maxLimit:r,minCount:i,maxCount:i,interval:a,minTickInterval:s,snapArray:u}).ticks},n.initTicks=function(){var t=this,e=t.calculateTicks();if(t.nice)t.ticks=e,t.min=e[0],t.max=e[e.length-1];else{var n=[];i(e,function(e){e>=t.min&&e<=t.max&&n.push(e)}),n.length||(n.push(t.min),n.push(t.max)),t.ticks=n}},n.scale=function(t){if(r(t))return NaN;var e=this.max,n=this.min;if(e===n)return 0;var i=(t-n)/(e-n),a=this.rangeMin();return a+i*(this.rangeMax()-a)},n.invert=function(t){var e=(t-this.rangeMin())/(this.rangeMax()-this.rangeMin());return this.min+e*(this.max-this.min)},e}(a);a.Linear=s,t.exports=s},function(t,e,n){var r=n(11),i=Array.prototype.indexOf;t.exports=function(t,e){return!!r(t)&&i.call(t,e)>-1}},function(t,e,n){t.exports={mat3:n(75),vec2:n(202),vec3:n(204),transform:n(206)}},function(t,e,n){var r=n(1).vec2;t.exports={at:function(t,e,n){return(e-t)*n+t},pointDistance:function(t,e,n,i,a,o){var s=[n-t,i-e];if(r.exactEquals(s,[0,0]))return NaN;var u=[-s[1],s[0]];return r.normalize(u,u),Math.abs(r.dot([a-t,o-e],u))},box:function(t,e,n,r,i){var a=i/2,o=Math.min(t,n),s=Math.max(t,n);return{minX:o-a,minY:Math.min(e,r)-a,maxX:s+a,maxY:Math.max(e,r)+a}},len:function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))}}},function(t,e,n){function r(t,e,n,r){return{x:Math.cos(r)*n+t,y:Math.sin(r)*n+e}}function i(t,e,n,r){var i,a;return r?t<e?(i=e-t,a=2*Math.PI-n+t):t>n&&(i=2*Math.PI-t+e,a=t-n):(i=t-e,a=n-t),i>a?n:e}function a(t,e,n,r){var a=0;return n-e>=2*Math.PI&&(a=2*Math.PI),e=s.mod(e,2*Math.PI),n=s.mod(n,2*Math.PI)+a,t=s.mod(t,2*Math.PI),r?e>=n?t>n&&t<e?t:i(t,n,e,!0):t<e||t>n?t:i(t,e,n):e<=n?e<t&&t<n?t:i(t,e,n,!0):t>e||t<n?t:i(t,n,e)}function o(t,e,n,r,i,o,u,l,c){var h=[u,l],f=s.vec2.subtract([],h,[t,e]),d=s.vec2.angleTo([1,0],f);d=a(d,r,i,o);var p=[n*Math.cos(d)+t,n*Math.sin(d)+e];return c&&(c.x=p[0],c.y=p[1]),s.vec2.distance(p,h)}var s=n(1);t.exports={nearAngle:a,projectPoint:function(t,e,n,r,i,a,s,u){var l={};return o(t,e,n,r,i,a,s,u,l),l},pointDistance:o,box:function(t,e,n,i,o,u){var l=Math.PI/2,c=Math.PI,h=3*Math.PI/2,f=[],d=a(0,i,o,u);0===d&&f.push(r(t,e,n,0)),(d=a(l,i,o,u))===l&&f.push(r(t,e,n,l)),(d=a(c,i,o,u))===c&&f.push(r(t,e,n,c)),(d=a(h,i,o,u))===h&&f.push(r(t,e,n,h)),f.push(r(t,e,n,i)),f.push(r(t,e,n,o));var p=1/0,g=-1/0,v=1/0,m=-1/0;return s.each(f,function(t){p>t.x&&(p=t.x),g<t.x&&(g=t.x),v>t.y&&(v=t.y),m<t.y&&(m=t.y)}),{minX:p,minY:v,maxX:g,maxY:m}}}},function(t,e,n){function r(t,e,n,r,i,a,o){var d,p,g,v,m,y,_;if(!e.fill){var b=e.arrowLength||h,x=e.arrowAngle?e.arrowAngle*s/180:f;_=c(r-a,n-i),m=Math.abs(e.lineWidth*l(_))/2,y=Math.abs(e.lineWidth*u(_))/2,o&&(m=-m,y=-y),d=i+b*l(_+x/2),p=a+b*u(_+x/2),g=i+b*l(_-x/2),v=a+b*u(_-x/2),t.beginPath(),t.moveTo(d-m,p-y),t.lineTo(i-m,a-y),t.lineTo(g-m,v-y),t.moveTo(i-m,a-y),t.lineTo(i+m,a+y),t.moveTo(i,a),t.stroke()}}function i(t,e,n,r,i,s,u){var l=u?e.startArrow:e.endArrow,c=l.d,h=0,f=i-n,d=s-r,p=Math.atan(f/d);0===d&&f<0?h=Math.PI:f>0&&d>0?h=Math.PI/2-p:f<0&&d<0?h=-Math.PI/2-p:f>=0&&d<0?h=-p-Math.PI/2:f<=0&&d>0&&(h=Math.PI/2-p);var g=function(t){var e,n=[],r=a.parsePath(l.path);if(!Array.isArray(r)||0===r.length||"M"!==r[0][0]&&"m"!==r[0][0])return!1;for(var i=r.length,s=0;s<r.length;s++)e=new o(r[s],e,s===i-1),n.push(e);return n}();if(g){c&&(u?(i+=Math.sin(Math.abs(p))*c,s=s+Math.cos(Math.abs(p))*c-.5*t.lineWidth):(i-=Math.sin(Math.abs(p))*c,s=s-Math.cos(Math.abs(p))*c+.5*t.lineWidth)),t.save(),t.beginPath(),t.translate(i,s),t.rotate(h);for(var v=0;v<g.length;v++)g[v].draw(t);t.setTransform(1,0,0,1,0,0),t.fillStyle=t.strokeStyle,t.fill(),t.restore()}}var a=n(24),o=n(35),s=Math.PI,u=Math.sin,l=Math.cos,c=Math.atan2,h=10,f=s/3;t.exports={addStartArrow:function(t,e,n,a,o,s){"object"==typeof e.startArrow?i(t,e,n,a,o,s,!0):e.startArrow&&r(t,e,n,a,o,s,!0)},addEndArrow:function(t,e,n,a,o,s){"object"==typeof e.endArrow?i(t,e,n,a,o,s,!1):e.endArrow&&r(t,e,n,a,o,s,!1)}}},function(t,e,n){function r(t,e,n){return{x:n.x+t,y:n.y+e}}function i(t,e){return{x:e.x+(e.x-t.x),y:e.y+(e.y-t.y)}}function a(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function o(t,e){return(t[0]*e[0]+t[1]*e[1])/(a(t)*a(e))}function s(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(o(t,e))}var u=n(1),l=n(44),c=n(45),h=n(96),f=n(97),d=u.vec3,p=u.mat3,g=["m","l","c","a","q","h","v","t","s","z"],v=function(t,e,n){this.preSegment=e,this.isLast=n,this.init(t,e)};u.augment(v,{init:function(t,e){var n=t[0];e=e||{endPoint:{x:0,y:0}};var a,l,c,h,f=g.indexOf(n)>=0,d=f?n.toUpperCase():n,p=t,v=e.endPoint,m=p[1],y=p[2];switch(d){default:break;case"M":h=f?r(m,y,v):{x:m,y:y},this.command="M",this.params=[v,h],this.subStart=h,this.endPoint=h;break;case"L":h=f?r(m,y,v):{x:m,y:y},this.command="L",this.params=[v,h],this.subStart=e.subStart,this.endPoint=h,this.endTangent=function(){return[h.x-v.x,h.y-v.y]},this.startTangent=function(){return[v.x-h.x,v.y-h.y]};break;case"H":h=f?r(m,0,v):{x:m,y:v.y},this.command="L",this.params=[v,h],this.subStart=e.subStart,this.endPoint=h,this.endTangent=function(){return[h.x-v.x,h.y-v.y]},this.startTangent=function(){return[v.x-h.x,v.y-h.y]};break;case"V":h=f?r(0,m,v):{x:v.x,y:m},this.command="L",this.params=[v,h],this.subStart=e.subStart,this.endPoint=h,this.endTangent=function(){return[h.x-v.x,h.y-v.y]},this.startTangent=function(){return[v.x-h.x,v.y-h.y]};break;case"Q":f?(a=r(m,y,v),l=r(p[3],p[4],v)):(a={x:m,y:y},l={x:p[3],y:p[4]}),this.command="Q",this.params=[v,a,l],this.subStart=e.subStart,this.endPoint=l,this.endTangent=function(){return[l.x-a.x,l.y-a.y]},this.startTangent=function(){return[v.x-a.x,v.y-a.y]};break;case"T":l=f?r(m,y,v):{x:m,y:y},"Q"===e.command?(a=i(e.params[1],v),this.command="Q",this.params=[v,a,l],this.subStart=e.subStart,this.endPoint=l,this.endTangent=function(){return[l.x-a.x,l.y-a.y]},this.startTangent=function(){return[v.x-a.x,v.y-a.y]}):(this.command="TL",this.params=[v,l],this.subStart=e.subStart,this.endPoint=l,this.endTangent=function(){return[l.x-v.x,l.y-v.y]},this.startTangent=function(){return[v.x-l.x,v.y-l.y]});break;case"C":f?(a=r(m,y,v),l=r(p[3],p[4],v),c=r(p[5],p[6],v)):(a={x:m,y:y},l={x:p[3],y:p[4]},c={x:p[5],y:p[6]}),this.command="C",this.params=[v,a,l,c],this.subStart=e.subStart,this.endPoint=c,this.endTangent=function(){return[c.x-l.x,c.y-l.y]},this.startTangent=function(){return[v.x-a.x,v.y-a.y]};break;case"S":f?(l=r(m,y,v),c=r(p[3],p[4],v)):(l={x:m,y:y},c={x:p[3],y:p[4]}),"C"===e.command?(a=i(e.params[2],v),this.command="C",this.params=[v,a,l,c],this.subStart=e.subStart,this.endPoint=c,this.endTangent=function(){return[c.x-l.x,c.y-l.y]},this.startTangent=function(){return[v.x-a.x,v.y-a.y]}):(this.command="SQ",this.params=[v,l,c],this.subStart=e.subStart,this.endPoint=c,this.endTangent=function(){return[c.x-l.x,c.y-l.y]},this.startTangent=function(){return[v.x-l.x,v.y-l.y]});break;case"A":var _=m,b=y,x=p[3],w=p[4],S=p[5];h=f?r(p[6],p[7],v):{x:p[6],y:p[7]},this.command="A";var T=function(t,e,n,r,i,a,l){var c=u.mod(u.toRadian(l),2*Math.PI),h=t.x,f=t.y,d=e.x,p=e.y,g=Math.cos(c)*(h-d)/2+Math.sin(c)*(f-p)/2,v=-1*Math.sin(c)*(h-d)/2+Math.cos(c)*(f-p)/2,m=g*g/(i*i)+v*v/(a*a);m>1&&(i*=Math.sqrt(m),a*=Math.sqrt(m));var y=i*i*(v*v)+a*a*(g*g),_=Math.sqrt((i*i*(a*a)-y)/y);n===r&&(_*=-1),isNaN(_)&&(_=0);var b=_*i*v/a,x=_*-a*g/i,w=(h+d)/2+Math.cos(c)*b-Math.sin(c)*x,S=(f+p)/2+Math.sin(c)*b+Math.cos(c)*x,T=s([1,0],[(g-b)/i,(v-x)/a]),O=[(g-b)/i,(v-x)/a],M=[(-1*g-b)/i,(-1*v-x)/a],k=s(O,M);return o(O,M)<=-1&&(k=Math.PI),o(O,M)>=1&&(k=0),0===r&&k>0&&(k-=2*Math.PI),1===r&&k<0&&(k+=2*Math.PI),[t,w,S,i,a,T,k,c,r]}(v,h,w,S,_,b,x);this.params=T;var O=e.subStart;this.subStart=O,this.endPoint=h;var M=T[5]%(2*Math.PI);u.isNumberEqual(M,2*Math.PI)&&(M=0);var k=T[6]%(2*Math.PI);u.isNumberEqual(k,2*Math.PI)&&(k=0);var C=.001;this.startTangent=function(){0===S&&(C*=-1);var t=T[3]*Math.cos(M-C)+T[1],e=T[4]*Math.sin(M-C)+T[2];return[t-O.x,e-O.y]},this.endTangent=function(){var t=T[6];t-2*Math.PI<1e-4&&(t=0);var e=T[3]*Math.cos(M+t+C)+T[1],n=T[4]*Math.sin(M+t-C)+T[2];return[v.x-e,v.y-n]};break;case"Z":this.command="Z",this.params=[v,e.subStart],this.subStart=e.subStart,this.endPoint=e.subStart}},isInside:function(t,e,n){var r=this.command,i=this.params,a=this.box;if(a&&!l.box(a.minX,a.maxX,a.minY,a.maxY,t,e))return!1;switch(r){default:break;case"M":return!1;case"TL":case"L":case"Z":return l.line(i[0].x,i[0].y,i[1].x,i[1].y,n,t,e);case"SQ":case"Q":return l.quadraticline(i[0].x,i[0].y,i[1].x,i[1].y,i[2].x,i[2].y,n,t,e);case"C":return l.cubicline(i[0].x,i[0].y,i[1].x,i[1].y,i[2].x,i[2].y,i[3].x,i[3].y,n,t,e);case"A":var o=i,s=o[1],u=o[2],c=o[3],h=o[4],f=o[5],g=o[6],v=o[7],m=o[8],y=c>h?c:h,_=c>h?1:c/h,b=c>h?h/c:1;o=[t,e,1];var x=[1,0,0,0,1,0,0,0,1];return p.translate(x,x,[-s,-u]),p.rotate(x,x,-v),p.scale(x,x,[1/_,1/b]),d.transformMat3(o,o,x),l.arcline(0,0,y,f,f+g,1-m,n,o[0],o[1])}return!1},draw:function(t){var e,n,r,i=this.params;switch(this.command){default:break;case"M":t.moveTo(i[1].x,i[1].y);break;case"TL":case"L":t.lineTo(i[1].x,i[1].y);break;case"SQ":case"Q":t.quadraticCurveTo((e=i[1]).x,e.y,(n=i[2]).x,n.y);break;case"C":t.bezierCurveTo((e=i[1]).x,e.y,(n=i[2]).x,n.y,(r=i[3]).x,r.y);break;case"A":var a=i[1],o=i[2],s=i[3],u=i[4],l=i[5],c=i[6],h=i[7],f=i[8],d=s>u?s:u,p=s>u?1:s/u,g=s>u?u/s:1;t.translate(a,o),t.rotate(h),t.scale(p,g),t.arc(0,0,d,l,l+c,1-f),t.scale(1/p,1/g),t.rotate(-h),t.translate(-a,-o);break;case"Z":t.closePath()}},getBBox:function(t){var e,n,r,i,a=t/2,o=this.params;switch(this.command){default:case"M":case"Z":break;case"TL":case"L":this.box={minX:Math.min(o[0].x,o[1].x)-a,maxX:Math.max(o[0].x,o[1].x)+a,minY:Math.min(o[0].y,o[1].y)-a,maxY:Math.max(o[0].y,o[1].y)+a};break;case"SQ":case"Q":for(r=0,i=(n=h.extrema(o[0].x,o[1].x,o[2].x)).length;r<i;r++)n[r]=h.at(o[0].x,o[1].x,o[2].x,n[r]);for(n.push(o[0].x,o[2].x),r=0,i=(e=h.extrema(o[0].y,o[1].y,o[2].y)).length;r<i;r++)e[r]=h.at(o[0].y,o[1].y,o[2].y,e);e.push(o[0].y,o[2].y),this.box={minX:Math.min.apply(Math,n)-a,maxX:Math.max.apply(Math,n)+a,minY:Math.min.apply(Math,e)-a,maxY:Math.max.apply(Math,e)+a};break;case"C":for(r=0,i=(n=c.extrema(o[0].x,o[1].x,o[2].x,o[3].x)).length;r<i;r++)n[r]=c.at(o[0].x,o[1].x,o[2].x,o[3].x,n[r]);for(r=0,i=(e=c.extrema(o[0].y,o[1].y,o[2].y,o[3].y)).length;r<i;r++)e[r]=c.at(o[0].y,o[1].y,o[2].y,o[3].y,e[r]);n.push(o[0].x,o[3].x),e.push(o[0].y,o[3].y),this.box={minX:Math.min.apply(Math,n)-a,maxX:Math.max.apply(Math,n)+a,minY:Math.min.apply(Math,e)-a,maxY:Math.max.apply(Math,e)+a};break;case"A":var s=o[1],u=o[2],l=o[3],d=o[4],p=o[5],g=o[7],v=o[8],m=p,y=p+o[6],_=f.xExtrema(g,l,d),b=1/0,x=-1/0,w=[m,y];for(r=2*-Math.PI;r<=2*Math.PI;r+=Math.PI){var S=_+r;1===v?m<S&&S<y&&w.push(S):y<S&&S<m&&w.push(S)}for(r=0,i=w.length;r<i;r++){var T=f.xAt(g,l,d,s,w[r]);T<b&&(b=T),T>x&&(x=T)}var O=f.yExtrema(g,l,d),M=1/0,k=-1/0,C=[m,y];for(r=2*-Math.PI;r<=2*Math.PI;r+=Math.PI){var E=O+r;1===v?m<E&&E<y&&C.push(E):y<E&&E<m&&C.push(E)}for(r=0,i=C.length;r<i;r++){var A=f.yAt(g,l,d,u,C[r]);A<M&&(M=A),A>k&&(k=A)}this.box={minX:b-a,maxX:x+a,minY:M-a,maxY:k+a}}}}),t.exports=v},function(t,e,n){"use strict";e.a=function(t,e){return e-=t=+t,function(n){return t+e*n}}},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}var a=n(31),o=n(12),s=a.mat3,u=a.vec3,l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=this.getDefaultCfg();o(this,n,e),this.init()}return i(t,[{key:"getDefaultCfg",value:function(){return{isTransposed:!1,matrix:[1,0,0,0,1,0,0,0,1]}}}]),i(t,[{key:"init",value:function(){var t=this.start,e=this.end;this.center={x:(t.x+e.x)/2,y:(t.y+e.y)/2},this.width=Math.abs(e.x-t.x),this.height=Math.abs(e.y-t.y)}},{key:"_swapDim",value:function(t){var e=this[t];if(e){var n=e.start;e.start=e.end,e.end=n}}},{key:"getCenter",value:function(){return this.center}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"convertDim",value:function(t,e){var n=this[e],r=n.start;return r+t*(n.end-r)}},{key:"invertDim",value:function(t,e){var n=this[e],r=n.start;return(t-r)/(n.end-r)}},{key:"convertPoint",value:function(t){return t}},{key:"invertPoint",value:function(t){return t}},{key:"applyMatrix",value:function(t,e){var n=[t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0];return u.transformMat3(n,n,this.matrix),n}},{key:"invertMatrix",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=s.invert([],this.matrix),i=[t,e,n];return u.transformMat3(i,i,r),i}},{key:"convert",value:function(t){var e=this.convertPoint(t),n=this.applyMatrix(e.x,e.y,1);return{x:n[0],y:n[1]}}},{key:"invert",value:function(t){var e=this.invertMatrix(t.x,t.y,1);return this.invertPoint({x:e[0],y:e[1]})}},{key:"rotate",value:function(t){var e=this.matrix,n=this.center;return s.translate(e,e,[-n.x,-n.y]),s.rotate(e,e,t),s.translate(e,e,[n.x,n.y]),this}},{key:"reflect",value:function(t){switch(t){case"x":this._swapDim("x");break;case"y":this._swapDim("y");break;default:this._swapDim("y")}return this}},{key:"scale",value:function(t,e){var n=this.matrix,r=this.center;return s.translate(n,n,[-r.x,-r.y]),s.scale(n,n,[t,e]),s.translate(n,n,[r.x,r.y]),this}},{key:"translate",value:function(t,e){var n=this.matrix;return s.translate(n,n,[t,e]),this}},{key:"transpose",value:function(){return this.isTransposed=!this.isTransposed,this}}]),t}();t.exports=l},function(t,e,n){var r=n(0),i=n(129).LabelsRenderer,a=n(6).Group,o=n(316),s=n(3),u=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){return{_id:null,zIndex:4,ticks:null,line:null,tickLine:null,subTickCount:0,subTickLine:null,grid:null,label:{textStyle:{},autoRotate:!0,formatter:null},title:{autoRotate:!0,textStyle:{}},autoPaint:!0}},n._beforeRenderUI=function(){var t=this.get("title"),e=this.get("label"),n=this.get("grid"),i=this.get("viewTheme")||s;t&&this.setSilent("title",r.deepMix({autoRotate:!0,textStyle:{fontSize:12,fill:"#ccc",textBaseline:"middle",fontFamily:i.fontFamily,textAlign:"center"},offset:48},t)),e&&this.setSilent("label",r.deepMix({autoRotate:!0,textStyle:{fontSize:12,fill:"#ccc",textBaseline:"middle",fontFamily:i.fontFamily},offset:10},e)),n&&this.setSilent("grid",r.deepMix({lineStyle:{lineWidth:1,stroke:"#C0D0E0"}},n))},n._renderUI=function(){this.get("label")&&this.renderLabels(),this.get("autoPaint")&&this.paint(),r.isNil(this.get("title"))||this.renderTitle(),this.sort()},n._parseTicks=function(t){for(var e=(t=t||[]).length,n=0;n<e;n++){var i=t[n];r.isObject(i)||(t[n]=this.parseTick(i,n,e))}return this.set("ticks",t),t},n._parseCatTicks=function(t){for(var e=(t=t||[]).length,n=0;n<e;n++){var i=t[n];r.isObject(i)||(t[n]=this.parseTick(i,n,e))}return this.set("ticks",t),t},n._addTickItem=function(t,e,n,r){void 0===r&&(r="");var i=this.get("tickItems"),a=this.get("subTickItems"),o=this.getTickEnd(e,n,t),s={x1:e.x,y1:e.y,x2:o.x,y2:o.y};i||(i=[]),a||(a=[]),"sub"===r?a.push(s):i.push(s),this.set("tickItems",i),this.set("subTickItems",a)},n._renderLine=function(){var t,e=this.get("line");if(e){t=this.getLinePath(),e=r.mix({path:t},e);var n=this.addShape("path",{attrs:e});n.name="axis-line",this.get("appendInfo")&&n.setSilent("appendInfo",this.get("appendInfo")),this.set("lineShape",n)}},n._processCatTicks=function(){var t=this.get("label"),e=this.get("tickLine"),n=this.get("ticks");n=this._parseTicks(n);for(var r=this._getNormalizedTicks(n),i=0;i<r.length;i+=3){var a=this.getTickPoint(r[i]),o=this.getTickPoint(r[i+1]),s=this.getTickPoint(r[i+2]),u=Math.floor(i/3),l=n[u];e&&(0===u&&this._addTickItem(u,o,e.length),this._addTickItem(u,s,e.length)),t&&this.addLabel(l,a,u)}},n._getNormalizedTicks=function(t){var e=0;t.length>1&&(e=(t[1].value-t[0].value)/2);for(var n=[],i=0;i<t.length;i++){var a=t[i];n.push(a.value,a.value-e,a.value+e)}var o=r.Array.getRange(n);return n.map(function(t){return(t-o.min)/(o.max-o.min)})},n._processTicks=function(){var t=this,e=t.get("label"),n=t.get("subTickCount"),i=t.get("tickLine"),a=t.get("ticks");if(a=t._parseTicks(a),r.each(a,function(n,r){var a=t.getTickPoint(n.value,r);i&&t._addTickItem(r,a,i.length),e&&t.addLabel(n,a,r)}),n){var o=t.get("subTickLine");r.each(a,function(e,r){if(r>0){var s=e.value-a[r-1].value;s/=t.get("subTickCount")+1;for(var u=1;u<=n;u++){var l,c=t.getTickPoint(r?a[r-1].value+u*s:u*s);l=o&&o.length?o.length:parseInt(.6*i.length,10),t._addTickItem(u-1,c,l,"sub")}}})}},n._addTickLine=function(t,e){var n=r.mix({},e),i=[];r.each(t,function(t){i.push(["M",t.x1,t.y1]),i.push(["L",t.x2,t.y2])}),delete n.length,n.path=i;var a=this.addShape("path",{attrs:n});a.name="axis-ticks",a._id=this.get("_id")+"-ticks",a.set("coord",this.get("coord")),this.get("appendInfo")&&a.setSilent("appendInfo",this.get("appendInfo"))},n._renderTicks=function(){var t=this.get("tickItems"),e=this.get("subTickItems");if(!r.isEmpty(t)){var n=this.get("tickLine");this._addTickLine(t,n)}if(!r.isEmpty(e)){var i=this.get("subTickLine")||this.get("tickLine");this._addTickLine(e,i)}},n._renderGrid=function(){var t=this.get("grid");t&&(t.coord=this.get("coord"),t.appendInfo=this.get("appendInfo"),this.set("gridGroup",this.addGroup(o,t)))},n.paint=function(){var t=this.get("tickLine"),e=!0;t&&t.hasOwnProperty("alignWithLabel")&&(e=t.alignWithLabel),this._renderLine();var n=this.get("type");"cat"!==n&&"timeCat"!==n||!1!==e?this._processTicks():this._processCatTicks(),this._renderTicks(),this._renderGrid();var r=this.get("label");r&&r.autoRotate&&this.autoRotateLabels()},n.parseTick=function(t,e,n){return{text:t,value:e/(n-1)}},n.getTextAnchor=function(t){return Math.abs(t[1]/t[0])>=1?"center":t[0]>0?"start":"end"},n.getMaxLabelWidth=function(t){var e=t.get("children"),n=0;return r.each(e,function(t){var e=t.getBBox().width;n<e&&(n=e)}),n},n.remove=function(){t.prototype.remove.call(this);var e=this.get("gridGroup");e&&e.remove(),this.removeLabels()},n.autoRotateLabels=function(){},n.renderTitle=function(){},n.getLinePath=function(){},n.getTickPoint=function(){},n.getTickEnd=function(){},n.getSideVector=function(){},e}(a);r.assign(u.prototype,i,{addLabel:function(t,e,n){var i,a=this.get("labelsGroup"),o={};if(a){var s=this.get("_labelOffset");r.isNil(this.get("label").offset)||(s=this.get("label").offset);var u=this.getSideVector(s,e,n);e={x:e.x+u[0],y:e.y+u[1]},o.text=t.text,o.x=e.x,o.y=e.y,o.textAlign=this.getTextAnchor(u),(i=a.addLabel(o))&&(i.name="axis-label",i._id=this.get("_id")+"-"+t.tickValue,i.set("coord",this.get("coord")),this.get("appendInfo")&&i.setSilent("appendInfo",this.get("appendInfo")))}return i}}),t.exports=u},function(t,e,n){var r=n(2),i=n(11);t.exports=function(t,e){if(!i(t))return t;var n=[];return r(t,function(t,r){e(t,r)&&n.push(t)}),n}},function(t,e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){return"object"===(void 0===t?"undefined":n(t))&&null!==t}},function(t,e,n){var r=n(11);t.exports=function(t){return r(t)?Array.prototype.slice.call(t):[]}},function(t,e){t.exports=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-5;return Math.abs(t-e)<n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=function(t){e.ARRAY_TYPE=t},e.toRadian=function(t){return t*i},e.equals=function(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))};var r=e.EPSILON=1e-6,i=(e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,e.RANDOM=Math.random,Math.PI/180)},function(t,e,n){var r=n(32),i=n(96),a=n(45),o=n(33);t.exports={line:function(t,e,n,i,a,o,s){var u=r.box(t,e,n,i,a);if(!this.box(u.minX,u.maxX,u.minY,u.maxY,o,s))return!1;var l=r.pointDistance(t,e,n,i,o,s);return!isNaN(l)&&l<=a/2},polyline:function(t,e,n,r){var i=t.length-1;if(i<1)return!1;for(var a=0;a<i;a++)if(this.line(t[a][0],t[a][1],t[a+1][0],t[a+1][1],e,n,r))return!0;return!1},cubicline:function(t,e,n,r,i,o,s,u,l,c,h){return a.pointDistance(t,e,n,r,i,o,s,u,c,h)<=l/2},quadraticline:function(t,e,n,r,a,o,s,u,l){return i.pointDistance(t,e,n,r,a,o,u,l)<=s/2},arcline:function(t,e,n,r,i,a,s,u,l){return o.pointDistance(t,e,n,r,i,a,u,l)<=s/2},rect:function(t,e,n,r,i,a){return t<=i&&i<=t+n&&e<=a&&a<=e+r},circle:function(t,e,n,r,i){return Math.pow(r-t,2)+Math.pow(i-e,2)<=Math.pow(n,2)},box:function(t,e,n,r,i,a){return t<=i&&i<=e&&n<=a&&a<=r}}},function(t,e,n){function r(t,e,n,r,i){var a=1-i;return a*a*(a*r+3*i*n)+i*i*(i*t+3*a*e)}function i(t,e,n,i,a,o,u,l,c,h,f){var d,p,g,v,m,y,_,b,x=.005,w=1/0,S=[c,h];for(p=0;p<1;p+=.05)g=[r(t,n,a,u,p),r(e,i,o,l,p)],(v=s.squaredDistance(S,g))<w&&(d=p,w=v);w=1/0;for(var T=0;T<32&&!(x<1e-4);T++)b=d+x,g=[r(t,n,a,u,_=d-x),r(e,i,o,l,_)],v=s.squaredDistance(S,g),_>=0&&v<w?(d=_,w=v):(y=[r(t,n,a,u,b),r(e,i,o,l,b)],m=s.squaredDistance(S,y),b<=1&&m<w?(d=b,w=m):x*=.5);return f&&(f.x=r(t,n,a,u,d),f.y=r(e,i,o,l,d)),Math.sqrt(w)}function a(t,e,n,r,i){return t*(t*(-3*e+9*n-9*r+3*i)+6*e-12*n+6*r)-3*e+3*n}var o=n(1),s=o.vec2;t.exports={at:r,derivativeAt:function(t,e,n,r,i){var a=1-i;return 3*(((e-t)*a+2*(n-e)*i)*a+(r-n)*i*i)},projectPoint:function(t,e,n,r,a,o,s,u,l,c){var h={};return i(t,e,n,r,a,o,s,u,l,c,h),h},pointDistance:i,extrema:function(t,e,n,r){var i,a,s,u=3*t-9*e+9*n-3*r,l=6*e-12*n+6*r,c=3*n-3*r,h=[];if(o.isNumberEqual(u,0))o.isNumberEqual(l,0)||(i=-c/l)>=0&&i<=1&&h.push(i);else{var f=l*l-4*u*c;o.isNumberEqual(f,0)?h.push(-l/(2*u)):f>0&&(a=(-l-(s=Math.sqrt(f)))/(2*u),(i=(-l+s)/(2*u))>=0&&i<=1&&h.push(i),a>=0&&a<=1&&h.push(a))}return h},len:function(t,e,n,r,i,s,u,l,c){o.isNil(c)&&(c=1);for(var h=(c=c>1?1:c<0?0:c)/2,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,g=0;g<12;g++){var v=h*f[g]+h,m=a(v,t,n,i,u),y=a(v,e,r,s,l);p+=d[g]*Math.sqrt(m*m+y*y)}return h*p}}},function(t,e,n){var r=n(1),i=n(5),a=n(24),o=n(35),s=function t(e){t.superclass.constructor.call(this,e)};s.Symbols={circle:function(t,e,n){return[["M",t,e],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["z"]]},"triangle-down":function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}},s.ATTRS={path:null,lineWidth:1},r.extend(s,i),r.augment(s,{type:"marker",canFill:!0,canStroke:!0,getDefaultAttrs:function(){return{x:0,y:0,lineWidth:1}},calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,r=t.radius,i=this.getHitLineWidth()/2+r;return{minX:e-i,minY:n-i,maxX:e+i,maxY:n+i}},_getPath:function(){var t=this._attrs,e=t.x,n=t.y,i=t.radius||t.r,a=t.symbol||"circle";return(r.isFunction(a)?a:s.Symbols[a])(e,n,i)},createPath:function(t){var e=this._cfg.segments;if(!e||this._cfg.hasUpdate){var n,r=a.parsePath(this._getPath());t.beginPath(),e=[];for(var i=0;i<r.length;i++)n=new o(r[i],n,i===r.length-1),e.push(n),n.draw(t);this._cfg.segments=e,this._cfg.hasUpdate=!1}else{t.beginPath();for(var s=0;s<e.length;s++)e[s].draw(t)}}}),t.exports=s},function(t,e,n){function r(t,e){var n=[],r=[];return t.length&&function t(e,i){if(1===e.length)n.push(e[0]),r.push(e[0]);else{for(var a=[],o=0;o<e.length-1;o++)0===o&&n.push(e[0]),o===e.length-2&&r.push(e[o+1]),a[o]=[(1-i)*e[o][0]+i*e[o+1][0],(1-i)*e[o][1]+i*e[o+1][1]];t(a,i)}}(t,e),{left:n,right:r.reverse()}}function i(t,e,n){var r=null,i=n;return e<i&&(i=e,r="add"),t<i&&(i=t,r="del"),{type:r,min:i}}function a(t,e,n){for(var r,i=[].concat(t),a=1/(n+1),s=o(e)[0],u=1;u<=n;u++)a*=u,0===(r=Math.floor(t.length*a))?i.unshift([s[0]*a+t[r][0]*(1-a),s[1]*a+t[r][1]*(1-a)]):i.splice(r,0,[s[0]*a+t[r][0]*(1-a),s[1]*a+t[r][1]*(1-a)]);return i}function o(t){var e=[];switch(t[0]){case"M":case"L":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"T":e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}var s=n(67),u="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",l=new RegExp("([a-z])["+u+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+u+"]*,?["+u+"]*)+)","ig"),c=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+u+"]*,?["+u+"]*","ig"),h=function(t){if(!t)return null;if(typeof t==typeof[])return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(l,function(t,r,i){var a=[],o=r.toLowerCase();if(i.replace(c,function(t,e){e&&a.push(+e)}),"m"===o&&a.length>2&&(n.push([r].concat(a.splice(0,2))),o="l",r="m"===r?"l":"L"),"o"===o&&1===a.length&&n.push([r,a[0]]),"r"===o)n.push([r].concat(a));else for(;a.length>=e[o]&&(n.push([r].concat(a.splice(0,e[o]))),e[o]););}),n},f=function(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var a=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4===r?a[3]={x:+t[0],y:+t[1]}:i-2===r&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[i-2],y:+t[i-1]}:i-4===r?a[3]=a[2]:r||(a[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(6*a[1].x-a[0].x+a[2].x)/6,(6*a[1].y-a[0].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n},d=function(t,e,n,r,i){var a=[];if(null===i&&null===r&&(r=n),t=+t,e=+e,n=+n,r=+r,null!==i){var o=Math.PI/180,s=t+n*Math.cos(-r*o),u=t+n*Math.cos(-i*o);a=[["M",s,e+n*Math.sin(-r*o)],["A",n,n,0,+(i-r>180),0,u,e+n*Math.sin(-i*o)]]}else a=[["M",t,e],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return a},p=function(t){if(!(t=h(t))||!t.length)return[["M",0,0]];var e,n,r=[],i=0,a=0,o=0,s=0,u=0;"M"===t[0][0]&&(o=i=+t[0][1],s=a=+t[0][2],u++,r[0]=["M",i,a]);for(var l,c,p=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),g=u,v=t.length;g<v;g++){if(r.push(l=[]),(e=(c=t[g])[0])!==e.toUpperCase())switch(l[0]=e.toUpperCase(),l[0]){case"A":l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],l[6]=+c[6]+i,l[7]=+c[7]+a;break;case"V":l[1]=+c[1]+a;break;case"H":l[1]=+c[1]+i;break;case"R":for(var m=2,y=(n=[i,a].concat(c.slice(1))).length;m<y;m++)n[m]=+n[m]+i,n[++m]=+n[m]+a;r.pop(),r=r.concat(f(n,p));break;case"O":r.pop(),(n=d(i,a,c[1],c[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(d(i,a,c[1],c[2],c[3])),l=["U"].concat(r[r.length-1].slice(-2));break;case"M":o=+c[1]+i,s=+c[2]+a;break;default:for(var _=1,b=c.length;_<b;_++)l[_]=+c[_]+(_%2?i:a)}else if("R"===e)n=[i,a].concat(c.slice(1)),r.pop(),r=r.concat(f(n,p)),l=["R"].concat(c.slice(-2));else if("O"===e)r.pop(),(n=d(i,a,c[1],c[2])).push(n[0]),r=r.concat(n);else if("U"===e)r.pop(),r=r.concat(d(i,a,c[1],c[2],c[3])),l=["U"].concat(r[r.length-1].slice(-2));else for(var x=0,w=c.length;x<w;x++)l[x]=c[x];if("O"!==(e=e.toUpperCase()))switch(l[0]){case"Z":i=+o,a=+s;break;case"H":i=l[1];break;case"V":a=l[1];break;case"M":o=l[l.length-2],s=l[l.length-1];break;default:i=l[l.length-2],a=l[l.length-1]}}return r},g=function(t,e,n,r){return[t,e,n,r,n,r]},v=function(t,e,n,r,i,a){return[1/3*t+2/3*n,1/3*e+2/3*r,1/3*i+2/3*n,1/3*a+2/3*r,i,a]},m=function(t,e){var n,r=p(t),i=e&&p(e),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],u=[],l="",c="",h=function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat((function t(e,n,r,i,a,o,s,u,l,c){r===i&&(r+=1);var h,f,d,p,g,v=120*Math.PI/180,m=Math.PI/180*(+a||0),y=[],_=function(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}};if(c)f=c[0],d=c[1],p=c[2],g=c[3];else{e=(h=_(e,n,-m)).x,n=h.y,u=(h=_(u,l,-m)).x,l=h.y,e===u&&n===l&&(u+=1,l+=1);var b=(e-u)/2,x=(n-l)/2,w=b*b/(r*r)+x*x/(i*i);w>1&&(r*=w=Math.sqrt(w),i*=w);var S=r*r,T=i*i,O=(o===s?-1:1)*Math.sqrt(Math.abs((S*T-S*x*x-T*b*b)/(S*x*x+T*b*b)));p=O*r*x/i+(e+u)/2,g=O*-i*b/r+(n+l)/2,f=Math.asin(((n-g)/i).toFixed(9)),d=Math.asin(((l-g)/i).toFixed(9)),f=e<p?Math.PI-f:f,d=u<p?Math.PI-d:d,f<0&&(f=2*Math.PI+f),d<0&&(d=2*Math.PI+d),s&&f>d&&(f-=2*Math.PI),!s&&d>f&&(d-=2*Math.PI)}var M=d-f;if(Math.abs(M)>v){var k=d,C=u,E=l;d=f+v*(s&&d>f?1:-1),y=t(u=p+r*Math.cos(d),l=g+i*Math.sin(d),r,i,a,0,s,C,E,[d,k,p,g])}M=d-f;var A=Math.cos(f),I=Math.sin(f),P=Math.cos(d),L=Math.sin(d),D=Math.tan(M/4),j=4/3*r*D,R=4/3*i*D,N=[e,n],B=[e+j*I,n-R*A],F=[u+j*L,l-R*P],U=[u,l];if(B[0]=2*N[0]-B[0],B[1]=2*N[1]-B[1],c)return[B,F,U].concat(y);for(var z=[],V=0,H=(y=[B,F,U].concat(y).join().split(",")).length;V<H;V++)z[V]=V%2?_(y[V-1],y[V],m).y:_(y[V],y[V+1],m).x;return z}).apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(v(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(v(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(g(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(g(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(g(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(g(e.x,e.y,e.X,e.Y))}return t},f=function(t,e){if(t[e].length>7){t[e].shift();for(var a=t[e];a.length;)s[e]="A",i&&(u[e]="A"),t.splice(e++,0,["C"].concat(a.splice(0,6)));t.splice(e,1),n=Math.max(r.length,i&&i.length||0)}},d=function(t,e,a,o,s){t&&e&&"M"===t[s][0]&&"M"!==e[s][0]&&(e.splice(s,0,["M",o.x,o.y]),a.bx=0,a.by=0,a.x=t[s][1],a.y=t[s][2],n=Math.max(r.length,i&&i.length||0))};n=Math.max(r.length,i&&i.length||0);for(var m=0;m<n;m++){r[m]&&(l=r[m][0]),"C"!==l&&(s[m]=l,m&&(c=s[m-1])),r[m]=h(r[m],a,c),"A"!==s[m]&&"C"===l&&(s[m]="C"),f(r,m),i&&(i[m]&&(l=i[m][0]),"C"!==l&&(u[m]=l,m&&(c=u[m-1])),i[m]=h(i[m],o,c),"A"!==u[m]&&"C"===l&&(u[m]="C"),f(i,m)),d(r,i,a,o,m),d(i,r,o,a,m);var y=r[m],_=i&&i[m],b=y.length,x=i&&_.length;a.x=y[b-2],a.y=y[b-1],a.bx=parseFloat(y[b-4])||a.x,a.by=parseFloat(y[b-3])||a.y,o.bx=i&&(parseFloat(_[x-4])||o.x),o.by=i&&(parseFloat(_[x-3])||o.y),o.x=i&&_[x-2],o.y=i&&_[x-1]}return i?[r,i]:r},y=/,?([a-z]),?/gi,_=function(t){return t.join(",").replace(y,"$1")},b=function(t,e,n,r,i){return t*(t*(-3*e+9*n-9*r+3*i)+6*e-12*n+6*r)-3*e+3*n},x=function(t,e,n,r,i,a,o,s,u){null===u&&(u=1);for(var l=(u=u>1?1:u<0?0:u)/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,d=0;d<12;d++){var p=l*c[d]+l,g=b(p,t,n,i,o),v=b(p,e,r,a,s);f+=h[d]*Math.sqrt(g*g+v*v)}return l*f},w=function(t,e,n,r,i,a,o,s){if(!(Math.max(t,n)<Math.min(i,o)||Math.min(t,n)>Math.max(i,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(t-n)*(a-s)-(e-r)*(i-o);if(u){var l=((t*r-e*n)*(i-o)-(t-n)*(i*s-a*o))/u,c=((t*r-e*n)*(a-s)-(e-r)*(i*s-a*o))/u,h=+l.toFixed(2),f=+c.toFixed(2);if(!(h<+Math.min(t,n).toFixed(2)||h>+Math.max(t,n).toFixed(2)||h<+Math.min(i,o).toFixed(2)||h>+Math.max(i,o).toFixed(2)||f<+Math.min(e,r).toFixed(2)||f>+Math.max(e,r).toFixed(2)||f<+Math.min(a,s).toFixed(2)||f>+Math.max(a,s).toFixed(2)))return{x:l,y:c}}}},S=function(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},T=function(t,e,n,r,i){if(i)return[["M",+t+ +i,e],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",t,e],["l",n,0],["l",0,r],["l",-n,0],["z"]];return a.parsePathArray=_,a},O=function(t,e,n,r){return null===t&&(t=e=n=r=0),null===e&&(e=t.y,n=t.width,r=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:r,h:r,x2:t+n,y2:e+r,cx:t+n/2,cy:e+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:T(t,e,n,r),vb:[t,e,n,r].join(" ")}},M=function(t,e,n,r,i,a,o,u){s.isArray(t)||(t=[t,e,n,r,i,a,o,u]);var l=(function(t,e,n,r,i,a,o,s){for(var u,l,c,h,f=[],d=[[],[]],p=0;p<2;++p)if(0===p?(l=6*t-12*n+6*i,u=-3*t+9*n-9*i+3*o,c=3*n-3*t):(l=6*e-12*r+6*a,u=-3*e+9*r-9*a+3*s,c=3*r-3*e),Math.abs(u)<1e-12){if(Math.abs(l)<1e-12)continue;(h=-c/l)>0&&h<1&&f.push(h)}else{var g=l*l-4*c*u,v=Math.sqrt(g);if(!(g<0)){var m=(-l+v)/(2*u);m>0&&m<1&&f.push(m);var y=(-l-v)/(2*u);y>0&&y<1&&f.push(y)}}for(var _,b=f.length,x=b;b--;)_=1-(h=f[b]),d[0][b]=_*_*_*t+3*_*_*h*n+3*_*h*h*i+h*h*h*o,d[1][b]=_*_*_*e+3*_*_*h*r+3*_*h*h*a+h*h*h*s;return d[0][x]=t,d[1][x]=e,d[0][x+1]=o,d[1][x+1]=s,d[0].length=d[1].length=x+2,{min:{x:Math.min.apply(0,d[0]),y:Math.min.apply(0,d[1])},max:{x:Math.max.apply(0,d[0]),y:Math.max.apply(0,d[1])}}}).apply(null,t);return O(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},k=function(t,e,n,r,i,a,o,s,u){var l=1-u,c=Math.pow(l,3),h=Math.pow(l,2),f=u*u,d=f*u,p=t+2*u*(n-t)+f*(i-2*n+t),g=e+2*u*(r-e)+f*(a-2*r+e),v=n+2*u*(i-n)+f*(o-2*i+n),m=r+2*u*(a-r)+f*(s-2*a+r);return{x:c*t+3*h*u*n+3*l*u*u*i+d*o,y:c*e+3*h*u*r+3*l*u*u*a+d*s,m:{x:p,y:g},n:{x:v,y:m},start:{x:l*t+u*n,y:l*e+u*r},end:{x:l*i+u*o,y:l*a+u*s},alpha:90-180*Math.atan2(p-v,g-m)/Math.PI}},C=function(t,e,n){if(!function(t,e){return t=O(t),e=O(e),S(e,t.x,t.y)||S(e,t.x2,t.y)||S(e,t.x,t.y2)||S(e,t.x2,t.y2)||S(t,e.x,e.y)||S(t,e.x2,e.y)||S(t,e.x,e.y2)||S(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}(M(t),M(e)))return n?0:[];for(var r=~~(x.apply(0,t)/8),i=~~(x.apply(0,e)/8),a=[],o=[],s={},u=n?0:[],l=0;l<r+1;l++){var c=k.apply(0,t.concat(l/r));a.push({x:c.x,y:c.y,t:l/r})}for(var h=0;h<i+1;h++){var f=k.apply(0,e.concat(h/i));o.push({x:f.x,y:f.y,t:h/i})}for(var d=0;d<r;d++)for(var p=0;p<i;p++){var g=a[d],v=a[d+1],m=o[p],y=o[p+1],_=Math.abs(v.x-g.x)<.001?"y":"x",b=Math.abs(y.x-m.x)<.001?"y":"x",T=w(g.x,g.y,v.x,v.y,m.x,m.y,y.x,y.y);if(T){if(s[T.x.toFixed(4)]===T.y.toFixed(4))continue;s[T.x.toFixed(4)]=T.y.toFixed(4);var C=g.t+Math.abs((T[_]-g[_])/(v[_]-g[_]))*(v.t-g.t),E=m.t+Math.abs((T[b]-m[b])/(y[b]-m[b]))*(y.t-m.t);C>=0&&C<=1&&E>=0&&E<=1&&(n?u++:u.push({x:T.x,y:T.y,t1:C,t2:E}))}}return u},E=function(t,e,n){if(1===n)return[[].concat(t)];var i=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])i=i.concat(function(t,e,n){var i=[[t[1],t[2]]];n=n||2;var a=[];"A"===e[0]?(i.push(e[6]),i.push(e[7])):"C"===e[0]?(i.push([e[1],e[2]]),i.push([e[3],e[4]]),i.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(i.push([e[1],e[2]]),i.push([e[3],e[4]])):i.push([e[1],e[2]]);for(var o=i,s=1/n,u=0;u<n-1;u++){var l=r(o,s/(1-s*u));a.push(l.left),o=l.right}return a.push(o),a.map(function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),t.length>=3&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e.concat(t[t.length-1])})}(t,e,n));else{var a=[].concat(t);"M"===a[0]&&(a[0]="L");for(var o=0;o<=n-1;o++)i.push(a)}return i},A=function(t,e){if(t.length!==e.length)return!1;var n=!0;return s.each(t,function(t,r){if(t!==e[r])return n=!1,!1}),n};t.exports={parsePathString:h,parsePathArray:_,pathTocurve:m,pathToAbsolute:p,catmullRomToBezier:f,rectPath:T,fillPath:function(t,e){if(1===t.length)return t;var n=t.length-1,r=e.length-1,i=n/r,a=[];if(1===t.length&&"M"===t[0][0]){for(var o=0;o<r-n;o++)t.push(t[0]);return t}for(var s=0;s<r;s++){var u=Math.floor(i*s);a[u]=(a[u]||0)+1}var l=a.reduce(function(e,r,i){return e.concat(i===n?t[n]:E(t[i],t[i+1],r))},[]);return l.unshift(t[0]),"Z"!==e[r]&&"z"!==e[r]||l.push("Z"),l},fillPathByDiff:function(t,e){var n=function(t,e){var n,r=t.length,a=e.length,o=0;if(0===r||0===a)return null;for(var s=[],u=0;u<=r;u++)s[u]=[],s[u][0]={min:u};for(var l=0;l<=a;l++)s[0][l]={min:l};for(var c=1;c<=r;c++){n=t[c-1];for(var h=1;h<=a;h++)o=A(n,e[h-1])?0:1,s[c][h]=i(s[c-1][h].min+1,s[c][h-1].min+1,s[c-1][h-1].min+o)}return s}(t,e),r=t.length,a=e.length,o=[],s=1,u=1;if(n[r][a]!==r){for(var l=1;l<=r;l++){var c=n[l][l].min;u=l;for(var h=s;h<=a;h++)n[l][h].min<c&&(c=n[l][h].min,u=h);n[l][s=u].type&&o.push({index:l-1,type:n[l][s].type})}for(var f=o.length-1;f>=0;f--)s=o[f].index,"add"===o[f].type?t.splice(s,0,[].concat(t[s])):t.splice(s,1)}if((r=t.length)<a)for(var d=0;d<a-r;d++)"z"===t[r-1][0]||"Z"===t[r-1][0]?t.splice(r-2,0,t[r-2]):t.push(t[r-1]);return t},formatPath:function(t,e){if(t.length<=1)return t;for(var n,r=0;r<e.length;r++)if(t[r][0]!==e[r][0])switch(n=o(t[r]),e[r][0]){case"M":t[r]=["M"].concat(n[0]);break;case"L":t[r]=["L"].concat(n[0]);break;case"A":t[r]=[].concat(e[r]),t[r][6]=n[0][0],t[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=a(n,t[r-1],1)}t[r]=["Q"].concat(n.reduce(function(t,e){return t.concat(e)},[]));break;case"T":t[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){t[r]=e[r];break}n=a(n,t[r-1],2)}t[r]=["C"].concat(n.reduce(function(t,e){return t.concat(e)},[]));break;case"S":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=a(n,t[r-1],1)}t[r]=["S"].concat(n.reduce(function(t,e){return t.concat(e)},[]));break;default:t[r]=e[r]}return t},intersection:function(t,e){return function(t,e,n){t=m(t),e=m(e);for(var r,i,a,o,s,u,l,c,h,f,d=[],p=0,g=t.length;p<g;p++){var v=t[p];if("M"===v[0])r=s=v[1],i=u=v[2];else{"C"===v[0]?(r=(h=[r,i].concat(v.slice(1)))[6],i=h[7]):(h=[r,i,r,i,s,u,s,u],r=s,i=u);for(var y=0,_=e.length;y<_;y++){var b=e[y];if("M"===b[0])a=l=b[1],o=c=b[2];else{"C"===b[0]?(a=(f=[a,o].concat(b.slice(1)))[6],o=f[7]):(f=[a,o,a,o,l,c,l,c],a=l,o=c);for(var x=C(h,f,void 0),w=0,S=x.length;w<S;w++)x[w].segment1=p,x[w].segment2=y,x[w].bez1=h,x[w].bez2=f;d=d.concat(x)}}}}return d}(t,e)}}},function(t,e,n){"use strict";function r(){return y||(x(i),y=b.now()+_)}function i(){y=0}function a(){this._call=this._time=this._next=null}function o(t,e,n){var r=new a;return r.restart(t,e,n),r}function s(){r(),++d;for(var t,e=h;e;)(t=y-e._time)>=0&&e._call.call(null,t),e=e._next;--d}function u(){y=(m=b.now())+_,d=p=0;try{s()}finally{d=0,function(){for(var t,e,n=h,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:h=e);f=t,c(r)}(),y=0}}function l(){var t=b.now(),e=t-m;e>v&&(_-=e,m=t)}function c(t){d||(p&&(p=clearTimeout(p)),t-y>24?(t<1/0&&(p=setTimeout(u,t-b.now()-_)),g&&(g=clearInterval(g))):(g||(m=b.now(),g=setInterval(l,v)),d=1,x(u)))}e.b=r,e.a=a,e.c=o,e.d=s;var h,f,d=0,p=0,g=0,v=1e3,m=0,y=0,_=0,b="object"==typeof performance&&performance.now?performance:Date,x="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};a.prototype=o.prototype={constructor:a,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?r():+n)+(null==e?0:+e),this._next||f===this||(f?f._next=this:h=this,f=this),this._call=t,this._time=n,c()},stop:function(){this._call&&(this._call=null,this._time=1/0,c())}}},function(t,e,n){"use strict";var r=n(19),i=n(112),a=n(115),o=n(116),s=n(36),u=n(117),l=n(118),c=n(114);e.a=function(t,e){var n,h=typeof e;return null==e||"boolean"===h?Object(c.a)(e):("number"===h?s.a:"string"===h?(n=Object(r.a)(e))?(e=n,i.a):l.a:e instanceof r.a?i.a:e instanceof Date?o.a:Array.isArray(e)?a.a:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?u.a:s.a)(t,e)}},function(t,e,n){"use strict";function r(){}function i(t){var e;return t=(t+"").trim().toLowerCase(),(e=b.exec(t))?new l((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=x.exec(t))?a(parseInt(e[1],16)):(e=w.exec(t))?new l(e[1],e[2],e[3],1):(e=S.exec(t))?new l(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=T.exec(t))?o(e[1],e[2],e[3],e[4]):(e=O.exec(t))?o(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=M.exec(t))?c(e[1],e[2]/100,e[3]/100,1):(e=k.exec(t))?c(e[1],e[2]/100,e[3]/100,e[4]):C.hasOwnProperty(t)?a(C[t]):"transparent"===t?new l(NaN,NaN,NaN,0):null}function a(t){return new l(t>>16&255,t>>8&255,255&t,1)}function o(t,e,n,r){return r<=0&&(t=e=n=NaN),new l(t,e,n,r)}function s(t){return t instanceof r||(t=i(t)),t?new l((t=t.rgb()).r,t.g,t.b,t.opacity):new l}function u(t,e,n,r){return 1===arguments.length?s(t):new l(t,e,n,null==r?1:r)}function l(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function c(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new f(t,e,n,r)}function h(t,e,n,a){return 1===arguments.length?function(t){if(t instanceof f)return new f(t.h,t.s,t.l,t.opacity);if(t instanceof r||(t=i(t)),!t)return new f;if(t instanceof f)return t;var e=(t=t.rgb()).r/255,n=t.g/255,a=t.b/255,o=Math.min(e,n,a),s=Math.max(e,n,a),u=NaN,l=s-o,c=(s+o)/2;return l?(u=e===s?(n-a)/l+6*(n<a):n===s?(a-e)/l+2:(e-n)/l+4,l/=c<.5?s+o:2-s-o,u*=60):l=c>0&&c<1?0:u,new f(u,l,c,t.opacity)}(t):new f(t,e,n,null==a?1:a)}function f(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function d(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}e.a=r,n.d(e,"d",function(){return g}),n.d(e,"c",function(){return v}),e.e=i,e.h=s,e.g=u,e.b=l,e.f=h;var p=n(51),g=.7,v=1/g,m="\\s*([+-]?\\d+)\\s*",y="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",_="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",b=/^#([0-9a-f]{3})$/,x=/^#([0-9a-f]{6})$/,w=new RegExp("^rgb\\("+[m,m,m]+"\\)$"),S=new RegExp("^rgb\\("+[_,_,_]+"\\)$"),T=new RegExp("^rgba\\("+[m,m,m,y]+"\\)$"),O=new RegExp("^rgba\\("+[_,_,_,y]+"\\)$"),M=new RegExp("^hsl\\("+[y,_,_]+"\\)$"),k=new RegExp("^hsla\\("+[y,_,_,y]+"\\)$"),C={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object(p.a)(r,i,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Object(p.a)(l,u,Object(p.b)(r,{brighter:function(t){return t=null==t?v:Math.pow(v,t),new l(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?g:Math.pow(g,t),new l(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Object(p.a)(f,h,Object(p.b)(r,{brighter:function(t){return t=null==t?v:Math.pow(v,t),new f(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?g:Math.pow(g,t),new f(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new l(d(t>=240?t-240:t+120,i,r),d(t,i,r),d(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}))},function(t,e,n){"use strict";e.b=function(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n},e.a=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t}},function(t,e,n){"use strict";function r(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}e.a=r,e.b=function(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),a=t[i],o=t[i+1];return r((n-i/e)*e,i>0?t[i-1]:2*a-o,a,o,i<e-1?t[i+2]:2*o-a)}}},function(t,e,n){var r=n(95),i=n(0),a=function(t){function e(e){var n,r={visible:!0},a=(n=t.call(this)||this).getDefaultCfg();return n._attrs=r,i.assign(r,a,e),n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){return{}},n.get=function(t){return this._attrs[t]},n.set=function(t,e){this._attrs[t]=e},n.show=function(){this.get("visible")||(this.set("visible",!0),this.changeVisible(!0))},n.hide=function(){this.get("visible")&&(this.set("visible",!1),this.changeVisible(!1))},n.changeVisible=function(){},n.destroy=function(){this._attrs={},this.removeAllListeners(),this.destroyed=!0},e}(r);t.exports=a},function(t,e){function n(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}t.exports=function(t,e,r,i){return e&&n(t,e),r&&n(t,r),i&&n(t,i),t}},function(t,e){t.exports=function(t){for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e}},function(t,e,n){"use strict";function r(t,e){this._groups=t,this._parents=e}function i(){return new r([[document.documentElement]],j)}n.d(e,"c",function(){return j}),e.a=r;var a=n(384),o=n(385),s=n(386),u=n(387),l=n(364),c=n(389),h=n(390),f=n(391),d=n(392),p=n(393),g=n(394),v=n(395),m=n(396),y=n(397),_=n(398),b=n(399),x=n(366),w=n(400),S=n(401),T=n(402),O=n(403),M=n(404),k=n(405),C=n(406),E=n(407),A=n(408),I=n(409),P=n(410),L=n(359),D=n(411),j=[null];r.prototype=i.prototype={constructor:r,select:a.a,selectAll:o.a,filter:s.a,data:u.a,enter:l.b,exit:c.a,merge:h.a,order:f.a,sort:d.a,call:p.a,nodes:g.a,node:v.a,size:m.a,empty:y.a,each:_.a,attr:b.a,style:x.a,property:w.a,classed:S.a,text:T.a,html:O.a,raise:M.a,lower:k.a,append:C.a,insert:E.a,remove:A.a,clone:I.a,datum:P.a,on:L.b,dispatch:D.a},e.b=i},function(t,e,n){"use strict";function r(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}n.d(e,"c",function(){return l}),n.d(e,"d",function(){return c}),n.d(e,"b",function(){return d}),n.d(e,"a",function(){return p}),e.g=function(t,e){var n=r(t,e);if(n.state>u)throw new Error("too late; already scheduled");return n},e.h=function(t,e){var n=r(t,e);if(n.state>c)throw new Error("too late; already started");return n},e.f=r;var i=n(420),a=n(139),o=Object(i.a)("start","end","interrupt"),s=[],u=0,l=1,c=2,h=3,f=4,d=5,p=6;e.e=function(t,e,n,r,i,g){var v=t.__transition;if(v){if(n in v)return}else t.__transition={};!function(t,e,n){function r(d){var g,v,m,y;if(n.state!==l)return o();for(g in u)if((y=u[g]).name===n.name){if(y.state===h)return Object(a.timeout)(r);y.state===f?(y.state=p,y.timer.stop(),y.on.call("interrupt",t,t.__data__,y.index,y.group),delete u[g]):+g<e&&(y.state=p,y.timer.stop(),delete u[g])}if(Object(a.timeout)(function(){n.state===h&&(n.state=f,n.timer.restart(i,n.delay,n.time),i(d))}),n.state=c,n.on.call("start",t,t.__data__,n.index,n.group),n.state===c){for(n.state=h,s=new Array(m=n.tween.length),g=0,v=-1;g<m;++g)(y=n.tween[g].value.call(t,t.__data__,n.index,n.group))&&(s[++v]=y);s.length=v+1}}function i(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(o),n.state=d,1),i=-1,a=s.length;++i<a;)s[i].call(null,r);n.state===d&&(n.on.call("end",t,t.__data__,n.index,n.group),o())}function o(){for(var r in n.state=p,n.timer.stop(),delete u[e],u)return;delete t.__transition}var s,u=t.__transition;u[e]=n,n.timer=Object(a.timer)(function(t){n.state=l,n.timer.restart(r,n.delay,n.time),n.delay<=t&&r(t-n.delay)},0,n.time)}(t,n,{name:e,index:r,group:i,on:o,tween:s,time:g.time,delay:g.delay,duration:g.duration,ease:g.ease,timer:null,state:u})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(383);n.d(e,"create",function(){return r.a});var i=n(345);n.d(e,"creator",function(){return i.a});var a=n(412);n.d(e,"local",function(){return a.a});var o=n(363);n.d(e,"matcher",function(){return o.a});var s=n(413);n.d(e,"mouse",function(){return s.a});var u=n(355);n.d(e,"namespace",function(){return u.a});var l=n(356);n.d(e,"namespaces",function(){return l.a});var c=n(346);n.d(e,"clientPoint",function(){return c.a});var h=n(361);n.d(e,"select",function(){return h.a});var f=n(414);n.d(e,"selectAll",function(){return f.a});var d=n(56);n.d(e,"selection",function(){return d.b});var p=n(357);n.d(e,"selector",function(){return p.a});var g=n(362);n.d(e,"selectorAll",function(){return g.a});var v=n(366);n.d(e,"style",function(){return v.b});var m=n(415);n.d(e,"touch",function(){return m.a});var y=n(416);n.d(e,"touches",function(){return y.a});var _=n(358);n.d(e,"window",function(){return _.a});var b=n(359);n.d(e,"event",function(){return b.c}),n.d(e,"customEvent",function(){return b.a})},function(t,e,n){t.exports={Position:n(281),Color:n(282),Shape:n(283),Size:n(284),Opacity:n(285),ColorUtil:n(120)}},function(t,e,n){var r=n(61),i=n(14);i.Linear=n(29),i.Identity=n(146),i.Cat=n(63),i.Time=n(147),i.TimeCat=n(150),i.Log=n(151),i.Pow=n(152);var a=function(t){if(i.hasOwnProperty(t)){var e=r(t);i[e]=function(e){return new i[t](e)}}};for(var o in i)a(o);var s=["cat","timeCat"];i.isCategory=function(t){return s.indexOf(t)>=0},t.exports=i},function(t,e,n){var r=n(22);t.exports=function(t){var e=r(t);return e.charAt(0).toLowerCase()+e.substring(1)}},function(t,e){function n(t,e){var n=t.length;if(0===n)return NaN;var r=t[0];if(e<t[0])return NaN;if(e>=t[n-1])return t[n-1];for(var i=1;i<t.length&&!(e<t[i]);i++)r=t[i];return r}function r(t,e){var n,r=t.length;if(0===r)return NaN;if(e>t[r-1])return NaN;if(e<t[0])return t[0];for(var i=1;i<t.length;i++)if(e<=t[i]){n=t[i];break}return n}var i={snapFactorTo:function(t,e,n){if(isNaN(t))return NaN;var r=1;if(0!==t){t<0&&(r=-1);var a=function(t){var e=1;if(t===1/0||t===-1/0)throw new Error("Not support Infinity!");if(t<1){for(var n=0;t<1;)e/=10,t*=10,n++;e.toString().length>12&&(e=parseFloat(e.toFixed(n)))}else for(;t>10;)e*=10,t/=10;return e}(t*=r);r*=a,t/=a}var o=(t="floor"===n?i.snapFloor(e,t):"ceil"===n?i.snapCeiling(e,t):i.snapTo(e,t))*r;return Math.abs(r)<1&&o.toString().length>12&&(o=t/parseInt(1/r)*(r>0?1:-1)),o},snapMultiple:function(t,e,n){return("ceil"===n?Math.ceil(t/e):"floor"===n?Math.floor(t/e):Math.round(t/e))*e},snapTo:function(t,e){var i=n(t,e),a=r(t,e);if(isNaN(i)||isNaN(a)){if(t[0]>=e)return t[0];var o=t[t.length-1];if(o<=e)return o}return Math.abs(e-i)<Math.abs(a-e)?i:a},snapFloor:function(t,e){return n(t,e)},snapCeiling:function(t,e){return r(t,e)},fixedBase:function(t,e){var n=e.toString(),r=n.indexOf(".");if(-1===r)return Math.round(t);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))}};t.exports=i},function(t,e,n){var r=n(14),i=n(64),a=n(2),o=n(8),s=n(9),u=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n._initDefaultCfg=function(){t.prototype._initDefaultCfg.call(this),this.type="cat",this.isCategory=!0,this.isRounding=!0},n.init=function(){var t=this.values,e=this.tickCount;if(a(t,function(e,n){t[n]=e.toString()}),!this.ticks){var n=t;e&&(n=i({maxCount:e,data:t,isRounding:this.isRounding}).ticks),this.ticks=n}},n.getText=function(e){return-1===this.values.indexOf(e)&&o(e)&&(e=this.values[Math.round(e)]),t.prototype.getText.call(this,e)},n.translate=function(t){var e=this.values.indexOf(t);return-1===e&&o(t)?e=t:-1===e&&(e=NaN),e},n.scale=function(t){var e=this.rangeMin(),n=this.rangeMax();return(s(t)||-1!==this.values.indexOf(t))&&(t=this.translate(t)),e+(this.values.length>1?t/(this.values.length-1):t)*(n-e)},n.invert=function(t){if(s(t))return t;var e=this.rangeMin(),n=this.rangeMax();t<e&&(t=e),t>n&&(t=n);var r=Math.round((t-e)/(n-e)*(this.values.length-1))%this.values.length;return this.values[r=r||0]},e}(r);r.Cat=u,t.exports=u},function(t,e,n){var r=n(2);t.exports=function(t){var e,n={},i=[],a=t.isRounding,o=function(t){var e=[];return r(t,function(t){e=e.concat(t)}),e}(t.data),s=o.length,u=t.maxCount||8;if(a?2===(e=function(t,e){var n;for(n=e;n>0&&t%n!=0;n--);if(1===n)for(n=e;n>0&&(t-1)%n!=0;n--);return n}(s-1,u-1)+1)?e=u:e<u-4&&(e=u-4):e=u,!a&&s<=e+e/2)i=[].concat(o);else{for(var l=parseInt(s/(e-1),10),c=o.map(function(t,e){return e%l==0?o.slice(e,e+l):null}).filter(function(t){return t}),h=1,f=c.length;h<f&&(a?h*l<s-l:h<e-1);h++)i.push(c[h][0]);if(o.length){i.unshift(o[0]);var d=o[s-1];-1===i.indexOf(d)&&i.push(d)}}return n.categories=o,n.ticks=i,n}},function(t,e,n){var r;!function(i){"use strict";function a(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(t[r].substr(0,e));return n}function o(t){return function(e,n,r){var i=r[t].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~i&&(e.month=i)}}function s(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}var u={},l=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,c=/\d\d?/,h=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,f=/\[([^]*?)\]/gm,d=function(){},p=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],g=["January","February","March","April","May","June","July","August","September","October","November","December"],v=a(g,3),m=a(p,3);u.i18n={dayNamesShort:m,dayNames:p,monthNamesShort:v,monthNames:g,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!=10)*t%10]}};var y={D:function(t){return t.getDate()},DD:function(t){return s(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return t.getDay()},dd:function(t){return s(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return s(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return String(t.getFullYear()).substr(2)},YYYY:function(t){return s(t.getFullYear(),4)},h:function(t){return t.getHours()%12||12},hh:function(t){return s(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return s(t.getHours())},m:function(t){return t.getMinutes()},mm:function(t){return s(t.getMinutes())},s:function(t){return t.getSeconds()},ss:function(t){return s(t.getSeconds())},S:function(t){return Math.round(t.getMilliseconds()/100)},SS:function(t){return s(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return s(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+s(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)}},_={D:[c,function(t,e){t.day=e}],Do:[new RegExp(c.source+h.source),function(t,e){t.day=parseInt(e,10)}],M:[c,function(t,e){t.month=e-1}],YY:[c,function(t,e){var n=+(""+(new Date).getFullYear()).substr(0,2);t.year=""+(e>68?n-1:n)+e}],h:[c,function(t,e){t.hour=e}],m:[c,function(t,e){t.minute=e}],s:[c,function(t,e){t.second=e}],YYYY:[/\d{4}/,function(t,e){t.year=e}],S:[/\d/,function(t,e){t.millisecond=100*e}],SS:[/\d{2}/,function(t,e){t.millisecond=10*e}],SSS:[/\d{3}/,function(t,e){t.millisecond=e}],d:[c,d],ddd:[h,d],MMM:[h,o("monthNamesShort")],MMMM:[h,o("monthNames")],a:[h,function(t,e,n){var r=e.toLowerCase();r===n.amPm[0]?t.isPm=!1:r===n.amPm[1]&&(t.isPm=!0)}],ZZ:[/([\+\-]\d\d:?\d\d|Z)/,function(t,e){"Z"===e&&(e="+00:00");var n,r=(e+"").match(/([\+\-]|\d\d)/gi);r&&(n=60*r[1]+parseInt(r[2],10),t.timezoneOffset="+"===r[0]?n:-n)}]};_.dd=_.d,_.dddd=_.ddd,_.DD=_.D,_.mm=_.m,_.hh=_.H=_.HH=_.h,_.MM=_.M,_.ss=_.s,_.A=_.a,u.masks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},u.format=function(t,e,n){var r=n||u.i18n;if("number"==typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))throw new Error("Invalid Date in fecha.format");var i=[];return(e=(e=(e=u.masks[e]||e||u.masks.default).replace(f,function(t,e){return i.push(e),"??"})).replace(l,function(e){return e in y?y[e](t,r):e.slice(1,e.length-1)})).replace(/\?\?/g,function(){return i.shift()})},u.parse=function(t,e,n){var r=n||u.i18n;if("string"!=typeof e)throw new Error("Invalid format in fecha.parse");if(e=u.masks[e]||e,t.length>1e3)return!1;var i=!0,a={};if(e.replace(l,function(e){if(_[e]){var n=_[e],o=t.search(n[0]);~o?t.replace(n[0],function(e){return n[1](a,e,r),t=t.substr(o+e.length),e}):i=!1}return _[e]?"":e.slice(1,e.length-1)}),!i)return!1;var o,s=new Date;return!0===a.isPm&&null!=a.hour&&12!=+a.hour?a.hour=+a.hour+12:!1===a.isPm&&12==+a.hour&&(a.hour=0),null!=a.timezoneOffset?(a.minute=+(a.minute||0)-+a.timezoneOffset,o=new Date(Date.UTC(a.year||s.getFullYear(),a.month||0,a.day||1,a.hour||0,a.minute||0,a.second||0,a.millisecond||0))):o=new Date(a.year||s.getFullYear(),a.month||0,a.day||1,a.hour||0,a.minute||0,a.second||0,a.millisecond||0),o},void 0!==t&&t.exports?t.exports=u:void 0!==(r=(function(){return u}).call(e,n,e,t))&&(t.exports=r)}()},function(t,e,n){var r=n(9),i=n(149);t.exports={toTimeStamp:function(t){return r(t)&&(t=t.indexOf("T")>0?new Date(t).getTime():new Date(t.replace(/-/gi,"/")).getTime()),i(t)&&(t=t.getTime()),t}}},function(t,e,n){var r=n(68);t.exports={isFunction:r.isFunction,isObject:r.isObject,isBoolean:r.isBoolean,isNil:r.isNil,isString:r.isString,isArray:r.isArray,isNumber:r.isNumber,isEmpty:r.isEmpty,uniqueId:r.uniqueId,clone:r.clone,deepMix:r.deepMix,assign:r.mix,merge:r.deepMix,upperFirst:r.upperFirst,each:r.each,isEqual:r.isEqual,toArray:r.toArray,extend:r.extend,augment:r.augment,remove:r.arrayUtil.pull,isNumberEqual:r.isNumberEqual,toRadian:r.toRadian,toDegree:r.toDegree,mod:r.mod,clamp:r.clamp,createDom:r.createDom,modifyCSS:r.modifyCSS,requestAnimationFrame:r.requestAnimationFrame,getRatio:function(){return window.devicePixelRatio?window.devicePixelRatio:2},mat3:r.mat3,vec2:r.vec2,vec3:r.vec3,transform:r.transform}},function(t,e,n){var r=n(2),i=n(12),a=n(155),o=n(167),s=n(181),u=n(184),l=n(188),c=n(31),h=n(207),f=n(211),d=n(217),p=n(222),g={DOMUtil:a,DomUtil:a,MatrixUtil:c,PathUtil:f,arrayUtil:o,domUtil:a,eventUtil:s,formatUtil:u,mathUtil:l,matrixUtil:c,objectUtil:h,stringUtil:d,pathUtil:f,typeUtil:p,augment:n(227),clone:n(76),deepMix:n(228),each:r,extend:n(229),filter:n(39),group:n(230),groupBy:n(90),groupToMap:n(89),indexOf:n(231),isEmpty:n(232),isEqual:n(91),isEqualWith:n(233),map:n(234),mix:i,pick:n(235),toArray:n(41),toString:n(22),uniqueId:n(236)};r([a,o,s,u,l,c,h,f,d,p],function(t){i(g,t)}),t.exports=g},function(t,e,n){var r=n(70),i=n(7);t.exports=function(t,e){var n=r(e),a=n.length;if(i(t))return!a;for(var o=0;o<a;o+=1){var s=n[o];if(e[s]!==t[s]||!(s in t))return!1}return!0}},function(t,e,n){var r=n(2),i=n(10),a=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return r(t,function(n,r){i(t)&&"prototype"===r||e.push(r)}),e};t.exports=a},function(t,e,n){var r=n(11),i=Array.prototype.splice;t.exports=function(t,e){if(!r(t))return[];for(var n=t?e.length:0,a=n-1;n--;){var o=void 0,s=e[n];n!==a&&s===o||(o=s,i.call(t,s,1))}return t}},function(t,e,n){var r=n(2),i=n(30);t.exports=function(t){var e=[];return r(t,function(t){i(e,t)||e.push(t)}),e}},function(t,e){t.exports=function(t,e,n){return t<e?e:t>n?n:t}},function(t,e){t.exports=parseInt},function(t,e,n){var r=n(201);r.translate=function(t,e,n){var i=new Array(9);return r.fromTranslation(i,n),r.multiply(t,i,e)},r.rotate=function(t,e,n){var i=new Array(9);return r.fromRotation(i,n),r.multiply(t,i,e)},r.scale=function(t,e,n){var i=new Array(9);return r.fromScaling(i,n),r.multiply(t,i,e)},t.exports=r},function(t,e,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(4);t.exports=function t(e){if("object"!==(void 0===e?"undefined":r(e))||null===e)return e;var n=void 0;if(i(e)){n=[];for(var a=0,o=e.length;a<o;a++)n[a]="object"===r(e[a])&&null!=e[a]?t(e[a]):e[a]}else for(var s in n={},e)n[s]="object"===r(e[s])&&null!=e[s]?t(e[s]):e[s];return n}},function(t,e){t.exports=function(t,e){return t.hasOwnProperty(e)}},function(t,e,n){var r=n(2),i=n(10),a=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return r(t,function(n,r){i(t)&&"prototype"===r||e.push(n)}),e};t.exports=a},function(t,e,n){var r=n(80);t.exports=function(t,e,n,i,a){if(a)return[["M",+t+ +a,e],["l",n-2*a,0],["a",a,a,0,0,1,a,a],["l",0,i-2*a],["a",a,a,0,0,1,-a,a],["l",2*a-n,0],["a",a,a,0,0,1,-a,-a],["l",0,2*a-i],["a",a,a,0,0,1,a,-a],["z"]];var o=[["M",t,e],["l",n,0],["l",0,i],["l",-n,0],["z"]];return o.parsePathArray=r,o}},function(t,e){var n=/,?([a-z]),?/gi;t.exports=function(t){return t.join(",").replace(n,"$1")}},function(t,e,n){var r=n(82),i=function(t,e,n,r){return[t,e,n,r,n,r]},a=function(t,e,n,r,i,a){return[1/3*t+2/3*n,1/3*e+2/3*r,1/3*i+2/3*n,1/3*a+2/3*r,i,a]};t.exports=function(t,e){var n=r(t),o=e&&r(e),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l=[],c=[],h="",f="",d=void 0,p=function(t,e,n){var r=void 0,o=void 0;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat((function t(e,n,r,i,a,o,s,u,l,c){r===i&&(r+=1);var h=120*Math.PI/180,f=Math.PI/180*(+a||0),d=[],p=void 0,g=void 0,v=void 0,m=void 0,y=void 0,_=function(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}};if(c)g=c[0],v=c[1],m=c[2],y=c[3];else{e=(p=_(e,n,-f)).x,n=p.y,u=(p=_(u,l,-f)).x,l=p.y,e===u&&n===l&&(u+=1,l+=1);var b=(e-u)/2,x=(n-l)/2,w=b*b/(r*r)+x*x/(i*i);w>1&&(r*=w=Math.sqrt(w),i*=w);var S=r*r,T=i*i,O=(o===s?-1:1)*Math.sqrt(Math.abs((S*T-S*x*x-T*b*b)/(S*x*x+T*b*b)));m=O*r*x/i+(e+u)/2,y=O*-i*b/r+(n+l)/2,g=Math.asin(((n-y)/i).toFixed(9)),v=Math.asin(((l-y)/i).toFixed(9)),g=e<m?Math.PI-g:g,v=u<m?Math.PI-v:v,g<0&&(g=2*Math.PI+g),v<0&&(v=2*Math.PI+v),s&&g>v&&(g-=2*Math.PI),!s&&v>g&&(v-=2*Math.PI)}var M=v-g;if(Math.abs(M)>h){var k=v,C=u,E=l;v=g+h*(s&&v>g?1:-1),d=t(u=m+r*Math.cos(v),l=y+i*Math.sin(v),r,i,a,0,s,C,E,[v,k,m,y])}M=v-g;var A=Math.cos(g),I=Math.sin(g),P=Math.cos(v),L=Math.sin(v),D=Math.tan(M/4),j=4/3*r*D,R=4/3*i*D,N=[e,n],B=[e+j*I,n-R*A],F=[u+j*L,l-R*P],U=[u,l];if(B[0]=2*N[0]-B[0],B[1]=2*N[1]-B[1],c)return[B,F,U].concat(d);for(var z=[],V=0,H=(d=[B,F,U].concat(d).join().split(",")).length;V<H;V++)z[V]=V%2?_(d[V-1],d[V],f).y:_(d[V],d[V+1],f).x;return z}).apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*e.x-e.bx,o=2*e.y-e.by):(r=e.x,o=e.y),t=["C",r,o].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(a(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(a(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(i(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(i(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(i(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(i(e.x,e.y,e.X,e.Y))}return t},g=function(t,e){if(t[e].length>7){t[e].shift();for(var r=t[e];r.length;)l[e]="A",o&&(c[e]="A"),t.splice(e++,0,["C"].concat(r.splice(0,6)));t.splice(e,1),d=Math.max(n.length,o&&o.length||0)}},v=function(t,e,r,i,a){t&&e&&"M"===t[a][0]&&"M"!==e[a][0]&&(e.splice(a,0,["M",i.x,i.y]),r.bx=0,r.by=0,r.x=t[a][1],r.y=t[a][2],d=Math.max(n.length,o&&o.length||0))};d=Math.max(n.length,o&&o.length||0);for(var m=0;m<d;m++){n[m]&&(h=n[m][0]),"C"!==h&&(l[m]=h,m&&(f=l[m-1])),n[m]=p(n[m],s,f),"A"!==l[m]&&"C"===h&&(l[m]="C"),g(n,m),o&&(o[m]&&(h=o[m][0]),"C"!==h&&(c[m]=h,m&&(f=c[m-1])),o[m]=p(o[m],u,f),"A"!==c[m]&&"C"===h&&(c[m]="C"),g(o,m)),v(n,o,s,u,m),v(o,n,u,s,m);var y=n[m],_=o&&o[m],b=y.length,x=o&&_.length;s.x=y[b-2],s.y=y[b-1],s.bx=parseFloat(y[b-4])||s.x,s.by=parseFloat(y[b-3])||s.y,u.bx=o&&(parseFloat(_[x-4])||u.x),u.by=o&&(parseFloat(_[x-3])||u.y),u.x=o&&_[x-2],u.y=o&&_[x-1]}return o?[n,o]:n}},function(t,e,n){function r(t,e,n,r,i){var a=[];if(null===i&&null===r&&(r=n),t=+t,e=+e,n=+n,r=+r,null!==i){var o=Math.PI/180,s=t+n*Math.cos(-r*o),u=t+n*Math.cos(-i*o);a=[["M",s,e+n*Math.sin(-r*o)],["A",n,n,0,+(i-r>180),0,u,e+n*Math.sin(-i*o)]]}else a=[["M",t,e],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return a}var i=n(83),a=n(84);t.exports=function(t){if(!(t=i(t))||!t.length)return[["M",0,0]];var e=[],n=0,o=0,s=0,u=0,l=0,c=void 0,h=void 0;"M"===t[0][0]&&(s=n=+t[0][1],u=o=+t[0][2],l++,e[0]=["M",n,o]);for(var f,d,p=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),g=l,v=t.length;g<v;g++){if(e.push(f=[]),(c=(d=t[g])[0])!==c.toUpperCase())switch(f[0]=c.toUpperCase(),f[0]){case"A":f[1]=d[1],f[2]=d[2],f[3]=d[3],f[4]=d[4],f[5]=d[5],f[6]=+d[6]+n,f[7]=+d[7]+o;break;case"V":f[1]=+d[1]+o;break;case"H":f[1]=+d[1]+n;break;case"R":for(var m=2,y=(h=[n,o].concat(d.slice(1))).length;m<y;m++)h[m]=+h[m]+n,h[++m]=+h[m]+o;e.pop(),e=e.concat(a(h,p));break;case"O":e.pop(),(h=r(n,o,d[1],d[2])).push(h[0]),e=e.concat(h);break;case"U":e.pop(),e=e.concat(r(n,o,d[1],d[2],d[3])),f=["U"].concat(e[e.length-1].slice(-2));break;case"M":s=+d[1]+n,u=+d[2]+o;break;default:for(var _=1,b=d.length;_<b;_++)f[_]=+d[_]+(_%2?n:o)}else if("R"===c)h=[n,o].concat(d.slice(1)),e.pop(),e=e.concat(a(h,p)),f=["R"].concat(d.slice(-2));else if("O"===c)e.pop(),(h=r(n,o,d[1],d[2])).push(h[0]),e=e.concat(h);else if("U"===c)e.pop(),e=e.concat(r(n,o,d[1],d[2],d[3])),f=["U"].concat(e[e.length-1].slice(-2));else for(var x=0,w=d.length;x<w;x++)f[x]=d[x];if("O"!==(c=c.toUpperCase()))switch(f[0]){case"Z":n=+s,o=+u;break;case"H":n=f[1];break;case"V":o=f[1];break;case"M":s=f[f.length-2],u=f[f.length-1];break;default:n=f[f.length-2],o=f[f.length-1]}}return e}},function(t,e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",i=new RegExp("([a-z])["+r+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+r+"]*,?["+r+"]*)+)","ig"),a=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+r+"]*,?["+r+"]*","ig");t.exports=function(t){if(!t)return null;if((void 0===t?"undefined":n(t))===n([]))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return String(t).replace(i,function(t,n,i){var o=[],s=n.toLowerCase();if(i.replace(a,function(t,e){e&&o.push(+e)}),"m"===s&&o.length>2&&(r.push([n].concat(o.splice(0,2))),s="l",n="m"===n?"l":"L"),"o"===s&&1===o.length&&r.push([n,o[0]]),"r"===s)r.push([n].concat(o));else for(;o.length>=e[s]&&(r.push([n].concat(o.splice(0,e[s]))),e[s]););}),r}},function(t,e){t.exports=function(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var a=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4===r?a[3]={x:+t[0],y:+t[1]}:i-2===r&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[i-2],y:+t[i-1]}:i-4===r?a[3]=a[2]:r||(a[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(6*a[1].x-a[0].x+a[2].x)/6,(6*a[1].y-a[0].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n}},function(t,e,n){var r=n(22);t.exports=function(t){return r(t).toLowerCase()}},function(t,e,n){var r=n(22);t.exports=function(t){return r(t).toUpperCase()}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).replace(/^\[object /,"").replace(/\]$/,"")}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(10),i=n(4),a=n(90);t.exports=function(t,e){if(!e)return{0:t};if(!r(e)){var n=i(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",r=0,i=n.length;r<i;r++)e+=t[n[r]]&&t[n[r]].toString();return e}}return a(t,e)}},function(t,e,n){var r=n(2),i=n(4),a=Object.prototype.hasOwnProperty;t.exports=function(t,e){if(!e||!i(t))return t;var n={},o=null;return r(t,function(t){o=e(t),a.call(n,o)?n[o].push(t):n[o]=[t]}),n}},function(t,e,n){var r=n(40),i=n(11),a=n(9);t.exports=function t(e,n){if(e===n)return!0;if(!e||!n)return!1;if(a(e)||a(n))return!1;if(i(e)||i(n)){if(e.length!==n.length)return!1;for(var o=!0,s=0;s<e.length&&(o=t(e[s],n[s]));s++);return o}if(r(e)||r(n)){var u=Object.keys(e),l=Object.keys(n);if(u.length!==l.length)return!1;for(var c=!0,h=0;h<u.length&&(c=t(e[u[h]],n[u[h]]));h++);return c}return!1}},function(t,e,n){var r=n(1),i=function(t,e,n,r){this.type=t,this.target=null,this.currentTarget=null,this.bubbles=n,this.cancelable=r,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.removed=!1,this.event=e};r.augment(i,{preventDefault:function(){this.defaultPrevented=this.cancelable&&!0},stopPropagation:function(){this.propagationStopped=!0},remove:function(){this.remove=!0},clone:function(){return r.clone(this)},toString:function(){return"[Event (type="+this.type+")]"}}),t.exports=i},function(t,e,n){function r(t,e,n){for(var r,i=t.length-1;i>=0;i--){var a=t[i];if(a._cfg.visible&&a._cfg.capture&&(a.isGroup?r=a.getShape(e,n):a.isHit(e,n)&&(r=a)),r)break}return r}var i=n(1),a=n(94),o=n(240),s={},u="_INDEX",l=function t(e){t.superclass.constructor.call(this,e),this.set("children",[]),this.set("tobeRemoved",[]),this._beforeRenderUI(),this._renderUI(),this._bindUI()};i.extend(l,a),i.augment(l,{isGroup:!0,type:"group",canFill:!0,canStroke:!0,getDefaultCfg:function(){return function t(e){if(!e._cfg&&e!==l){var n=e.superclass.constructor;n&&!n._cfg&&t(n),e._cfg={},i.merge(e._cfg,n._cfg),i.merge(e._cfg,e.CFG)}}(this.constructor),i.merge({},this.constructor._cfg)},_beforeRenderUI:function(){},_renderUI:function(){},_bindUI:function(){},addShape:function(t,e){var n=this.get("canvas");e=e||{};var r=s[t];if(r||(r=i.upperFirst(t),s[t]=r),e.attrs&&n){var a=e.attrs;if("text"===t){var u=n.get("fontFamily");u&&(a.fontFamily=a.fontFamily?a.fontFamily:u)}}e.canvas=n,e.type=t;var l=new o[r](e);return this.add(l),l},addGroup:function(t,e){var n,r=this.get("canvas");if(e=i.merge({},e),i.isFunction(t))e?(e.canvas=r,e.parent=this,n=new t(e)):n=new t({canvas:r,parent:this}),this.add(n);else if(i.isObject(t))t.canvas=r,n=new l(t),this.add(n);else{if(void 0!==t)return!1;n=new l,this.add(n)}return n},renderBack:function(t,e){var n=this.get("backShape"),r=this.getBBox();return i.merge(e,{x:r.minX-t[3],y:r.minY-t[0],width:r.width+t[1]+t[3],height:r.height+t[0]+t[2]}),n?n.attr(e):n=this.addShape("rect",{zIndex:-1,attrs:e}),this.set("backShape",n),this.sort(),n},removeChild:function(t,e){if(arguments.length>=2)this.contain(t)&&t.remove(e);else{if(1===arguments.length){if(!i.isBoolean(t))return this.contain(t)&&t.remove(!0),this;e=t}0===arguments.length&&(e=!0),l.superclass.remove.call(this,e)}return this},add:function(t){var e=this,n=e.get("children");if(i.isArray(t))i.each(t,function(t){var n=t.get("parent");n&&n.removeChild(t,!1),e._setCfgProperty(t)}),e._cfg.children=n.concat(t);else{var r=t,a=r.get("parent");a&&a.removeChild(r,!1),e._setCfgProperty(r),n.push(r)}return e},_setCfgProperty:function(t){var e=this._cfg;t.set("parent",this),t.set("canvas",e.canvas),e.timeline&&t.set("timeline",e.timeline)},contain:function(t){return this.get("children").indexOf(t)>-1},getChildByIndex:function(t){return this.get("children")[t]},getFirst:function(){return this.getChildByIndex(0)},getLast:function(){var t=this.get("children").length-1;return this.getChildByIndex(t)},getBBox:function(){var t=1/0,e=-1/0,n=1/0,r=-1/0,a=this.get("children");a.length>0?i.each(a,function(i){if(i.get("visible")){if(i.isGroup&&0===i.get("children").length)return;var a=i.getBBox();if(!a)return!0;var o=[a.minX,a.minY,1],s=[a.minX,a.maxY,1],u=[a.maxX,a.minY,1],l=[a.maxX,a.maxY,1];i.apply(o),i.apply(s),i.apply(u),i.apply(l);var c=Math.min(o[0],s[0],u[0],l[0]),h=Math.max(o[0],s[0],u[0],l[0]),f=Math.min(o[1],s[1],u[1],l[1]),d=Math.max(o[1],s[1],u[1],l[1]);c<t&&(t=c),h>e&&(e=h),f<n&&(n=f),d>r&&(r=d)}}):(t=0,e=0,n=0,r=0);var o={minX:t,minY:n,maxX:e,maxY:r};return o.x=o.minX,o.y=o.minY,o.width=o.maxX-o.minX,o.height=o.maxY-o.minY,o},getCount:function(){return this.get("children").length},sort:function(){var t=this.get("children");return i.each(t,function(t,e){return t[u]=e,t}),t.sort(function(t,e){var n=function(t,e){return t.get("zIndex")-e.get("zIndex")}(t,e);return 0===n?t[u]-e[u]:n}),this},findById:function(t){return this.find(function(e){return e.get("id")===t})},find:function(t){if(i.isString(t))return this.findById(t);var e=this.get("children"),n=null;return i.each(e,function(e){if(t(e)?n=e:e.find&&(n=e.find(t)),n)return!1}),n},findAll:function(t){var e=this.get("children"),n=[],r=[];return i.each(e,function(e){t(e)&&n.push(e),e.findAllBy&&(r=e.findAllBy(t),n=n.concat(r))}),n},findBy:function(t){var e=this.get("children"),n=null;return i.each(e,function(e){if(t(e)?n=e:e.findBy&&(n=e.findBy(t)),n)return!1}),n},findAllBy:function(t){var e=this.get("children"),n=[],r=[];return i.each(e,function(e){t(e)&&n.push(e),e.findAllBy&&(r=e.findAllBy(t),n=n.concat(r))}),n},getShape:function(t,e){var n,i=this._attrs.clip,a=this._cfg.children;if(i){var o=[t,e,1];i.invert(o,this.get("canvas")),i.isPointInPath(o[0],o[1])&&(n=r(a,t,e))}else n=r(a,t,e);return n},clearTotalMatrix:function(){if(this.get("totalMatrix")){this.setSilent("totalMatrix",null);for(var t=this._cfg.children,e=0;e<t.length;e++)t[e].clearTotalMatrix()}},clear:function(){for(var t=this._cfg.children,e=t.length-1;e>=0;e--)t[e].remove();return this._cfg.children=[],this},destroy:function(){this.get("destroyed")||(this.clear(),l.superclass.destroy.call(this))}}),t.exports=l},function(t,e,n){var r=n(1),i=n(237),a=n(238),o=n(239),s=n(95),u=function(t){this._cfg={zIndex:0,capture:!0,visible:!0,destroyed:!1},r.assign(this._cfg,this.getDefaultCfg(),t),this.initAttrs(this._cfg.attrs),this._cfg.attrs={},this.initTransform(),this.init()};u.CFG={id:null,zIndex:0,canvas:null,parent:null,capture:!0,context:null,visible:!0,destroyed:!1},r.augment(u,i,a,s,o,{init:function(){this.setSilent("animable",!0),this.setSilent("animating",!1)},getParent:function(){return this._cfg.parent},getDefaultCfg:function(){return{}},set:function(t,e){return"zIndex"===t&&this._beforeSetZIndex&&this._beforeSetZIndex(e),"loading"===t&&this._beforeSetLoading&&this._beforeSetLoading(e),this._cfg[t]=e,this},setSilent:function(t,e){this._cfg[t]=e},get:function(t){return this._cfg[t]},show:function(){return this._cfg.visible=!0,this},hide:function(){return this._cfg.visible=!1,this},remove:function(t){var e=this._cfg,n=e.parent,i=e.el;return n&&(i&&n._cfg.tobeRemoved.push(i),r.remove(n.get("children"),this)),(t||void 0===t)&&this.destroy(),this},destroy:function(){this.get("destroyed")||(this._attrs=null,this.removeEvent(),this._cfg={destroyed:!0})},toFront:function(){var t=this._cfg,e=t.parent;if(e){var n=e._cfg.children,r=t.el,i=n.indexOf(this);n.splice(i,1),n.push(this),r&&(r.parentNode.removeChild(r),t.el=null)}},toBack:function(){var t=this._cfg,e=t.parent;if(e){var n=e._cfg.children,r=t.el,i=n.indexOf(this);if(n.splice(i,1),n.unshift(this),r){var a=r.parentNode;a.removeChild(r),a.insertBefore(r,a.firstChild)}}},_beforeSetZIndex:function(t){var e=this._cfg.parent;this._cfg.zIndex=t,r.isNil(e)||e.sort();var n=this._cfg.el;if(n){var i=e._cfg.children,a=i.indexOf(this),o=n.parentNode;o.removeChild(n),a===i.length-1?o.appendChild(n):o.insertBefore(n,o.childNodes[a])}return t},_setAttrs:function(t){return this.attr(t),t},setZIndex:function(t){return this._cfg.zIndex=t,this._beforeSetZIndex(t)},clone:function(){return r.clone(this)},getBBox:function(){}}),t.exports=u},function(t,e,n){var r;!function(e){"use strict";function i(){}function a(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function o(t){return function(){return this[t].apply(this,arguments)}}var s=i.prototype,u=e.EventEmitter;s.getListeners=function(t){var e,n,r=this._getEvents();if(t instanceof RegExp)for(n in e={},r)r.hasOwnProperty(n)&&t.test(n)&&(e[n]=r[n]);else e=r[t]||(r[t]=[]);return e},s.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},s.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&((e={})[t]=n),e||n},s.addListener=function(t,e){if(!function t(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&t(e.listener)}(e))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(t),i="object"==typeof e;for(n in r)r.hasOwnProperty(n)&&-1===a(r[n],e)&&r[n].push(i?e:{listener:e,once:!1});return this},s.on=o("addListener"),s.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},s.once=o("addOnceListener"),s.defineEvent=function(t){return this.getListeners(t),this},s.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},s.removeListener=function(t,e){var n,r,i=this.getListenersAsObject(t);for(r in i)i.hasOwnProperty(r)&&-1!==(n=a(i[r],e))&&i[r].splice(n,1);return this},s.off=o("removeListener"),s.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},s.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},s.manipulateListeners=function(t,e,n){var r,i,a=t?this.removeListener:this.addListener,o=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(r=n.length;r--;)a.call(this,e,n[r]);else for(r in e)e.hasOwnProperty(r)&&(i=e[r])&&("function"==typeof i?a.call(this,r,i):o.call(this,r,i));return this},s.removeEvent=function(t){var e,n=typeof t,r=this._getEvents();if("string"===n)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},s.removeAllListeners=o("removeEvent"),s.emitEvent=function(t,e){var n,r,i,a,o=this.getListenersAsObject(t);for(a in o)if(o.hasOwnProperty(a))for(n=o[a].slice(0),i=0;i<n.length;i++)!0===(r=n[i]).once&&this.removeListener(t,r.listener),r.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},s.trigger=o("emitEvent"),s.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},s.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},s._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},s._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return e.EventEmitter=u,i},void 0!==(r=(function(){return i}).call(e,n,e,t))&&(t.exports=r)}(this||{})},function(t,e,n){function r(t,e,n,r){var i=1-r;return i*(i*t+2*r*e)+r*r*n}function i(t,e,n,i,a,s,u,l,c){var h,f,d,p,g,v,m,y=.005,_=1/0,b=[u,l];for(g=0;g<1;g+=.05)d=[r(t,n,a,g),r(e,i,s,g)],(f=o.squaredDistance(b,d))<_&&(h=g,_=f);for(_=1/0,m=0;m<32&&!(y<1e-4);m++){var x=h-y,w=h+y;d=[r(t,n,a,x),r(e,i,s,x)],f=o.squaredDistance(b,d),x>=0&&f<_?(h=x,_=f):(p=[r(t,n,a,w),r(e,i,s,w)],v=o.squaredDistance(b,p),w<=1&&v<_?(h=w,_=v):y*=.5)}return c&&(c.x=r(t,n,a,h),c.y=r(e,i,s,h)),Math.sqrt(_)}var a=n(1),o=a.vec2;t.exports={at:r,projectPoint:function(t,e,n,r,a,o,s,u){var l={};return i(t,e,n,r,a,o,s,u,l),l},pointDistance:i,extrema:function(t,e,n){var r=t+n-2*e;if(a.isNumberEqual(r,0))return[.5];var i=(t-e)/r;return i<=1&&i>=0?[i]:[]}}},function(t,e){t.exports={xAt:function(t,e,n,r,i){return e*Math.cos(t)*Math.cos(i)-n*Math.sin(t)*Math.sin(i)+r},yAt:function(t,e,n,r,i){return e*Math.sin(t)*Math.cos(i)+n*Math.cos(t)*Math.sin(i)+r},xExtrema:function(t,e,n){return Math.atan(-n/e*Math.tan(t))},yExtrema:function(t,e,n){return Math.atan(n/(e*Math.tan(t)))}}},function(t,e,n){function r(t,e,n){return t+e*Math.cos(n)}function i(t,e,n){return t+e*Math.sin(n)}var a=n(1),o=n(5),s=n(33),u=n(34),l=function t(e){t.superclass.constructor.call(this,e)};l.ATTRS={x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1},a.extend(l,o),a.augment(l,{canStroke:!0,type:"arc",getDefaultAttrs:function(){return{x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,r=t.r,i=t.startAngle,a=t.endAngle,o=t.clockwise,u=this.getHitLineWidth()/2,l=s.box(e,n,r,i,a,o);return l.minX-=u,l.minY-=u,l.maxX+=u,l.maxY+=u,l},getStartTangent:function(){var t=this._attrs,e=t.x,n=t.y,a=t.startAngle,o=t.r,s=Math.PI/180;t.clockwise&&(s*=-1);var u=[],l=r(e,o,a+s),c=i(n,o,a+s),h=r(e,o,a),f=i(n,o,a);return u.push([l,c]),u.push([h,f]),u},getEndTangent:function(){var t=this._attrs,e=t.x,n=t.y,a=t.endAngle,o=t.r,s=Math.PI/180,u=[];t.clockwise&&(s*=-1);var l=r(e,o,a+s),c=i(n,o,a+s),h=r(e,o,a),f=i(n,o,a);return u.push([h,f]),u.push([l,c]),u},createPath:function(t){var e=this._attrs,n=e.x,r=e.y,i=e.r,a=e.startAngle,o=e.endAngle,s=e.clockwise;(t=t||self.get("context")).beginPath(),t.arc(n,r,i,a,o,s)},afterPath:function(t){var e=this._attrs;if(t=t||this.get("context"),e.startArrow){var n=this.getStartTangent();u.addStartArrow(t,e,n[0][0],n[0][1],n[1][0],n[1][1])}if(e.endArrow){var r=this.getEndTangent();u.addEndArrow(t,e,r[0][0],r[0][1],r[1][0],r[1][1])}}}),t.exports=l},function(t,e,n){var r=n(1),i=n(5),a=function t(e){t.superclass.constructor.call(this,e)};a.ATTRS={x:0,y:0,r:0,lineWidth:1},r.extend(a,i),r.augment(a,{canFill:!0,canStroke:!0,type:"circle",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,r=t.r,i=this.getHitLineWidth()/2+r;return{minX:e-i,minY:n-i,maxX:e+i,maxY:n+i}},createPath:function(t){var e=this._attrs,n=e.x,r=e.y,i=e.r;t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1),t.closePath()}}),t.exports=a},function(t,e,n){var r=n(1),i=n(5),a=function t(e){t.superclass.constructor.call(this,e)};r.extend(a,i),r.augment(a,{canFill:!0,canStroke:!0,type:"dom",calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,r=t.width,i=t.height,a=this.getHitLineWidth()/2;return{minX:e-a,minY:n-a,maxX:e+r+a,maxY:n+i+a}}}),t.exports=a},function(t,e,n){var r=n(1),i=n(5),a=function t(e){t.superclass.constructor.call(this,e)};a.ATTRS={x:0,y:0,rx:1,ry:1,lineWidth:1},r.extend(a,i),r.augment(a,{canFill:!0,canStroke:!0,type:"ellipse",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,r=t.rx,i=t.ry,a=this.getHitLineWidth(),o=r+a/2,s=i+a/2;return{minX:e-o,minY:n-s,maxX:e+o,maxY:n+s}},createPath:function(t){var e=this._attrs,n=e.x,i=e.y,a=e.rx,o=e.ry;t=t||self.get("context");var s=a>o?a:o,u=[1,0,0,0,1,0,0,0,1];r.mat3.scale(u,u,[a>o?1:a/o,a>o?o/a:1]),r.mat3.translate(u,u,[n,i]),t.beginPath(),t.save(),t.transform(u[0],u[1],u[3],u[4],u[6],u[7]),t.arc(0,0,s,0,2*Math.PI),t.restore(),t.closePath()}}),t.exports=a},function(t,e,n){var r=n(1),i=n(5),a=n(33),o=function t(e){t.superclass.constructor.call(this,e)};o.ATTRS={x:0,y:0,rs:0,re:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1},r.extend(o,i),r.augment(o,{canFill:!0,canStroke:!0,type:"fan",getDefaultAttrs:function(){return{clockwise:!1,lineWidth:1,rs:0,re:0}},calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,r=t.rs,i=t.re,o=t.startAngle,s=t.endAngle,u=t.clockwise,l=this.getHitLineWidth(),c=a.box(e,n,r,o,s,u),h=a.box(e,n,i,o,s,u),f=l/2;return{minX:Math.min(c.minX,h.minX)-f,minY:Math.min(c.minY,h.minY)-f,maxX:Math.max(c.maxX,h.maxX)+f,maxY:Math.max(c.maxY,h.maxY)+f}},createPath:function(t){var e=this._attrs,n=e.x,r=e.y,i=e.rs,a=e.re,o=e.startAngle,s=e.endAngle,u=e.clockwise,l={x:Math.cos(o)*i+n,y:Math.sin(o)*i+r},c={x:Math.cos(o)*a+n,y:Math.sin(o)*a+r},h={x:Math.cos(s)*i+n,y:Math.sin(s)*i+r};(t=t||self.get("context")).beginPath(),t.moveTo(l.x,l.y),t.lineTo(c.x,c.y),t.arc(n,r,a,o,s,u),t.lineTo(h.x,h.y),t.arc(n,r,i,s,o,!u),t.closePath()}}),t.exports=o},function(t,e,n){var r=n(1),i=n(5),a=function t(e){t.superclass.constructor.call(this,e)};a.ATTRS={x:0,y:0,img:void 0,width:0,height:0,sx:null,sy:null,swidth:null,sheight:null},r.extend(a,i),r.augment(a,{type:"image",isHitBox:function(){return!1},calculateBox:function(){var t=this._attrs;this._cfg.attrs&&this._cfg.attrs.img===t.img||this._setAttrImg();var e=t.x,n=t.y;return{minX:e,minY:n,maxX:e+t.width,maxY:n+t.height}},_beforeSetLoading:function(t){var e=this.get("canvas");return!1===t&&!0===this.get("toDraw")&&(this._cfg.loading=!1,e.draw()),t},_setAttrImg:function(){var t=this,e=t._attrs,n=e.img;if(!r.isString(n))return n instanceof Image?(e.width||t.attr("width",n.width),e.height||t.attr("height",n.height),n):n instanceof HTMLElement&&r.isString(n.nodeName)&&"CANVAS"===n.nodeName.toUpperCase()?(e.width||t.attr("width",Number(n.getAttribute("width"))),e.height||t.attr("height",Number(n.getAttribute("height"))),n):n instanceof ImageData?(e.width||t.attr("width",n.width),e.height||t.attr("height",n.height),n):null;var i=new Image;i.onload=function(){if(t.get("destroyed"))return!1;t.attr("imgSrc",n),t.attr("img",i);var e=t.get("callback");e&&e.call(t),t.set("loading",!1)},i.src=n,i.crossOrigin="Anonymous",t.set("loading",!0)},drawInner:function(t){this._cfg.hasUpdate&&this._setAttrImg(),this.get("loading")?this.set("toDraw",!0):(this._drawImage(t),this._cfg.hasUpdate=!1)},_drawImage:function(t){var e=this._attrs,n=e.x,i=e.y,a=e.img,o=e.width,s=e.height,u=e.sx,l=e.sy,c=e.swidth,h=e.sheight;this.set("toDraw",!1);var f=a;if(f instanceof ImageData&&((f=new Image).src=a),f instanceof Image||f instanceof HTMLElement&&r.isString(f.nodeName)&&"CANVAS"===f.nodeName.toUpperCase()){if(r.isNil(u)||r.isNil(l)||r.isNil(c)||r.isNil(h))return void t.drawImage(f,n,i,o,s);if(!(r.isNil(u)||r.isNil(l)||r.isNil(c)||r.isNil(h)))return void t.drawImage(f,u,l,c,h,n,i,o,s)}}}),t.exports=a},function(t,e,n){var r=n(1),i=n(5),a=n(34),o=n(32),s=function t(e){t.superclass.constructor.call(this,e)};s.ATTRS={x1:0,y1:0,x2:0,y2:0,lineWidth:1,startArrow:!1,endArrow:!1},r.extend(s,i),r.augment(s,{canStroke:!0,type:"line",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var t=this._attrs,e=t.x1,n=t.y1,r=t.x2,i=t.y2,a=this.getHitLineWidth();return o.box(e,n,r,i,a)},createPath:function(t){var e=this._attrs,n=e.x1,r=e.y1,i=e.x2,a=e.y2;(t=t||self.get("context")).beginPath(),t.moveTo(n,r),t.lineTo(i,a)},afterPath:function(t){var e=this._attrs,n=e.x1,r=e.y1,i=e.x2,o=e.y2;t=t||this.get("context"),e.startArrow&&a.addStartArrow(t,e,i,o,n,r),e.endArrow&&a.addEndArrow(t,e,n,r,i,o)},getPoint:function(t){var e=this._attrs;return{x:o.at(e.x1,e.x2,t),y:o.at(e.y1,e.y2,t)}}}),t.exports=s},function(t,e,n){var r=n(1),i=n(5),a=n(35),o=n(24),s=n(34),u=n(47),l=n(45),c=function t(e){t.superclass.constructor.call(this,e)};c.ATTRS={path:null,lineWidth:1,startArrow:!1,endArrow:!1},r.extend(c,i),r.augment(c,{canFill:!0,canStroke:!0,type:"path",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},_afterSetAttrPath:function(t){if(r.isNil(t))return this.setSilent("segments",null),void this.setSilent("box",void 0);var e,n=o.parsePath(t),i=[];if(r.isArray(n)&&0!==n.length&&("M"===n[0][0]||"m"===n[0][0])){for(var s=n.length,u=0;u<n.length;u++)e=new a(n[u],e,u===s-1),i.push(e);this.setSilent("segments",i),this.setSilent("tCache",null),this.setSilent("box",null)}},calculateBox:function(){var t=this.get("segments");if(!t)return null;var e=this.getHitLineWidth(),n=1/0,i=-1/0,a=1/0,o=-1/0;return r.each(t,function(t){t.getBBox(e);var r=t.box;r&&(r.minX<n&&(n=r.minX),r.maxX>i&&(i=r.maxX),r.minY<a&&(a=r.minY),r.maxY>o&&(o=r.maxY))}),n===1/0||a===1/0?{minX:0,minY:0,maxX:0,maxY:0}:{minX:n,minY:a,maxX:i,maxY:o}},_setTcache:function(){var t,e,n,i,a=0,o=0,s=[],u=this._cfg.curve;u&&(r.each(u,function(t,e){i=t.length,(n=u[e+1])&&(a+=l.len(t[i-2],t[i-1],n[1],n[2],n[3],n[4],n[5],n[6]))}),r.each(u,function(r,c){i=r.length,(n=u[c+1])&&((t=[])[0]=o/a,e=l.len(r[i-2],r[i-1],n[1],n[2],n[3],n[4],n[5],n[6]),t[1]=(o+=e)/a,s.push(t))}),this._cfg.tCache=s)},_calculateCurve:function(){this._cfg.curve=u.pathTocurve(this._attrs.path)},getStartTangent:function(){var t,e,n,i,a=this.get("segments");if(a.length>1)if(t=a[0].endPoint,e=a[1].endPoint,i=[],r.isFunction(n=a[1].startTangent)){var o=n();i.push([t.x-o[0],t.y-o[1]]),i.push([t.x,t.y])}else i.push([e.x,e.y]),i.push([t.x,t.y]);return i},getEndTangent:function(){var t,e,n,i,a=this.get("segments"),o=a.length;if(o>1)if(t=a[o-2].endPoint,e=a[o-1].endPoint,i=[],r.isFunction(n=a[o-1].endTangent)){var s=n();i.push([e.x-s[0],e.y-s[1]]),i.push([e.x,e.y])}else i.push([t.x,t.y]),i.push([e.x,e.y]);return i},getPoint:function(t){var e,n,i=this._cfg.tCache;i||(this._calculateCurve(),this._setTcache(),i=this._cfg.tCache);var a=this._cfg.curve;if(!i)return a?{x:a[0][1],y:a[0][2]}:null;r.each(i,function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)});var o=a[n];if(r.isNil(o)||r.isNil(n))return null;var s=o.length,u=a[n+1];return{x:l.at(o[s-2],u[1],u[3],u[5],1-e),y:l.at(o[s-1],u[2],u[4],u[6],1-e)}},createPath:function(t){var e=this.get("segments");if(r.isArray(e)){(t=t||this.get("context")).beginPath();for(var n=e.length,i=0;i<n;i++)e[i].draw(t)}},afterPath:function(t){var e=this._attrs,n=this.get("segments"),i=e.path;if(t=t||this.get("context"),r.isArray(n)&&1!==n.length&&(e.startArrow||e.endArrow)&&"z"!==i[i.length-1]&&"Z"!==i[i.length-1]&&!e.fill){var a=this.getStartTangent();s.addStartArrow(t,e,a[0][0],a[0][1],a[1][0],a[1][1]);var o=this.getEndTangent();s.addEndArrow(t,e,o[0][0],o[0][1],o[1][0],o[1][1])}}}),t.exports=c},function(t,e,n){var r=n(1),i=n(5),a=function t(e){t.superclass.constructor.call(this,e)};a.ATTRS={points:null,lineWidth:1},r.extend(a,i),r.augment(a,{canFill:!0,canStroke:!0,type:"polygon",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var t=this._attrs.points,e=this.getHitLineWidth();if(!t||0===t.length)return null;var n=1/0,i=1/0,a=-1/0,o=-1/0;r.each(t,function(t){var e=t[0],r=t[1];e<n&&(n=e),e>a&&(a=e),r<i&&(i=r),r>o&&(o=r)});var s=e/2;return{minX:n-s,minY:i-s,maxX:a+s,maxY:o+s}},createPath:function(t){var e=this._attrs.points;e.length<2||((t=t||this.get("context")).beginPath(),r.each(e,function(e,n){0===n?t.moveTo(e[0],e[1]):t.lineTo(e[0],e[1])}),t.closePath())}}),t.exports=a},function(t,e,n){var r=n(1),i=n(5),a=n(34),o=n(32),s=function t(e){t.superclass.constructor.call(this,e)};s.ATTRS={points:null,lineWidth:1,startArrow:!1,endArrow:!1,tCache:null},r.extend(s,i),r.augment(s,{canStroke:!0,type:"polyline",tCache:null,getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var t=this._attrs,e=this.getHitLineWidth(),n=t.points;if(!n||0===n.length)return null;var i=1/0,a=1/0,o=-1/0,s=-1/0;r.each(n,function(t){var e=t[0],n=t[1];e<i&&(i=e),e>o&&(o=e),n<a&&(a=n),n>s&&(s=n)});var u=e/2;return{minX:i-u,minY:a-u,maxX:o+u,maxY:s+u}},_setTcache:function(){var t,e,n=this._attrs.points,i=0,a=0,s=[];n&&0!==n.length&&(r.each(n,function(t,e){n[e+1]&&(i+=o.len(t[0],t[1],n[e+1][0],n[e+1][1]))}),i<=0||(r.each(n,function(r,u){n[u+1]&&((t=[])[0]=a/i,e=o.len(r[0],r[1],n[u+1][0],n[u+1][1]),t[1]=(a+=e)/i,s.push(t))}),this.tCache=s))},createPath:function(t){var e,n,r=this._attrs.points;if(!(r.length<2)){for((t=t||this.get("context")).beginPath(),t.moveTo(r[0][0],r[0][1]),n=1,e=r.length-1;n<e;n++)t.lineTo(r[n][0],r[n][1]);t.lineTo(r[e][0],r[e][1])}},getStartTangent:function(){var t=this.__attrs.points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},getEndTangent:function(){var t=this.__attrs.points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},afterPath:function(t){var e=this._attrs,n=e.points,r=n.length-1;t=t||this.get("context"),e.startArrow&&a.addStartArrow(t,e,n[1][0],n[1][1],n[0][0],n[0][1]),e.endArrow&&a.addEndArrow(t,e,n[r-1][0],n[r-1][1],n[r][0],n[r][1])},getPoint:function(t){var e,n,i=this._attrs.points,a=this.tCache;return a||(this._setTcache(),a=this.tCache),r.each(a,function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)}),{x:o.at(i[n][0],i[n+1][0],e),y:o.at(i[n][1],i[n+1][1],e)}}}),t.exports=s},function(t,e,n){var r=n(1),i=n(24).parseRadius,a=n(5),o=function t(e){t.superclass.constructor.call(this,e)};o.ATTRS={x:0,y:0,width:0,height:0,radius:0,lineWidth:1},r.extend(o,a),r.augment(o,{canFill:!0,canStroke:!0,type:"rect",getDefaultAttrs:function(){return{lineWidth:1,radius:0}},calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,r=t.width,i=t.height,a=this.getHitLineWidth()/2;return{minX:e-a,minY:n-a,maxX:e+r+a,maxY:n+i+a}},createPath:function(t){var e=this._attrs,n=e.x,r=e.y,a=e.width,o=e.height,s=e.radius;if((t=t||this.get("context")).beginPath(),0===s)t.rect(n,r,a,o);else{var u=i(s);t.moveTo(n+u.r1,r),t.lineTo(n+a-u.r2,r),0!==u.r2&&t.arc(n+a-u.r2,r+u.r2,u.r2,-Math.PI/2,0),t.lineTo(n+a,r+o-u.r3),0!==u.r3&&t.arc(n+a-u.r3,r+o-u.r3,u.r3,0,Math.PI/2),t.lineTo(n+u.r4,r+o),0!==u.r4&&t.arc(n+u.r4,r+o-u.r4,u.r4,Math.PI/2,Math.PI),t.lineTo(n,r+u.r1),0!==u.r1&&t.arc(n+u.r1,r+u.r1,u.r1,Math.PI,1.5*Math.PI),t.closePath()}}}),t.exports=o},function(t,e,n){var r=n(1),i=n(5),a=function t(e){t.superclass.constructor.call(this,e)};a.ATTRS={x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom",lineHeight:null,textArr:null},r.extend(a,i),r.augment(a,{canFill:!0,canStroke:!0,type:"text",getDefaultAttrs:function(){return{lineWidth:1,lineCount:1,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"}},initTransform:function(){var t=this._attrs.fontSize;t&&+t<12&&this.transform([["t",-1*this._attrs.x,-1*this._attrs.y],["s",+t/12,+t/12],["t",this._attrs.x,this._attrs.y]])},_assembleFont:function(){var t=this._attrs;t.font=[t.fontStyle,t.fontVariant,t.fontWeight,t.fontSize+"px",t.fontFamily].join(" ")},_setAttrText:function(){var t=this._attrs,e=t.text,n=null;if(r.isString(e)&&-1!==e.indexOf("\n")){var i=(n=e.split("\n")).length;t.lineCount=i}t.textArr=n},_getTextHeight:function(){var t=this._attrs,e=t.lineCount,n=1*t.fontSize;return e>1?n*e+this._getSpaceingY()*(e-1):n},isHitBox:function(){return!1},calculateBox:function(){var t=this._attrs,e=this._cfg;e.attrs&&!e.hasUpdate||(this._assembleFont(),this._setAttrText());var n=t.x,r=t.y,i=this.measureText();if(!i)return{minX:n,minY:r,maxX:n,maxY:r};var a=this._getTextHeight(),o=t.textAlign,s=t.textBaseline,u=this.getHitLineWidth(),l={x:n,y:r-a};o&&("end"===o||"right"===o?l.x-=i:"center"===o&&(l.x-=i/2)),s&&("top"===s?l.y+=a:"middle"===s&&(l.y+=a/2)),this.set("startPoint",l);var c=u/2;return{minX:l.x-c,minY:l.y-c,maxX:l.x+i+c,maxY:l.y+a+c}},_getSpaceingY:function(){var t=this._attrs,e=t.lineHeight,n=1*t.fontSize;return e?e-n:.14*n},drawInner:function(t){var e=this._attrs,n=this._cfg;n.attrs&&!n.hasUpdate||(this._assembleFont(),this._setAttrText()),t.font=e.font;var i=e.text;if(i){var a=e.textArr,o=e.x,s=e.y;if(t.beginPath(),this.hasStroke()){var u=e.strokeOpacity;r.isNil(u)||1===u||(t.globalAlpha=u),a?this._drawTextArr(t,!1):t.strokeText(i,o,s),t.globalAlpha=1}if(this.hasFill()){var l=e.fillOpacity;r.isNil(l)||1===l||(t.globalAlpha=l),a?this._drawTextArr(t,!0):t.fillText(i,o,s)}n.hasUpdate=!1}},_drawTextArr:function(t,e){var n,i=this._attrs.textArr,a=this._attrs.textBaseline,o=1*this._attrs.fontSize,s=this._getSpaceingY(),u=this._attrs.x,l=this._attrs.y,c=this.getBBox(),h=c.maxY-c.minY;r.each(i,function(r,i){n=l+i*(s+o)-h+o,"middle"===a&&(n+=h-o-(h-o)/2),"top"===a&&(n+=h-o),e?t.fillText(r,u,n):t.strokeText(r,u,n)})},measureText:function(){var t,e=this._attrs,n=e.text,i=e.font,a=e.textArr,o=0;if(!r.isNil(n)){var s=document.createElement("canvas").getContext("2d");return s.save(),s.font=i,a?r.each(a,function(e){t=s.measureText(e).width,o<t&&(o=t),s.restore()}):(o=s.measureText(n).width,s.restore()),o}}}),t.exports=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(49);n.d(e,"interpolate",function(){return r.a});var i=n(115);n.d(e,"interpolateArray",function(){return i.a});var a=n(52);n.d(e,"interpolateBasis",function(){return a.b});var o=n(113);n.d(e,"interpolateBasisClosed",function(){return o.a});var s=n(116);n.d(e,"interpolateDate",function(){return s.a});var u=n(36);n.d(e,"interpolateNumber",function(){return u.a});var l=n(117);n.d(e,"interpolateObject",function(){return l.a});var c=n(257);n.d(e,"interpolateRound",function(){return c.a});var h=n(118);n.d(e,"interpolateString",function(){return h.a});var f=n(258);n.d(e,"interpolateTransformCss",function(){return f.a}),n.d(e,"interpolateTransformSvg",function(){return f.b});var d=n(261);n.d(e,"interpolateZoom",function(){return d.a});var p=n(112);n.d(e,"interpolateRgb",function(){return p.a}),n.d(e,"interpolateRgbBasis",function(){return p.b}),n.d(e,"interpolateRgbBasisClosed",function(){return p.c});var g=n(262);n.d(e,"interpolateHsl",function(){return g.a}),n.d(e,"interpolateHslLong",function(){return g.b});var v=n(263);n.d(e,"interpolateLab",function(){return v.a});var m=n(264);n.d(e,"interpolateHcl",function(){return m.a}),n.d(e,"interpolateHclLong",function(){return m.b});var y=n(265);n.d(e,"interpolateCubehelix",function(){return y.b}),n.d(e,"interpolateCubehelixLong",function(){return y.a});var _=n(266);n.d(e,"quantize",function(){return _.a})},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i});var r=Math.PI/180,i=180/Math.PI},function(t,e,n){"use strict";function r(t){return function(e){var n,r,a=e.length,o=new Array(a),s=new Array(a),u=new Array(a);for(n=0;n<a;++n)r=Object(i.f)(e[n]),o[n]=r.r||0,s[n]=r.g||0,u[n]=r.b||0;return o=t(o),s=t(s),u=t(u),r.opacity=1,function(t){return r.r=o(t),r.g=s(t),r.b=u(t),r+""}}}n.d(e,"b",function(){return u}),n.d(e,"c",function(){return l});var i=n(19),a=n(52),o=n(113),s=n(25);e.a=function t(e){function n(t,e){var n=r((t=Object(i.f)(t)).r,(e=Object(i.f)(e)).r),a=r(t.g,e.g),o=r(t.b,e.b),u=Object(s.a)(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=a(e),t.b=o(e),t.opacity=u(e),t+""}}var r=Object(s.b)(e);return n.gamma=t,n}(1);var u=r(a.b),l=r(o.a)},function(t,e,n){"use strict";var r=n(52);e.a=function(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),a=t[(i+e-1)%e],o=t[i%e],s=t[(i+1)%e],u=t[(i+2)%e];return Object(r.a)((n-i/e)*e,a,o,s,u)}}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";var r=n(49);e.a=function(t,e){var n,i=e?e.length:0,a=t?Math.min(i,t.length):0,o=new Array(a),s=new Array(i);for(n=0;n<a;++n)o[n]=Object(r.a)(t[n],e[n]);for(;n<i;++n)s[n]=e[n];return function(t){for(n=0;n<a;++n)s[n]=o[n](t);return s}}},function(t,e,n){"use strict";e.a=function(t,e){var n=new Date;return e-=t=+t,function(r){return n.setTime(t+e*r),n}}},function(t,e,n){"use strict";var r=n(49);e.a=function(t,e){var n,i={},a={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=Object(r.a)(t[n],e[n]):a[n]=e[n];return function(t){for(n in i)a[n]=i[n](t);return a}}},function(t,e,n){"use strict";var r=n(36),i=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,a=new RegExp(i.source,"g");e.a=function(t,e){var n,o,s,u=i.lastIndex=a.lastIndex=0,l=-1,c=[],h=[];for(t+="",e+="";(n=i.exec(t))&&(o=a.exec(e));)(s=o.index)>u&&(s=e.slice(u,s),c[l]?c[l]+=s:c[++l]=s),(n=n[0])===(o=o[0])?c[l]?c[l]+=o:c[++l]=o:(c[++l]=null,h.push({i:l,x:Object(r.a)(n,o)})),u=a.lastIndex;return u<e.length&&(s=e.slice(u),c[l]?c[l]+=s:c[++l]=s),c.length<2?h[0]?function(t){return function(e){return t(e)+""}}(h[0].x):function(t){return function(){return t}}(e):(e=h.length,function(t){for(var n,r=0;r<e;++r)c[(n=h[r]).i]=n.x(t);return c.join("")})}},function(t,e,n){var r=n(0),i=n(280),a={appear:{duration:450,easing:"easeQuadOut"},update:{duration:450,easing:"easeQuadInOut"},enter:{duration:400,easing:"easeQuadInOut",delay:100},leave:{duration:350,easing:"easeQuadIn"}},o={line:{appear:function(){return i.appear.clipIn},enter:function(){return i.enter.clipIn},leave:function(){return i.leave.lineWidthOut}},path:{appear:function(){return i.appear.clipIn},enter:function(){return i.enter.clipIn},leave:function(){return i.leave.lineWidthOut}},area:{appear:function(){return i.appear.clipIn},enter:function(){return i.enter.fadeIn},leave:function(){return i.leave.fadeOut},cfg:{appear:{duration:500,easing:"easeQuadOut"},update:{duration:450,easing:"easeQuadInOut"},enter:{duration:600,delay:150,easing:"easeQuadInOut"},leave:{easing:"easeQuadOut",duration:350}}},polygon:{appear:function(){return i.appear.zoomIn},enter:function(){return i.enter.zoomIn},leave:function(){return i.leave.zoomOut}},edge:{appear:function(){return i.appear.pathIn},enter:function(){return i.enter.pathIn},leave:function(){return i.leave.pathOut}},interval:{appear:function(t){var e;return t.isPolar?(e=i.appear.zoomIn,(t.isTransposed||"theta"===t.type)&&(e=i.appear.fanIn)):e=t.isRect?t.isTransposed?i.appear.scaleInX:i.appear.scaleInY:i.appear.zoomIn,e},enter:function(t){return t.isRect||t.isTransposed||"theta"===t.type?i.enter.fadeIn:i.enter.zoomIn},leave:function(){return i.leave.fadeOut},update:function(t){if("theta"===t.type)return i.update.fanIn}},point:{appear:function(){return i.appear.zoomIn},enter:function(){return i.enter.zoomIn},leave:function(){return i.leave.zoomOut}},schema:{appear:function(){return i.appear.clipIn},enter:function(){return i.enter.clipIn},leave:function(){return i.leave.lineWidthOut}},contour:null,heatmap:null,label:{appear:function(){return i.appear.fadeIn},enter:function(){return i.enter.fadeIn},leave:function(){return i.leave.fadeOut},cfg:{appear:{duration:900}}},"axis-label":{enter:function(){return i.appear.fadeIn},leave:function(){return i.leave.fadeOut},update:function(t){if(t.isPolar)return i.appear.fadeIn}},"axis-ticks":{enter:function(){return i.appear.fadeIn},leave:function(){return i.leave.fadeOut},update:function(t){if(t.isPolar)return i.appear.fadeIn}},"axis-grid":{enter:function(){return i.appear.fadeIn},leave:function(){return i.leave.fadeOut},update:function(t){if(t.isPolar)return i.appear.fadeIn}},"axis-grid-rect":{enter:function(){return i.appear.fadeIn},leave:function(){return i.leave.fadeOut},update:function(){return i.leave.fadeIn}},labelLine:{appear:function(){return i.appear.pathIn},enter:function(){return i.enter.pathIn},leave:function(){return i.leave.pathOut}}};o.Action=i,o.defaultCfg=a,o.getAnimation=function(t,e,n){var i=this[t];if(i){var a=i[n];if(r.isFunction(a))return a(e)}return!1},o.getAnimateCfg=function(t,e){var n=a[e];return this[t]&&this[t].cfg&&this[t].cfg[e]?r.deepMix({},n,this[t].cfg[e]):n},o.registerAnimation=function(t,e,n){this.Action[t]||(this.Action[t]={}),this.Action[t][e]=n},t.exports=o},function(t,e,n){function r(t,e,n,r){return t[r]+(e[r]-t[r])*n}function i(t){return"#"+a(t[0])+a(t[1])+a(t[2])}function a(t){return 1===(t=(t=Math.round(t)).toString(16)).length&&(t="0"+t),t}function o(t){var e=[];return e.push(parseInt(t.substr(1,2),16)),e.push(parseInt(t.substr(3,2),16)),e.push(parseInt(t.substr(5,2),16)),e}var s=n(8),u=n(9),l=n(2),c=/rgba?\(([\s.,0-9]+)\)/,h={},f=null,d={toRGB:function(t){return"#"===t[0]&&7===t.length?t:(f||(f=function(){var t=document.createElement("i");return t.title="Web Colour Picker",t.style.display="none",document.body.appendChild(t),t}()),h[t]?e=h[t]:(f.style.color=t,e=document.defaultView.getComputedStyle(f,"").getPropertyValue("color"),e=i(c.exec(e)[1].split(/\s*,\s*/)),h[t]=e),e);var e},rgb2arr:o,gradient:function(t){var e=[];return u(t)&&(t=t.split("-")),l(t,function(t){-1===t.indexOf("#")&&(t=d.toRGB(t)),e.push(o(t))}),function(t){return function(t,e){!isNaN(e)&&s(e)||(e=0);var n=t.length-1,a=Math.floor(n*e),o=n*e-a,u=t[a],l=a===n?u:t[a+1];return i([r(u,l,o,0),r(u,l,o,1),r(u,l,o,2)])}(e,t)}}};t.exports=d},function(t,e){var n={}.toString;t.exports=function(t,e){return n.call(t)==="[object "+e+"]"}},function(t,e){t.exports=function(t){return null===t||void 0===t}},function(t,e,n){var r=n(15),i={values:n(124)};t.exports={isAdjust:function(t){return this.adjustNames.indexOf(t)>=0},_getDimValues:function(t){var e={},n=[];return this.xField&&this.isAdjust("x")&&n.push(this.xField),this.yField&&this.isAdjust("y")&&n.push(this.yField),r(n,function(n){var r=i.values(t,n);r.sort(function(t,e){return t-e}),e[n]=r}),!this.yField&&this.isAdjust("y")&&(e.y=[0,1]),e},adjustData:function(t,e){var n=this,i=n._getDimValues(e);r(t,function(e,a){r(i,function(r,i){n.adjustDim(i,r,e,t.length,a)})})},getAdjustRange:function(t,e,n){var r,i,a=n.indexOf(e),o=n.length;return!this.yField&&this.isAdjust("y")?(r=0,i=1):o>1?(r=0===a?n[0]:n[a-1],i=a===o-1?n[o-1]:n[a+1],0!==a?r+=(e-r)/2:r-=(i-e)/2,a!==o-1?i-=(i-e)/2:i+=(e-n[o-2])/2):(r=0===e?0:e-.5,i=0===e?1:e+.5),{pre:r,next:i}},groupData:function(t,e){var n={};return r(t,function(t){var r=t[e];void 0===r&&(r=t[e]=0),n[r]||(n[r]=[]),n[r].push(t)}),n}}},function(t,e,n){var r=n(122),i=n(16),a=n(15);t.exports=function(t,e){for(var n=[],o={},s=0;s<t.length;s++){var u=t[s][e];r(u)||(i(u)||(u=[u]),a(u,function(t){o[t]||(n.push(t),o[t]=!0)}))}return n}},function(t,e,n){var r=n(121);t.exports=function(t){return r(t,"Function")}},function(t,e,n){var r={default:n(127),dark:n(298)};t.exports=r},function(t,e){var n,r,i='"-apple-system", BlinkMacSystemFont, "Segoe UI", Roboto,"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei",SimSun, "sans-serif"',a={defaultColor:"#1890FF",plotCfg:{padding:[20,20,95,80]},fontFamily:i,defaultLegendPosition:"bottom",colors:["#1890FF","#2FC25B","#FACC14","#223273","#8543E0","#13C2C2","#3436C7","#F04864"],colors_16:["#1890FF","#41D9C7","#2FC25B","#FACC14","#E6965C","#223273","#7564CC","#8543E0","#5C8EE6","#13C2C2","#5CA3E6","#3436C7","#B381E6","#F04864","#D598D9"],colors_24:["#1890FF","#66B5FF","#41D9C7","#2FC25B","#6EDB8F","#9AE65C","#FACC14","#E6965C","#57AD71","#223273","#738AE6","#7564CC","#8543E0","#A877ED","#5C8EE6","#13C2C2","#70E0E0","#5CA3E6","#3436C7","#8082FF","#DD81E6","#F04864","#FA7D92","#D598D9"],colors_pie:["#1890FF","#13C2C2","#2FC25B","#FACC14","#F04864","#8543E0","#3436C7","#223273"],colors_pie_16:["#1890FF","#73C9E6","#13C2C2","#6CD9B3","#2FC25B","#9DD96C","#FACC14","#E6965C","#F04864","#D66BCA","#8543E0","#8E77ED","#3436C7","#737EE6","#223273","#7EA2E6"],shapes:{point:["hollowCircle","hollowSquare","hollowDiamond","hollowBowtie","hollowTriangle","hollowHexagon","cross","tick","plus","hyphen","line"],line:["line","dash","dot"],area:["area"]},sizes:[1,10],opacities:[.1,.9],axis:{top:{position:"top",title:null,label:{offset:14,textStyle:{fill:"#545454",fontSize:12,lineHeight:20,textBaseline:"middle",fontFamily:i},autoRotate:!0},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0}},bottom:{position:"bottom",title:null,label:{offset:22,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:20,textBaseline:"middle",fontFamily:i}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0}},left:{position:"left",title:null,label:{offset:12,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:20,textBaseline:"middle",fontFamily:i}},line:null,tickLine:null,grid:{zIndex:-1,lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},right:{position:"right",title:null,label:{offset:12,autoRotate:!0,textStyle:{fill:"#545454",fontSize:12,lineHeight:20,textBaseline:"middle",fontFamily:i}},line:null,tickLine:null,grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},circle:{zIndex:1,title:null,label:{offset:12,textStyle:{fill:"#545454",fontSize:12,lineHeight:20,fontFamily:i}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0},grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},hideFirstLine:!0}},radius:{zIndex:0,label:{offset:12,textStyle:{fill:"#545454",fontSize:12,textBaseline:"middle",lineHeight:20,fontFamily:i}},line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,stroke:"#BFBFBF",length:4,alignWithLabel:!0},grid:{lineStyle:{stroke:"#E9E9E9",lineWidth:1,lineDash:[3,3]},type:"circle"}},helix:{grid:null,label:null,title:null,line:{lineWidth:1,stroke:"#BFBFBF"},tickLine:{lineWidth:1,length:4,stroke:"#BFBFBF",alignWithLabel:!0}}},label:{offset:20,textStyle:{fill:"#545454",fontSize:12,textBaseline:"middle",fontFamily:i}},treemapLabels:{offset:10,textStyle:{fill:"#fff",fontSize:12,textBaseline:"top",fontStyle:"bold",fontFamily:i}},innerLabels:{textStyle:{fill:"#fff",fontSize:12,textBaseline:"middle",fontFamily:i}},thetaLabels:{labelLine:{lineWidth:1},labelHeight:14,offset:30},legend:{right:{position:"right",layout:"vertical",itemMarginBottom:8,width:16,height:156,title:null,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:i},unCheckColor:"#bfbfbf"},left:{position:"left",layout:"vertical",itemMarginBottom:8,width:16,height:156,title:null,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:i},unCheckColor:"#bfbfbf"},top:{position:"top",offset:6,layout:"horizontal",title:null,itemGap:10,width:156,height:16,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:i},unCheckColor:"#bfbfbf"},bottom:{position:"bottom",offset:6,layout:"horizontal",title:null,itemGap:10,width:156,height:16,textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"start",textBaseline:"middle",lineHeight:20,fontFamily:i},unCheckColor:"#bfbfbf"},html:(n={},n["g2-legend"]={height:"auto",width:"auto",position:"absolute",overflow:"auto",fontSize:"12px",fontFamily:i,lineHeight:"20px",color:"#8C8C8C"},n["g2-legend-title"]={marginBottom:"4px"},n["g2-legend-list"]={listStyleType:"none",margin:0,padding:0},n["g2-legend-list-item"]={cursor:"pointer",marginBottom:"5px",marginRight:"24px"},n["g2-legend-marker"]={width:"9px",height:"9px",borderRadius:"50%",display:"inline-block",marginRight:"8px",verticalAlign:"middle"},n),gradient:{textStyle:{fill:"#8C8C8C",fontSize:12,textAlign:"center",textBaseline:"middle",lineHeight:20,fontFamily:i},lineStyle:{lineWidth:1,stroke:"#fff"},unCheckColor:"#bfbfbf"},margin:[0,20,24,5],legendMargin:24},tooltip:(r={crosshairs:!1,offset:15},r["g2-tooltip"]={position:"absolute",visibility:"hidden",zIndex:8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)",backgroundColor:"rgba(255, 255, 255, 0.9)",boxShadow:"0px 0px 10px #aeaeae",borderRadius:"3px",color:"rgb(87, 87, 87)",fontSize:"12px",fontFamily:i,lineHeight:"20px",padding:"10px 10px 6px 10px"},r["g2-tooltip-title"]={marginBottom:"4px"},r["g2-tooltip-list"]={margin:0,listStyleType:"none",padding:0},r["g2-tooltip-list-item"]={marginBottom:"4px"},r["g2-tooltip-marker"]={width:"5px",height:"5px",borderRadius:"50%",display:"inline-block",marginRight:"8px"},r["g2-tooltip-value"]={display:"inline-block",float:"right",marginLeft:"30px"},r),tooltipMarker:{symbol:function(t,e,n){return[["M",t,e],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},stroke:"#fff",shadowBlur:8,shadowOffsetX:0,shadowOffSetY:0,radius:4},tooltipCrosshairsRect:{type:"rect",style:{fill:"#CCD6EC",opacity:.3}},tooltipCrosshairsLine:{style:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1}},shape:{point:{lineWidth:1,fill:"#1890FF",radius:4},hollowPoint:{fill:"#fff",lineWidth:1,stroke:"#1890FF",radius:3},interval:{lineWidth:0,fill:"#1890FF",fillOpacity:.85},hollowInterval:{fill:"#fff",stroke:"#1890FF",fillOpacity:0,lineWidth:2},area:{lineWidth:0,fill:"#1890FF",fillOpacity:.3},polygon:{lineWidth:0,fill:"#1890FF",fillOpacity:1},hollowPolygon:{fill:"#fff",stroke:"#1890FF",fillOpacity:0,lineWidth:2},hollowArea:{fill:"#fff",stroke:"#1890FF",fillOpacity:0,lineWidth:2},line:{stroke:"#1890FF",lineWidth:2,fill:null},edge:{stroke:"#1890FF",lineWidth:1,fill:null},schema:{stroke:"#1890FF",lineWidth:1,fill:null}},guide:{line:{lineStyle:{stroke:"#1890FF",lineDash:[0,2,2],lineWidth:1},text:{position:"end",autoRotate:!0,style:{fill:"#545454",fontSize:12,textAlign:"center",fontFamily:i}}},text:{style:{fill:"#545454",fontSize:12,textBaseline:"middle",textAlign:"start",fontFamily:i}},region:{style:{lineWidth:0,fill:"#000",fillOpacity:.04}},html:{alignX:"middle",alignY:"middle"}},pixelRatio:null};t.exports=a},function(t,e,n){var r=n(6).Group,i=n(129),a=n(3),o=n(0),s=["line","point","path"],u=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){return{label:a.label,labelCfg:null,coord:null,geomType:null,zIndex:6}},n._renderUI=function(){t.prototype._renderUI.call(this),this.initLabelsCfg(),this.renderLabels()},n._getLabelValue=function(t){var e,n=t._origin,r=this.get("labelCfg"),i=r.scales,a=r.cfg&&r.cfg.content;if(a){var s=[];o.each(i,function(t){s.push(n[t.field])}),e=a.apply(null,s)}else{var u=i[0];if(o.isArray(e=n[u.field])){var l=[];o.each(e,function(t){l.push(u.getText(t))}),e=l}else e=u.getText(e)}return e},n.initLabelsCfg=function(){var t=this.getDefaultLabelCfg(),e=this.get("labelCfg");o.deepMix(t,e.cfg),this.set("label",t)},n.getDefaultLabelCfg=function(){var t=this.get("labelCfg").cfg,e=this.get("geomType"),n=this.get("viewTheme")||a;return"polygon"===e||t&&t.offset<0&&-1===o.indexOf(s,e)?o.deepMix({},this.get("label"),n.innerLabels):o.deepMix({},n.label,this.get("label"))},n.getLabelsItems=function(t){var e,n=this,r=[],i=n.get("label"),a=n.get("geom");return o.each(t,function(t){e=t._origin;var s=n._getLabelValue(t);o.isArray(s)||(s=[s]);var u=s.length;o.each(s,function(l,c){var h,f=n.getLabelPoint(s,t,c);f&&!o.isNil(f.text)&&""!==f.text&&(f=o.mix({},e,f),h=i&&i.label&&i.label.textAlign?i.label.textAlign:n.getLabelAlign(f,c,u),f.textAlign=h,a&&(f._id=a._getShapeId(e)+"-glabel-"+c+"-"+f.text),f.coord=n.get("coord"),r.push(f))})}),r},n.adjustItems=function(t){return t},n.drawLines=function(t,e){var n=this;n.getDefaultOffset()>0&&o.each(t,function(t){n.lineToLabel(t,e)})},n.lineToLabel=function(t,e){var n=this.get("coord"),r=t.x-t._offset.x,i=t.y-t._offset.y,a=(r+t.x)/2,s=(i+t.y)/2,u=this.get("lineGroup");u||(u=this.addGroup({elCls:"x-line-group"}),this.set("lineGroup",u));var l=u.addShape("path",{attrs:o.mix({path:["M"+r,i+" Q"+a,s+" "+t.x,t.y].join(","),fill:null,stroke:t.color},e)});l.name="labelLine",l._id=t._id&&t._id.replace("glabel","glabelline"),l.set("coord",n)},n.getLabelPoint=function(t,e,n){function r(e,n){return o.isArray(e)&&(e=1===t.length?e.length<=2?e[e.length-1]:function(t){var e=0;return o.each(t,function(t){e+=t}),e/t.length}(e):e[n]),e}var i=this.get("coord"),a={x:r(e.x,n),y:r(e.y,n),text:t[n]};if(e&&e.nextPoints&&("funnel"===e.shape||"pyramid"===e.shape)){var s=-1/0;e.nextPoints.forEach(function(t){(t=i.convert(t)).x>s&&(s=t.x)}),a.x=(a.x+s)/2}"pyramid"===e.shape&&!e.nextPoints&&e.points&&e.points.forEach(function(t){t=i.convert(t),(o.isArray(t.x)&&-1===e.x.indexOf(t.x)||o.isNumber(t.x)&&e.x!==t.x)&&(a.x=(a.x+t.x)/2)});var u=this.getLabelOffset(a,n,t.length);return this.transLabelPoint(a),a.x+=u.x,a.y+=u.y,a.color=e.color,a._offset=u,a},n.transLabelPoint=function(t){var e=this.get("coord").applyMatrix(t.x,t.y,1);t.x=e[0],t.y=e[1]},n.getOffsetVector=function(){var t=this.get("label").offset||0,e=this.get("coord");return e.isTransposed?e.applyMatrix(t,0):e.applyMatrix(0,t)},n.getDefaultOffset=function(){var t=this.get("coord"),e=this.getOffsetVector();return t.isTransposed?e[0]:e[1]},n.getLabelOffset=function(t,e,n){var r=this.getDefaultOffset(),i=this.get("coord").isTransposed,a=i?1:-1,o={x:0,y:0};return o[i?"x":"y"]=e>0||1===n?r*a:r*a*-1,o},n.getLabelAlign=function(t,e,n){var r="center";if(this.get("coord").isTransposed){var i=this.getDefaultOffset();r=i<0?"right":0===i?"center":"left",n>1&&0===e&&("right"===r?r="left":"left"===r&&(r="right"))}return r},n.showLabels=function(t){var e=this.getLabelsItems(t),n=this.get("label");e=this.adjustItems(e),this.resetLabels(e),n.labelLine&&this.drawLines(e,n.labelLine)},n.destroy=function(){this.removeLabels(),t.prototype.destroy.call(this)},e}(r);o.assign(u.prototype,i.LabelsRenderer),t.exports=u},function(t,e,n){var r=n(130);r.LabelsRenderer=n(300),t.exports=r},function(t,e,n){var r=n(0),i=n(6).Group,a=r.DomUtil,o=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){return{zIndex:6,items:null,textStyle:null,formatter:null,htmlTemplate:null,_containerTpl:'<div class="g-labels" style="position:absolute;top:0;left:0;"></div>',_itemTpl:'<div class="g-label" style="position:absolute;">{text}</div>'}},n._renderUI=function(){this._drawLabels()},n._drawLabels=function(){var t=this,e=t.get("items");r.each(e,function(e,n){t._addLabel(e,n)})},n._addLabel=function(t,e){var n=this._getLabelCfg(t,e);return this._createText(n)},n._getLabelCfg=function(t,e){var n=this.get("textStyle")||{},i=this.get("formatter"),a=this.get("htmlTemplate");if(!r.isObject(t)){var o=t;(t={}).text=o}return r.isFunction(n)&&(n=n(t.text,t,e)),i&&(t.text=i(t.text,t,e)),r.isFunction(a)&&(t.text=a(t.text,t,e)),r.isNil(t.text)&&(t.text=""),t.text=t.text+"",r.mix({},t,n,{x:t.x||0,y:t.y||0})},n._createText=function(t){var e,n=this.get("htmlTemplate"),r=this.get("customDiv");if(!n){var i=t.point;return e=this.addShape("text"),this._setLabelAttrs(e,t),e.setSilent("origin",i),e.name="label",this.get("appendInfo")&&e.setSilent("appendInfo",this.get("appendInfo")),e}if(!r){var o=this.get("_containerTpl"),s=this.get("canvas").get("el").parentNode;r=a.createDom(o),s.style.position="relative",s.appendChild(r),this.set("customDiv",r)}var u=this._createDom(t);r.appendChild(u),this._setCustomPosition(t,u)},n._setLabelAttrs=function(t,e){var n=e.rotate;delete e.rotate,delete e.point,t.attr(e),n&&t.transform([["t",-e.x,-e.y],["r",n],["t",e.x,e.y]])},n._setCustomPosition=function(t,e){var n=t.textAlign||"left",r=t.y,i=t.x,o=a.getOuterWidth(e);r-=a.getOuterHeight(e)/2,"center"===n?i-=o/2:"right"===n&&(i-=o),e.style.top=parseInt(r,10)+"px",e.style.left=parseInt(i,10)+"px"},n._createDom=function(t){var e=this.get("_itemTpl"),n=this.get("htmlTemplate");r.isString(n)&&(t.text=r.substitute(n,{text:t.text}));var i=r.substitute(e,{text:t.text});return a.createDom(i)},n.getLabels=function(){var t=this.get("customDiv");return t?r.toArray(t.childNodes):this.get("children")},n.addLabel=function(t){var e=this.get("items"),n=e.length;return e.push(t),this._addLabel(t,n)},n.changeLabel=function(t,e){if(t){var n=this.get("htmlTemplate"),i=r.indexOf(this.getLabels(),t),a=this._getLabelCfg(e,i);if(n){var o=this._createDom(a);t.innerHTML=o.innerHTML,this._setCustomPosition(a,t)}else t._id=e._id,t.resetMatrix(),this._setLabelAttrs(t,a)}},n.clear=function(){var e=this.get("customDiv");e&&(e.innerHTML=""),t.prototype.clear.call(this)},n.setItems=function(t){this.clear(),this.set("items",t),this._drawLabels()},n.remove=function(){var e=this.get("customDiv");e&&e.parentNode.removeChild(e),t.prototype.remove.call(this)},e}(i);t.exports=o},function(t,e,n){var r=n(128),i=n(21),a=n(0),o=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getPointRauis=function(t,e){return i.getPointRadius(t,e)},n.getCirclePoint=function(t,e,n){var r=this.get("coord"),i=r.getCenter(),a=this._isEmitLabels(),o=this.getPointRauis(r,n);return r.isTransposed&&o>e&&!a?t+=2*Math.asin(e/(2*o)):o+=e,{x:i.x+o*Math.cos(t),y:i.y+o*Math.sin(t),angle:t,r:o}},n.getArcPoint=function(t,e){var n;return e=e||0,n=a.isArray(t.x)||a.isArray(t.y)?{x:a.isArray(t.x)?t.x[e]:t.x,y:a.isArray(t.y)?t.y[e]:t.y}:t,this.transLabelPoint(n),n},n.getPointAngle=function(t){var e=this.get("coord");return i.getPointAngle(e,t)},n.getMiddlePoint=function(t){var e=this.get("coord"),n=t.length,r={x:0,y:0};return a.each(t,function(t){r.x+=t.x,r.y+=t.y}),r.x/=n,r.y/=n,r=e.convert(r)},n._isToMiddle=function(t){return t.x.length>2},n.getLabelPoint=function(t,e,n){var r,i=t[n],a=1;this._isToMiddle(e)?r=this.getMiddlePoint(e.points):(1===t.length&&0===n?n=1:0===n&&(a=-1),r=this.getArcPoint(e,n));var o=this.getDefaultOffset();o*=a;var s=this.getPointAngle(r),u=this.getCirclePoint(s,o,r);return u.text=i,u.angle=s,u.color=e.color,u.rotate=this.getLabelRotate(s,o,e),u},n._isEmitLabels=function(){return this.get("label").labelEmit},n.getLabelRotate=function(t){var e;return e=180*t/Math.PI,e+=90,this._isEmitLabels()&&(e-=90),e&&(e>90?e-=180:e<-90&&(e+=180)),e/180*Math.PI},n.getLabelAlign=function(t){var e,n=this.get("coord");if(this._isEmitLabels())e=t.angle<=Math.PI/2&&t.angle>-Math.PI/2?"left":"right";else if(n.isTransposed){var r=n.getCenter(),i=this.getDefaultOffset();e=Math.abs(t.x-r.x)<1?"center":t.angle>Math.PI||t.angle<=0?i>0?"left":"right":i>0?"right":"left"}else e="center";return e},e}(r);t.exports=o},function(t,e,n){t.exports={Scale:n(307),Coord:n(308),Axis:n(313),Guide:n(320),Legend:n(329),Tooltip:n(335),Event:n(337)}},function(t,e,n){var r=n(0),i=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return r.mix({},e,{type:"text",position:null,content:null,style:{fill:"#999",fontSize:12,fontWeight:500,textAlign:"center"},offsetX:null,offsetY:null,top:!0})},n.render=function(t,e){var n=this.parsePoint(t,this.position),i=r.mix({},this.style);this.offsetX&&(n.x+=this.offsetX),this.offsetY&&(n.y+=this.offsetY),i.rotate&&(i.rotate=i.rotate*Math.PI/180);var a=e.addShape("Text",{zIndex:this.zIndex,attrs:r.mix({text:this.content},i,n)});a.name="guide-text",this.appendInfo&&a.setSilent("appendInfo",this.appendInfo),this.el=a},e}(n(18));t.exports=i},function(t,e,n){var r=n(133),i=n(0),a=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return i.mix({},e,{type:"dataMarker",zIndex:1,top:!0,position:null,style:{point:{r:4,fill:"#FFFFFF",stroke:"#1890FF",lineWidth:2},line:{stroke:"#000000",lineWidth:1,opacity:.25},text:{fill:"#000000",opacity:.65,fontSize:14,fontWeight:500,textAlign:"center"}},display:{point:!0,line:!0,text:!0},lineLength:30,direction:"upward"})},n.render=function(t,e){var n=this.parsePoint(t,this.position),r=e.addGroup();r.name="marker-group",r.translate(n.x,n.y);var i=this._getElementPosition();this.display.line&&this._drawLine(i.line,r),this.display.text&&this.content&&this._drawText(i.text,r),this.display.point&&this._drawPoint(i.point,r),this.appendInfo&&r.setSilent("marker-group",this.appendInfo),this.el=r},n.set=function(t,e){this[t]=e},n._getElementPosition=function(){var t=this.display.line?this.lineLength:5;this.style.text.textBaseline="upward"===this.direction?"bottom":"top";var e="upward"===this.direction?-1:1;return{point:{x:0,y:0},line:[{x:0,y:0},{x:0,y:t*e}],text:{x:0,y:t*e}}},n._drawLine=function(t,e){e.addShape("path",{attrs:i.mix({path:[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y]]},this.style.line)})},n._drawText=function(t,e){e.addShape("text",{attrs:i.mix({text:this.content},this.style.text,t)})},n._drawPoint=function(t,e){e.addShape("circle",{attrs:i.mix({},this.style.point,t)})},e}(r);t.exports=a},function(t,e,n){function r(t,e){return t.getElementsByClassName(e)[0]}function i(t,e){var n=t.className;return s.isNil(n)?t:(n=n.split(" ")).indexOf(e)>-1?t:t.parentNode?t.parentNode.className===p?t.parentNode:i(t.parentNode,e):null}function a(t,e){var n=null,r=e instanceof f?e.get("value"):e;return s.each(t,function(t){if(t.value===r)return n=t,!1}),n}function o(t,e){return t.findBy(function(t){return t.name===e})}var s=n(0),u=n(136),l=s.DomUtil,c=n(6),h=c.Event,f=c.Group,d=n(3),p="g2-legend",g="g2-legend-list",v="g2-legend-list-item",m="g2-legend-marker",y=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return s.mix({},e,{type:"category-legend",items:null,itemGap:5,titleGap:15,itemMarginBottom:8,itemsGroup:null,layout:"horizontal",allowAllCanceled:!1,backPadding:[0,0,0,0],checkable:!0,unCheckColor:"#ccc",background:{fill:"#fff",fillOpacity:0},itemWidth:null,textStyle:{fill:"#333",fontSize:12,textAlign:"start",textBaseline:"middle",fontFamily:d.fontFamily},_wordSpaceing:8,useHtml:!1,container:null,containerTpl:'<div class="'+p+'"><h4 class="g2-legend-title"></h4><ul class="'+g+'"></ul></div>',_defaultItemTpl:'<li class="'+v+' item-{index} {checked}" data-color="{originColor}" data-value="{originValue}"><i class="'+m+'" style="background-color:{color};"></i><span class="g2-legend-text">{value}</span></li>',itemTpl:null,clickable:!0,selectedMode:"multiple",reversed:!1,autoWrap:!0})},n._beforeRenderUI=function(){t.prototype._beforeRenderUI.call(this)},n._renderUI=function(){this.get("useHtml")?this._renderHTML():(t.prototype._renderUI.call(this),this._renderItems(),this.get("autoWrap")&&this._adjustItems())},n._bindUI=function(){this.get("hoverable")&&(this.on("mousemove",s.wrapBehavior(this,"_onMousemove")),this.on("mouseleave",s.wrapBehavior(this,"_onMouseleave"))),this.get("clickable")&&this.on("click",s.wrapBehavior(this,"_onClick"))},n._getLegendItem=function(t){var e=t.get("parent");return e&&"legendGroup"===e.name?e:null},n._onMousemove=function(t){var e=this._getLegendItem(t.currentTarget);if(e&&e.get("checked")){var n=this.get("items"),r=new h("itemhover",t,!0,!0);r.item=a(n,e),r.checked=e.get("checked"),this.emit("itemhover",r)}else e||this.emit("itemunhover",t)},n._onMouseleave=function(t){this.emit("itemunhover",t)},n._onClick=function(t){var e=this._getLegendItem(t.currentTarget),n=this.get("items");if(e&&!e.get("destroyed")){var r=e.get("checked");if(!this.get("allowAllCanceled")&&r&&1===this.getCheckedCount())return;var i=this.get("selectedMode"),u=a(n,e),l=new h("itemclick",t,!0,!0);l.item=u,l.currentTarget=e,l.appendInfo=t.currentTarget.get("appendInfo"),l.checked="single"===i||!r;var c,f,d,p=this.get("unCheckColor"),g=this.get("textStyle").fill;if("single"===i){var v=this.get("itemsGroup").get("children");s.each(v,function(t){c=o(t,"legend-marker"),f=o(t,"legend-text"),d=o(t,"legend-item"),t!==e?(c.attr("fill")&&c.attr("fill",p),c.attr("stroke")&&c.attr("stroke",p),f.attr("fill",p),c.setSilent("checked",!1),f.setSilent("checked",!1),d.setSilent("checked",!1),t.setSilent("checked",!1)):(c.attr("fill")&&c.attr("fill",u.marker.fill),c.attr("stroke")&&c.attr("stroke",u.marker.stroke),f.attr("fill",g),c.setSilent("checked",!0),f.setSilent("checked",!0),d.setSilent("checked",!0),t.setSilent("checked",!0))})}else c=o(e,"legend-marker"),f=o(e,"legend-text"),d=o(e,"legend-item"),c.attr("fill")&&c.attr("fill",r?p:u.marker.fill),c.attr("stroke")&&c.attr("stroke",r?p:u.marker.stroke),f.attr("fill",r?p:g),e.setSilent("checked",!r),c.setSilent("checked",!r),f.setSilent("checked",!r),d.setSilent("checked",!r);this.emit("itemclick",l)}},n._renderHTML=function(){var t=this,e=this,n=e.get("canvas"),o=e.get("viewTheme")||d,u=n.get("el").parentNode,c=this.get("title"),h=e.get("containerTpl"),f=l.createDom(h),y=r(f,"g2-legend-title"),_=r(f,g),b=e.get("unCheckColor"),x=e.get("selectedMode"),w=o.legend.html,S=e.get("container");if(/^\#/.test(S)){var T=S.replace("#","");(S=document.getElementById(T)).appendChild(f)}else{var O,M=e.get("position"),k=e.get("canvas");O="left"===M||"right"===M?{maxHeight:(e.get("maxLength")||k.get("height"))+"px"}:{maxWidth:(e.get("maxLength")||k.get("width"))+"px"},l.modifyCSS(f,s.mix({},w[p],O,e.get(p))),u.appendChild(f)}l.modifyCSS(_,s.mix({},w[g],e.get(g))),y&&(c&&c.text?(y.innerHTML=c.text,l.modifyCSS(y,s.mix({},w["g2-legend-title"],e.get("g2-legend-title")))):f.removeChild(y));var C=e.get("items"),E=e.get("_defaultItemTpl"),A=e.get("itemTpl");A&&A!==E&&(E=A),e.get("reversed")&&C.reverse();var I=e.get("position"),P=s.mix({},w[v],{display:"right"===I||"left"===I?"block":"inline-block"},e.get(v)),L=s.mix({},w[m],e.get(m));if(s.each(C,function(t,n){var i,a=t.checked,o=e._formatItemValue(t.value),u=t.marker.fill||t.marker.stroke,c=a?u:b;i=s.isFunction(E)?E(o,c,a,n):E;var h=s.substitute(i,{index:n,checked:a?"checked":"unChecked",value:o,color:c,originColor:u,originValue:t.value.replace(/\"/g,"&quot;")}),f=l.createDom(h),d=r(f,m);l.modifyCSS(f,P),d&&l.modifyCSS(d,L),a||(f.style.color=b,d&&(d.style.backgroundColor=b)),_.appendChild(f)}),e.get("clickable")){var D=_.childNodes;_.onclick=function(n){var o=n.target,u=o.className;if(!((u=u.split(" ")).indexOf(p)>-1||u.indexOf(g)>-1)){var l=i(o,v),c=r(l,"g2-legend-text"),h=r(l,m),f=a(C,l.getAttribute("data-value"));if(f){var d=l.className,y=l.getAttribute("data-color");if("single"===x)f.checked=!0,s.each(D,function(t){t!==l?(r(t,m).style.backgroundColor=b,t.className=t.className.replace("checked","unChecked"),t.style.color=b,a(C,t.getAttribute("data-value")).checked=!1):(c&&(c.style.color=e.get("textStyle").fill),h&&(h.style.backgroundColor=y),l.className=d.replace("unChecked","checked"))});else{var _=d.includes("checked"),w=0;if(s.each(D,function(t){t.className.includes("checked")&&w++}),!t.get("allowAllCanceled")&&_&&1===w)return;f.checked=!f.checked,_?(h&&(h.style.backgroundColor=b),l.className=d.replace("checked","unChecked"),l.style.color=b):(h&&(h.style.backgroundColor=y),l.className=d.replace("unChecked","checked"),l.style.color=e.get("textStyle").fill)}e.emit("itemclick",{item:f,currentTarget:l,checked:"single"===x||f.checked})}}}}e.get("hoverable")&&(_.onmousemove=function(t){var n=t.target,r=n.className;if(!((r=r.split(" ")).indexOf(p)>-1||r.indexOf(g)>-1)){var o=i(n,v),s=o.className,u=a(C,o.getAttribute("data-value"));u&&s.includes("checked")?e.emit("itemhover",{item:u,currentTarget:o,checked:u.checked}):u||e.emit("itemunhover",t)}},_.onmouseout=function(t){e.emit("itemunhover",t)}),e.set("legendWrapper",f)},n._renderItems=function(){var t=this,e=t.get("items");t.get("reversed")&&e.reverse(),s.each(e,function(e,n){t._addItem(e,n)})},n._renderBack=function(){var t=this.get("backPadding"),e=this.get("background");this.renderBack(t,e)},n._formatItemValue=function(t){var e=this.get("itemFormatter");return e&&(t=e.call(this,t)),t},n._getNextX=function(){var t=this.get("layout"),e=this.get("itemGap"),n=this.get("itemsGroup"),r=this.get("itemWidth"),i=n.get("children"),a=0;return"horizontal"===t&&s.each(i,function(t){a+=(r||t.getBBox().width)+e}),a},n._getNextY=function(){var t=this.get("itemMarginBottom"),e=this.get("titleShape")?this.get("titleGap"):0,n=this.get("layout"),r=this.get("itemsGroup"),i=this.get("titleShape"),a=r.get("children"),o=e;return i&&(o+=i.getBBox().height),"vertical"===n&&s.each(a,function(e){o+=e.getBBox().height+t}),o},n._addItem=function(t){var e=this.get("itemsGroup"),n=this._getNextX(),r=this._getNextY(),i=this.get("unCheckColor"),a=e.addGroup({x:n,y:r,value:t.value,checked:t.checked});a.set("viewId",e.get("viewId"));var o=this.get("textStyle"),u=this.get("_wordSpaceing"),l=0;if(t.marker){var c=s.mix({},t.marker,{x:t.marker.radius+n,y:r});t.checked||(c.fill&&(c.fill=i),c.stroke&&(c.stroke=i));var h=a.addShape("marker",{type:"marker",attrs:c});h.attr("cursor","pointer"),h.name="legend-marker",l+=h.getBBox().width+u}var f=s.mix({},o,{x:l+n,y:r,text:this._formatItemValue(t.value)});t.checked||s.mix(f,{fill:i});var d=a.addShape("text",{attrs:f});d.attr("cursor","pointer"),d.name="legend-text",this.get("appendInfo")&&d.setSilent("appendInfo",this.get("appendInfo"));var p=a.getBBox(),g=this.get("itemWidth"),v=a.addShape("rect",{attrs:{x:n,y:r-p.height/2,fill:"#fff",fillOpacity:0,width:g||p.width,height:p.height}});return v.attr("cursor","pointer"),v.setSilent("origin",t),v.name="legend-item",this.get("appendInfo")&&v.setSilent("appendInfo",this.get("appendInfo")),a.name="legendGroup",a},n._adjustHorizontal=function(){var t,e,n=this.get("itemsGroup"),r=n.get("children"),i=this.get("maxLength"),a=this.get("itemGap"),o=this.get("itemMarginBottom"),u=this.get("titleShape")?this.get("titleGap"):0,l=0,c=0,h=this.get("itemWidth");n.getBBox().width>i&&s.each(r,function(n){e=n.getBBox(),i-c<(t=h||e.width)&&(l++,c=0),n.move(c,l*(e.height+o)+u),c+=t+a})},n._adjustVertical=function(){var t,e,n,r=this.get("itemsGroup"),i=this.get("titleShape"),a=r.get("children"),o=this.get("maxLength"),u=this.get("itemGap"),l=this.get("itemMarginBottom"),c=this.get("titleGap"),h=i?i.getBBox().height+c:0,f=this.get("itemWidth"),d=h,p=0,g=0;r.getBBox().height>o&&s.each(a,function(r){n=r.getBBox(),t=n.width,e=n.height,f?p=f+u:t>p&&(p=t+u),o-d<e?(d=h,r.move(g+=p,h)):r.move(g,d),d+=e+l})},n._adjustItems=function(){"horizontal"===this.get("layout")?this._adjustHorizontal():this._adjustVertical()},n.getWidth=function(){return this.get("useHtml")?l.getOuterWidth(this.get("legendWrapper")):t.prototype.getWidth.call(this)},n.getHeight=function(){return this.get("useHtml")?l.getOuterHeight(this.get("legendWrapper")):t.prototype.getHeight.call(this)},n.move=function(e,n){this.get("useHtml")&&!/^\#/.test(this.get("container"))?(l.modifyCSS(this.get("legendWrapper"),{left:e+"px",top:n+"px"}),this.set("x",e),this.set("y",n)):t.prototype.move.call(this,e,n)},n.remove=function(){if(this.get("useHtml")){var e=this.get("legendWrapper");e&&e.parentNode&&e.parentNode.removeChild(e)}t.prototype.remove.call(this)},e}(u);t.exports=y},function(t,e,n){var r=n(0),i=n(6).Group,a=n(3),o=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){return{title:{fill:"#333",textBaseline:"middle"},itemFormatter:null,useHtml:!1,autoPosition:!0,inPlot:!1,hoverable:!0}},n._beforeRenderUI=function(){var t=this.addGroup();t.set("viewId",this.get("viewId")),this.set("itemsGroup",t)},n._renderUI=function(){this._renderTitle()},n._renderTitle=function(){var t=this.get("title"),e=this.get("viewTheme")||a;if(t&&t.text){var n=this.addShape("text",{attrs:r.mix({x:0,y:0,fill:"#333",textBaseline:"middle",fontFamily:e.fontFamily},t)});n.name="legend-title",this.get("appendInfo")&&n.setSilent("appendInfo",this.get("appendInfo")),this.set("titleShape",n)}},n.getCheckedCount=function(){var t=this.get("itemsGroup").get("children");return r.filter(t,function(t){return t.get("checked")}).length},n.setItems=function(t){this.set("items",t),this.clearItems(),this._renderUI()},n.addItem=function(t){this.get("items").push(t),this.clearItems(),this._renderUI()},n.clearItems=function(){this.get("itemsGroup").clear()},n.getWidth=function(){return this.getBBox().width},n.getHeight=function(){return this.getBBox().height},e}(i);t.exports=o},function(t,e,n){var r=n(0),i=n(3),a=n(136),o=n(6),s=o.Event,u=o.Group,l=n(333),c=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return r.mix({},e,{type:"continuous-legend",items:null,layout:"vertical",width:156,height:20,titleGap:22,textStyle:{fill:"#333",textAlign:"center",textBaseline:"middle",fontFamily:i.fontFamily},slidable:!0,inRange:{fill:"#4E7CCC"},_range:[0,100],middleAttr:{fill:"#fff",fillOpacity:0},outRangeStyle:{fill:"#D9D9D9"},numberFormatter:null,labelOffset:10})},n._calStartPoint=function(){var t={x:0,y:this.get("titleGap")-12},e=this.get("titleShape");if(e){var n=e.getBBox();t.y+=n.height}return t},n._beforeRenderUI=function(){var e=this.get("items");r.isArray(e)&&!r.isEmpty(e)&&(t.prototype._beforeRenderUI.call(this),this.set("firstItem",e[0]),this.set("lastItem",e[e.length-1]))},n._formatItemValue=function(t){var e=this.get("numberFormatter");e&&(t=e(t));var n=this.get("itemFormatter");return n&&(t=n.call(this,t)),t},n._renderUI=function(){t.prototype._renderUI.call(this),this.get("slidable")?this._renderSlider():this._renderBackground()},n._renderSlider=function(){var t=new u,e=new u,n=new u,r=this._calStartPoint(),i=this.addGroup(l,{minHandleElement:t,maxHandleElement:e,backgroundElement:n,middleAttr:this.get("middleAttr"),layout:this.get("layout"),range:this.get("_range"),width:this.get("width"),height:this.get("height")});i.translate(r.x,r.y),this.set("slider",i),this._renderSliderShape().attr("clip",i.get("middleHandleElement")),this._renderTrigger()},n._addBackground=function(t,e,n){return t.addShape(e,{attrs:r.mix({},n,this.get("outRangeStyle"))}),t.addShape(e,{attrs:n})},n._renderTrigger=function(){var t,e,n=this.get("firstItem"),i=this.get("lastItem"),a=this.get("layout"),o=this.get("textStyle"),s=this.get("inRange");"color-legend"===this.get("type")?(t={fill:n.attrValue},e={fill:i.attrValue}):(t=r.mix({},s),e=r.mix({},s));var u=r.mix({text:this._formatItemValue(n.value)+""},o),l=r.mix({text:this._formatItemValue(i.value)+""},o);"vertical"===a?(this._addVerticalTrigger("min",t,u),this._addVerticalTrigger("max",e,l)):(this._addHorizontalTrigger("min",t,u),this._addHorizontalTrigger("max",e,l))},n._addVerticalTrigger=function(t,e,n){var i=this.get("slider").get(t+"HandleElement"),a=this.get("width"),o=i.addShape("polygon",{attrs:r.mix({points:[[a/2+12,0],[a/2+1,0],[a/2+12,"min"===t?12:-12]]},e)}),s=i.addShape("text",{attrs:r.mix(n,{x:a+8,y:"max"===t?-4:4,textAlign:"start",lineHeight:1,textBaseline:"middle"})}),u="vertical"===this.get("layout")?"ns-resize":"ew-resize";o.attr("cursor",u),s.attr("cursor",u),this.set(t+"ButtonElement",o),this.set(t+"TextElement",s)},n._addHorizontalTrigger=function(t,e,n){var i=this.get("slider").get(t+"HandleElement"),a=i.addShape("polygon",{attrs:r.mix({points:[[0,0],[0,12],["min"===t?-12:12,12]]},e)}),o=i.addShape("text",{attrs:r.mix(n,{x:"min"===t?-16:16,y:6,textAlign:"min"===t?"end":"start",textBaseline:"middle"})}),s="vertical"===this.get("layout")?"ns-resize":"ew-resize";a.attr("cursor",s),o.attr("cursor",s),this.set(t+"ButtonElement",a),this.set(t+"TextElement",o)},n._bindUI=function(){var t=this;t.get("slidable")&&t.get("slider").on("sliderchange",function(e){var n=e.range,r=1*t.get("firstItem").value,i=1*t.get("lastItem").value,a=r+n[0]/100*(i-r),o=r+n[1]/100*(i-r);t._updateElement(a,o);var u=new s("itemfilter",e,!0,!0);u.range=[a,o],t.emit("itemfilter",u)})},n._updateElement=function(t,e){var n=this.get("minTextElement"),r=this.get("maxTextElement");if(e>1&&(t=parseInt(t,10),e=parseInt(e,10)),n.attr("text",this._formatItemValue(t)+""),r.attr("text",this._formatItemValue(e)+""),"color-legend"===this.get("type")&&this.get("attr")){var i=this.get("attr"),a=this.get("minButtonElement"),o=this.get("maxButtonElement");a.attr("fill",i.mapping(t).join("")),o.attr("fill",i.mapping(e).join(""))}},e}(a);t.exports=c},function(t,e,n){"use strict";function r(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function i(t){return Object(a.selection)().transition(t)}e.a=r,e.b=i,e.c=function(){return++S};var a=n(58),o=n(423),s=n(424),u=n(425),l=n(426),c=n(427),h=n(428),f=n(429),d=n(430),p=n(431),g=n(432),v=n(433),m=n(434),y=n(435),_=n(436),b=n(437),x=n(438),w=n(347),S=0,T=a.selection.prototype;r.prototype=i.prototype={constructor:r,select:g.a,selectAll:v.a,filter:h.a,merge:f.a,selection:m.a,transition:x.a,call:T.call,nodes:T.nodes,node:T.node,size:T.size,empty:T.empty,each:T.each,on:d.a,attr:o.a,attrTween:s.a,style:y.a,styleTween:_.a,text:b.a,remove:p.a,tween:w.a,delay:u.a,duration:l.a,ease:c.a}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(48);n.d(e,"now",function(){return r.b}),n.d(e,"timer",function(){return r.c}),n.d(e,"timerFlush",function(){return r.d});var i=n(243);n.d(e,"timeout",function(){return i.a});var a=n(244);n.d(e,"interval",function(){return a.a})},function(t,e,n){var r=n(60),i=n(6),a=n(119),o=n(142),s=n(3),u=n(17),l=n(0),c={version:s.version,Animate:a,Chart:o,Global:s,Scale:r,Shape:u,Util:l,G:i,DomUtil:l.DomUtil,MatrixUtil:l.MatrixUtil,PathUtil:l.PathUtil,track:function(t){s.trackable=t}};n(340),"undefined"!=typeof window&&(window.G2?console.warn("There are multiple versions of G2. Version "+c.version+"'s reference is 'window.G2_3'"):window.G2=c),t.exports=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(245);n.d(e,"easeLinear",function(){return r.a});var i=n(246);n.d(e,"easeQuad",function(){return i.b}),n.d(e,"easeQuadIn",function(){return i.a}),n.d(e,"easeQuadOut",function(){return i.c}),n.d(e,"easeQuadInOut",function(){return i.b});var a=n(247);n.d(e,"easeCubic",function(){return a.b}),n.d(e,"easeCubicIn",function(){return a.a}),n.d(e,"easeCubicOut",function(){return a.c}),n.d(e,"easeCubicInOut",function(){return a.b});var o=n(248);n.d(e,"easePoly",function(){return o.b}),n.d(e,"easePolyIn",function(){return o.a}),n.d(e,"easePolyOut",function(){return o.c}),n.d(e,"easePolyInOut",function(){return o.b});var s=n(249);n.d(e,"easeSin",function(){return s.b}),n.d(e,"easeSinIn",function(){return s.a}),n.d(e,"easeSinOut",function(){return s.c}),n.d(e,"easeSinInOut",function(){return s.b});var u=n(250);n.d(e,"easeExp",function(){return u.b}),n.d(e,"easeExpIn",function(){return u.a}),n.d(e,"easeExpOut",function(){return u.c}),n.d(e,"easeExpInOut",function(){return u.b});var l=n(251);n.d(e,"easeCircle",function(){return l.b}),n.d(e,"easeCircleIn",function(){return l.a}),n.d(e,"easeCircleOut",function(){return l.c}),n.d(e,"easeCircleInOut",function(){return l.b});var c=n(252);n.d(e,"easeBounce",function(){return c.c}),n.d(e,"easeBounceIn",function(){return c.a}),n.d(e,"easeBounceOut",function(){return c.c}),n.d(e,"easeBounceInOut",function(){return c.b});var h=n(253);n.d(e,"easeBack",function(){return h.b}),n.d(e,"easeBackIn",function(){return h.a}),n.d(e,"easeBackOut",function(){return h.c}),n.d(e,"easeBackInOut",function(){return h.b});var f=n(254);n.d(e,"easeElastic",function(){return f.c}),n.d(e,"easeElasticIn",function(){return f.a}),n.d(e,"easeElasticOut",function(){return f.c}),n.d(e,"easeElasticInOut",function(){return f.b})},function(t,e,n){function r(t,e){return i.isEqualWith(t,e,function(t,e){return t===e})}var i=n(0),a=n(143),o=n(6).Canvas,s=i.DomUtil,u=n(3),l=n(339),c=n(132),h=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return i.mix(e,{id:null,forceFit:!1,container:null,wrapperEl:null,canvas:null,width:500,height:500,pixelRatio:null,backPlot:null,frontPlot:null,plotBackground:null,padding:u.plotCfg.padding,background:null,autoPaddingAppend:5,renderer:u.renderer,views:[]})},n.init=function(){var e=this.get("viewTheme");this._initCanvas(),this._initPlot(),this._initEvents(),t.prototype.init.call(this);var n=new c.Tooltip({chart:this,viewTheme:e,options:{}});this.set("tooltipController",n);var r=new c.Legend({chart:this,viewTheme:e});this.set("legendController",r),this.set("_id","chart"),this.emit("afterinit")},n._isAutoPadding=function(){var t=this.get("padding");return i.isArray(t)?-1!==t.indexOf("auto"):"auto"===t},n._getAutoPadding=function(){for(var t=this.get("padding"),e=function(t,e){return{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}}(this.get("frontPlot").getBBox(),this.get("backPlot").getBBox()),n=[0-e.minY,e.maxX-this.get("width"),e.maxY-this.get("height"),0-e.minX],r=i.toAllPadding(t),a=0;a<r.length;a++)if("auto"===r[a]){var o=Math.max(0,n[a]);r[a]=o+this.get("autoPaddingAppend")}return r},n._initCanvas=function(){var t=this.get("container"),e=this.get("id");!t&&e&&(t=e,this.set("container",e));var n=this.get("width"),r=this.get("height");if(i.isString(t)){if(!(t=document.getElementById(t)))throw new Error("Please specify the container for the chart!");this.set("container",t)}var a=s.createDom('<div style="position:relative;"></div>');t.appendChild(a),this.set("wrapperEl",a),this.get("forceFit")&&(n=s.getWidth(t,n),this.set("width",n));var u=new o({containerDOM:a,width:n,height:r,pixelRatio:this.get("pixelRatio"),renderer:this.get("renderer")});this.set("canvas",u)},n._initPlot=function(){this._initPlotBack();var t=this.get("canvas"),e=t.addGroup({zIndex:1}),n=t.addGroup({zIndex:2}),r=t.addGroup({zIndex:3});this.set("backPlot",e),this.set("middlePlot",n),this.set("frontPlot",r)},n._initPlotBack=function(){var t=this.get("canvas"),e=this.get("viewTheme"),n=t.addGroup(l,{padding:this.get("padding"),plotBackground:i.mix({},e.plotBackground,this.get("plotBackground")),background:i.mix({},e.background,this.get("background"))});this.set("plot",n),this.set("plotRange",n.get("plotRange"))},n._initEvents=function(){this.get("forceFit")&&window.addEventListener("resize",i.wrapBehavior(this,"_initForceFitEvent"))},n._initForceFitEvent=function(){var t=setTimeout(i.wrapBehavior(this,"forceFit"),200);clearTimeout(this.get("resizeTimer")),this.set("resizeTimer",t)},n._renderLegends=function(){var t=this.get("options").legends;if(i.isNil(t)||!1!==t){var e=this.get("legendController");if(e.options=t||{},e.plotRange=this.get("plotRange"),t&&t.custom)e.addCustomLegend();else{var n=this.getAllGeoms(),r=[];i.each(n,function(t){var n=t.get("view"),a=t.getAttrsForLegend();i.each(a,function(a){var o=a.getScale(a.type);if(o.field&&"identity"!==o.type&&!function(t,e){var n=!1;return i.each(r,function(t){var r=[].concat(t.values),i=[].concat(e.values);t.type!==e.type||t.field!==e.field||r.sort().toString()!==i.sort().toString()||(n=!0)}),n}(0,o)){r.push(o);var s=n.getFilteredOutValues(o.field);e.addLegend(o,a,t,s)}})});var a=this.getYScales();0===r.length&&a.length>1&&e.addMixedLegend(a,n)}e.alignLegends()}},n._renderTooltips=function(){var t=this.get("options");if(i.isNil(t.tooltip)||!1!==t.tooltip){var e=this.get("tooltipController");e.options=t.tooltip||{},e.renderTooltip()}},n.getAllGeoms=function(){var t=[];t=t.concat(this.get("geoms"));var e=this.get("views");return i.each(e,function(e){t=t.concat(e.get("geoms"))}),t},n.forceFit=function(){if(this&&!this.destroyed){var t=this.get("container"),e=this.get("width"),n=s.getWidth(t,e);if(0!==n&&n!==e){var r=this.get("height");this.changeSize(n,r)}return this}},n.resetPlot=function(){var t=this.get("plot"),e=this.get("padding");r(e,t.get("padding"))||(t.set("padding",e),t.repaint())},n.changeSize=function(t,e){this.get("canvas").changeSize(t,e);var n=this.get("plot");return this.set("width",t),this.set("height",e),n.repaint(),this.set("keepPadding",!0),this.repaint(),this.set("keepPadding",!1),this.emit("afterchangesize"),this},n.changeWidth=function(t){return this.changeSize(t,this.get("height"))},n.changeHeight=function(t){return this.changeSize(this.get("width"),t)},n.view=function(t){(t=t||{}).theme=this.get("theme"),t.parent=this,t.backPlot=this.get("backPlot"),t.middlePlot=this.get("middlePlot"),t.frontPlot=this.get("frontPlot"),t.canvas=this.get("canvas"),i.isNil(t.animate)&&(t.animate=this.get("animate")),t.options=i.mix({},this._getSharedOptions(),t.options);var e=new a(t);return e.set("_id","view"+this.get("views").length),this.get("views").push(e),this.emit("addview",{view:e}),e},n.removeView=function(t){var e=this.get("views");i.Array.remove(e,t),t.destroy()},n._getSharedOptions=function(){var t=this.get("options"),e={};return i.each(["scales","coord","axes"],function(n){e[n]=i.cloneDeep(t[n])}),e},n.getViewRegion=function(){var t=this.get("plotRange");return{start:t.bl,end:t.tr}},n.legend=function(t,e){var n=this.get("options");n.legends||(n.legends={});var r={};return!1===t?n.legends=!1:i.isObject(t)?r=t:i.isString(t)?r[t]=e:r=e,i.mix(n.legends,r),this},n.tooltip=function(t,e){var n=this.get("options");return n.tooltip||(n.tooltip={}),!1===t?n.tooltip=!1:i.isObject(t)?i.mix(n.tooltip,t):i.mix(n.tooltip,e),this},n.clear=function(){this.emit("beforeclear");for(var e=this.get("views");e.length>0;)e.shift().destroy();t.prototype.clear.call(this);var n=this.get("canvas");return this.resetPlot(),n.draw(),this.emit("afterclear"),this},n.clearInner=function(){var e=this.get("views");i.each(e,function(t){t.clearInner()});var n=this.get("tooltipController");if(n&&n.clear(),!this.get("keepLegend")){var r=this.get("legendController");r&&r.clear()}t.prototype.clearInner.call(this)},n.drawComponents=function(){t.prototype.drawComponents.call(this),this.get("keepLegend")||this._renderLegends()},n.render=function(){if(!this.get("keepPadding")&&this._isAutoPadding()){this.beforeRender(),this.drawComponents();var e=this._getAutoPadding(),n=this.get("plot");r(n.get("padding"),e)||(n.set("padding",e),n.repaint())}t.prototype.render.call(this),this._renderTooltips()},n.repaint=function(){this.get("keepPadding")||this.resetPlot(),t.prototype.repaint.call(this)},n.changeVisible=function(t){this.get("wrapperEl").style.display=t?"":"none"},n.toDataURL=function(){var t=this.get("canvas"),e=this.get("renderer"),n=t.get("el"),r="";if("svg"===e){var i=n.cloneNode(!0),a=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),o=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",a);o.replaceChild(i,o.documentElement);var s=(new XMLSerializer).serializeToString(o);r="data:image/svg+xml;charset=utf8,"+encodeURIComponent(s)}else"canvas"===e&&(r=n.toDataURL("image/png"));return r},n.downloadImage=function(t){var e=this,n=document.createElement("a"),r=e.get("renderer"),i=(t||"chart")+("svg"===r?".svg":".png");e.get("canvas").get("timeline").stopAllAnimations(),setTimeout(function(){var t=e.toDataURL();if(window.Blob&&window.URL&&"svg"!==r){for(var a=t.split(","),o=a[0].match(/:(.*?);/)[1],s=atob(a[1]),u=s.length,l=new Uint8Array(u);u--;)l[u]=s.charCodeAt(u);var c=new Blob([l],{type:o});window.navigator.msSaveBlob?window.navigator.msSaveBlob(c,i):n.addEventListener("click",function(){n.download=i,n.href=window.URL.createObjectURL(c)})}else n.addEventListener("click",function(){n.download=i,n.href=t});var h=document.createEvent("MouseEvents");h.initEvent("click",!1,!1),n.dispatchEvent(h)},16)},n.showTooltip=function(t){var e=this.getViewsByPoint(t);return e.length&&this.get("tooltipController").showTooltip(t,e),this},n.hideTooltip=function(){return this.get("tooltipController").hideTooltip(),this},n.getTooltipItems=function(t){var e=this.getViewsByPoint(t),n=[];return i.each(e,function(e){var r=e.get("geoms");i.each(r,function(e){var r=e.get("dataArray"),a=[];i.each(r,function(n){var r=e.findPoint(t,n);if(r){var i=e.getTipItems(r);a=a.concat(i)}}),n=n.concat(a)})}),n},n.destroy=function(){this.emit("beforedestroy"),clearTimeout(this.get("resizeTimer"));var e=this.get("canvas"),n=this.get("wrapperEl");n.parentNode.removeChild(n),t.prototype.destroy.call(this),e.destroy(),window.removeEventListener("resize",i.getWrapBehavior(this,"_initForceFitEvent")),this.emit("afterdestroy")},e}(a);t.exports=h},function(t,e,n){function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(t,e,n){var r=(t-e)/(n-e);return r>=0&&r<=1}function a(t,e){var n=!1;if(t)if("theta"===t.type){var r=t.start,a=t.end;n=i(e.x,r.x,a.x)&&i(e.y,r.y,a.y)}else{var o=t.invert(e);n=o.x>=0&&o.y>=0&&o.x<=1&&o.y<=1}return n}var o=n(53),s=n(20),u=n(0),l=n(132),c=n(3),h=n(126),f=n(338),d={};u.each(s,function(t,e){var n=u.lowerFirst(e);d[n]=function(e){var n=new t(e);return this.addGeom(n),n}});var p=function(t){function e(e){var n,i=r(r(n=t.call(this,e)||this));return i._setTheme(),u.each(s,function(t,e){var n=u.lowerFirst(e);i[n]=function(e){void 0===e&&(e={}),e.viewTheme=i.get("viewTheme");var n=new t(e);return i.addGeom(n),n}}),i.init(),n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){return{viewContainer:null,coord:null,start:{x:0,y:0},end:{x:1,y:1},geoms:[],scales:{},options:{},scaleController:null,padding:0,theme:null,parent:null,tooltipEnable:!0,animate:c.animate,visible:!0}},n._setTheme=function(){var t=this.get("theme"),e={},n={};u.isObject(t)?n=t:-1!==u.indexOf(Object.keys(h),t)&&(n=h[t]),u.deepMix(e,c,n),this.set("viewTheme",e)},n.init=function(){this._initViewPlot(),this.get("data")&&this._initData(this.get("data")),this._initOptions(),this._initControllers(),this._bindEvents()},n._initOptions=function(){var t=this,e=u.mix({},t.get("options"));e.scales||(e.scales={}),e.coord||(e.coord={}),!1===e.animate&&this.set("animate",!1),(!1===e.tooltip||u.isNull(e.tooltip))&&this.set("tooltipEnable",!1),e.geoms&&e.geoms.length&&u.each(e.geoms,function(e){t._createGeom(e)});var n=t.get("scaleController");n&&(n.defs=e.scales);var r=t.get("coordController");r&&r.reset(e.coord),this.set("options",e)},n._createGeom=function(t){var e,n=t.type;this[n]&&(e=this[n](),u.each(t,function(t,n){if(e[n])if(u.isObject(t)&&t.field)if("label"===t)e[n](t.field,t.callback,t.cfg);else{var r;u.each(t,function(t,e){"field"!==e&&(r=t)}),e[n](t.field,r)}else e[n](t)}))},n._initControllers=function(){var t=this.get("options"),e=this.get("viewTheme"),n=new l.Scale({viewTheme:e,defs:t.scales}),r=new l.Coord(t.coord);this.set("scaleController",n),this.set("coordController",r);var i=new l.Axis({viewTheme:e});this.set("axisController",i);var a=new l.Guide({viewTheme:e,options:t.guides||[]});this.set("guideController",a)},n._initViewPlot=function(){this.get("viewContainer")||this.set("viewContainer",this.get("middlePlot"))},n._initGeoms=function(){for(var t=this.get("geoms"),e=this.get("filteredData"),n=this.get("coord"),r=this.get("_id"),i=0;i<t.length;i++){var a=t[i];a.set("data",e),a.set("coord",n),a.set("_id",r+"-geom"+i),a.set("keyFields",this.get("keyFields")),a.init()}},n._clearGeoms=function(){for(var t=this.get("geoms"),e=0;e<t.length;e++)t[e].clear()},n._removeGeoms=function(){for(var t=this.get("geoms");t.length>0;)t.shift().destroy()},n._drawGeoms=function(){for(var t=this.get("geoms"),e=this.get("coord"),n=0;n<t.length;n++){var r=t[n];r.setCoord(e),r.paint()}},n.isShapeInView=function(t){var e=this.get("_id"),n=t._id;return n?n.split("-")[0]===e:t.get("parent").get("viewId")===e},n.getViewRegion=function(){var t,e,n=this.get("parent");if(n){var r=n.getViewRegion(),i=this._getViewRegion(r.start,r.end);t=i.start,e=i.end}else t=this.get("start"),e=this.get("end");return{start:t,end:e}},n._getViewRegion=function(t,e){var n=this.get("start"),r=this.get("end"),i=n.x,a=1-r.y,o=r.x,s=1-n.y,l=this.get("padding"),c=u.toAllPadding(l);return{start:{x:i*(e.x-t.x)+t.x+c[3],y:a*(e.y-t.y)+t.y-c[2]},end:{x:o*(e.x-t.x)+t.x-c[1],y:s*(e.y-t.y)+t.y+c[0]}}},n._createCoord=function(){var t=this.get("coordController"),e=this.getViewRegion(),n=t.createCoord(e.start,e.end);this.set("coord",n)},n._renderAxes=function(){var t=this.get("options").axes;if(!1!==t){var e=this.get("axisController");e.container=this.get("backPlot"),e.coord=this.get("coord"),e.options=t||{};var n=this.getXScale(),r=this.getYScales(),i=this.get("_id");e.createAxis(n,r,i)}},n._renderGuides=function(){var t=this.get("guideController");if(!u.isEmpty(t.options)){var e=this.get("coord");t.view=this,t.backContainer=this.get("backPlot"),t.frontContainer=this.get("frontPlot"),t.xScales=this._getScales("x"),t.yScales=this._getScales("y"),t.render(e)}},n._bindEvents=function(){var t=new l.Event({view:this,canvas:this.get("canvas")});t.bindEvents(),this.set("eventController",t)},n._clearEvents=function(){var t=this.get("eventController");t&&t.clearEvents()},n._getScales=function(t){for(var e=this.get("geoms"),n={},r=0;r<e.length;r++){var i=e[r],a="x"===t?i.getXScale():i.getYScale();a&&!n[a.field]&&(n[a.field]=a)}return n},n._adjustScale=function(){this._setCatScalesRange();for(var t=this.get("geoms"),e=this.get("scaleController").defs,n=0;n<t.length;n++){var r=t[n];if("interval"===r.get("type")){var i=r.getYScale(),a=i.field,o=i.max;e[a]&&e[a].min||"time"===i.type||(i.min>0?i.change({min:0}):o<=0&&i.change({max:0}))}}},n._setCatScalesRange=function(){var t=this.get("coord"),e=this.get("viewTheme"),n=this.getXScale(),r=this.getYScales(),i=[];n&&i.push(n),i=i.concat(r);var a=t.isPolar&&function(t){var e=t.startAngle,n=t.endAngle;return!(!u.isNil(e)&&!u.isNil(n)&&n-e<2*Math.PI)}(t),o=this.get("scaleController").defs;u.each(i,function(n){if((n.isCategory||n.isIdentity)&&n.values&&(!o[n.field]||!o[n.field].range)){var r,i=n.values.length;if(1===i)r=[.5,1];else{var s=0;r=a?t.isTransposed?[(s=1/i*e.widthRatio.multiplePie)/2,1-s/2]:[0,1-1/i]:[s=1/i*1/2,1-s]}n.range=r}})},n.getXScale=function(){var t=this.get("geoms"),e=null;return u.isEmpty(t)||(e=t[0].getXScale()),e},n.getYScales=function(){for(var t=this.get("geoms"),e=[],n=0;n<t.length;n++){var r=t[n].getYScale();r&&-1===u.indexOf(e,r)&&e.push(r)}return e},n.getXY=function(t){var e,n,r=this.get("coord"),i=this._getScales("x"),a=this._getScales("y");for(var o in t)i[o]&&(e=i[o].scale(t[o])),a[o]&&(n=a[o].scale(t[o]));return u.isNil(e)||u.isNil(n)?null:r.convert({x:e,y:n})},n.getSnapRecords=function(t){var e=this.get("geoms"),n=[];return u.each(e,function(e){var r,i=e.get("dataArray");u.each(i,function(i){(r=e.findPoint(t,i))&&n.push(r)})}),n},n.addGeom=function(t){this.get("geoms").push(t),t.set("view",this);var e=this.get("viewContainer");t.set("container",e),t.set("animate",this.get("animate")),t.bindEvents()},n.removeGeom=function(t){var e=this.get("geoms");u.Array.remove(e,t),t.destroy()},n.createScale=function(t,e){var n=this.get("scales"),r=this.get("parent"),i=n[t];if(!e){var a=this.get("filteredData"),o=this._getFieldsForLegend();e=a.length&&-1===o.indexOf(t)?a:this.get("data")}var s=this.get("scaleController");if(i){if(i.sync){var u=s.createScale(t,e);this._syncScale(i,u)}}else{if((i=s.createScale(t,e)).sync&&r){var l=r.createScale(t,e);i=this._getSyncScale(l,i)}n[t]=i}return i},n._getFieldsForLegend=function(){var t=[],e=this.get("geoms");return u.each(e,function(e){var n=e.getFieldsForLegend();t=t.concat(n)}),u.uniq(t)},n._getSyncScale=function(t,e){return t.type!==e.type?e:(this._syncScale(t,e),t)},n._syncScale=function(t,e){var n=u.union(t.values,e.values);if(e.isLinear){var r=Math.max(t.max,e.max),i=Math.min(t.min,e.min);t.max===r&&t.min===i||t.change({min:i,max:r,values:n})}n.length!==t.values.length&&t.change({values:n})},n.getFilteredValues=function(t){var e=this.get("scales")[t].values,n=this._getFilters();return n&&n[t]?e.filter(n[t]):e.slice(0)},n.getFilteredOutValues=function(t){var e=this.get("scales")[t].values,n=this._getFilters();return n&&n[t]?e.filter(function(e){return!n[t](e)}):[]},n.filter=function(t,e){var n=this.get("options");n.filters||(n.filters={}),n.filters[t]=e},n._getFilters=function(){return this.get("options").filters},n.execFilter=function(t){var e=this._getFilters();return e&&(t=t.filter(function(t){var n=!0;return u.each(e,function(e,r){if(e&&!(n=e(t[r],t)))return!1}),n})),t},n.axis=function(t,e){var n=this.get("options");return!1===t?n.axes=!1:(n.axes||(n.axes={}),n.axes[t]=e),this},n.guide=function(){return this.get("guideController")},n._getKeyFields=function(t){var e=[];u.each(t,function(t,n){t.key&&e.push(n)}),this.set("keyFields",e)},n.scale=function(t,e){var n=this.get("options").scales;return u.isObject(t)?u.mix(n,t):n[t]=e,this._getKeyFields(n),this},n.tooltip=function(t){return this.set("tooltipEnable",t),this},n.animate=function(t){return this.get("options").animate=t,this.set("animate",t),this},n.changeOptions=function(t){return this.set("options",t),this._initOptions(t),this},n.getViewsByPoint=function(t){var e=[],n=this.get("views");return a(this.get("coord"),t)&&e.push(this),u.each(n,function(n){n.get("visible")&&a(n.get("coord"),t)&&e.push(n)}),e},n.eachShape=function(t){var e=this,n=e.get("views"),r=e.get("canvas");u.each(n,function(e){e.eachShape(t)});var i=this.get("geoms");return u.each(i,function(n){var r=n.getShapes();u.each(r,function(r){var i=r.get("origin");if(u.isArray(i)){var a=i.map(function(t){return t._origin});t(a,r,n,e)}else t(i._origin,r,n,e)})}),r.draw(),this},n.filterShape=function(t){return this.eachShape(function(e,n,r,i){t(e,n,r,i)?n.show():n.hide()}),this},n.clearInner=function(){this.set("scales",{}),this.get("options").geoms=null,this._clearGeoms(),this.get("guideController")&&this.get("guideController").reset(),this.get("axisController")&&this.get("axisController").clear()},n.clear=function(){return this.get("options").filters=null,this._removeGeoms(),this.clearInner(),this.get("guideController")&&this.get("guideController").clear(),this.set("isUpdate",!1),this.set("keyFields",[]),this},n.coord=function(t,e){var n=this.get("coordController");return n.reset({type:t,cfg:e}),n},n.resetCoord=function(){this._createCoord()},n.source=function(t,e){return this._initData(t),e&&this.scale(e),this.emit("setdata"),this},n.changeData=function(t){return this.emit("beforechangedata"),this._initData(t),this.emit("afterchangedata"),this.repaint(),this},n._initData=function(t){var e=this.get("dataView");e&&(e.off("change",u.getWrapBehavior(this,"_onViewChange")),this.set("dataView",null)),t&&t.isDataView&&(t.on("change",u.wrapBehavior(this,"_onViewChange")),this.set("dataView",t),t=t.rows),this.set("data",t)},n._onViewChange=function(){this.emit("beforechangedata");var t=this.get("dataView").rows;this.set("data",t),this.emit("afterchangedata"),this.repaint()},n.beforeRender=function(){var t=this.get("views");u.each(t,function(t){t.beforeRender()}),this.initView()},n.drawComponents=function(){var t=this.get("views");u.each(t,function(t){t.drawComponents()}),this._renderAxes(),this._renderGuides()},n.drawCanvas=function(t){if(!t){var e=this.get("views");this.get("backPlot").sort();var n=this.get("canvas");if(this.get("animate")){var r=this.get("isUpdate");u.each(e,function(t){f.execAnimation(t,r)}),f.execAnimation(this,r)}else n.draw()}},n.render=function(t){return this.clearInner(),this.emit("beforerender"),this.beforeRender(),this.emit("beforepaint"),this.drawComponents(),this.paint(),this.emit("afterpaint"),this.drawCanvas(t),this.emit("afterrender"),this.set("rendered",!0),this},n.initView=function(){var t=this.get("data")||[],e=this.execFilter(t);this.set("filteredData",e),this._createCoord(),this._initGeoms(),this._adjustScale()},n.paint=function(){var t=this.get("views");u.each(t,function(t){t.paint()});var e=this.get("data");u.isEmpty(e)||this._drawGeoms(),this.get("visible")||this.changeVisible(!1,!0)},n.changeVisible=function(t,e){var n=this.get("geoms");u.each(n,function(e){e.changeVisible(t,!0)}),this.get("axisController")&&this.get("axisController").changeVisible(t),this.get("guideController")&&this.get("guideController").changeVisible(t),e||this.get("canvas").draw()},n.repaint=function(){this.set("isUpdate",!0),this.clearInner(),this.render()},n.destroy=function(){this._clearEvents();var e=this.get("dataView");e&&e.off("change",u.getWrapBehavior(this,"_onViewChange")),this.clear(),t.prototype.destroy.call(this)},e}(o);t.exports=p},function(t,e,n){var r=n(0);t.exports={splitPoints:function(t){var e=[],n=t.x,i=t.y;return i=r.isArray(i)?i:[i],r.each(i,function(t,i){var a={x:r.isArray(n)?n[i]:n,y:t};e.push(a)}),e}}},function(t,e,n){var r=n(7),i=n(8),a=n(62),o=[0,1,1.2,1.5,1.6,2,2.2,2.4,2.5,3,4,5,6,7.5,8,10],s=[0,1,2,4,5,10];t.exports=function(t){var e=t.min,n=t.max,u=t.interval,l=t.minTickInterval,c=[],h=t.minCount||5,f=t.maxCount||7,d=h===f,p=r(t.minLimit)?-1/0:t.minLimit,g=r(t.maxLimit)?1/0:t.maxLimit,v=(h+f)/2,m=v,y=t.snapArray?t.snapArray:d?o:s;if(e===p&&n===g&&d&&(u=(n-e)/(m-1)),r(e)&&(e=0),r(n)&&(n=0),n===e&&(0===e?n=1:e>0?e=0:n=0,n-e<5&&!u&&n-e>=1&&(u=1)),r(u)&&(u=a.snapFactorTo((n-e)/(v-1),y,"ceil"),f!==h&&((m=parseInt((n-e)/u,10))>f&&(m=f),m<h&&(m=h),u=a.snapFactorTo((n-e)/(m-1),y,"floor"))),i(l)&&u<l&&(u=l),t.interval||f!==h)n=Math.min(a.snapMultiple(n,u,"ceil"),g),e=Math.max(a.snapMultiple(e,u,"floor"),p),m=Math.round((n-e)/u),e=a.fixedBase(e,u),n=a.fixedBase(n,u);else{v=parseInt(v,10);var _,b=a.snapMultiple((n+e)/2,u,"ceil"),x=Math.floor((v-2)/2),w=b+x*u;_=v%2==0?b-x*u:b-(x+1)*u,w<n&&(w+=u),_>e&&(_-=u),n=a.fixedBase(w,u),e=a.fixedBase(_,u)}n=Math.min(n,g),e=Math.max(e,p),c.push(e);for(var S=1;S<m;S++){var T=a.fixedBase(u*S+e,u);T<n&&c.push(T)}return c[c.length-1]<n&&c.push(n),{min:e,max:n,interval:u,count:m,ticks:c}}},function(t,e,n){var r=n(14),i=n(8),a=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n._initDefaultCfg=function(){t.prototype._initDefaultCfg.call(this),this.isIdentity=!0,this.type="identity",this.value=null},n.getText=function(){return this.value.toString()},n.scale=function(t){return this.value!==t&&i(t)?t:this.range[0]},n.invert=function(){return this.value},e}(r);r.Identity=a,t.exports=a},function(t,e,n){var r=n(65),i=n(2),a=n(7),o=n(9),s=n(14),u=n(29),l=n(148),c=n(66),h=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n._initDefaultCfg=function(){t.prototype._initDefaultCfg.call(this),this.type="time",this.mask="YYYY-MM-DD"},n.init=function(){var e=this,n=e.values;if(n&&n.length){var r=[],o=1/0,s=o,u=0;i(n,function(t){var n=e._toTimeStamp(t);if(isNaN(n))throw new TypeError("Invalid Time: "+t);o>n?(s=o,o=n):s>n&&(s=n),u<n&&(u=n),r.push(n)}),n.length>1&&(e.minTickInterval=s-o),(a(e.min)||e._toTimeStamp(e.min)>o)&&(e.min=o),(a(e.max)||e._toTimeStamp(e.max)<u)&&(e.max=u)}t.prototype.init.call(this)},n.calculateTicks=function(){var t=this.tickCount;return l({min:this.min,max:this.max,minCount:t,maxCount:t,interval:this.tickInterval,minInterval:this.minTickInterval}).ticks},n.getText=function(t){var e=this.formatter;return t=this.translate(t),e?e(t):r.format(t,this.mask)},n.scale=function(e){return o(e)&&(e=this.translate(e)),t.prototype.scale.call(this,e)},n.translate=function(t){return this._toTimeStamp(t)},n._toTimeStamp=function(t){return c.toTimeStamp(t)},e}(u);s.Time=h,t.exports=h},function(t,e,n){function r(t){return new Date(t).getFullYear()}function i(t){return new Date(t,0,1).getTime()}function a(t){return new Date(t).getMonth()}function o(t,e){return new Date(t,e,1).getTime()}var s=n(62),u=n(7),l=[1,2,4,6,8,12],c=36e5,h=864e5;t.exports=function(t){var e,n=t.minInterval,f=[],d=t.min,p=t.max,g=t.interval;if(p===d&&(p=d+h),u(g)){var v=h;g=parseInt((p-d)/(t.maxCount||6),10),n&&n>g&&(g=n);var m=g/31536e6,y=r(d);if(m>.51){for(var _=Math.ceil(m),b=r(p),x=y;x<=b+_;x+=_)f.push(i(x));g=null}else if(m>.0834){for(var w=Math.ceil(m/.0834),S=a(d),T=function(t,e){var n=r(t),i=r(e),o=a(t);return 12*(i-n)+(a(e)-o)%12}(d,p),O=0;O<=T+w;O+=w)f.push(o(y,O+S));g=null}else if(g>.5*v){var M=new Date(d),k=M.getFullYear(),C=M.getMonth(d),E=M.getDate(),A=Math.ceil(g/v),I=Math.ceil((p-d)/h);g=A*v;for(var P=0;P<I+A;P+=A)f.push(new Date(k,C,E+P).getTime())}else if(g>c){var L=new Date(d),D=L.getFullYear(),j=L.getMonth(d),R=L.getDate(),N=L.getHours(),B=s.snapTo(l,Math.ceil(g/c)),F=Math.ceil((p-d)/c);g=B*c;for(var U=0;U<=F+B;U+=B)f.push(new Date(D,j,R,N+U).getTime())}else if(g>6e4){var z=Math.ceil((p-d)/6e4),V=Math.ceil(g/6e4);g=6e4*V;for(var H=0;H<=z+V;H+=V)f.push(d+6e4*H)}else{g<1e3&&(g=1e3),d=1e3*Math.floor(d/1e3);var G=Math.ceil((p-d)/1e3),W=Math.ceil(g/1e3);g=1e3*W;for(var q=0;q<G+W;q+=W)f.push(d+1e3*q)}}if(!f.length){d=1e3*Math.floor(d/1e3),e=((p=1e3*Math.ceil(p/1e3))-d)/g;for(var Y=0;Y<=e;Y++)f.push(s.fixedBase(g*Y+d,g))}return{max:p,min:d,interval:g,ticks:f,count:f.length}}},function(t,e,n){var r=n(13);t.exports=function(t){return r(t,"Date")}},function(t,e,n){var r=n(14),i=n(63),a=n(65),o=n(64),s=n(66),u=n(2),l=n(8),c=n(28),h=n(9),f=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n._initDefaultCfg=function(){t.prototype._initDefaultCfg.call(this),this.type="timeCat",this.sortable=!0,this.tickCount=5,this.mask="YYYY-MM-DD"},n.init=function(){var t=this,e=this.values;u(e,function(n,r){e[r]=t._toTimeStamp(n)}),this.sortable&&e.sort(function(t,e){return t-e}),t.ticks||(t.ticks=this.calculateTicks())},n.calculateTicks=function(){var t=this.tickCount;return t?o({maxCount:t,data:this.values,isRounding:this.isRounding}).ticks:this.values},n.translate=function(t){t=this._toTimeStamp(t);var e=this.values.indexOf(t);return-1===e&&(e=l(t)&&t<this.values.length?t:NaN),e},n.scale=function(t){var e=this.rangeMin(),n=this.rangeMax(),r=this.translate(t);return e+(1===this.values.length||isNaN(r)?r:r>-1?r/(this.values.length-1):0)*(n-e)},n.getText=function(t){var e="",n=this.translate(t);e=n>-1?this.values[n]:t;var r=this.formatter;return e=parseInt(e,10),r?r(e):a.format(e,this.mask)},n.getTicks=function(){var t=this,e=[];return u(this.ticks,function(n){var r;r=c(n)?n:{text:h(n)?n:t.getText(n),value:t.scale(n),tickValue:n},e.push(r)}),e},n._toTimeStamp=function(t){return s.toTimeStamp(t)},e}(i);r.TimeCat=f,t.exports=f},function(t,e,n){function r(t,e){return 1===t?1:Math.log(e)/Math.log(t)}var i=n(2),a=n(14),o=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n._initDefaultCfg=function(){t.prototype._initDefaultCfg.call(this),this.type="log",this.tickCount=10,this.base=2,this._minTick=null},n.calculateTicks=function(){var t,e=this.base;if(this.min<0)throw new Error("The minimum value must be greater than zero!");var n=r(e,this.max);if(this.min>0)t=Math.floor(r(e,this.min));else{var a=this.max;i(this.values,function(t){t>0&&t<a&&(a=t)}),a===this.max&&(a=this.max/e),a>1&&(a=1),t=Math.floor(r(e,a)),this._minTick=t,this.positiveMin=a}for(var o=Math.ceil((n-t)/this.tickCount),s=[],u=t;u<n+o;u+=o)s.push(Math.pow(e,u));return 0===this.min&&s.unshift(0),s},n._getScalePercent=function(t){var e=this.max,n=this.min;if(e===n)return 0;if(t<=0)return 0;var i=this.base,a=this.positiveMin;return a&&(n=1*a/i),t<a?t/a/(r(i,e)-r(i,n)):(r(i,t)-r(i,n))/(r(i,e)-r(i,n))},n.scale=function(t){var e=this._getScalePercent(t),n=this.rangeMin();return n+e*(this.rangeMax()-n)},n.invert=function(t){var e,n=this.base,i=r(n,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s=this.positiveMin;if(s){if(0===t)return 0;var u=1/(i-(e=r(n,s/n)))*o;if(t<u)return t/u*s}else e=r(n,this.min);return Math.pow(n,(t-a)/o*(i-e)+e)},e}(n(29));a.Log=o,t.exports=o},function(t,e,n){function r(t,e){var n=Math.E;return Math.pow(n,Math.log(e)/t)}var i=n(14),a=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n._initDefaultCfg=function(){t.prototype._initDefaultCfg.call(this),this.type="pow",this.tickCount=10,this.exponent=2},n.calculateTicks=function(){var t,e=this.exponent,n=Math.ceil(r(e,this.max));if((t=this.min>=0?Math.floor(r(e,this.min)):0)>n){var i=n;n=t,t=i}for(var a=Math.ceil((n-t)/this.tickCount),o=[],s=t;s<n+a;s+=a)o.push(Math.pow(s,e));return o},n._getScalePercent=function(t){var e=this.max,n=this.min;if(e===n)return 0;var i=this.exponent;return(r(i,t)-r(i,n))/(r(i,e)-r(i,n))},n.scale=function(t){var e=this._getScalePercent(t),n=this.rangeMin();return n+e*(this.rangeMax()-n)},n.invert=function(t){var e=(t-this.rangeMin())/(this.rangeMax()-this.rangeMin()),n=this.exponent,i=r(n,this.max),a=r(n,this.min);return Math.pow(e*(i-a)+a,n)},e}(n(29));i.Pow=a,t.exports=a},function(t,e,n){t.exports={Canvas:n(154),Group:n(93),Shape:n(5),Arc:n(98),Circle:n(99),Dom:n(100),Ellipse:n(101),Fan:n(102),Image:n(103),Line:n(104),Marker:n(46),Path:n(105),Polygon:n(106),Polyline:n(107),Rect:n(108),Text:n(109),PathSegment:n(35),PathUtil:n(47),Event:n(92),version:"3.2.2"}},function(t,e,n){var r=n(1),i=n(92),a=n(93),o=n(242),s=n(267),u=function t(e){t.superclass.constructor.call(this,e)};u.CFG={eventEnable:!0,width:null,height:null,widthCanvas:null,heightCanvas:null,widthStyle:null,heightStyle:null,containerDOM:null,canvasDOM:null,pixelRatio:null,renderer:"canvas"},r.extend(u,a),r.augment(u,{init:function(){u.superclass.init.call(this),this._setGlobalParam(),this._setContainer(),this._initPainter(),this._scale(),this.get("eventEnable")&&this._registEvents()},getEmitter:function(t,e){if(t){if(!r.isEmpty(t._getEvents()))return t;var n=t.get("parent");if(n&&!e.propagationStopped)return this.getEmitter(n,e)}},_getEventObj:function(t,e,n,r){var a=new i(t,e,!0,!0);return a.x=n.x,a.y=n.y,a.clientX=e.clientX,a.clientY=e.clientY,a.currentTarget=r,a.target=r,a},_triggerEvent:function(t,e){var n,r=this.getPointByClient(e.clientX,e.clientY),i=this.getShape(r.x,r.y,e),a=this.get("el");if("mousemove"===t){var o=this.get("preShape");if(o&&o!==i){var s=this._getEventObj("mouseleave",e,r,o);(n=this.getEmitter(o,e))&&n.emit("mouseleave",s),a.style.cursor="default"}if(i){var u=this._getEventObj("mousemove",e,r,i);if((n=this.getEmitter(i,e))&&n.emit("mousemove",u),o!==i){var l=this._getEventObj("mouseenter",e,r,i);n&&n.emit("mouseenter",l,e)}}else{var c=this._getEventObj("mousemove",e,r,this);this.emit("mousemove",c)}this.set("preShape",i)}else{var h=this._getEventObj(t,e,r,i||this);(n=this.getEmitter(i,e))&&n!==this&&n.emit(t,h),this.emit(t,h)}i&&!i.get("destroyed")&&(a.style.cursor=i.attr("cursor")||"default")},_registEvents:function(){var t=this,e=t.get("el");r.each(["mouseout","mouseover","mousemove","mousedown","mouseleave","mouseover","mouseup","click","dblclick"],function(n){e.addEventListener(n,function(e){t._triggerEvent(n,e)},!1)}),e.addEventListener("touchstart",function(e){r.isEmpty(e.touches)||t._triggerEvent("touchstart",e.touches[0])},!1),e.addEventListener("touchmove",function(e){r.isEmpty(e.touches)||t._triggerEvent("touchmove",e.touches[0])},!1),e.addEventListener("touchend",function(e){r.isEmpty(e.changedTouches)||t._triggerEvent("touchend",e.changedTouches[0])},!1)},_scale:function(){var t=this.get("pixelRatio");this.scale(t,t)},_setGlobalParam:function(){this.get("pixelRatio")||this.set("pixelRatio",r.getRatio());var t=s[this.get("renderer")||"canvas"];this._cfg.renderer=t,this._cfg.canvas=this;var e=new o(this);this._cfg.timeline=e},_setContainer:function(){var t=this.get("containerId"),e=this.get("containerDOM");e||(e=document.getElementById(t),this.set("containerDOM",e)),r.modifyCSS(e,{position:"relative"})},_initPainter:function(){var t=this.get("containerDOM"),e=new this._cfg.renderer.painter(t);this._cfg.painter=e,this._cfg.canvasDOM=this._cfg.el=e.canvas,this.changeSize(this.get("width"),this.get("height"))},_resize:function(){var t=this.get("canvasDOM"),e=this.get("widthCanvas"),n=this.get("heightCanvas"),r=this.get("widthStyle"),i=this.get("heightStyle");t.style.width=r,t.style.height=i,t.setAttribute("width",e),t.setAttribute("height",n)},getWidth:function(){var t=this.get("pixelRatio");return this.get("width")*t},getHeight:function(){var t=this.get("pixelRatio");return this.get("height")*t},changeSize:function(t,e){var n=this.get("pixelRatio"),r=e*n;this.set("widthCanvas",t*n),this.set("heightCanvas",r),this.set("widthStyle",t+"px"),this.set("heightStyle",e+"px"),this.set("width",t),this.set("height",e),this._resize()},getPointByClient:function(t,e){var n=this.get("el"),r=this.get("pixelRatio")||1,i=n.getBoundingClientRect();return{x:(t-i.left)*r,y:(e-i.top)*r}},getClientByPoint:function(t,e){var n=this.get("el").getBoundingClientRect(),r=this.get("pixelRatio")||1;return{clientX:t/r+n.left,clientY:e/r+n.top}},draw:function(){this._cfg.painter.draw(this)},getShape:function(t,e,n){return 3===arguments.length&&this._cfg.renderer.getShape?this._cfg.renderer.getShape.call(this,t,e,n):u.superclass.getShape.call(this,t,e)},_drawSync:function(){this._cfg.painter.drawSync(this)},destroy:function(){var t=this._cfg,e=t.containerDOM,n=t.canvasDOM;n&&e&&e.removeChild(n),t.timeline.stop(),u.superclass.destroy.call(this)}}),t.exports=u},function(t,e,n){t.exports={addEventListener:n(156),createDom:n(157),getBoundingClientRect:n(158),getHeight:n(159),getOuterHeight:n(160),getOuterWidth:n(161),getRatio:n(162),getStyle:n(163),getWidth:n(164),modifyCSS:n(165),requestAnimationFrame:n(166)}},function(t,e){t.exports=function(t,e,n){if(t){if(t.addEventListener)return t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}};if(t.attachEvent)return t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}}}},function(t,e){var n=document.createElement("table"),r=document.createElement("tr"),i=/^\s*<(\w+|!)[^>]*>/,a={tr:document.createElement("tbody"),tbody:n,thead:n,tfoot:n,td:r,th:r,"*":document.createElement("div")};t.exports=function(t){var e=i.test(t)&&RegExp.$1;e in a||(e="*");var n=a[e];t=t.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+t;var r=n.childNodes[0];return n.removeChild(r),r}},function(t,e){t.exports=function(t,e){if(t&&t.getBoundingClientRect){var n=t.getBoundingClientRect(),r=document.documentElement.clientTop,i=document.documentElement.clientLeft;return{top:n.top-r,bottom:n.bottom-r,left:n.left-i,right:n.right-i}}return e||null}},function(t,e){t.exports=function(t,e){var n=this.getStyle(t,"height",e);return"auto"===n&&(n=t.offsetHeight),parseFloat(n)}},function(t,e){t.exports=function(t,e){var n=this.getHeight(t,e),r=parseFloat(this.getStyle(t,"borderTopWidth"))||0,i=parseFloat(this.getStyle(t,"paddingTop"))||0,a=parseFloat(this.getStyle(t,"paddingBottom"))||0;return n+r+(parseFloat(this.getStyle(t,"borderBottomWidth"))||0)+i+a}},function(t,e){t.exports=function(t,e){var n=this.getWidth(t,e),r=parseFloat(this.getStyle(t,"borderLeftWidth"))||0,i=parseFloat(this.getStyle(t,"paddingLeft"))||0,a=parseFloat(this.getStyle(t,"paddingRight"))||0;return n+r+(parseFloat(this.getStyle(t,"borderRightWidth"))||0)+i+a}},function(t,e){t.exports=function(){return window.devicePixelRatio?window.devicePixelRatio:2}},function(t,e,n){var r=n(7);t.exports=function(t,e,n){try{return window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.currentStyle[e]}catch(t){return r(n)?null:n}}},function(t,e){t.exports=function(t,e){var n=this.getStyle(t,"width",e);return"auto"===n&&(n=t.offsetWidth),parseFloat(n)}},function(t,e){t.exports=function(t,e){if(t)for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n]);return t}},function(t,e){t.exports=function(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}},function(t,e,n){t.exports={contains:n(30),difference:n(168),find:n(169),firstValue:n(170),flatten:n(171),flattenDeep:n(172),getRange:n(173),merge:n(174),pull:n(175),pullAt:n(71),reduce:n(176),remove:n(177),sortBy:n(178),union:n(179),uniq:n(72),valuesOfKey:n(180)}},function(t,e,n){var r=n(39),i=n(30);t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return r(t,function(t){return!i(e,t)})}},function(t,e,n){var r=n(10),i=n(23),a=n(69);t.exports=function(t,e){var n=void 0;if(r(e)&&(n=e),i(e)&&(n=function(t){return a(t,e)}),n)for(var o=0;o<t.length;o+=1)if(n(t[o]))return t[o];return null}},function(t,e,n){var r=n(7),i=n(4);t.exports=function(t,e){for(var n=null,a=0;a<t.length;a++){var o=t[a][e];if(!r(o)){n=i(o)?o[0]:o;break}}return n}},function(t,e,n){var r=n(4),i=n(2);t.exports=function(t){if(!r(t))return t;var e=[];return i(t,function(t){r(t)?i(t,function(t){e.push(t)}):e.push(t)}),e}},function(t,e,n){var r=n(4);t.exports=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(r(e))for(var i=0;i<e.length;i+=1)t(e[i],n);else n.push(e);return n}},function(t,e,n){var r=n(39),i=n(4);t.exports=function(t){if(!(t=r(t,function(t){return!isNaN(t)})).length)return{min:0,max:0};if(i(t[0])){for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);t=e}var a=Math.max.apply(null,t);return{min:Math.min.apply(null,t),max:a}}},function(t,e){t.exports=function(t){for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e}},function(t,e){var n=Array.prototype,r=n.splice,i=n.indexOf,a=n.slice;t.exports=function(t){for(var e=a.call(arguments,1),n=0;n<e.length;n++)for(var o=e[n],s=-1;(s=i.call(t,o))>-1;)r.call(t,s,1);return t}},function(t,e,n){var r=n(4),i=n(23),a=n(2);t.exports=function(t,e,n){if(!r(t)&&!i(t))return t;var o=n;return a(t,function(t,n){o=e(o,t,n)}),o}},function(t,e,n){var r=n(11),i=n(71);t.exports=function(t,e){var n=[];if(!r(t))return n;for(var a=-1,o=[],s=t.length;++a<s;){var u=t[a];e(u,a,t)&&(n.push(u),o.push(a))}return i(t,o),n}},function(t,e,n){var r=n(9),i=n(10),a=n(4);t.exports=function(t,e){var n=void 0;if(i(e))n=function(t,n){return e(t)-e(n)};else{var o=[];r(e)?o.push(e):a(e)&&(o=e),n=function(t,e){for(var n=0;n<o.length;n+=1){var r=o[n];if(t[r]>e[r])return 1;if(t[r]<e[r])return-1}return 0}}return t.sort(n),t}},function(t,e,n){var r=n(2),i=n(41),a=n(72);t.exports=function(){var t=[],e=i(arguments);return r(e,function(e){t=t.concat(e)}),a(t)}},function(t,e,n){var r=n(7),i=n(4),a=n(2);t.exports=function(t,e){for(var n=[],o={},s=0;s<t.length;s++){var u=t[s][e];r(u)||(i(u)||(u=[u]),a(u,function(t){o[t]||(n.push(t),o[t]=!0)}))}return n}},function(t,e,n){t.exports={getWrapBehavior:n(182),wrapBehavior:n(183)}},function(t,e){t.exports=function(t,e){return t["_wrap_"+e]}},function(t,e){t.exports=function(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n}},function(t,e,n){var r=n(185);t.exports={number2color:r,numberToColor:r,parsePath:n(186),parseRadius:n(187)}},function(t,e){var n={};t.exports=function(t){var e=n[t];if(!e){for(var r=t.toString(16),i=r.length;i<6;i++)r="0"+r;n[t]=e="#"+r}return e}},function(t,e,n){var r=n(4),i=n(9),a=n(2),o=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,s=/[^\s\,]+/gi;t.exports=function(t){return r(t=t||[])?t:i(t)?(t=t.match(o),a(t,function(e,n){if((e=e.match(s))[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}a(e,function(t,n){isNaN(t)||(e[n]=+t)}),t[n]=e}),t):void 0}},function(t,e,n){var r=n(4);t.exports=function(t){var e=0,n=0,i=0,a=0;return r(t)?1===t.length?e=n=i=a=t[0]:2===t.length?(e=i=t[0],n=a=t[1]):3===t.length?(e=t[0],n=a=t[1],i=t[2]):(e=t[0],n=t[1],i=t[2],a=t[3]):e=n=i=a=t,{r1:e,r2:n,r3:i,r4:a}}},function(t,e,n){var r=n(42);t.exports={clamp:n(73),fixedBase:n(189),isDecimal:n(190),isEven:n(191),isInteger:n(192),isNegative:n(193),isNumberEqual:r,isOdd:n(194),isPositive:n(195),maxBy:n(196),minBy:n(197),mod:n(198),snapEqual:r,toDegree:n(199),toInt:n(74),toInteger:n(74),toRadian:n(200)}},function(t,e){t.exports=function(t,e){var n=e.toString(),r=n.indexOf(".");if(-1===r)return Math.round(t);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))}},function(t,e,n){var r=n(8);t.exports=function(t){return r(t)&&t%1!=0}},function(t,e,n){var r=n(8);t.exports=function(t){return r(t)&&t%2==0}},function(t,e,n){var r=n(8),i=Number.isInteger?Number.isInteger:function(t){return r(t)&&t%1==0};t.exports=i},function(t,e,n){var r=n(8);t.exports=function(t){return r(t)&&t<0}},function(t,e,n){var r=n(8);t.exports=function(t){return r(t)&&t%2!=0}},function(t,e,n){var r=n(8);t.exports=function(t){return r(t)&&t>0}},function(t,e,n){var r=n(4),i=n(10),a=n(2);t.exports=function(t,e){if(r(t)){var n=t[0],o=void 0;o=i(e)?e(t[0]):t[0][e];var s=void 0;return a(t,function(t){(s=i(e)?e(t):t[e])>o&&(n=t,o=s)}),n}}},function(t,e,n){var r=n(4),i=n(10),a=n(2);t.exports=function(t,e){if(r(t)){var n=t[0],o=void 0;o=i(e)?e(t[0]):t[0][e];var s=void 0;return a(t,function(t){(s=i(e)?e(t):t[e])<o&&(n=t,o=s)}),n}}},function(t,e){t.exports=function(t,e){return(t%e+e)%e}},function(t,e){var n=180/Math.PI;t.exports=function(t){return n*t}},function(t,e){var n=Math.PI/180;t.exports=function(t){return n*t}},function(t,e,n){"use strict";function r(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=n[0],d=n[1],p=n[2],g=n[3],v=n[4],m=n[5],y=n[6],_=n[7],b=n[8];return t[0]=f*r+d*o+p*l,t[1]=f*i+d*s+p*c,t[2]=f*a+d*u+p*h,t[3]=g*r+v*o+m*l,t[4]=g*i+v*s+m*c,t[5]=g*a+v*u+m*h,t[6]=y*r+_*o+b*l,t[7]=y*i+_*s+b*c,t[8]=y*a+_*u+b*h,t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new a.ARRAY_TYPE(9);return a.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){var e=new a.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,n,r,i,o,s,u,l){var c=new a.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=o,c[6]=s,c[7]=u,c[8]=l,c},e.set=function(t,e,n,r,i,a,o,s,u,l){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t[8]=l,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=c*o-s*l,f=-c*a+s*u,d=l*a-o*u,p=n*h+r*f+i*d;return p?(t[0]=h*(p=1/p),t[1]=(-c*r+i*l)*p,t[2]=(s*r-i*o)*p,t[3]=f*p,t[4]=(c*n-i*u)*p,t[5]=(-s*n+i*a)*p,t[6]=d*p,t[7]=(-l*n+r*u)*p,t[8]=(o*n-r*a)*p,t):null},e.adjoint=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8];return t[0]=o*c-s*l,t[1]=i*l-r*c,t[2]=r*s-i*o,t[3]=s*u-a*c,t[4]=n*c-i*u,t[5]=i*a-n*s,t[6]=a*l-o*u,t[7]=r*u-n*l,t[8]=n*o-r*a,t},e.determinant=function(t){var e=t[3],n=t[4],r=t[5],i=t[6],a=t[7],o=t[8];return t[0]*(o*n-r*a)+t[1]*(-o*e+r*i)+t[2]*(a*e-n*i)},e.multiply=r,e.translate=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=n[0],d=n[1];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=f*r+d*o+l,t[7]=f*i+d*s+c,t[8]=f*a+d*u+h,t},e.rotate=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],l=e[6],c=e[7],h=e[8],f=Math.sin(n),d=Math.cos(n);return t[0]=d*r+f*o,t[1]=d*i+f*s,t[2]=d*a+f*u,t[3]=d*o-f*r,t[4]=d*s-f*i,t[5]=d*u-f*a,t[6]=l,t[7]=c,t[8]=h,t},e.scale=function(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,u=i+i,l=n*o,c=r*o,h=r*s,f=i*o,d=i*s,p=i*u,g=a*o,v=a*s,m=a*u;return t[0]=1-h-p,t[3]=c-m,t[6]=f+v,t[1]=c+m,t[4]=1-l-p,t[7]=d-g,t[2]=f-v,t[5]=d+g,t[8]=1-l-h,t},e.normalFromMat4=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],h=e[9],f=e[10],d=e[11],p=e[12],g=e[13],v=e[14],m=e[15],y=n*s-r*o,_=n*u-i*o,b=n*l-a*o,x=r*u-i*s,w=r*l-a*s,S=i*l-a*u,T=c*g-h*p,O=c*v-f*p,M=c*m-d*p,k=h*v-f*g,C=h*m-d*g,E=f*m-d*v,A=y*E-_*C+b*k+x*M-w*O+S*T;return A?(t[0]=(s*E-u*C+l*k)*(A=1/A),t[1]=(u*M-o*E-l*O)*A,t[2]=(o*C-s*M+l*T)*A,t[3]=(i*C-r*E-a*k)*A,t[4]=(n*E-i*M+a*O)*A,t[5]=(r*M-n*C-a*T)*A,t[6]=(g*S-v*w+m*x)*A,t[7]=(v*b-p*S-m*_)*A,t[8]=(p*w-g*b+m*y)*A,t):null},e.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},e.subtract=i,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],h=t[8],f=e[0],d=e[1],p=e[2],g=e[3],v=e[4],m=e[5],y=e[6],_=e[7],b=e[8];return Math.abs(n-f)<=a.EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=a.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-p)<=a.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-g)<=a.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(s-v)<=a.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-m)<=a.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(l-y)<=a.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(c-_)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(h-b)<=a.EPSILON*Math.max(1,Math.abs(h),Math.abs(b))};var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(43));e.mul=r,e.sub=i},function(t,e,n){var r=n(203),i=n(73);r.angle=function(t,e){var n=r.dot(t,e)/(r.length(t)*r.length(e));return Math.acos(i(n,-1,1))},r.direction=function(t,e){return t[0]*e[1]-e[0]*t[1]},r.angleTo=function(t,e,n){var i=r.angle(t,e),a=r.direction(t,e)>=0;return n?a?2*Math.PI-i:i:a?i:2*Math.PI-i},r.vertical=function(t,e,n){return n?(t[0]=e[1],t[1]=-1*e[0]):(t[0]=-1*e[1],t[1]=e[0]),t},t.exports=r},function(t,e,n){"use strict";function r(){var t=new h.ARRAY_TYPE(2);return h.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function a(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function o(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function s(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function u(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function l(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function c(t){var e=t[0],n=t[1];return e*e+n*n}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=r,e.clone=function(t){var e=new h.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){var n=new h.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.subtract=i,e.multiply=a,e.divide=o,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},e.distance=s,e.squaredDistance=u,e.length=l,e.squaredLength=c,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},e.lerp=function(t,e,n,r){var i=e[0],a=e[1];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t},e.random=function(t,e){e=e||1;var n=2*h.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},e.transformMat2=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t},e.transformMat2d=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t},e.transformMat3=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t},e.transformMat4=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t},e.rotate=function(t,e,n,r){var i=e[0]-n[0],a=e[1]-n[1],o=Math.sin(r),s=Math.cos(r);return t[0]=i*s-a*o+n[0],t[1]=i*o+a*s+n[1],t},e.angle=function(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));var s=i*i+a*a;s>0&&(s=1/Math.sqrt(s));var u=(n*i+r*a)*o*s;return u>1?0:u<-1?Math.PI:Math.acos(u)},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){var n=t[0],r=t[1],i=e[0],a=e[1];return Math.abs(n-i)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=h.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))};var h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(43));e.len=l,e.sub=i,e.mul=a,e.div=o,e.dist=s,e.sqrDist=u,e.sqrLen=c,e.forEach=function(){var t=r();return function(e,n,r,i,a,o){var s,u=void 0;for(n||(n=2),r||(r=0),s=i?Math.min(i*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],a(t,t,o),e[u]=t[0],e[u+1]=t[1];return e}}()},function(t,e,n){var r=n(205);t.exports=r},function(t,e,n){"use strict";function r(){var t=new p.ARRAY_TYPE(3);return p.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function i(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function a(t,e,n){var r=new p.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r}function o(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function s(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function u(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function h(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function f(t,e){var n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t}function d(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=r,e.clone=function(t){var e=new p.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=i,e.fromValues=a,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=o,e.multiply=s,e.divide=u,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},e.distance=l,e.squaredDistance=c,e.squaredLength=h,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=f,e.dot=d,e.cross=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],u=n[2];return t[0]=i*u-a*s,t[1]=a*o-r*u,t[2]=r*s-i*o,t},e.lerp=function(t,e,n,r){var i=e[0],a=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t},e.hermite=function(t,e,n,r,i,a){var o=a*a,s=o*(2*a-3)+1,u=o*(a-2)+a,l=o*(a-1),c=o*(3-2*a);return t[0]=e[0]*s+n[0]*u+r[0]*l+i[0]*c,t[1]=e[1]*s+n[1]*u+r[1]*l+i[1]*c,t[2]=e[2]*s+n[2]*u+r[2]*l+i[2]*c,t},e.bezier=function(t,e,n,r,i,a){var o=1-a,s=o*o,u=a*a,l=s*o,c=3*a*s,h=3*u*o,f=u*a;return t[0]=e[0]*l+n[0]*c+r[0]*h+i[0]*f,t[1]=e[1]*l+n[1]*c+r[1]*h+i[1]*f,t[2]=e[2]*l+n[2]*c+r[2]*h+i[2]*f,t},e.random=function(t,e){e=e||1;var n=2*p.RANDOM()*Math.PI,r=2*p.RANDOM()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t},e.transformMat4=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return t[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/(o=o||1),t[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,t},e.transformMat3=function(t,e,n){var r=e[0],i=e[1],a=e[2];return t[0]=r*n[0]+i*n[3]+a*n[6],t[1]=r*n[1]+i*n[4]+a*n[7],t[2]=r*n[2]+i*n[5]+a*n[8],t},e.transformQuat=function(t,e,n){var r=n[0],i=n[1],a=n[2],o=e[0],s=e[1],u=e[2],l=i*u-a*s,c=a*o-r*u,h=r*s-i*o,f=i*h-a*c,d=a*l-r*h,p=r*c-i*l,g=2*n[3];return c*=g,h*=g,d*=2,p*=2,t[0]=o+(l*=g)+(f*=2),t[1]=s+c+d,t[2]=u+h+p,t},e.rotateX=function(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.rotateY=function(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.rotateZ=function(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.angle=function(t,e){var n=a(t[0],t[1],t[2]),r=a(e[0],e[1],e[2]);f(n,n),f(r,r);var i=d(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],s=e[2];return Math.abs(n-a)<=p.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=p.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=p.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))};var p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(43));e.sub=o,e.mul=s,e.div=u,e.dist=l,e.sqrDist=c,e.len=i,e.sqrLen=h,e.forEach=function(){var t=r();return function(e,n,r,i,a,o){var s,u=void 0;for(n||(n=3),r||(r=0),s=i?Math.min(i*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],a(t,t,o),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}()},function(t,e,n){var r=n(76),i=n(2),a=n(75);t.exports=function(t,e){return t=r(t),i(e,function(e){switch(e[0]){case"t":a.translate(t,t,[e[1],e[2]]);break;case"s":a.scale(t,t,[e[1],e[2]]);break;case"r":a.rotate(t,t,e[1]);break;case"m":a.multiply(t,t,e[1]);break;default:return!1}}),t}},function(t,e,n){t.exports={forIn:n(208),has:n(77),hasKey:n(209),hasValue:n(210),keys:n(70),isMatch:n(69),values:n(78)}},function(t,e,n){t.exports=n(2)},function(t,e,n){t.exports=n(77)},function(t,e,n){var r=n(30),i=n(78);t.exports=function(t,e){return r(i(t),e)}},function(t,e,n){var r=n(212),i=n(82),a=n(81),o=n(84);t.exports={catmullRom2Bezier:o,catmullRomToBezier:o,fillPath:n(213),fillPathByDiff:n(214),formatPath:n(216),intersection:r,pathIntersection:r,parsePathArray:n(80),parsePathString:n(83),pathToAbsolute:i,path2absolute:i,pathTocurve:a,path2curve:a,rectPath:n(79)}},function(t,e,n){var r=n(4),i=n(79),a=n(81),o=function(t,e,n,r,i){return t*(t*(-3*e+9*n-9*r+3*i)+6*e-12*n+6*r)-3*e+3*n},s=function(t,e,n,r,i,a,s,u,l){null===l&&(l=1);for(var c=(l=l>1?1:l<0?0:l)/2,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,p=0;p<12;p++){var g=c*h[p]+c,v=o(g,t,n,i,s),m=o(g,e,r,a,u);d+=f[p]*Math.sqrt(v*v+m*m)}return c*d},u=function(t,e,n,r,i,a,o,s){if(!(Math.max(t,n)<Math.min(i,o)||Math.min(t,n)>Math.max(i,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(t-n)*(a-s)-(e-r)*(i-o);if(u){var l=((t*r-e*n)*(i-o)-(t-n)*(i*s-a*o))/u,c=((t*r-e*n)*(a-s)-(e-r)*(i*s-a*o))/u,h=+l.toFixed(2),f=+c.toFixed(2);if(!(h<+Math.min(t,n).toFixed(2)||h>+Math.max(t,n).toFixed(2)||h<+Math.min(i,o).toFixed(2)||h>+Math.max(i,o).toFixed(2)||f<+Math.min(e,r).toFixed(2)||f>+Math.max(e,r).toFixed(2)||f<+Math.min(a,s).toFixed(2)||f>+Math.max(a,s).toFixed(2)))return{x:l,y:c}}}},l=function(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},c=function(t,e,n,r){return null===t&&(t=e=n=r=0),null===e&&(e=t.y,n=t.width,r=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:r,h:r,x2:t+n,y2:e+r,cx:t+n/2,cy:e+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:i(t,e,n,r),vb:[t,e,n,r].join(" ")}},h=function(t,e,n,i,a,o,s,u){r(t)||(t=[t,e,n,i,a,o,s,u]);var l=(function(t,e,n,r,i,a,o,s){for(var u=[],l=[[],[]],c=void 0,h=void 0,f=void 0,d=void 0,p=0;p<2;++p)if(0===p?(h=6*t-12*n+6*i,c=-3*t+9*n-9*i+3*o,f=3*n-3*t):(h=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,f=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(h)<1e-12)continue;(d=-f/h)>0&&d<1&&u.push(d)}else{var g=h*h-4*f*c,v=Math.sqrt(g);if(!(g<0)){var m=(-h+v)/(2*c);m>0&&m<1&&u.push(m);var y=(-h-v)/(2*c);y>0&&y<1&&u.push(y)}}for(var _=u.length,b=_,x=void 0;_--;)x=1-(d=u[_]),l[0][_]=x*x*x*t+3*x*x*d*n+3*x*d*d*i+d*d*d*o,l[1][_]=x*x*x*e+3*x*x*d*r+3*x*d*d*a+d*d*d*s;return l[0][b]=t,l[1][b]=e,l[0][b+1]=o,l[1][b+1]=s,l[0].length=l[1].length=b+2,{min:{x:Math.min.apply(0,l[0]),y:Math.min.apply(0,l[1])},max:{x:Math.max.apply(0,l[0]),y:Math.max.apply(0,l[1])}}}).apply(null,t);return c(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},f=function(t,e,n,r,i,a,o,s,u){var l=1-u,c=Math.pow(l,3),h=Math.pow(l,2),f=u*u,d=f*u,p=t+2*u*(n-t)+f*(i-2*n+t),g=e+2*u*(r-e)+f*(a-2*r+e),v=n+2*u*(i-n)+f*(o-2*i+n),m=r+2*u*(a-r)+f*(s-2*a+r);return{x:c*t+3*h*u*n+3*l*u*u*i+d*o,y:c*e+3*h*u*r+3*l*u*u*a+d*s,m:{x:p,y:g},n:{x:v,y:m},start:{x:l*t+u*n,y:l*e+u*r},end:{x:l*i+u*o,y:l*a+u*s},alpha:90-180*Math.atan2(p-v,g-m)/Math.PI}},d=function(t,e,n){if(!function(t,e){return t=c(t),e=c(e),l(e,t.x,t.y)||l(e,t.x2,t.y)||l(e,t.x,t.y2)||l(e,t.x2,t.y2)||l(t,e.x,e.y)||l(t,e.x2,e.y)||l(t,e.x,e.y2)||l(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}(h(t),h(e)))return n?0:[];for(var r=~~(s.apply(0,t)/8),i=~~(s.apply(0,e)/8),a=[],o=[],d={},p=n?0:[],g=0;g<r+1;g++){var v=f.apply(0,t.concat(g/r));a.push({x:v.x,y:v.y,t:g/r})}for(var m=0;m<i+1;m++){var y=f.apply(0,e.concat(m/i));o.push({x:y.x,y:y.y,t:m/i})}for(var _=0;_<r;_++)for(var b=0;b<i;b++){var x=a[_],w=a[_+1],S=o[b],T=o[b+1],O=Math.abs(w.x-x.x)<.001?"y":"x",M=Math.abs(T.x-S.x)<.001?"y":"x",k=u(x.x,x.y,w.x,w.y,S.x,S.y,T.x,T.y);if(k){if(d[k.x.toFixed(4)]===k.y.toFixed(4))continue;d[k.x.toFixed(4)]=k.y.toFixed(4);var C=x.t+Math.abs((k[O]-x[O])/(w[O]-x[O]))*(w.t-x.t),E=S.t+Math.abs((k[M]-S[M])/(T[M]-S[M]))*(T.t-S.t);C>=0&&C<=1&&E>=0&&E<=1&&(n?p++:p.push({x:k.x,y:k.y,t1:C,t2:E}))}}return p};t.exports=function(t,e){return function(t,e,n){t=a(t),e=a(e);for(var r=void 0,i=void 0,o=void 0,s=void 0,u=void 0,l=void 0,c=void 0,h=void 0,f=void 0,p=void 0,g=[],v=0,m=t.length;v<m;v++){var y=t[v];if("M"===y[0])r=u=y[1],i=l=y[2];else{"C"===y[0]?(r=(f=[r,i].concat(y.slice(1)))[6],i=f[7]):(f=[r,i,r,i,u,l,u,l],r=u,i=l);for(var _=0,b=e.length;_<b;_++){var x=e[_];if("M"===x[0])o=c=x[1],s=h=x[2];else{"C"===x[0]?(o=(p=[o,s].concat(x.slice(1)))[6],s=p[7]):(p=[o,s,o,s,c,h,c,h],o=c,s=h);for(var w=d(f,p,void 0),S=0,T=w.length;S<T;S++)w[S].segment1=v,w[S].segment2=_,w[S].bez1=f,w[S].bez2=p;g=g.concat(w)}}}}return g}(t,e)}},function(t,e){function n(t,e){var n=[],r=[];return t.length&&function t(e,i){if(1===e.length)n.push(e[0]),r.push(e[0]);else{for(var a=[],o=0;o<e.length-1;o++)0===o&&n.push(e[0]),o===e.length-2&&r.push(e[o+1]),a[o]=[(1-i)*e[o][0]+i*e[o+1][0],(1-i)*e[o][1]+i*e[o+1][1]];t(a,i)}}(t,e),{left:n,right:r.reverse()}}function r(t,e,r){if(1===r)return[[].concat(t)];var i=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])i=i.concat(function(t,e,r){var i=[[t[1],t[2]]];r=r||2;var a=[];"A"===e[0]?(i.push(e[6]),i.push(e[7])):"C"===e[0]?(i.push([e[1],e[2]]),i.push([e[3],e[4]]),i.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(i.push([e[1],e[2]]),i.push([e[3],e[4]])):i.push([e[1],e[2]]);for(var o=i,s=1/r,u=0;u<r-1;u++){var l=n(o,s/(1-s*u));a.push(l.left),o=l.right}return a.push(o),a.map(function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),t.length>=3&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e.concat(t[t.length-1])})}(t,e,r));else{var a=[].concat(t);"M"===a[0]&&(a[0]="L");for(var o=0;o<=r-1;o++)i.push(a)}return i}t.exports=function(t,e){if(1===t.length)return t;var n=t.length-1,i=e.length-1,a=n/i,o=[];if(1===t.length&&"M"===t[0][0]){for(var s=0;s<i-n;s++)t.push(t[0]);return t}for(var u=0;u<i;u++){var l=Math.floor(a*u);o[l]=(o[l]||0)+1}var c=o.reduce(function(e,i,a){return e.concat(a===n?t[n]:r(t[a],t[a+1],i))},[]);return c.unshift(t[0]),"Z"!==e[i]&&"z"!==e[i]||c.push("Z"),c}},function(t,e,n){function r(t,e,n){var r=null,i=n;return e<i&&(i=e,r="add"),t<i&&(i=t,r="del"),{type:r,min:i}}var i=n(215);t.exports=function(t,e){var n=function(t,e){var n=t.length,a=e.length,o=void 0,s=0;if(0===n||0===a)return null;for(var u=[],l=0;l<=n;l++)u[l]=[],u[l][0]={min:l};for(var c=0;c<=a;c++)u[0][c]={min:c};for(var h=1;h<=n;h++){o=t[h-1];for(var f=1;f<=a;f++)s=i(o,e[f-1])?0:1,u[h][f]=r(u[h-1][f].min+1,u[h][f-1].min+1,u[h-1][f-1].min+s)}return u}(t,e),a=t.length,o=e.length,s=[],u=1,l=1;if(n[a][o]!==a){for(var c=1;c<=a;c++){var h=n[c][c].min;l=c;for(var f=u;f<=o;f++)n[c][f].min<h&&(h=n[c][f].min,l=f);n[c][u=l].type&&s.push({index:c-1,type:n[c][u].type})}for(var d=s.length-1;d>=0;d--)u=s[d].index,"add"===s[d].type?t.splice(u,0,[].concat(t[u])):t.splice(u,1)}if((a=t.length)<o)for(var p=0;p<o-a;p++)"z"===t[a-1][0]||"Z"===t[a-1][0]?t.splice(a-2,0,t[a-2]):t.push(t[a-1]);return t}},function(t,e,n){var r=n(2);t.exports=function(t,e){if(t.length!==e.length)return!1;var n=!0;return r(t,function(t,r){if(t!==e[r])return n=!1,!1}),n}},function(t,e){function n(t){var e=[];switch(t[0]){case"M":case"L":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"T":e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}function r(t,e,r){for(var i=[].concat(t),a=void 0,o=1/(r+1),s=n(e)[0],u=1;u<=r;u++)o*=u,0===(a=Math.floor(t.length*o))?i.unshift([s[0]*o+t[a][0]*(1-o),s[1]*o+t[a][1]*(1-o)]):i.splice(a,0,[s[0]*o+t[a][0]*(1-o),s[1]*o+t[a][1]*(1-o)]);return i}t.exports=function(t,e){if(t.length<=1)return t;for(var i=void 0,a=0;a<e.length;a++)if(t[a][0]!==e[a][0])switch(i=n(t[a]),e[a][0]){case"M":t[a]=["M"].concat(i[0]);break;case"L":t[a]=["L"].concat(i[0]);break;case"A":t[a]=[].concat(e[a]),t[a][6]=i[0][0],t[a][7]=i[0][1];break;case"Q":if(i.length<2){if(!(a>0)){t[a]=e[a];break}i=r(i,t[a-1],1)}t[a]=["Q"].concat(i.reduce(function(t,e){return t.concat(e)},[]));break;case"T":t[a]=["T"].concat(i[0]);break;case"C":if(i.length<3){if(!(a>0)){t[a]=e[a];break}i=r(i,t[a-1],2)}t[a]=["C"].concat(i.reduce(function(t,e){return t.concat(e)},[]));break;case"S":if(i.length<2){if(!(a>0)){t[a]=e[a];break}i=r(i,t[a-1],1)}t[a]=["S"].concat(i.reduce(function(t,e){return t.concat(e)},[]));break;default:t[a]=e[a]}return t}},function(t,e,n){var r={lc:n(218),lowerCase:n(85),lowerFirst:n(61),substitute:n(219),uc:n(220),upperCase:n(86),upperFirst:n(221)};t.exports=r},function(t,e,n){t.exports=n(85)},function(t,e){t.exports=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]}):t}},function(t,e,n){t.exports=n(86)},function(t,e,n){var r=n(22);t.exports=function(t){var e=r(t);return e.charAt(0).toUpperCase()+e.substring(1)}},function(t,e,n){var r=n(13),i={getType:n(87),isArray:n(4),isArrayLike:n(11),isBoolean:n(223),isFunction:n(10),isNil:n(7),isNull:n(224),isNumber:n(8),isObject:n(28),isObjectLike:n(40),isPlainObject:n(23),isPrototype:n(88),isType:r,isUndefined:n(225),isString:n(9),isRegExp:n(226)};["Arguments","Date","Error"].forEach(function(t){i["is"+t]=function(e){return r(e,t)}}),t.exports=i},function(t,e,n){var r=n(13);t.exports=function(t){return r(t,"Boolean")}},function(t,e){t.exports=function(t){return null===t}},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,n){var r=n(13);t.exports=function(t){return r(t,"RegExp")}},function(t,e,n){var r=n(10),i=n(41),a=n(12);t.exports=function(t){for(var e=i(arguments),n=1;n<e.length;n++){var o=e[n];r(o)&&(o=o.prototype),a(t.prototype,o)}}},function(t,e,n){function r(t,e,n,s){for(var u in n=n||0,s=s||o,e)if(e.hasOwnProperty(u)){var l=e[u];null!==l&&i(l)?(i(t[u])||(t[u]={}),n<s?r(t[u],l,n+1,s):t[u]=e[u]):a(l)?(t[u]=[],t[u]=t[u].concat(l)):void 0!==l&&(t[u]=l)}}var i=n(23),a=n(4),o=5;t.exports=function(){for(var t=new Array(arguments.length),e=t.length,n=0;n<e;n++)t[n]=arguments[n];for(var i=t[0],a=1;a<e;a++)r(i,t[a]);return i}},function(t,e,n){var r=n(10),i=n(12);t.exports=function(t,e,n,a){r(e)||(n=e,e=t,t=function(){});var o=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var r=new n;return r.constructor=e,r},s=o(e.prototype,t);return t.prototype=i(s,t.prototype),t.superclass=o(e.prototype,e),i(s,n),i(t,a),t}},function(t,e,n){var r=n(89);t.exports=function(t,e){if(!e)return[t];var n=r(t,e),i=[];for(var a in n)i.push(n[a]);return i}},function(t,e,n){var r=n(11);t.exports=function(t,e){if(!r(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var i=-1,a=0;a<t.length;a++)if(t[a]===e){i=a;break}return i}},function(t,e,n){var r=n(7),i=n(11),a=n(87),o=n(88),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(r(t))return!0;if(i(t))return!t.length;var e=a(t);if("Map"===e||"Set"===e)return!t.size;if(o(t))return!Object.keys(t).length;for(var n in t)if(s.call(t,n))return!1;return!0}},function(t,e,n){var r=n(10),i=n(91);t.exports=function(t,e,n){return r(n)?!!n(t,e):i(t,e)}},function(t,e,n){var r=n(2),i=n(11);t.exports=function(t,e){if(!i(t))return t;var n=[];return r(t,function(t,r){n.push(e(t,r))}),n}},function(t,e,n){var r=n(2),i=n(23),a=Object.prototype.hasOwnProperty;t.exports=function(t,e){if(null===t||!i(t))return{};var n={};return r(e,function(e){a.call(t,e)&&(n[e]=t[e])}),n}},function(t,e){var n=function(){var t={};return function(e){return t[e=e||"g"]?t[e]+=1:t[e]=1,e+t[e]}}();t.exports=n},function(t,e,n){var r=n(1);t.exports={canFill:!1,canStroke:!1,initAttrs:function(t){return this._attrs={opacity:1,fillOpacity:1,strokeOpacity:1,matrix:[1,0,0,0,1,0,0,0,1]},this.attr(r.assign(this.getDefaultAttrs(),t)),this},getDefaultAttrs:function(){return{}},attr:function(t,e){if(0===arguments.length)return this._attrs;if(r.isObject(t)){for(var n in t)this._setAttr(n,t[n]);return this.clearBBox(),this._cfg.hasUpdate=!0,this}return 2===arguments.length?(this._setAttr(t,e),this.clearBBox(),this._cfg.hasUpdate=!0,this):this._attrs[t]},_setAttr:function(t,e){var n=this._attrs;n[t]=e,"fill"!==t&&"stroke"!==t?"opacity"!==t?"clip"===t&&e?this._setClip(e):"path"===t&&this._afterSetAttrPath?this._afterSetAttrPath(e):"transform"!==t?"rotate"===t&&this.rotateAtStart(e):this.transform(e):n.globalAlpha=e:n[t+"Style"]=e},clearBBox:function(){this.setSilent("box",null)},hasFill:function(){return this.canFill&&this._attrs.fillStyle},hasStroke:function(){return this.canStroke&&this._attrs.strokeStyle},_setClip:function(t){t._cfg.renderer=this._cfg.renderer,t._cfg.canvas=this._cfg.canvas,t._cfg.parent=this._cfg.parent,t.hasFill=function(){return!0}}}},function(t,e,n){function r(t){return 1===t[0]&&0===t[1]&&0===t[3]&&1===t[4]&&0===t[6]&&0===t[7]}function i(t){return 0===t[1]&&0===t[3]&&0===t[6]&&0===t[7]}function a(t,e){r(e)||(i(e)?(t[0]*=e[0],t[4]*=e[4]):o.mat3.multiply(t,t,e))}var o=n(1);t.exports={initTransform:function(){},resetMatrix:function(){this.attr("matrix",[1,0,0,0,1,0,0,0,1])},translate:function(t,e){var n=this._attrs.matrix;return o.mat3.translate(n,n,[t,e]),this.clearTotalMatrix(),this.attr("matrix",n),this},rotate:function(t){var e=this._attrs.matrix;return o.mat3.rotate(e,e,t),this.clearTotalMatrix(),this.attr("matrix",e),this},scale:function(t,e){var n=this._attrs.matrix;return o.mat3.scale(n,n,[t,e]),this.clearTotalMatrix(),this.attr("matrix",n),this},rotateAtStart:function(t){var e=this._attrs.x||this._cfg.attrs.x,n=this._attrs.y||this._cfg.attrs.y;return Math.abs(t)>2*Math.PI&&(t=t/180*Math.PI),this.transform([["t",-e,-n],["r",t],["t",e,n]])},move:function(t,e){var n=this.get("x")||0,r=this.get("y")||0;return this.translate(t-n,e-r),this.set("x",t),this.set("y",e),this},transform:function(t){var e=this,n=this._attrs.matrix;return o.each(t,function(t){switch(t[0]){case"t":e.translate(t[1],t[2]);break;case"s":e.scale(t[1],t[2]);break;case"r":e.rotate(t[1]);break;case"m":e.attr("matrix",o.mat3.multiply([],n,t[1])),e.clearTotalMatrix()}}),e},setTransform:function(t){return this.attr("matrix",[1,0,0,0,1,0,0,0,1]),this.transform(t)},getMatrix:function(){return this.attr("matrix")},setMatrix:function(t){return this.attr("matrix",t),this.clearTotalMatrix(),this},apply:function(t,e){var n;return n=e?this._getMatrixByRoot(e):this.attr("matrix"),o.vec3.transformMat3(t,t,n),this},_getMatrixByRoot:function(t){t=t||this;for(var e=this,n=[];e!==t;)n.unshift(e),e=e.get("parent");n.unshift(e);var r=[1,0,0,0,1,0,0,0,1];return o.each(n,function(t){o.mat3.multiply(r,t.attr("matrix"),r)}),r},getTotalMatrix:function(){var t=this._cfg.totalMatrix;if(!t){t=[1,0,0,0,1,0,0,0,1];var e=this._cfg.parent;e&&a(t,e.getTotalMatrix()),a(t,this.attr("matrix")),this._cfg.totalMatrix=t}return t},clearTotalMatrix:function(){},invert:function(t){var e=this.getTotalMatrix();if(i(e))t[0]/=e[0],t[1]/=e[4];else{var n=o.mat3.invert([],e);n&&o.vec3.transformMat3(t,t,n)}return this},resetTransform:function(t){var e=this.attr("matrix");r(e)||t.transform(e[0],e[1],e[3],e[4],e[6],e[7])}}},function(t,e,n){var r=n(1),i={delay:"delay",rotate:"rotate"};t.exports={animate:function(t,e,n,a,o){void 0===o&&(o=0),this.set("animating",!0);var s=this.get("timeline");s||(s=this.get("canvas").get("timeline"),this.setSilent("timeline",s));var u=this.get("animators")||[];s._timer||s.initTimer(),r.isNumber(a)&&(o=a,a=null),r.isFunction(n)?(a=n,n="easeLinear"):n=n||"easeLinear";var l=function(t,e){var n={matrix:null,attrs:{}},a=e._attrs;for(var o in t)"transform"===o?n.matrix=r.transform(e.getMatrix(),t[o]):"rotate"===o?n.matrix=r.transform(e.getMatrix(),[["r",t[o]]]):"matrix"===o?n.matrix=t[o]:i[o]||a[o]===t[o]||(n.attrs[o]=t[o]);return n}(t,this),c={fromAttrs:function(t,e){var n={},r=e._attrs;for(var i in t.attrs)n[i]=r[i];return n}(l,this),toAttrs:l.attrs,fromMatrix:r.clone(this.getMatrix()),toMatrix:l.matrix,duration:e,easing:n,callback:a,delay:o,startTime:s.getTime(),id:r.uniqueId()};u.length>0?u=function(t,e){var n=e.delay,i=Object.prototype.hasOwnProperty;return r.each(e.toAttrs,function(e,a){r.each(t,function(t){n<t.startTime+t.duration&&i.call(t.toAttrs,a)&&(delete t.toAttrs[a],delete t.fromAttrs[a])})}),e.toMatrix&&r.each(t,function(t){n<t.startTime+t.duration&&t.toMatrix&&delete t.toMatrix}),t}(u,c):s.addAnimator(this),u.push(c),this.setSilent("animators",u),this.setSilent("pause",{isPaused:!1})},stopAnimate:function(){var t=this,e=this.get("animators");r.each(e,function(e){t.attr(e.toAttrs),e.toMatrix&&t.attr("matrix",e.toMatrix),e.callback&&e.callback()}),this.setSilent("animating",!1),this.setSilent("animators",[])},pauseAnimate:function(){var t=this.get("timeline");return this.setSilent("pause",{isPaused:!0,pauseTime:t.getTime()}),this},resumeAnimate:function(){var t=this.get("timeline").getTime(),e=this.get("animators"),n=this.get("pause").pauseTime;return r.each(e,function(e){e.startTime=e.startTime+(t-n),e._paused=!1,e._pauseTime=null}),this.setSilent("pause",{isPaused:!1}),this.setSilent("animators",e),this}}},function(t,e,n){var r=n(5);r.Arc=n(98),r.Circle=n(99),r.Dom=n(100),r.Ellipse=n(101),r.Fan=n(102),r.Image=n(103),r.Line=n(104),r.Marker=n(46),r.Path=n(105),r.Polygon=n(106),r.Polyline=n(107),r.Rect=n(108),r.Text=n(109),t.exports=r},function(t,e,n){function r(t,e,n){return n.createPath(s),s.isPointInPath(t,e)}var i=n(1),a=n(44),o={arc:n(33),ellipse:n(97),line:n(32)},s=i.createDom('<canvas width="500" height="500"></canvas>').getContext("2d"),u={arc:function(t,e){var n=this._attrs,r=n.x,i=n.y,o=n.r,s=n.startAngle,u=n.endAngle,l=n.clockwise,c=this.getHitLineWidth();return!!this.hasStroke()&&a.arcline(r,i,o,s,u,l,c,t,e)},circle:function(t,e){var n=this._attrs,r=n.x,i=n.y,o=n.r,s=this.getHitLineWidth(),u=this.hasFill(),l=this.hasStroke();return u&&l?a.circle(r,i,o,t,e)||a.arcline(r,i,o,0,2*Math.PI,!1,s,t,e):u?a.circle(r,i,o,t,e):!!l&&a.arcline(r,i,o,0,2*Math.PI,!1,s,t,e)},dom:function(t,e){var n=this._cfg.el.getBBox();return a.box(n.x,n.x+n.width,n.y,n.y+n.height,t,e)},ellipse:function(t,e){var n=this._attrs,r=this.hasFill(),o=this.hasStroke(),s=n.x,u=n.y,l=n.rx,c=n.ry,h=this.getHitLineWidth(),f=l>c?l:c,d=[t,e,1],p=[1,0,0,0,1,0,0,0,1];i.mat3.scale(p,p,[l>c?1:l/c,l>c?c/l:1]),i.mat3.translate(p,p,[s,u]);var g=i.mat3.invert([],p);return i.vec3.transformMat3(d,d,g),r&&o?a.circle(0,0,f,d[0],d[1])||a.arcline(0,0,f,0,2*Math.PI,!1,h,d[0],d[1]):r?a.circle(0,0,f,d[0],d[1]):!!o&&a.arcline(0,0,f,0,2*Math.PI,!1,h,d[0],d[1])},fan:function(t,e){function n(){var t=o.arc.nearAngle(_,g,v,m);if(i.isNumberEqual(_,t)){var e=i.vec2.squaredLength(y);if(d*d<=e&&e<=p*p)return!0}return!1}function r(){var n=s.getHitLineWidth(),r={x:Math.cos(g)*d+h,y:Math.sin(g)*d+f},i={x:Math.cos(g)*p+h,y:Math.sin(g)*p+f},o={x:Math.cos(v)*d+h,y:Math.sin(v)*d+f},u={x:Math.cos(v)*p+h,y:Math.sin(v)*p+f};return!!(a.line(r.x,r.y,i.x,i.y,n,t,e)||a.line(o.x,o.y,u.x,u.y,n,t,e)||a.arcline(h,f,d,g,v,m,n,t,e)||a.arcline(h,f,p,g,v,m,n,t,e))}var s=this,u=s.hasFill(),l=s.hasStroke(),c=s._attrs,h=c.x,f=c.y,d=c.rs,p=c.re,g=c.startAngle,v=c.endAngle,m=c.clockwise,y=[t-h,e-f],_=i.vec2.angleTo([1,0],y);return u&&l?n()||r():u?n():!!l&&r()},image:function(t,e){var n=this._attrs;return!(this.get("toDraw")||!n.img)&&(this._cfg.attrs&&this._cfg.attrs.img===n.img||this._setAttrImg(),a.rect(n.x,n.y,n.width,n.height,t,e))},line:function(t,e){var n=this._attrs,r=n.x1,i=n.y1,o=n.x2,s=n.y2,u=this.getHitLineWidth();return!!this.hasStroke()&&a.line(r,i,o,s,u,t,e)},path:function(t,e){function n(){if(!i.isEmpty(o)){for(var n=a.getHitLineWidth(),r=0,s=o.length;r<s;r++)if(o[r].isInside(t,e,n))return!0;return!1}}var a=this,o=a.get("segments"),s=a.hasFill(),u=a.hasStroke();return s&&u?r(t,e,a)||n():s?r(t,e,a):!!u&&n()},marker:function(t,e){var n=this._attrs,r=n.x,i=n.y,o=n.radius||n.r,s=this.getHitLineWidth();return a.circle(r,i,o+s/2,t,e)},polygon:function(t,e){function n(){var n=i._attrs.points;if(n.length<2)return!1;var r=i.getHitLineWidth(),o=n.slice(0);return n.length>=3&&o.push(n[0]),a.polyline(o,r,t,e)}var i=this,o=i.hasFill(),s=i.hasStroke();return o&&s?r(t,e,i)||n():o?r(t,e,i):!!s&&n()},polyline:function(t,e){var n=this._attrs;if(this.hasStroke()){var r=n.points;return!(r.length<2)&&a.polyline(r,n.lineWidth,t,e)}return!1},rect:function(t,e){function n(){var n=i._attrs,r=n.x,o=n.y,s=n.width,u=n.height,l=n.radius,c=i.getHitLineWidth();if(0===l){var h=c/2;return a.line(r-h,o,r+s+h,o,c,t,e)||a.line(r+s,o-h,r+s,o+u+h,c,t,e)||a.line(r+s+h,o+u,r-h,o+u,c,t,e)||a.line(r,o+u+h,r,o-h,c,t,e)}return a.line(r+l,o,r+s-l,o,c,t,e)||a.line(r+s,o+l,r+s,o+u-l,c,t,e)||a.line(r+s-l,o+u,r+l,o+u,c,t,e)||a.line(r,o+u-l,r,o+l,c,t,e)||a.arcline(r+s-l,o+l,l,1.5*Math.PI,2*Math.PI,!1,c,t,e)||a.arcline(r+s-l,o+u-l,l,0,.5*Math.PI,!1,c,t,e)||a.arcline(r+l,o+u-l,l,.5*Math.PI,Math.PI,!1,c,t,e)||a.arcline(r+l,o+l,l,Math.PI,1.5*Math.PI,!1,c,t,e)}var i=this,o=i.hasFill(),s=i.hasStroke();return o&&s?r(t,e,i)||n():o?r(t,e,i):!!s&&n()},text:function(t,e){var n=this.getBBox();if(this.hasFill()||this.hasStroke())return a.box(n.minX,n.maxX,n.minY,n.maxY,t,e)}};t.exports={isPointInPath:function(t,e){var n=u[this.type];return!!n&&n.call(this,t,e)}}},function(t,e,n){function r(t,e,n){var r=e.startTime;if(n<r+e.delay||e.isPaused)return!1;var o,u=e.duration,h=e.easing;if(n=n-r-e.delay,e.toAttrs.repeat)o=s[h](o=n%u/u);else{if(!((o=n/u)<1))return t.attr(e.toAttrs),e.toMatrix&&t.setMatrix(e.toMatrix),!0;o=s[h](o)}return function(t,e,n){var r={},o=e.toAttrs,s=e.fromAttrs,u=e.toMatrix;if(!t.get("destroyed")){var h;for(var f in o)if(!i.isEqual(s[f],o[f]))if("path"===f){var d=o[f],p=s[f];d.length>p.length?(d=a.parsePathString(o[f]),p=a.parsePathString(s[f]),p=a.fillPathByDiff(p,d),p=a.formatPath(p,d),e.fromAttrs.path=p,e.toAttrs.path=d):e.pathFormatted||(d=a.parsePathString(o[f]),p=a.parsePathString(s[f]),p=a.formatPath(p,d),e.fromAttrs.path=p,e.toAttrs.path=d,e.pathFormatted=!0),r[f]=[];for(var g=0;g<d.length;g++){for(var v=d[g],m=p[g],y=[],_=0;_<v.length;_++)i.isNumber(v[_])&&m&&i.isNumber(m[_])?(h=l(m[_],v[_]),y.push(h(n))):y.push(v[_]);r[f].push(y)}}else h=l(s[f],o[f]),r[f]=h(n);if(u){var b=c(e.fromMatrix,u)(n);t.setMatrix(b)}t.attr(r)}}(t,e,o),!1}var i=n(1),a=n(47),o=n(139),s=n(141),u=n(110),l=u.interpolate,c=u.interpolateArray,h=function(t){this._animators=[],this._current=0,this._timer=null,this.canvas=t};i.augment(h,{initTimer:function(){var t,e,n,i=this,a=this;a._timer=o.timer(function(o){if(a._current=o,i._animators.length>0){for(var s=i._animators.length-1;s>=0;s--)if((t=i._animators[s]).get("destroyed"))a.removeAnimator(s);else{if(!t.get("pause").isPaused)for(var u=(e=t.get("animators")).length-1;u>=0;u--)r(t,n=e[u],o)&&(e.splice(u,1),n.callback&&n.callback());0===e.length&&a.removeAnimator(s)}i.canvas.draw()}})},addAnimator:function(t){this._animators.push(t)},removeAnimator:function(t){this._animators.splice(t,1)},isAnimating:function(){return!!this._animators.length},stop:function(){this._timer&&this._timer.stop()},stopAllAnimations:function(){this._animators.forEach(function(t){t.stopAnimate()}),this._animators=[],this.canvas.draw()},getTime:function(){return this._current}}),t.exports=h},function(t,e,n){"use strict";var r=n(48);e.a=function(t,e,n){var i=new r.a;return i.restart(function(n){i.stop(),t(n+e)},e=null==e?0:+e,n),i}},function(t,e,n){"use strict";var r=n(48);e.a=function(t,e,n){var i=new r.a,a=e;return null==e?(i.restart(t,e,n),i):(e=+e,n=null==n?Object(r.b)():+n,i.restart(function r(o){o+=a,i.restart(r,a+=e,n),t(o)},e,n),i)}},function(t,e,n){"use strict";e.a=function(t){return+t}},function(t,e,n){"use strict";e.a=function(t){return t*t},e.c=function(t){return t*(2-t)},e.b=function(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}},function(t,e,n){"use strict";e.a=function(t){return t*t*t},e.c=function(t){return--t*t*t+1},e.b=function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"b",function(){return a});var r=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),i=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),a=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3)},function(t,e,n){"use strict";e.a=function(t){return 1-Math.cos(t*i)},e.c=function(t){return Math.sin(t*i)},e.b=function(t){return(1-Math.cos(r*t))/2};var r=Math.PI,i=r/2},function(t,e,n){"use strict";e.a=function(t){return Math.pow(2,10*t-10)},e.c=function(t){return 1-Math.pow(2,-10*t)},e.b=function(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}},function(t,e,n){"use strict";e.a=function(t){return 1-Math.sqrt(1-t*t)},e.c=function(t){return Math.sqrt(1- --t*t)},e.b=function(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}},function(t,e,n){"use strict";function r(t){return(t=+t)<i?d*t*t:t<o?d*(t-=a)*t+s:t<l?d*(t-=u)*t+c:d*(t-=h)*t+f}e.a=function(t){return 1-r(1-t)},e.c=r,e.b=function(t){return((t*=2)<=1?1-r(1-t):r(t-1)+1)/2};var i=4/11,a=6/11,o=8/11,s=.75,u=9/11,l=10/11,c=.9375,h=21/22,f=63/64,d=1/i/i},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"b",function(){return a});var r=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),i=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),a=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158)},function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"c",function(){return a}),n.d(e,"b",function(){return o});var r=2*Math.PI,i=function t(e,n){function i(t){return e*Math.pow(2,10*--t)*Math.sin((a-t)/n)}var a=Math.asin(1/(e=Math.max(1,e)))*(n/=r);return i.amplitude=function(e){return t(e,n*r)},i.period=function(n){return t(e,n)},i}(1,.3),a=function t(e,n){function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+a)/n)}var a=Math.asin(1/(e=Math.max(1,e)))*(n/=r);return i.amplitude=function(e){return t(e,n*r)},i.period=function(n){return t(e,n)},i}(1,.3),o=function t(e,n){function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((a-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((a+t)/n))/2}var a=Math.asin(1/(e=Math.max(1,e)))*(n/=r);return i.amplitude=function(e){return t(e,n*r)},i.period=function(n){return t(e,n)},i}(1,.3)},function(t,e,n){"use strict";function r(t){if(t instanceof a)return new a(t.l,t.a,t.b,t.opacity);if(t instanceof h){var e=t.h*p.a;return new a(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof d.b||(t=Object(d.h)(t));var n=l(t.r),r=l(t.g),i=l(t.b),s=o((.4124564*n+.3575761*r+.1804375*i)/g),u=o((.2126729*n+.7151522*r+.072175*i)/v);return new a(116*u-16,500*(s-u),200*(u-o((.0193339*n+.119192*r+.9503041*i)/m)),t.opacity)}function i(t,e,n,i){return 1===arguments.length?r(t):new a(t,e,n,null==i?1:i)}function a(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function o(t){return t>x?Math.pow(t,1/3):t/b+y}function s(t){return t>_?t*t*t:b*(t-y)}function u(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function l(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function c(t,e,n,i){return 1===arguments.length?function(t){if(t instanceof h)return new h(t.h,t.c,t.l,t.opacity);t instanceof a||(t=r(t));var e=Math.atan2(t.b,t.a)*p.b;return new h(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new h(t,e,n,null==i?1:i)}function h(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}e.a=i,e.b=c;var f=n(51),d=n(50),p=n(111),g=.95047,v=1,m=1.08883,y=4/29,_=6/29,b=3*_*_,x=_*_*_;Object(f.a)(a,i,Object(f.b)(d.a,{brighter:function(t){return new a(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new a(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=v*s(t),e=g*s(e),n=m*s(n),new d.b(u(3.2404542*e-1.5371385*t-.4985314*n),u(-.969266*e+1.8760108*t+.041556*n),u(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),Object(f.a)(h,c,Object(f.b)(d.a,{brighter:function(t){return new h(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new h(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return r(this).rgb()}}))},function(t,e,n){"use strict";function r(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof i)return new i(t.h,t.s,t.l,t.opacity);t instanceof o.b||(t=Object(o.h)(t));var e=t.g/255,n=t.b/255,r=(g*n+d*(t.r/255)-p*e)/(g+d-p),a=n-r,u=(f*(e-r)-c*a)/h,l=Math.sqrt(u*u+a*a)/(f*r*(1-r)),v=l?Math.atan2(u,a)*s.b-120:NaN;return new i(v<0?v+360:v,l,r,t.opacity)}(t):new i(t,e,n,null==r?1:r)}function i(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}e.a=r;var a=n(51),o=n(50),s=n(111),u=-.14861,l=1.78277,c=-.29227,h=-.90649,f=1.97294,d=f*h,p=f*l,g=l*c-h*u;Object(a.a)(i,r,Object(a.b)(o.a,{brighter:function(t){return t=null==t?o.c:Math.pow(o.c,t),new i(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?o.d:Math.pow(o.d,t),new i(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*s.a,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new o.b(255*(e+n*(u*r+l*i)),255*(e+n*(c*r+h*i)),255*(e+n*(f*r)),this.opacity)}}))},function(t,e,n){"use strict";e.a=function(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}}},function(t,e,n){"use strict";function r(t,e,n,r){function a(t){return t.length?t.pop()+" ":""}return function(o,s){var u=[],l=[];return o=t(o),s=t(s),function(t,r,a,o,s,u){if(t!==a||r!==o){var l=s.push("translate(",null,e,null,n);u.push({i:l-4,x:Object(i.a)(t,a)},{i:l-2,x:Object(i.a)(r,o)})}else(a||o)&&s.push("translate("+a+e+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,u,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),l.push({i:n.push(a(n)+"rotate(",null,r)-2,x:Object(i.a)(t,e)})):e&&n.push(a(n)+"rotate("+e+r)}(o.rotate,s.rotate,u),function(t,e,n,o){t!==e?l.push({i:n.push(a(n)+"skewX(",null,r)-2,x:Object(i.a)(t,e)}):e&&n.push(a(n)+"skewX("+e+r)}(o.skewX,s.skewX,u),function(t,e,n,r,o,s){if(t!==n||e!==r){var u=o.push(a(o)+"scale(",null,",",null,")");s.push({i:u-4,x:Object(i.a)(t,n)},{i:u-2,x:Object(i.a)(e,r)})}else 1===n&&1===r||o.push(a(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,u,l),o=s=null,function(t){for(var e,n=-1,r=l.length;++n<r;)u[(e=l[n]).i]=e.x(t);return u.join("")}}}n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s});var i=n(36),a=n(259),o=r(a.a,"px, ","px)","deg)"),s=r(a.b,", ",")",")")},function(t,e,n){"use strict";e.a=function(t){return"none"===t?s.b:(r||(r=document.createElement("DIV"),i=document.documentElement,a=document.defaultView),r.style.transform=t,t=a.getComputedStyle(i.appendChild(r),null).getPropertyValue("transform"),i.removeChild(r),t=t.slice(7,-1).split(","),Object(s.a)(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},e.b=function(t){return null==t?s.b:(o||(o=document.createElementNS("http://www.w3.org/2000/svg","g")),o.setAttribute("transform",t),(t=o.transform.baseVal.consolidate())?(t=t.matrix,Object(s.a)(t.a,t.b,t.c,t.d,t.e,t.f)):s.b)};var r,i,a,o,s=n(260)},function(t,e,n){"use strict";n.d(e,"b",function(){return i});var r=180/Math.PI,i={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};e.a=function(t,e,n,i,a,o){var s,u,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(u=Math.sqrt(n*n+i*i))&&(n/=u,i/=u,l/=u),t*i<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:a,translateY:o,rotate:Math.atan2(e,t)*r,skewX:Math.atan(l)*r,scaleX:s,scaleY:u}}},function(t,e,n){"use strict";function r(t){return((t=Math.exp(t))+1/t)/2}var i=Math.SQRT2;e.a=function(t,e){var n,a,o=t[0],s=t[1],u=t[2],l=e[2],c=e[0]-o,h=e[1]-s,f=c*c+h*h;if(f<1e-12)a=Math.log(l/u)/i,n=function(t){return[o+t*c,s+t*h,u*Math.exp(i*t*a)]};else{var d=Math.sqrt(f),p=(l*l-u*u+4*f)/(2*u*2*d),g=(l*l-u*u-4*f)/(2*l*2*d),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);a=(m-v)/i,n=function(t){var e=t*a,n=r(v),l=u/(2*d)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(i*e+v)-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[o+l*c,s+l*h,u*n/r(i*e+v)]}}return n.duration=1e3*a,n}},function(t,e,n){"use strict";function r(t){return function(e,n){var r=t((e=Object(i.d)(e)).h,(n=Object(i.d)(n)).h),o=Object(a.a)(e.s,n.s),s=Object(a.a)(e.l,n.l),u=Object(a.a)(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=o(t),e.l=s(t),e.opacity=u(t),e+""}}}n.d(e,"b",function(){return o});var i=n(19),a=n(25);e.a=r(a.c);var o=r(a.a)},function(t,e,n){"use strict";e.a=function(t,e){var n=Object(i.a)((t=Object(r.e)(t)).l,(e=Object(r.e)(e)).l),a=Object(i.a)(t.a,e.a),o=Object(i.a)(t.b,e.b),s=Object(i.a)(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=a(e),t.b=o(e),t.opacity=s(e),t+""}};var r=n(19),i=n(25)},function(t,e,n){"use strict";function r(t){return function(e,n){var r=t((e=Object(i.c)(e)).h,(n=Object(i.c)(n)).h),o=Object(a.a)(e.c,n.c),s=Object(a.a)(e.l,n.l),u=Object(a.a)(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=o(t),e.l=s(t),e.opacity=u(t),e+""}}}n.d(e,"b",function(){return o});var i=n(19),a=n(25);e.a=r(a.c);var o=r(a.a)},function(t,e,n){"use strict";function r(t){return function e(n){function r(e,r){var o=t((e=Object(i.b)(e)).h,(r=Object(i.b)(r)).h),s=Object(a.a)(e.s,r.s),u=Object(a.a)(e.l,r.l),l=Object(a.a)(e.opacity,r.opacity);return function(t){return e.h=o(t),e.s=s(t),e.l=u(Math.pow(t,n)),e.opacity=l(t),e+""}}return n=+n,r.gamma=e,r}(1)}n.d(e,"a",function(){return o});var i=n(19),a=n(25);e.b=r(a.c);var o=r(a.a)},function(t,e,n){"use strict";e.a=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}},function(t,e,n){t.exports={canvas:n(268),svg:n(271)}},function(t,e,n){t.exports={painter:n(269)}},function(t,e,n){var r=n(1),i=n(270),a=["fillStyle","font","globalAlpha","lineCap","lineWidth","lineJoin","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","lineDash","lineDashOffset"],o=function(){function t(t){if(!t)return null;var e=r.uniqueId("canvas_"),n=r.createDom('<canvas id="'+e+'"></canvas>');return t.appendChild(n),this.type="canvas",this.canvas=n,this.context=n.getContext("2d"),this.toDraw=!1,this}var e=t.prototype;return e.beforeDraw=function(){var t=this.canvas;this.context&&this.context.clearRect(0,0,t.width,t.height)},e.draw=function(t){var e=this;e.animateHandler?e.toDraw=!0:function n(){e.animateHandler=r.requestAnimationFrame(function(){e.animateHandler=void 0,e.toDraw&&n()}),e.beforeDraw();try{e._drawGroup(t)}catch(t){console.warn("error in draw canvas, detail as:"),console.warn(t),e.toDraw=!1}e.toDraw=!1}()},e.drawSync=function(t){this.beforeDraw(),this._drawGroup(t)},e._drawGroup=function(t){if(!t._cfg.removed&&!t._cfg.destroyed&&t._cfg.visible){var e=t._cfg.children,n=null;this.setContext(t);for(var r=0;r<e.length;r++)n=e[r],e[r].isGroup?this._drawGroup(n):this._drawShape(n);this.restoreContext(t)}},e._drawShape=function(t){t._cfg.removed||t._cfg.destroyed||!t._cfg.visible||(this.setContext(t),t.drawInner(this.context),this.restoreContext(t),t._cfg.attrs=t._attrs,t._cfg.hasUpdate=!1)},e.setContext=function(t){var e=this.context,n=t._attrs.clip;e.save(),n&&(n.resetTransform(e),n.createPath(e),e.clip()),this.resetContext(t),t.resetTransform(e)},e.restoreContext=function(){this.context.restore()},e.resetContext=function(t){var e=this.context,n=t._attrs;if(!t.isGroup)for(var o in n)if(a.indexOf(o)>-1){var s=n[o];"fillStyle"===o&&(s=i.parseStyle(s,t,e)),"strokeStyle"===o&&(s=i.parseStyle(s,t,e)),"lineDash"===o&&e.setLineDash?r.isArray(s)?e.setLineDash(s):r.isString(s)&&e.setLineDash(s.split(" ")):e[o]=s}},t}();t.exports=o},function(t,e,n){function r(t,e){var n=t.match(c);i.each(n,function(t){t=t.split(":"),e.addColorStop(t[0],t[1])})}var i=n(1),a=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,o=/[^\s\,]+/gi,s=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,u=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,l=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,c=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,h={};t.exports={parsePath:function(t){return i.isArray(t=t||[])?t:i.isString(t)?(t=t.match(a),i.each(t,function(e,n){if((e=e.match(o))[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}i.each(e,function(t,n){isNaN(t)||(e[n]=+t)}),t[n]=e}),t):void 0},parseStyle:function(t,e,n){if(i.isString(t)){if("("===t[1]||"("===t[2]){if("l"===t[0])return function(t,e,n){var a,o,u=s.exec(t),l=i.mod(i.toRadian(parseFloat(u[1])),2*Math.PI),c=u[2],h=e.getBBox();l>=0&&l<.5*Math.PI?(a={x:h.minX,y:h.minY},o={x:h.maxX,y:h.maxY}):.5*Math.PI<=l&&l<Math.PI?(a={x:h.maxX,y:h.minY},o={x:h.minX,y:h.maxY}):Math.PI<=l&&l<1.5*Math.PI?(a={x:h.maxX,y:h.maxY},o={x:h.minX,y:h.minY}):(a={x:h.minX,y:h.maxY},o={x:h.maxX,y:h.minY});var f=Math.tan(l),d=f*f,p=n.createLinearGradient(a.x,a.y,(o.x-a.x+f*(o.y-a.y))/(d+1)+a.x,f*(o.x-a.x+f*(o.y-a.y))/(d+1)+a.y);return r(c,p),p}(t,e,n);if("r"===t[0])return function(t,e,n){var i=u.exec(t),a=parseFloat(i[1]),o=parseFloat(i[2]),s=parseFloat(i[3]),l=i[4];if(0===s){var h=l.match(c);return h[h.length-1].split(":")[1]}var f=e.getBBox(),d=f.maxX-f.minX,p=f.maxY-f.minY,g=Math.sqrt(d*d+p*p)/2,v=n.createRadialGradient(f.minX+d*a,f.minY+p*o,s*g,f.minX+d/2,f.minY+p/2,g);return r(l,v),v}(t,e,n);if("p"===t[0])return function(t,e,n){function r(){i=n.createPattern(a,s),e.setSilent("pattern",i),e.setSilent("patternSource",t)}if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var i,a,o=l.exec(t),s=o[1],u=o[2];switch(s){case"a":s="repeat";break;case"x":s="repeat-x";break;case"y":s="repeat-y";break;case"n":s="no-repeat";break;default:s="no-repeat"}return a=new Image,u.match(/^data:/i)||(a.crossOrigin="Anonymous"),a.src=u,a.complete?r():(a.onload=r,a.src=a.src),i}(t,e,n)}return t}},numberToColor:function(t){var e=h[t];if(!e){for(var n=t.toString(16),r=n.length;r<6;r++)n="0"+n;h[t]=e="#"+n}return e}}},function(t,e,n){t.exports={painter:n(272),getShape:n(279)}},function(t,e,n){var r=n(1),i=n(24).parseRadius,a=n(46),o=n(273),s={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject",fan:"path",group:"g"},u={opacity:"opacity",fillStyle:"fill",strokeOpacity:"stroke-opacity",fillOpacity:"fill-opacity",strokeStyle:"stroke",x:"x",y:"y",r:"r",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},l={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},c={left:"left",start:"left",center:"middle",right:"end",end:"end"},h=function(){function t(t){if(!t)return null;var e=r.uniqueId("canvas_"),n=r.createDom('<svg id="'+e+'"></svg>');return t.appendChild(n),this.type="svg",this.canvas=n,this.context=new o(n),this.toDraw=!1,this}var e=t.prototype;return e.draw=function(t){var e=this;e.animateHandler?e.toDraw=!0:function n(){e.animateHandler=r.requestAnimationFrame(function(){e.animateHandler=void 0,e.toDraw&&n()});try{e._drawChildren(t._cfg.children,!1)}catch(t){console.warn("error in draw canvas, detail as:"),console.warn(t),e.toDraw=!1}e.toDraw=!1}()},e.drawSync=function(t){this._drawChildren(t._cfg.children,!1)},e._drawGroup=function(t,e){var n=t._cfg;n.removed||n.destroyed||(!n.el&&n.attrs&&(e=!0),n.tobeRemoved&&(r.each(n.tobeRemoved,function(t){t.parentNode&&t.parentNode.removeChild(t)}),n.tobeRemoved=[]),this._drawShape(t,e),n.children&&n.children.length>0&&this._drawChildren(n.children,e))},e._drawChildren=function(t,e){var n;if(t)for(var r=0;r<t.length;r++)(n=t[r]).isGroup?this._drawGroup(n,e):this._drawShape(n,e)},e._drawShape=function(t,e){var n=t._attrs,r=t._cfg,i=r.el;r.removed||r.destroyed?i&&i.parentNode.removeChild(r.el):(e&&i&&(i.parentNode&&i.parentNode.removeChild(i),i=null),!i&&r.parent&&(this._createDom(t),this._updateShape(t)),i=r.el,!1!==r.visible?(r.visible&&i.hasAttribute("visibility")&&i.removeAttribute("visibility"),r.hasUpdate&&this._updateShape(t),n.clip&&n.clip._cfg.hasUpdate&&this._updateShape(n.clip)):i.setAttribute("visibility","hidden"))},e._updateShape=function(t){var e=t._attrs,n=t._cfg.attrs;if(n)if(t._cfg.el||this._createDom(t),"clip"in e&&this._setClip(t,e.clip),("shadowOffsetX"in e||"shadowOffsetY"in e||"shadowBlur"in e||"shadowColor"in e)&&this._setShadow(t),"text"!==t.type){for(var i in"fan"===t.type&&this._updateFan(t),"marker"===t.type&&t._cfg.el.setAttribute("d",this._assembleMarker(e)),"rect"===t.type&&t._cfg.el.setAttribute("d",this._assembleRect(e)),e)e[i]!==n[i]&&this._setAttribute(t,i,e[i]);t._cfg.attrs=r.deepMix({},t._attrs),t._cfg.hasUpdate=!1}else this._updateText(t)},e._setAttribute=function(t,e,n){var i=t.type,a=t._attrs,o=t._cfg.el,s=this.context;if("marker"!==i&&"rect"!==i||!~["x","y","radius","r"].indexOf(e))if(~["circle","ellipse"].indexOf(i)&&~["x","y"].indexOf(e))o.setAttribute("c"+e,parseInt(n,10));else{if("polygon"===i&&"points"===e)return n&&0!==n.length||(n=""),r.isArray(n)&&(n=(n=n.map(function(t){return t[0]+","+t[1]})).join(" ")),void o.setAttribute("points",n);if("path"===e&&r.isArray(n))o.setAttribute("d",this._formatPath(n));else if("img"!==e){if("transform"===e)return n?void this._setTransform(t):void o.removeAttribute("transform");if("rotate"===e)return n?void this._setTransform(t):void o.removeAttribute("transform");if("matrix"!==e)if("fillStyle"!==e&&"strokeStyle"!==e){if("clip"!==e)if(~e.indexOf("Arrow"))if(e=u[e],n){var l;l="boolean"==typeof n?s.getDefaultArrow(a,e):s.addArrow(a,e),o.setAttribute(e,"url(#"+l+")"),t._cfg[e]=l}else t._cfg[e]=null,o.removeAttribute(e);else"html"===e&&("string"==typeof n?o.innerHTML=n:(o.innerHTML="",o.appendChild(n))),u[e]&&o.setAttribute(u[e],n)}else this._setColor(t,e,n);else this._setTransform(t)}else this._setImage(t,n)}},e._createDom=function(t){var e=s[t.type],n=t._attrs;if(!e)throw new Error("the type"+t.type+"is not supported by svg");var r=document.createElementNS("http://www.w3.org/2000/svg",e);return t._cfg.el=r,t._cfg.parent&&t._cfg.parent.get("el").appendChild(r),t._cfg.attrs={},"text"===t.type?(r.setAttribute("paint-order","stroke"),r.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")):(n.stroke||n.strokeStyle||(n.strokeStyle="none"),n.fill||n.fillStyle||(n.fillStyle="none")),r},e._assembleMarker=function(t){var e=t.r;if(void 0===t.r&&(e=t.radius),isNaN(Number(t.x))||isNaN(Number(t.y))||isNaN(Number(e)))return"";var n="";return n="function"==typeof t.symbol?t.symbol(t.x,t.y,e):a.Symbols[t.symbol||"circle"](t.x,t.y,e),r.isArray(n)&&(n=n.map(function(t){return t.join(" ")}).join("")),n},e._assembleRect=function(t){var e=t.x,n=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+e+","+n+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var u=i(s);return r.isArray(s)?1===s.length?u.r1=u.r2=u.r3=u.r4=s[0]:2===s.length?(u.r1=u.r3=s[0],u.r2=u.r4=s[1]):3===s.length?(u.r1=s[0],u.r2=u.r4=s[1],u.r3=s[2]):(u.r1=s[0],u.r2=s[1],u.r3=s[2],u.r4=s[3]):u.r1=u.r2=u.r3=u.r4=s,[["M "+(e+u.r1)+","+n],["l "+(a-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(o-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-a)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-o)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]].join(" ")},e._formatPath=function(t){return~(t=t.map(function(t){return t.join(" ")}).join("")).indexOf("NaN")?"":t},e._setTransform=function(t){for(var e=t._attrs.matrix,n=t._cfg.el,r=[],i=0;i<9;i+=3)r.push(e[i]+","+e[i+1]);n.setAttribute("transform","matrix("+r.join(",")+")")},e._setImage=function(t,e){var n=t._attrs,i=t._cfg.el;if(r.isString(e))i.setAttribute("href",e);else if(e instanceof Image)n.width||(i.setAttribute("width",e.width),t._attrs.width=e.width),n.height||(i.setAttribute("height",e.height),t._attrs.height=e.height),i.setAttribute("href",e.src);else if(e instanceof HTMLElement&&r.isString(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase())i.setAttribute("href",e.toDataURL());else if(e instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",e.width),a.setAttribute("height",e.height),a.getContext("2d").putImageData(e,0,0),n.width||(i.setAttribute("width",e.width),t._attrs.width=e.width),n.height||(i.setAttribute("height",e.height),t._attrs.height=e.height),i.setAttribute("href",a.toDataURL())}},e._updateFan=function(t){function e(t,e,n){return{x:e*Math.cos(t)+n.x,y:e*Math.sin(t)+n.y}}var n=t._attrs,i=t._cfg,a={x:n.x,y:n.y},o=[],s=n.startAngle,u=n.endAngle;r.isNumberEqual(u-s,2*Math.PI)&&(u-=1e-5);var l=e(s,n.re,a),c=e(u,n.re,a),h=u>s?1:0,f=Math.abs(u-s)>Math.PI?1:0,d=n.rs,p=n.re,g=e(s,n.rs,a),v=e(u,n.rs,a);n.rs>0?(o.push("M "+c.x+","+c.y),o.push("L "+v.x+","+v.y),o.push("A "+d+","+d+",0,"+f+","+(1===h?0:1)+","+g.x+","+g.y),o.push("L "+l.x+" "+l.y)):(o.push("M "+a.x+","+a.y),o.push("L "+l.x+","+l.y)),o.push("A "+p+","+p+",0,"+f+","+h+","+c.x+","+c.y),o.push(n.rs>0?"L "+v.x+","+v.y:"Z"),i.el.setAttribute("d",o.join(" "))},e._updateText=function(t){var e=t._attrs,n=t._cfg.attrs,r=t._cfg.el;for(var i in this._setFont(t),e)if(e[i]!==n[i]){if("text"===i){this._setText(t,""+e[i]);continue}if("fillStyle"===i||"strokeStyle"===i){this._setColor(t,i,e[i]);continue}if("matrix"===i){this._setTransform(t);continue}u[i]&&r.setAttribute(u[i],e[i])}t._cfg.attrs=Object.assign({},t._attrs),t._cfg.hasUpdate=!1},e._setFont=function(t){var e=t.get("el"),n=t._attrs,r=n.fontSize;e.setAttribute("alignment-baseline",l[n.textBaseline]||"baseline"),e.setAttribute("text-anchor",c[n.textAlign]||"left"),r&&+r<12&&(n.matrix=[1,0,0,0,1,0,0,0,1],t.transform([["t",-n.x,-n.y],["s",+r/12,+r/12],["t",n.x,n.y]]))},e._setText=function(t,e){var n=t._cfg.el,i=t._attrs.textBaseline||"bottom";if(e)if(~e.indexOf("\n")){var a=t._attrs.x,o=e.split("\n"),s=o.length-1,u="";r.each(o,function(t,e){0===e?"alphabetic"===i?u+='<tspan x="'+a+'" dy="'+-s+'em">'+t+"</tspan>":"top"===i?u+='<tspan x="'+a+'" dy="'+s+'em">'+t+"</tspan>":"middle"===i?u+='<tspan x="'+a+'" dy="0">'+t+"</tspan>":"bottom"===i?u+='<tspan x="'+a+'" dy="-'+(s+.2)+'em">'+t+"</tspan>":"hanging"===i&&(u+='<tspan x="'+a+'" dy="-0.2em">'+t+"</tspan>"):u+='<tspan x="'+a+'" dy="1em">'+t+"</tspan>"}),n.innerHTML=u}else n.innerHTML=e;else n.innerHTML=""},e._setClip=function(t,e){var n=t._cfg.el;if(e)if(n.hasAttribute("clip-path"))e._cfg.hasUpdate&&this._updateShape(e);else{this._createDom(e),this._updateShape(e);var r=this.context.addClip(e);n.setAttribute("clip-path","url(#"+r+")")}else n.removeAttribute("clip-path")},e._setColor=function(t,e,n){var r=t._cfg.el,i=this.context;if(n)if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var a=i.find("gradient",n);a||(a=i.addGradient(n)),r.setAttribute(u[e],"url(#"+a+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=i.find("pattern",n);o||(o=i.addPattern(n)),r.setAttribute(u[e],"url(#"+o+")")}else r.setAttribute(u[e],n);else r.setAttribute(u[e],"none")},e._setShadow=function(t){var e=t._cfg.el,n=t._attrs,r={dx:n.shadowOffsetX,dy:n.shadowOffsetY,blur:n.shadowBlur,color:n.shadowColor},i=this.context.find("filter",r);i||(i=this.context.addShadow(r,this)),e.setAttribute("filter","url(#"+i+")")},t}();t.exports=h},function(t,e,n){var r=n(1),i=n(274),a=n(275),o=n(276),s=n(277),u=n(278),l=function(){function t(t){var e=document.createElementNS("http://www.w3.org/2000/svg","defs"),n=r.uniqueId("defs_");e.id=n,t.appendChild(e),this.children=[],this.defaultArrow={},this.el=e,this.canvas=t}var e=t.prototype;return e.find=function(t,e){for(var n=this.children,r=null,i=0;i<n.length;i++)if(n[i].match(t,e)){r=n[i].id;break}return r},e.findById=function(t){for(var e=this.children,n=null,r=0;r<e.length;r++)if(e[r].id===t){n=e[r];break}return n},e.add=function(t){this.children.push(t),t.canvas=this.canvas,t.parent=this},e.getDefaultArrow=function(t,e){var n=t.stroke||t.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var r=new o(t,e);return this.defaultArrow[n]=r,this.el.appendChild(r.el),r.id},e.addGradient=function(t){var e=new i(t);return this.el.appendChild(e.el),this.add(e),e.id},e.addArrow=function(t,e){var n=new o(t,e);return this.el.appendChild(n.el),n.id},e.addShadow=function(t){var e=new a(t);return this.el.appendChild(e.el),this.add(e),e.id},e.addPattern=function(t){var e=new u(t);return this.el.appendChild(e.el),this.add(e),e.id},e.addClip=function(t){var e=new s(t);return this.el.appendChild(e.el),this.add(e),e.id},t}();t.exports=l},function(t,e,n){function r(t){var e=t.match(s);if(!e)return"";var n="";return e.sort(function(t,e){return t=t.split(":"),e=e.split(":"),Number(t[0])-Number(e[0])}),i.each(e,function(t){t=t.split(":"),n+='<stop offset="'+t[0]+'" stop-color="'+t[1]+'"></stop>'}),n}var i=n(1),a=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,o=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,s=/[\d.]+:(#[^\s]+|[^\)]+\))/gi,u=function(){function t(t){var e=null,n=i.uniqueId("gradient_");return"l"===t.toLowerCase()[0]?function(t,e){var n,o,s=a.exec(t),u=i.mod(i.toRadian(parseFloat(s[1])),2*Math.PI),l=s[2];u>=0&&u<.5*Math.PI?(n={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=u&&u<Math.PI?(n={x:1,y:0},o={x:0,y:1}):Math.PI<=u&&u<1.5*Math.PI?(n={x:1,y:1},o={x:0,y:0}):(n={x:0,y:1},o={x:1,y:0});var c=Math.tan(u),h=c*c,f=(o.x-n.x+c*(o.y-n.y))/(h+1)+n.x,d=c*(o.x-n.x+c*(o.y-n.y))/(h+1)+n.y;e.setAttribute("x1",n.x),e.setAttribute("y1",n.y),e.setAttribute("x2",f),e.setAttribute("y2",d),e.innerHTML=r(l)}(t,e=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")):function(t,e){var n=o.exec(t),i=parseFloat(n[1]),a=parseFloat(n[2]),s=parseFloat(n[3]),u=n[4];e.setAttribute("cx",i),e.setAttribute("cy",a),e.setAttribute("r",s),e.innerHTML=r(u)}(t,e=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")),e.setAttribute("id",n),this.el=e,this.id=n,this.cfg=t,this}return t.prototype.match=function(t,e){return this.cfg===e},t}();t.exports=u},function(t,e,n){var r=n(1),i={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},a=function(){function t(t){this.type="shadow";var e=document.createElementNS("http://www.w3.org/2000/svg","filter");return this.el=e,this.id=r.uniqueId("filter_"),this.el.id=this.id,this.cfg=t,this._parseShadow(t,e),this}var e=t.prototype;return e.match=function(t,e){if(this.type!==t)return!1;var n=!0,i=this.cfg;return r.each(Object.keys(i),function(t){if(i[t]!==e[t])return n=!1,!1}),n},e.update=function(t,e){var n=this.cfg;return n[i[t]]=e,this._parseShadow(n,this.el),this},e._parseShadow=function(t,e){e.innerHTML='<feDropShadow \n      dx="'+(t.dx||0)+'" \n      dy="'+(t.dy||0)+'" \n      stdDeviation="'+(t.blur?t.blur/10:0)+'"\n      flood-color="'+(t.color?t.color:"#000")+'"\n      flood-opacity="'+(t.opacity?t.opacity:1)+'"\n      />'},t}();t.exports=a},function(t,e,n){var r=n(1),i=function(){function t(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","marker"),i=r.uniqueId("marker_");n.setAttribute("id",i);var a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("stroke","none"),a.setAttribute("fill",t.stroke||"#000"),n.appendChild(a),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=a,this.id=i,this.cfg=t["marker-start"===e?"startArrow":"endArrow"],this.stroke=t.stroke||"#000",!0===this.cfg?this._setDefaultPath(e,a):this._setMarker(t.lineWidth,a),this}var e=t.prototype;return e.match=function(){return!1},e._setDefaultPath=function(t,e){var n=this.el;e.setAttribute("d","M0,0 L6,3 L0,6 L3,3Z"),n.setAttribute("refX",3),n.setAttribute("refY",3)},e._setMarker=function(t,e){var n=this.el,i=this.cfg.path,a=this.cfg.d;r.isArray(i)&&(i=i.map(function(t){return t.join(" ")}).join("")),e.setAttribute("d",i),n.appendChild(e),a&&n.setAttribute("refX",a/t)},e.update=function(t){var e=this.child;e.attr?e.attr("fill",t):e.setAttribute("fill",t)},t}();t.exports=i},function(t,e,n){var r=n(1),i=function(){function t(t){this.type="clip";var e=document.createElementNS("http://www.w3.org/2000/svg","clipPath");return this.el=e,this.id=r.uniqueId("clip_"),e.id=this.id,e.appendChild(t._cfg.el),this.cfg=t,this}var e=t.prototype;return e.match=function(){return!1},e.remove=function(){var t=this.el;t.parentNode.removeChild(t)},t}();t.exports=i},function(t,e,n){var r=n(1),i=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,a=function(){function t(t){function e(){console.log(u.width,u.height),n.setAttribute("width",u.width),n.setAttribute("height",u.height)}var n=document.createElementNS("http://www.w3.org/2000/svg","pattern");n.setAttribute("patternUnits","userSpaceOnUse");var a=document.createElementNS("http://www.w3.org/2000/svg","image");n.appendChild(a);var o=r.uniqueId("pattern_");n.id=o,this.el=n,this.id=o,this.cfg=t;var s=i.exec(t)[2];a.setAttribute("href",s);var u=new Image;return s.match(/^data:/i)||(u.crossOrigin="Anonymous"),u.src=s,u.complete?e():(u.onload=e,u.src=u.src),this}return t.prototype.match=function(t,e){return this.cfg===e},t}();t.exports=a},function(t,e){var n={svg:"svg",circle:"circle",rect:"rect",text:"text",path:"path",foreignObject:"foreignObject",polygon:"polygon",ellipse:"ellipse",image:"image"};t.exports=function(t,e,r){var i=r.target||r.srcElement;if(!n[i.tagName]){for(var a=i.parentNode;a&&!n[a.tagName];)a=a.parentNode;i=a}return this._cfg.el===i?this:this.find(function(t){return t._cfg&&t._cfg.el===i})}},function(t,e,n){function r(t,e,n){var r={};return t.delay&&(r.delay=h.isFunction(t.delay)?t.delay(e,n):t.delay),r.easing=h.isFunction(t.easing)?t.easing(e,n):t.easing,r.duration=h.isFunction(t.duration)?t.duration(e,n):t.duration,r.callback=t.callback,r}function i(t,e){var n,i=t._id,a=t.get("index"),o=t.getBBox(),s=t.get("origin").points,u=(o.minX+o.maxX)/2,l=[u,n=s[0].y-s[1].y<=0?o.maxY:o.minY,1];t.apply(l),t.attr("transform",[["t",-u,-n],["s",1,.01],["t",u,n]]);var c={transform:[["t",-u,-n],["s",1,100],["t",u,n]]},h=r(e,a,i);t.animate(c,h.duration,h.easing,h.callback,h.delay)}function a(t,e){var n,i=t._id,a=t.get("index"),o=t.getBBox(),s=t.get("origin").points,u=(o.minY+o.maxY)/2,l=[n=s[0].y-s[1].y>0?o.maxX:o.minX,u,1];t.apply(l),t.attr({transform:[["t",-n,-u],["s",.01,1],["t",n,u]]});var c={transform:[["t",-n,-u],["s",100,1],["t",n,u]]},h=r(e,a,i);t.animate(c,h.duration,h.easing,h.callback,h.delay)}function o(t,e,n){var i,a,o=t._id,s=t.get("index");if(n.isPolar&&"point"!==t.name)i=n.getCenter().x,a=n.getCenter().y;else{var u=t.getBBox();i=(u.minX+u.maxX)/2,a=(u.minY+u.maxY)/2}t.apply([i,a,1]),t.attr({transform:[["t",-i,-a],["s",.01,.01],["t",i,a]]});var l={transform:[["t",-i,-a],["s",100,100],["t",i,a]]},c=r(e,s,o);t.animate(l,c.duration,c.easing,c.callback,c.delay)}function s(t,e){if("path"===t.get("type")){var n=t._id,i=t.get("index"),a=d.pathToAbsolute(t.attr("path"));t.attr("path",[a[0]]);var o={path:a},s=r(e,i,n);t.animate(o,s.duration,s.easing,s.callback,s.delay)}}function u(t,e,n,i,a){var o,s=function(t){var e,n,r,i,a,o=t.start,s=t.end,u=t.getWidth(),l=t.getHeight();return t.isPolar?(i=t.getRadius(),r=t.getCenter(),n=t.endAngle,(a=new f.Fan({attrs:{x:r.x,y:r.y,rs:0,re:i+200,startAngle:e=t.startAngle,endAngle:e}})).endState={endAngle:n}):(a=new f.Rect({attrs:{x:o.x-200,y:s.y-200,width:t.isTransposed?u+400:0,height:t.isTransposed?0:l+400}})).endState=t.isTransposed?{height:l+400}:{width:u+400},a.isClip=!0,a}(n),u=t.get("canvas"),l=t._id,c=t.get("index");i?(s.attr("startAngle",i),s.attr("endAngle",i),o={endAngle:a}):o=s.endState,s.set("canvas",u),t.attr("clip",s),t.setSilent("animating",!0);var h=r(e,c,l);s.animate(o,h.duration,h.easing,function(){t&&!t.get("destroyed")&&(t.attr("clip",null),t.setSilent("cacheShape",null),t.setSilent("animating",!1),s.remove())},h.delay)}function l(t,e){var n=t._id,i=t.get("index"),a=h.isNil(t.attr("fillOpacity"))?1:t.attr("fillOpacity"),o=h.isNil(t.attr("strokeOpacity"))?1:t.attr("strokeOpacity");t.attr("fillOpacity",0),t.attr("strokeOpacity",0);var s={fillOpacity:a,strokeOpacity:o},u=r(e,i,n);t.animate(s,u.duration,u.easing,u.callback,u.delay)}function c(t,e,n){var r=function(t,e){var n,r,i=function(t){if(h.isEmpty(t))return null;var e=t[0].x,n=t[0].x,r=t[0].y,i=t[0].y;return h.each(t,function(t){e=e>t.x?t.x:e,n=n<t.x?t.x:n,r=r>t.y?t.y:r,i=i<t.y?t.y:i}),{minX:e,maxX:n,minY:r,maxY:i,centerX:(e+n)/2,centerY:(r+i)/2}}(t.points||t.get("origin").points),a=e.startAngle,o=e.endAngle-a;return e.isTransposed?(n=i.maxY*o,r=i.minY*o):(n=i.maxX*o,r=i.minX*o),{startAngle:r+=a,endAngle:n+=a}}(t,n);u(t,e,n,r.startAngle,r.endAngle)}var h=n(0),f=n(6),d=h.PathUtil;t.exports={enter:{clipIn:u,zoomIn:o,pathIn:s,scaleInY:i,scaleInX:a,fanIn:c,fadeIn:l},leave:{lineWidthOut:function(t,e){var n=t._id,i=r(e,t.get("index"),n);t.animate({lineWidth:0,opacity:0},i.duration,i.easing,function(){t.remove()},i.delay)},zoomOut:function(t,e,n){var i,a,o=t._id,s=t.get("index");if(n.isPolar&&"point"!==t.name)i=n.getCenter().x,a=n.getCenter().y;else{var u=t.getBBox();i=(u.minX+u.maxX)/2,a=(u.minY+u.maxY)/2}t.apply([i,a,1]);var l={transform:[["t",-i,-a],["s",.01,.01],["t",i,a]]},c=r(e,s,o);t.animate(l,c.duration,c.easing,function(){t.remove()},c.delay)},pathOut:function(t,e){if("path"===t.get("type")){var n=t._id,i=t.get("index"),a={path:[d.pathToAbsolute(t.attr("path"))[0]]},o=r(e,i,n);t.animate(a,o.duration,o.easing,function(){t.remove()},o.delay)}},fadeOut:function(t,e){var n=t._id,i=r(e,t.get("index"),n);t.animate({fillOpacity:0,strokeOpacity:0},i.duration,i.easing,function(){t.remove()},i.delay)}},appear:{clipIn:u,zoomIn:o,pathIn:s,scaleInY:i,scaleInX:a,fanIn:c,fadeIn:l},update:{fadeIn:l,fanIn:c}}},function(t,e,n){var r=n(7),i=n(4),a=n(2),o=function(t){function e(e){var n;return(n=t.call(this,e)||this).names=["x","y"],n.type="position",n}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e.prototype.mapping=function(t,e){var n,o,s,u=this.scales,l=this.coord,c=u[0],h=u[1];if(r(t)||r(e))return[];if(i(e)&&i(t)){n=[],o=[];for(var f=0,d=0,p=t.length,g=e.length;f<p&&d<g;f++,d++)s=l.convertPoint({x:c.scale(t[f]),y:h.scale(e[d])}),n.push(s.x),o.push(s.y)}else if(i(e))t=c.scale(t),o=[],a(e,function(e){e=h.scale(e),s=l.convertPoint({x:t,y:e}),n&&n!==s.x?(i(n)||(n=[n]),n.push(s.x)):n=s.x,o.push(s.y)});else if(i(t))e=h.scale(e),n=[],a(t,function(t){t=c.scale(t),s=l.convertPoint({x:t,y:e}),o&&o!==s.y?(i(o)||(o=[o]),o.push(s.y)):o=s.y,n.push(s.x)});else{t=c.scale(t),e=h.scale(e);var v=l.convertPoint({x:t,y:e});n=v.x,o=v.y}return[n,o]},e}(n(26));t.exports=o},function(t,e,n){var r=n(9),i=n(120),a=function(t){function e(e){var n;return(n=t.call(this,e)||this).names=["color"],n.type="color",n.gradient=null,r(n.values)&&(n.linear=!0),n}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e.prototype.getLinearValue=function(t){var e=this.gradient;return e||(e=i.gradient(this.values),this.gradient=e),e(t)},e}(n(26));t.exports=a},function(t,e,n){var r=function(t){function e(e){var n;return(n=t.call(this,e)||this).names=["shape"],n.type="shape",n.gradient=null,n}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e.prototype.getLinearValue=function(t){var e=this.values;return e[Math.round((e.length-1)*t)]},e}(n(26));t.exports=r},function(t,e,n){var r=function(t){function e(e){var n;return(n=t.call(this,e)||this).names=["size"],n.type="size",n.gradient=null,n}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e}(n(26));t.exports=r},function(t,e,n){var r=function(t){function e(e){var n;return(n=t.call(this,e)||this).names=["opacity"],n.type="opacity",n.gradient=null,n}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e}(n(26));t.exports=r},function(t,e,n){var r=n(54),i=n(27),a=n(287),o=n(289),s=n(123),u=n(290),l=n(294);r(i.prototype,s),r(a.prototype,s,u),r(o.prototype,l),i.Jitter=n(295),i.Symmetric=n(296),i.Dodge=a,i.Stack=o,t.exports=i},function(t,e,n){var r=n(27),i=n(15),a=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n._initDefaultCfg=function(){this.marginRatio=.5,this.dodgeRatio=.5,this.adjustNames=["x","y"]},n.getDodgeOffset=function(t,e,n){var r=t.pre,i=t.next,a=i-r,o=a*this.dodgeRatio/n,s=this.marginRatio*o;return(r+i)/2+(.5*(a-n*o-(n-1)*s)+((e+1)*o+e*s)-.5*o-.5*a)},n.processAdjust=function(t){var e=this,n=t.length,r=e.xField;i(t,function(t,i){for(var a=0,o=t.length;a<o;a++){var s=t[a],u=s[r],l=e.getDodgeOffset({pre:u-.5,next:u+.5},i,n);s[r]=l}})},e}(r);r.Dodge=a,t.exports=a},function(t,e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){var e=void 0===t?"undefined":n(t);return null!==t&&"object"===e||"function"===e}},function(t,e,n){var r=n(16),i=n(122),a=n(27),o=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n._initDefaultCfg=function(){this.xField=null,this.yField=null},n.processAdjust=function(t){this.processStack(t)},n.processStack=function(t){var e=this.xField,n=this.yField,a=t.length,o={positive:{},negative:{}};this.reverseOrder&&(t=t.slice(0).reverse());for(var s=0;s<a;s++)for(var u=t[s],l=0,c=u.length;l<c;l++){var h=u[l],f=h[n],d=(h[e]||0).toString();if(f=r(f)?f[1]:f,!i(f)){var p=f>=0?"positive":"negative";o[p][d]||(o[p][d]=0),h[n]=[o[p][d],f+o[p][d]],o[p][d]+=f}}},e}(a);a.Stack=o,t.exports=o},function(t,e,n){var r={merge:n(55),values:n(124)},i=n(291),a=n(15);t.exports={processAdjust:function(t){var e=r.merge(t),n=this.dodgeBy,a=t;n&&(a=i(e,n)),this.cacheMap={},this.adjDataArray=a,this.mergeData=e,this.adjustData(a,e),this.adjDataArray=null,this.mergeData=null},getDistribution:function(t){var e=this.cacheMap,n=e[t];return n||(n={},a(this.adjDataArray,function(e,i){var o=r.values(e,t);o.length||o.push(0),a(o,function(t){n[t]||(n[t]=[]),n[t].push(i)})}),e[t]=n),n},adjustDim:function(t,e,n,r,i){var o=this,s=o.getDistribution(t),u=o.groupData(n,t);a(u,function(n,r){var u;r=parseFloat(r),u=1===e.length?{pre:e[0]-1,next:e[0]+1}:o.getAdjustRange(t,r,e),a(n,function(e){var n=s[e[t]],r=n.indexOf(i);e[t]=o.getDodgeOffset(u,r,n.length)})})}}},function(t,e,n){var r=n(292);t.exports=function(t,e){if(!e)return[t];var n=r(t,e),i=[];for(var a in n)i.push(n[a]);return i}},function(t,e,n){var r=n(125),i=n(16),a=n(293);t.exports=function(t,e){if(!e)return{0:t};if(!r(e)){var n=i(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",r=0,i=n.length;r<i;r++)e+=t[n[r]]&&t[n[r]].toString();return e}}return a(t,e)}},function(t,e,n){var r=n(15),i=n(16),a=Object.prototype.hasOwnProperty;t.exports=function(t,e){if(!e||!i(t))return t;var n={},o=null;return r(t,function(t){o=e(t),a.call(n,o)?n[o].push(t):n[o]=[t]}),n}},function(t,e){t.exports={_initDefaultCfg:function(){this.xField=null,this.yField=null,this.height=null,this.size=10,this.reverseOrder=!1,this.adjustNames=["y"]},processOneDimStack:function(t){var e=this.xField,n=this.yField||"y",r=this.height,i={};this.reverseOrder&&(t=t.slice(0).reverse());for(var a=0,o=t.length;a<o;a++)for(var s=t[a],u=0,l=s.length;u<l;u++){var c=s[u],h=2*(c.size||this.size)/r,f=c[e];i[f]||(i[f]=h/2),c[n]=i[f],i[f]+=h}},processAdjust:function(t){this.yField?this.processStack(t):this.processOneDimStack(t)}}},function(t,e,n){var r=n(15),i=n(54),a={merge:n(55)},o=n(27),s=n(123),u=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n._initDefaultCfg=function(){this.xField=null,this.yField=null,this.adjustNames=["x","y"],this.groupFields=null},n.processAdjust=function(t){var e=a.merge(t);this.adjDataArray=t,this.mergeData=e,this.adjustData(t,e),this.adjFrames=null,this.mergeData=null},n.getAdjustOffset=function(t,e){var n=e-t;return t+.05*n+.9*n*Math.random()},n._adjustGroup=function(t,e,n,i){var a=this,o=a.getAdjustRange(e,n,i);r(t,function(t){t[e]=a.getAdjustOffset(o.pre,o.next)})},n.adjustDim=function(t,e,n){var i=this,a=i.groupData(n,t);r(a,function(n,r){r=parseFloat(r),i._adjustGroup(n,t,r,e)})},e}(o);i(u.prototype,s),o.Jitter=u,t.exports=u},function(t,e,n){var r=n(15),i=n(297),a=n(16),o={merge:n(55)},s=n(27),u=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n._initDefaultCfg=function(){this.xField=null,this.yField=null,this.cacheMax=null,this.adjustNames=["y"],this.groupFields=null},n._getMax=function(t){var e=i(this.mergeData,function(e){var n=e[t];return a(n)?Math.max.apply(null,n):n})[t];return a(e)?Math.max.apply(null,e):e},n._getXValuesMax=function(){var t=this.yField,e=this.xField,n={};return r(this.mergeData,function(r){var i=r[e],o=r[t],s=a(o)?Math.max.apply(null,o):o;n[i]=n[i]||0,n[i]<s&&(n[i]=s)}),n},n.processAdjust=function(t){var e=o.merge(t);this.mergeData=e,this._processSymmetric(t),this.mergeData=null},n._processSymmetric=function(t){var e,n=this.xField,i=this.yField,o=this._getMax(i),s=t[0][0];s&&a(s[i])&&(e=this._getXValuesMax()),r(t,function(t){r(t,function(t){var s,u=t[i];if(a(u)){s=(o-e[t[n]])/2;var l=[];r(u,function(t){l.push(s+t)}),t[i]=l}else t[i]=[s=(o-u)/2,u+s]})})},e}(s);s.Symmetric=u,t.exports=u},function(t,e,n){var r=n(16),i=n(125),a=n(15);t.exports=function(t,e){if(r(t)){var n=t[0],o=void 0;o=i(e)?e(t[0]):t[0][e];var s=void 0;return a(t,function(t){(s=i(e)?e(t):t[e])>o&&(n=t,o=s)}),n}}},function(t,e,n){var r,i,a=n(0),o=n(127),s=a.deepMix({},o,{background:{fill:"#1F1F1F",radius:2},plotBackground:{fill:"#1F1F1F"},axis:{top:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"}},bottom:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"}},left:{label:{textStyle:{fill:"#A6A6A6"}},grid:{lineStyle:{stroke:"#404040"}}},right:{label:{textStyle:{fill:"#A6A6A6"}},grid:{lineStyle:{stroke:"#404040"}}},circle:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"},grid:{lineStyle:{stroke:"#404040"}}},radius:{label:{textStyle:{fill:"#A6A6A6"}},line:{stroke:"#737373"},tickLine:{stroke:"#737373"},grid:{lineStyle:{stroke:"#404040"}}},helix:{line:{stroke:"#737373"},tickLine:{stroke:"#737373"}}},label:{textStyle:{fill:"#A6A6A6"}},legend:{right:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},left:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},top:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},bottom:{textStyle:{fill:"#737373"},unCheckColor:"#bfbfbf"},html:(r={},r["g2-legend"]={color:"#D9D9D9"},r),gradient:{textStyle:{fill:"#D9D9D9"},lineStyle:{stroke:"#404040"}}},tooltip:(i={},i["g2-tooltip"]={color:"#D9D9D9"},i),tooltipCrosshairsRect:{type:"rect",style:{fill:"#fff",opacity:.1}},tooltipCrosshairsLine:{style:{stroke:"rgba(255, 255, 255, 0.45)"}},guide:{line:{text:{style:{fill:"#A6A6A6"}}},text:{style:{fill:"#A6A6A6"}},region:{style:{lineWidth:0,fill:"#000",fillOpacity:.04}}}});t.exports=s},function(t,e,n){var r=n(128),i=n(131),a=n(302);t.exports={getLabelsClass:function(t){var e=r;return"polar"===t?e=i:"theta"===t&&(e=a),e}}},function(t,e,n){var r=n(0),i=n(130);t.exports={renderLabels:function(){var t=this.get("label");if(!r.isNil(t)){r.isNil(t.items)&&(t.items=[]);var e=this.addGroup(i,t);this.set("labelsGroup",e)}},resetLabels:function(t){var e=this,n=e.get("label");if(n){var i=e.get("labelsGroup"),a=i.getLabels(),o=a.length;r.each(t=t||n.items,function(t,n){if(n<o)i.changeLabel(a[n],t);else{var r=e.addLabel(t.text,t);r&&(r._id=t._id,r.set("coord",t.coord))}});for(var s=o-1;s>=t.length;s--)a[s].remove()}},addLabel:function(t,e){var n,r=this.get("labelsGroup"),i={};return r&&(i.text=t,i.x=e.x,i.y=e.y,i.point=e,i.textAlign=e.textAlign,e.rotate&&(i.rotate=e.rotate),n=r.addLabel(i)),n},removeLabels:function(){var t=this.get("labelsGroup");t&&t.remove(),this.set("labelsGroup",null)}}},function(t,e,n){var r=n(0).MatrixUtil.vec2;t.exports={catmullRom2bezier:function(t,e,n){for(var i=!!e,a=[],o=0,s=t.length;o<s;o+=2)a.push([t[o],t[o+1]]);for(var u,l,c,h=function(t,e,n,i){var a,o,s,u,l=[],c=!!i;if(c){s=[1/0,1/0],u=[-1/0,-1/0];for(var h=0,f=t.length;h<f;h++){var d=t[h];s=r.min([],s,d),u=r.max([],u,d)}s=r.min([],s,i[0]),u=r.max([],u,i[1])}for(var p=0,g=t.length;p<g;p++){var v=t[p];if(n)a=t[p?p-1:g-1],o=t[(p+1)%g];else{if(0===p||p===g-1){l.push(v);continue}a=t[p-1],o=t[p+1]}var m=[];m=r.sub(m,o,a),m=r.scale(m,m,.4);var y=r.distance(v,a),_=r.distance(v,o),b=y+_;0!==b&&(y/=b,_/=b);var x=r.scale([],m,-y),w=r.scale([],m,_),S=r.add([],v,x),T=r.add([],v,w);c&&(S=r.max([],S,s),S=r.min([],S,u),T=r.max([],T,s),T=r.min([],T,u)),l.push(S),l.push(T)}return n&&l.push(l.shift()),l}(a,0,i,n),f=a.length,d=[],p=0;p<f-1;p++)d.push(["C",(u=h[2*p])[0],u[1],(l=h[2*p+1])[0],l[1],(c=a[p+1])[0],c[1]]);return i&&d.push(["C",(u=h[f])[0],u[1],(l=h[f+1])[0],l[1],(c=a[0])[0],c[1]]),d}}},function(t,e,n){function r(t,e,n){return{x:t.x+n*Math.cos(e),y:t.y+n*Math.sin(e)}}var i=n(0),a=n(131),o=n(21),s=n(3),u=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){return{label:s.thetaLabels}},n.getDefaultOffset=function(){return this.get("label").offset||0},n.adjustItems=function(t){var e=this.getDefaultOffset();return e>0&&(t=this._distribute(t,e)),t},n._distribute=function(t,e){var n=this.get("coord"),r=n.getRadius(),i=this.get("label").labelHeight,a=n.getCenter(),o=2*(r+e)+2*i,s={start:n.start,end:n.end},u=this.get("geom");if(u){var l=u.get("view");s=l.getViewRegion()}var c=[[],[]];return t.forEach(function(t){"right"===t.textAlign?c[0].push(t):c[1].push(t)}),c.forEach(function(t,e){var n=parseInt(o/i,10);t.length>n&&(t.sort(function(t,e){return e["..percent"]-t["..percent"]}),t.splice(n,t.length-n)),t.sort(function(t,e){return t.y-e.y}),function(t,e,n,r,i){var a,o=!0,s=n.start,u=n.end,l=Math.min(s.y,u.y),c=Math.abs(s.y-u.y),h=0,f=Number.MIN_VALUE,d=t.map(function(t){return t.y>h&&(h=t.y),t.y<f&&(f=t.y),{size:e,targets:[t.y-l]}});for(f-=l,h-l>c&&(c=h-l);o;)for(d.forEach(function(t){var e=(Math.min.apply(f,t.targets)+Math.max.apply(f,t.targets))/2;t.pos=Math.min(Math.max(f,e-t.size/2),c-t.size)}),o=!1,a=d.length;a--;)if(a>0){var p=d[a-1],g=d[a];p.pos+p.size>g.pos&&(p.size+=g.size,p.targets=p.targets.concat(g.targets),p.pos+p.size>c&&(p.pos=c-p.size),d.splice(a,1),o=!0)}a=0,d.forEach(function(n){var r=l+e/2;n.targets.forEach(function(){t[a].y=n.pos+r,r+=e,a++})}),t.forEach(function(t){var e=t.r*t.r,n=Math.pow(Math.abs(t.y-r.y),2);if(e<n)t.x=r.x;else{var a=Math.sqrt(e-n);t.x=i?r.x+a:r.x-a}})}(t,i,s,a,e)}),c[0].concat(c[1])},n.lineToLabel=function(t,e){var n=this.get("coord"),a=n.getRadius(),o=this.getDefaultOffset(),s=t.orignAngle||t.angle,u=n.getCenter(),l=r(u,s,a+2.5),c=r(u,s,a+o/2),h=this.get("lineGroup");h||(h=this.addGroup({elCls:"x-line-group"}),this.set("lineGroup",h));var f=h.addShape("path",{attrs:i.mix({path:["M"+l.x,l.y+" Q"+c.x,c.y+" "+t.x,t.y].join(","),fill:null,stroke:t.color},e)});f.name="labelLine",f._id=t._id&&t._id.replace("glabel","glabelline"),f.set("coord",n)},n.getLabelRotate=function(t,e){var n;return e<0&&((n=180*t/Math.PI)>90&&(n-=180),n<-90&&(n+=180)),n/180*Math.PI},n.getLabelAlign=function(t){var e,n=this.get("coord").getCenter();return e=t.angle<=Math.PI/2&&t.x>=n.x?"left":"right",this.getDefaultOffset()<=0&&(e="right"===e?"left":"right"),e},n.getArcPoint=function(t){return t},n.getPointAngle=function(t){var e=this.get("coord"),n={x:i.isArray(t.x)?t.x[0]:t.x,y:t.y[0]};this.transLabelPoint(n);var r={x:i.isArray(t.x)?t.x[1]:t.x,y:t.y[1]};this.transLabelPoint(r);var a,s=o.getPointAngle(e,n);if(t.points&&t.points[0].y===t.points[1].y)a=s;else{var u=o.getPointAngle(e,r);s>=u&&(u+=2*Math.PI),a=s+(u-s)/2}return a},n.getCirclePoint=function(t,e){var n=this.get("coord"),i=n.getCenter(),a=n.getRadius()+e,o=r(i,t,a);return o.angle=t,o.r=a,o},e}(a);t.exports=u},function(t,e,n){function r(t){return t.alias||t.field}var i=n(0),a=n(3).defaultColor,o={_getIntervalSize:function(t){var e=null,n=this.get("type"),r=this.get("coord");if(r.isRect&&("interval"===n||"schema"===n)){e=this.getSize(t._origin);var a=r.isTransposed?"y":"x";i.isArray(t[a])&&(e=e<Math.abs(t[a][1]-t[a][0])?null:e)}return e},_snapEqual:function(t,e,n){return t=n.translate(t),e=n.translate(e),n.isCategory?t===e:i.snapEqual(t,e)},_getScaleValueByPoint:function(t){var e=0,n=this.get("coord"),r=this.getXScale(),i=n.invert(t).x;return this.isInCircle()&&i>(1+r.rangeMax())/2&&(i=r.rangeMin()),e=r.invert(i),r.isCategory&&(e=r.translate(e)),e},_getOriginByPoint:function(t){var e=this.getXScale(),n=this.getYScale(),r=e.field,i=n.field,a=this.get("coord").invert(t),o=e.invert(a.x),s=n.invert(a.y),u={};return u[r]=o,u[i]=s,u},_getScale:function(t){var e=this.get("scales"),n=null;return i.each(e,function(e){if(e.field===t)return n=e,!1}),n},_getTipValueScale:function(){var t,e=this.getAttrsForLegend();i.each(e,function(e){var n=e.getScale(e.type);if(n.isLinear)return t=n,!1});var n=this.getXScale(),r=this.getYScale();return!t&&r&&"..y"===r.field?n:t||r||n},_getTipTitleScale:function(t){if(t)return this._getScale(t);var e,n=this.getAttr("position").getFields();return i.each(n,function(t){if(-1===t.indexOf(".."))return e=t,!1}),this._getScale(e)},_filterValue:function(t,e){var n=this.get("coord"),r=this.getYScale(),a=r.field,o=n.invert(e).y;o=r.invert(o);var s=t[t.length-1];return i.each(t,function(t){var e=t._origin;if(e[a][0]<=o&&e[a][1]>=o)return s=t,!1}),s},getXDistance:function(){var t=this.get("xDistance");if(!t){var e=this.getXScale();if(e.isCategory)t=1;else{var n=e.values,r=e.translate(n[0]),a=r;i.each(n,function(t){(t=e.translate(t))<r&&(r=t),t>a&&(a=t)}),t=(a-r)/(n.length-1)}this.set("xDistance",t)}return t},findPoint:function(t,e){var n=this,r=n.get("type"),a=n.getXScale(),o=n.getYScale(),s=a.field,u=o.field,l=null;if(i.indexOf(["heatmap","point"],r)>-1){var c=n.get("coord").invert(t),h=a.invert(c.x),f=o.invert(c.y),d=1/0;return i.each(e,function(t){var e=Math.pow(t._origin[s]-h,2)+Math.pow(t._origin[u]-f,2);e<d&&(d=e,l=t)}),l}var p=e[0],g=e[e.length-1];if(!p)return l;var v=n._getScaleValueByPoint(t),m=p._origin[s],y=g._origin[s],_=o.isLinear&&i.isArray(p._origin[u]);if(i.isArray(m))i.each(e,function(t){var e=t._origin;if(a.translate(e[s][0])<=v&&a.translate(e[s][1])>=v){if(!_)return l=t,!1;i.isArray(l)||(l=[]),l.push(t)}}),i.isArray(l)&&(l=this._filterValue(l,t));else{var b;if(a.isLinear||"timeCat"===a.type){if((v>a.translate(y)||v<a.translate(m))&&(v>a.max||v<a.min))return null;for(var x,w=0,S=e.length-1;w<=S;){x=Math.floor((w+S)/2);var T=e[x]._origin[s];if(n._snapEqual(T,v,a))return e[x];a.translate(T)<=a.translate(v)?(w=x+1,g=e[x],b=e[x+1]):(0===S&&(g=e[0]),S=x-1)}}else i.each(e,function(t,r){var o=t._origin;if(n._snapEqual(o[s],v,a)){if(!_)return l=t,!1;i.isArray(l)||(l=[]),l.push(t)}else a.translate(o[s])<=v&&(g=t,b=e[r+1])}),i.isArray(l)&&(l=this._filterValue(l,t));g&&b&&Math.abs(a.translate(g._origin[s])-v)>Math.abs(a.translate(b._origin[s])-v)&&(g=b)}var O=n.getXDistance();return!l&&Math.abs(a.translate(g._origin[s])-v)<=O/2&&(l=g),l},getTipTitle:function(t,e){var n="",r=this._getTipTitleScale(e);if(r)n=r.getText(t[r.field]);else if("heatmap"===this.get("type")){var i=this.getXScale(),a=this.getYScale();n="( "+i.getText(t[i.field])+", "+a.getText(t[a.field])+" )"}return n},getTipValue:function(t,e){var n,r=t.key;if(i.isArray(n=t[e.field])){var a=[];i.each(n,function(t){a.push(e.getText(t))}),n=a.join("-")}else n=e.getText(n,r);return n},getTipName:function(t){var e,n=this._getGroupScales();return n.length&&i.each(n,function(t){return e=t,!1}),e?e.getText(t[e.field]):r(this._getTipValueScale())},getTipItems:function(t,e){function n(e,n,r){if(!i.isNil(n)&&""!==n){var o={title:c,point:t,name:e||c,value:n,color:t.color||a,marker:!0};o.size=u._getIntervalSize(t),f.push(i.mix({},o,r))}}var o,s,u=this,l=t._origin,c=u.getTipTitle(l,e),h=u.get("tooltipCfg"),f=[];if(h){var d=h.fields,p=h.cfg,g=[];if(i.each(d,function(t){g.push(l[t])}),p){i.isFunction(p)&&(p=p.apply(null,g));var v=i.mix({},{point:t,title:c,color:t.color||a,marker:!0},p);v.size=u._getIntervalSize(t),f.push(v)}else i.each(d,function(t){if(!i.isNil(l[t])){var e=u._getScale(t);o=r(e),s=e.getText(l[t]),n(o,s)}})}else{var m=u._getTipValueScale();i.isNil(l[m.field])||(s=u.getTipValue(l,m),n(o=u.getTipName(l),s))}return f},isShareTooltip:function(){var t,e=this.get("shareTooltip"),n=this.get("type"),r=this.get("view");if(t=r.get("parent")?r.get("parent").get("options"):r.get("options"),"interval"===n){var a=this.get("coord"),o=a.type;("theta"===o||"polar"===o&&a.isTransposed)&&(e=!1)}else this.getYScale()&&!i.inArray(["contour","point","polygon","edge"],n)||(e=!1);return t.tooltip&&i.isBoolean(t.tooltip.shared)&&(e=t.tooltip.shared),e}};t.exports=o},function(t,e,n){function r(t,e){if(!t)return!0;if(t.length!==e.length)return!0;var n=!1;return a.each(e,function(e,r){if(!function(t,e){if(a.isNil(t)||a.isNil(e))return!1;var n=t.get("origin"),r=e.get("origin");return a.isEqual(n,r)}(e,t[r]))return n=!0,!1}),n}function i(t,e){var n={};return a.each(t,function(t,r){var i=e.attr(r);a.isArray(i)&&(i=a.cloneDeep(i)),n[r]=i}),n}var a=n(0),o={_isAllowActive:function(){var t=this.get("allowActive");if(!a.isNil(t))return t;var e=this.get("view"),n=this.isShareTooltip();return!1===e.get("options").tooltip||!n},_onMouseenter:function(t){var e=t.shape,n=this.get("shapeContainer");e&&n.contain(e)&&this._isAllowActive()&&this.setShapesActived(e)},_onMouseleave:function(){var t=this.get("view").get("canvas");this.get("activeShapes")&&(this.clearActivedShapes(),t.draw())},_bindActiveAction:function(){var t=this.get("view"),e=this.get("type");t.on(e+":mouseenter",a.wrapBehavior(this,"_onMouseenter")),t.on(e+":mouseleave",a.wrapBehavior(this,"_onMouseleave"))},_offActiveAction:function(){var t=this.get("view"),e=this.get("type");t.off(e+":mouseenter",a.getWrapBehavior(this,"_onMouseenter")),t.off(e+":mouseleave",a.getWrapBehavior(this,"_onMouseleave"))},_setActiveShape:function(t){var e=this.get("activedOptions")||{},n=t.get("origin"),r=n.shape||this.getDefaultValue("shape");a.isArray(r)&&(r=r[0]);var o=this.get("shapeFactory"),s=a.mix({},t.attr(),{origin:n}),u=o.getActiveCfg(r,s);e.style&&a.mix(u,e.style);var l=i(u,t);t.setSilent("_originAttrs",l),e.animate?t.animate(u,300):t.attr(u),t.set("zIndex",1)},setShapesActived:function(t){var e=this;a.isArray(t)||(t=[t]);var n=e.get("activeShapes");if(r(n,t)){var i=e.get("view").get("canvas"),o=e.get("shapeContainer"),s=e.get("activedOptions");s&&s.highlight?(a.each(t,function(t){t.get("animating")&&t.stopAnimate()}),e.highlightShapes(t)):(n&&e.clearActivedShapes(),a.each(t,function(t){t.get("animating")&&t.stopAnimate(),t.get("visible")&&!t.get("selected")&&e._setActiveShape(t)})),e.set("activeShapes",t),o.sort(),i.draw()}},clearActivedShapes:function(){var t=this.get("shapeContainer"),e=this.get("activedOptions"),n=e&&e.animate;if(t&&!t.get("destroyed")){var r=this.get("activeShapes");if(a.each(r,function(t){if(!t.get("selected")){var e=t.get("_originAttrs");n?(t.stopAnimate(),t.animate(e,300)):t.attr(e),t.setZIndex(0),t.set("_originAttrs",null)}}),this.get("preHighlightShapes")){var i=t.get("children");a.each(i,function(t){if(!t.get("selected")){var e=t.get("_originAttrs");e&&(n?(t.stopAnimate(),t.animate(e,300)):t.attr(e),t.setZIndex(0),t.set("_originAttrs",null))}})}t.get("children").sort(function(t,e){return t._INDEX-e._INDEX}),this.set("activeShapes",null),this.set("preHighlightShapes",null)}},getGroupShapesByPoint:function(t){var e=[];if(this.get("shapeContainer")){var n=this.getXScale().field,r=this.getShapes(),i=this._getOriginByPoint(t);a.each(r,function(t){var r=t.get("origin");t.get("visible")&&r&&r._origin[n]===i[n]&&e.push(t)})}return e},getSingleShapeByPoint:function(t){var e,n=this.get("shapeContainer"),r=n.get("canvas").get("pixelRatio");if(n&&(e=n.getShape(t.x*r,t.y*r)),e&&e.get("origin"))return e},highlightShapes:function(t,e){a.isArray(t)||(t=[t]);var n=this.get("activeShapes");if(r(n,t)){n&&this.clearActivedShapes();var o=this.getShapes(),s=this.get("activedOptions"),u=s&&s.animate,l=s&&s.style;a.each(o,function(n){var r={};n.stopAnimate(),-1!==a.indexOf(t,n)?(a.mix(r,l,e),n.setZIndex(1)):(a.mix(r,{fillOpacity:.3,opacity:.3}),n.setZIndex(0));var o=i(r,n);n.setSilent("_originAttrs",o),u?n.animate(r,300):n.attr(r)}),this.set("preHighlightShapes",t),this.set("activeShapes",t)}}};t.exports=o},function(t,e,n){function r(t,e){if(i.isNil(t)||i.isNil(e))return!1;var n=t.get("origin"),r=e.get("origin");return i.isEqual(n,r)}var i=n(0),a={_isAllowSelect:function(){var t=this.get("allowSelect");if(!i.isNil(t))return t;var e=this.get("type"),n=this.get("coord");return"interval"===e&&"theta"===(n&&n.type)},_onClick:function(t){if(this._isAllowSelect()){this.clearActivedShapes();var e=t.shape,n=this.get("shapeContainer");e&&!e.get("animating")&&n.contain(e)&&this.setShapeSelected(e)}},_bindSelectedAction:function(){var t=this.get("view"),e=this.get("type");t.on(e+":click",i.wrapBehavior(this,"_onClick"))},_offSelectedAction:function(){var t=this.get("view"),e=this.get("type");t.off(e+":click",i.getWrapBehavior(this,"_onClick"))},_setShapeStatus:function(t,e){var n=this.get("view"),r=this.get("selectedOptions")||{},a=!1!==r.animate,o=n.get("canvas");t.set("selected",e);var s=t.get("origin");if(e){var u=s.shape||this.getDefaultValue("shape");i.isArray(u)&&(u=u[0]);var l=this.get("shapeFactory"),c=i.mix({geom:this,point:s},r),h=l.getSelectedCfg(u,c);i.mix(h,c.style),t.get("_originAttrs")||(t.get("animating")&&t.stopAnimate(),t.set("_originAttrs",function(t,e){var n={};return i.each(h,function(t,r){"transform"===r&&(r="matrix");var a=e.attr(r);i.isArray(a)&&(a=i.cloneDeep(a)),n[r]=a}),n}(0,t))),a?t.animate(h,300):(t.attr(h),o.draw())}else{var f=t.get("_originAttrs");t.set("_originAttrs",null),a?t.animate(f,300):(t.attr(f),o.draw())}},setShapeSelected:function(t){var e=this._getSelectedShapes(),n=this.get("selectedOptions")||{},a=!1!==n.cancelable;if("multiple"===n.mode)-1===i.indexOf(e,t)?(e.push(t),this._setShapeStatus(t,!0)):a&&(i.Array.remove(e,t),this._setShapeStatus(t,!1));else{var o=e[0];a&&(t=r(o,t)?null:t),r(o,t)||(o&&this._setShapeStatus(o,!1),t&&this._setShapeStatus(t,!0))}},clearSelected:function(){var t=this,e=t.get("shapeContainer");if(e&&!e.get("destroyed")){var n=t._getSelectedShapes();i.each(n,function(e){t._setShapeStatus(e,!1),e.set("_originAttrs",null)})}},setSelected:function(t){var e=this,n=e.getShapes();return i.each(n,function(n){var r=n.get("origin");r&&r._origin===t&&e.setShapeSelected(n)}),this},_getSelectedShapes:function(){var t=this.getShapes(),e=[];return i.each(t,function(t){t.get("selected")&&e.push(t)}),this.set("selectedShapes",e),e}};t.exports=a},function(t,e,n){var r=n(0);t.exports=function(t){return r.isArray(t)?t:r.isString(t)?t.split("*"):[t]}},function(t,e,n){var r=n(60),i=n(0),a=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,o=function(){function t(t){this.defs={},this.viewTheme={scales:{}},i.assign(this,t)}var e=t.prototype;return e._getDef=function(t){var e=this.defs,n=this.viewTheme,r=null;return(n.scales[t]||e[t])&&(r=i.mix({},n.scales[t]),i.each(e[t],function(t,e){i.isNil(t)?delete r[e]:r[e]=t})),r},e._getDefaultType=function(t,e){var n="linear",r=i.Array.firstValue(e,t);return i.isArray(r)&&(r=r[0]),a.test(r)?n="time":i.isString(r)&&(n="cat"),n},e._getScaleCfg=function(t,e,n){var a={field:e},o=i.Array.values(n,e);if(a.values=o,!r.isCategory(t)&&"time"!==t){var s=i.Array.getRange(o);a.min=s.min,a.max=s.max,a.nice=!0}return"time"===t&&(a.nice=!1),a},e.createScale=function(t,e){var n,a=this._getDef(t);if(!e||!e.length)return a&&a.type?r[a.type](a):r.identity({value:t,field:t.toString(),values:[t]});var o=i.Array.firstValue(e,t);if(i.isNumber(t)||i.isNil(o)&&!a)n=r.identity({value:t,field:t.toString(),values:[t]});else{var s;a&&(s=a.type),s=s||this._getDefaultType(t,e);var u=this._getScaleCfg(s,t,e);a&&i.mix(u,a),n=r[s](u)}return n},t}();t.exports=o},function(t,e,n){var r=n(0),i=n(309),a=function(){function t(t){this.type="rect",this.actions=[],this.cfg={},r.mix(this,t),this.option=t||{}}var e=t.prototype;return e.reset=function(t){return this.actions=t.actions||[],this.type=t.type,this.cfg=t.cfg,this.option.actions=this.actions,this.option.type=this.type,this.option.cfg=this.cfg,this},e._execActions=function(t){r.each(this.actions,function(e){t[e[0]](e[1],e[2])})},e.hasAction=function(t){var e=!1;return r.each(this.actions,function(n){if(t===n[0])return e=!0,!1}),e},e.createCoord=function(t,e){var n,a,o=this.type,s=r.mix({start:t,end:e},this.cfg);return"theta"===o?(n=i.Polar,this.hasAction("transpose")||this.transpose(),(a=new n(s)).type=o):a=new(n=i[r.upperFirst(o||"")]||i.Rect)(s),this._execActions(a),a},e.rotate=function(t){return t=t*Math.PI/180,this.actions.push(["rotate",t]),this},e.reflect=function(t){return this.actions.push(["reflect",t]),this},e.scale=function(t,e){return this.actions.push(["scale",t,e]),this},e.transpose=function(){return this.actions.push(["transpose"]),this},t}();t.exports=a},function(t,e,n){"use strict";var r=n(37);r.Cartesian=n(310),r.Rect=r.Cartesian,r.Polar=n(311),r.Helix=n(312),t.exports=r},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=n(12),c=n(37),h=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,u(e).call(this,t)))._init(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,c),a(e,[{key:"getDefaultCfg",value:function(){var t=s(u(e.prototype),"getDefaultCfg",this).call(this);return l({},t,{start:{x:0,y:0},end:{x:0,y:0},type:"cartesian",isRect:!0})}}]),a(e,[{key:"_init",value:function(){var t=this.start,e=this.end,n={start:t.y,end:e.y};this.x={start:t.x,end:e.x},this.y=n}},{key:"convertPoint",value:function(t){var e,n;return this.isTransposed?(e=t.y,n=t.x):(e=t.x,n=t.y),{x:this.convertDim(e,"x"),y:this.convertDim(n,"y")}}},{key:"invertPoint",value:function(t){var e=this.invertDim(t.x,"x"),n=this.invertDim(t.y,"y");return this.isTransposed?{x:n,y:e}:{x:e,y:n}}}]),e}();t.exports=h},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=n(31),c=n(42),h=n(12),f=n(37),d=l.mat3,p=l.vec2,g=l.vec3,v=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,u(e).call(this,t)))._init(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,f),a(e,[{key:"getDefaultCfg",value:function(){var t=s(u(e.prototype),"getDefaultCfg",this).call(this);return h({},t,{startAngle:-Math.PI/2,endAngle:3*Math.PI/2,innerRadius:0,type:"polar",isPolar:!0})}}]),a(e,[{key:"_init",value:function(){for(var t=this.radius,e=this.innerRadius,n=this.center,r=this.startAngle,i=this.endAngle;i<r;)i+=2*Math.PI;this.endAngle=i;var a,o,s=this.getOneBox(),u=s.maxX-s.minX,l=s.maxY-s.minY,c=Math.abs(s.minX)/u,h=Math.abs(s.minY)/l,f=this.width,d=this.height;o=d/l>f/u?{x:n.x-(.5-c)*f,y:n.y-(.5-h)*(a=f/u)*l}:{x:n.x-(.5-c)*(a=d/l)*u,y:n.y-(.5-h)*d},t?t>0&&t<=1?t*=a:(t<=0||t>a)&&(t=a):t=a;var p={start:e*t,end:t};this.x={start:r,end:i},this.y=p,this.radius=t,this.circleCentre=o,this.center=o}},{key:"getCenter",value:function(){return this.circleCentre}},{key:"getOneBox",value:function(){var t=this.startAngle,e=this.endAngle;if(Math.abs(e-t)>=2*Math.PI)return{minX:-1,maxX:1,minY:-1,maxY:1};for(var n=[0,Math.cos(t),Math.cos(e)],r=[0,Math.sin(t),Math.sin(e)],i=Math.min(t,e);i<Math.max(t,e);i+=Math.PI/18)n.push(Math.cos(i)),r.push(Math.sin(i));return{minX:Math.min.apply(Math,n),maxX:Math.max.apply(Math,n),minY:Math.min.apply(Math,r),maxY:Math.max.apply(Math,r)}}},{key:"getRadius",value:function(){return this.radius}},{key:"convertPoint",value:function(t){var e=this.getCenter(),n=this.isTransposed?t.y:t.x,r=this.isTransposed?t.x:t.y;return n=this.convertDim(n,"x"),r=this.convertDim(r,"y"),{x:e.x+Math.cos(n)*r,y:e.y+Math.sin(n)*r}}},{key:"invertPoint",value:function(t){var e=this.getCenter(),n=[t.x-e.x,t.y-e.y],r=this.x,i=[1,0,0,0,1,0,0,0,1];d.rotate(i,i,r.start);var a=[1,0,0];g.transformMat3(a,a,i);var o=p.angleTo(a=[a[0],a[1]],n,r.end<r.start);c(o,2*Math.PI)&&(o=0);var s=p.length(n),u=o/(r.end-r.start);u=r.end-r.start>0?u:-u;var l=this.invertDim(s,"y"),h={};return h.x=this.isTransposed?l:u,h.y=this.isTransposed?u:l,h}}]),e}();t.exports=v},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=n(31),c=n(42),h=n(12),f=n(37),d=l.vec2,p=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,u(e).call(this,t)))._init(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,f),a(e,[{key:"getDefaultCfg",value:function(){var t=s(u(e.prototype),"getDefaultCfg",this).call(this);return h({},t,{startAngle:1.25*Math.PI,endAngle:7.25*Math.PI,innerRadius:0,type:"helix",isHelix:!0})}}]),a(e,[{key:"_init",value:function(){var t=this.radius,e=this.innerRadius,n=this.startAngle,r=this.endAngle,i=(r-n)/(2*Math.PI)+1,a=Math.min(this.width,this.height)/2;t&&t>=0&&t<=1&&(a*=t);var o=Math.floor(a*(1-e)/i),s=o/(2*Math.PI),u={start:n,end:r},l={start:e*a,end:e*a+.99*o};this.a=s,this.d=o,this.x=u,this.y=l}},{key:"getCenter",value:function(){return this.center}},{key:"convertPoint",value:function(t){var e,n,r=this.a,i=this.center;this.isTransposed?(e=t.y,n=t.x):(e=t.x,n=t.y);var a=this.convertDim(e,"x"),o=r*a,s=this.convertDim(n,"y");return{x:i.x+Math.cos(a)*(o+s),y:i.y+Math.sin(a)*(o+s)}}},{key:"invertPoint",value:function(t){var e=this.center,n=this.a,r=this.d+this.y.start,i=d.subtract([],[t.x,t.y],[e.x,e.y]),a=d.angleTo(i,[1,0],!0),o=a*n;d.length(i)<o&&(o=d.length(i));var s=n*(a=2*Math.floor((d.length(i)-o)/r)*Math.PI+a),u=d.length(i)-s;u=c(u,0)?0:u;var l=this.invertDim(a,"x"),h=this.invertDim(u,"y");l=c(l,0)?0:l,h=c(h,0)?0:h;var f={};return f.x=this.isTransposed?h:l,f.y=this.isTransposed?l:h,f}}]),e}();t.exports=p},function(t,e,n){var r=n(0),i=n(314),a=r.MatrixUtil.vec2,o=function(){function t(t){this.visible=!0,this.container=null,this.coord=null,this.options=null,this.axes=[],r.mix(this,t)}var e=t.prototype;return e._isHide=function(t){var e=this.options;return!(!e||!1!==e[t])},e._getMiddleValue=function(t,e,n,r){if(0===t&&!r)return 0;if(1===t)return 1;var i=e[n+1].value;return r||1!==i?(t+i)/2:1},e._getLineRange=function(t,e,n,r){var i,a,o,s=e.field,u=this.options,l="";return u[s]&&u[s].position&&(l=u[s].position),"x"===n?(i={x:0,y:"top"===l?1:0},a={x:1,y:"top"===l?1:0},o=!1):(r?(i={x:"left"===l?0:1,y:0},a={x:"left"===l?0:1,y:1}):(i={x:"right"===l?1:0,y:0},a={x:"right"===l?1:0,y:1}),o=!0),{start:i=t.convert(i),end:a=t.convert(a),isVertical:o}},e._getLineCfg=function(t,e,n,r){var i=this._getLineRange(t,e,n,r),a=i.isVertical,o=i.start,s=t.center;return t.isTransposed&&(a=!a),{isVertical:a,factor:a&&o.x>s.x||!a&&o.y>s.y?1:-1,start:o,end:i.end}},e._getCircleCfg=function(t){var e,n={},r=t.x,i=t.y,o=i.start>i.end;e=t.convert(e=t.isTransposed?{x:o?0:1,y:0}:{x:0,y:o?0:1});var s,u=t.circleCentre,l=[e.x-u.x,e.y-u.y],c=[1,0],h=(s=e.y>u.y?a.angle(l,c):-1*a.angle(l,c))+(r.end-r.start);return n.startAngle=s,n.endAngle=h,n.center=u,n.radius=Math.sqrt(Math.pow(e.x-u.x,2)+Math.pow(e.y-u.y,2)),n.inner=t.innerRadius||0,n},e._getRadiusCfg=function(t){var e,n;return t.isTransposed?(e={x:0,y:0},n={x:1,y:0}):(e={x:0,y:0},n={x:0,y:1}),{factor:t.x.start<0?-1:1,start:t.convert(e),end:t.convert(n)}},e._getAxisPosition=function(t,e,n,r){var i="",a=this.options;return a[r]&&a[r].position?i=a[r].position:t.isRect?"x"===e?i="bottom":"y"===e&&(i=n?"right":"left"):i="helix"===t.type?"helix":"x"===e?t.isTransposed?"radius":"circle":t.isTransposed?"circle":"radius",i},e._getAxisDefaultCfg=function(t,e,n,i){var a={},o=this.options,s=e.field;return(a=r.deepMix({},this.viewTheme.axis[i],a,o[s])).title&&r.deepMix(a,{title:{text:e.alias||s}}),a.ticks=e.getTicks(),t.isPolar&&!e.isCategory&&"x"===n&&Math.abs(t.endAngle-t.startAngle)===2*Math.PI&&a.ticks.pop(),a.coord=t,a.label&&r.isNil(a.label.autoRotate)&&(a.label.autoRotate=!0),o.hasOwnProperty("xField")&&o.xField.hasOwnProperty("grid")&&"left"===a.position&&r.deepMix(a,o.xField),a},e._getAxisCfg=function(t,e,n,i,a,o){void 0===a&&(a="");var s=this,u=s._getAxisPosition(t,i,a,e.field),l=s._getAxisDefaultCfg(t,e,i,u);if(!r.isEmpty(l.grid)&&n){var c=[],h=[],f=function(t){var e=[];if(t.length>0){var n=(e=t.slice(0))[0],r=e[e.length-1];0!==n.value&&e.unshift({value:0}),1!==r.value&&e.push({value:1})}return e}(n.getTicks());if(f.length){var d=function(t,e,n){var r=[];return t.length<1?r:(t.length>=2&&e&&"center"===l.grid.align&&r.push({text:"",tickValue:"",value:0}),0!==t[0].value&&r.push({text:"",tickValue:"",value:0}),1!==(r=r.concat(t))[r.length-1].value&&r.push({text:"",tickValue:"",value:1}),r)}(l.ticks,e.isLinear);r.each(d,function(n,u){h.push(n.tickValue);var p=[],g=n.value;if("center"===l.grid.align&&(g=s._getMiddleValue(g,d,u,e.isLinear)),!r.isNil(g)){var v=t.x,m=t.y;r.each(f,function(e){var n="x"===i?e.value:g,r=t.convert({x:"x"===i?g:e.value,y:n});if(t.isPolar){var a=t.circleCentre;m.start>m.end&&(n=1-n),r.flag=v.start>v.end?0:1,r.radius=Math.sqrt(Math.pow(r.x-a.x,2)+Math.pow(r.y-a.y,2))}p.push(r)}),c.push({_id:o+"-"+i+a+"-grid-"+n.tickValue,points:p})}})}l.grid.items=c,l.grid.tickValues=h}return l.type=e.type,l},e._getHelixCfg=function(t){for(var e={},n=t.a,r=t.startAngle,i=t.endAngle,a=[],o=0;o<=100;o++){var s=t.convert({x:o/100,y:0});a.push(s.x),a.push(s.y)}var u=t.convert({x:0,y:0});return e.a=n,e.startAngle=r,e.endAngle=i,e.crp=a,e.axisStart=u,e.center=t.center,e.inner=t.y.start,e},e._drawAxis=function(t,e,n,a,o,s,u){var l,c,h=this.container;"cartesian"===t.type?(l=i.Line,c=this._getLineCfg(t,e,a,u)):"helix"===t.type&&"x"===a?(l=i.Helix,c=this._getHelixCfg(t)):"x"===a?(l=i.Circle,c=this._getCircleCfg(t)):(l=i.Line,c=this._getRadiusCfg(t));var f=this._getAxisCfg(t,e,n,a,u,o);f=r.mix({},f,c),"y"===a&&s&&"circle"===s.get("type")&&(f.circle=s),f._id=o+"-"+a,r.isNil(u)||(f._id=o+"-"+a+u);var d=h.addGroup(l,f);return this.axes.push(d),d},e.createAxis=function(t,e,n){var i,a=this,o=this.coord,s=o.type;"theta"===s||"polar"===s&&o.isTransposed||(t&&!a._isHide(t.field)&&(i=a._drawAxis(o,t,e[0],"x",n)),r.isEmpty(e)||"helix"===s||r.each(e,function(e,r){a._isHide(e.field)||a._drawAxis(o,e,t,"y",n,i,r)}))},e.changeVisible=function(t){r.each(this.axes,function(e){e.set("visible",t)})},e.clear=function(){r.each(this.axes,function(t){t.remove()}),this.axes=[]},t}();t.exports=o},function(t,e,n){t.exports={Line:n(315),Circle:n(317),Helix:n(318),PolyLine:n(319)}},function(t,e,n){var r=n(38),i=n(0),a=i.MatrixUtil.vec2,o=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return i.mix({},e,{x:null,y:null,line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},isVertical:!1,start:null,end:null})},n._getAvgLabelLength=function(t){var e=t.get("children");return e[1].attr("x")-e[0].attr("x")},n.getSideVector=function(t){var e=this.get("factor"),n=this.get("isVertical"),r=this.get("start"),i=this.get("end"),o=this.getAxisVector(),s=a.normalize([],o),u=!1;(n&&r.y<i.y||!n&&r.x>i.x)&&(u=!0);var l=a.vertical([],s,u);return a.scale([],l,t*e)},n.getAxisVector=function(){var t=this.get("start"),e=this.get("end");return[e.x-t.x,e.y-t.y]},n.getLinePath=function(){var t=this.get("start"),e=this.get("end"),n=[];return n.push(["M",t.x,t.y]),n.push(["L",e.x,e.y]),n},n.getTickEnd=function(t,e){var n=this.getSideVector(e);return{x:t.x+n[0],y:t.y+n[1]}},n.getTickPoint=function(t){var e=this.get("start"),n=this.get("end");return{x:e.x+(n.x-e.x)*t,y:e.y+(n.y-e.y)*t}},n.renderTitle=function(){var t=this.get("title"),e=this.getTickPoint(.5),n=t.offset;if(i.isNil(n)){n=20;var r=this.get("labelsGroup");r&&(n+=this.getMaxLabelWidth(r)+(this.get("label").offset||this.get("_labelOffset")))}var o=t.textStyle,s=i.mix({},o);if(t.text){var u=this.getAxisVector();if(t.autoRotate&&i.isNil(o.rotate)){var l=0;i.snapEqual(u[1],0)||(l=a.angleTo([u[0],u[1]],[1,0],!0)),s.rotate=l*(180/Math.PI)}else i.isNil(o.rotate)||(s.rotate=o.rotate/180*Math.PI);var c,h=this.getSideVector(n),f=t.position;c="start"===f?{x:this.get("start").x+h[0],y:this.get("start").y+h[1]}:"end"===f?{x:this.get("end").x+h[0],y:this.get("end").y+h[1]}:{x:e.x+h[0],y:e.y+h[1]},s.x=c.x,s.y=c.y,s.text=t.text;var d=this.addShape("Text",{zIndex:2,attrs:s});d.name="axis-title",this.get("appendInfo")&&d.setSilent("appendInfo",this.get("appendInfo"))}},n.autoRotateLabels=function(){var t=this.get("labelsGroup"),e=this.get("title");if(t){var n=this.get("label").offset,r=e?e.offset:48;if(r<0)return;var a,o,s=this.getAxisVector();if(i.snapEqual(s[0],0)&&e&&e.text)(o=this.getMaxLabelWidth(t))>r-n-12&&(a=-1*Math.acos((r-n-12)/o));else if(i.snapEqual(s[1],0)&&t.getCount()>1){var u=Math.abs(this._getAvgLabelLength(t));(o=this.getMaxLabelWidth(t))>u&&(a=Math.asin(1.25*(r-n-12)/o))}if(a){var l=this.get("factor");i.each(t.get("children"),function(t){t.rotateAtStart(a),i.snapEqual(s[1],0)&&t.attr("textAlign",l>0?"left":"right")})}}},e}(r);t.exports=o},function(t,e,n){var r=n(6).Group,i=n(0),a=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){return{zIndex:1,type:"line",lineStyle:null,items:null,alternateColor:null,matrix:null,hideFirstLine:!1,hideLastLine:!1,hightLightZero:!0,zeroLineStyle:{stroke:"#000",lineDash:[0,0]}}},n._renderUI=function(){t.prototype._renderUI.call(this),this._drawLines()},n._drawLines=function(){var t=this.get("lineStyle"),e=this.get("items");e&&e.length&&(this._precessItems(e),this._drawGridLines(e,t))},n._precessItems=function(t){var e,n=this;i.each(t,function(t,r){e&&n.get("alternateColor")&&n._drawAlternativeBg(t,e,r),e=t})},n._drawGridLines=function(t,e){var n,r,a,o,s=this,u=this.get("type"),l=t.length;i.each(t,"line"===u||"polygon"===u?function(t,c){s.get("hideFirstLine")&&0===c||s.get("hideLastLine")&&c===l-1||(o=t.points,r=[],"line"===u?(r.push(["M",o[0].x,o[0].y]),r.push(["L",o[o.length-1].x,o[o.length-1].y])):i.each(o,function(t,e){r.push(0===e?["M",t.x,t.y]:["L",t.x,t.y])}),a=s._drawZeroLine(u,c)?i.mix({},s.get("zeroLineStyle"),{path:r}):i.mix({},e,{path:r}),(n=s.addShape("path",{attrs:a})).name="axis-grid",n._id=t._id,n.set("coord",s.get("coord")),s.get("appendInfo")&&n.setSilent("appendInfo",s.get("appendInfo")))}:function(t,u){s.get("hideFirstLine")&&0===u||s.get("hideLastLine")&&u===l-1||(r=[],i.each(o=t.points,function(t,e){var n=t.radius;r.push(0===e?["M",t.x,t.y]:["A",n,n,0,0,t.flag,t.x,t.y])}),a=i.mix({},e,{path:r}),(n=s.addShape("path",{attrs:a})).name="axis-grid",n._id=t._id,n.set("coord",s.get("coord")),s.get("appendInfo")&&n.setSilent("appendInfo",s.get("appendInfo")))})},n._drawZeroLine=function(t,e){var n=this.get("tickValues");return!("line"!==t||!n||0!==n[e]||!this.get("hightLightZero"))},n._drawAlternativeBg=function(t,e,n){var r,a,o,s=this.get("alternateColor");i.isString(s)?a=s:i.isArray(s)&&(a=s[0],o=s[1]),n%2==0?o&&(r=this._getBackItem(e.points,t.points,o)):a&&(r=this._getBackItem(e.points,t.points,a));var u=this.addShape("Path",{attrs:r});u.name="axis-grid-rect",u._id=t._id&&t._id.replace("grid","grid-rect"),u.set("coord",this.get("coord")),this.get("appendInfo")&&u.setSilent("appendInfo",this.get("appendInfo"))},n._getBackItem=function(t,e,n){var r=[],a=this.get("type");if("line"===a)r.push(["M",t[0].x,t[0].y]),r.push(["L",t[t.length-1].x,t[t.length-1].y]),r.push(["L",e[e.length-1].x,e[e.length-1].y]),r.push(["L",e[0].x,e[0].y]),r.push(["Z"]);else if("polygon"===a){i.each(t,function(t,e){r.push(0===e?["M",t.x,t.y]:["L",t.x,t.y])});for(var o=e.length-1;o>=0;o--)r.push(["L",e[o].x,e[o].y]);r.push(["Z"])}else{var s=t[0].flag;i.each(t,function(t,e){var n=t.radius;r.push(0===e?["M",t.x,t.y]:["A",n,n,0,0,t.flag,t.x,t.y])});for(var u=e.length-1;u>=0;u--){var l=e[u],c=l.radius;r.push(u===e.length-1?["M",l.x,l.y]:["A",c,c,0,0,1===s?0:1,l.x,l.y])}}return{fill:n,path:r}},e}(r);t.exports=a},function(t,e,n){var r=n(0),i=n(38),a=r.MatrixUtil.vec2,o=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return r.mix({},e,{type:"circle",tickInterval:null,startAngle:-Math.PI/2,endAngle:3*Math.PI/2,line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},_labelOffset:5})},n.parseTick=function(t,e,n){return{text:t,value:e/n}},n._getCirclePoint=function(t,e){var n=this.get("center");return e=e||this.get("radius"),{x:n.x+Math.cos(t)*e,y:n.y+Math.sin(t)*e}},n.getTickPoint=function(t){var e=this.get("startAngle"),n=e+(this.get("endAngle")-e)*t;return this._getCirclePoint(n)},n.getSideVector=function(t,e){var n=this.get("center"),i=[e.x-n.x,e.y-n.y];if(!r.isNil(t)){var o=a.length(i);a.scale(i,i,t/o)}return i},n.getSidePoint=function(t,e){var n=this.getSideVector(e,t);return{x:t.x+n[0],y:t.y+n[1]}},n.getTickEnd=function(t,e){var n=this.get("tickLine");return this.getSidePoint(t,e=e||n.length)},n.getTextAnchor=function(t){var e;return r.snapEqual(t[0],0)?e="center":t[0]>0?e="left":t[0]<0&&(e="right"),e},n.getLinePath=function(){var t=this.get("center"),e=t.x,n=t.y,r=this.get("radius"),i=r,a=this.get("startAngle"),o=this.get("endAngle"),s=this.get("inner"),u=[];if(Math.abs(o-a)===2*Math.PI)u=[["M",e,n],["m",0,-i],["a",r,i,0,1,1,0,2*i],["a",r,i,0,1,1,0,-2*i],["z"]];else{var l=this._getCirclePoint(a),c=this._getCirclePoint(o),h=Math.abs(o-a)>Math.PI?1:0,f=a>o?0:1;if(s){var d=this.getSideVector(s*r,l),p=this.getSideVector(s*r,c),g={x:d[0]+e,y:d[1]+n},v={x:p[0]+e,y:p[1]+n};u=[["M",g.x,g.y],["L",l.x,l.y],["A",r,i,0,h,f,c.x,c.y],["L",v.x,v.y],["A",r*s,i*s,0,h,Math.abs(f-1),g.x,g.y]]}else u=[["M",e,n],["L",l.x,l.y],["A",r,i,0,h,f,c.x,c.y],["L",e,n]]}return u},n.addLabel=function(e,n,r){var i=this.get("label").offset||this.get("_labelOffset")||.001;n=this.getSidePoint(n,i),t.prototype.addLabel.call(this,e,n,r)},n.autoRotateLabels=function(){var t=this.get("ticks"),e=this.get("labelsGroup");if(e&&t.length>12){var n=this.get("radius"),i=this.get("startAngle"),a=this.get("endAngle")-i,o=Math.sin(a/(t.length-1)/2)*n*2,s=this.getMaxLabelWidth(e);r.each(e.get("children"),function(e,n){var r=t[n].value*a+i,u=r%(2*Math.PI);s<o?(u<=0&&(r+=Math.PI),u>Math.PI&&(r-=Math.PI),r-=Math.PI/2,e.attr("textAlign","center")):u>Math.PI/2?r-=Math.PI:u<Math.PI/2*-1&&(r+=Math.PI),e.rotateAtStart(r)})}},e}(i);t.exports=o},function(t,e,n){var r=n(0),i=n(38),a=r.PathUtil,o=r.MatrixUtil.vec2,s=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return r.mix({},e,{type:"helix",line:{lineWidth:1,stroke:"#C0D0E0"},tickLine:{lineWidth:1,stroke:"#C0D0E0",length:5},startAngle:1.25*Math.PI,endAngle:7.25*Math.PI,a:0,center:null,axisStart:null,crp:[]})},n.getLinePath=function(){var t=this.get("crp"),e=this.get("axisStart"),n=a.catmullRomToBezier(t);return n.unshift(["M",e.x,e.y]),n},n.getTickPoint=function(t){var e=this.get("startAngle"),n=e+(this.get("endAngle")-e)*t;return this._getHelixPoint(n)},n._getHelixPoint=function(t){var e=this.get("center"),n=this.get("a")*t+this.get("inner");return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},n.getSideVector=function(t,e){var n=this.get("center"),r=[e.x-n.x,e.y-n.y];if(t){var i=o.length(r);o.scale(r,r,t/i)}return r},n.getSidePoint=function(t,e){var n=this.getSideVector(e,t);return{x:t.x+n[0],y:t.y+n[1]}},n.getTickEnd=function(t,e){var n=this.get("tickLine");return this.getSidePoint(t,e=e||n.length)},e}(i);t.exports=s},function(t,e,n){var r=n(0),i=n(38),a=r.PathUtil,o=r.MatrixUtil.vec2,s=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return r.mix({},e,{type:"polyline"})},n.getLinePath=function(){var t=this.get("tickPoints"),e=this.get("start"),n=this.get("end"),i=[];i.push(e.x),i.push(e.y),r.each(t,function(t){i.push(t.x),i.push(t.y)}),i.push(n.x),i.push(n.y);var o=a.catmullRomToBezier(i);return o.unshift(["M",e.x,e.y]),o},n.getTickPoint=function(t,e){return this.get("tickPoints")[e]},n.getTickEnd=function(t,e,n){var r=this.get("tickLine"),i=this.getSideVector(e||r.length,t,n);return{x:t.x+i[0],y:t.y+i[1]}},n.getSideVector=function(t,e,n){var r;if(0===n){if((r=this.get("start")).x===e.x&&r.y===e.y)return[0,0]}else r=this.get("tickPoints")[n-1];var i=o.normalize([],[e.x-r.x,e.y-r.y]),a=o.vertical([],i,!1);return o.scale([],a,t)},e}(i);t.exports=s},function(t,e,n){var r=n(0),i=n(321),a=function(){function t(t){this.guides=[],this.options=[],this.xScales=null,this.yScales=null,this.view=null,this.viewTheme=null,this.frontGroup=null,this.backGroup=null,r.mix(this,t)}var e=t.prototype;return e._creatGuides=function(){var t=this,e=this.options,n=this.xScales,a=this.yScales,o=this.view,s=this.viewTheme;return this.backContainer&&o&&(this.backGroup=this.backContainer.addGroup({viewId:o.get("_id")})),this.frontContainer&&o&&(this.frontGroup=this.frontContainer.addGroup({viewId:o.get("_id")})),e.forEach(function(e){var u=e.type,l=r.deepMix({xScales:n,yScales:a,view:o,viewTheme:s},s?s.guide[u]:{},e);u=r.upperFirst(u);var c=new i[u](l);t.guides.push(c)}),t.guides},e.line=function(t){return void 0===t&&(t={}),this.options.push(r.mix({type:"line"},t)),this},e.arc=function(t){return void 0===t&&(t={}),this.options.push(r.mix({type:"arc"},t)),this},e.text=function(t){return void 0===t&&(t={}),this.options.push(r.mix({type:"text"},t)),this},e.image=function(t){return void 0===t&&(t={}),this.options.push(r.mix({type:"image"},t)),this},e.region=function(t){return void 0===t&&(t={}),this.options.push(r.mix({type:"region"},t)),this},e.regionFilter=function(t){return void 0===t&&(t={}),this.options.push(r.mix({type:"regionFilter"},t)),this},e.dataMarker=function(t){return void 0===t&&(t={}),this.options.push(r.mix({type:"dataMarker"},t)),this},e.dataRegion=function(t){return void 0===t&&(t={}),this.options.push(r.mix({type:"dataRegion"},t)),this},e.html=function(t){return void 0===t&&(t={}),this.options.push(r.mix({type:"html"},t)),this},e.render=function(t){var e=this,n=this,i=n._creatGuides(),a=n.backGroup||this.backContainer;r.each(i,function(r){r.top&&(a=n.frontGroup||e.frontContainer),r.render(t,a)})},e.clear=function(){this.options=[],this.reset()},e.changeVisible=function(t){r.each(this.guides,function(e){e.setVisible(t)})},e.reset=function(){r.each(this.guides,function(t){t.remove()}),this.guides=[],this.backGroup&&this.backGroup.remove(),this.frontGroup&&this.frontGroup.remove()},t}();t.exports=a},function(t,e,n){t.exports={Line:n(322),Text:n(133),Image:n(323),Region:n(324),RegionFilter:n(325),Html:n(326),Arc:n(327),DataMarker:n(134),DataRegion:n(328)}},function(t,e,n){var r=n(0),i=n(18),a=r.MatrixUtil.vec2,o=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return r.mix({},e,{type:"line",start:null,end:null,lineStyle:{stroke:"#000",lineWidth:1},text:{position:"end",autoRotate:!0,style:{fill:"#999",fontSize:12,fontWeight:500,fontFamily:"sans-serif"},content:null}})},n.render=function(t,e){var n=this.parsePoint(t,this.start),r=this.parsePoint(t,this.end),i=e.addGroup({viewId:e.get("viewId")});this._drawLines(n,r,i),this.text&&this.text.content&&this._drawText(n,r,i),this.el=i},n._drawLines=function(t,e,n){var i=n.addShape("Path",{attrs:r.mix({path:[["M",t.x,t.y],["L",e.x,e.y]]},this.lineStyle)});i.name="guide-line",this.appendInfo&&i.setSilent("appendInfo",this.appendInfo)},n._drawText=function(t,e,n){var i,o=this.text,s=o.position,u=o.style;((i="start"===s?0:"center"===s?.5:r.isString(s)&&-1!==s.indexOf("%")?parseInt(s,10)/100:r.isNumber(s)?s:1)>1||i<0)&&(i=1);var l={x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i};if(o.offsetX&&(l.x+=o.offsetX),o.offsetY&&(l.y+=o.offsetY),l.text=o.content,l=r.mix({},l,u),o.autoRotate&&r.isNil(u.rotate)){var c=a.angleTo([e.x-t.x,e.y-t.y],[1,0],1);l.rotate=c}else r.isNil(u.rotate)||(l.rotate=u.rotate*Math.PI/180);var h=n.addShape("Text",{attrs:l});h.name="guide-line-text",this.appendInfo&&h.setSilent("appendInfo",this.appendInfo)},e}(i);t.exports=o},function(t,e,n){var r=n(0),i=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return r.mix({},e,{type:"image",zIndex:1,start:null,end:null,src:null,offsetX:null,offsetY:null})},n.render=function(t,e){var n=this.parsePoint(t,this.start),r={x:n.x,y:n.y};if(r.img=this.src,this.end){var i=this.parsePoint(t,this.end);r.width=i.x-n.x,r.height=i.y-n.y}else this.width&&(r.width=this.width),this.height&&(r.height=this.height);this.offsetX&&(r.x+=this.offsetX),this.offsetY&&(r.y+=this.offsetY);var a=e.addShape("Image",{zIndex:1,attrs:r});a.name="guide-image",this.appendInfo&&a.setSilent("appendInfo",this.appendInfo),this.el=a},e}(n(18));t.exports=i},function(t,e,n){var r=n(0),i=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return r.mix({},e,{type:"region",zIndex:1,start:null,end:null,style:{lineWidth:0,fill:"#CCD7EB",opacity:.4}})},n.render=function(t,e){var n=this.style,i=this._getPath(t),a=e.addShape("path",{zIndex:this.zIndex,attrs:r.mix({path:i},n)});a.name="guide-region",this.appendInfo&&a.setSilent("appendInfo",this.appendInfo),this.el=a},n._getPath=function(t){var e=this.parsePoint(t,this.start),n=this.parsePoint(t,this.end),r=[];return r.push(["M",e.x,e.y]),r.push(["L",n.x,e.y]),r.push(["L",n.x,n.y]),r.push(["L",e.x,n.y]),r.push(["z"]),r},e}(n(18));t.exports=i},function(t,e,n){var r=n(0),i=n(18),a=n(6),o=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return r.mix({},e,{type:"regionFilter",zIndex:1,top:!0,start:null,end:null,color:null,apply:null,style:{opacity:1}})},n.render=function(t,e){var n=this,r=n.view,i=e.addGroup();r.once("afterpaint",function(){if(!i.get("destroyed")){n._drawShapes(r,i);var a=n._drawClip(t,e);i.attr({clip:a})}}),n.appendInfo&&i.setSilent("appendInfo",n.appendInfo),n.el=i},n._drawShapes=function(t,e){var n=this,i=[];return t.getAllGeoms().map(function(t){var a=t.getShapes(),o=t.get("type");return n._geomFilter(o)&&a.map(function(t){var a=t.type,o=r.cloneDeep(t.attr());n._adjustDisplay(o);var s=e.addShape(a,{attrs:o});return i.push(s),t}),t}),i},n._drawClip=function(t){var e=this.parsePoint(t,this.start),n=this.parsePoint(t,this.end);return new a.Rect({attrs:{x:e.x,y:e.y,width:n.x-e.x,height:n.y-e.y,opacity:1}})},n._adjustDisplay=function(t){var e=this.color;t.fill&&(t.fill=t.fillStyle=e),t.stroke=t.strokeStyle=e},n._geomFilter=function(t){return!this.apply||r.inArray(this.apply,t)},e}(i);t.exports=o},function(t,e,n){var r=n(0),i=r.DomUtil,a=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return r.mix({},e,{type:"html",zIndex:7,position:null,alignX:"middle",alignY:"middle",offsetX:null,offsetY:null,html:null})},n.render=function(t,e){var n=this.parsePoint(t,this.position),a=e.get("canvas").get("el").parentNode,o=i.createDom('<div class="g-guide"></div>');a.appendChild(o);var s=this.html;r.isFunction(s)&&(s=s(this.xScales,this.yScales));var u=i.createDom(s);o.appendChild(u),this._setDomPosition(o,u,n),this.el=o},n._setDomPosition=function(t,e,n){var r=this.alignX,a=this.alignY,o=i.getOuterWidth(e),s=i.getOuterHeight(e),u={x:n.x,y:n.y};"middle"===r&&"top"===a?u.x-=Math.round(o/2):"middle"===r&&"bottom"===a?(u.x-=Math.round(o/2),u.y-=Math.round(s)):"left"===r&&"bottom"===a?u.y-=Math.round(s):"left"===r&&"middle"===a?u.y-=Math.round(s/2):"left"===r&&"top"===a?(u.x=n.x,u.y=n.y):"right"===r&&"bottom"===a?(u.x-=Math.round(o),u.y-=Math.round(s)):"right"===r&&"middle"===a?(u.x-=Math.round(o),u.y-=Math.round(s/2)):"right"===r&&"top"===a?u.x-=Math.round(o):(u.x-=Math.round(o/2),u.y-=Math.round(s/2)),this.offsetX&&(u.x+=this.offsetX),this.offsetY&&(u.y+=this.offsetY),i.modifyCSS(t,{position:"absolute",top:Math.round(u.y)+"px",left:Math.round(u.x)+"px",visibility:"visible",zIndex:this.zIndex})},n.remove=function(){var t=this.el;t&&t.parentNode.removeChild(t)},e}(n(18));t.exports=a},function(t,e,n){function r(t,e){var n,r=t.x-e.x,i=t.y-e.y;return 0===i?n=r<0?o/2:270*o/180:r>=0&&i>0?n=2*o-s(r/i):r<=0&&i<0?n=o-s(r/i):r>0&&i<0?n=o+s(-r/i):r<0&&i>0&&(n=s(r/-i)),n}var i=n(0),a=n(18),o=Math.PI,s=Math.atan,u=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return i.mix({},e,{type:"arc",start:null,end:null,style:{stroke:"#999",lineWidth:1}})},n.render=function(t,e){var n,a=this.parsePoint(t,this.start),s=this.parsePoint(t,this.end),u=t.getCenter(),l=Math.sqrt((a.x-u.x)*(a.x-u.x)+(a.y-u.y)*(a.y-u.y)),c=r(a,u),h=r(s,u);h<c&&(h+=2*o),n=i.isNumberEqual(a.x,s.x)&&i.isNumberEqual(a.y,s.y)&&(this.start[0]!==this.end[0]||this.start[1]!==this.end[1])?[["M",a.x,a.y],["A",l,l,0,1,1,2*u.x-a.x,2*u.y-a.y],["A",l,l,0,1,1,a.x,a.y]]:[["M",a.x,a.y],["A",l,l,0,(h-c)%(2*o)>o?1:0,1,s.x,s.y]];var f=e.addShape("path",{zIndex:this.zIndex,attrs:i.mix({path:n},this.style)});f.name="guide-arc",this.appendInfo&&f.setSilent("appendInfo",this.appendInfo),this.el=f},e}(a);t.exports=u},function(t,e,n){function r(t){var e;return i.each(t,function(t){if(t)return e=t,!1}),e}var i=n(0),a=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return i.mix({},e,{type:"dataRegion",start:null,end:null,bbox:null,regionStyle:{lineWidth:0,fill:"#CCD7EB",opacity:.4}})},n.render=function(e,n){var r=this.lineLength,a=this._getRegionData(e);this.bbox=this._dataBbox(a),this._drawRegion(a,n);var o="upward"===this.direction?1:-1,s=this.style.text;s.textBaseline=o>0?"bottom":"top",n.addShape("text",{attrs:i.mix({text:this.content},s,{x:this.bbox.xMin+(this.bbox.xMax-this.bbox.xMin)/2,y:this.bbox.yMin-this.lineLength*o})});var u=Math.abs(a[0].y-this.bbox.yMin);t.prototype.set.call(this,"lineLength",u+=r),t.prototype.set.call(this,"content",null),t.prototype.set.call(this,"position",this.start),t.prototype.render.call(this,e,n);var l=0;o>0?(l=Math.abs(a[a.length-1].y-this.bbox.yMin),l+=r):l=r,t.prototype.set.call(this,"lineLength",l),t.prototype.set.call(this,"position",this.end),t.prototype.render.call(this,e,n)},n._getRegionData=function(t){for(var e=[],n=this.view.get("data"),i=r(this.xScales).field,a=r(this.yScales).field,o=this._getDataIndex(this.start,n),s=this._getDataIndex(this.end,n),u=o;u<=s;u++){var l=n[u],c=this.parsePoint(t,[l[i],l[a]]);e.push(c)}return e},n._getDataIndex=function(t,e){for(var n=r(this.xScales).field,i=t[0],a=0;a<e.length;a++)if(e[a][n]===i)return a},n._dataBbox=function(t){for(var e=[],n=[],r=0;r<t.length;r++)e.push(t[r].x),n.push(t[r].y);var a=i.Array.getRange(e),o=i.Array.getRange(n),s={xMin:a.min,xMax:a.max,yMin:o.min,yMax:o.max};return"downward"===this.direction?{xMin:s.xMax,xMax:s.xMin,yMin:s.yMax,yMax:s.yMin}:s},n._drawRegion=function(t,e){var n="upward"===this.direction?1:-1,r=this.bbox,a=[];a.push(["M",t[0].x,r.yMin-this.lineLength*n]);for(var o=0;o<t.length;o++)a.push(["L",t[o].x,t[o].y]);a.push(["L",t[t.length-1].x,r.yMin-this.lineLength*n]),e.addShape("path",{attrs:i.mix({path:a},this.regionStyle)})},n._adjustLineLength=function(t,e){return Math.abs(t.yMin-e.y)},e}(n(134));t.exports=a},function(t,e,n){var r=n(0),i=n(330),a=n(17),o=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,s=function(){function t(t){this.options={},r.mix(this,t),this.clear();var e=this.chart;this.container=e.get("frontPlot"),this.plotRange=e.get("plotRange")}var e=t.prototype;return e.clear=function(){var t=this.legends;this.backRange=null,r.each(t,function(t){r.each(t,function(t){t.remove()})}),this.legends={}},e.getBackRange=function(){var t=this.backRange;if(!t){t=this.chart.get("backPlot").getBBox();var e=this.plotRange;t.maxX-t.minX<e.br.x-e.tl.x&&t.maxY-t.minY<e.br.y-e.tl.y&&(t={minX:e.tl.x,minY:e.tl.y,maxX:e.br.x,maxY:e.br.y}),this.backRange=t}return t},e._isFieldInView=function(t,e,n){var i=!1,a=n.get("scales")[t];return a&&a.values&&(i=r.inArray(a.values,e)),i},e._bindClickEvent=function(t,e,n){var i=this,a=i.chart,o=a.get("views"),s=e.field,u=i.options;t.on("itemclick",function(e){if(u.onClick)u.onClick(e);else{var l=e.item,c=e.checked,h="single"===t.get("selectedMode"),f=l.dataValue;c?(r.Array.remove(n,f),i._isFieldInView(s,f,a)&&a.filter(s,function(t){return h?t===f:!r.inArray(n,t)}),r.each(o,function(t){i._isFieldInView(s,f,t)&&t.filter(s,function(t){return h?t===f:!r.inArray(n,t)})})):h||(n.push(f),i._isFieldInView(s,f,a)&&a.filter(s,function(t){return!r.inArray(n,t)}),r.each(o,function(t){i._isFieldInView(s,f,t)&&t.filter(s,function(t){return!r.inArray(n,t)})})),a.set("keepLegend",!0),a.set("keepPadding",!0),a.repaint(),a.set("keepPadding",!1),a.set("keepLegend",!1)}})},e._bindClickEventForMix=function(t){var e=this.chart.getAllGeoms();t.on("itemclick",function(t){var n=t.item.value;r.each(e,t.checked?function(t){t.getYScale().field===n&&t.show()}:function(t){t.getYScale().field===n&&t.hide()})})},e._filterLabels=function(t,e,n){if(t.get("gLabel"))t.get("gLabel").set("visible",n);else{var i=e.get("labelCfg");if(i&&i.fields&&i.fields.length>0){var a=e.getXScale(),o=e.getYScale(),s=a.field,u=o.field,l=t.get("origin")._origin,c=e.get("labelContainer").get("labelsGroup").get("children");r.each(c,function(e){var r=e.get("origin")||[];r[s]===l[s]&&r[u]===l[u]&&(e.set("visible",n),t.set("gLabel",e))})}}},e._bindFilterEvent=function(t,e){var n=this,r=this.chart,i=e.field;t.on("itemfilter",function(t){var e=t.range;r.filterShape(function(t,r,a){if(t[i]){var o=t[i]>=e[0]&&t[i]<=e[1];return n._filterLabels(r,a,o),o}return!0});for(var a=r.getAllGeoms()||[],s=function(t){var n=a[t];"heatmap"===n.get("type")&&o(function(){n.drawWithRange(e)})},u=0;u<a.length;u++)s(u)})},e._getShapeData=function(t){var e=t.get("origin");return r.isArray(e)&&(e=e[0]),e._origin},e._bindHoverEvent=function(t,e){var n=this,i=n.chart,a=i.getAllGeoms(),o=n.options,s=i.get("canvas");t.on("itemhover",function(t){var i=t.item.value,u=n.pre;if(u){if(u===i)return}else r.each(a,function(a){var u=a.get("shapeContainer"),l=a.getShapes(),c=[];if(e){var h=a.get("scales")[e];r.each(l,function(t){var a=n._getShapeData(t);a&&function(t,e,n){return!r.isNil(n)&&(t=n.translate(t),e=n.translate(e),n.isCategory?t===e:Math.abs(t-e)<=1)}(a[e],i,h)&&c.push(t)})}else a.getYScale().field===i&&(c=l);r.isEmpty(c)||(t.shapes=c,t.geom=a,o.onHover?(o.onHover(t),u.sort(),s.draw()):a.setShapesActived(c))}),n.pre=i}),t.on("itemunhover",function(){n.pre=null,r.each(a,function(t){t.get("activeShapes")&&(t.clearActivedShapes(),s.draw())})})},e._isFiltered=function(t,e,n){if(!t.isCategory)return!0;var i=!0;return n=t.invert(n),r.each(e,function(e){if(t.getText(e)===t.getText(n))return i=!1,!1}),i},e._alignLegend=function(t,e,n,r){var i=this.viewTheme,a=this.container.get("canvas"),o=a.get("width"),s=a.get("height"),u=this.totalRegion,l=this.plotRange,c=this.getBackRange(),h=t.get("offsetX")||0,f=t.get("offsetY")||0,d=t.getHeight(),p=t.getWidth(),g=i.legend.margin,v=i.legend.legendMargin,m=this.legends[r].length,y=r.split("-"),_=0,b=0,x=m>1?u:n;if("left"===y[0]||"right"===y[0])s=l.br.y,_=this._getXAlign(y[0],o,n,c,p,g),b=e?e.get("y")+e.getHeight()+v:this._getYAlignVertical(y[1],s,x,c,0,g,a.get("height"));else if("top"===y[0]||"bottom"===y[0])if(b=this._getYAlignHorizontal(y[0],s,n,c,d,g),e){var w=e.getWidth();_=e.get("x")+w+v}else _=this._getXAlign(y[1],o,x,c,0,g),"right"===y[1]&&(_=l.br.x-x.totalWidth);t.move(_+h,b+f)},e._getXAlign=function(t,e,n,r,i,a){var o="left"===t?r.minX-i-a[3]:r.maxX+a[1];return"center"===t&&(o=(e-n.totalWidth)/2),o},e._getYAlignHorizontal=function(t,e,n,r,i,a){return"top"===t?r.minY-i-a[0]:r.maxY+a[2]},e._getYAlignVertical=function(t,e,n,r,i,a,o){var s="top"===t?r.minY-i-a[0]:e-n.totalHeight;return"center"===t&&(s=(o-n.totalHeight)/2),s},e._getSubRegion=function(t){var e=0,n=0,i=0,a=0;return r.each(t,function(t){var r=t.getWidth(),o=t.getHeight();e<r&&(e=r),i+=r,n<o&&(n=o),a+=o}),{maxWidth:e,totalWidth:i,maxHeight:n,totalHeight:a}},e._getRegion=function(){var t=this,e=t.viewTheme.legend.legendMargin,n=[],i=0,a=0;return r.each(t.legends,function(r){var o=t._getSubRegion(r);n.push(o),i+=o.totalWidth+e,a+=o.totalHeight+e}),{totalWidth:i,totalHeight:a,subs:n}},e._addCategroyLegend=function(t,e,n,o,s){var u=this,l=t.field,c=u.options,h=c[l];h&&(c=h);var f=u.legends;f[s]=f[s]||[];var d=u.container,p=[],g=t.getTicks(),v=!0,m=n.get("shapeType")||"point",y=n.getDefaultValue("shape")||"circle";c[l]&&c[l].marker?(y=c[l].marker,m="point",v=!1):c.marker&&(y=c.marker,m="point",v=!1);var _=u.chart,b=u.viewTheme,x=_.get("canvas"),w=u.plotRange,S=s.split("-"),T="right"===S[0]||"left"===S[0]?w.bl.y-w.tr.y:x.get("width");r.each(g,function(e){var i=e.text,s=e.value,l=t.invert(s),c={isInCircle:n.isInCircle()},h=!o||u._isFiltered(t,o,s),f=n.getAttr("color"),d=n.getAttr("shape");if(f)if(f.callback&&f.callback.length>1){var g=Array(f.callback.length-1).fill("");c.color=f.mapping.apply(f,[l].concat(g)).join("")||b.defaultColor}else c.color=f.mapping(l).join("")||b.defaultColor;if(v&&d)if(d.callback&&d.callback.length>1){var _=Array(d.callback.length-1).fill("");y=d.mapping.apply(d,[l].concat(_)).join("")}else y=d.mapping(l).join("");var x=a.getShapeFactory(m).getMarkerCfg(y,c);r.isFunction(y)&&(x.symbol=y),p.push({value:i,dataValue:l,checked:h,marker:x})});var O,M=r.deepMix({},b.legend[S[0]],c[l]||c,{viewId:_.get("_id"),maxLength:T,viewTheme:b,items:p});return M.title&&r.deepMix(M,{title:{text:t.alias||t.field}}),u._isTailLegend(c,n)?(M.chart=u.chart,M.geom=n,O=d.addGroup(i.Tail,M)):O=d.addGroup(i.Category,M),u._bindClickEvent(O,t,o),f[s].push(O),O},e._addContinuousLegend=function(t,e,n){var a=this.legends;a[n]=a[n]||[];var o,s,u,l=this.container,c=t.field,h=t.getTicks(),f=[],d=this.viewTheme;r.each(h,function(n){var r=n.value,i=t.invert(r),a=e.mapping(i).join("");f.push({value:n.tickValue,attrValue:a,scaleValue:r}),0===r&&(s=!0),1===r&&(u=!0)}),s||f.push({value:t.min,attrValue:e.mapping(0).join(""),scaleValue:0}),u||f.push({value:t.max,attrValue:e.mapping(1).join(""),scaleValue:1});var p=this.options,g=n.split("-"),v=d.legend[g[0]];(p&&!1===p.slidable||p[c]&&!1===p[c].slidable)&&(v=r.mix({},v,d.legend.gradient));var m=r.deepMix({},v,p[c]||p,{items:f,attr:e,viewTheme:d,numberFormatter:t.formatter});return m.title&&r.deepMix(m,{title:{text:t.alias||t.field}}),"color"===e.type?o=l.addGroup(i.Color,m):"size"===e.type&&(o=l.addGroup(i.Size,m)),this._bindFilterEvent(o,t),a[n].push(o),o},e._isTailLegend=function(t,e){if(t.hasOwnProperty("attachLast")&&t.attachLast){var n=e.get("type");if("line"===n||"lineStack"===n||"area"===n||"areaStack"===n)return!0}return!1},e._adjustPosition=function(t,e){var n;if(e)n="right-top";else if(r.isArray(t))n=String(t[0])+"-"+String(t[1]);else{var i=t.split("-");1===i.length?("left"===i[0]&&(n="left-bottom"),"right"===i[0]&&(n="right-bottom"),"top"===i[0]&&(n="top-center"),"bottom"===i[0]&&(n="bottom-center")):n=t}return n},e.addLegend=function(t,e,n,r){var i=this.options,a=t.field,o=i[a],s=this.viewTheme;if(!1===o)return null;if(o&&o.custom)this.addCustomLegend(a);else{var u,l=i.position||s.defaultLegendPosition;l=this._adjustPosition(l,this._isTailLegend(i,n)),o&&o.position&&(l=this._adjustPosition(o.position,this._isTailLegend(o,n))),u=t.isLinear?this._addContinuousLegend(t,e,l):this._addCategroyLegend(t,e,n,r,l),this._bindHoverEvent(u,a)}},e.addCustomLegend=function(t){var e=this.chart,n=this.viewTheme,a=this.container,o=this.options;t&&(o=o[t]);var s=o.position||n.defaultLegendPosition;s=this._adjustPosition(s);var u=this.legends;u[s]=u[s]||[];var l=o.items;if(l){var c=e.getAllGeoms();r.each(l,function(t){var e=function(t,e){var n;return r.each(c,function(t){t.get("visible")&&t.getYScale().field===e&&(n=t)}),n}(0,t.value);r.isObject(t.marker)?t.marker.radius=t.marker.radius||4.5:t.marker={symbol:t.marker?t.marker:"circle",fill:t.fill,radius:4.5},t.checked=!!r.isNil(t.checked)||t.checked,t.geom=e});var h=e.get("canvas"),f=this.plotRange,d=s.split("-"),p="right"===d[0]||"left"===d[0]?f.bl.y-f.tr.y:h.get("width"),g=r.deepMix({},n.legend[d[0]],o,{maxLength:p,viewTheme:n,items:l}),v=a.addGroup(i.Category,g);return u[s].push(v),v.on("itemclick",function(t){o.onClick&&o.onClick(t)}),this._bindHoverEvent(v),v}},e.addMixedLegend=function(t,e){var n=[];r.each(t,function(t){var i=t.field;r.each(e,function(e){if(e.getYScale()===t&&t.values&&t.values.length>0){var r=e.get("shapeType")||"point",o=e.getDefaultValue("shape")||"circle",s=a.getShapeFactory(r),u={color:e.getDefaultValue("color")},l=s.getMarkerCfg(o,u);n.push({value:i,marker:l})}})}),this.options=r.deepMix({},{custom:!0,items:n},this.options);var i=this.addCustomLegend();this._bindClickEventForMix(i)},e.alignLegends=function(){var t=this,e=t.legends,n=t._getRegion(e);t.totalRegion=n;var i=0;return r.each(e,function(e,a){var o=n.subs[i];r.each(e,function(n,r){var i=e[r-1];n.get("useHtml")&&!n.get("autoPosition")||t._alignLegend(n,i,o,a)}),i++}),this},t}();t.exports=s},function(t,e,n){t.exports={Category:n(135),Tail:n(331),Color:n(332),Size:n(334)}},function(t,e,n){var r=n(0),i=n(135),a=n(3),o=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return r.mix({},e,{type:"tail-legend",layout:"vertical",autoLayout:!0})},n._addItem=function(t){var e=this.get("itemsGroup"),n=this._getNextX(),i=this.get("unCheckColor"),a=e.addGroup({x:0,y:0,value:t.value,scaleValue:t.scaleValue,checked:t.checked});a.translate(n,0),a.set("viewId",e.get("viewId"));var o=this.get("textStyle"),s=this.get("_wordSpaceing"),u=0;if(t.marker){var l=r.mix({},t.marker,{x:t.marker.radius,y:0});t.checked||(l.fill&&(l.fill=i),l.stroke&&(l.stroke=i));var c=a.addShape("marker",{type:"marker",attrs:l});c.attr("cursor","pointer"),c.name="legend-marker",u+=c.getBBox().width+s}var h=r.mix({},o,{x:u,y:0,text:this._formatItemValue(t.value)});t.checked||r.mix(h,{fill:i});var f=a.addShape("text",{attrs:h});f.attr("cursor","pointer"),f.name="legend-text",this.get("appendInfo")&&f.setSilent("appendInfo",this.get("appendInfo"));var d=a.getBBox(),p=this.get("itemWidth"),g=a.addShape("rect",{attrs:{x:n,y:0-d.height/2,fill:"#fff",fillOpacity:0,width:p||d.width,height:d.height}});return g.attr("cursor","pointer"),g.setSilent("origin",t),g.name="legend-item",this.get("appendInfo")&&g.setSilent("appendInfo",this.get("appendInfo")),a.name="legendGroup",a},n._adjust=function(){if(this.get("geom")){var t=this.get("geom").get("dataArray"),e=this.get("itemsGroup").get("children"),n=0;r.each(e,function(e){var i=t[n],a=i[i.length-1].y;r.isArray(a)&&(a=a[1]);var o=e.getBBox().height,s=e.get("x");e.translate(s,a-o/2),n++}),this.get("autoLayout")&&this._antiCollision(e)}},n._renderUI=function(){var t=this;t.get("useHtml")?t._renderHTML():(t._renderItems(),t.get("autoWrap")&&t._adjustItems(),t._renderBack()),t.get("chart").once("afterpaint",function(){t._adjust()})},n._getPreviousY=function(t){return t.attr("matrix")[7]+t.getBBox().height},n._adjustDenote=function(t,e,n){t.addShape("path",{attrs:{path:"M-2,"+e+"L"+2*-a.legend.legendMargin+","+(n+3),lineWidth:1,lineDash:[2,2],stroke:"#999999"}})},n._antiCollision=function(t){var e=this;t.sort(function(t,e){return t.attr("matrix")[7]-e.attr("matrix")[7]});var n=!0,r=e.get("chart").get("plotRange"),i=r.tl.y,a=Math.abs(i-r.bl.y),o=t[0].getBBox().height,s=Number.MIN_VALUE,u=0,l=t.map(function(t){var e=t.attr("matrix")[7];return e>u&&(u=e),e<s&&(s=e),{size:t.getBBox().height,targets:[e-i]}});s-=i;for(var c=0;n;){for(var h=0;h<l.length;h++){var f=l[h],d=(Math.min.apply(s,f.targets)+Math.max.apply(s,f.targets))/2;f.pos=Math.min(Math.max(s,d-f.size/2),a-f.size)}for(n=!1,c=l.length;c--;)if(c>0){var p=l[c-1],g=l[c];p.pos+p.size>g.pos&&(p.size+=g.size,p.targets=p.targets.concat(g.targets),l.splice(c,1),n=!0)}}c=0;var v=this.get("itemsGroup").addGroup();l.forEach(function(n){var r=i+o;n.targets.forEach(function(){var i=t[c].attr("matrix")[7],a=n.pos+r-o/2;Math.abs(i-a)>o/2&&e._adjustDenote(v,a,i-e.attr("matrix")[7]/2),t[c].translate(0,-i),t[c].translate(0,a),r+=o,c++})})},e}(i);t.exports=o},function(t,e,n){var r=n(59).ColorUtil,i=n(0),a=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return i.mix({},e,{type:"color-legend",layout:"vertical",labelOffset:15,lineStyle:{lineWidth:1,stroke:"#fff"}})},n._renderSliderShape=function(){var t,e=this.get("slider").get("backgroundElement"),n=this.get("width"),a=this.get("height"),o=this.get("layout"),s=this.get("items"),u="";return"vertical"===o?(u+="l (90) ",i.each(s,function(e){t=r.toRGB(e.attrValue),u+=1-e.scaleValue+":"+t+" "})):(u+="l (0) ",i.each(s,function(e){t=r.toRGB(e.attrValue),u+=e.scaleValue+":"+t+" "})),this._addBackground(e,"Rect",{x:0,y:0,width:n,height:a,fill:u,strokeOpacity:0})},n._renderBackground=function(){var t=this,e=this.get("titleShape"),n=this.get("titleGap");n=e?e.getBBox().height+n:n;var a,o=this.get("width"),s=this.get("height"),u=this.get("layout"),l=this.get("items"),c="",h=[],f=this.addGroup();"vertical"===u?(c+="l (90) ",i.each(l,function(e,n){0!==n&&n!==l.length-1&&(h.push(["M",0,s-e.scaleValue*s]),h.push(["L",o,s-e.scaleValue*s])),a=r.toRGB(e.attrValue),c+=1-e.scaleValue+":"+a+" ",f.addShape("text",{attrs:i.mix({},{x:o+t.get("labelOffset")/2,y:s-e.scaleValue*s,text:t._formatItemValue(e.value)+""},t.get("textStyle"),{textAlign:"start"})})})):(c+="l (0) ",i.each(l,function(e,n){0!==n&&n!==l.length-1&&(h.push(["M",e.scaleValue*o,0]),h.push(["L",e.scaleValue*o,s])),a=r.toRGB(e.attrValue),c+=e.scaleValue+":"+a+" ",f.addShape("text",{attrs:i.mix({},{x:e.scaleValue*o,y:s+t.get("labelOffset"),text:t._formatItemValue(e.value)+""},t.get("textStyle"))})})),f.addShape("rect",{attrs:{x:0,y:0,width:o,height:s,fill:c,strokeOpacity:0}}),f.addShape("path",{attrs:i.mix({path:h},this.get("lineStyle"))}),f.move(0,n)},e}(n(137));t.exports=a},function(t,e,n){var r=n(0),i=r.DomUtil,a=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){return{range:null,middleAttr:null,backgroundElement:null,minHandleElement:null,maxHandleElement:null,middleHandleElement:null,currentTarget:null,layout:"vertical",width:null,height:null,pageX:null,pageY:null}},n._beforeRenderUI=function(){var t=this.get("layout"),e=this.get("backgroundElement"),n=this.get("minHandleElement"),r=this.get("maxHandleElement"),i=this.addShape("rect",{attrs:this.get("middleAttr")}),a="vertical"===t?"ns-resize":"ew-resize";this.add([e,n,r]),this.set("middleHandleElement",i),e.set("zIndex",0),i.set("zIndex",1),n.set("zIndex",2),r.set("zIndex",2),i.attr("cursor",a),n.attr("cursor",a),r.attr("cursor",a),this.sort()},n._renderUI=function(){"horizontal"===this.get("layout")?this._renderHorizontal():this._renderVertical()},n._transform=function(t){var e=this.get("range"),n=e[0]/100,r=e[1]/100,i=this.get("width"),a=this.get("height"),o=this.get("minHandleElement"),s=this.get("maxHandleElement"),u=this.get("middleHandleElement");o.resetMatrix(),s.resetMatrix(),"horizontal"===t?(u.attr({x:i*n,y:0,width:(r-n)*i,height:a}),o.translate(n*i,a),s.translate(r*i,a)):(u.attr({x:0,y:a*(1-r),width:i,height:(r-n)*a}),o.translate(i/2,(1-n)*a),s.translate(i/2,(1-r)*a))},n._renderHorizontal=function(){this._transform("horizontal")},n._renderVertical=function(){this._transform("vertical")},n._bindUI=function(){this.on("mousedown",r.wrapBehavior(this,"_onMouseDown"))},n._isElement=function(t,e){var n=this.get(e);return t===n||!!n.isGroup&&n.get("children").indexOf(t)>-1},n._getRange=function(t,e){var n=t+e;return(n=n>100?100:n)<0?0:n},n._updateStatus=function(t,e){var n=this.get("x"===t?"width":"height");t=r.upperFirst(t);var i,a=this.get("range"),o=this.get("page"+t),s=this.get("currentTarget"),u=this.get("rangeStash"),l="vertical"===this.get("layout")?-1:1,c=e["page"+t],h=(c-o)/n*100*l;a[1]<=a[0]?(this._isElement(s,"minHandleElement")||this._isElement(s,"maxHandleElement"))&&(a[0]=this._getRange(h,a[0]),a[1]=this._getRange(h,a[0])):(this._isElement(s,"minHandleElement")&&(a[0]=this._getRange(h,a[0])),this._isElement(s,"maxHandleElement")&&(a[1]=this._getRange(h,a[1]))),this._isElement(s,"middleHandleElement")&&(i=u[1]-u[0],a[0]=this._getRange(h,a[0]),a[1]=a[0]+i,a[1]>100&&(a[1]=100,a[0]=a[1]-i)),this.emit("sliderchange",{range:a}),this.set("page"+t,c),this._renderUI(),this.get("canvas").draw()},n._onMouseDown=function(t){var e=t.currentTarget,n=t.event,r=this.get("range");n.stopPropagation(),n.preventDefault(),this.set("pageX",n.pageX),this.set("pageY",n.pageY),this.set("currentTarget",e),this.set("rangeStash",[r[0],r[1]]),this._bindCanvasEvents()},n._bindCanvasEvents=function(){var t=this.get("canvas").get("containerDOM");this.onMouseMoveListener=i.addEventListener(t,"mousemove",r.wrapBehavior(this,"_onCanvasMouseMove")),this.onMouseUpListener=i.addEventListener(t,"mouseup",r.wrapBehavior(this,"_onCanvasMouseUp")),this.onMouseLeaveListener=i.addEventListener(t,"mouseleave",r.wrapBehavior(this,"_onCanvasMouseUp"))},n._onCanvasMouseMove=function(t){this._mouseOutArea(t)||("horizontal"===this.get("layout")?this._updateStatus("x",t):this._updateStatus("y",t))},n._onCanvasMouseUp=function(){this._removeDocumentEvents()},n._removeDocumentEvents=function(){this.onMouseMoveListener.remove(),this.onMouseUpListener.remove()},n._mouseOutArea=function(t){var e=this.get("canvas").get("el").getBoundingClientRect(),n=this.get("parent"),r=n.getBBox(),i=n.attr("matrix")[6],a=n.attr("matrix")[7],o=t.clientX-e.x,s=t.clientY-e.y;return o<i||o>i+r.width||s<a||s>a+r.height},e}(n(6).Group);t.exports=a},function(t,e,n){var r=n(0),i=n(3),a=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return r.mix({},e,{type:"size-legend",width:100,height:200,_circleStyle:{stroke:"#4E7CCC",fill:"#fff",fillOpacity:0},textStyle:{fill:"#333",textAlign:"start",textBaseline:"middle",fontFamily:i.fontFamily},inRange:{fill:"white",stroke:"#5d7ca3",lineWidth:2},inRangeSlider:{fill:"#5d7ca3"},backgroundCircle:{stroke:"#ccc",fill:"white",lineWidth:2}})},n._renderSliderShape=function(){var t=this.get("slider").get("backgroundElement"),e=this.get("layout"),n="vertical"===e?2:this.get("width"),i="vertical"===e?this.get("height"):2,a=this.get("height")/2,o=this.get("inRangeSlider"),s="vertical"===e?[[0,15],[n,15],[n,i-5],[0,i-5]]:[[5,a+i],[5,a],[5+n-15-4,a],[5+n-15-4,a+i]],u=this.get("backgroundCircle");return t.addShape("circle",{attrs:r.mix({x:"vertical"===e?n/2:0,y:"vertical"===e?0:a,r:"vertical"===e?15:5},u)}),t.addShape("circle",{attrs:r.mix({x:n,y:"vertical"===e?i:a,r:"vertical"===e?5:15},u)}),this._addBackground(t,"Polygon",r.mix({points:s},o))},n._addHorizontalTrigger=function(t,e,n,i){var a=this.get("slider").get(t+"HandleElement"),o=-this.get("height")/2,s=a.addShape("circle",{attrs:r.mix({x:0,y:o,r:i},e)}),u=a.addShape("text",{attrs:r.mix(n,{x:0,y:o+i+10,textAlign:"center",textBaseline:"middle"})}),l="vertical"===this.get("layout")?"ns-resize":"ew-resize";s.attr("cursor",l),u.attr("cursor",l),this.set(t+"ButtonElement",s),this.set(t+"TextElement",u)},n._addVerticalTrigger=function(t,e,n,i){var a=this.get("slider").get(t+"HandleElement"),o=a.addShape("circle",{attrs:r.mix({x:-6,y:0,r:i},e)}),s=a.addShape("text",{attrs:r.mix(n,{x:i+10,y:0,textAlign:"start",textBaseline:"middle"})}),u="vertical"===this.get("layout")?"ns-resize":"ew-resize";o.attr("cursor",u),s.attr("cursor",u),this.set(t+"ButtonElement",o),this.set(t+"TextElement",s)},n._renderTrigger=function(){var t=this.get("firstItem"),e=this.get("lastItem"),n=this.get("layout"),i=this.get("textStyle"),a=this.get("inRange"),o=r.mix({},a),s=r.mix({},a),u=r.mix({text:this._formatItemValue(t.value)+""},i),l=r.mix({text:this._formatItemValue(e.value)+""},i);"vertical"===n?(this._addVerticalTrigger("min",o,u,5),this._addVerticalTrigger("max",s,l,15)):(this._addHorizontalTrigger("min",o,u,5),this._addHorizontalTrigger("max",s,l,15))},n._bindUI=function(){var t=this;t.get("slidable")&&t.get("slider").on("sliderchange",function(e){var n=e.range,r=1*t.get("firstItem").value,i=1*t.get("lastItem").value,a=r+n[0]/100*(i-r),o=r+n[1]/100*(i-r);t._updateElement(a,o,5+n[0]/100*10,5+n[1]/100*10);var s=new Event("itemfilter",e,!0,!0);s.range=[a,o],t.emit("itemfilter",s)})},n._updateElement=function(t,e,n,r){var i=this.get("minTextElement"),a=this.get("maxTextElement"),o=this.get("minButtonElement"),s=this.get("maxButtonElement");if(e>1&&(t=parseInt(t,10),e=parseInt(e,10)),i.attr("text",this._formatItemValue(t)+""),a.attr("text",this._formatItemValue(e)+""),o.attr("r",n),s.attr("r",r),"vertical"===this.get("layout"))i.attr("x",n+10),a.attr("x",r+10);else{var u=-this.get("height")/2;i.attr("y",u+n+10),a.attr("y",u+r+10)}},n._addCircle=function(t,e,n,i,a){var o=this.addGroup(),s=this.get("_circleStyle"),u=this.get("textStyle"),l=this.get("titleShape"),c=this.get("titleGap");l&&(c+=l.getBBox().height),o.addShape("circle",{attrs:r.mix({x:t,y:e+c,r:0===n?1:n},s)}),o.addShape("text",{attrs:r.mix({x:a+5,y:e+c,text:0===i?"0":i},u)})},n._renderBackground=function(){var t=1*this.get("firstItem").attrValue,e=1*this.get("lastItem").attrValue,n=(t+e)/2;this._addCircle(e,e,e,n,2*e),this._addCircle(e,2*e+8+n,n,(t+n)/2,2*e),this._addCircle(e,2*(e+8+n)+t,t,t,2*e)},e}(n(137));t.exports=a},function(t,e,n){function r(t,e){return!!t&&!!t.className&&-1!==(a.isNil(t.className.baseVal)?t.className:t.className.baseVal).indexOf(e)}function i(t){var e=[];return a.each(t,function(t){var n=function(t,e){var n=-1;return a.each(t,function(t,r){var i=!0;for(var o in e)if(e.hasOwnProperty(o)&&-1===c.indexOf(o)&&!a.isObject(e[o])&&e[o]!==t[o]){i=!1;break}if(i)return n=r,!1}),n}(e,t);-1===n?e.push(t):e[n]=t}),e}var a=n(0),o=n(336),s=a.MatrixUtil.vec2,u=["line","area","path","areaStack"],l=["line","area"],c=["marker","showMarker"],h=function(){function t(t){a.assign(this,t),this.timeStamp=0}var e=t.prototype;return e._normalizeEvent=function(t){var e=this.chart,n=this._getCanvas(),r=n.getPointByClient(t.clientX,t.clientY),i=n.get("pixelRatio");r.x=r.x/i,r.y=r.y/i;var a=e.getViewsByPoint(r);return r.views=a,r},e._getCanvas=function(){return this.chart.get("canvas")},e._getTriggerEvent=function(){var t,e=this.options.triggerOn;return e&&"mousemove"!==e?"click"===e?t="plotclick":"none"===e&&(t=null):t="plotmove",t},e._getDefaultTooltipCfg=function(){var t,e=this.chart,n=this.viewTheme,r=this.options,i=a.mix({},n.tooltip),o=e.getAllGeoms().filter(function(t){return t.get("visible")}),s=[];return a.each(o,function(t){var e=t.get("type"),n=t.get("adjusts"),r=!1;n&&a.each(n,function(t){if("symmetric"===t.type||"Symmetric"===t.type)return r=!0,!1}),-1!==a.indexOf(s,e)||r||s.push(e)}),o.length&&o[0].get("coord")&&"cartesian"===o[0].get("coord").type&&1===s.length&&("interval"===s[0]&&!1!==r.shared?t={zIndex:0,crosshairs:n.tooltipCrosshairsRect}:a.indexOf(l,s[0])>-1&&(t={crosshairs:n.tooltipCrosshairsLine})),a.mix(i,t,{isTransposed:!(!o.length||!o[0].get("coord"))&&o[0].get("coord").isTransposed})},e._bindEvent=function(){var t=this.chart,e=this._getTriggerEvent();e&&(t.on(e,a.wrapBehavior(this,"onMouseMove")),t.on("plotleave",a.wrapBehavior(this,"onMouseOut")))},e._offEvent=function(){var t=this.chart,e=this._getTriggerEvent();e&&(t.off(e,a.getWrapBehavior(this,"onMouseMove")),t.off("plotleave",a.getWrapBehavior(this,"onMouseOut")))},e._setTooltip=function(t,e,n,r){var o=this.tooltip,s=this.prePoint;if(!s||s.x!==t.x||s.y!==t.y){e=i(e),this.prePoint=t;var u=this.chart,l=this.viewTheme,c=a.isArray(t.x)?t.x[t.x.length-1]:t.x,h=a.isArray(t.y)?t.y[t.y.length-1]:t.y;o.get("visible")||u.emit("tooltip:show",{x:c,y:h,tooltip:o});var f=e[0],d=f.title||f.name;o.isContentChange(d,e)&&(u.emit("tooltip:change",{tooltip:o,x:c,y:h,items:e}),o.setContent(d=e[0].title||e[0].name,e),a.isEmpty(n)?o.clearMarkers():!0===this.options.hideMarkers?o.set("markerItems",n):o.setMarkers(n,l.tooltipMarker)),o.setPosition(c,h,r),o.show()}},e.hideTooltip=function(){var t=this.tooltip,e=this.chart,n=this._getCanvas();this.prePoint=null,t.hide(),e.emit("tooltip:hide",{tooltip:t}),n.draw()},e.onMouseMove=function(t){if(!a.isEmpty(t.views)){var e=this.timeStamp,n=+new Date,r={x:t.x,y:t.y};n-e>16&&!this.chart.get("stopTooltip")&&(this.showTooltip(r,t.views,t.shape),this.timeStamp=n)}},e.onMouseOut=function(t){this.tooltip.get("visible")&&(t&&t.toElement&&(r(t.toElement,"g2-tooltip")||function(t,e){for(var n=t.parentNode,i=!1;n&&n!==document.body;){if(r(n,"g2-tooltip")){i=!0;break}n=n.parentNode}return i}(t.toElement))||this.hideTooltip())},e.renderTooltip=function(){var t=this;if(!t.tooltip){var e=t.chart,n=t.viewTheme,r=t._getCanvas(),i=t._getDefaultTooltipCfg(),s=t.options;(s=a.deepMix({plotRange:e.get("plotRange"),capture:!1,canvas:r,frontPlot:e.get("frontPlot"),viewTheme:n,backPlot:e.get("backPlot")},i,s)).crosshairs&&"rect"===s.crosshairs.type&&(s.zIndex=0),s.visible=!1;var u=new o(s);t.tooltip=u;var l=t._getTriggerEvent();if(!u.get("enterable")&&"plotmove"===l){var c=u.get("container");c&&(c.onmousemove=function(n){var r=t._normalizeEvent(n);e.emit(l,r)})}t._bindEvent()}},e.showTooltip=function(t,e,n){if(!a.isEmpty(e)&&t){this.tooltip||this.renderTooltip();var r=this.options,i=[],o=[];if(a.each(e,function(e){if(!e.get("tooltipEnable"))return!0;var s=e.get("geoms"),l=e.get("coord");a.each(s,function(e){var s=e.get("type");if(e.get("visible")&&!1!==e.get("tooltipCfg")){var c=e.get("dataArray");if(e.isShareTooltip()||!1===r.shared&&a.inArray(["area","line","path"],s))a.each(c,function(n){var c=e.findPoint(t,n);if(c){var h=e.getTipItems(c,r.title);-1!==a.indexOf(u,s)&&a.each(h,function(t){var e=t.point;if(e&&e.x&&e.y){var n=a.isArray(e.x)?e.x[e.x.length-1]:e.x,r=a.isArray(e.y)?e.y[e.y.length-1]:e.y;e=l.applyMatrix(n,r,1),t.x=e[0],t.y=e[1],t.showMarker=!0,i.push(t)}}),o=o.concat(h)}});else{var h=e.get("shapeContainer");n&&n.get("visible")&&n.get("origin")&&n.get("parent")===h&&(o=e.getTipItems(n.get("origin"),r.title))}}}),a.each(o,function(t){var e=t.point,n=a.isArray(e.x)?e.x[e.x.length-1]:e.x,r=a.isArray(e.y)?e.y[e.y.length-1]:e.y;e=l.applyMatrix(n,r,1),t.x=e[0],t.y=e[1]})}),o.length){var l=o[0];if(!o.every(function(t){return t.title===l.title})){var c=l,h=1/0;o.forEach(function(e){var n=s.distance([t.x,t.y],[e.x,e.y]);n<h&&(h=n,c=e)}),o=o.filter(function(t){return t.title===c.title}),i=i.filter(function(t){return t.title===c.title})}if(!1===r.shared&&o.length>1){var f=o[0],d=Math.abs(t.y-f.y);a.each(o,function(e){Math.abs(t.y-e.y)<=d&&(f=e,d=Math.abs(t.y-e.y))}),f&&f.x&&f.y&&(i=[f]),o=[f]}this._setTooltip(t,o,i,n)}else this.hideTooltip()}},e.clear=function(){var t=this.tooltip;t&&t.destroy(),this.tooltip=null,this.prePoint=null,this._offEvent()},t}();t.exports=h},function(t,e,n){function r(t,e){return t.getElementsByClassName(e)[0]}var i=n(0),a=n(53),o=n(3),s=i.DomUtil,u=function(t){function e(e){var n;return(n=t.call(this,e)||this)._init(),n.get("items")&&n._renderTooltip(),n._renderCrosshairs(),n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){return{x:0,y:0,items:null,showTitle:!0,crosshairs:null,plotRange:null,offset:10,timeStamp:0,containerTpl:'<div class="g2-tooltip"><div class="g2-tooltip-title"></div><ul class="g2-tooltip-list"></ul></div>',itemTpl:'<li data-index={index}><span style="background-color:{color};" class=g2-tooltip-marker></span>{name}<span class=g2-tooltip-value>{value}</span></li>',inPlot:!0,follow:!0,enterable:!1}},n._initTooltipWrapper=function(){var t,e=this.get("containerTpl"),n=this.get("canvas").get("el").parentNode;if(/^\#/.test(e)){var r=e.replace("#","");t=document.getElementById(r)}else t=s.createDom(e),s.modifyCSS(t,this.get("g2-tooltip")),n.appendChild(t),n.style.position="relative";this.set("container",t)},n._init=function(){var t,e=this.get("crosshairs"),n=this.get("frontPlot"),r=this.get("backPlot"),a=this.get("viewTheme")||o;e&&("rect"===e.type?(this.set("crosshairs",i.deepMix({},a.tooltipCrosshairsRect,e)),t=r.addGroup({zIndex:0})):(this.set("crosshairs",i.deepMix({},a.tooltipCrosshairsLine,e)),t=n.addGroup())),this.set("crosshairsGroup",t),this._initTooltipWrapper()},n._clearDom=function(){var t=this.get("container"),e=r(t,"g2-tooltip-title"),n=r(t,"g2-tooltip-list");e&&(e.innerHTML=""),n&&(n.innerHTML="")},n._addItem=function(t,e){var n=this.get("itemTpl"),a=i.substitute(n,i.mix({index:e},t)),o=s.createDom(a);s.modifyCSS(o,this.get("g2-tooltip-list-item"));var u=r(o,"g2-tooltip-marker");u&&s.modifyCSS(u,this.get("g2-tooltip-marker"));var l=r(o,"g2-tooltip-value");return l&&s.modifyCSS(l,this.get("g2-tooltip-value")),o},n._renderTooltip=function(){var t=this,e=t.get("showTitle"),n=t.get("titleContent"),a=t.get("container"),o=r(a,"g2-tooltip-title"),u=r(a,"g2-tooltip-list"),l=t.get("items");t._clearDom(),o&&e&&(s.modifyCSS(o,t.get("g2-tooltip-title")),o.innerHTML=n),u&&(s.modifyCSS(u,t.get("g2-tooltip-list")),i.each(l,function(e,n){u.appendChild(t._addItem(e,n))}))},n._clearCrosshairsGroup=function(){var t=this.get("crosshairsGroup");this.set("crossLineShapeX",null),this.set("crossLineShapeY",null),this.set("crosshairsRectShape",null),t.clear()},n._renderCrosshairs=function(){var t=this.get("crosshairs"),e=this.get("canvas"),n=this.get("plotRange"),r=this.get("isTransposed");if(t)switch(this._clearCrosshairsGroup(),t.type){case"x":this._renderHorizontalLine(e,n);break;case"y":this._renderVerticalLine(e,n);break;case"cross":this._renderHorizontalLine(e,n),this._renderVerticalLine(e,n);break;case"rect":this._renderBackground(e,n);break;default:r?this._renderHorizontalLine(e,n):this._renderVerticalLine(e,n)}},n._addCrossLineShape=function(t,e){var n=this.get("crosshairsGroup").addShape("line",{capture:!1,attrs:t});return n.hide(),this.set("crossLineShape"+e,n),n},n._renderVerticalLine=function(t,e){var n=this.get("crosshairs").style,r=i.mix({x1:0,y1:e?e.bl.y:t.get("height"),x2:0,y2:e?e.tl.y:0},n);this._addCrossLineShape(r,"Y")},n._renderHorizontalLine=function(t,e){var n=this.get("crosshairs").style,r=i.mix({x1:e?e.bl.x:t.get("width"),y1:0,x2:e?e.br.x:0,y2:0},n);this._addCrossLineShape(r,"X")},n._renderBackground=function(t,e){var n=this.get("crosshairs").style,r=this.get("crosshairsGroup"),a=i.mix({x:e?e.tl.x:0,y:e?e.tl.y:t.get("height"),width:e?e.br.x-e.bl.x:t.get("width"),height:e?Math.abs(e.tl.y-e.bl.y):t.get("height")},n),o=r.addShape("rect",{attrs:a});return o.hide(),this.set("crosshairsRectShape",o),o},n.isContentChange=function(t,e){var n=this.get("titleContent"),r=this.get("items"),a=!(t===n&&r.length===e.length);return a||i.each(e,function(t,e){var n=r[e];for(var o in t)if(t.hasOwnProperty(o)&&!i.isObject(t[o])&&t[o]!==n[o]){a=!0;break}if(a)return!1}),a},n.setContent=function(t,e){var n=+new Date;return this.set("items",e),this.set("titleContent",t),this.set("timeStamp",n),this._renderTooltip(),this},n.setMarkers=function(t,e){var n=this.get("markerGroup"),r=this.get("frontPlot");n?n.clear():(n=r.addGroup({zIndex:1,capture:!1}),this.set("markerGroup",n)),i.each(t,function(t){n.addShape("marker",{color:t.color,attrs:i.mix({fill:t.color,symbol:"circle",shadowColor:t.color},e,{x:t.x,y:t.y})})}),this.set("markerItems",t)},n.clearMarkers=function(){var t=this.get("markerGroup");t&&t.clear()},n.setPosition=function(t,e,n){var r,a=this.get("container"),o=this.get("crossLineShapeX"),u=this.get("crossLineShapeY"),l=this.get("crosshairsRectShape"),c=t,h=e,f=this.get("canvas").get("el"),d=s.getWidth(f),p=s.getHeight(f),g=this.get("offset"),v=this.get("prePosition")||{x:0,y:0};if(this.get("position")?(r=function(t,e,n,r,i){var a=r.clientWidth,o=r.clientHeight,s=0,u=0,l=20;if(i){var c=i.getBBox();s=c.width,u=c.height,t=c.x,e=c.y,l=5}switch(n){case"inside":t=t+s/2-a/2,e=e+u/2-o/2;break;case"top":t=t+s/2-a/2,e=e-o-l;break;case"left":t=t-a-l,e=e+u/2-o/2;break;case"right":t=t+s+l,e=e+u/2-o/2;break;case"bottom":default:t=t+s/2-a/2,e=e+u+l}return[t,e]}(t,e,this.get("position"),a,n),t=r[0],e=r[1]):this.get("enterable")?(r={x:t,y:e-=a.clientHeight/2},v&&t-v.x>0?t-=a.clientWidth+1:t+=1):(r=function(t,e,n,r,i){var a=n.clientWidth,o=n.clientHeight;return t+a+20>d?t=(t-=a+20)<0?0:t:t+=20,e+o+20>p?(e-=o+20,e=t<0?0:e):e+=20,[t,e]}(t,e,a),t=r[0],e=r[1]),this.set("prePosition",r),this.get("inPlot")&&(r=function(t,e,n,r,i){var a=n.clientWidth,o=n.clientHeight;return t+a>r.tr.x&&(t-=a+40),t<r.tl.x&&(t=r.tl.x),i||(e+o>r.bl.y&&(e-=o+40),e<r.tl.y&&(e=r.tl.y)),[t,e]}(t,e,a,this.get("plotRange"),this.get("enterable")),t=r[0],e=r[1]),v.x!==t||v.y!==e){var m=this.get("markerItems");if(i.isEmpty(m)||(c=m[0].x,h=m[0].y),u&&u.move(c,0),o&&o.move(0,h),l){var y=this.get("isTransposed"),_=this.get("items"),b=_[0],x=_[_.length-1],w=y?"y":"x",S=y?"height":"width",T=b[w];if(_.length>1&&b[w]>x[w]&&(T=x[w]),this.get("crosshairs").width)l.attr(w,T-this.get("crosshairs").width/2),l.attr(S,this.get("crosshairs").width);else if(i.isArray(b.point[w])&&!b.size){var O=b.point[w][1]-b.point[w][0];l.attr(w,b.point[w][0]),l.attr(S,O)}else l.attr(w,T-(g=3*b.size/4)),l.attr(S,1===_.length?3*b.size/2:Math.abs(x[w]-b[w])+2*g)}var M=this.get("follow");a.style.left=M?t+"px":0,a.style.top=M?e+"px":0}},n.show=function(){var e=this.get("crossLineShapeX"),n=this.get("crossLineShapeY"),r=this.get("crosshairsRectShape"),i=this.get("markerGroup"),a=this.get("container"),o=this.get("canvas");e&&e.show(),n&&n.show(),r&&r.show(),i&&i.show(),t.prototype.show.call(this),a.style.visibility="visible",o.draw()},n.hide=function(){var e=this.get("container"),n=this.get("crossLineShapeX"),r=this.get("crossLineShapeY"),i=this.get("crosshairsRectShape"),a=this.get("markerGroup"),o=this.get("canvas");e.style.visibility="hidden",n&&n.hide(),r&&r.hide(),i&&i.hide(),a&&a.hide(),t.prototype.hide.call(this),o.draw()},n.destroy=function(){var e=this.get("crossLineShapeX"),n=this.get("crossLineShapeY"),r=this.get("markerGroup"),i=this.get("crosshairsRectShape"),a=this.get("container"),o=this.get("containerTpl");a&&!/^\#/.test(o)&&a.parentNode.removeChild(a),e&&e.remove(),n&&n.remove(),r&&r.remove(),i&&i.remove(),t.prototype.destroy.call(this)},e}(a);t.exports=u},function(t,e,n){function r(t,e){if(a.isNil(t)||a.isNil(e))return!1;var n=t.get("origin"),r=e.get("origin");return a.isNil(n)&&a.isNil(r)?a.isEqual(t,e):a.isEqual(n,r)}function i(t){t.shape&&t.shape.get("origin")&&(t.data=t.shape.get("origin"))}var a=n(0),o=function(){function t(t){this.view=null,this.canvas=null,a.assign(this,t),this._init()}var e=t.prototype;return e._init=function(){this.pixelRatio=this.canvas.get("pixelRatio")},e._getShapeEventObj=function(t){return{x:t.x/this.pixelRatio,y:t.y/this.pixelRatio,target:t.target,toElement:t.event.toElement||t.event.relatedTarget}},e._getShape=function(t,e){return this.view.get("canvas").getShape(t,e)},e._getPointInfo=function(t){var e={x:t.x/this.pixelRatio,y:t.y/this.pixelRatio},n=this.view.getViewsByPoint(e);return e.views=n,e},e._getEventObj=function(t,e,n){return{x:e.x,y:e.y,target:t.target,toElement:t.event.toElement||t.event.relatedTarget,views:n}},e.bindEvents=function(){var t=this.canvas;t.on("mousedown",a.wrapBehavior(this,"onDown")),t.on("mousemove",a.wrapBehavior(this,"onMove")),t.on("mouseleave",a.wrapBehavior(this,"onOut")),t.on("mouseup",a.wrapBehavior(this,"onUp")),t.on("click",a.wrapBehavior(this,"onClick")),t.on("dblclick",a.wrapBehavior(this,"onClick")),t.on("touchstart",a.wrapBehavior(this,"onTouchstart")),t.on("touchmove",a.wrapBehavior(this,"onTouchmove")),t.on("touchend",a.wrapBehavior(this,"onTouchend"))},e._triggerShapeEvent=function(t,e,n){if(t&&t.name&&!t.get("destroyed")){var r=this.view;if(r.isShapeInView(t)){var i=t.name+":"+e;n.view=r,n.appendInfo=t.get("appendInfo"),r.emit(i,n);var a=r.get("parent");a&&a.emit(i,n)}}},e.onDown=function(t){var e=this.view,n=this._getShapeEventObj(t);n.shape=this.currentShape,i(n),e.emit("mousedown",n),this._triggerShapeEvent(this.currentShape,"mousedown",n)},e.onMove=function(t){var e=this.view,n=this.currentShape;n&&n.get("destroyed")&&(n=null,this.currentShape=null);var a=this._getShape(t.x,t.y)||t.currentTarget,o=this._getShapeEventObj(t);if(o.shape=a,i(o),e.emit("mousemove",o),this._triggerShapeEvent(a,"mousemove",o),n&&!r(n,a)){var s=this._getShapeEventObj(t);s.shape=n,s.toShape=a,i(s),this._triggerShapeEvent(n,"mouseleave",s)}if(a&&!r(n,a)){var u=this._getShapeEventObj(t);u.shape=a,u.fromShape=n,i(u),this._triggerShapeEvent(a,"mouseenter",u)}this.currentShape=a;var l=this._getPointInfo(t),c=this.curViews||[];0===c.length&&l.views.length&&e.emit("plotenter",this._getEventObj(t,l,l.views)),c.length&&0===l.views.length&&e.emit("plotleave",this._getEventObj(t,l,c)),l.views.length&&((o=this._getEventObj(t,l,l.views)).shape=a,i(o),e.emit("plotmove",o)),this.curViews=l.views},e.onOut=function(t){var e=this.view,n=this._getPointInfo(t),r=this._getEventObj(t,n,this.curViews||[]);!this.curViews||0===this.curViews.length||r.toElement&&"CANVAS"===r.toElement.tagName||(e.emit("plotleave",r),this.curViews=[])},e.onUp=function(t){var e=this.view,n=this._getShapeEventObj(t);n.shape=this.currentShape,e.emit("mouseup",n),this._triggerShapeEvent(this.currentShape,"mouseup",n)},e.onClick=function(t){var e=this.view,n=this._getShape(t.x,t.y)||t.currentTarget,r=this._getShapeEventObj(t);r.shape=n,i(r),e.emit("click",r),this._triggerShapeEvent(n,t.type,r),this.currentShape=n;var o=this._getPointInfo(t),s=o.views;if(!a.isEmpty(s)){var u=this._getEventObj(t,o,s);this.currentShape&&(u.shape=this.currentShape,i(u)),e.emit("plotclick",u),"dblclick"===t.type&&(e.emit("plotdblclick",u),e.emit("dblclick",r))}},e.onTouchstart=function(t){var e=this.view,n=this._getShape(t.x,t.y)||t.currentTarget,r=this._getShapeEventObj(t);r.shape=n,i(r),e.emit("touchstart",r),this._triggerShapeEvent(n,"touchstart",r),this.currentShape=n},e.onTouchmove=function(t){var e=this.view,n=this._getShape(t.x,t.y)||t.currentTarget,r=this._getShapeEventObj(t);r.shape=n,i(r),e.emit("touchmove",r),this._triggerShapeEvent(n,"touchmove",r),this.currentShape=n},e.onTouchend=function(t){var e=this.view,n=this._getShapeEventObj(t);n.shape=this.currentShape,i(n),e.emit("touchend",n),this._triggerShapeEvent(this.currentShape,"touchend",n)},e.clearEvents=function(){var t=this.canvas;t.off("mousemove",a.getWrapBehavior(this,"onMove")),t.off("mouseleave",a.getWrapBehavior(this,"onOut")),t.off("mousedown",a.getWrapBehavior(this,"onDown")),t.off("mouseup",a.getWrapBehavior(this,"onUp")),t.off("click",a.getWrapBehavior(this,"onClick")),t.off("dblclick",a.getWrapBehavior(this,"onClick")),t.off("touchstart",a.getWrapBehavior(this,"onTouchstart")),t.off("touchmove",a.getWrapBehavior(this,"onTouchmove")),t.off("touchend",a.getWrapBehavior(this,"onTouchend"))},t}();t.exports=o},function(t,e,n){function r(t,e){var n=[];if(!1===t.get("animate"))return[];var i=t.get("children");return s.each(i,function(t){if(t.isGroup)n=n.concat(r(t,e));else if(t.isShape&&t._id){var i=t._id;(i=i.split("-")[0])===e&&n.push(t)}}),n}function i(t,e,n,r){return r?u.Action[n][r]:u.getAnimation(t,e,n)}function a(t,e,n){var r=u.getAnimateCfg(t,e);return n&&n[e]?s.deepMix({},r,n[e]):r}function o(t,e,n,r){var o,u,c=!1;if(r){var h=[],f=[];s.each(e,function(e){var n=t[e._id];n?(e.setSilent("cacheShape",n),h.push(e),delete t[e._id]):f.push(e)}),s.each(t,function(t){var e=t.name,r=t.coord,h=t._id,f=t.attrs,d=t.index,p=t.type;if(u=a(e,"leave",t.animateCfg),o=i(e,r,"leave",u.animation),s.isFunction(o)){var g=n.addShape(p,{attrs:f,index:d});if(g._id=h,g.name=e,r&&"label"!==e){var v=g.getMatrix(),m=l.multiply([],v,r.matrix);g.setMatrix(m)}c=!0,o(g,u,r)}}),s.each(h,function(t){var e=t.name,n=t.get("coord"),r=t.get("cacheShape").attrs;if(!s.isEqual(r,t.attr())){if(u=a(e,"update",t.get("animateCfg")),o=i(e,n,"update",u.animation),s.isFunction(o))o(t,u,n);else{var l=s.cloneDeep(t.attr());t.attr(r),t.animate(l,u.duration,u.easing,function(){t.setSilent("cacheShape",null)})}c=!0}}),s.each(f,function(t){var e=t.name,n=t.get("coord");u=a(e,"enter",t.get("animateCfg")),o=i(e,n,"enter",u.animation),s.isFunction(o)&&(o(t,u,n),c=!0)})}else s.each(e,function(t){var e=t.name,n=t.get("coord");u=a(e,"appear",t.get("animateCfg")),o=i(e,n,"appear",u.animation),s.isFunction(o)&&(o(t,u,n),c=!0)});return c}var s=n(0),u=n(119),l=s.MatrixUtil.mat3;t.exports={execAnimation:function(t,e){var n=t.get("middlePlot"),i=t.get("backPlot"),a=t.get("_id"),u=t.get("canvas"),l=u.get(a+"caches")||[];0===l.length&&(e=!1);var c=r(n,a),h=r(i,a),f=c.concat(h);u.setSilent(a+"caches",function(t){var e={};return s.each(f,function(t){if(t._id&&!t.isClip){var n=t._id;e[n]={_id:n,type:t.get("type"),attrs:s.cloneDeep(t.attr()),name:t.name,index:t.get("index"),animateCfg:t.get("animateCfg"),coord:t.get("coord")}}}),e}()),o(l,e?f:c,u,e)||u.draw()}}},function(t,e,n){var r=n(0),i=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){return{type:"plotBack",padding:null,background:null,plotRange:null,plotBackground:null}},n._beforeRenderUI=function(){this._calculateRange()},n._renderUI=function(){this._renderBackground(),this._renderPlotBackground()},n._renderBackground=function(){var t=this.get("background");if(t){var e=this.get("canvas"),n={x:0,y:0,width:this.get("width")||e.get("width"),height:this.get("height")||e.get("height")},i=this.get("backgroundShape");i?i.attr(n):(i=this.addShape("rect",{attrs:r.mix(n,t)}),this.set("backgroundShape",i))}},n._renderPlotBackground=function(){var t=this.get("plotBackground");if(t){var e=this.get("plotRange"),n=e.tl,i={x:n.x,y:n.y,width:e.br.x-e.bl.x,height:e.br.y-e.tr.y},a=this.get("plotBackShape");a?a.attr(i):(t.image?(i.img=t.image,a=this.addShape("image",{attrs:i})):(r.mix(i,t),a=this.addShape("rect",{attrs:i})),this.set("plotBackShape",a))}},n._convert=function(t,e){if(r.isString(t))if("auto"===t)t=0;else if(-1!==t.indexOf("%")){var n=this.get("canvas"),i=this.get("width")||n.get("width"),a=this.get("height")||n.get("height");t=parseInt(t,10)/100,t=e?t*i:t*a}return t},n._calculateRange=function(){var t=this.get("plotRange");r.isNil(t)&&(t={});var e=this.get("padding"),n=this.get("canvas"),i=this.get("width")||n.get("width"),a=this.get("height")||n.get("height"),o=r.toAllPadding(e),s=this._convert(o[0],!1),u=this._convert(o[1],!0),l=this._convert(o[2],!1),c=this._convert(o[3],!0),h=Math.min(c,i-u),f=Math.max(c,i-u),d=Math.min(a-l,s),p=Math.max(a-l,s);t.tl={x:h,y:d},t.tr={x:f,y:d},t.bl={x:h,y:p},t.br={x:f,y:p},t.cc={x:(f+h)/2,y:(p+d)/2},this.set("plotRange",t)},n.repaint=function(){return this._calculateRange(),this._renderBackground(),this._renderPlotBackground(),this},e}(n(6).Group);t.exports=i},function(t,e,n){var r=n(0),i=n(3);setTimeout(function(){if(i.trackable){var t=new Image,e=r.mix({},i.trackingInfo,{pg:document.URL,r:(new Date).getTime(),g2:!0,version:i.version,page_type:"syslog"}),n=encodeURIComponent(JSON.stringify([e]));t.src="https://kcart.alipay.com/web/bi.do?BIProfile=merge&d="+n}},3e3)},function(t,e,n){var r=n(3),i=n(0),a={getDefaultSize:function(){var t=this.get("defaultSize"),e=this.get("viewTheme")||r;if(!t){var n,a=this.get("coord"),o=this.getXScale(),s=o.values,u=this.get("dataArray");if(o.isLinear&&s.length>1){s.sort();var l=function(t,e){var n=t.length;i.isString(t[0])&&(t=t.map(function(t){return e.translate(t)}));for(var r=t[1]-t[0],a=2;a<n;a++){var o=t[a]-t[a-1];r>o&&(r=o)}return r}(s,o);s.length>(n=(o.max-o.min)/l)&&(n=s.length)}else n=s.length;var c=o.range,h=1/n,f=1;this.isInCircle()?f=a.isTransposed&&n>1?e.widthRatio.multiplePie:e.widthRatio.rose:(o.isLinear&&(h*=c[1]-c[0]),f=e.widthRatio.column),h*=f,this.hasAdjust("dodge")&&(h/=this._getDodgeCount(u)),this.set("defaultSize",t=h)}return t},_getDodgeCount:function(t){var e,n=this.get("adjusts"),r=t.length;if(i.each(n,function(t){"dodge"===t.type&&(e=t.dodgeBy)}),e){var a=i.Array.merge(t);r=i.Array.values(a,e).length}return r},getDimWidth:function(t){var e=this.get("coord"),n=e.convertPoint({x:0,y:0}),r=e.convertPoint({x:"x"===t?1:0,y:"x"===t?0:1}),i=0;return n&&r&&(i=Math.sqrt(Math.pow(r.x-n.x,2)+Math.pow(r.y-n.y,2))),i},_getWidth:function(){var t=this.get("coord");return this.isInCircle()&&!t.isTransposed?(t.endAngle-t.startAngle)*t.radius:this.getDimWidth("x")},_toNormalizedSize:function(t){return t/this._getWidth()},_toCoordSize:function(t){return this._getWidth()*t},getNormalizedSize:function(t){var e=this.getAttrValue("size",t);return i.isNil(e)?this.getDefaultSize():this._toNormalizedSize(e)},getSize:function(t){var e=this.getAttrValue("size",t);if(i.isNil(e)){var n=this.getDefaultSize();e=this._toCoordSize(n)}return e}};t.exports=a},function(t,e,n){var r=n(0),i=r.DomUtil,a=["start","process","end","reset"],o=function(){function t(t,e){var n=this,i=n.getDefaultCfg();r.assign(n,i,t),n.view=n.chart=e,n.canvas=e.get("canvas"),n._bindEvents()}var e=t.prototype;return e.getDefaultCfg=function(){return{startEvent:"mousedown",processEvent:"mousemove",endEvent:"mouseup",resetEvent:"dblclick"}},e._start=function(t){var e=this;e.preStart&&e.preStart(t),e.start(t),e.onStart&&e.onStart(t)},e._process=function(t){var e=this;e.preProcess&&e.preProcess(t),e.process(t),e.onProcess&&e.onProcess(t)},e._end=function(t){var e=this;e.preEnd&&e.preEnd(t),e.end(t),e.onEnd&&e.onEnd(t)},e._reset=function(t){var e=this;e.preReset&&e.preReset(t),e.reset(t),e.onReset&&e.onReset(t)},e.start=function(){},e.process=function(){},e.end=function(){},e.reset=function(){},e._bindEvents=function(){var t=this,e=t.canvas.get("canvasDOM");t._clearEvents(),r.each(a,function(n){var a=r.upperFirst(n);t["_on"+a+"Listener"]=i.addEventListener(e,t[n+"Event"],r.wrapBehavior(t,"_"+n))})},e._clearEvents=function(){var t=this;r.each(a,function(e){var n="_on"+r.upperFirst(e)+"Listener";t[n]&&t[n].remove()})},e.destroy=function(){this._clearEvents()},t}();t.exports=o},function(t,e,n){var r=n(0),i=n(3);t.exports={splitData:function(t){var e=this.get("viewTheme")||i;if(!t.length)return[];var n,a=[],o=[],s=this.getYScale().field;return r.each(t,function(t){n=t._origin?t._origin[s]:t[s],e.connectNulls?r.isNil(n)||o.push(t):r.isArray(n)&&r.isNil(n[0])||r.isNil(n)?o.length&&(a.push(o),o=[]):o.push(t)}),o.length&&a.push(o),a}}},function(t,e,n){function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var i=n(20),a=n(343),o=n(0),s=function(t){function e(e){var n;return n=t.call(this,e)||this,o.assign(r(r(n)),a),n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.type="path",e.shapeType="line",e},n.getDrawCfg=function(e){var n=t.prototype.getDrawCfg.call(this,e);return n.isStack=this.hasStack(),n},n.draw=function(t,e,n,r){var i=this,a=this.splitData(t),s=this.getDrawCfg(t[0]);s.origin=t,o.each(a,function(t,a){if(!o.isEmpty(t)){s.splitedIndex=a,s.points=t;var u=n.drawShape(s.shape,s,e);i.appendShapeInfo(u,r+a)}})},e}(i);i.Path=s,t.exports=s},function(t,e,n){"use strict";var r=n(355),i=n(356);e.a=function(t){var e=Object(r.a)(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===i.b&&e.documentElement.namespaceURI===i.b?e.createElement(t):e.createElementNS(n,t)}})(e)}},function(t,e,n){"use strict";e.a=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}},function(t,e,n){"use strict";e.b=function(t,e,n){var i=t._id;return t.each(function(){var t=Object(r.h)(this,i);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return Object(r.f)(t,i).value[e]}};var r=n(57);e.a=function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i,a=Object(r.f)(this.node(),n).tween,o=0,s=a.length;o<s;++o)if((i=a[o]).name===t)return i.value;return null}return this.each((null==e?function(t,e){var n,i;return function(){var a=Object(r.h)(this,t),o=a.tween;if(o!==n)for(var s=0,u=(i=n=o).length;s<u;++s)if(i[s].name===e){(i=i.slice()).splice(s,1);break}a.tween=i}}:function(t,e,n){var i,a;if("function"!=typeof n)throw new Error;return function(){var o=Object(r.h)(this,t),s=o.tween;if(s!==i){a=(i=s).slice();for(var u={name:e,value:n},l=0,c=a.length;l<c;++l)if(a[l].name===e){a[l]=u;break}l===c&&a.push(u)}o.tween=a}})(n,t,e))}},function(t,e,n){var r=n(3),i=n(0),a=i.assign,o=i.isNil,s=i.isArray,u=i.cloneDeep,l=i.wrapBehavior,c=i.getWrapBehavior,h=function(){function t(t){var e=this.getDefaultCfg();a(this,e,t),this.init()}var e=t.prototype;return e.getDefaultCfg=function(){return{chart:null,group:null,showTitle:!0,autoSetAxis:!0,padding:10,eachView:null,fields:[],colTitle:{offsetY:-15,style:{fontSize:14,textAlign:"center",fill:"#666",fontFamily:r.fontFamily}},rowTitle:{offsetX:15,style:{fontSize:14,textAlign:"center",rotate:90,fill:"#666",fontFamily:r.fontFamily}}}},e.init=function(){if(!this.chart)throw new Error("Facets Error: please specify the chart!");this._bindEvent(),this.initContainer(),this.chart.get("data")&&this.initViews()},e.initContainer=function(){var t=this.chart.get("frontPlot").addGroup();this.group=t},e.initViews=function(){for(var t=this.chart,e=t.get("data"),n=this.eachView,r=this.generateFacets(e),i=0;i<r.length;i++){var a=r[i],o=a.region,s=t.view({start:o.start,end:o.end,padding:this.padding});s.source(a.data),this.beforeProcessView(s,a),n&&n(s,a),this.afterProcessView(s,a),a.view=s}this.facets=r},e.beforeProcessView=function(){},e.afterProcessView=function(t,e){this.autoSetAxis&&this.processAxis(t,e)},e.processAxis=function(t,e){var n=t.get("options"),r=t.get("geoms");if((!n.coord.type||"rect"===n.coord.type)&&r.length){var i=r[0].get("attrOptions").position.field,a=s(i)?i:i.split("*").map(function(t){return t.trim()}),u=a[0],l=a[1];o(n.axes)&&(n.axes={});var c=n.axes;!1!==c&&(u&&!1!==c[u]&&(c[u]=c[u]||{},this.setXAxis(u,c,e)),l&&!1!==c[l]&&(c[l]=c[l]||{},this.setYAxis(l,c,e)))}},e.setXAxis=function(){},e.setYAxis=function(){},e.renderTitle=function(t,e){this.drawColTitle(t,e)},e.getScaleText=function(t,e,n){var r;if(t){var i=n.get("scales")[t];i||(i=n.createScale(t)),r=i.getText(e)}else r=e;return r},e.drawColTitle=function(t,e){var n=this.getScaleText(e.colField,e.colValue,t),r=a({position:["50%","0%"],content:n},this.colTitle);t.guide().text(r)},e.drawRowTitle=function(t,e){var n=this.getScaleText(e.rowField,e.rowValue,t),r=a({position:["100%","50%"],content:n},u(this.rowTitle));t.guide().text(r)},e.getFilter=function(t){return function(e){var n=!0;return t.forEach(function(t){var r=t.field,i=t.value,a=!0;!o(i)&&r&&(a=e[r]===i),n=n&&a}),n}},e.getFieldValues=function(t,e){for(var n=[],r={},i=0;i<e.length;i++){var a=e[i][t];o(a)||r[a]||(n.push(a),r[a]=!0)}return n},e.getRegion=function(t,e,n,r){var i=1/e,a=1/t,o={x:i*n,y:a*r};return{start:o,end:{x:o.x+i,y:o.y+a}}},e.generateFacets=function(){return[]},e._bindEvent=function(){var t=this.chart;t.on("afterchangedata",l(this,"onDataChange")),t.on("beforeclear",l(this,"onClear")),t.on("beforedestroy",l(this,"destroy")),t.on("beforepaint",l(this,"onPaint")),t.on("setdata",l(this,"onDataChange"))},e._clearEvent=function(){var t=this.chart;t&&(t.off("afterchangedata",c(this,"onDataChange")),t.off("beforeclear",c(this,"onClear")),t.off("beforedestroy",c(this,"destroy")),t.off("beforepaint",c(this,"onPaint")),t.off("setdata",c(this,"onDataChange")))},e._clearFacets=function(){var t=this.facets,e=this.chart;if(t)for(var n=0;n<t.length;n++)e.removeView(t[n].view);this.facets=null},e.onClear=function(){this.onRemove()},e.onPaint=function(){if(this.showTitle)for(var t=this.facets,e=0;e<t.length;e++){var n=t[e];this.renderTitle(n.view,n)}},e.onDataChange=function(){this._clearFacets(),this.initViews()},e.onRemove=function(){this._clearFacets(),this._clearEvent(),this.group&&this.group.remove(),this.chart=null,this.facets=null,this.group=null},e.destroy=function(){this.onRemove(),this.destroyed=!0},t}();t.exports=h},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var a=n(20),o=n(0),s=n(341);n(350);var u=function(t){function e(e){var n;return n=t.call(this,e)||this,o.assign(i(i(n)),s),n}r(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.type="interval",e.shapeType="interval",e.generatePoints=!0,e},n.createShapePointsCfg=function(e){var n=t.prototype.createShapePointsCfg.call(this,e);return n.size=this.getNormalizedSize(e),n},n.clearInner=function(){t.prototype.clearInner.call(this),this.set("defaultSize",null)},e}(a),l=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.hasDefaultAdjust=!0,e.adjusts=[{type:"stack"}],e},e}(u),c=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.hasDefaultAdjust=!0,e.adjusts=[{type:"dodge"}],e},e}(u),h=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.hasDefaultAdjust=!0,e.adjusts=[{type:"symmetric"}],e},e}(u);u.Stack=l,u.Dodge=c,u.Symmetric=h,a.Interval=u,a.IntervalStack=l,a.IntervalDodge=c,a.IntervalSymmetric=h,t.exports=u},function(t,e,n){function r(t,e){var n,r,i=t.x,a=t.y,o=t.size,s=t.y0,u=a;h.isArray(a)&&(u=a[1],s=a[0]),h.isArray(i)?(n=i[0],r=i[1]):(n=i-o/2,r=i+o/2);var l=[];return l.push({x:n,y:s},{x:n,y:u}),e?l.push({x:r,y:(u+s)/2}):l.push({x:r,y:u},{x:r,y:s}),l}function i(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];r&&e.push([0===n?"M":"L",r.x,r.y])}var i=t[0];return e.push(["L",i.x,i.y]),e.push(["z"]),e}function a(t){return h.mix({},g.shape.interval,{fill:t.color,stroke:t.color,fillOpacity:t.opacity},t.style)}function o(t){return h.mix({},g.shape.hollowInterval,{stroke:t.color,strokeOpacity:t.opacity},t.style)}function s(t,e){var n=[],r=t.points,i=t.nextPoints;return h.isNil(i)?n.push(["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["L",r[2].x,r[2].y],e?["L",r[3].x,r[3].y]:["L",r[2].x,r[2].y],["Z"]):n.push(["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["L",i[1].x,i[1].y],["L",i[0].x,i[0].y],["Z"]),n}function u(t,e,n,r){return 0===e?[[t+.5*n/Math.PI/2,r/2],[t+.5*n/Math.PI,r],[t+n/4,r]]:1===e?[[t+.5*n/Math.PI/2*(Math.PI-2),r],[t+.5*n/Math.PI/2*(Math.PI-1),r/2],[t+n/4,0]]:2===e?[[t+.5*n/Math.PI/2,-r/2],[t+.5*n/Math.PI,-r],[t+n/4,-r]]:[[t+.5*n/Math.PI/2*(Math.PI-2),-r],[t+.5*n/Math.PI/2*(Math.PI-1),-r/2],[t+n/4,0]]}function l(t,e,n,r,i,a,o){for(var s=2*Math.ceil(2*t/n*4),l=[];r<2*-Math.PI;)r+=2*Math.PI;for(;r>0;)r-=2*Math.PI;var c=a-t+(r=r/Math.PI/2*n)-2*t;l.push(["M",c,e]);for(var h=0,f=0;f<s;++f){var d=u(f*n/4,f%4,n,i);l.push(["C",d[0][0]+c,-d[0][1]+e,d[1][0]+c,-d[1][1]+e,d[2][0]+c,-d[2][1]+e]),f===s-1&&(h=d[2][0])}return l.push(["L",h+c,o+t]),l.push(["L",c,o+t]),l.push(["L",c,e]),l}function c(t,e,n,r,i,a,o,s){for(var u=o.getBBox(),c=u.maxX-u.minX,h=u.maxY-u.minY,f=0;f<r;f++){var d=a.addShape("path",{attrs:{path:l(s,u.minY+h*n,c/4,0,c/64,t,e),fill:i[f],clip:o}});"canvas"===g.renderer&&d.animate({transform:[["t",c/2,0]],repeat:!0},5e3-300*f)}}var h=n(0),f=n(17),d=n(21),p=h.PathUtil,g=n(3),v=n(6),m=f.registerFactory("interval",{defaultShapeType:"rect",getActiveCfg:function(t,e){return!t||h.inArray(["rect","funnel","pyramid"],t)?{fillOpacity:(e.fillOpacity||e.opacity||1)-.15}:{lineWidth:(e.lineWidth||0)+1}},getDefaultPoints:function(t){return r(t)},getSelectedCfg:function(t,e){return function(t,e){var n,r=e.geom.get("coord");if(r&&"theta"===r.type){var i=function(t,e){var n,r,i,a=e.getRadius(),o=a*e.innerRadius;return!h.isArray(t.x)&&h.isArray(t.y)&&(t.x=[t.x,t.x]),h.isArray(t.x)?(i={x:t.x[1],y:t.y[1]},n=d.getPointAngle(e,{x:t.x[0],y:t.y[0]}),(r=d.getPointAngle(e,i))<=n&&(r+=2*Math.PI)):(n=e.startAngle,r=d.getPointAngle(e,i=t)),{r:a,ir:o,startAngle:n,endAngle:r}}(e.point,r),a=(i.endAngle-i.startAngle)/2+i.startAngle;n={transform:[["t",7.5*Math.cos(a),7.5*Math.sin(a)]]}}return h.mix({},n)}(0,e)}});f.registerShape("interval","rect",{draw:function(t,e){var n=a(t),r=i(t.points);return r=this.parsePath(r),e.addShape("path",{attrs:h.mix(n,{path:r})})},getMarkerCfg:function(t){var e=a(t),n=t.isInCircle;return h.mix({symbol:n?"circle":"square",radius:n?4.5:4},e)}}),f.registerShape("interval","hollowRect",{draw:function(t,e){var n=o(t),r=i(t.points);return r=this.parsePath(r),e.addShape("path",{attrs:h.mix(n,{path:r})})},getMarkerCfg:function(t){var e=o(t),n=t.isInCircle;return h.mix({symbol:n?"circle":"square",radius:n?4.5:4},e)}}),f.registerShape("interval","line",{getPoints:function(t){return function(t){var e=t.x,n=t.y,r=t.y0,i=[];return h.isArray(n)?h.each(n,function(t,n){i.push({x:h.isArray(e)?e[n]:e,y:t})}):i.push({x:e,y:n},{x:e,y:r}),i}(t)},draw:function(t,e){var n=o(t);n.lineWidth=t.size||1;var r=i(t.points);return r=this.parsePath(r),e.addShape("path",{attrs:h.mix(n,{path:r})})},getMarkerCfg:function(t){var e=o(t);return h.mix({symbol:"line",radius:5},e)}}),f.registerShape("interval","tick",{getPoints:function(t){return function(t){var e=t.x,n=h.isArray(t.y)?t.y[1]:t.y,r=h.isArray(t.y)?t.y[0]:t.y0,i=t.size,a=[];return a.push({x:e-i/2,y:n},{x:e+i/2,y:n},{x:e,y:n},{x:e,y:r},{x:e-i/2,y:r},{x:e+i/2,y:r}),a}(t)},draw:function(t,e){var n=o(t),r=function(t){var e=[];return e.push(["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["M",t[2].x,t[2].y],["L",t[3].x,t[3].y],["M",t[4].x,t[4].y],["L",t[5].x,t[5].y]),e}(t.points);return r=this.parsePath(r),e.addShape("path",{attrs:h.mix(n,{path:r})})},getMarkerCfg:function(t){var e=o(t);return h.mix({symbol:"tick",radius:5},e)}}),f.registerShape("interval","funnel",{getPoints:function(t){return t.size=2*t.size,r(t)},draw:function(t,e){var n=a(t),r=s(t,!0);return r=this.parsePath(r),e.addShape("path",{attrs:h.mix(n,{path:r})})},getMarkerCfg:function(t){var e=a(t);return h.mix({symbol:"square",radius:4},e)}}),f.registerShape("interval","pyramid",{getPoints:function(t){return t.size=2*t.size,r(t,!0)},draw:function(t,e){var n=a(t),r=s(t,!1);return r=this.parsePath(r),e.addShape("path",{attrs:h.mix(n,{path:r})})},getMarkerCfg:function(t){var e=a(t);return h.mix({symbol:"square",radius:4},e)}}),f.registerShape("interval","liquid-fill-gauge",{draw:function(t,e){var n=0,r=1/0;h.each(t.points,function(t){t.x<r&&(r=t.x),n+=t.x});var i=this.parsePoint({x:n/t.points.length,y:.5}),s=this.parsePoint({x:r,y:.5}),u=Math.min(i.x-s.x,s.y),l=a(t),f=new v.Circle({attrs:{x:i.x,y:i.y,r:u}});return c(i.x,i.y,t.y/(2*i.y),1,[l.fill],e,f,4*u),e.addShape("circle",{attrs:h.mix(o(t),{x:i.x,y:i.y,r:u+u/8})})}});var y={};f.registerShape("interval","liquid-fill-path",{draw:function(t,e){var n=h.mix({},a(t)),r=t.shape[1],i=0,s=1/0;h.each(t.points,function(t){t.x<s&&(s=t.x),i+=t.x});var u,l=this.parsePoint({x:i/t.points.length,y:.5}),f=this.parsePoint({x:s,y:.5}),d=Math.min(l.x-f.x,f.y);if(y[r])u=y[r];else{var g=p.parsePathString(r);y[r]=u={segments:g}}var v=[];n.rotate&&(v.push(["r",n.rotate/180*Math.PI]),delete n.rotate);var m=e.addShape("path",{attrs:h.mix(n,{fillOpacity:0,path:u.segments})}),_=h.cloneDeep(m.getBBox()),b=_.maxX-_.minX,x=_.maxY-_.minY,w=2*d/Math.max(b,x);m.transform(v.concat([["s",w,w]]));var S=w*b/2,T=w*x/2;m.transform([["t",l.x-S,l.y-T]]),c(l.x,l.y,t.y/(2*l.y),1,[n.fill],e,m,4*f.y);var O=e.addShape("path",{attrs:h.mix(o(t),{path:u.segments})});return O.transform(v.concat([["s",w,w],["t",l.x-S,l.y-T]])),O}}),f.registerShape("interval","top-line",{draw:function(t,e){var n=a(t),r=t.style||{},o={stroke:r.stroke||"white",lineWidth:r.lineWidth||1,path:this.parsePath([["M",t.points[1].x,t.points[1].y],["L",t.points[2].x,t.points[2].y]])},s=i(t.points);s=this.parsePath(s),delete n.stroke;var u=e.addShape("path",{attrs:h.mix(n,{zIndex:0,path:s})});return e.addShape("path",{zIndex:1,attrs:o}),u},getMarkerCfg:function(t){var e=a(t),n=t.isInCircle;return h.mix({symbol:n?"circle":"square",radius:n?4.5:4},e)}}),t.exports=m},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var i=n(20),a=n(344);n(352);var o=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.type="line",e.sortable=!0,e},e}(a),s=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.hasDefaultAdjust=!0,e.adjusts=[{type:"stack"}],e},e}(o);o.Stack=s,i.Line=o,i.LineStack=s,t.exports=o},function(t,e,n){function r(t){return c.mix({},p.shape.line,{stroke:t.color,lineWidth:t.size,strokeOpacity:t.opacity,opacity:t.opacity},t.style)}function i(t){return c.mix({},p.shape.line,{stroke:t.color,lineWidth:2,strokeOpacity:t.opacity,opacity:t.opacity,radius:6},t.style)}function a(t,e,n,r){var i;if(e){var a=r.constraint;n&&t.length&&t.push({x:t[0].x,y:t[0].y}),i=h.getSplinePath(t,!1,a)}else i=h.getLinePath(t,!1),n&&i.push(["Z"]);return i}function o(t,e){var n=t.points,r=t.isInCircle;return c.isArray(n[0].y)?function(t,e,n,r){for(var i=[],o=r.isStack,s=[],u=0;u<t.length;u++){var l=f.splitPoints(t[u]);s.push(l[0]),i.push(l[1])}var c=a(i,e,n,r),h=a(s,e,n,r);return o?c:c.concat(h)}(n,e,r,t):a(n,e,r,t)}function s(t,e){return function(t){var e=[];return c.each(t,function(t,n){e.push(0===n?["M",t.x,t.y]:["L",t.x,t.y])}),e}(function(t,e){var n=[];return c.each(t,function(r,i){var a=t[i+1];n.push(r),a&&(n=n.concat(e(r,a)))}),n}(t.points,e))}function u(t,e){return c.mix({symbol:e?function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]}:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]}},i(t))}function l(t,e){return c.mix({symbol:e},i(t))}var c=n(0),h=n(21),f=n(144),d=n(17),p=n(3),g=[1,1],v=[5.5,1],m=d.registerFactory("line",{defaultShapeType:"line",getActiveCfg:function(t,e){return{lineWidth:(e.lineWidth||0)+1}},getDefaultPoints:function(t){return f.splitPoints(t)},drawShape:function(t,e,n){var r,i=this.getShape(t);return(r=1===e.points.length&&p.showSinglePoint?function(t,e,n){var r=e.points[0];return n.addShape("circle",{attrs:c.mix({x:r.x,y:r.y,r:2,fill:e.color},e.style)})}(0,e,n):i.draw(e,n))&&(r.set("origin",e.origin),r._id=e.splitedIndex?e._id+e.splitedIndex:e._id,r.name=this.name),r}});d.registerShape("line","line",{draw:function(t,e){var n=r(t),i=o(t,!1);return e.addShape("path",{attrs:c.mix(n,{path:i})})},getMarkerCfg:function(t){return u(t)}}),d.registerShape("line","dot",{draw:function(t,e){var n=r(t),i=o(t,!1);return e.addShape("path",{attrs:c.mix(n,{path:i,lineDash:g})})},getMarkerCfg:function(t){var e=u(t,!1);return e.lineDash=g,e}}),d.registerShape("line","dash",{draw:function(t,e){var n=r(t),i=o(t,!1);return e.addShape("path",{attrs:c.mix({path:i,lineDash:v},n)})},getMarkerCfg:function(t){var e=u(t,!1);return e.lineDash=e.lineDash||v,e}}),d.registerShape("line","smooth",{draw:function(t,e){var n=r(t),i=this._coord;t.constraint=[[i.start.x,i.end.y],[i.end.x,i.start.y]];var a=o(t,!0);return e.addShape("path",{attrs:c.mix(n,{path:a})})},getMarkerCfg:function(t){return u(t,!0)}}),d.registerShape("line","hv",{draw:function(t,e){var n=r(t),i=s(t,function(t,e){var n=[];return n.push({x:e.x,y:t.y}),n});return e.addShape("path",{attrs:c.mix(n,{path:i})})},getMarkerCfg:function(t){return l(t,function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]})}}),d.registerShape("line","vh",{draw:function(t,e){var n=r(t),i=s(t,function(t,e){var n=[];return n.push({x:t.x,y:e.y}),n});return e.addShape("path",{attrs:c.mix(n,{path:i})})},getMarkerCfg:function(t){return l(t,function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]})}}),d.registerShape("line","hvh",{draw:function(t,e){var n=r(t),i=s(t,function(t,e){var n=[],r=(e.x-t.x)/2+t.x;return n.push({x:r,y:t.y}),n.push({x:r,y:e.y}),n});return e.addShape("path",{attrs:c.mix(n,{path:i})})},getMarkerCfg:function(t){return l(t,function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]})}}),d.registerShape("line","vhv",{draw:function(t,e){var n=r(t),i=s(t,function(t,e){var n=[],r=(e.y-t.y)/2+t.y;return n.push({x:t.x,y:r}),n.push({x:e.x,y:r}),n});return e.addShape("path",{attrs:c.mix(n,{path:i})})},getMarkerCfg:function(t){return l(t,function(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]})}}),m.spline=m.smooth,t.exports=m},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var i=n(20),a=n(0);n(354);var o=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.type="point",e.shapeType="point",e.generatePoints=!0,e},n.drawPoint=function(t,e,n,r){var i,o=this,s=t.shape,u=o.getDrawCfg(t);if(a.isArray(t.y)){var l=o.hasStack();a.each(t.y,function(t,a){u.y=t,u.yIndex=a,l&&0===a||(i=n.drawShape(s,u,e),o.appendShapeInfo(i,r+a))})}else a.isNil(t.y)||(i=n.drawShape(s,u,e),o.appendShapeInfo(i,r))},e}(i),s=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.hasDefaultAdjust=!0,e.adjusts=[{type:"jitter"}],e},e}(o),u=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.hasDefaultAdjust=!0,e.adjusts=[{type:"stack"}],e},e}(o);o.Jitter=s,o.Stack=u,i.Point=o,i.PointJitter=s,i.PointStack=u,t.exports=o},function(t,e,n){function r(t){return a.mix({},u.shape.point,{fill:t.color,fillOpacity:t.opacity,radius:t.size},t.style)}function i(t){return a.mix({},u.shape.hollowPoint,{stroke:t.color,strokeOpacity:t.opacity,radius:t.size},t.style)}var a=n(0),o=a.PathUtil,s=n(144),u=n(3),l=n(17),c=n(6).Marker,h=["cross","tick","plus","hyphen","line","pointerLine","pointerArrow"],f=Math.sqrt(3);a.mix(c.Symbols,{hexagon:function(t,e,n){var r=n/2*f;return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]},bowtie:function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]},cross:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]},tick:function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},plus:function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]},hyphen:function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},line:function(t,e,n){return[["M",t,e-n],["L",t,e+n]]}});var d=l.registerFactory("point",{defaultShapeType:"hollowCircle",getActiveCfg:function(t,e){var n,r=e.radius;return{radius:r+1,shadowBlur:r,shadowColor:n=t&&(0===t.indexOf("hollow")||-1!==a.indexOf(h,t))||!t?e.stroke||e.strokeStyle:e.fill||e.fillStyle,stroke:n,strokeOpacity:1,lineWidth:1}},getDefaultPoints:function(t){return s.splitPoints(t)}});l.registerShape("point","rect",{draw:function(t,e){var n=r(t),i=function(t){var e=t.points[0].x,n=t.points[0].y,r=t.size[0],i=t.size[1];return[["M",e-.5*r,n-.5*i],["L",e+.5*r,n-.5*i],["L",e+.5*r,n+.5*i],["L",e-.5*r,n+.5*i],["z"]]}(t);return i=this.parsePath(i),e.addShape("path",{attrs:a.mix(n,{path:i})})},getMarkerCfg:function(t){var e=r(t);return e.symbol="rect",e.radius=4.5,e}}),a.each(["circle","square","bowtie","diamond","hexagon","triangle","triangle-down"],function(t){l.registerShape("point",t,{draw:function(e,n){var i=r(e);return n.addShape("Marker",{attrs:a.mix(i,{symbol:t,x:e.x,y:e.y})})},getMarkerCfg:function(e){var n=r(e);return n.symbol=t,n.radius=4.5,n}}),l.registerShape("point","hollow"+a.upperFirst(t),{draw:function(e,n){var r=i(e);return n.addShape("Marker",{attrs:a.mix(r,{symbol:t,x:e.x,y:e.y})})},getMarkerCfg:function(e){var n=i(e);return n.symbol=t,n.radius=4.5,n}})}),a.each(h,function(t){l.registerShape("point",t,{draw:function(e,n){var r=i(e);return n.addShape("Marker",{attrs:a.mix(r,{symbol:t,x:e.x,y:e.y})})},getMarkerCfg:function(e){var n=i(e);return n.symbol=t,n.radius=4.5,n}})}),l.registerShape("point","image",{draw:function(t,e){return t.points=this.parsePoints(t.points),e.addShape("image",{attrs:{x:t.points[0].x-t.size/2,y:t.points[0].y-t.size,width:t.size,height:t.size,img:t.shape[1]}})}});var p={};l.registerShape("point","path",{draw:function(t,e){var n,s=a.mix({},i(t),r(t)),u=t.shape[1],l=t.size||10;if(p[u])n=p[u];else{var c=o.parsePathString(u),h=a.flatten(c).filter(function(t){return a.isNumber(t)});p[u]=n={range:Math.max.apply(null,h)-Math.min.apply(null,h),segments:c}}var f=l/n.range,d=[];s.rotate&&(d.push(["r",s.rotate/180*Math.PI]),delete s.rotate);var g=e.addShape("path",{attrs:a.mix(s,{path:n.segments})});return d.push(["s",f,f],["t",t.x,t.y]),g.transform(d),g}}),t.exports=d},function(t,e,n){"use strict";var r=n(356);e.a=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),r.a.hasOwnProperty(e)?{space:r.a[e],local:t}:t}},function(t,e,n){"use strict";n.d(e,"b",function(){return r});var r="http://www.w3.org/1999/xhtml";e.a={svg:"http://www.w3.org/2000/svg",xhtml:r,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},function(t,e,n){"use strict";e.a=function(t){return null==t?function(){}:function(){return this.querySelector(t)}}},function(t,e,n){"use strict";e.a=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}},function(t,e,n){"use strict";function r(t,e,n){return function(r){var i=o;o=r;try{t.call(this,this.__data__,e,n)}finally{o=i}}}function i(t,e,n){var i=a.hasOwnProperty(t.type)?function(t,e,n){return t=r(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}:r;return function(r,a,o){var s,u=this.__on,l=i(e,a,o);if(u)for(var c=0,h=u.length;c<h;++c)if((s=u[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=l,s.capture=n),void(s.value=e);this.addEventListener(t.type,l,n),s={type:t.type,name:t.name,value:e,listener:l,capture:n},u?u.push(s):this.__on=[s]}}n.d(e,"c",function(){return o}),e.a=function(t,e,n,r){var i=o;t.sourceEvent=o,o=t;try{return e.apply(n,r)}finally{o=i}};var a={},o=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(a={mouseenter:"mouseover",mouseleave:"mouseout"})),e.b=function(t,e,n){var r,a,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),s=o.length;if(!(arguments.length<2)){for(u=e?i:function(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}},null==n&&(n=!1),r=0;r<s;++r)this.each(u(o[r],e,n));return this}var u=this.node().__on;if(u)for(var l,c=0,h=u.length;c<h;++c)for(r=0,l=u[c];r<s;++r)if((a=o[r]).type===l.type&&a.name===l.name)return l.value}},function(t,e,n){"use strict";var r=n(359);e.a=function(){for(var t,e=r.c;t=e.sourceEvent;)e=t;return e}},function(t,e,n){"use strict";var r=n(56);e.a=function(t){return"string"==typeof t?new r.a([[document.querySelector(t)]],[document.documentElement]):new r.a([[t]],r.c)}},function(t,e,n){"use strict";e.a=function(t){return null==t?function(){return[]}:function(){return this.querySelectorAll(t)}}},function(t,e,n){"use strict";var r=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var i=document.documentElement;if(!i.matches){var a=i.webkitMatchesSelector||i.msMatchesSelector||i.mozMatchesSelector||i.oMatchesSelector;r=function(t){return function(){return a.call(this,t)}}}}e.a=r},function(t,e,n){"use strict";function r(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}e.a=r;var i=n(365),a=n(56);e.b=function(){return new a.a(this._enter||this._groups.map(i.a),this._parents)},r.prototype={constructor:r,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}}},function(t,e,n){"use strict";e.a=function(t){return new Array(t.length)}},function(t,e,n){"use strict";function r(t,e){return t.style.getPropertyValue(e)||Object(i.a)(t).getComputedStyle(t,null).getPropertyValue(e)}e.b=r;var i=n(358);e.a=function(t,e,n){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}:function(t,e,n){return function(){this.style.setProperty(t,e,n)}})(t,e,null==n?"":n)):r(this.node(),t)}},function(t,e,n){"use strict";var r=n(57);e.a=function(t,e){var n,i,a,o=t.__transition,s=!0;if(o){for(a in e=null==e?null:e+"",o)(n=o[a]).name===e?(i=n.state>r.d&&n.state<r.b,n.state=r.a,n.timer.stop(),i&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[a]):s=!1;s&&delete t.__transition}}},function(t,e,n){"use strict";var r=n(19),i=n(110);e.a=function(t,e){var n;return("number"==typeof e?i.interpolateNumber:e instanceof r.a?i.interpolateRgb:(n=Object(r.a)(e))?(e=n,i.interpolateRgb):i.interpolateString)(t,e)}},function(t,e,n){var r=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.type="rect",e},n.generateFacets=function(t){var e=this,n=e.fields,r=[],i=1,a=1,o=n[0],s=n[1],u=[""],l=[""];return o&&(u=e.getFieldValues(o,t),a=u.length),s&&(l=e.getFieldValues(s,t),i=l.length),u.forEach(function(n,c){l.forEach(function(h,f){var d=e.getFilter([{field:o,value:n,values:u},{field:s,value:h,values:l}]),p=t.filter(d),g={type:e.type,colValue:n,rowValue:h,colField:o,rowField:s,colIndex:c,rowIndex:f,cols:a,rows:i,data:p,region:e.getRegion(i,a,c,f)};r.push(g)})}),r},n.setXAxis=function(t,e,n){n.rowIndex!==n.rows-1?(e[t].title=null,e[t].label=null):n.colIndex!==parseInt((n.cols-1)/2)&&(e[t].title=null)},n.setYAxis=function(t,e,n){0!==n.colIndex?(e[t].title=null,e[t].label=null):n.rowIndex!==parseInt((n.rows-1)/2)&&(e[t].title=null)},n.renderTitle=function(t,e){0===e.rowIndex&&this.drawColTitle(t,e),e.colIndex===e.cols-1&&this.drawRowTitle(t,e)},e}(n(348));t.exports=r},function(t,e,n){var r=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.type="list",e.cols=null,e},n.generateFacets=function(t){var e=this,n=e.fields[0];if(!n)throw"Please specify for the field for facet!";var r=e.getFieldValues(n,t),i=r.length,a=e.cols||i,o=parseInt((i+a-1)/a),s=[];return r.forEach(function(u,l){var c=parseInt(l/a),h=l%a,f=e.getFilter([{field:n,value:u,values:r}]),d=t.filter(f),p={type:e.type,count:i,colValue:u,colField:n,rowField:null,rowValue:u,colIndex:h,rowIndex:c,cols:a,rows:o,data:d,region:e.getRegion(o,a,h,c)};s.push(p)}),s},n.setXAxis=function(t,e,n){n.rowIndex!==n.rows-1&&n.cols*n.rowIndex+n.colIndex+1+n.cols<=n.count&&(e[t].label=null,e[t].title=null)},n.setYAxis=function(t,e,n){0!==n.colIndex&&(e[t].title=null,e[t].label=null)},e}(n(348));t.exports=r},function(t,e,n){var r=n(140);n(372),n(374),n(376),n(349),n(351),n(344),n(353),n(377),n(379),n(381),n(441),n(443),n(448),t.exports=r},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var a=n(20),o=n(343),s=n(0);n(373);var u=function(t){function e(e){var n;return n=t.call(this,e)||this,s.assign(i(i(n)),o),n}r(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.type="area",e.shapeType="area",e.generatePoints=!0,e.sortable=!0,e},n.draw=function(t,e,n,r){var i=this,a=this.getDrawCfg(t[0]),o=this.splitData(t);a.origin=t,s.each(o,function(t,o){a.splitedIndex=o;var s=t.map(function(t){return t.points});a.points=s;var u=n.drawShape(a.shape,a,e);i.appendShapeInfo(u,r+o)})},e}(a),l=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.hasDefaultAdjust=!0,e.adjusts=[{type:"stack"}],e},e}(u);u.Stack=l,a.Area=u,a.AreaStack=l,t.exports=u},function(t,e,n){function r(t){return s.mix({},c.shape.hollowArea,{stroke:t.color,lineWidth:t.size,strokeOpacity:t.opacity},t.style)}function i(t){return s.mix({},c.shape.area,{fill:t.color,stroke:t.color,lineWidth:t.size,fillOpacity:t.opacity},t.style)}function a(t,e,n){var r=[],i=[],a=[],o=[],u=t.isInCircle;return s.each(t.points,function(t){a.push(t[1]),o.push(t[0])}),o=o.reverse(),i.push(a,o),s.each(i,function(i,a){var o=[],s=(i=n.parsePoints(i))[0];u&&i.push({x:s.x,y:s.y}),o=e?l.getSplinePath(i,!1,t.constraint):l.getLinePath(i,!1),a>0&&(o[0][0]="L"),r=r.concat(o)}),r.push(["Z"]),r}function o(t){return{symbol:function(t,e){return[["M",t-5.5,e-4],["L",t+5.5,e-4],["L",t+5.5,e+4],["L",t-5.5,e+4]]},radius:5,fill:t.color,fillOpacity:.3}}var s=n(0),u=n(17),l=n(21),c=n(3),h=u.registerFactory("area",{defaultShapeType:"area",getDefaultPoints:function(t){var e=[],n=t.x,r=t.y,i=t.y0;return r=s.isArray(r)?r:[i,r],s.each(r,function(t){e.push({x:n,y:t})}),e},getActiveCfg:function(t,e){return function(t,e){if("line"===t||"smoothLine"===t)return{lineWidth:(e.lineWidth||0)+1};var n=e.fillOpacity||e.opacity||1;return{fillOpacity:n-.15,strokeOpacity:n-.15}}(t,e)},drawShape:function(t,e,n){var r,i=this.getShape(t);return(r=1===e.points.length&&c.showSinglePoint?function(t,e,n){var r=t._coord.convertPoint(e.points[0][1]);return n.addShape("circle",{attrs:s.mix({x:r.x,y:r.y,r:2,fill:e.color},e.style)})}(this,e,n):i.draw(e,n))&&(r.set("origin",e.origin),r._id=e.splitedIndex?e._id+e.splitedIndex:e._id,r.name=this.name),r},getSelectedCfg:function(t,e){return e&&e.style?e.style:this.getActiveCfg(t,e)}});u.registerShape("area","area",{draw:function(t,e){var n=i(t),r=a(t,!1,this);return e.addShape("path",{attrs:s.mix(n,{path:r})})},getMarkerCfg:function(t){return o(t)}}),u.registerShape("area","smooth",{draw:function(t,e){var n=i(t),r=this._coord;t.constraint=[[r.start.x,r.end.y],[r.end.x,r.start.y]];var o=a(t,!0,this);return e.addShape("path",{attrs:s.mix(n,{path:o})})},getMarkerCfg:function(t){return o(t)}}),u.registerShape("area","line",{draw:function(t,e){var n=r(t),i=a(t,!1,this);return e.addShape("path",{attrs:s.mix(n,{path:i})})},getMarkerCfg:function(t){return o(t)}}),u.registerShape("area","smoothLine",{draw:function(t,e){var n=r(t),i=a(t,!0,this);return e.addShape("path",{attrs:s.mix(n,{path:i})})},getMarkerCfg:function(t){return o(t)}}),h.spline=h.smooth,t.exports=h},function(t,e,n){var r=n(20);n(375);var i=function(t){function e(){return t.apply(this,arguments)||this}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.type="edge",e.shapeType="edge",e.generatePoints=!0,e},e}(r);r.Edge=i,t.exports=i},function(t,e,n){function r(t){return o.mix({},l.shape.edge,{stroke:t.color,lineWidth:t.size,strokeOpacity:t.opacity,opacity:t.opacity},t.style)}function i(t,e){var n=[];n.push({x:t.x,y:.5*t.y+1*e.y/2}),n.push({y:.5*t.y+1*e.y/2,x:e.x}),n.push(e);var r=["C"];return o.each(n,function(t){r.push(t.x,t.y)}),r}function a(t,e){var n=[];n.push({x:e.x,y:e.y}),n.push(t);var r=["Q"];return o.each(n,function(t){r.push(t.x,t.y)}),r}var o=n(0),s=n(17),u=n(144),l=n(3),c=n(21),h=1/3,f=s.registerFactory("edge",{defaultShapeType:"line",getDefaultPoints:function(t){return u.splitPoints(t)},getActiveCfg:function(t,e){return{lineWidth:(e.lineWidth||0)+1}}});s.registerShape("edge","line",{draw:function(t,e){var n=this.parsePoints(t.points),i=r(t),a=c.getLinePath(n);return e.addShape("path",{attrs:o.mix(i,{path:a})})},getMarkerCfg:function(t){return o.mix({symbol:"circle",radius:4.5},r(t))}}),s.registerShape("edge","vhv",{draw:function(t,e){var n=t.points,i=r(t),a=function(t,e){var n=[];n.push({y:t.y*(1-h)+e.y*h,x:t.x}),n.push({y:t.y*(1-h)+e.y*h,x:e.x}),n.push(e);var r=[["M",t.x,t.y]];return o.each(n,function(t){r.push(["L",t.x,t.y])}),r}(n[0],n[1]);return a=this.parsePath(a),e.addShape("path",{attrs:o.mix(i,{path:a})})},getMarkerCfg:function(t){return o.mix({symbol:"circle",radius:4.5},r(t))}}),s.registerShape("edge","smooth",{draw:function(t,e){var n=t.points,a=r(t),s=function(t,e){var n=i(t,e),r=[["M",t.x,t.y]];return r.push(n),r}(n[0],n[1]);return s=this.parsePath(s),e.addShape("path",{attrs:o.mix(a,{path:s})})},getMarkerCfg:function(t){return o.mix({symbol:"circle",radius:4.5},r(t))}}),s.registerShape("edge","arc",{draw:function(t,e){var n,s,u=t.points,l=u.length>2?"weight":"normal",c=r(t);if(t.isInCircle){var h={x:0,y:1};"normal"===l?s=function(t,e,n){var r=a(u[1],h),i=[["M",t.x,t.y]];return i.push(r),i}(u[0]):(c.fill=c.stroke,s=function(t,e){var n=a(t[1],e),r=a(t[3],e),i=[["M",t[0].x,t[0].y]];return i.push(r),i.push(["L",t[3].x,t[3].y]),i.push(["L",t[2].x,t[2].y]),i.push(n),i.push(["L",t[1].x,t[1].y]),i.push(["L",t[0].x,t[0].y]),i.push(["Z"]),i}(u,h)),s=this.parsePath(s),n=e.addShape("path",{attrs:o.mix(c,{path:s})})}else if("normal"===l)u=this.parsePoints(u),n=e.addShape("arc",{attrs:o.mix(c,{x:(u[1].x+u[0].x)/2,y:u[0].y,r:Math.abs(u[1].x-u[0].x)/2,startAngle:Math.PI,endAngle:2*Math.PI})});else{s=[["M",u[0].x,u[0].y],["L",u[1].x,u[1].y]];var f=i(u[1],u[3]),d=i(u[2],u[0]);s.push(f),s.push(["L",u[3].x,u[3].y]),s.push(["L",u[2].x,u[2].y]),s.push(d),s.push(["Z"]),s=this.parsePath(s),c.fill=c.stroke,n=e.addShape("path",{attrs:o.mix(c,{path:s})})}return n},getMarkerCfg:function(t){return o.mix({symbol:"circle",radius:4.5},r(t))}}),t.exports=f},function(t,e,n){var r=n(59).ColorUtil,i=n(20),a=n(0),o={},s=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.type="heatmap",e},n._prepareRange=function(){var t=this.get("mappedData"),e=this.getAttr("color").field,n=1/0,r=-1/0;t.forEach(function(t){var i=t._origin[e];i>r&&(r=i),i<n&&(n=i)}),n===r&&(n=r-1),this.set("valueRange",[n,r])},n._prepareSize=function(){var t=this.getDefaultValue("size");a.isNumber(t)||(t=this._getDefaultSize());var e=this.get("styleOptions"),n=e&&a.isObject(e.style)?e.style.blur:null;a.isFinite(n)&&null!==n||(n=t/2),this.set("heatmapSize",{blur:n,radius:t})},n._getDefaultSize=function(){var t=this.getAttr("position"),e=this.get("coord");return Math.min(e.width/(4*t.scales[0].ticks.length),e.height/(4*t.scales[1].ticks.length))},n._colorize=function(t){for(var e=this.getAttr("color"),n=t.data,i=3;i<n.length;i+=4){var a=n[i];if(a){var s=void 0;o[a]?s=o[a]:(s=r.rgb2arr(e.gradient(a/256)),o[a]=s),n[i-3]=s[0],n[i-2]=s[1],n[i-1]=s[2],n[i]=a}}},n._prepareGreyScaleBlurredCircle=function(t,e){var n=this.get("grayScaleBlurredCanvas");n||(n=document.createElement("canvas"),this.set("grayScaleBlurredCanvas",n));var r=t+e,i=n.getContext("2d");n.width=n.height=2*r,i.clearRect(0,0,n.width,n.height),i.shadowOffsetX=i.shadowOffsetY=2*r,i.shadowBlur=e,i.shadowColor="black",i.beginPath(),i.arc(-r,-r,t,0,2*Math.PI,!0),i.closePath(),i.fill()},n._drawGrayScaleBlurredCircle=function(t,e,n,r,i){var a=this.get("grayScaleBlurredCanvas");i.globalAlpha=r,i.drawImage(a,t-n,e-n)},n._getShadowCanvasCtx=function(){var t=this.get("shadowCanvas");t||(t=document.createElement("canvas"),this.set("shadowCanvas",t));var e=this.get("coord"),n=e.height;return t.width=e.width,t.height=n,t.getContext("2d")},n._clearShadowCanvasCtx=function(){var t=this._getShadowCanvasCtx();t.clearRect(0,0,t.canvas.width,t.canvas.height)},n._getImageShape=function(){var t=this.get("imageShape");return t||(t=this.get("container").addShape("Image",{}),this.set("imageShape",t),t)},n.drawWithRange=function(t){var e=this.get("coord"),n=e.start,r=e.end,i=e.width,a=e.height,o=this.getAttr("color").field,s=this.get("heatmapSize");this._clearShadowCanvasCtx();var u=this._getShadowCanvasCtx(),l=this.get("mappedData");t&&(l=l.filter(function(e){return e._origin[o]<=t[1]&&e._origin[o]>=t[0]}));for(var c=this._getScale(o),h=0;h<l.length;h++){var f=l[h],d=this.getDrawCfg(f),p=c.scale(f._origin[o]);this._drawGrayScaleBlurredCircle(d.x-n.x,d.y-r.y,s.radius+s.blur,p,u)}var g=u.getImageData(0,0,i,a);this._clearShadowCanvasCtx(),this._colorize(g),u.putImageData(g,0,0);var v=this._getImageShape();v.attr("x",n.x),v.attr("y",r.y),v.attr("width",i),v.attr("height",a),v.attr("img",u.canvas)},n.draw=function(t){this.set("mappedData",t),this._prepareRange(),this._prepareSize();var e=this.get("heatmapSize");this._prepareGreyScaleBlurredCircle(e.radius,e.blur);var n=this.get("valueRange");this.drawWithRange(n)},e}(i);i.Heatmap=s,t.exports=s},function(t,e,n){var r=n(20),i=n(0);n(378);var a=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.type="polygon",e.shapeType="polygon",e.generatePoints=!0,e},n.createShapePointsCfg=function(e){var n,r=t.prototype.createShapePointsCfg.call(this,e),a=r.x,o=r.y;if(!i.isArray(a)||!i.isArray(o)){var s=this.getXScale(),u=this.getYScale(),l=.5/(s.values?s.values.length:s.ticks.length),c=.5/(u.values?u.values.length:u.ticks.length);s.isCategory&&u.isCategory?(a=[a-l,a-l,a+l,a+l],o=[o-c,o+c,o+c,o-c]):i.isArray(a)?(a=[(n=a)[0],n[0],n[1],n[1]],o=[o-c/2,o+c/2,o+c/2,o-c/2]):i.isArray(o)&&(o=[(n=o)[0],n[1],n[1],n[0]],a=[a-l/2,a-l/2,a+l/2,a+l/2]),r.x=a,r.y=o}return r},e}(r);r.Polygon=a,t.exports=a},function(t,e,n){function r(t){return a.mix({},s.shape.polygon,{stroke:t.color,fill:t.color,fillOpacity:t.opacity},t.style)}function i(t){for(var e=t[0],n=1,r=[["M",e.x,e.y]];n<t.length;){var i=t[n];i.x===t[n-1].x&&i.y===t[n-1].y||(r.push(["L",i.x,i.y]),i.x===e.x&&i.y===e.y&&n<t.length-1&&(e=t[n+1],r.push(["Z"]),r.push(["M",e.x,e.y]),n++)),n++}return a.isEqual(r[r.length-1],e)||r.push(["L",e.x,e.y]),r.push(["Z"]),r}var a=n(0),o=n(17),s=n(3),u=o.registerFactory("polygon",{defaultShapeType:"polygon",getDefaultPoints:function(t){var e=[];return a.each(t.x,function(n,r){e.push({x:n,y:t.y[r]})}),e},getActiveCfg:function(t,e){return"hollow"===t?{lineWidth:(e.lineWidth||1)+1}:{fillOpacity:(e.fillOpacity||e.opacity||1)-.08}},getSelectedCfg:function(t,e){return e&&e.style?e.style:this.getActiveCfg(t,e)}});o.registerShape("polygon","polygon",{draw:function(t,e){if(!a.isEmpty(t.points)){var n=r(t),o=i(t.points);return o=this.parsePath(o),e.addShape("path",{attrs:a.mix(n,{path:o})})}},getMarkerCfg:function(t){return a.mix({symbol:"square",radius:4},r(t))}}),o.registerShape("polygon","hollow",{draw:function(t,e){if(!a.isEmpty(t.points)){var n=function(t){return a.mix({},s.shape.hollowPolygon,{stroke:t.color,strokeOpacity:t.opacity},t.style)}(t),r=i(t.points);return r=this.parsePath(r),e.addShape("path",{attrs:a.mix(n,{path:r})})}},getMarkerCfg:function(t){return a.mix({symbol:"square",radius:4},r(t))}}),t.exports=u},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var a=n(20),o=n(0),s=n(341);n(380);var u=function(t){function e(e){var n;return n=t.call(this,e)||this,o.assign(i(i(n)),s),n}r(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.type="schema",e.shapeType="schema",e.generatePoints=!0,e},n.createShapePointsCfg=function(e){var n=t.prototype.createShapePointsCfg.call(this,e);return n.size=this.getNormalizedSize(e),n},e}(a),l=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.hasDefaultAdjust=!0,e.adjusts=[{type:"dodge"}],e},e}(u);u.Dodge=l,a.Schema=u,a.SchemaDodge=l,t.exports=u},function(t,e,n){function r(t){o.isArray(t)||(t=[t]);var e=t[0],n=t[t.length-1],r=t.length>1?t[1]:e;return{min:e,max:n,min1:r,max1:t.length>3?t[3]:n,median:t.length>2?t[2]:r}}function i(t,e,n){var i,a,s=[];return o.isArray(e)?i=[[t-n/2,(a=r(e)).max],[t+n/2,a.max],[t,a.max],[t,a.max1],[t-n/2,a.min1],[t-n/2,a.max1],[t+n/2,a.max1],[t+n/2,a.min1],[t,a.min1],[t,a.min],[t-n/2,a.min],[t+n/2,a.min],[t-n/2,a.median],[t+n/2,a.median]]:(e=e||.5,i=[[(a=r(t)).min,e-n/2],[a.min,e+n/2],[a.min,e],[a.min1,e],[a.min1,e-n/2],[a.min1,e+n/2],[a.max1,e+n/2],[a.max1,e-n/2],[a.max1,e],[a.max,e],[a.max,e-n/2],[a.max,e+n/2],[a.median,e-n/2],[a.median,e+n/2]]),function(t,e){o.each(i,function(t){e.push({x:t[0],y:t[1]})})}(0,s),s}function a(t,e,n){var r=function(t){o.isArray(t)||(t=[t]);var e=t.sort(function(t,e){return t<e?1:-1}),n=e.length;if(n<4)for(var r=e[n-1],i=0;i<4-n;i++)e.push(r);return e}(e);return[{x:t,y:r[0]},{x:t,y:r[1]},{x:t-n/2,y:r[2]},{x:t-n/2,y:r[1]},{x:t+n/2,y:r[1]},{x:t+n/2,y:r[2]},{x:t,y:r[2]},{x:t,y:r[3]}]}var o=n(0),s=n(17),u=n(3),l=s.registerFactory("schema",{defaultShapeType:"",getActiveCfg:function(t,e){if("box"===t)return{lineWidth:(e.lineWidth||1)+1};var n=e.fillOpacity||e.opacity||1;return{fillOpacity:n-.15,strokeOpacity:n-.15}},getSelectedCfg:function(t,e){return e&&e.style?e.style:this.getActiveCfg(t,e)}});s.registerShape("schema","box",{getPoints:function(t){return i(t.x,t.y,t.size)},draw:function(t,e){var n=function(t){return o.mix({},u.shape.schema,{stroke:t.color,strokeOpacity:t.opacity},t.style)}(t),r=function(t){return[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["M",t[2].x,t[2].y],["L",t[3].x,t[3].y],["M",t[4].x,t[4].y],["L",t[5].x,t[5].y],["L",t[6].x,t[6].y],["L",t[7].x,t[7].y],["L",t[4].x,t[4].y],["Z"],["M",t[8].x,t[8].y],["L",t[9].x,t[9].y],["M",t[10].x,t[10].y],["L",t[11].x,t[11].y],["M",t[12].x,t[12].y],["L",t[13].x,t[13].y]]}(t.points);return r=this.parsePath(r),e.addShape("path",{attrs:o.mix(n,{path:r})})},getMarkerCfg:function(t){return{symbol:function(t,e,n){var r=i(t,[e-6,e-3,e,e+3,e+6],n);return[["M",r[0].x+1,r[0].y],["L",r[1].x-1,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["M",r[4].x,r[4].y],["L",r[5].x,r[5].y],["L",r[6].x,r[6].y],["L",r[7].x,r[7].y],["L",r[4].x,r[4].y],["Z"],["M",r[8].x,r[8].y],["L",r[9].x,r[9].y],["M",r[10].x+1,r[10].y],["L",r[11].x-1,r[11].y],["M",r[12].x,r[12].y],["L",r[13].x,r[13].y]]},radius:6,lineWidth:1,stroke:t.color}}}),s.registerShape("schema","candle",{getPoints:function(t){return a(t.x,t.y,t.size)},draw:function(t,e){var n=function(t){return o.mix({},u.shape.schema,{fill:t.color,stroke:t.color,fillOpacity:t.opacity},t.style)}(t),r=function(t){return[["M",t[0].x,t[0].y],["L",t[1].x,t[1].y],["M",t[2].x,t[2].y],["L",t[3].x,t[3].y],["L",t[4].x,t[4].y],["L",t[5].x,t[5].y],["Z"],["M",t[6].x,t[6].y],["L",t[7].x,t[7].y]]}(t.points);return r=this.parsePath(r),e.addShape("path",{attrs:o.mix(n,{path:r})})},getMarkerCfg:function(t){return{symbol:function(t,e,n){var r=a(t,e=[e+7.5,e+3,e-3,e-7.5],n);return[["M",r[0].x,r[0].y],["L",r[1].x,r[1].y],["M",r[2].x,r[2].y],["L",r[3].x,r[3].y],["L",r[4].x,r[4].y],["L",r[5].x,r[5].y],["Z"],["M",r[6].x,r[6].y],["L",r[7].x,r[7].y]]},lineWidth:1,stroke:t.color,fill:t.color,radius:6}}}),t.exports=l},function(t,e,n){var r=n(20),i=n(0),a=n(382),o=a.venn,s=a.scaleSolution,u=a.circlePath,l=a.intersectionAreaPath,c=a.computeTextCentres;n(440);var h=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.type="venn",e.shapeType="venn",e.generatePoints=!0,e},n._initAttrs=function(){var e=this.get("attrOptions"),n=this.get("labelCfg"),r=this.get("data"),a=e.size?e.size.field:"size",h=n?n.fields[0]:"sets";this.set("labelCfg",null),r.forEach(function(t){t.sets=t[h],t.size=t[a]});var f=o(r),d=this.get("coord"),p=[Math.min(d.x.end,d.x.start),Math.max(d.x.end,d.x.start)],g=[Math.min(d.y.end,d.y.start),Math.max(d.y.end,d.y.start)],v=p[1]-p[0],m=g[1]-g[0],y=this.get("styleOptions"),_=y&&i.isObject(y.style)?y.style.padding:0;i.isFinite(_)||(_=0);var b=s(f,v,m,_),x=c(b,r);r.forEach(function(t){var e=t.sets,n=e.join(",");if(t.id=n,1===e.length){var r=b[n];t.path=u(r.x,r.y,r.radius),i.assign(t,r)}else{var a=e.map(function(t){return b[t]}),o=l(a);/[zZ]$/.test(o)||(o+="Z"),t.path=o,i.assign(t,x[n]||{x:0,y:0})}}),this.position("x*y"),t.prototype._initAttrs.call(this)},n.paint=function(){t.prototype.paint.call(this);var e=this,n=e.get("dataArray"),r=e.get("shapeContainer");n.forEach(function(t){var n=e.getDrawCfg(t[0]),a=n.origin._origin;r.addShape("text",{attrs:i.mix({},{x:a.x,y:a.y,text:a.label||"",fontSize:18,fill:"hollow"===n.shape?n.color:"#666",textAlign:"center",textBaseline:"middle"},n.style?n.style.textStyle:{})})})},e}(r);r.Venn=h,t.exports=h},function(t,e,n){!function(t,e,n){"use strict";function r(t,e){var n,r=function(t){for(var e=[],n=0;n<t.length;++n)for(var r=n+1;r<t.length;++r)for(var i=s(t[n],t[r]),a=0;a<i.length;++a){var o=i[a];o.parentIndex=[n,r],e.push(o)}return e}(t),o=r.filter(function(e){return function(t,e){for(var n=0;n<e.length;++n)if(a(t,e[n])>e[n].radius+R)return!1;return!0}(e,t)}),l=0,c=0,h=[];if(o.length>1){var f=u(o);for(n=0;n<o.length;++n){var d=o[n];d.angle=Math.atan2(d.x-f.x,d.y-f.y)}o.sort(function(t,e){return e.angle-t.angle});var p=o[o.length-1];for(n=0;n<o.length;++n){var g=o[n];c+=(p.x+g.x)*(g.y-p.y);for(var v={x:(g.x+p.x)/2,y:(g.y+p.y)/2},m=null,y=0;y<g.parentIndex.length;++y)if(p.parentIndex.indexOf(g.parentIndex[y])>-1){var _=t[g.parentIndex[y]],b=Math.atan2(g.x-_.x,g.y-_.y),x=Math.atan2(p.x-_.x,p.y-_.y),w=x-b;w<0&&(w+=2*Math.PI);var S=x-w/2,T=a(v,{x:_.x+_.radius*Math.sin(S),y:_.y+_.radius*Math.cos(S)});T>2*_.radius&&(T=2*_.radius),(null===m||m.width>T)&&(m={circle:_,width:T,p1:g,p2:p})}null!==m&&(h.push(m),l+=i(m.circle.radius,m.width),p=g)}}else{var O=t[0];for(n=1;n<t.length;++n)t[n].radius<O.radius&&(O=t[n]);var M=!1;for(n=0;n<t.length;++n)if(a(t[n],O)>Math.abs(O.radius-t[n].radius)){M=!0;break}M?l=c=0:(l=O.radius*O.radius*Math.PI,h.push({circle:O,p1:{x:O.x,y:O.y+O.radius},p2:{x:O.x-R,y:O.y+O.radius},width:2*O.radius}))}return c/=2,e&&(e.area=l+c,e.arcArea=l,e.polygonArea=c,e.arcs=h,e.innerPoints=o,e.intersectionPoints=r),l+c}function i(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function a(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function o(t,e,n){if(n>=t+e)return 0;if(n<=Math.abs(t-e))return Math.PI*Math.min(t,e)*Math.min(t,e);var r=e-(n*n-t*t+e*e)/(2*n);return i(t,t-(n*n-e*e+t*t)/(2*n))+i(e,r)}function s(t,e){var n=a(t,e),r=t.radius,i=e.radius;if(n>=r+i||n<=Math.abs(r-i))return[];var o=(r*r-i*i+n*n)/(2*n),s=Math.sqrt(r*r-o*o),u=t.x+o*(e.x-t.x)/n,l=t.y+o*(e.y-t.y)/n,c=s/n*-(e.y-t.y),h=s/n*-(e.x-t.x);return[{x:u+c,y:l-h},{x:u-c,y:l+h}]}function u(t){for(var e={x:0,y:0},n=0;n<t.length;++n)e.x+=t[n].x,e.y+=t[n].y;return e.x/=t.length,e.y/=t.length,e}function l(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=0;return e}function c(t,e){return l(t).map(function(){return l(e)})}function h(t,e){for(var n=0,r=0;r<t.length;++r)n+=t[r]*e[r];return n}function f(t){return Math.sqrt(h(t,t))}function d(t,e,n){for(var r=0;r<e.length;++r)t[r]=e[r]*n}function p(t,e,n,r,i){for(var a=0;a<t.length;++a)t[a]=e*n[a]+r*i[a]}function g(t,e,n){function r(t){for(var e=0;e<t.length;e++)v[g][e]=t[e];v[g].fx=t.fx}var i,a=(n=n||{}).maxIterations||200*e.length,o=n.nonZeroDelta||1.05,s=n.zeroDelta||.001,u=n.minErrorDelta||1e-6,l=n.minErrorDelta||1e-5,c=void 0!==n.rho?n.rho:1,h=void 0!==n.chi?n.chi:2,f=void 0!==n.psi?n.psi:-.5,d=void 0!==n.sigma?n.sigma:.5,g=e.length,v=new Array(g+1);v[0]=e,v[0].fx=t(e),v[0].id=0;for(var m=0;m<g;++m){var y=e.slice();y[m]=y[m]?y[m]*o:s,v[m+1]=y,v[m+1].fx=t(y),v[m+1].id=m+1}for(var _=function(t,e){return t.fx-e.fx},b=e.slice(),x=e.slice(),w=e.slice(),S=e.slice(),T=0;T<a;++T){if(v.sort(_),n.history){var O=v.map(function(t){var e=t.slice();return e.fx=t.fx,e.id=t.id,e});O.sort(function(t,e){return t.id-e.id}),n.history.push({x:v[0].slice(),fx:v[0].fx,simplex:O})}for(i=0,m=0;m<g;++m)i=Math.max(i,Math.abs(v[0][m]-v[1][m]));if(Math.abs(v[0].fx-v[g].fx)<u&&i<l)break;for(m=0;m<g;++m){b[m]=0;for(var M=0;M<g;++M)b[m]+=v[M][m];b[m]/=g}var k=v[g];if(p(x,1+c,b,-c,k),x.fx=t(x),x.fx<v[0].fx)p(S,1+h,b,-h,k),S.fx=t(S),r(S.fx<x.fx?S:x);else if(x.fx>=v[g-1].fx){var C=!1;if(x.fx>k.fx?(p(w,1+f,b,-f,k),w.fx=t(w),w.fx<k.fx?r(w):C=!0):(p(w,1-f*c,b,f*c,k),w.fx=t(w),w.fx<x.fx?r(w):C=!0),C){if(d>=1)break;for(m=1;m<v.length;++m)p(v[m],1-d,v[0],d,v[m]),v[m].fx=t(v[m])}}else r(x)}return v.sort(_),{fx:v[0].fx,x:v[0]}}function v(t,e,n,r,i,a,o){function s(s,f,g){for(var v=0;v<16;++v)if(p(r.x,1,n.x,i=(s+f)/2,e),c=r.fx=t(r.x,r.fxprime),d=h(r.fxprime,e),c>u+a*i*l||c>=g)f=i;else{if(Math.abs(d)<=-o*l)return i;d*(f-s)>=0&&(f=s),s=i,g=c}return 0}var u=n.fx,l=h(n.fxprime,e),c=u,f=u,d=l,g=0;i=i||1,a=a||1e-6,o=o||.1;for(var v=0;v<10;++v){if(p(r.x,1,n.x,i,e),c=r.fx=t(r.x,r.fxprime),d=h(r.fxprime,e),c>u+a*i*l||v&&c>=f)return s(g,i,f);if(Math.abs(d)<=-o*l)return i;if(d>=0)return s(i,g,c);f=c,g=i,i*=2}return i}function m(t,e,n){var r,i,a,o={x:e.slice(),fx:0,fxprime:e.slice()},s={x:e.slice(),fx:0,fxprime:e.slice()},u=e.slice(),l=1;a=(n=n||{}).maxIterations||20*e.length,o.fx=t(o.x,o.fxprime),d(r=o.fxprime.slice(),o.fxprime,-1);for(var c=0;c<a;++c){if(l=v(t,r,o,s,l),n.history&&n.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice(),alpha:l}),l){p(u,1,s.fxprime,-1,o.fxprime);var g=h(o.fxprime,o.fxprime);p(r,Math.max(0,h(u,s.fxprime)/g),r,-1,s.fxprime),i=o,o=s,s=i}else d(r,o.fxprime,-1);if(f(o.fxprime)<=1e-5)break}return n.history&&n.history.push({x:o.x.slice(),fx:o.fx,fxprime:o.fxprime.slice(),alpha:l}),o}function y(t,e){(e=e||{}).maxIterations=e.maxIterations||500;var n,r=e.lossFunction||w,i=(e.initialLayout||b)(t=function(t){t=t.slice();var e,n,r,i,a=[],o={};for(e=0;e<t.length;++e){var s=t[e];1==s.sets.length?a.push(s.sets[0]):2==s.sets.length&&(o[[r=s.sets[0],i=s.sets[1]]]=!0,o[[i,r]]=!0)}for(a.sort(function(t,e){return t>e}),e=0;e<a.length;++e)for(r=a[e],n=e+1;n<a.length;++n)[r,i=a[n]]in o||t.push({sets:[r,i],size:0});return t}(t),e),a=[],o=[];for(n in i)i.hasOwnProperty(n)&&(a.push(i[n].x),a.push(i[n].y),o.push(n));for(var s=g(function(e){for(var n={},a=0;a<o.length;++a){var s=o[a];n[s]={x:e[2*a],y:e[2*a+1],radius:i[s].radius}}return r(n,t)},a,e).x,u=0;u<o.length;++u)i[n=o[u]].x=s[2*u],i[n].y=s[2*u+1];return i}function _(t,e,n){return Math.min(t,e)*Math.min(t,e)*Math.PI<=n+N?Math.abs(t-e):function(t,e,n,r){var i=(r=r||{}).maxIterations||100,a=r.tolerance||1e-10,o=t(e),s=t(n),u=n-e;if(o*s>0)throw"Initial bisect points must have opposite signs";if(0===o)return e;if(0===s)return n;for(var l=0;l<i;++l){var c=e+(u/=2),h=t(c);if(h*o>=0&&(e=c),Math.abs(u)<a||0===h)return c}return e+u}(function(r){return o(t,e,r)-n},0,t+e)}function b(t,e){var n=x(t,e),r=e.lossFunction||w;if(t.length>=8){var i=function(t,e){var n,r=(e=e||{}).restarts||10,i=[],a={};for(n=0;n<t.length;++n){var o=t[n];1==o.sets.length&&(a[o.sets[0]]=i.length,i.push(o))}var s=function(t,e,n){var r=c(e.length,e.length),i=c(e.length,e.length);return t.filter(function(t){return 2==t.sets.length}).map(function(t){var a=n[t.sets[0]],o=n[t.sets[1]],s=_(Math.sqrt(e[a].size/Math.PI),Math.sqrt(e[o].size/Math.PI),t.size);r[a][o]=r[o][a]=s;var u=0;t.size+1e-10>=Math.min(e[a].size,e[o].size)?u=1:t.size<=1e-10&&(u=-1),i[a][o]=i[o][a]=u}),{distances:r,constraints:i}}(t,i,a),u=s.distances,h=s.constraints,p=f(u.map(f))/u.length;u=u.map(function(t){return t.map(function(t){return t/p})});var g,v,y=function(t,e){return function(t,e,n,r){var i,a=0;for(i=0;i<e.length;++i)e[i]=0;for(i=0;i<n.length;++i)for(var o=t[2*i],s=t[2*i+1],u=i+1;u<n.length;++u){var l=t[2*u],c=t[2*u+1],h=n[i][u],f=r[i][u],d=(l-o)*(l-o)+(c-s)*(c-s),p=Math.sqrt(d),g=d-h*h;f>0&&p<=h||f<0&&p>=h||(a+=2*g*g,e[2*i]+=4*g*(o-l),e[2*i+1]+=4*g*(s-c),e[2*u]+=4*g*(l-o),e[2*u+1]+=4*g*(c-s))}return a}(t,e,u,h)};for(n=0;n<r;++n)v=m(y,l(2*u.length).map(Math.random),e),(!g||v.fx<g.fx)&&(g=v);var b=g.x,x={};for(n=0;n<i.length;++n){var w=i[n];x[w.sets[0]]={x:b[2*n]*p,y:b[2*n+1]*p,radius:Math.sqrt(w.size/Math.PI)}}if(e.history)for(n=0;n<e.history.length;++n)d(e.history[n].x,p);return x}(t,e);r(i,t)+1e-8<r(n,t)&&(n=i)}return n}function x(t,e){function n(t,e){return e.size-t.size}function r(t){return t.set in y}function i(t,e){u[e].x=t.x,u[e].y=t.y,y[e]=!0}for(var a,o=e&&e.lossFunction?e.lossFunction:w,u={},l={},c=0;c<t.length;++c){var h=t[c];1==h.sets.length&&(u[a=h.sets[0]]={x:1e10,y:1e10,rowid:u.length,size:h.size,radius:Math.sqrt(h.size/Math.PI)},l[a]=[])}for(t=t.filter(function(t){return 2==t.sets.length}),c=0;c<t.length;++c){var f=t[c],d=f.hasOwnProperty("weight")?f.weight:1,p=f.sets[0],g=f.sets[1];f.size+N>=Math.min(u[p].size,u[g].size)&&(d=0),l[p].push({set:g,size:f.size,weight:d}),l[g].push({set:p,size:f.size,weight:d})}var v=[];for(a in l)if(l.hasOwnProperty(a)){var m=0;for(c=0;c<l[a].length;++c)m+=l[a][c].size*l[a][c].weight;v.push({set:a,size:m})}v.sort(n);var y={};for(i({x:0,y:0},v[0].set),c=1;c<v.length;++c){var b=v[c].set,x=l[b].filter(r);if(a=u[b],x.sort(n),0===x.length)throw"ERROR: missing pairwise overlap information";for(var S=[],T=0;T<x.length;++T){var O=u[x[T].set],M=_(a.radius,O.radius,x[T].size);S.push({x:O.x+M,y:O.y}),S.push({x:O.x-M,y:O.y}),S.push({y:O.y+M,x:O.x}),S.push({y:O.y-M,x:O.x});for(var k=T+1;k<x.length;++k)for(var C=u[x[k].set],E=_(a.radius,C.radius,x[k].size),A=s({x:O.x,y:O.y,radius:M},{x:C.x,y:C.y,radius:E}),I=0;I<A.length;++I)S.push(A[I])}var P=1e50,L=S[0];for(T=0;T<S.length;++T){u[b].x=S[T].x,u[b].y=S[T].y;var D=o(u,t);D<P&&(P=D,L=S[T])}i(L,b)}return u}function w(t,e){function n(e){return e.map(function(e){return t[e]})}for(var i=0,s=0;s<e.length;++s){var u,l=e[s];if(1!=l.sets.length){if(2==l.sets.length){var c=t[l.sets[0]],h=t[l.sets[1]];u=o(c.radius,h.radius,a(c,h))}else u=r(n(l.sets));i+=(l.hasOwnProperty("weight")?l.weight:1)*(u-l.size)*(u-l.size)}}return i}function S(t,e,n){var r;if(t.sort(null===n?function(t,e){return e.radius-t.radius}:n),t.length>0){var i=t[0].x,o=t[0].y;for(r=0;r<t.length;++r)t[r].x-=i,t[r].y-=o}if(2==t.length&&a(t[0],t[1])<Math.abs(t[1].radius-t[0].radius)&&(t[1].x=t[0].x+t[0].radius-t[1].radius-1e-10,t[1].y=t[0].y),t.length>1){var s,u,l=Math.atan2(t[1].x,t[1].y)-e,c=Math.cos(l),h=Math.sin(l);for(r=0;r<t.length;++r)t[r].x=c*(s=t[r].x)-h*(u=t[r].y),t[r].y=h*s+c*u}if(t.length>2){for(var f=Math.atan2(t[2].x,t[2].y)-e;f<0;)f+=2*Math.PI;for(;f>2*Math.PI;)f-=2*Math.PI;if(f>Math.PI){var d=t[1].y/(1e-10+t[1].x);for(r=0;r<t.length;++r){var p=(t[r].x+d*t[r].y)/(1+d*d);t[r].x=2*p-t[r].x,t[r].y=2*p*d-t[r].y}}}}function T(t){function e(t){return t.parent!==t&&(t.parent=e(t.parent)),t.parent}function n(t,n){var r=e(t),i=e(n);r.parent=i}t.map(function(t){t.parent=t});for(var r=0;r<t.length;++r)for(var i=r+1;i<t.length;++i){var o=t[r].radius+t[i].radius;a(t[r],t[i])+1e-10<o&&n(t[i],t[r])}var s,u={};for(r=0;r<t.length;++r)(s=e(t[r]).parent.setid)in u||(u[s]=[]),u[s].push(t[r]);t.map(function(t){delete t.parent});var l=[];for(s in u)u.hasOwnProperty(s)&&l.push(u[s]);return l}function O(t){var e=function(e){return{max:Math.max.apply(null,t.map(function(t){return t[e]+t.radius})),min:Math.min.apply(null,t.map(function(t){return t[e]-t.radius}))}};return{xRange:e("x"),yRange:e("y")}}function M(t,e,n){function r(t,e,n){if(t){var r,i,a,s=t.bounds;e?r=c.xRange.max-s.xRange.min+h:(r=c.xRange.max-s.xRange.max,(a=(s.xRange.max-s.xRange.min)/2-(c.xRange.max-c.xRange.min)/2)<0&&(r+=a)),n?i=c.yRange.max-s.yRange.min+h:(i=c.yRange.max-s.yRange.max,(a=(s.yRange.max-s.yRange.min)/2-(c.yRange.max-c.yRange.min)/2)<0&&(i+=a));for(var u=0;u<t.length;++u)t[u].x+=r,t[u].y+=i,o.push(t[u])}}null===e&&(e=Math.PI/2);var i,a,o=[];for(a in t)if(t.hasOwnProperty(a)){var s=t[a];o.push({x:s.x,y:s.y,radius:s.radius,setid:a})}var u=T(o);for(i=0;i<u.length;++i){S(u[i],e,n);var l=O(u[i]);u[i].size=(l.xRange.max-l.xRange.min)*(l.yRange.max-l.yRange.min),u[i].bounds=l}u.sort(function(t,e){return e.size-t.size});for(var c=(o=u[0]).bounds,h=(c.xRange.max-c.xRange.min)/50,f=1;f<u.length;)r(u[f],!0,!1),r(u[f+1],!1,!0),r(u[f+2],!0,!0),f+=3,c=O(o);var d={};for(i=0;i<o.length;++i)d[o[i].setid]=o[i];return d}function k(t,e,n,r){var i=[],a=[];for(var o in t)t.hasOwnProperty(o)&&(a.push(o),i.push(t[o]));e-=2*r,n-=2*r;var s=O(i),u=s.xRange,l=s.yRange;if(u.max==u.min||l.max==l.min)return console.log("not scaling solution: zero size detected"),t;for(var c=Math.min(n/(l.max-l.min),e/(u.max-u.min)),h=(e-(u.max-u.min)*c)/2,f=(n-(l.max-l.min)*c)/2,d={},p=0;p<i.length;++p){var g=i[p];d[a[p]]={radius:c*g.radius,x:r+h+(g.x-u.min)*c,y:r+f+(g.y-l.min)*c}}return d}function C(t,n){return function(){for(var r,i=e.select(this),a=i.datum(),o=t[a.sets[0]].radius||50,s=n(a)||"",u=s.split(/\s+/).reverse(),l=(s.length+u.length)/3,c=u.pop(),h=[c],f=0,d=i.text(null).append("tspan").text(c);c=u.pop();)h.push(c),r=h.join(" "),d.text(r),r.length>l&&d.node().getComputedTextLength()>o&&(h.pop(),d.text(h.join(" ")),h=[c],d=i.append("tspan").text(c),f++);var p=.35-1.1*f/2,g=i.attr("x"),v=i.attr("y");i.selectAll("tspan").attr("x",g).attr("y",v).attr("dy",function(t,e){return p+1.1*e+"em"})}}function E(t,e,n){var r,i,o=e[0].radius-a(e[0],t);for(r=1;r<e.length;++r)(i=e[r].radius-a(e[r],t))<=o&&(o=i);for(r=0;r<n.length;++r)(i=a(n[r],t)-n[r].radius)<=o&&(o=i);return o}function A(t,e){var n,i=[];for(n=0;n<t.length;++n){var o=t[n];i.push({x:o.x,y:o.y}),i.push({x:o.x+o.radius/2,y:o.y}),i.push({x:o.x-o.radius/2,y:o.y}),i.push({x:o.x,y:o.y+o.radius/2}),i.push({x:o.x,y:o.y-o.radius/2})}var s=i[0],l=E(i[0],t,e);for(n=1;n<i.length;++n){var c=E(i[n],t,e);c>=l&&(s=i[n],l=c)}var h=g(function(n){return-1*E({x:n[0],y:n[1]},t,e)},[s.x,s.y],{maxIterations:500,minErrorDelta:1e-10}).x,f={x:h[0],y:h[1]},d=!0;for(n=0;n<t.length;++n)if(a(f,t[n])>t[n].radius){d=!1;break}for(n=0;n<e.length;++n)if(a(f,e[n])<e[n].radius){d=!1;break}if(!d)if(1==t.length)f={x:t[0].x,y:t[0].y};else{var p={};r(t,p),f=0===p.arcs.length?{x:0,y:-1e3,disjoint:!0}:1==p.arcs.length?{x:p.arcs[0].circle.x,y:p.arcs[0].circle.y}:e.length?A(t,[]):u(p.arcs.map(function(t){return t.p1}))}return f}function I(t){var e={},n=[];for(var r in t)n.push(r),e[r]=[];for(var i=0;i<n.length;i++)for(var o=t[n[i]],s=i+1;s<n.length;++s){var u=t[n[s]],l=a(o,u);l+u.radius<=o.radius+1e-10?e[n[s]].push(n[i]):l+o.radius<=u.radius+1e-10&&e[n[i]].push(n[s])}return e}function P(t,e){for(var n={},r=I(t),i=0;i<e.length;++i){for(var a=e[i].sets,o={},s={},u=0;u<a.length;++u){o[a[u]]=!0;for(var l=r[a[u]],c=0;c<l.length;++c)s[l[c]]=!0}var h=[],f=[];for(var d in t)d in o?h.push(t[d]):d in s||f.push(t[d]);var p=A(h,f);n[a]=p,p.disjoint&&e[i].size>0&&console.log("WARNING: area "+a+" not represented on screen")}return n}function L(t,e,n){var r=[];return r.push("\nM",t,e),r.push("\nm",-n,0),r.push("\na",n,n,0,1,0,2*n,0),r.push("\na",n,n,0,1,0,2*-n,0),r.join(" ")}function D(t){var e=t.split(" ");return{x:parseFloat(e[1]),y:parseFloat(e[2]),radius:-parseFloat(e[4])}}function j(t){var e={};r(t,e);var n=e.arcs;if(0===n.length)return"M 0 0";if(1==n.length){var i=n[0].circle;return L(i.x,i.y,i.radius)}for(var a=["\nM",n[0].p2.x,n[0].p2.y],o=0;o<n.length;++o){var s=n[o],u=s.circle.radius;a.push("\nA",u,u,0,s.width>u?1:0,1,s.p1.x,s.p1.y)}return a.join(" ")}var R=1e-10,N=1e-10;t.intersectionArea=r,t.circleCircleIntersection=s,t.circleOverlap=o,t.circleArea=i,t.distance=a,t.venn=y,t.greedyLayout=x,t.scaleSolution=k,t.normalizeSolution=M,t.bestInitialLayout=b,t.lossFunction=w,t.disjointCluster=T,t.distanceFromIntersectArea=_,t.VennDiagram=function(){function t(t){function f(t){return t.sets in x?x[t.sets]:1==t.sets.length?""+t.sets[0]:void 0}var d=t.datum(),p={};d.forEach(function(t){0==t.size&&1==t.sets.length&&(p[t.sets[0]]=1)});var y={},_={};if((d=d.filter(function(t){return!t.sets.some(function(t){return t in p})})).length>0){var b=v(d,{lossFunction:m});s&&(b=M(b,o,h)),y=k(b,n,r,i),_=P(y,d)}var x={};d.forEach(function(t){t.label&&(x[t.sets]=t.label)}),t.selectAll("svg").data([y]).enter().append("svg");var w=t.select("svg").attr("width",n).attr("height",r),S={},T=!1;w.selectAll(".venn-area path").each(function(t){var n=e.select(this).attr("d");1==t.sets.length&&n&&(T=!0,S[t.sets[0]]=D(n))});var O=function(t){return function(e){return j(t.sets.map(function(t){var i=S[t],a=y[t];return i||(i={x:n/2,y:r/2,radius:1}),a||(a={x:n/2,y:r/2,radius:1}),{x:i.x*(1-e)+a.x*e,y:i.y*(1-e)+a.y*e,radius:i.radius*(1-e)+a.radius*e}}))}},E=w.selectAll(".venn-area").data(d,function(t){return t.sets}),A=E.enter().append("g").attr("class",function(t){return"venn-area venn-"+(1==t.sets.length?"circle":"intersection")}).attr("data-venn-sets",function(t){return t.sets.join("_")}),I=A.append("path"),L=A.append("text").attr("class","label").text(function(t){return f(t)}).attr("text-anchor","middle").attr("dy",".35em").attr("x",n/2).attr("y",r/2);l&&(I.style("fill-opacity","0").filter(function(t){return 1==t.sets.length}).style("fill",function(t){return g(t.sets)}).style("fill-opacity",".25"),L.style("fill",function(t){return 1==t.sets.length?g(t.sets):"#444"}));var R=t;T?(R=t.transition("venn").duration(a)).selectAll("path").attrTween("d",O):R.selectAll("path").attr("d",function(t){return j(t.sets.map(function(t){return y[t]}))});var N=R.selectAll("text").filter(function(t){return t.sets in _}).text(function(t){return f(t)}).attr("x",function(t){return Math.floor(_[t.sets].x)}).attr("y",function(t){return Math.floor(_[t.sets].y)});u&&(T?"on"in N?N.on("end",C(y,f)):N.each("end",C(y,f)):N.each(C(y,f)));var B=E.exit().transition("venn").duration(a).remove();B.selectAll("path").attrTween("d",O);var F=B.selectAll("text").attr("x",n/2).attr("y",r/2);return null!==c&&(L.style("font-size","0px"),N.style("font-size",c),F.style("font-size","0px")),{circles:y,textCentres:_,nodes:E,enter:A,update:R,exit:B}}var n=600,r=350,i=15,a=1e3,o=Math.PI/2,s=!0,u=!0,l=!0,c=null,h=null,f={},d=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],p=0,g=function(t){if(t in f)return f[t];var e=f[t]=d[p];return(p+=1)>=d.length&&(p=0),e},v=y,m=w;return t.wrap=function(e){return arguments.length?(u=e,t):u},t.width=function(e){return arguments.length?(n=e,t):n},t.height=function(e){return arguments.length?(r=e,t):r},t.padding=function(e){return arguments.length?(i=e,t):i},t.colours=function(e){return arguments.length?(g=e,t):g},t.fontSize=function(e){return arguments.length?(c=e,t):c},t.duration=function(e){return arguments.length?(a=e,t):a},t.layoutFunction=function(e){return arguments.length?(v=e,t):v},t.normalize=function(e){return arguments.length?(s=e,t):s},t.styled=function(e){return arguments.length?(l=e,t):l},t.orientation=function(e){return arguments.length?(o=e,t):o},t.orientationOrder=function(e){return arguments.length?(h=e,t):h},t.lossFunction=function(e){return arguments.length?(m=e,t):m},t},t.wrapText=C,t.computeTextCentres=P,t.computeTextCentre=A,t.sortAreas=function(t,e){function n(t){for(var e=0;e<t.length;++e)if(!(t[e]in i))return!1;return!0}for(var r=I(t.selectAll("svg").datum()),i={},a=0;a<e.sets.length;++a){var o=e.sets[a];for(var s in r)for(var u=r[s],l=0;l<u.length;++l)if(u[l]==o){i[s]=!0;break}}t.selectAll("g").sort(function(t,r){return t.sets.length!=r.sets.length?t.sets.length-r.sets.length:t==e?n(r.sets)?-1:1:r==e?n(t.sets)?1:-1:r.size-t.size})},t.circlePath=L,t.circleFromPath=D,t.intersectionAreaPath=j,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(58),n(417))},function(t,e,n){"use strict";var r=n(345),i=n(361);e.a=function(t){return Object(i.a)(Object(r.a)(t).call(document.documentElement))}},function(t,e,n){"use strict";var r=n(56),i=n(357);e.a=function(t){"function"!=typeof t&&(t=Object(i.a)(t));for(var e=this._groups,n=e.length,a=new Array(n),o=0;o<n;++o)for(var s,u,l=e[o],c=l.length,h=a[o]=new Array(c),f=0;f<c;++f)(s=l[f])&&(u=t.call(s,s.__data__,f,l))&&("__data__"in s&&(u.__data__=s.__data__),h[f]=u);return new r.a(a,this._parents)}},function(t,e,n){"use strict";var r=n(56),i=n(362);e.a=function(t){"function"!=typeof t&&(t=Object(i.a)(t));for(var e=this._groups,n=e.length,a=[],o=[],s=0;s<n;++s)for(var u,l=e[s],c=l.length,h=0;h<c;++h)(u=l[h])&&(a.push(t.call(u,u.__data__,h,l)),o.push(u));return new r.a(a,o)}},function(t,e,n){"use strict";var r=n(56),i=n(363);e.a=function(t){"function"!=typeof t&&(t=Object(i.a)(t));for(var e=this._groups,n=e.length,a=new Array(n),o=0;o<n;++o)for(var s,u=e[o],l=u.length,c=a[o]=[],h=0;h<l;++h)(s=u[h])&&t.call(s,s.__data__,h,u)&&c.push(s);return new r.a(a,this._parents)}},function(t,e,n){"use strict";var r=n(56),i=n(364),a=n(388);e.a=function(t,e){if(!t)return v=new Array(this.size()),f=-1,this.each(function(t){v[++f]=t}),v;var n=e?function(t,e,n,r,a,o,s){var u,l,c,h={},f=e.length,d=o.length,p=new Array(f);for(u=0;u<f;++u)(l=e[u])&&(p[u]=c="$"+s.call(l,l.__data__,u,e),c in h?a[u]=l:h[c]=l);for(u=0;u<d;++u)(l=h[c="$"+s.call(t,o[u],u,o)])?(r[u]=l,l.__data__=o[u],h[c]=null):n[u]=new i.a(t,o[u]);for(u=0;u<f;++u)(l=e[u])&&h[p[u]]===l&&(a[u]=l)}:function(t,e,n,r,a,o){for(var s,u=0,l=e.length,c=o.length;u<c;++u)(s=e[u])?(s.__data__=o[u],r[u]=s):n[u]=new i.a(t,o[u]);for(;u<l;++u)(s=e[u])&&(a[u]=s)},o=this._parents,s=this._groups;"function"!=typeof t&&(t=Object(a.a)(t));for(var u=s.length,l=new Array(u),c=new Array(u),h=new Array(u),f=0;f<u;++f){var d=o[f],p=s[f],g=p.length,v=t.call(d,d&&d.__data__,f,o),m=v.length,y=c[f]=new Array(m),_=l[f]=new Array(m);n(d,p,y,_,h[f]=new Array(g),v,e);for(var b,x,w=0,S=0;w<m;++w)if(b=y[w]){for(w>=S&&(S=w+1);!(x=_[S])&&++S<m;);b._next=x||null}}return(l=new r.a(l,o))._enter=c,l._exit=h,l}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";var r=n(365),i=n(56);e.a=function(){return new i.a(this._exit||this._groups.map(r.a),this._parents)}},function(t,e,n){"use strict";var r=n(56);e.a=function(t){for(var e=this._groups,n=t._groups,i=e.length,a=Math.min(i,n.length),o=new Array(i),s=0;s<a;++s)for(var u,l=e[s],c=n[s],h=l.length,f=o[s]=new Array(h),d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;s<i;++s)o[s]=e[s];return new r.a(o,this._parents)}},function(t,e,n){"use strict";e.a=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&o!==r.nextSibling&&o.parentNode.insertBefore(r,o),o=r);return this}},function(t,e,n){"use strict";function r(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var i=n(56);e.a=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=r);for(var n=this._groups,a=n.length,o=new Array(a),s=0;s<a;++s){for(var u,l=n[s],c=l.length,h=o[s]=new Array(c),f=0;f<c;++f)(u=l[f])&&(h[f]=u);h.sort(e)}return new i.a(o,this._parents).order()}},function(t,e,n){"use strict";e.a=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}},function(t,e,n){"use strict";e.a=function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}},function(t,e,n){"use strict";e.a=function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}},function(t,e,n){"use strict";e.a=function(){var t=0;return this.each(function(){++t}),t}},function(t,e,n){"use strict";e.a=function(){return!this.node()}},function(t,e,n){"use strict";e.a=function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this}},function(t,e,n){"use strict";var r=n(355);e.a=function(t,e){var n=Object(r.a)(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?n.local?function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}:function(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}:n.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(n,e))}},function(t,e,n){"use strict";e.a=function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]}},function(t,e,n){"use strict";function r(t){return t.trim().split(/^|\s+/)}function i(t){return t.classList||new a(t)}function a(t){this._node=t,this._names=r(t.getAttribute("class")||"")}function o(t,e){for(var n=i(t),r=-1,a=e.length;++r<a;)n.add(e[r])}function s(t,e){for(var n=i(t),r=-1,a=e.length;++r<a;)n.remove(e[r])}a.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}},e.a=function(t,e){var n=r(t+"");if(arguments.length<2){for(var a=i(this.node()),u=-1,l=n.length;++u<l;)if(!a.contains(n[u]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?o:s)(this,t)}}:e?function(t){return function(){o(this,t)}}:function(t){return function(){s(this,t)}})(n,e))}},function(t,e,n){"use strict";e.a=function(t){return arguments.length?this.each(null==t?function(){this.textContent=""}:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent}},function(t,e,n){"use strict";e.a=function(t){return arguments.length?this.each(null==t?function(){this.innerHTML=""}:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML}},function(t,e,n){"use strict";function r(){this.nextSibling&&this.parentNode.appendChild(this)}e.a=function(){return this.each(r)}},function(t,e,n){"use strict";function r(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}e.a=function(){return this.each(r)}},function(t,e,n){"use strict";var r=n(345);e.a=function(t){var e="function"==typeof t?t:Object(r.a)(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}},function(t,e,n){"use strict";var r=n(345),i=n(357);e.a=function(t,e){var n="function"==typeof t?t:Object(r.a)(t),a=null==e?function(){return null}:"function"==typeof e?e:Object(i.a)(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)})}},function(t,e,n){"use strict";function r(){var t=this.parentNode;t&&t.removeChild(this)}e.a=function(){return this.each(r)}},function(t,e,n){"use strict";e.a=function(t){return this.select(t?function(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}:function(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)})}},function(t,e,n){"use strict";e.a=function(t){return arguments.length?this.property("__data__",t):this.node().__data__}},function(t,e,n){"use strict";function r(t,e,n){var r=Object(i.a)(t),a=r.CustomEvent;"function"==typeof a?a=new a(e,n):(a=r.document.createEvent("Event"),n?(a.initEvent(e,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}var i=n(358);e.a=function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return r(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return r(this,t,e)}})(t,e))}},function(t,e,n){"use strict";function r(){return new i}function i(){this._="@"+(++a).toString(36)}e.a=r;var a=0;i.prototype=r.prototype={constructor:i,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}}},function(t,e,n){"use strict";var r=n(360),i=n(346);e.a=function(t){var e=Object(r.a)();return e.changedTouches&&(e=e.changedTouches[0]),Object(i.a)(t,e)}},function(t,e,n){"use strict";var r=n(56);e.a=function(t){return"string"==typeof t?new r.a([document.querySelectorAll(t)],[document.documentElement]):new r.a([null==t?[]:t],r.c)}},function(t,e,n){"use strict";var r=n(360),i=n(346);e.a=function(t,e,n){arguments.length<3&&(n=e,e=Object(r.a)().changedTouches);for(var a,o=0,s=e?e.length:0;o<s;++o)if((a=e[o]).identifier===n)return Object(i.a)(t,a);return null}},function(t,e,n){"use strict";var r=n(360),i=n(346);e.a=function(t,e){null==e&&(e=Object(r.a)().touches);for(var n=0,a=e?e.length:0,o=new Array(a);n<a;++n)o[n]=Object(i.a)(t,e[n]);return o}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(418);var r=n(138);n.d(e,"transition",function(){return r.b});var i=n(439);n.d(e,"active",function(){return i.a});var a=n(367);n.d(e,"interrupt",function(){return a.a})},function(t,e,n){"use strict";var r=n(58),i=n(419),a=n(422);r.selection.prototype.interrupt=i.a,r.selection.prototype.transition=a.a},function(t,e,n){"use strict";var r=n(367);e.a=function(t){return this.each(function(){Object(r.a)(this,t)})}},function(t,e,n){"use strict";var r=n(421);n.d(e,"a",function(){return r.a})},function(t,e,n){"use strict";function r(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new i(r)}function i(t){this._=t}function a(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=o,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}var o={value:function(){}};i.prototype=r.prototype={constructor:i,on:function(t,e){var n,r=this._,i=function(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}(t+"",r),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=i[o]).type)r[n]=a(r[n],t.name,e);else if(null==e)for(n in r)r[n]=a(r[n],t.name,null);return this}for(;++o<s;)if((n=(t=i[o]).type)&&(n=function(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new i(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}},e.a=r},function(t,e,n){"use strict";function r(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return u.time=Object(s.now)(),u;return n}var i=n(138),a=n(57),o=n(141),s=n(139),u={time:null,delay:0,duration:250,ease:o.easeCubicInOut};e.a=function(t){var e,n;t instanceof i.a?(e=t._id,t=t._name):(e=Object(i.c)(),(n=u).time=Object(s.now)(),t=null==t?null:t+"");for(var o=this._groups,l=o.length,c=0;c<l;++c)for(var h,f=o[c],d=f.length,p=0;p<d;++p)(h=f[p])&&Object(a.e)(h,t,e,p,f,n||r(h,e));return new i.a(o,this._parents,t,e)}},function(t,e,n){"use strict";var r=n(110),i=n(58),a=n(347),o=n(368);e.a=function(t,e){var n=Object(i.namespace)(t),s="transform"===n?r.interpolateTransformSvg:o.a;return this.attrTween(t,"function"==typeof e?(n.local?function(t,e,n){var r,i,a;return function(){var o,s=n(this);if(null!=s)return(o=this.getAttributeNS(t.space,t.local))===s?null:o===r&&s===i?a:a=e(r=o,i=s);this.removeAttributeNS(t.space,t.local)}}:function(t,e,n){var r,i,a;return function(){var o,s=n(this);if(null!=s)return(o=this.getAttribute(t))===s?null:o===r&&s===i?a:a=e(r=o,i=s);this.removeAttribute(t)}})(n,s,Object(a.b)(this,"attr."+t,e)):null==e?(n.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(n):(n.local?function(t,e,n){var r,i;return function(){var a=this.getAttributeNS(t.space,t.local);return a===n?null:a===r?i:i=e(r=a,n)}}:function(t,e,n){var r,i;return function(){var a=this.getAttribute(t);return a===n?null:a===r?i:i=e(r=a,n)}})(n,s,e+""))}},function(t,e,n){"use strict";var r=n(58);e.a=function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=Object(r.namespace)(t);return this.tween(n,(i.local?function(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttributeNS(t.space,t.local,r(e))}}return n._value=e,n}:function(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttribute(t,r(e))}}return n._value=e,n})(i,e))}},function(t,e,n){"use strict";var r=n(57);e.a=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Object(r.g)(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Object(r.g)(this,t).delay=e}})(e,t)):Object(r.f)(this.node(),e).delay}},function(t,e,n){"use strict";var r=n(57);e.a=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){Object(r.h)(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){Object(r.h)(this,t).duration=e}})(e,t)):Object(r.f)(this.node(),e).duration}},function(t,e,n){"use strict";var r=n(57);e.a=function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Object(r.h)(this,t).ease=e}}(e,t)):Object(r.f)(this.node(),e).ease}},function(t,e,n){"use strict";var r=n(58),i=n(138);e.a=function(t){"function"!=typeof t&&(t=Object(r.matcher)(t));for(var e=this._groups,n=e.length,a=new Array(n),o=0;o<n;++o)for(var s,u=e[o],l=u.length,c=a[o]=[],h=0;h<l;++h)(s=u[h])&&t.call(s,s.__data__,h,u)&&c.push(s);return new i.a(a,this._parents,this._name,this._id)}},function(t,e,n){"use strict";var r=n(138);e.a=function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,a=Math.min(i,n.length),o=new Array(i),s=0;s<a;++s)for(var u,l=e[s],c=n[s],h=l.length,f=o[s]=new Array(h),d=0;d<h;++d)(u=l[d]||c[d])&&(f[d]=u);for(;s<i;++s)o[s]=e[s];return new r.a(o,this._parents,this._name,this._id)}},function(t,e,n){"use strict";var r=n(57);e.a=function(t,e){var n=this._id;return arguments.length<2?Object(r.f)(this.node(),n).on.on(t):this.each(function(t,e,n){var i,a,o=(e+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})?r.g:r.h;return function(){var r=o(this,t),s=r.on;s!==i&&(a=(i=s).copy()).on(e,n),r.on=a}}(n,t,e))}},function(t,e,n){"use strict";e.a=function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}));var t}},function(t,e,n){"use strict";var r=n(58),i=n(138),a=n(57);e.a=function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Object(r.selector)(t));for(var o=this._groups,s=o.length,u=new Array(s),l=0;l<s;++l)for(var c,h,f=o[l],d=f.length,p=u[l]=new Array(d),g=0;g<d;++g)(c=f[g])&&(h=t.call(c,c.__data__,g,f))&&("__data__"in c&&(h.__data__=c.__data__),p[g]=h,Object(a.e)(p[g],e,n,g,p,Object(a.f)(c,n)));return new i.a(u,this._parents,e,n)}},function(t,e,n){"use strict";var r=n(58),i=n(138),a=n(57);e.a=function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Object(r.selectorAll)(t));for(var o=this._groups,s=o.length,u=[],l=[],c=0;c<s;++c)for(var h,f=o[c],d=f.length,p=0;p<d;++p)if(h=f[p]){for(var g,v=t.call(h,h.__data__,p,f),m=Object(a.f)(h,n),y=0,_=v.length;y<_;++y)(g=v[y])&&Object(a.e)(g,e,n,y,v,m);u.push(v),l.push(h)}return new i.a(u,l,e,n)}},function(t,e,n){"use strict";var r=n(58).selection.prototype.constructor;e.a=function(){return new r(this._groups,this._parents)}},function(t,e,n){"use strict";var r=n(110),i=n(58),a=n(347),o=n(368);e.a=function(t,e,n){var s="transform"==(t+="")?r.interpolateTransformCss:o.a;return null==e?this.styleTween(t,function(t,e){var n,r,a;return function(){var o=Object(i.style)(this,t),s=(this.style.removeProperty(t),Object(i.style)(this,t));return o===s?null:o===n&&s===r?a:a=e(n=o,r=s)}}(t,s)).on("end.style."+t,function(t){return function(){this.style.removeProperty(t)}}(t)):this.styleTween(t,"function"==typeof e?function(t,e,n){var r,a,o;return function(){var s=Object(i.style)(this,t),u=n(this);return null==u&&(this.style.removeProperty(t),u=Object(i.style)(this,t)),s===u?null:s===r&&u===a?o:o=e(r=s,a=u)}}(t,s,Object(a.b)(this,"style."+t,e)):function(t,e,n){var r,a;return function(){var o=Object(i.style)(this,t);return o===n?null:o===r?a:a=e(r=o,n)}}(t,s,e+""),n)}},function(t,e,n){"use strict";e.a=function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){function r(){var r=this,i=e.apply(r,arguments);return i&&function(e){r.style.setProperty(t,i(e),n)}}return r._value=e,r}(t,e,null==n?"":n))}},function(t,e,n){"use strict";var r=n(347);e.a=function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Object(r.b)(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))}},function(t,e,n){"use strict";var r=n(138),i=n(57);e.a=function(){for(var t=this._name,e=this._id,n=Object(r.c)(),a=this._groups,o=a.length,s=0;s<o;++s)for(var u,l=a[s],c=l.length,h=0;h<c;++h)if(u=l[h]){var f=Object(i.f)(u,e);Object(i.e)(u,t,n,h,l,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new r.a(a,this._parents,t,n)}},function(t,e,n){"use strict";var r=n(138),i=n(57),a=[null];e.a=function(t,e){var n,o,s=t.__transition;if(s)for(o in e=null==e?null:e+"",s)if((n=s[o]).state>i.c&&n.name===e)return new r.a([[t]],a,e,+o);return null}},function(t,e,n){function r(t){return i.mix({},o.shape.venn,{stroke:t.color,fill:t.color,fillOpacity:t.opacity},t.style)}var i=n(0),a=n(17),o=n(3),s=i.PathUtil,u=a.registerFactory("venn",{defaultShapeType:"venn",getDefaultPoints:function(t){var e=[];return i.each(t.x,function(n,r){e.push({x:n,y:t.y[r]})}),e},getActiveCfg:function(t,e){return"hollow"===t?{lineWidth:(e.lineWidth||1)+1}:{fillOpacity:(e.fillOpacity||e.opacity||1)-.08}},getSelectedCfg:function(t,e){return e&&e.style?e.style:this.getActiveCfg(t,e)}});a.registerShape("venn","venn",{draw:function(t,e){var n=t.origin._origin.path,a=r(t),o=s.parsePathString(n);return e.addShape("path",{attrs:i.mix(a,{path:o})})},getMarkerCfg:function(t){return i.mix({symbol:"circle",radius:4},r(t))}}),a.registerShape("venn","hollow",{draw:function(t,e){var n=t.origin._origin.path,r=function(t){return i.mix({},o.shape.hollowVenn,{stroke:t.color,strokeOpacity:t.opacity},t.style)}(t),a=s.parsePathString(n);return e.addShape("path",{attrs:i.mix(r,{path:a})})},getMarkerCfg:function(t){return i.mix({symbol:"circle",radius:4},r(t))}}),t.exports=u},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var a=n(20),o=n(0),s=n(341);n(442);var u=function(t){function e(e){var n;return n=t.call(this,e)||this,o.assign(i(i(n)),s),n}r(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.type="violin",e.shapeType="violin",e.generatePoints=!0,e},n.createShapePointsCfg=function(e){var n=t.prototype.createShapePointsCfg.call(this,e);n.size=this.getNormalizedSize(e);var r=this.get("_sizeField");return n._size=e._origin[r],n},n.clearInner=function(){t.prototype.clearInner.call(this),this.set("defaultSize",null)},n._initAttrs=function(){var e=this.get("attrOptions"),n=e.size?e.size.field:this.get("_sizeField")?this.get("_sizeField"):"size";this.set("_sizeField",n),delete e.size,t.prototype._initAttrs.call(this)},e}(a),l=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.hasDefaultAdjust=!0,e.adjusts=[{type:"dodge"}],e},e}(u);u.Dodge=l,a.Violin=u,a.ViolinDodge=l,t.exports=u},function(t,e,n){function r(t){return s.mix({},l.shape.venn,{stroke:t.color,fill:t.color,fillOpacity:t.opacity},t.style)}function i(t){return s.mix({},l.shape.hollowVenn,{stroke:t.color,strokeOpacity:t.opacity},t.style)}function a(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];r&&e.push([0===n?"M":"L",r.x,r.y])}var i=t[0];return e.push(["L",i.x,i.y]),e.push(["z"]),e}function o(t){for(var e=t.length/2,n=[],r=[],i=0;i<t.length;i++)i<e?n.push(t[i]):r.push(t[i]);var a=c.getSplinePath(n,!1),o=c.getSplinePath(r,!1);a.push(["L",r[0].x,r[0].y]),o.shift();var s=a.concat(o);return s.push(["L",n[0].x,n[0].y]),s.push(["z"]),s}var s=n(0),u=n(17),l=n(3),c=n(21),h=u.registerFactory("violin",{defaultShapeType:"violin",getDefaultPoints:function(t){var e=t.size/2,n=[],r=function(t){var e=Math.max.apply(null,t);return t.map(function(t){return t/e})}(t._size);return s.each(t.y,function(i,a){var o=r[a]*e,s=0===a,u=a===t.y.length-1;n.push({isMin:s,isMax:u,x:t.x-o,y:i}),n.unshift({isMin:s,isMax:u,x:t.x+o,y:i})}),n},getActiveCfg:function(t,e){return"hollow"===t?{lineWidth:(e.lineWidth||1)+1}:{fillOpacity:(e.fillOpacity||e.opacity||1)-.08}},getSelectedCfg:function(t,e){return e&&e.style?e.style:this.getActiveCfg(t,e)}});u.registerShape("violin","violin",{draw:function(t,e){var n=r(t),i=a(t.points);return i=this.parsePath(i),e.addShape("path",{attrs:s.mix(n,{path:i})})},getMarkerCfg:function(t){return s.mix({symbol:"circle",radius:4},r(t))}}),u.registerShape("violin","smooth",{draw:function(t,e){var n=r(t),i=o(t.points);return i=this.parsePath(i),e.addShape("path",{attrs:s.mix(n,{path:i})})},getMarkerCfg:function(t){return s.mix({symbol:"circle",radius:4},r(t))}}),u.registerShape("violin","hollow",{draw:function(t,e){var n=i(t),r=a(t.points);return r=this.parsePath(r),e.addShape("path",{attrs:s.mix(n,{path:r})})},getMarkerCfg:function(t){return s.mix({symbol:"circle",radius:4},i(t))}}),u.registerShape("violin","smoothHollow",{draw:function(t,e){var n=i(t),r=o(t.points);return r=this.parsePath(r),e.addShape("path",{attrs:s.mix(n,{path:r})})},getMarkerCfg:function(t){return s.mix({symbol:"circle",radius:4},i(t))}}),t.exports=h},function(t,e,n){var r=n(0),i=n(142),a={};a.Rect=n(369),a.List=n(370),a.Circle=n(444),a.Tree=n(445),a.Mirror=n(446),a.Matrix=n(447),i.prototype.facet=function(t,e){var n=a[r.upperFirst(t)];if(!n)throw new Error("Not support such type of facets as: "+t);var i=this.get("facets");i&&i.destroy(),e.chart=this;var o=new n(e);this.set("facets",o)},t.exports=a},function(t,e,n){function r(t,e,n){return{x:t.x+e*Math.cos(n),y:t.y+e*Math.sin(n)}}var i=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.type="circle",e},n.getRegion=function(t,e){var n=2*Math.PI/t,i=-1*Math.PI/2+n*e,a=.5/(1+1/Math.sin(n/2)),o=r({x:.5,y:.5},.5-a,i),s=5*Math.PI/4,u=1*Math.PI/4;return{start:r(o,a,s),end:r(o,a,u)}},n.generateFacets=function(t){var e=this,n=e.fields[0];if(!n)throw"Please specify for the field for facet!";var r=e.getFieldValues(n,t),i=r.length,a=[];return r.forEach(function(o,s){var u=e.getFilter([{field:n,value:o,values:r}]),l=t.filter(u),c={type:e.type,colValue:o,colField:n,colIndex:s,cols:i,rows:1,rowIndex:0,data:l,region:e.getRegion(i,s)};a.push(c)}),a},e}(n(348));t.exports=i},function(t,e,n){var r=n(348),i=n(0).assign,a=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.type="tree",e.line={lineWidth:1,stroke:"#ddd"},e.lineSmooth=!1,e},n.generateFacets=function(t){if(!this.fields.length)throw"Please specify for the fields for facet!";var e=[],n=this.getRootFacet(t);return e.push(n),n.children=this.getChildFacets(t,1,e),this.setRegion(e),e},n.getRootFacet=function(t){return{type:this.type,rows:this.getRows(),rowIndex:0,colIndex:0,colValue:this.rootTitle,data:t}},n.getRows=function(){return this.fields.length+1},n.getChildFacets=function(t,e,n){var r=this,i=r.fields;if(!(i.length<e)){var a=[],o=i[e-1],s=r.getFieldValues(o,t);return s.forEach(function(i,u){var l=r.getFilter([{field:o,value:i,values:s}]),c=t.filter(l);if(c.length){var h={type:r.type,colValue:i,colField:o,colIndex:u,rows:r.getRows(),rowIndex:e,data:c,children:r.getChildFacets(c,e+1,n)};a.push(h),n.push(h)}}),a}},n.setRegion=function(t){var e=this;e.forceColIndex(t),t.forEach(function(t){t.region=e.getRegion(t.rows,t.cols,t.colIndex,t.rowIndex)})},n.forceColIndex=function(t){var e=this,n=[],r=0;t.forEach(function(t){e.isLeaf(t)&&(n.push(t),t.colIndex=r,r++)}),n.forEach(function(t){t.cols=n.length});for(var i=e.fields.length-1;i>=0;i--)for(var a=e.getFacetsByLevel(t,i),o=0;o<a.length;o++){var s=a[o];e.isLeaf(s)||(s.originColIndex=s.colIndex,s.colIndex=e.getRegionIndex(s.children),s.cols=n.length)}},n.getFacetsByLevel=function(t,e){var n=[];return t.forEach(function(t){t.rowIndex===e&&n.push(t)}),n},n.getRegion=function(t,e,n,r){var i=1/e,a=1/t,o={x:i*n,y:a*r};return{start:o,end:{x:o.x+i,y:o.y+2*a/3}}},n.getRegionIndex=function(t){var e=t[0];return(t[t.length-1].colIndex-e.colIndex)/2+e.colIndex},n.isLeaf=function(t){return!t.children||!t.children.length},n.setXAxis=function(t,e,n){n.rowIndex!==n.rows-1&&(e[t].label=null,e[t].title=null)},n.setYAxis=function(t,e,n){0!==n.originColIndex&&0!==n.colIndex&&(e[t].title=null,e[t].label=null)},n.onPaint=function(){t.prototype.onPaint.call(this),this.group.clear(),this.facets&&this.line&&this.drawLines(this.facets,this.group)},n.drawLines=function(t,e){var n=this,r=e.addGroup();t.forEach(function(t){n.isLeaf(t)||n._addFacetLines(t,t.children,r)})},n._addFacetLines=function(t,e,n){var r=this,i=t.view.getViewRegion(),a={x:i.start.x+(i.end.x-i.start.x)/2,y:i.start.y};e.forEach(function(t){var e=t.view.getViewRegion(),i={x:e.start.x+(e.end.x-e.start.x)/2,y:e.end.y},o={x:a.x,y:a.y+(i.y-a.y)/2};r._drawLine([a,o,{x:i.x,y:o.y},i],n)})},n._getPath=function(t){var e=[];return this.lineSmooth?(e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y])):t.forEach(function(t,n){e.push(0===n?["M",t.x,t.y]:["L",t.x,t.y])}),e},n._drawLine=function(t,e){var n=this._getPath(t);e.addShape("path",{attrs:i({path:n},this.line)})},e}(r);t.exports=a},function(t,e,n){var r=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.type="mirror",this.transpose=!1,e},n.init=function(){this.transpose?(this.cols=2,this.rows=1):(this.cols=1,this.rows=2),t.prototype.init.call(this)},n.beforeProcessView=function(t,e){this.transpose?e.colIndex%2==0?t.coord().transpose().scale(-1,1):t.coord().transpose():e.rowIndex%2!=0&&t.coord().scale(1,-1)},n.renderTitle=function(t,e){this.transpose?this.drawColTitle(t,e):this.drawRowTitle(t,e)},n.setXAxis=function(t,e,n){1!==n.colIndex&&1!==n.rowIndex||(e[t].label=null,e[t].title=null)},n.setYAxis=function(){},e}(n(370));t.exports=r},function(t,e,n){var r=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.type="matrix",e.showTitle=!1,e},n.generateFacets=function(t){for(var e=this.fields,n=e.length,r=n,i=[],a=0;a<r;a++)for(var o=e[a],s=0;s<n;s++){var u=e[s],l={type:this.type,colValue:o,rowValue:u,colField:o,rowField:u,colIndex:a,rowIndex:s,cols:r,rows:n,data:t,region:this.getRegion(n,r,a,s)};i.push(l)}return i},n.setXAxis=function(t,e,n){n.rowIndex!==n.rows-1&&(e[t].title=null,e[t].label=null)},n.setYAxis=function(t,e,n){0!==n.colIndex&&(e[t].title=null,e[t].label=null)},e}(n(369));t.exports=r},function(t,e,n){var r=n(140),i=n(143),a=n(0),o={Base:n(342),Brush:n(449),Drag:n(450),ShapeSelect:n(451),Zoom:n(452)};r._Interactions={},r.registerInteraction=function(t,e){r._Interactions[t]=e},r.getInteraction=function(t){return r._Interactions[t]},i.prototype.getInteractions=function(){return this._interactions||(this._interactions={}),this._interactions},i.prototype._setInteraction=function(t,e){var n=this.getInteractions();n[t]&&n[t]!==e&&n[t].destroy(),n[t]=e},i.prototype.clearInteraction=function(t){var e=this.getInteractions();t?(e[t]&&e[t].destroy(),delete e[t]):a.each(e,function(t,n){t.destroy(),delete e[n]})},i.prototype.interact=i.prototype.interaction=function(t,e){var n=new(r.getInteraction(t))(e,this);return this._setInteraction(t,n),this},r.registerInteraction("brush",o.Brush),r.registerInteraction("Brush",o.Brush),r.registerInteraction("drag",o.Drag),r.registerInteraction("Drag",o.Drag),r.registerInteraction("zoom",o.Zoom),r.registerInteraction("Zoom",o.Zoom),r.registerInteraction("shape-select",o.ShapeSelect),r.registerInteraction("ShapeSelect",o.ShapeSelect),t.exports=o},function(t,e,n){function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var i=n(0),a=["X","Y","XY","POLYGON"],o="XY",s=function(t){function e(e,n){var i,s=r(r(i=t.call(this,e,n)||this));s.filter=!s.draggable,s.type=s.type.toUpperCase(),s.chart=n,-1===a.indexOf(s.type)&&(s.type=o);var u,l=s.canvas;if(l&&(l.get("children").map(function(t){return"plotBack"===t.get("type")?(u=t.get("plotRange"),!1):t}),s.plot={start:u.bl,end:u.tr}),n){var c=n.get("coord");s.plot={start:c.start,end:c.end};var h=n._getScales("x"),f=n._getScales("y");s.xScale=s.xField?h[s.xField]:n.getXScale(),s.yScale=s.yField?f[s.yField]:n.getYScales()[0]}return i}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return i.mix({},e,{type:o,startPoint:null,brushing:!1,dragging:!1,brushShape:null,container:null,polygonPath:null,style:{fill:"#C5D4EB",opacity:.3,lineWidth:1,stroke:"#82A6DD"},draggable:!1,dragOffX:0,dragOffY:0,inPlot:!0,xField:null,yField:null})},n.start=function(t){var e=this,n=e.canvas,r=e.type,i=e.brushShape;if(r){var a={x:t.offsetX,y:t.offsetY};if(a.x){var o=e.plot&&e.inPlot,s=n.get("canvasDOM"),u=n.get("pixelRatio");if(e.selection&&(e.selection=null),e.draggable&&i&&!i.get("destroyed")){if(i.isHit(a.x*u,a.y*u)){if(s.style.cursor="move",e.selection=i,e.dragging=!0,"X"===r)e.dragoffX=a.x-i.attr("x"),e.dragoffY=0;else if("Y"===r)e.dragoffX=0,e.dragoffY=a.y-i.attr("y");else if("XY"===r)e.dragoffX=a.x-i.attr("x"),e.dragoffY=a.y-i.attr("y");else if("POLYGON"===r){var l=i.getBBox();e.dragoffX=a.x-l.minX,e.dragoffY=a.y-l.minY}o&&e.selection.attr("clip",n.addShape("rect",{attrs:{x:this.plot.start.x,y:this.plot.end.y,width:this.plot.end.x-this.plot.start.x,height:this.plot.start.y-this.plot.end.y,fill:"#fff",fillOpacity:0}})),e.onDragstart&&e.onDragstart(t)}e.prePoint=a}if(!e.dragging){e.onBrushstart&&e.onBrushstart(a);var c=e.container;if(o){var h=e.plot,f=h.start,d=h.end;if(a.x<f.x||a.x>d.x||a.y<d.y||a.y>f.y)return}s.style.cursor="crosshair",e.startPoint=a,e.brushShape=null,e.brushing=!0,c?c.clear():(c=n.addGroup({zIndex:5})).initTransform(),e.container=c,"POLYGON"===r&&(e.polygonPath="M "+a.x+" "+a.y)}}}},n.process=function(t){var e=this,n=e.brushing,r=e.dragging,a=e.type,o=e.plot,s=e.startPoint,u=e.xScale,l=e.yScale,c=e.canvas;if(n||r){var h={x:t.offsetX,y:t.offsetY},f=c.get("canvasDOM");if(n){f.style.cursor="crosshair";var d,p,g,v,m=o.start,y=o.end,_=e.polygonPath,b=e.brushShape,x=e.container;e.plot&&e.inPlot&&(h=e._limitCoordScope(h)),"Y"===a?(d=m.x,p=h.y>=s.y?s.y:h.y,g=Math.abs(m.x-y.x),v=Math.abs(s.y-h.y)):"X"===a?(d=h.x>=s.x?s.x:h.x,p=y.y,g=Math.abs(s.x-h.x),v=Math.abs(y.y-m.y)):"XY"===a?(h.x>=s.x?(d=s.x,p=h.y>=s.y?s.y:h.y):(d=h.x,p=h.y>=s.y?s.y:h.y),g=Math.abs(s.x-h.x),v=Math.abs(s.y-h.y)):"POLYGON"===a&&(e.polygonPath=_+="L "+h.x+" "+h.y,b?!b.get("destroyed")&&b.attr(i.mix({},b._attrs,{path:_})):b=x.addShape("path",{attrs:i.mix(e.style,{path:_})})),"POLYGON"!==a&&(b?!b.get("destroyed")&&b.attr(i.mix({},b._attrs,{x:d,y:p,width:g,height:v})):b=x.addShape("rect",{attrs:i.mix(e.style,{x:d,y:p,width:g,height:v})})),e.brushShape=b}else if(r){f.style.cursor="move";var w=e.selection;if(w&&!w.get("destroyed"))if("POLYGON"===a){var S=e.prePoint;e.selection.translate(h.x-S.x,h.y-S.y)}else e.dragoffX&&w.attr("x",h.x-e.dragoffX),e.dragoffY&&w.attr("y",h.y-e.dragoffY)}e.prePoint=h,c.draw();var T=e._getSelected(),O=T.yValues,M={data:T.data,shapes:T.shapes,x:h.x,y:h.y};u&&(M[u.field]=T.xValues),l&&(M[l.field]=O),e.onDragmove&&e.onDragmove(M),e.onBrushmove&&e.onBrushmove(M)}},n.end=function(t){var e=this,n=e.data,r=e.shapes,a=e.xValues,o=e.yValues,s=e.canvas,u=e.type,l=e.startPoint,c=e.chart,h=e.container,f=e.xScale,d=e.yScale,p=t.offsetX,g=t.offsetY;if(s.get("canvasDOM").style.cursor="default",Math.abs(l.x-p)<=1&&Math.abs(l.y-g)<=1)return e.brushing=!1,void(e.dragging=!1);var v={data:n,shapes:r,x:p,y:g};if(f&&(v[f.field]=a),d&&(v[d.field]=o),e.dragging)e.dragging=!1,e.onDragend&&e.onDragend(v);else if(e.brushing){e.brushing=!1;var m=e.brushShape,y=e.polygonPath;"POLYGON"===u&&(y+="z",m&&!m.get("destroyed")&&m.attr(i.mix({},m._attrs,{path:y})),e.polygonPath=y,s.draw()),e.onBrushend?e.onBrushend(v):c&&e.filter&&(h.clear(),"X"===u?f&&c.filter(f.field,function(t){return a.indexOf(t)>-1}):"Y"===u?d&&c.filter(d.field,function(t){return o.indexOf(t)>-1}):(f&&c.filter(f.field,function(t){return a.indexOf(t)>-1}),d&&c.filter(d.field,function(t){return o.indexOf(t)>-1})),c.repaint())}},n.reset=function(){var t=this.chart;t&&this.filter&&(t.get("options").filters={},t.repaint())},n._limitCoordScope=function(t){var e=this.plot,n=e.start,r=e.end;return t.x<n.x&&(t.x=n.x),t.x>r.x&&(t.x=r.x),t.y<r.y&&(t.y=r.y),t.y>n.y&&(t.y=n.y),t},n._getSelected=function(){var t=this,e=t.chart,n=t.xScale,r=t.yScale,i=t.brushShape,a=t.canvas.get("pixelRatio"),o=[],s=[],u=[],l=[];return e&&e.get("geoms").map(function(t){return t.getShapes().map(function(t){var e=t.get("origin");return Array.isArray(e)||(e=[e]),e.map(function(e){if(i.isHit(e.x*a,e.y*a)){o.push(t);var c=e._origin;l.push(c),n&&s.push(c[n.field]),r&&u.push(c[r.field])}return e}),t}),t}),t.shapes=o,t.xValues=s,t.yValues=u,t.data=l,{data:l,xValues:s,yValues:u,shapes:o}},e}(n(342));t.exports=s},function(t,e,n){function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var i=n(0),a=["X","Y","XY"],o="X",s=function(t){function e(e,n){var s,u=r(r(s=t.call(this,e,n)||this));u.type=u.type.toUpperCase(),u.chart=n;var l=n.getYScales(),c=n.getXScale();l.push(c);var h=n.get("scaleController");return l.forEach(function(t){var e=t.field,n=h.defs[e];u.originScaleDefsByField[e]=i.mix(n,{nice:!!n.nice}),t.isLinear&&(u.stepByField[e]=(t.max-t.min)*u.stepRatio)}),-1===a.indexOf(u.type)&&(u.type=o),s}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return i.mix({},e,{type:o,stepRatio:.05,stepByField:{},originScaleDefsByField:{},previousPoint:null,isDragging:!1})},n._applyTranslate=function(t,e){void 0===e&&(e=0);var n=t.min,r=t.max,i=r-n;this.chart.scale(t.field,{nice:!1,min:n-e*i,max:r-e*i})},n.start=function(t){var e=this.chart;this.canvas.get("canvasDOM").style.cursor="pointer";var n=e.get("coord");this.isDragging=!0,this.previousPoint=n.invertPoint(t)},n.process=function(t){var e=this;if(e.isDragging){var n=e.chart,r=e.type;e.canvas.get("canvasDOM").style.cursor="move";var i=n.get("coord"),a=e.previousPoint,o=i.invertPoint(t);r.indexOf("X")>-1&&e._applyTranslate(n.getXScale(),o.x-a.x),r.indexOf("Y")>-1&&n.getYScales().forEach(function(t){e._applyTranslate(t,o.y-a.y)}),e.previousPoint=o,n.repaint()}},n.end=function(){this.isDragging=!1,this.canvas.get("canvasDOM").style.cursor="default"},n.reset=function(){var t=this.view,e=this.originScaleDefsByField,n=t.getYScales(),r=t.getXScale();n.push(r),n.forEach(function(n){if(n.isLinear){var r=n.field;t.scale(r,e[r])}}),t.repaint()},e}(n(342));t.exports=s},function(t,e,n){function r(t,e){var n={};for(var r in e)n[r]=t[r];return n}var i=n(0),a=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return i.mix({},e,{startEvent:"mouseup",processEvent:null,selectStyle:{fillOpacity:1},unSelectStyle:{fillOpacity:.1},cancelable:!0})},n.start=function(t){var e,n=[];if(this.view.eachShape(function(r,i){i.isPointInPath(t.x,t.y)?e=i:n.push(i)}),e)if(e.get("_selected")){if(!this.cancelable)return;this.reset()}else{var a=this.selectStyle,o=this.unSelectStyle,s=r(e.attr(),e);e.set("_originAttrs",s),e.attr(a),i.each(n,function(t){var e=t.get("_originAttrs");e&&t.attr(e),t.set("_selected",!1),o&&(e=r(t.attr(),o),t.set("_originAttrs",e),t.attr(o))}),e.set("_selected",!0),this.selectedShape=e,this.canvas.draw()}else this.reset()},n.end=function(t){var e=this.selectedShape;e&&!e.get("destroyed")&&e.get("origin")&&(t.data=e.get("origin")._origin,t.shapeInfo=e.get("origin"),t.shape=e,t.selected=!!e.get("_selected"))},n.reset=function(){if(this.selectedShape){var t=this.view.get("geoms")[0].get("container").get("children")[0].get("children");i.each(t,function(t){var e=t.get("_originAttrs");e&&(t._attrs=e,t.set("_originAttrs",null)),t.set("_selected",!1)}),this.canvas.draw()}},e}(n(342));t.exports=a},function(t,e,n){function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var i=n(0),a=["X","Y","XY"],o="X",s=function(t){function e(e,n){var s,u=r(r(s=t.call(this,e,n)||this));u.chart=n,u.type=u.type.toUpperCase();var l=n.getYScales(),c=n.getXScale();l.push(c);var h=n.get("scaleController");return l.forEach(function(t){var e=t.field,n=h.defs[e]||{};u.originScaleDefsByField[e]=i.mix(n,{nice:!!n.nice}),t.isLinear&&(u.stepByField[e]=(t.max-t.min)*u.stepRatio)}),-1===a.indexOf(u.type)&&(u.type=o),s}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return i.mix({},e,{processEvent:"mousewheel",type:o,stepRatio:.05,stepByField:{},originScaleDefsByField:{}})},n._applyScale=function(t,e,n){if(void 0===n&&(n=0),t.isLinear){var r=t.field,i=this.stepByField[r]*e,a=t.min+i*n,o=t.max-i*(1-n);o>a&&this.chart.scale(r,{nice:!1,min:a,max:o})}},n.process=function(t){var e=this,n=e.chart,r=e.type,i=n.get("coord"),a=t.deltaY,o=i.invertPoint(t);if(a){e.onZoom&&e.onZoom(a,o,e),a>0?e.onZoomin&&e.onZoomin(a,o,e):e.onZoomout&&e.onZoomout(a,o,e);var s=a/Math.abs(a);r.indexOf("X")>-1&&e._applyScale(n.getXScale(),s,o.x),r.indexOf("Y")>-1&&n.getYScales().forEach(function(t){e._applyScale(t,s,o.y)})}n.repaint()},n.reset=function(){var t=this.view,e=this.originScaleDefsByField,n=t.getYScales(),r=t.getXScale();n.push(r),n.forEach(function(n){if(n.isLinear){var r=n.field;t.scale(r,e[r])}}),t.repaint()},e}(n(342));t.exports=s}])}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.DataSet=e():t.DataSet=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=287)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(154);n.d(e,"geoArea",function(){return r.c});var i=n(307);n.d(e,"geoBounds",function(){return i.a});var a=n(308);n.d(e,"geoCentroid",function(){return a.a});var o=n(155);n.d(e,"geoCircle",function(){return o.b});var s=n(91);n.d(e,"geoClipExtent",function(){return s.b});var u=n(327);n.d(e,"geoContains",function(){return u.a});var l=n(173);n.d(e,"geoDistance",function(){return l.a});var c=n(328);n.d(e,"geoGraticule",function(){return c.a}),n.d(e,"geoGraticule10",function(){return c.b});var h=n(329);n.d(e,"geoInterpolate",function(){return h.a});var f=n(174);n.d(e,"geoLength",function(){return f.a});var d=n(330);n.d(e,"geoPath",function(){return d.a});var p=n(176);n.d(e,"geoAlbers",function(){return p.a});var g=n(340);n.d(e,"geoAlbersUsa",function(){return g.a});var v=n(341);n.d(e,"geoAzimuthalEqualArea",function(){return v.b}),n.d(e,"geoAzimuthalEqualAreaRaw",function(){return v.a});var m=n(342);n.d(e,"geoAzimuthalEquidistant",function(){return m.b}),n.d(e,"geoAzimuthalEquidistantRaw",function(){return m.a});var y=n(343);n.d(e,"geoConicConformal",function(){return y.b}),n.d(e,"geoConicConformalRaw",function(){return y.a});var _=n(94);n.d(e,"geoConicEqualArea",function(){return _.b}),n.d(e,"geoConicEqualAreaRaw",function(){return _.a});var b=n(344);n.d(e,"geoConicEquidistant",function(){return b.b}),n.d(e,"geoConicEquidistantRaw",function(){return b.a});var x=n(178);n.d(e,"geoEquirectangular",function(){return x.a}),n.d(e,"geoEquirectangularRaw",function(){return x.b});var w=n(345);n.d(e,"geoGnomonic",function(){return w.a}),n.d(e,"geoGnomonicRaw",function(){return w.b});var S=n(346);n.d(e,"geoIdentity",function(){return S.a});var T=n(21);n.d(e,"geoProjection",function(){return T.a}),n.d(e,"geoProjectionMutator",function(){return T.b});var O=n(97);n.d(e,"geoMercator",function(){return O.a}),n.d(e,"geoMercatorRaw",function(){return O.c});var M=n(347);n.d(e,"geoOrthographic",function(){return M.a}),n.d(e,"geoOrthographicRaw",function(){return M.b});var k=n(348);n.d(e,"geoStereographic",function(){return k.a}),n.d(e,"geoStereographicRaw",function(){return k.b});var C=n(349);n.d(e,"geoTransverseMercator",function(){return C.a}),n.d(e,"geoTransverseMercatorRaw",function(){return C.b});var E=n(66);n.d(e,"geoRotation",function(){return E.a});var A=n(30);n.d(e,"geoStream",function(){return A.a});var I=n(67);n.d(e,"geoTransform",function(){return I.a})},function(t,e,n){"use strict";function r(t){return t>0?Math.sqrt(t):0}n.d(e,"a",function(){return i}),n.d(e,"f",function(){return a}),n.d(e,"g",function(){return o}),n.d(e,"h",function(){return s}),n.d(e,"m",function(){return u}),n.d(e,"n",function(){return l}),n.d(e,"p",function(){return c}),n.d(e,"q",function(){return h}),n.d(e,"r",function(){return f}),n.d(e,"t",function(){return d}),n.d(e,"w",function(){return p}),n.d(e,"x",function(){return g}),n.d(e,"y",function(){return v}),n.d(e,"F",function(){return m}),n.d(e,"k",function(){return y}),n.d(e,"l",function(){return _}),n.d(e,"s",function(){return b}),n.d(e,"o",function(){return x}),n.d(e,"u",function(){return w}),n.d(e,"C",function(){return S}),n.d(e,"D",function(){return T}),n.d(e,"E",function(){return O}),n.d(e,"H",function(){return M}),n.d(e,"j",function(){return k}),n.d(e,"v",function(){return C}),e.z=function(t){return t?t/Math.sin(t):1},e.e=function(t){return t>1?x:t<-1?-x:Math.asin(t)},e.b=function(t){return t>1?0:t<-1?b:Math.acos(t)},e.B=r,e.G=function(t){return((t=u(2*t))-1)/(t+1)},e.A=function(t){return(u(t)-u(-t))/2},e.i=function(t){return(u(t)+u(-t))/2},e.d=function(t){return c(t+r(t*t+1))},e.c=function(t){return c(t+r(t*t-1))};var i=Math.abs,a=Math.atan,o=Math.atan2,s=(Math,Math.cos),u=Math.exp,l=Math.floor,c=Math.log,h=Math.max,f=Math.min,d=Math.pow,p=Math.round,g=Math.sign||function(t){return t>0?1:t<0?-1:0},v=Math.sin,m=Math.tan,y=1e-6,_=1e-12,b=Math.PI,x=b/2,w=b/4,S=Math.SQRT1_2,T=r(2),O=r(b),M=2*b,k=180/b,C=b/180},function(t,e,n){var r=n(4),i=n(247),a=n(15),o=n(595),s=n(190),u=n(47),l=n(125),c=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{state:{}};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r(i,{_onChangeTimer:null,DataSet:e,isDataSet:!0,views:{}},n),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._getUniqueViewName=function(){for(var t=o("view_");this.views[t];)t=o("view_");return t},e.prototype.createView=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this;if(i(t)&&(t=n._getUniqueViewName()),a(t)&&(e=t,t=n._getUniqueViewName()),n.views[t])throw new Error("data view exists: "+t);var r=new u(n,e);return n.views[t]=r,r},e.prototype.getView=function(t){return this.views[t]},e.prototype.setView=function(t,e){this.views[t]=e},e.prototype.setState=function(t,e){var n=this;n.state[t]=e,n._onChangeTimer&&(clearTimeout(n._onChangeTimer),n._onChangeTimer=null),n._onChangeTimer=setTimeout(function(){n.emit("statechange",t,e)},16)},e}(s);r(c,{CONSTANTS:l,DataSet:c,DataView:u,View:u,connectors:{},transforms:{},registerConnector:function(t,e){c.connectors[t]=e},getConnector:function(t){return c.connectors[t]||c.connectors.default},registerTransform:function(t,e){c.transforms[t]=e},getTransform:function(t){return c.transforms[t]||c.transforms.default}},l),u.DataSet=c,r(c.prototype,{view:c.prototype.createView}),c.version="0.8.9",t.exports=c},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(61),i=n(41),a=n(295),o=n(24),s=n(64),u=n(11),l=Object.prototype.hasOwnProperty,c=a(function(t,e){if(s(e)||o(e))i(e,u(e),t);else for(var n in e)l.call(e,n)&&r(t,n,e[n])});t.exports=c},function(t,e,n){"use strict";n.d(e,"i",function(){return r}),n.d(e,"j",function(){return i}),n.d(e,"o",function(){return a}),n.d(e,"l",function(){return o}),n.d(e,"q",function(){return s}),n.d(e,"w",function(){return u}),n.d(e,"h",function(){return l}),n.d(e,"r",function(){return c}),n.d(e,"a",function(){return h}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return d}),n.d(e,"g",function(){return p}),n.d(e,"f",function(){return g}),n.d(e,"k",function(){return v}),n.d(e,"n",function(){return m}),n.d(e,"p",function(){return y}),n.d(e,"t",function(){return _}),n.d(e,"s",function(){return b}),n.d(e,"u",function(){return x}),n.d(e,"v",function(){return w}),e.b=function(t){return t>1?0:t<-1?a:Math.acos(t)},e.c=function(t){return t>1?o:t<-1?-o:Math.asin(t)},e.m=function(t){return(t=_(t/2))*t};var r=1e-6,i=1e-12,a=Math.PI,o=a/2,s=a/4,u=2*a,l=180/a,c=a/180,h=Math.abs,f=Math.atan,d=Math.atan2,p=Math.cos,g=Math.ceil,v=Math.exp,m=(Math,Math.log),y=Math.pow,_=Math.sin,b=Math.sign||function(t){return t>0?1:t<0?-1:0},x=Math.sqrt,w=Math.tan},function(t,e,n){"use strict";n.d(e,"i",function(){return r}),n.d(e,"j",function(){return i}),n.d(e,"o",function(){return a}),n.d(e,"l",function(){return o}),n.d(e,"q",function(){return s}),n.d(e,"w",function(){return u}),n.d(e,"h",function(){return l}),n.d(e,"r",function(){return c}),n.d(e,"a",function(){return h}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return d}),n.d(e,"g",function(){return p}),n.d(e,"f",function(){return g}),n.d(e,"k",function(){return v}),n.d(e,"n",function(){return m}),n.d(e,"p",function(){return y}),n.d(e,"t",function(){return _}),n.d(e,"s",function(){return b}),n.d(e,"u",function(){return x}),n.d(e,"v",function(){return w}),e.b=function(t){return t>1?0:t<-1?a:Math.acos(t)},e.c=function(t){return t>1?o:t<-1?-o:Math.asin(t)},e.m=function(t){return(t=_(t/2))*t};var r=1e-6,i=1e-12,a=Math.PI,o=a/2,s=a/4,u=2*a,l=180/a,c=a/180,h=Math.abs,f=Math.atan,d=Math.atan2,p=Math.cos,g=Math.ceil,v=Math.exp,m=(Math,Math.log),y=Math.pow,_=Math.sin,b=Math.sign||function(t){return t>0?1:t<0?-1:0},x=Math.sqrt,w=Math.tan},function(t,e,n){var r=n(3),i=n(9),a="Invalid fields: it must be an array!";t.exports={getField:function(t,e){var n=t.field,a=t.fields;if(i(n))return n;if(r(n))return console.warn("Invalid field: it must be a string!"),n[0];if(console.warn("Invalid field: it must be a string! will try to get fields instead."),i(a))return a;if(r(a)&&a.length)return a[0];if(e)return e;throw new TypeError("Invalid field: it must be a string!")},getFields:function(t,e){var n=t.field,o=t.fields;if(r(o))return o;if(i(o))return console.warn(a),[o];if(console.warn(a+" will try to get field instead."),i(n))return console.warn(a),[n];if(r(n)&&n.length)return console.warn(a),n;if(e)return e;throw new TypeError(a)}}},function(t,e,n){var r;try{r=n(262)}catch(t){}r||(r=window._),t.exports=r},function(t,e,n){var r=n(23),i=n(3),a=n(20);t.exports=function(t){return"string"==typeof t||!i(t)&&a(t)&&"[object String]"==r(t)}},function(t,e,n){"use strict";function r(t,e,n,r){var i;do{i=a.uniqueId(r)}while(t.hasNode(i));return n.dummy=e,t.setNode(i,n),i}function i(t){return a.max(a.map(t.nodes(),function(e){var n=t.node(e).rank;if(!a.isUndefined(n))return n}))}var a=n(8),o=n(17).Graph;t.exports={addDummyNode:r,simplify:function(t){var e=(new o).setGraph(t.graph());return a.forEach(t.nodes(),function(n){e.setNode(n,t.node(n))}),a.forEach(t.edges(),function(n){var r=e.edge(n.v,n.w)||{weight:0,minlen:1},i=t.edge(n);e.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})}),e},asNonCompoundGraph:function(t){var e=new o({multigraph:t.isMultigraph()}).setGraph(t.graph());return a.forEach(t.nodes(),function(n){t.children(n).length||e.setNode(n,t.node(n))}),a.forEach(t.edges(),function(n){e.setEdge(n,t.edge(n))}),e},successorWeights:function(t){var e=a.map(t.nodes(),function(e){var n={};return a.forEach(t.outEdges(e),function(e){n[e.w]=(n[e.w]||0)+t.edge(e).weight}),n});return a.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=a.map(t.nodes(),function(e){var n={};return a.forEach(t.inEdges(e),function(e){n[e.v]=(n[e.v]||0)+t.edge(e).weight}),n});return a.zipObject(t.nodes(),e)},intersectRect:function(t,e){var n,r,i=t.x,a=t.y,o=e.x-i,s=e.y-a,u=t.width/2,l=t.height/2;if(!o&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*u>Math.abs(o)*l?(s<0&&(l=-l),n=l*o/s,r=l):(o<0&&(u=-u),n=u,r=u*s/o),{x:i+n,y:a+r}},buildLayerMatrix:function(t){var e=a.map(a.range(i(t)+1),function(){return[]});return a.forEach(t.nodes(),function(n){var r=t.node(n),i=r.rank;a.isUndefined(i)||(e[i][r.order]=n)}),e},normalizeRanks:function(t){var e=a.minBy(a.map(t.nodes(),function(e){return t.node(e).rank}));a.forEach(t.nodes(),function(n){var r=t.node(n);a.has(r,"rank")&&(r.rank-=e)})},removeEmptyRanks:function(t){var e=a.minBy(a.map(t.nodes(),function(e){return t.node(e).rank})),n=[];a.forEach(t.nodes(),function(r){var i=t.node(r).rank-e;n[i]||(n[i]=[]),n[i].push(r)});var r=0,i=t.graph().nodeRankFactor;a.forEach(n,function(e,n){a.isUndefined(e)&&n%i!=0?--r:r&&a.forEach(e,function(e){t.node(e).rank+=r})})},addBorderNode:function(t,e,n,i){var a={width:0,height:0};return arguments.length>=4&&(a.rank=n,a.order=i),r(t,"border",a,e)},maxRank:i,partition:function(t,e){var n={lhs:[],rhs:[]};return a.forEach(t,function(t){e(t)?n.lhs.push(t):n.rhs.push(t)}),n},time:function(t,e){var n=a.now();try{return e()}finally{console.log(t+" time: "+(a.now()-n)+"ms")}},notime:function(t,e){return e()}}},function(t,e,n){var r=n(151),i=n(305),a=n(24);t.exports=function(t){return a(t)?r(t):i(t)}},function(t,e,n){var r=n(212),i=n(213),a=n(105);t.exports=function(t,e){return null==t?t:r(t,i(e),a)}},function(t,e,n){var r=n(23),i=n(15);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,n){var r;try{r=n(262)}catch(t){}r||(r=window._),t.exports=r},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(160);n.d(e,"bisect",function(){return r.c}),n.d(e,"bisectRight",function(){return r.b}),n.d(e,"bisectLeft",function(){return r.a});var i=n(37);n.d(e,"ascending",function(){return i.a});var a=n(161);n.d(e,"bisector",function(){return a.a});var o=n(311);n.d(e,"cross",function(){return o.a});var s=n(312);n.d(e,"descending",function(){return s.a});var u=n(163);n.d(e,"deviation",function(){return u.a});var l=n(165);n.d(e,"extent",function(){return l.a});var c=n(313);n.d(e,"histogram",function(){return c.a});var h=n(316);n.d(e,"thresholdFreedmanDiaconis",function(){return h.a});var f=n(317);n.d(e,"thresholdScott",function(){return f.a});var d=n(169);n.d(e,"thresholdSturges",function(){return d.a});var p=n(318);n.d(e,"max",function(){return p.a});var g=n(319);n.d(e,"mean",function(){return g.a});var v=n(320);n.d(e,"median",function(){return v.a});var m=n(321);n.d(e,"merge",function(){return m.a});var y=n(170);n.d(e,"min",function(){return y.a});var _=n(162);n.d(e,"pairs",function(){return _.a});var b=n(322);n.d(e,"permute",function(){return b.a});var x=n(92);n.d(e,"quantile",function(){return x.a});var w=n(167);n.d(e,"range",function(){return w.a});var S=n(323);n.d(e,"scan",function(){return S.a});var T=n(324);n.d(e,"shuffle",function(){return T.a});var O=n(325);n.d(e,"sum",function(){return O.a});var M=n(168);n.d(e,"ticks",function(){return M.a}),n.d(e,"tickIncrement",function(){return M.b}),n.d(e,"tickStep",function(){return M.c});var k=n(171);n.d(e,"transpose",function(){return k.a});var C=n(164);n.d(e,"variance",function(){return C.a});var E=n(326);n.d(e,"zip",function(){return E.a})},function(t,e,n){var r;try{r=n(684)}catch(t){}r||(r=window.graphlib),t.exports=r},function(t,e,n){var r=n(145),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();t.exports=a},function(t,e,n){var r=n(3),i=n(13),a=n(9),o=n(540),s=n(546);t.exports=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],u=t;n&&n.length&&(u=s(t,n));var l=void 0;return i(e)?l=e:r(e)?l=function(t){return"_"+e.map(function(e){return t[e]}).join("-")}:a(e)&&(l=function(t){return"_"+t[e]}),o(u,l)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){"use strict";function r(t){function e(t){return[(t=_(t[0]*l.r,t[1]*l.r))[0]*O+v,m-t[1]*O]}function n(t,e){return[(t=g(t,e))[0]*O+v,m-t[1]*O]}function r(){_=Object(s.a)(y=Object(c.b)(A,I,P),g);var t=g(C,E);return v=M-t[0]*O,m=k+t[1]*O,h()}function h(){return S=T=null,e}var g,v,m,y,_,b,x,w,S,T,O=150,M=480,k=250,C=0,E=0,A=0,I=0,P=0,L=null,D=i.a,j=null,R=u.a,N=.5,B=Object(d.a)(n,N);return e.stream=function(t){return S&&T===t?S:S=p(D(y,B(R(T=t))))},e.clipAngle=function(t){return arguments.length?(D=+t?Object(a.a)(L=t*l.r,6*l.r):(L=null,i.a),h()):L*l.h},e.clipExtent=function(t){return arguments.length?(R=null==t?(j=b=x=w=null,u.a):Object(o.a)(j=+t[0][0],b=+t[0][1],x=+t[1][0],w=+t[1][1]),h()):null==j?null:[[j,b],[x,w]]},e.scale=function(t){return arguments.length?(O=+t,r()):O},e.translate=function(t){return arguments.length?(M=+t[0],k=+t[1],r()):[M,k]},e.center=function(t){return arguments.length?(C=t[0]%360*l.r,E=t[1]%360*l.r,r()):[C*l.h,E*l.h]},e.rotate=function(t){return arguments.length?(A=t[0]%360*l.r,I=t[1]%360*l.r,P=t.length>2?t[2]%360*l.r:0,r()):[A*l.h,I*l.h,P*l.h]},e.precision=function(t){return arguments.length?(B=Object(d.a)(n,N=t*t),h()):Object(l.u)(N)},e.fitExtent=function(t,n){return Object(f.a)(e,t,n)},e.fitSize=function(t,n){return Object(f.b)(e,t,n)},function(){return g=t.apply(this,arguments),e.invert=g.invert&&function(t){return(t=_.invert((t[0]-v)/O,(m-t[1])/O))&&[t[0]*l.h,t[1]*l.h]},r()}}e.a=function(t){return r(function(){return t})()},e.b=r;var i=n(336),a=n(337),o=n(91),s=n(156),u=n(93),l=n(5),c=n(66),h=n(67),f=n(96),d=n(338),p=Object(h.b)({point:function(t,e){this.stream.point(t*l.r,e*l.r)}})},function(t,e,n){"use strict";function r(t){function e(t){return[(t=_(t[0]*l.r,t[1]*l.r))[0]*O+v,m-t[1]*O]}function n(t,e){return[(t=g(t,e))[0]*O+v,m-t[1]*O]}function r(){_=Object(s.a)(y=Object(c.b)(A,I,P),g);var t=g(C,E);return v=M-t[0]*O,m=k+t[1]*O,h()}function h(){return S=T=null,e}var g,v,m,y,_,b,x,w,S,T,O=150,M=480,k=250,C=0,E=0,A=0,I=0,P=0,L=null,D=i.a,j=null,R=u.a,N=.5,B=Object(d.a)(n,N);return e.stream=function(t){return S&&T===t?S:S=p(D(y,B(R(T=t))))},e.clipAngle=function(t){return arguments.length?(D=+t?Object(a.a)(L=t*l.r,6*l.r):(L=null,i.a),h()):L*l.h},e.clipExtent=function(t){return arguments.length?(R=null==t?(j=b=x=w=null,u.a):Object(o.a)(j=+t[0][0],b=+t[0][1],x=+t[1][0],w=+t[1][1]),h()):null==j?null:[[j,b],[x,w]]},e.scale=function(t){return arguments.length?(O=+t,r()):O},e.translate=function(t){return arguments.length?(M=+t[0],k=+t[1],r()):[M,k]},e.center=function(t){return arguments.length?(C=t[0]%360*l.r,E=t[1]%360*l.r,r()):[C*l.h,E*l.h]},e.rotate=function(t){return arguments.length?(A=t[0]%360*l.r,I=t[1]%360*l.r,P=t.length>2?t[2]%360*l.r:0,r()):[A*l.h,I*l.h,P*l.h]},e.precision=function(t){return arguments.length?(B=Object(d.a)(n,N=t*t),h()):Object(l.u)(N)},e.fitExtent=Object(f.a)(e),e.fitSize=Object(f.b)(e),function(){return g=t.apply(this,arguments),e.invert=g.invert&&function(t){return(t=_.invert((t[0]-v)/O,(m-t[1])/O))&&[t[0]*l.h,t[1]*l.h]},r()}}e.a=function(t){return r(function(){return t})()},e.b=r;var i=n(523),a=n(525),o=n(218),s=n(217),u=n(223),l=n(6),c=n(114),h=n(117),f=n(227),d=n(526),p=Object(h.b)({point:function(t,e){this.stream.point(t*l.r,e*l.r)}})},function(t,e,n){var r=n(35),i=n(290),a=n(291),o=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?i(t):a(t)}},function(t,e,n){var r=n(13),i=n(87);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){"use strict";e.a=function(){}},function(t,e,n){"use strict";function r(t,e){var n,r=t*Object(o.y)(e),i=30;do{e-=n=(e+Object(o.y)(e)-r)/(1+Object(o.h)(e))}while(Object(o.a)(n)>o.k&&--i>0);return e/2}function i(t,e,n){function i(i,a){return[t*i*Object(o.h)(a=r(n,a)),e*Object(o.y)(a)]}return i.invert=function(r,i){return i=Object(o.e)(i/e),[r/(t*Object(o.h)(i)),Object(o.e)((2*i+Object(o.y)(2*i))/n)]},i}e.c=r,e.b=i,n.d(e,"d",function(){return s});var a=n(0),o=n(1),s=i(o.D/o.o,o.D,o.s);e.a=function(){return Object(a.geoProjection)(s).scale(169.529)}},function(t,e,n){"use strict";var r=t.exports={};r.linearRegression=n(548),r.linearRegressionLine=n(549),r.standardDeviation=n(230),r.rSquared=n(550),r.mode=n(551),r.modeFast=n(552),r.modeSorted=n(234),r.min=n(235),r.max=n(236),r.minSorted=n(553),r.maxSorted=n(554),r.sum=n(232),r.sumSimple=n(555),r.product=n(556),r.quantile=n(122),r.quantileSorted=n(123),r.interquartileRange=r.iqr=n(558),r.medianAbsoluteDeviation=r.mad=n(559),r.chunk=n(560),r.sampleWithReplacement=n(561),r.shuffle=n(238),r.shuffleInPlace=n(239),r.sample=n(562),r.ckmeans=n(563),r.uniqueCountSorted=n(240),r.sumNthPowerDeviations=n(121),r.equalIntervalBreaks=n(564),r.sampleCovariance=n(241),r.sampleCorrelation=n(565),r.sampleVariance=n(124),r.sampleStandardDeviation=n(242),r.sampleSkewness=n(566),r.sampleKurtosis=n(567),r.permutationsHeap=n(568),r.combinations=n(569),r.combinationsReplacement=n(570),r.addToMean=n(571),r.combineMeans=n(243),r.combineVariances=n(572),r.geometricMean=n(573),r.harmonicMean=n(574),r.mean=r.average=n(28),r.median=n(237),r.medianSorted=n(575),r.subtractFromMean=n(576),r.rootMeanSquare=r.rms=n(577),r.variance=n(231),r.tTest=n(578),r.tTestTwoSample=n(579),r.BayesianClassifier=r.bayesian=n(580),r.PerceptronModel=r.perceptron=n(581),r.epsilon=n(78),r.factorial=n(582),r.bernoulliDistribution=n(583),r.binomialDistribution=n(584),r.poissonDistribution=n(585),r.chiSquaredGoodnessOfFit=n(586),r.zScore=n(588),r.cumulativeStdNormalProbability=n(589),r.standardNormalTable=n(244),r.errorFunction=r.erf=n(590),r.inverseErrorFunction=n(245),r.probit=n(591),r.bisect=n(592)},function(t,e,n){"use strict";var r=n(232);t.exports=function(t){if(0===t.length)throw new Error("mean requires at least one data point");return r(t)/t.length}},function(t,e,n){var r=n(289),i=n(294);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e,n){"use strict";function r(t,e){t&&s.hasOwnProperty(t.type)&&s[t.type](t,e)}function i(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)e.point((r=t[i])[0],r[1],r[2]);e.lineEnd()}function a(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)i(t[n],e,1);e.polygonEnd()}var o={Feature:function(t,e){r(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,a=n.length;++i<a;)r(n[i].geometry,e)}},s={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)e.point((t=n[r])[0],t[1],t[2])},LineString:function(t,e){i(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)i(n[r],e,0)},Polygon:function(t,e){a(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)a(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,a=n.length;++i<a;)r(n[i],e)}};e.a=function(t,e){t&&o.hasOwnProperty(t.type)?o[t.type](t,e):r(t,e)}},function(t,e,n){"use strict";function r(t,e){return Object(s.a)(t[0]-e[0])<s.k&&Object(s.a)(t[1]-e[1])<s.k}function i(t,e){for(var n,r,i,a=-1,o=t.length,s=t[0],u=[];++a<o;){r=((n=t[a])[0]-s[0])/e,i=(n[1]-s[1])/e;for(var l=0;l<e;++l)u.push([s[0]+l*r,s[1]+l*i]);s=n}return u.push(n),u}var a=n(16),o=n(0),s=n(1);e.a=function(t,e){function n(n,r){for(var i=r<0?-1:1,a=e[+(r<0)],o=0,s=a.length-1;o<s&&n>a[o][2][0];++o);var u=t(n-a[o][1][0],r);return u[0]+=t(a[o][1][0],i*r>i*a[o][0][1]?a[o][0][1]:r)[0],u}var u=function(t){var e,n,r,o,u,l=[],c=t[0].length;for(u=0;u<c;++u)n=(e=t[0][u])[0][0],l.push(i([[n+s.k,e[0][1]+s.k],[n+s.k,(r=e[1][1])-s.k],[(o=e[2][0])-s.k,r-s.k],[o-s.k,e[2][1]+s.k]],30));for(u=t[1].length-1;u>=0;--u)n=(e=t[1][u])[0][0],l.push(i([[(o=e[2][0])-s.k,e[2][1]-s.k],[o-s.k,(r=e[1][1])+s.k],[n+s.k,r+s.k],[n+s.k,e[0][1]-s.k]],30));return{type:"Polygon",coordinates:[Object(a.merge)(l)]}}(e),l=(e=e.map(function(t){return t.map(function(t){return[[t[0][0]*s.v,t[0][1]*s.v],[t[1][0]*s.v,t[1][1]*s.v],[t[2][0]*s.v,t[2][1]*s.v]]})})).map(function(e){return e.map(function(e){var n,r=t(e[0][0],e[0][1])[0],i=t(e[2][0],e[2][1])[0],a=t(e[1][0],e[0][1])[1],o=t(e[1][0],e[1][1])[1];return a>o&&(n=a,a=o,o=n),[[r,a],[i,o]]})});t.invert&&(n.invert=function(i,a){for(var o=l[+(a<0)],s=e[+(a<0)],u=0,c=o.length;u<c;++u){var h=o[u];if(h[0][0]<=i&&i<h[1][0]&&h[0][1]<=a&&a<h[1][1]){var f=t.invert(i-t(s[u][1][0],0)[0],a);return f[0]+=s[u][1][0],r(n(f[0],f[1]),[i,a])?f:null}}});var c=Object(o.geoProjection)(n),h=c.stream;return c.stream=function(t){var e=c.rotate(),n=h(t),r=(c.rotate([0,0]),h(t));return c.rotate(e),n.sphere=function(){Object(o.geoStream)(u,r)},n},c}},function(t,e,n){"use strict";e.a=function(){}},function(t,e,n){"use strict";function r(t,e){t&&s.hasOwnProperty(t.type)&&s[t.type](t,e)}function i(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)e.point((r=t[i])[0],r[1],r[2]);e.lineEnd()}function a(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)i(t[n],e,1);e.polygonEnd()}var o={Feature:function(t,e){r(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,a=n.length;++i<a;)r(n[i].geometry,e)}},s={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)e.point((t=n[r])[0],t[1],t[2])},LineString:function(t,e){i(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)i(n[r],e,0)},Polygon:function(t,e){a(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)a(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,a=n.length;++i<a;)r(n[i],e)}};e.a=function(t,e){t&&o.hasOwnProperty(t.type)?o[t.type](t,e):r(t,e)}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){var r=n(18).Symbol;t.exports=r},function(t,e,n){"use strict";function r(){this.reset()}function i(t,e,n){var r=t.s=e+n,i=r-e;t.t=e-(r-i)+(n-i)}e.a=function(){return new r},r.prototype={constructor:r,reset:function(){this.s=this.t=0},add:function(t){i(a,t,this.t),i(this,a.s,this.s),this.s?this.t+=a.t:this.s=a.t},valueOf:function(){return this.s}};var a=new r},function(t,e,n){"use strict";e.a=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}},function(t,e,n){"use strict";var r=n(0),i=n(1);e.a=function(t){var e=0,n=Object(r.geoProjectionMutator)(t),a=n(e);return a.parallel=function(t){return arguments.length?n(e=t*i.v):e*i.j},a}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(536);n.d(e,"path",function(){return r.a})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(608);n.d(e,"cluster",function(){return r.a});var i=n(127);n.d(e,"hierarchy",function(){return i.c});var a=n(620);n.d(e,"pack",function(){return a.a});var o=n(250);n.d(e,"packSiblings",function(){return o.a});var s=n(251);n.d(e,"packEnclose",function(){return s.a});var u=n(622);n.d(e,"partition",function(){return u.a});var l=n(623);n.d(e,"stratify",function(){return l.a});var c=n(624);n.d(e,"tree",function(){return c.a});var h=n(625);n.d(e,"treemap",function(){return h.a});var f=n(626);n.d(e,"treemapBinary",function(){return f.a});var d=n(56);n.d(e,"treemapDice",function(){return d.a});var p=n(79);n.d(e,"treemapSlice",function(){return p.a});var g=n(627);n.d(e,"treemapSliceDice",function(){return g.a});var v=n(129);n.d(e,"treemapSquarify",function(){return v.a});var m=n(628);n.d(e,"treemapResquarify",function(){return m.a})},function(t,e,n){var r=n(61),i=n(85);t.exports=function(t,e,n,a){var o=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var l=e[s],c=a?a(n[l],t[l],l,n,t):void 0;void 0===c&&(c=t[l]),o?i(n,l,c):r(n,l,c)}return n}},function(t,e){t.exports=function(t){return t}},function(t,e,n){"use strict";e.g=function(t){return[Object(r.e)(t[1],t[0]),Object(r.c)(t[2])]},e.a=function(t){var e=t[0],n=t[1],i=Object(r.g)(n);return[i*Object(r.g)(e),i*Object(r.t)(e),Object(r.t)(n)]},e.d=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},e.c=function(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]},e.b=function(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]},e.f=function(t,e){return[t[0]*e,t[1]*e,t[2]*e]},e.e=function(t){var e=Object(r.u)(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e};var r=n(5)},function(t,e,n){"use strict";e.a=function(t){return null===t?NaN:+t}},function(t,e,n){"use strict";e.b=function(t){return function(e,n){var i=Object(r.g)(e),a=Object(r.g)(n),o=t(i*a);return[o*a*Object(r.t)(e),o*Object(r.t)(n)]}},e.a=function(t){return function(e,n){var i=Object(r.u)(e*e+n*n),a=t(i),o=Object(r.t)(a),s=Object(r.g)(a);return[Object(r.e)(e*o,i*s),Object(r.c)(i&&n*o/i)]}};var r=n(5)},function(t,e,n){"use strict";function r(t,e){return[t*Object(a.h)(e),e]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){return[t/Object(a.h)(e),e]},e.a=function(){return Object(i.geoProjection)(r).scale(152.63)}},function(t,e,n){var r=n(190),i=n(4),a=n(430),o=n(75),s=n(478),u=n(12),l=n(3),c=n(502),h=n(15),f=n(9),d=n(11),p=n(52),g=function(t){function e(n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this)),o=a;if(r=r||{},(n=n||{}).isDataSet||(r=n,n=null),i(o,{dataSet:n,loose:!n,dataType:"table",isView:!0,isDataView:!0,origin:[],rows:[],transforms:[],watchingStates:null},r),!o.loose){var s=o.watchingStates;n.on("statechange",function(t){l(s)?s.indexOf(t)>-1&&o._reExecute():o._reExecute()})}return a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._parseStateExpression=function(t){var e=this.dataSet,n=/^\$state\.(\w+)/.exec(t);return n?e.state[n[1]]:t},e.prototype._preparseOptions=function(t){var e=this,n=a(t);return e.loose?n:(u(n,function(t,r){f(t)&&/^\$state\./.test(t)&&(n[r]=e._parseStateExpression(t))}),n)},e.prototype._prepareSource=function(t,n){var r=this,i=e.DataSet;if(r._source={source:t,options:n},n)n=r._preparseOptions(n),r.origin=i.getConnector(n.type)(t,n,r);else if(t instanceof e||f(t))r.origin=i.getConnector("default")(t,r.dataSet);else if(l(t))r.origin=t;else{if(!h(t)||!t.type)throw new TypeError("Invalid source");n=r._preparseOptions(t),r.origin=i.getConnector(n.type)(n,r)}return r.rows=o(r.origin),r},e.prototype.source=function(t,e){return this._prepareSource(t,e),this._reExecuteTransforms(),this.trigger("change"),this},e.prototype.transform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.transforms.push(t),this._executeTransform(t),this},e.prototype._executeTransform=function(t){t=this._preparseOptions(t),e.DataSet.getTransform(t.type)(this,t)},e.prototype._reExecuteTransforms=function(){var t=this;t.transforms.forEach(function(e){t._executeTransform(e)})},e.prototype.addRow=function(t){this.rows.push(t)},e.prototype.removeRow=function(t){this.rows.splice(t,1)},e.prototype.updateRow=function(t,e){i(this.rows[t],e)},e.prototype.findRows=function(t){return this.rows.filter(function(e){return c(e,t)})},e.prototype.findRow=function(t){return s(this.rows,t)},e.prototype.getColumnNames=function(){var t=this.rows[0];return t?d(t):[]},e.prototype.getColumnName=function(t){return this.getColumnNames()[t]},e.prototype.getColumnIndex=function(t){return this.getColumnNames().indexOf(t)},e.prototype.getColumn=function(t){return this.rows.map(function(e){return e[t]})},e.prototype.getColumnData=function(t){return this.getColumn(t)},e.prototype.getSubset=function(t,e,n){for(var r=[],i=t;i<=e;i++)r.push(p(this.rows[i],n));return r},e.prototype.toString=function(t){return t?JSON.stringify(this.rows,null,2):JSON.stringify(this.rows)},e.prototype._reExecute=function(){var t=this._source;this._prepareSource(t.source,t.options),this._reExecuteTransforms(),this.trigger("change")},e}(r);t.exports=g},function(t,e,n){var r=n(480),i=n(487),a=n(42),o=n(3),s=n(494);t.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==typeof t?o(t)?i(t[0],t[1]):r(t):s(t)}},function(t,e,n){var r=n(23),i=n(20);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e,n){var r=n(49);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,n){var r=n(503),i=n(506)(function(t,e){return null==t?{}:r(t,e)});t.exports=i},function(t,e,n){"use strict";function r(){this.reset()}function i(t,e,n){var r=t.s=e+n,i=r-e;t.t=e-(r-i)+(n-i)}e.a=function(){return new r},r.prototype={constructor:r,reset:function(){this.s=this.t=0},add:function(t){i(a,t,this.t),i(this,a.s,this.s),this.s?this.t+=a.t:this.s=a.t},valueOf:function(){return this.s}};var a=new r},function(t,e,n){"use strict";e.g=function(t){return[Object(r.e)(t[1],t[0]),Object(r.c)(t[2])]},e.a=function(t){var e=t[0],n=t[1],i=Object(r.g)(n);return[i*Object(r.g)(e),i*Object(r.t)(e),Object(r.t)(n)]},e.d=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},e.c=function(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]},e.b=function(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]},e.f=function(t,e){return[t[0]*e,t[1]*e,t[2]*e]},e.e=function(t){var e=Object(r.u)(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e};var r=n(6)},function(t,e,n){"use strict";e.b=function(t){return function(e,n){var i=Object(r.g)(e),a=Object(r.g)(n),o=t(i*a);return[o*a*Object(r.t)(e),o*Object(r.t)(n)]}},e.a=function(t){return function(e,n){var i=Object(r.u)(e*e+n*n),a=t(i),o=Object(r.t)(a),s=Object(r.g)(a);return[Object(r.e)(e*o,i*s),Object(r.c)(i&&n*o/i)]}};var r=n(6)},function(t,e,n){"use strict";e.a=function(t,e,n,r,i){for(var a,o=t.children,s=-1,u=o.length,l=t.value&&(r-e)/t.value;++s<u;)(a=o[s]).y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*l}},function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"d",function(){return i}),n.d(e,"e",function(){return a}),n.d(e,"h",function(){return o}),n.d(e,"i",function(){return s}),n.d(e,"k",function(){return u}),n.d(e,"l",function(){return l}),n.d(e,"f",function(){return c}),n.d(e,"j",function(){return h}),n.d(e,"g",function(){return f}),n.d(e,"m",function(){return d}),e.b=function(t){return t>1?0:t<-1?h:Math.acos(t)},e.c=function(t){return t>=1?f:t<=-1?-f:Math.asin(t)};var r=Math.abs,i=Math.atan2,a=Math.cos,o=Math.max,s=Math.min,u=Math.sin,l=Math.sqrt,c=1e-12,h=Math.PI,f=h/2,d=2*h},function(t,e,n){"use strict";e.a=function(t,e){if((i=t.length)>1)for(var n,r,i,a=1,o=t[e[0]],s=o.length;a<i;++a)for(r=o,o=t[e[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}},function(t,e,n){"use strict";e.a=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}},function(t,e,n){"use strict";function r(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function i(t,e){return e[1]-t[1]||e[0]-t[0]}function a(t,e){var n,r,a,g=t.sort(i).pop();for(l=[],s=new Array(t.length),o=new p.b,u=new p.b;;)if(a=f.c,g&&(!a||g[1]<a.y||g[1]===a.y&&g[0]<a.x))g[0]===n&&g[1]===r||(Object(c.a)(g),n=g[0],r=g[1]),g=t.pop();else{if(!a)break;Object(c.b)(a.arc)}if(Object(h.d)(),e){var v=+e[0][0],m=+e[0][1],y=+e[1][0],_=+e[1][1];Object(d.a)(v,m,y,_),Object(h.b)(v,m,y,_)}this.edges=l,this.cells=s,o=u=l=s=null}n.d(e,"f",function(){return g}),n.d(e,"g",function(){return v}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"c",function(){return u}),n.d(e,"e",function(){return l}),e.d=a;var o,s,u,l,c=n(762),h=n(284),f=n(285),d=n(142),p=n(141),g=1e-6,v=1e-12;a.prototype={constructor:a,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Object(h.a)(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,i){if(o=(a=n.halfedges).length)for(var a,o,s,u=n.site,l=-1,c=e[a[o-1]],h=c.left===u?c.right:c.left;++l<o;)s=h,h=(c=e[a[l]]).left===u?c.right:c.left,s&&h&&i<s.index&&i<h.index&&r(u,s,h)<0&&t.push([u.data,s.data,h.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,a=this,o=a._found||0,s=a.cells.length;!(i=a.cells[o]);)if(++o>=s)return null;var u=t-i.site[0],l=e-i.site[1],c=u*u+l*l;do{i=a.cells[r=o],o=null,i.halfedges.forEach(function(n){var r=a.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],l=e-s[1],h=u*u+l*l;h<c&&(c=h,o=s.index)}})}while(null!==o);return a._found=r,null==n||c<=n*n?i.site:null}}},function(t,e,n){var r=n(85),i=n(62),a=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var o=t[e];a.call(t,e)&&i(o,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(t,e){return[t>l.o?t-l.w:t<-l.o?t+l.w:t,e]}function i(t,e,n){return(t%=l.w)?e||n?Object(u.a)(o(t),s(e,n)):o(t):e||n?s(e,n):r}function a(t){return function(e,n){return[(e+=t)>l.o?e-l.w:e<-l.o?e+l.w:e,n]}}function o(t){var e=a(t);return e.invert=a(-t),e}function s(t,e){function n(t,e){var n=Object(l.g)(e),s=Object(l.g)(t)*n,u=Object(l.t)(t)*n,c=Object(l.t)(e),h=c*r+s*i;return[Object(l.e)(u*a-h*o,s*r-c*i),Object(l.c)(h*a+u*o)]}var r=Object(l.g)(t),i=Object(l.t)(t),a=Object(l.g)(e),o=Object(l.t)(e);return n.invert=function(t,e){var n=Object(l.g)(e),s=Object(l.g)(t)*n,u=Object(l.t)(t)*n,c=Object(l.t)(e),h=c*a-u*o;return[Object(l.e)(u*a+c*o,s*r+h*i),Object(l.c)(h*r-s*i)]},n}e.b=i;var u=n(156),l=n(5);r.invert=r,e.a=function(t){function e(e){return(e=t(e[0]*l.r,e[1]*l.r))[0]*=l.h,e[1]*=l.h,e}return t=i(t[0]*l.r,t[1]*l.r,t.length>2?t[2]*l.r:0),e.invert=function(e){return(e=t.invert(e[0]*l.r,e[1]*l.r))[0]*=l.h,e[1]*=l.h,e},e}},function(t,e,n){"use strict";function r(t){return function(e){var n=new i;for(var r in t)n[r]=t[r];return n.stream=e,n}}function i(){}e.b=r,e.a=function(t){return{stream:r(t)}},i.prototype={constructor:i,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},function(t,e,n){"use strict";var r=n(1);e.a=function(t,e,n,i,a,o,s,u){function l(l,c){if(!c)return[t*l/r.s,0];var h=c*c,f=t+h*(e+h*(n+h*i)),d=c*(a-1+h*(o-u+h*s)),p=(f*f+d*d)/(2*d),g=l*Object(r.e)(f/p)/r.s;return[p*Object(r.y)(g),c*(1+h*u)+p*(1-Object(r.h)(g))]}return arguments.length<8&&(u=0),l.invert=function(l,c){var h,f,d=r.s*l/t,p=c,g=50;do{var v=p*p,m=t+v*(e+v*(n+v*i)),y=p*(a-1+v*(o-u+v*s)),_=m*m+y*y,b=2*y,x=_/b,w=x*x,S=Object(r.e)(m/x)/r.s,T=d*S,O=m*m,M=(2*e+v*(4*n+6*v*i))*p,k=a+v*(3*o+5*v*s),C=(2*(m*M+y*(k-1))*b-_*(2*(k-1)))/(b*b),E=Object(r.h)(T),A=Object(r.y)(T),I=x*E,P=x*A,L=d/r.s*(1/Object(r.B)(1-O/w))*(M*x-m*C)/w,D=P-l,j=p*(1+v*u)+x-I-c,R=C*A+I*L,N=I*S,B=1+C-(C*E-P*L),F=P*S,U=R*F-B*N;if(!U)break;d-=h=(j*R-D*B)/U,p-=f=(D*F-j*N)/U}while((Object(r.a)(h)>r.k||Object(r.a)(f)>r.k)&&--g>0);return[d,p]},l}},function(t,e,n){"use strict";function r(t,e){return t&&e&&t[0]===e[0]&&t[1]===e[1]}function i(t){return t.project.invert||t.children&&t.children.some(i)}var a=n(0),o=n(1),s=n(404);e.a=function(t,e,n){function u(t,n){var r,i=e(t,n),a=i.project([t*o.j,n*o.j]);return(r=i.transform)?[r[0]*a[0]+r[1]*a[1]+r[2],-(r[3]*a[0]+r[4]*a[1]+r[5])]:(a[1]=-a[1],a)}function l(t,n){var r=t.project.invert,i=t.transform,a=n;if(i&&(a=[(i=Object(s.b)(i))[0]*a[0]+i[1]*a[1]+i[2],i[3]*a[0]+i[4]*a[1]+i[5]]),r&&t===function(t){return e(t[0]*o.v,t[1]*o.v)}(u=r(a)))return u;for(var u,c=t.children,h=0,f=c&&c.length;h<f;++h)if(u=l(c[h],n))return u}n=null==n?-o.s/6:n,function t(e,n){if(e.edges=function(t){for(var e=t.length,n=[],r=t[e-1],i=0;i<e;++i)n.push([r,r=t[i]]);return n}(e.face),n.face){var i=e.shared=function(t,e){for(var n,r,i=t.length,a=null,o=0;o<i;++o){n=t[o];for(var s=e.length;--s>=0;)if(n[0]===(r=e[s])[0]&&n[1]===r[1]){if(a)return[a,n];a=n}}}(e.face,n.face),a=Object(s.a)(i.map(n.project),i.map(e.project));e.transform=n.transform?Object(s.c)(n.transform,a):a;for(var o=n.edges,u=0,l=o.length;u<l;++u)r(i[0],o[u][1])&&r(i[1],o[u][0])&&(o[u]=e),r(i[0],o[u][0])&&r(i[1],o[u][1])&&(o[u]=e);for(u=0,l=(o=e.edges).length;u<l;++u)r(i[0],o[u][0])&&r(i[1],o[u][1])&&(o[u]=n),r(i[0],o[u][1])&&r(i[1],o[u][0])&&(o[u]=n)}else e.transform=n.transform;return e.children&&e.children.forEach(function(n){t(n,e)}),e}(t,{transform:[Object(o.h)(n),Object(o.y)(n),0,-Object(o.y)(n),Object(o.h)(n),0]}),i(t)&&(u.invert=function(e,n){var r=l(t,[e,-n]);return r&&(r[0]*=o.v,r[1]*=o.v,r)});var c=Object(a.geoProjection)(u),h=c.stream;return c.stream=function(e){var n=c.rotate(),r=h(e),i=(c.rotate([0,0]),h(e));return c.rotate(n),r.sphere=function(){i.polygonStart(),i.lineStart(),function t(e,n,r){var i,s,u=n.edges,l=u.length,c={type:"MultiPoint",coordinates:n.face},h=n.face.filter(function(t){return 90!==Object(o.a)(t[1])}),f=Object(a.geoBounds)({type:"MultiPoint",coordinates:h}),d=!1,p=-1,g=f[1][0]-f[0][0],v=180===g||360===g?[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2]:Object(a.geoCentroid)(c);if(r)for(;++p<l&&u[p]!==r;);++p;for(var m=0;m<l;++m)s=u[(m+p)%l],Array.isArray(s)?(d||(e.point((i=Object(a.geoInterpolate)(s[0],v)(o.k))[0],i[1]),d=!0),e.point((i=Object(a.geoInterpolate)(s[1],v)(o.k))[0],i[1])):(d=!1,s!==r&&t(e,s,n))}(i,t),i.lineEnd(),i.polygonEnd()},r},c}},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(431),a=n(432),o=n(433),s=n(434),u=n(435);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=o,r.prototype.has=s,r.prototype.set=u,t.exports=r},function(t,e,n){var r=n(62);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e,n){var r=n(29)(Object,"create");t.exports=r},function(t,e,n){var r=n(449);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},function(t,e,n){var r=n(191);t.exports=function(t){return r(t,5)}},function(t,e,n){var r=n(3),i=n(113),a=n(489),o=n(208);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:a(o(t))}},function(t,e,n){var r=n(107),i=n(508);t.exports=function t(e,n,a,o,s){var u=-1,l=e.length;for(a||(a=i),s||(s=[]);++u<l;){var c=e[u];n>0&&a(c)?n>1?t(c,n-1,a,o,s):r(s,c):o||(s[s.length]=c)}return s}},function(t,e,n){"use strict";t.exports=1e-4},function(t,e,n){"use strict";e.a=function(t,e,n,r,i){for(var a,o=t.children,s=-1,u=o.length,l=t.value&&(i-n)/t.value;++s<u;)(a=o[s]).x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*l}},function(t,e,n){"use strict";var r=n(8);t.exports={longestPath:function(t){var e={};r.forEach(t.sources(),function n(i){var a=t.node(i);if(r.has(e,i))return a.rank;e[i]=!0;var o=r.minBy(r.map(t.outEdges(i),function(e){return n(e.w)-t.edge(e).minlen}));return o!==Number.POSITIVE_INFINITY&&void 0!==o&&null!==o||(o=0),a.rank=o})},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},function(t,e,n){"use strict";function r(t){this._context=t}r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},e.a=function(t){return new r(t)}},function(t,e,n){"use strict";e.a=function(){}},function(t,e,n){"use strict";function r(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function i(t){this._context=t}e.b=r,e.a=i,i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:r(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:r(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}}},function(t,e,n){"use strict";function r(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function i(t,e){this._context=t,this._k=(1-e)/6}e.b=r,e.a=i,i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:r(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:r(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return new i(t,e)}return n.tension=function(e){return t(+e)},n}(0)},function(t,e,n){var r=n(144);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(42),i=n(148),a=n(149);t.exports=function(t,e){return a(i(t,e,r),t+"")}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,n){var r=n(301),i=n(20),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&o.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e,n){(function(t){var r=n(18),i=n(302),a="object"==typeof e&&e&&!e.nodeType&&e,o=a&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===a?r.Buffer:void 0;t.exports=(s?s.isBuffer:void 0)||i}).call(e,n(65)(t))},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){"use strict";function r(t,e,n,r){function h(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function f(i,a,o,s){var u=0,l=0;if(null==i||(u=d(i,o))!==(l=d(a,o))||g(i,a)<0^o>0)do{s.point(0===u||3===u?t:n,u>1?r:e)}while((u=(u+o+4)%4)!==l);else s.point(a[0],a[1])}function d(r,a){return Object(i.a)(r[0]-t)<i.i?a>0?0:3:Object(i.a)(r[0]-n)<i.i?a>0?2:1:Object(i.a)(r[1]-e)<i.i?a>0?1:0:a>0?3:2}function p(t,e){return g(t.x,e.x)}function g(t,e){var n=d(t,1),r=d(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(i){function d(t,e){h(t,e)&&k.point(t,e)}function g(i,a){var s=h(i,a);if(m&&y.push([i,a]),O)_=i,b=a,x=s,O=!1,s&&(k.lineStart(),k.point(i,a));else if(s&&T)k.point(i,a);else{var u=[w=Math.max(c,Math.min(l,w)),S=Math.max(c,Math.min(l,S))],f=[i=Math.max(c,Math.min(l,i)),a=Math.max(c,Math.min(l,a))];Object(o.a)(u,f,t,e,n,r)?(T||(k.lineStart(),k.point(u[0],u[1])),k.point(f[0],f[1]),s||k.lineEnd(),M=!1):s&&(k.lineStart(),k.point(i,a),M=!1)}w=i,S=a,T=s}var v,m,y,_,b,x,w,S,T,O,M,k=i,C=Object(a.a)(),E={point:d,lineStart:function(){E.point=g,m&&m.push(y=[]),O=!0,T=!1,w=S=NaN},lineEnd:function(){v&&(g(_,b),x&&T&&C.rejoin(),v.push(C.result())),E.point=d,T&&k.lineEnd()},polygonStart:function(){k=C,v=[],m=[],M=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=m.length;n<i;++n)for(var a,o,s=m[n],u=1,l=s.length,c=s[0],h=c[0],f=c[1];u<l;++u)a=h,o=f,h=(c=s[u])[0],f=c[1],o<=r?f>r&&(h-a)*(r-o)>(f-o)*(t-a)&&++e:f<=r&&(h-a)*(r-o)<(f-o)*(t-a)&&--e;return e}(),n=M&&e,a=(v=Object(u.merge)(v)).length;(n||a)&&(i.polygonStart(),n&&(i.lineStart(),f(null,null,1,i),i.lineEnd()),a&&Object(s.a)(v,p,e,f,i),i.polygonEnd()),k=i,v=m=y=null}};return E}}e.a=r;var i=n(5),a=n(157),o=n(310),s=n(158),u=n(16),l=1e9,c=-l;e.b=function(){var t,e,n,i=0,a=0,o=960,s=500;return n={stream:function(n){return t&&e===n?t:t=r(i,a,o,s)(e=n)},extent:function(r){return arguments.length?(i=+r[0][0],a=+r[0][1],o=+r[1][0],s=+r[1][1],t=e=null,n):[[i,a],[o,s]]}}}},function(t,e,n){"use strict";var r=n(44);e.a=function(t,e,n){if(null==n&&(n=r.a),i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,a=(i-1)*e,o=Math.floor(a),s=+n(t[o],o,t);return s+(+n(t[o+1],o+1,t)-s)*(a-o)}}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";function r(t,e){function n(t,e){var n=Object(i.u)(s-2*a*Object(i.t)(e))/a;return[n*Object(i.t)(t*=a),u-n*Object(i.g)(t)]}var r=Object(i.t)(t),a=(r+Object(i.t)(e))/2;if(Object(i.a)(a)<i.i)return Object(o.a)(t);var s=1+r*(2*a-r),u=Object(i.u)(s)/a;return n.invert=function(t,e){var n=u-e;return[Object(i.e)(t,Object(i.a)(n))/a*Object(i.s)(n),Object(i.c)((s-(t*t+n*n)*a*a)/(2*a))]},n}e.a=r;var i=n(5),a=n(95),o=n(339);e.b=function(){return Object(a.a)(r).scale(155.424).center([0,33.6442])}},function(t,e,n){"use strict";e.a=function(t){var e=0,n=r.o/3,a=Object(i.b)(t),o=a(e,n);return o.parallels=function(t){return arguments.length?a(e=t[0]*r.r,n=t[1]*r.r):[e*r.h,n*r.h]},o};var r=n(5),i=n(21)},function(t,e,n){"use strict";function r(t,e,n){var r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],s=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=s&&t.clipExtent(null),Object(i.a)(n,t.stream(a.a));var u=a.a.result(),l=Math.min(r/(u[1][0]-u[0][0]),o/(u[1][1]-u[0][1])),c=+e[0][0]+(r-l*(u[1][0]+u[0][0]))/2,h=+e[0][1]+(o-l*(u[1][1]+u[0][1]))/2;return null!=s&&t.clipExtent(s),t.scale(150*l).translate([c,h])}e.a=r,e.b=function(t,e,n){return r(t,[[0,0],e],n)};var i=n(30),a=n(175)},function(t,e,n){"use strict";function r(t,e){return[t,Object(a.n)(Object(a.v)((a.l+e)/2))]}function i(t){function e(){var e=a.o*h(),s=l(Object(o.a)(l.rotate()).invert([0,0]));return d(null==p?[[s[0]-e,s[1]-e],[s[0]+e,s[1]+e]]:t===r?[[Math.max(s[0]-e,p),n],[Math.min(s[0]+e,i),u]]:[[p,Math.max(s[1]-e,n)],[i,Math.min(s[1]+e,u)]])}var n,i,u,l=Object(s.a)(t),c=l.center,h=l.scale,f=l.translate,d=l.clipExtent,p=null;return l.scale=function(t){return arguments.length?(h(t),e()):h()},l.translate=function(t){return arguments.length?(f(t),e()):f()},l.center=function(t){return arguments.length?(c(t),e()):c()},l.clipExtent=function(t){return arguments.length?(null==t?p=n=i=u=null:(p=+t[0][0],n=+t[0][1],i=+t[1][0],u=+t[1][1]),e()):null==p?null:[[p,n],[i,u]]},e()}e.c=r,e.b=i;var a=n(5),o=n(66),s=n(21);r.invert=function(t,e){return[t,2*Object(a.d)(Object(a.k)(e))-a.l]},e.a=function(){return i(r).scale(961/a.w)}},function(t,e,n){"use strict";function r(t,e){var n=Object(a.B)(1-Object(a.y)(e));return[2/a.E*t*n,a.E*(1-n)]}e.a=r;var i=n(0),a=n(1);r.invert=function(t,e){var n=(n=e/a.E-1)*n;return[n>0?t*Object(a.B)(a.s/n)/2:0,Object(a.e)(1-n)]},e.b=function(){return Object(i.geoProjection)(r).scale(95.6464).center([0,30])}},function(t,e,n){"use strict";function r(t,e){return e>-s?((t=Object(a.d)(t,e))[1]+=u,t):Object(o.b)(t,e)}n.d(e,"b",function(){return s}),n.d(e,"d",function(){return u}),e.c=r;var i=n(0),a=n(26),o=n(46),s=.7109889596207567,u=.0528035274542;r.invert=function(t,e){return e>-s?a.d.invert(t,e-u):o.b.invert(t,e)},e.a=function(){return Object(i.geoProjection)(r).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}},function(t,e,n){"use strict";var r=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]];e.a=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(t){return t.map(function(t){return r[t]})})},function(t,e,n){"use strict";var r=n(0),i=n(1);e.a=function(t){function e(e,r){var a=Object(i.a)(e)<i.o,o=t(a?e:e>0?e-i.s:e+i.s,r),s=(o[0]-o[1])*i.C,u=(o[0]+o[1])*i.C;if(a)return[s,u];var l=n*i.C,c=s>0^u>0?-1:1;return[c*s-Object(i.x)(u)*l,c*u-Object(i.x)(s)*l]}var n=t(i.o,0)[0]-t(-i.o,0)[0];return t.invert&&(e.invert=function(e,r){var a=(e+r)*i.C,o=(r-e)*i.C,s=Object(i.a)(a)<.5*n&&Object(i.a)(o)<.5*n;if(!s){var u=n*i.C,l=a>0^o>0?-1:1,c=-l*e+(o>0?1:-1)*u,h=-l*r+(a>0?1:-1)*u;a=(-c-h)*i.C,o=(c-h)*i.C}var f=t.invert(a,o);return s||(f[0]+=a>0?i.s:-i.s),f}),Object(r.geoProjection)(e).rotate([-90,-90,45]).clipAngle(179.999)}},function(t,e,n){function r(t){var e=this.__data__=new i(t);this.size=e.size}var i=n(70),a=n(436),o=n(437),s=n(438),u=n(439),l=n(440);r.prototype.clear=a,r.prototype.delete=o,r.prototype.get=s,r.prototype.has=u,r.prototype.set=l,t.exports=r},function(t,e,n){var r=n(29)(n(18),"Map");t.exports=r},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(441),a=n(448),o=n(450),s=n(451),u=n(452);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=o,r.prototype.has=s,r.prototype.set=u,t.exports=r},function(t,e,n){var r=n(151),i=n(455),a=n(24);t.exports=function(t){return a(t)?r(t,!0):i(t)}},function(t,e,n){var r=n(460),i=n(193),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(t){return null==t?[]:(t=Object(t),r(o(t),function(e){return a.call(t,e)}))}:i;t.exports=s},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e,n){var r=n(153)(Object.getPrototypeOf,Object);t.exports=r},function(t,e,n){var r=n(199);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}var i=n(104),a=n(482),o=n(483);r.prototype.add=r.prototype.push=a,r.prototype.has=o,t.exports=r},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(76),i=n(51);t.exports=function(t,e){for(var n=0,a=(e=r(e,t)).length;null!=t&&n<a;)t=t[i(e[n++])];return n&&n==a?t:void 0}},function(t,e,n){var r=n(3),i=n(49),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||o.test(t)||!a.test(t)||null!=e&&t in Object(e)}},function(t,e,n){"use strict";function r(t,e){return[t>l.o?t-l.w:t<-l.o?t+l.w:t,e]}function i(t,e,n){return(t%=l.w)?e||n?Object(u.a)(o(t),s(e,n)):o(t):e||n?s(e,n):r}function a(t){return function(e,n){return[(e+=t)>l.o?e-l.w:e<-l.o?e+l.w:e,n]}}function o(t){var e=a(t);return e.invert=a(-t),e}function s(t,e){function n(t,e){var n=Object(l.g)(e),s=Object(l.g)(t)*n,u=Object(l.t)(t)*n,c=Object(l.t)(e),h=c*r+s*i;return[Object(l.e)(u*a-h*o,s*r-c*i),Object(l.c)(h*a+u*o)]}var r=Object(l.g)(t),i=Object(l.t)(t),a=Object(l.g)(e),o=Object(l.t)(e);return n.invert=function(t,e){var n=Object(l.g)(e),s=Object(l.g)(t)*n,u=Object(l.t)(t)*n,c=Object(l.t)(e),h=c*a-u*o;return[Object(l.e)(u*a+c*o,s*r+h*i),Object(l.c)(h*r-s*i)]},n}e.b=i;var u=n(217),l=n(6);r.invert=r,e.a=function(t){function e(e){return(e=t(e[0]*l.r,e[1]*l.r))[0]*=l.h,e[1]*=l.h,e}return t=i(t[0]*l.r,t[1]*l.r,t.length>2?t[2]*l.r:0),e.invert=function(e){return(e=t.invert(e[0]*l.r,e[1]*l.r))[0]*=l.h,e[1]*=l.h,e},e}},function(t,e,n){"use strict";function r(t,e){function n(t,e){var n=Object(i.u)(o-2*a*Object(i.t)(e))/a;return[n*Object(i.t)(t*=a),s-n*Object(i.g)(t)]}var r=Object(i.t)(t),a=(r+Object(i.t)(e))/2,o=1+r*(2*a-r),s=Object(i.u)(o)/a;return n.invert=function(t,e){var n=s-e;return[Object(i.e)(t,n)/a,Object(i.c)((o-(t*t+n*n)*a*a)/(2*a))]},n}e.a=r;var i=n(6),a=n(116);e.b=function(){return Object(a.a)(r).scale(155.424).center([0,33.6442])}},function(t,e,n){"use strict";e.a=function(t){var e=0,n=r.o/3,a=Object(i.b)(t),o=a(e,n);return o.parallels=function(t){return arguments.length?a(e=t[0]*r.r,n=t[1]*r.r):[e*r.h,n*r.h]},o};var r=n(6),i=n(22)},function(t,e,n){"use strict";function r(t){function e(){}var n=e.prototype=Object.create(i.prototype);for(var r in t)n[r]=t[r];return function(t){var n=new e;return n.stream=t,n}}function i(){}e.b=r,e.a=function(t){return{stream:r(t)}},i.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}}},function(t,e,n){"use strict";function r(t,e){return[t,Object(o.n)(Object(o.v)((o.l+e)/2))]}function i(t){var e,n=Object(a.a)(t),r=n.scale,i=n.translate,s=n.clipExtent;return n.scale=function(t){return arguments.length?(r(t),e&&n.clipExtent(null),n):r()},n.translate=function(t){return arguments.length?(i(t),e&&n.clipExtent(null),n):i()},n.clipExtent=function(t){if(!arguments.length)return e?null:s();if(e=null==t){var a=o.o*r(),u=i();t=[[u[0]-a,u[1]-a],[u[0]+a,u[1]+a]]}return s(t),n},n.clipExtent(null)}e.c=r,e.b=i;var a=n(22),o=n(6);r.invert=function(t,e){return[t,2*Object(o.d)(Object(o.k)(e))-o.l]},e.a=function(){return i(r).scale(961/o.w)}},function(t,e,n){var r=n(539),i=n(11);t.exports=function(t){return null==t?[]:r(t,i(t))}},function(t,e,n){var r=n(544),i=n(545)(r);t.exports=i},function(t,e,n){"use strict";var r=n(28);t.exports=function(t,e){var n,i,a=r(t),o=0;if(2===e)for(i=0;i<t.length;i++)o+=(n=t[i]-a)*n;else for(i=0;i<t.length;i++)o+=Math.pow(t[i]-a,e);return o}},function(t,e,n){"use strict";function r(t,e,n,r){e%1==0?s(t,e,n,r):(e=Math.floor(e),s(t,e,n,r),s(t,e+1,e+1,r))}function i(t,e){return t-e}function a(t,e){var n=t*e;return 1===e?t-1:0===e?0:n%1!=0?Math.ceil(n)-1:t%2==0?n-.5:n}var o=n(123),s=n(557);t.exports=function(t,e){var n=t.slice();if(Array.isArray(e)){!function(t,e){for(var n=[0],o=0;o<e.length;o++)n.push(a(t.length,e[o]));n.push(t.length-1),n.sort(i);for(var s=[0,n.length-1];s.length;){var u=Math.ceil(s.pop()),l=Math.floor(s.pop());if(!(u-l<=1)){var c=Math.floor((l+u)/2);r(t,n[c],n[l],n[u]),s.push(l,c,c,u)}}}(n,e);for(var s=[],u=0;u<e.length;u++)s[u]=o(n,e[u]);return s}return r(n,a(n.length,e),0,n.length-1),o(n,e)}},function(t,e,n){"use strict";t.exports=function(t,e){var n=t.length*e;if(0===t.length)throw new Error("quantile requires at least one data point.");if(e<0||e>1)throw new Error("quantiles must be between 0 and 1");return 1===e?t[t.length-1]:0===e?t[0]:n%1!=0?t[Math.ceil(n)-1]:t.length%2==0?(t[n-1]+t[n])/2:t[n]}},function(t,e,n){"use strict";var r=n(121);t.exports=function(t){if(t.length<2)throw new Error("sampleVariance requires at least two data points");return r(t,2)/(t.length-1)}},function(t,e){t.exports={HIERARCHY:"hierarchy",GEO:"geo",HEX:"hex",GRAPH:"graph",TABLE:"table",GEO_GRATICULE:"geo-graticule",STATISTICS_METHODS:["max","mean","median","min","mode","product","standardDeviation","sum","sumSimple","variance"]}},function(t,e,n){"use strict";function r(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}var i={},a={},o=34,s=10,u=13;e.a=function(t){function e(t,e){function n(){if(p)return a;if(g)return g=!1,i;var e,n,r=f;if(t.charCodeAt(r)===o){for(;f++<c&&t.charCodeAt(f)!==o||t.charCodeAt(++f)===o;);return(e=f)>=c?p=!0:(n=t.charCodeAt(f++))===s?g=!0:n===u&&(g=!0,t.charCodeAt(f)===s&&++f),t.slice(r+1,e-1).replace(/""/g,'"')}for(;f<c;){if((n=t.charCodeAt(e=f++))===s)g=!0;else if(n===u)g=!0,t.charCodeAt(f)===s&&++f;else if(n!==h)continue;return t.slice(r,e)}return p=!0,t.slice(r,c)}var r,l=[],c=t.length,f=0,d=0,p=c<=0,g=!1;for(t.charCodeAt(c-1)===s&&--c,t.charCodeAt(c-1)===u&&--c;(r=n())!==a;){for(var v=[];r!==i&&r!==a;)v.push(r),r=n();e&&null==(v=e(v,d++))||l.push(v)}return l}function n(e){return e.map(l).join(t)}function l(t){return null==t?"":c.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}var c=new RegExp('["'+t+"\n\r]"),h=t.charCodeAt(0);return{parse:function(t,n){var i,a,o=e(t,function(t,e){if(i)return i(t,e-1);a=t,i=n?function(t,e){var n=r(t);return function(r,i){return e(n(r),i,t)}}(t,n):r(t)});return o.columns=a||[],o},parseRows:e,format:function(e,n){return null==n&&(n=function(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}(e)),[n.map(l).join(t)].concat(e.map(function(e){return n.map(function(t){return l(e[t])}).join(t)})).join("\n")},formatRows:function(t){return t.map(n).join("\n")}}}},function(t,e,n){"use strict";function r(t,e){var n,r,a,u,l,c=new s(t),h=+t.value&&(c.value=t.value),f=[c];for(null==e&&(e=i);n=f.pop();)if(h&&(n.value=+n.data.value),(a=e(n.data))&&(l=a.length))for(n.children=new Array(l),u=l-1;u>=0;--u)f.push(r=n.children[u]=new s(a[u])),r.parent=n,r.depth=n.depth+1;return c.eachBefore(o)}function i(t){return t.children}function a(t){t.data=t.data.data}function o(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function s(t){this.data=t,this.depth=this.height=0,this.parent=null}e.c=r,e.b=o,e.a=s;var u=n(609),l=n(610),c=n(611),h=n(612),f=n(613),d=n(614),p=n(615),g=n(616),v=n(617),m=n(618),y=n(619);s.prototype=r.prototype={constructor:s,count:u.a,each:l.a,eachAfter:h.a,eachBefore:c.a,sum:f.a,sort:d.a,path:p.a,ancestors:g.a,descendants:v.a,leaves:m.a,links:y.a,copy:function(){return r(this).eachBefore(a)}}},function(t,e,n){"use strict";function r(t){if("function"!=typeof t)throw new Error;return t}e.a=function(t){return null==t?null:r(t)},e.b=r},function(t,e,n){"use strict";function r(t,e,n,r,o,s){for(var u,l,c,h,f,d,p,g,v,m,y,_=[],b=e.children,x=0,w=0,S=b.length,T=e.value;x<S;){c=o-n,h=s-r;do{f=b[w++].value}while(!f&&w<S);for(d=p=f,y=f*f*(m=Math.max(h/c,c/h)/(T*t)),v=Math.max(p/y,y/d);w<S;++w){if(f+=l=b[w].value,l<d&&(d=l),l>p&&(p=l),y=f*f*m,(g=Math.max(p/y,y/d))>v){f-=l;break}v=g}_.push(u={value:f,dice:c<h,children:b.slice(x,w)}),u.dice?Object(i.a)(u,n,r,o,T?r+=h*f/T:s):Object(a.a)(u,n,r,T?n+=c*f/T:o,s),T-=f,x=w}return _}n.d(e,"b",function(){return o}),e.c=r;var i=n(56),a=n(79),o=(1+Math.sqrt(5))/2;e.a=function t(e){function n(t,n,i,a,o){r(e,t,n,i,a,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(o)},function(t,e,n){"use strict";var r=n(255);e.a=function(t){if(null==t)return r.a;var e,n,i=t.scale[0],a=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,r){r||(e=n=0);var u=2,l=t.length,c=new Array(l);for(c[0]=(e+=t[0])*i+o,c[1]=(n+=t[1])*a+s;u<l;)c[u]=t[u],++u;return c}}},function(t,e,n){"use strict";function r(t,e){var n=e.id,r=e.bbox,a=null==e.properties?{}:e.properties,o=i(t,e);return null==n&&null==r?{type:"Feature",properties:a,geometry:o}:null==r?{type:"Feature",id:n,properties:a,geometry:o}:{type:"Feature",id:n,bbox:r,properties:a,geometry:o}}function i(t,e){function n(t,e){e.length&&e.pop();for(var n=c[t<0?~t:t],r=0,i=n.length;r<i;++r)e.push(l(n[r],r));t<0&&Object(a.a)(e,i)}function r(t){return l(t)}function i(t){for(var e=[],r=0,i=t.length;r<i;++r)n(t[r],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=i(t);e.length<4;)e.push(e[0]);return e}function u(t){return t.map(s)}var l=Object(o.a)(t.transform),c=t.arcs;return function t(e){var n,a=e.type;switch(a){case"GeometryCollection":return{type:a,geometries:e.geometries.map(t)};case"Point":n=r(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(r);break;case"LineString":n=i(e.arcs);break;case"MultiLineString":n=e.arcs.map(i);break;case"Polygon":n=u(e.arcs);break;case"MultiPolygon":n=e.arcs.map(u);break;default:return null}return{type:a,coordinates:n}}(e)}e.b=i;var a=n(631),o=n(130);e.a=function(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return r(t,e)})}:r(t,e)}},function(t,e,n){var r=n(23),i=n(20);t.exports=function(t){return"number"==typeof t||i(t)&&"[object Number]"==r(t)}},function(t,e){t.exports=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t[1],r=[],i=t[0];i<n;)r.push(i),i+=e;return r.push(n),r}},function(t,e,n){var r=n(27).standardDeviation;t.exports={silverman:function(t){var e=r(t),n=4*Math.pow(e,5);return Math.pow(n/(3*t.length),.2)}}},function(t,e,n){"use strict";function r(t){this._isDirected=!u.has(t,"directed")||t.directed,this._isMultigraph=!!u.has(t,"multigraph")&&t.multigraph,this._isCompound=!!u.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=u.constant(void 0),this._defaultEdgeLabelFn=u.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[c]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function i(t,e){t[e]?t[e]++:t[e]=1}function a(t,e){--t[e]||delete t[e]}function o(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var o=i;i=a,a=o}return i+h+a+h+(u.isUndefined(r)?l:r)}function s(t,e){return o(t,e.v,e.w,e.name)}var u=n(14);t.exports=r;var l="\0",c="\0",h="\x01";r.prototype._nodeCount=0,r.prototype._edgeCount=0,r.prototype.isDirected=function(){return this._isDirected},r.prototype.isMultigraph=function(){return this._isMultigraph},r.prototype.isCompound=function(){return this._isCompound},r.prototype.setGraph=function(t){return this._label=t,this},r.prototype.graph=function(){return this._label},r.prototype.setDefaultNodeLabel=function(t){return u.isFunction(t)||(t=u.constant(t)),this._defaultNodeLabelFn=t,this},r.prototype.nodeCount=function(){return this._nodeCount},r.prototype.nodes=function(){return u.keys(this._nodes)},r.prototype.sources=function(){var t=this;return u.filter(this.nodes(),function(e){return u.isEmpty(t._in[e])})},r.prototype.sinks=function(){var t=this;return u.filter(this.nodes(),function(e){return u.isEmpty(t._out[e])})},r.prototype.setNodes=function(t,e){var n=arguments,r=this;return u.each(t,function(t){n.length>1?r.setNode(t,e):r.setNode(t)}),this},r.prototype.setNode=function(t,e){return u.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]=c,this._children[t]={},this._children[c][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},r.prototype.node=function(t){return this._nodes[t]},r.prototype.hasNode=function(t){return u.has(this._nodes,t)},r.prototype.removeNode=function(t){var e=this;if(u.has(this._nodes,t)){var n=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],u.each(this.children(t),function(t){e.setParent(t)}),delete this._children[t]),u.each(u.keys(this._in[t]),n),delete this._in[t],delete this._preds[t],u.each(u.keys(this._out[t]),n),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},r.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(u.isUndefined(e))e=c;else{for(var n=e+="";!u.isUndefined(n);n=this.parent(n))if(n===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},r.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},r.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if(e!==c)return e}},r.prototype.children=function(t){if(u.isUndefined(t)&&(t=c),this._isCompound){var e=this._children[t];if(e)return u.keys(e)}else{if(t===c)return this.nodes();if(this.hasNode(t))return[]}},r.prototype.predecessors=function(t){var e=this._preds[t];if(e)return u.keys(e)},r.prototype.successors=function(t){var e=this._sucs[t];if(e)return u.keys(e)},r.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return u.union(e,this.successors(t))},r.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},r.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var n=this;u.each(this._nodes,function(n,r){t(r)&&e.setNode(r,n)}),u.each(this._edgeObjs,function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,n.edge(t))});var r={};return this._isCompound&&u.each(e.nodes(),function(t){e.setParent(t,function t(i){var a=n.parent(i);return void 0===a||e.hasNode(a)?(r[i]=a,a):a in r?r[a]:t(a)}(t))}),e},r.prototype.setDefaultEdgeLabel=function(t){return u.isFunction(t)||(t=u.constant(t)),this._defaultEdgeLabelFn=t,this},r.prototype.edgeCount=function(){return this._edgeCount},r.prototype.edges=function(){return u.values(this._edgeObjs)},r.prototype.setPath=function(t,e){var n=this,r=arguments;return u.reduce(t,function(t,i){return r.length>1?n.setEdge(t,i,e):n.setEdge(t,i),i}),this},r.prototype.setEdge=function(){var t,e,n,r,a=!1,s=arguments[0];"object"==typeof s&&null!==s&&"v"in s?(t=s.v,e=s.w,n=s.name,2===arguments.length&&(r=arguments[1],a=!0)):(t=s,e=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],a=!0)),t=""+t,e=""+e,u.isUndefined(n)||(n=""+n);var l=o(this._isDirected,t,e,n);if(u.has(this._edgeLabels,l))return a&&(this._edgeLabels[l]=r),this;if(!u.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[l]=a?r:this._defaultEdgeLabelFn(t,e,n);var c=function(t,e,n,r){var i=""+e,a=""+n;if(!t&&i>a){var o=i;i=a,a=o}var s={v:i,w:a};return r&&(s.name=r),s}(this._isDirected,t,e,n);return t=c.v,e=c.w,Object.freeze(c),this._edgeObjs[l]=c,i(this._preds[e],t),i(this._sucs[t],e),this._in[e][l]=c,this._out[t][l]=c,this._edgeCount++,this},r.prototype.edge=function(t,e,n){var r=1===arguments.length?s(this._isDirected,arguments[0]):o(this._isDirected,t,e,n);return this._edgeLabels[r]},r.prototype.hasEdge=function(t,e,n){var r=1===arguments.length?s(this._isDirected,arguments[0]):o(this._isDirected,t,e,n);return u.has(this._edgeLabels,r)},r.prototype.removeEdge=function(t,e,n){var r=1===arguments.length?s(this._isDirected,arguments[0]):o(this._isDirected,t,e,n),i=this._edgeObjs[r];return i&&(t=i.v,e=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],a(this._preds[e],t),a(this._sucs[t],e),delete this._in[e][r],delete this._out[t][r],this._edgeCount--),this},r.prototype.inEdges=function(t,e){var n=this._in[t];if(n){var r=u.values(n);return e?u.filter(r,function(t){return t.v===e}):r}},r.prototype.outEdges=function(t,e){var n=this._out[t];if(n){var r=u.values(n);return e?u.filter(r,function(t){return t.w===e}):r}},r.prototype.nodeEdges=function(t,e){var n=this.inEdges(t,e);if(n)return n.concat(this.outEdges(t,e))}},function(t,e,n){"use strict";function r(){}function i(t,e){var n=new r;if(t instanceof r)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var i,a=-1,o=t.length;if(null==e)for(;++a<o;)n.set(a,t[a]);else for(;++a<o;)n.set(e(i=t[a],a,t),i)}else if(t)for(var s in t)n.set(s,t[s]);return n}n.d(e,"b",function(){return a});var a="$";r.prototype=i.prototype={constructor:r,has:function(t){return a+t in this},get:function(t){return this[a+t]},set:function(t,e){return this[a+t]=e,this},remove:function(t){var e=a+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===a&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===a&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===a&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===a&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===a&&++t;return t},empty:function(){for(var t in this)if(t[0]===a)return!1;return!0},each:function(t){for(var e in this)e[0]===a&&t(this[e],e.slice(1),this)}},e.a=i},function(t,e,n){"use strict";var r=n(39),i=n(34),a=n(81),o=n(138);e.a=function(){function t(t){var i,a,o,h=t.length,f=!1;for(null==u&&(c=l(o=Object(r.path)())),i=0;i<=h;++i)!(i<h&&s(a=t[i],i,t))===f&&((f=!f)?c.lineStart():c.lineEnd()),f&&c.point(+e(a,i,t),+n(a,i,t));if(o)return c=null,o+""||null}var e=o.a,n=o.b,s=Object(i.a)(!0),u=null,l=a.a,c=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:Object(i.a)(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Object(i.a)(+e),t):n},t.defined=function(e){return arguments.length?(s="function"==typeof e?e:Object(i.a)(!!e),t):s},t.curve=function(e){return arguments.length?(l=e,null!=u&&(c=l(u)),t):l},t.context=function(e){return arguments.length?(null==e?u=c=null:c=l(u=e),t):u},t}},function(t,e,n){"use strict";e.a=function(t){return t[0]},e.b=function(t){return t[1]}},function(t,e,n){"use strict";function r(t,e,n){var r=t._x1,i=t._y1,o=t._x2,s=t._y2;if(t._l01_a>a.f){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>a.f){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/h,s=(s*c+t._y1*t._l23_2a-n*t._l12_2a)/h}t._context.bezierCurveTo(r,i,o,s,t._x2,t._y2)}function i(t,e){this._context=t,this._alpha=e}e.a=r;var a=n(57),o=n(84);i.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:r(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return e?new i(t,e):new o.a(t,0)}return n.alpha=function(e){return t(+e)},n}(.5)},function(t,e,n){"use strict";function r(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}e.b=r;var i=n(59);e.a=function(t){var e=t.map(r);return Object(i.a)(t).sort(function(t,n){return e[t]-e[n]})}},function(t,e,n){"use strict";function r(){this._=null}function i(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function a(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function o(t){for(;t.L;)t=t.L;return t}e.a=function(t){t.U=t.C=t.L=t.R=t.P=t.N=null},r.prototype={constructor:r,insert:function(t,e){var n,r,s;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=o(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(s=r.R)&&s.C?(n.C=s.C=!1,r.C=!0,t=r):(t===n.R&&(i(this,n),n=(t=n).U),n.C=!1,r.C=!0,a(this,r)):(s=r.L)&&s.C?(n.C=s.C=!1,r.C=!0,t=r):(t===n.L&&(a(this,n),n=(t=n).U),n.C=!1,r.C=!0,i(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,s=t.U,u=t.L,l=t.R;if(n=u?l?o(l):u:l,s?s.L===t?s.L=n:s.R=n:this._=n,u&&l?(r=n.C,n.C=t.C,n.L=u,u.U=n,n!==l?(s=n.U,n.U=t.U,s.L=t=n.R,n.R=l,l.U=n):(n.U=s,s=n,t=n.R)):(r=t.C,t=n),t&&(t.U=s),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===s.L){if((e=s.R).C&&(e.C=!1,s.C=!0,i(this,s),e=s.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,a(this,e),e=s.R),e.C=s.C,s.C=e.R.C=!1,i(this,s),t=this._;break}}else if((e=s.L).C&&(e.C=!1,s.C=!0,a(this,s),e=s.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,i(this,e),e=s.L),e.C=s.C,s.C=e.L.C=!1,a(this,s),t=this._;break}e.C=!0,t=s,s=s.U}while(!t.C);t&&(t.C=!1)}}},e.b=r},function(t,e,n){"use strict";function r(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function i(t,e,n,r,i){var a,o=t[0],s=t[1],u=o[0],l=o[1],c=0,h=1,f=s[0]-u,d=s[1]-l;if(a=e-u,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<h&&(h=a)}else if(f>0){if(a>h)return;a>c&&(c=a)}if(a=r-u,f||!(a<0)){if(a/=f,f<0){if(a>h)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<h&&(h=a)}if(a=n-l,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<h&&(h=a)}else if(d>0){if(a>h)return;a>c&&(c=a)}if(a=i-l,d||!(a<0)){if(a/=d,d<0){if(a>h)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<h&&(h=a)}return!(c>0||h<1)||(c>0&&(t[0]=[u+c*f,l+c*d]),h<1&&(t[1]=[u+h*f,l+h*d]),!0)}}}}}function a(t,e,n,r,i){var a=t[1];if(a)return!0;var o,s,u=t[0],l=t.left,c=t.right,h=l[0],f=l[1],d=c[0],p=c[1],g=(h+d)/2,v=(f+p)/2;if(p===f){if(g<e||g>=r)return;if(h>d){if(u){if(u[1]>=i)return}else u=[g,n];a=[g,i]}else{if(u){if(u[1]<n)return}else u=[g,i];a=[g,n]}}else if(s=v-(o=(h-d)/(p-f))*g,o<-1||o>1)if(h>d){if(u){if(u[1]>=i)return}else u=[(n-s)/o,n];a=[(i-s)/o,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/o,i];a=[(n-s)/o,n]}else if(f<p){if(u){if(u[0]>=r)return}else u=[e,o*e+s];a=[r,o*r+s]}else{if(u){if(u[0]<e)return}else u=[r,o*r+s];a=[e,o*e+s]}return t[0]=u,t[1]=a,!0}e.c=function(t,e,n,i){var a=[null,null],s=o.e.push(a)-1;return a.left=t,a.right=e,n&&r(a,t,e,n),i&&r(a,e,t,i),o.b[t.index].halfedges.push(s),o.b[e.index].halfedges.push(s),a},e.b=function(t,e,n){var r=[e,n];return r.left=t,r},e.d=r,e.a=function(t,e,n,r){for(var s,u=o.e.length;u--;)a(s=o.e[u],t,e,n,r)&&i(s,t,e,n,r)&&(Math.abs(s[0][0]-s[1][0])>o.f||Math.abs(s[0][1]-s[1][1])>o.f)||delete o.e[u]};var o=n(60)},function(t,e,n){"undefined"!=typeof self&&self,t.exports=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){var r=n(1),i=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=n,this.rootNode=new r(e,n)}return t.prototype.execute=function(){throw new Error("please override this method")},t}();t.exports=i},function(t,e){var n={getId:function(t){return t.id||t.name},getHGap:function(t){return t.hgap||18},getVGap:function(t){return t.vgap||18},getChildren:function(t){return t.children},getHeight:function(t){return t.height||36},getWidth:function(t){return t.width||18*(t.name||" ").split("").length}},r=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var a=this;if(a.vgap=a.hgap=0,e instanceof t)return e;a.data=e;var o=(r.getHGap||n.getHGap)(e),s=(r.getVGap||n.getVGap)(e);if(a.width=(r.getWidth||n.getWidth)(e),a.height=(r.getHeight||n.getHeight)(e),a.id=(r.getId||n.getId)(e),a.x=a.y=0,a.depth=0,!i&&!e.isCollapsed)for(var u=[a],l=u.pop();l;){if(!l.data.isCollapsed){var c=(r.getChildren||n.getChildren)(l.data),h=c?c.length:0;if(l.children=[],c&&h)for(var f=0;f<h;f++){var d=new t(c[f],r);l.children.push(d),u.push(d),d.parent=l,d.depth=l.depth+1}}l=u.pop()}a.children||(a.children=[]),a.addGap(o,s)}return t.prototype.isRoot=function(){return 0===this.depth},t.prototype.isLeaf=function(){return 0===this.children.length},t.prototype.addGap=function(t,e){this.hgap+=t,this.vgap+=e,this.width+=2*t,this.height+=2*e},t.prototype.eachNode=function(t){for(var e=[this],n=e.pop();n;)t(n),n=(e=e.concat(n.children)).pop()},t.prototype.DFTraverse=function(t){this.eachNode(t)},t.prototype.BFTraverse=function(t){for(var e=[this],n=e.shift();n;)t(n),n=(e=e.concat(n.children)).shift()},t.prototype.getBoundingBox=function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)}),t},t.prototype.translate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.eachNode(function(n){n.x+=t,n.y+=e})},t.prototype.right2left=function(){var t=this.getBoundingBox();this.eachNode(function(e){e.x=e.x-2*(e.x-t.left)-e.width}),this.translate(t.width,0)},t.prototype.bottom2top=function(){var t=this.getBoundingBox();this.eachNode(function(e){e.y=e.y-2*(e.y-t.top)-e.height}),this.translate(0,t.height)},t.prototype.getCenterX=function(){return this.x+this.width/2},t.prototype.getCenterY=function(){return this.y+this.height/2},t.prototype.getActualWidth=function(){return this.width-2*this.hgap},t.prototype.getActualHeight=function(){return this.height-2*this.vgap},t}();r.prototype.each=r.prototype.eachNode,t.exports=r},function(t,e,n){var r=n(3),i=["LR","RL","TB","BT","H","V"],a=["LR","RL","H"],o=i[0];t.exports=function(t,e,n){var s=e.direction||o;if(e.isHorizontal=a.indexOf(s)>-1,s&&-1===i.indexOf(s))throw new TypeError("Invalid direction: "+s);if(s===i[0])n(t,e);else if(s===i[1])n(t,e),t.right2left();else if(s===i[2])n(t,e);else if(s===i[3])n(t,e),t.bottom2top();else if(s===i[4]||s===i[5]){var u=r(t,e),l=u.left,c=u.right;n(l,e),n(c,e),e.isHorizontal?l.right2left():l.bottom2top(),c.translate(l.x-c.x,l.y-c.y),t.x=l.x,t.y=c.y;var h=t.getBoundingBox();e.isHorizontal?h.top<0&&t.translate(0,-h.top):h.left<0&&t.translate(-h.left,0)}return t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),t}},function(t,e,n){var r=n(1);t.exports=function(t,e){for(var n=new r(t.data,e,!0),i=new r(t.data,e,!0),a=t.children.length,o=Math.round(a/2),s=e.getSide||function(t,e){return e<o?"right":"left"},u=0;u<a;u++){var l=t.children[u];"right"===s(l,u)?i.children.push(l):n.children.push(l)}return n.eachNode(function(t){t.isRoot()||(t.side="left")}),i.eachNode(function(t){t.isRoot()||(t.side="right")}),{left:n,right:i}}},function(t,e,n){var r={compactBox:n(5),dendrogram:n(7),indented:n(9)};t.exports=r},function(t,e,n){var r=n(0),i=n(6),a=n(2),o=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.execute=function(){var t=a(this.rootNode,this.options,i);return t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),t},e}(r),s={};t.exports=function(t,e){return e=Object.assign({},s,e),new o(t,e).execute()}},function(t,e){var n=function t(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var a=this;a.w=e||0,a.h=n||0,a.y=r||0,a.x=0,a.c=i||[],a.cs=i.length,a.prelim=0,a.mod=0,a.shift=0,a.change=0,a.tl=null,a.tr=null,a.el=null,a.er=null,a.msel=0,a.mser=0};n.fromNode=function(t,e){if(!t)return null;var r=[];return t.children.forEach(function(t){r.push(n.fromNode(t,e))}),e?new n(t.height,t.width,t.x,r):new n(t.width,t.height,t.y,r)},t.exports=function(t){function e(t){0===t.cs?(t.el=t,t.er=t,t.msel=t.mser=0):(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function r(t){return t.y+t.h}function i(t,e,n){for(;null!==n&&t>=n.low;)n=n.nxt;return{low:t,index:e,nxt:n}}var a=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).isHorizontal;!function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n?(e.x=r,r+=e.width):(e.y=r,r+=e.height),e.children.forEach(function(e){t(e,n,r)})}(t,a);var o=n.fromNode(t,a);return function t(n){if(0!==n.cs){t(n.c[0]);for(var a=i(r(n.c[0].el),0,null),o=1;o<n.cs;++o){t(n.c[o]);var s=r(n.c[o].er);!function(t,e,n){for(var i=t.c[e-1],a=i.mod,o=t.c[e],s=o.mod;null!==i&&null!==o;){r(i)>n.low&&(n=n.nxt);var u=a+i.prelim+i.w-(s+o.prelim);u>0&&(s+=u,function(t,e,n,r){t.c[e].mod+=r,t.c[e].msel+=r,t.c[e].mser+=r,function(t,e,n,r){if(n!==e-1){var i=e-n;t.c[n+1].shift+=r/i,t.c[e].shift-=r/i,t.c[e].change-=r-r/i}}(t,e,n,r)}(t,e,n.index,u));var l=r(i),c=r(o);l<=c&&null!==(i=0===i.cs?i.tr:i.c[i.cs-1])&&(a+=i.mod),l>=c&&null!==(o=0===o.cs?o.tl:o.c[0])&&(s+=o.mod)}!i&&o?function(t,e,n,r){var i=t.c[0].el;i.tl=n;var a=r-n.mod-t.c[0].msel;i.mod+=a,i.prelim-=a,t.c[0].el=t.c[e].el,t.c[0].msel=t.c[e].msel}(t,e,o,s):i&&!o&&function(t,e,n,r){var i=t.c[e].er;i.tr=n;var a=r-n.mod-t.c[e].mser;i.mod+=a,i.prelim-=a,t.c[e].er=t.c[e-1].er,t.c[e].mser=t.c[e-1].mser}(t,e,i,a)}(n,o,a),a=i(s,o,a)}!function(t){t.prelim=(t.c[0].prelim+t.c[0].mod+t.c[t.cs-1].mod+t.c[t.cs-1].prelim+t.c[t.cs-1].w)/2-t.w/2}(n),e(n)}else e(n)}(o),function t(e,n){e.x=e.prelim+(n+=e.mod),function(t){for(var e=0,n=0,r=0;r<t.cs;r++)t.c[r].mod+=n+=(e+=t.c[r].shift)+t.c[r].change}(e);for(var r=0;r<e.cs;r++)t(e.c[r],n)}(o,0),function t(e,n,r){r?n.y=e.x:n.x=e.x,e.c.forEach(function(e,i){t(e,n.children[i],r)})}(o,t,a),function(t,e){!function t(e,n,r){r?e.y+=n:e.x+=n,e.children.forEach(function(e){t(e,n,r)})}(t,-function t(e,n){var r=n?e.y:e.x;return e.children.forEach(function(e){r=Math.min(t(e,n),r)}),r}(t,e),e)}(t,a),t}},function(t,e,n){var r=n(0),i=n(8),a=n(2),o=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.execute=function(){return this.rootNode.width=0,a(this.rootNode,this.options,i)},e}(r),s={};t.exports=function(t,e){return e=Object.assign({},s,e),new o(t,e).execute()}},function(t,e){var n={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object.assign({},n,e);var r=0,i=void 0,a=function t(e){if(!e)return null;e.width=0,e.depth&&e.depth>r&&(r=e.depth);var n=e.children,i=n.length,a=new function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=this;r.x=r.y=0,r.leftChild=r.rightChild=null,r.height=e||0,r.children=n}(e.height,[]);return n.forEach(function(e,n){var r=t(e);a.children.push(r),0===n&&(a.leftChild=r),n===i-1&&(a.rightChild=r)}),a.originNode=e,a.isLeaf=e.isLeaf(),a}(t);return function t(e){if(e.isLeaf||0===e.children.length)e.drawingDepth=r;else{var n=e.children.map(function(e){return t(e)}),i=Math.min.apply(null,n);e.drawingDepth=i-1}return e.drawingDepth}(a),function t(n){n.x=n.drawingDepth*e.rankSep,n.isLeaf?(n.y=0,i&&(n.y=i.y+i.height+e.nodeSep,n.originNode.parent!==i.originNode.parent&&(n.y+=e.subTreeSep)),i=n):(n.children.forEach(function(e){t(e)}),n.y=(n.leftChild.y+n.rightChild.y)/2)}(a),function t(e,n,r){r?(n.x=e.x,n.y=e.y):(n.x=e.y,n.y=e.x),e.children.forEach(function(e,i){t(e,n.children[i],r)})}(a,t,e.isHorizontal),t}},function(t,e,n){var r=n(0),i=n(10),a=n(3),o=["LR","RL","H"],s=o[0],u=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.execute=function(){var t=this.options,e=this.rootNode;t.isHorizontal=!0;var n=t.indent,r=t.direction||s;if(r&&-1===o.indexOf(r))throw new TypeError("Invalid direction: "+r);if(r===o[0])i(e,n);else if(r===o[1])i(e,n),e.right2left();else if(r===o[2]){var u=a(e,t),l=u.left,c=u.right;i(l,n),l.right2left(),i(c,n);var h=l.getBoundingBox();c.translate(h.width,0),e.x=c.x-e.width/2}return e},e}(r),l={};t.exports=function(t,e){return e=Object.assign({},l,e),new u(t,e).execute()}},function(t,e){t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=null;t.eachNode(function(t){!function(t,e,n){t.x+=n*t.depth,t.y=e?e.y+e.height:0}(t,n,e),n=t})}}])},function(t,e,n){var r=n(29),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(e,n(146))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var r=n(296),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var a=arguments,o=-1,s=i(a.length-e,0),u=Array(s);++o<s;)u[o]=a[e+o];o=-1;for(var l=Array(e+1);++o<e;)l[o]=a[o];return l[e]=n(u),r(t,this,l)}}},function(t,e,n){var r=n(297),i=n(299)(r);t.exports=i},function(t,e,n){var r=n(62),i=n(24),a=n(63),o=n(15);t.exports=function(t,e,n){if(!o(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&a(e,n.length):"string"==s&&e in n)&&r(n[e],t)}},function(t,e,n){var r=n(300),i=n(88),a=n(3),o=n(89),s=n(63),u=n(152),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=a(t),c=!n&&i(t),h=!n&&!c&&o(t),f=!n&&!c&&!h&&u(t),d=n||c||h||f,p=d?r(t.length,String):[],g=p.length;for(var v in t)!e&&!l.call(t,v)||d&&("length"==v||h&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,g))||p.push(v);return p}},function(t,e,n){var r=n(303),i=n(90),a=n(304),o=a&&a.isTypedArray,s=o?i(o):r;t.exports=s},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){"use strict";function r(){y.point=a}function i(){o(s,u)}function a(t,e){y.point=o,s=t,u=e,e*=d.r,l=t*=d.r,c=Object(d.g)(e=e/2+d.q),h=Object(d.t)(e)}function o(t,e){e=(e*=d.r)/2+d.q;var n=(t*=d.r)-l,r=n>=0?1:-1,i=r*n,a=Object(d.g)(e),o=Object(d.t)(e),s=h*o,u=c*a+s*Object(d.g)(i),f=s*r*Object(d.t)(i);v.add(Object(d.e)(f,u)),l=t,c=a,h=o}n.d(e,"a",function(){return v}),n.d(e,"b",function(){return y});var s,u,l,c,h,f=n(36),d=n(5),p=n(25),g=n(30),v=Object(f.a)(),m=Object(f.a)(),y={point:p.a,lineStart:p.a,lineEnd:p.a,polygonStart:function(){v.reset(),y.lineStart=r,y.lineEnd=i},polygonEnd:function(){var t=+v;m.add(t<0?d.w+t:t),this.lineStart=this.lineEnd=this.point=p.a},sphere:function(){m.add(d.w)}};e.c=function(t){return m.reset(),Object(g.a)(t,y),2*m}},function(t,e,n){"use strict";function r(t,e,n,r,o,u){if(n){var l=Object(s.g)(e),c=Object(s.t)(e),h=r*n;null==o?(o=e+r*s.w,u=e-h/2):(o=i(l,o),u=i(l,u),(r>0?o<u:o>u)&&(o+=r*s.w));for(var f,d=o;r>0?d>u:d<u;d-=h)f=Object(a.g)([l,-c*Object(s.g)(d),-c*Object(s.t)(d)]),t.point(f[0],f[1])}}function i(t,e){(e=Object(a.a)(e))[0]-=t,Object(a.e)(e);var n=Object(s.b)(-e[1]);return((-e[2]<0?-n:n)+s.w-s.i)%s.w}e.a=r;var a=n(43),o=n(309),s=n(5),u=n(66);e.b=function(){function t(){var t=i.apply(this,arguments),o=a.apply(this,arguments)*s.r,h=l.apply(this,arguments)*s.r;return e=[],n=Object(u.b)(-t[0]*s.r,-t[1]*s.r,0).invert,r(c,o,h,1),t={type:"Polygon",coordinates:[e]},e=n=null,t}var e,n,i=Object(o.a)([0,0]),a=Object(o.a)(90),l=Object(o.a)(6),c={point:function(t,r){e.push(t=n(t,r)),t[0]*=s.h,t[1]*=s.h}};return t.center=function(e){return arguments.length?(i="function"==typeof e?e:Object(o.a)([+e[0],+e[1]]),t):i},t.radius=function(e){return arguments.length?(a="function"==typeof e?e:Object(o.a)(+e),t):a},t.precision=function(e){return arguments.length?(l="function"==typeof e?e:Object(o.a)(+e),t):l},t}},function(t,e,n){"use strict";e.a=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}},function(t,e,n){"use strict";var r=n(25);e.a=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:r.a,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}},function(t,e,n){"use strict";function r(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function i(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var a=n(159);e.a=function(t,e,n,o,s){var u,l,c=[],h=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],o=t[e];if(Object(a.a)(i,o)){for(s.lineStart(),u=0;u<e;++u)s.point((i=t[u])[0],i[1]);s.lineEnd()}else c.push(n=new r(i,t,null,!0)),h.push(n.o=new r(i,null,n,!1)),c.push(n=new r(o,t,null,!1)),h.push(n.o=new r(o,null,n,!0))}}),c.length){for(h.sort(e),i(c),i(h),u=0,l=h.length;u<l;++u)h[u].e=n=!n;for(var f,d,p=c[0];;){for(var g=p,v=!0;g.v;)if((g=g.n)===p)return;f=g.z,s.lineStart();do{if(g.v=g.o.v=!0,g.e){if(v)for(u=0,l=f.length;u<l;++u)s.point((d=f[u])[0],d[1]);else o(g.x,g.n.x,1,s);g=g.n}else{if(v)for(u=(f=g.p.z).length-1;u>=0;--u)s.point((d=f[u])[0],d[1]);else o(g.x,g.p.x,-1,s);g=g.p}f=(g=g.o).z,v=!v}while(!g.v);s.lineEnd()}}}},function(t,e,n){"use strict";var r=n(5);e.a=function(t,e){return Object(r.a)(t[0]-e[0])<r.i&&Object(r.a)(t[1]-e[1])<r.i}},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return s});var r=n(37),i=n(161),a=Object(i.a)(r.a),o=a.right,s=a.left;e.c=o},function(t,e,n){"use strict";var r=n(37);e.a=function(t){return 1===t.length&&(t=function(t){return function(e,n){return Object(r.a)(t(e),n)}}(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}},function(t,e,n){"use strict";function r(t,e){return[t,e]}e.b=r,e.a=function(t,e){null==e&&(e=r);for(var n=0,i=t.length-1,a=t[0],o=new Array(i<0?0:i);n<i;)o[n]=e(a,a=t[++n]);return o}},function(t,e,n){"use strict";var r=n(164);e.a=function(t,e){var n=Object(r.a)(t,e);return n?Math.sqrt(n):n}},function(t,e,n){"use strict";var r=n(44);e.a=function(t,e){var n,i,a=t.length,o=0,s=-1,u=0,l=0;if(null==e)for(;++s<a;)isNaN(n=Object(r.a)(t[s]))||(l+=(i=n-u)*(n-(u+=i/++o)));else for(;++s<a;)isNaN(n=Object(r.a)(e(t[s],s,t)))||(l+=(i=n-u)*(n-(u+=i/++o)));if(o>1)return l/(o-1)}},function(t,e,n){"use strict";e.a=function(t,e){var n,r,i,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=t[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=i=n;++o<a;)null!=(n=e(t[o],o,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}},function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return a});var r=Array.prototype,i=r.slice,a=r.map},function(t,e,n){"use strict";e.a=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}},function(t,e,n){"use strict";function r(t,e,n){var r=(e-t)/Math.max(0,n),s=Math.floor(Math.log(r)/Math.LN10),u=r/Math.pow(10,s);return s>=0?(u>=i?10:u>=a?5:u>=o?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(u>=i?10:u>=a?5:u>=o?2:1)}e.b=r,e.c=function(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),u=r/s;return u>=i?s*=10:u>=a?s*=5:u>=o&&(s*=2),e<t?-s:s};var i=Math.sqrt(50),a=Math.sqrt(10),o=Math.sqrt(2);e.a=function(t,e,n){var i,a,o,s,u=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((i=e<t)&&(a=t,t=e,e=a),0===(s=r(t,e,n))||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-t+1));++u<a;)o[u]=(t+u)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(t-e+1));++u<a;)o[u]=(t-u)/s;return i&&o.reverse(),o}},function(t,e,n){"use strict";e.a=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}},function(t,e,n){"use strict";e.a=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&r>n&&(r=n);return r}},function(t,e,n){"use strict";function r(t){return t.length}var i=n(170);e.a=function(t){if(!(o=t.length))return[];for(var e=-1,n=Object(i.a)(t,r),a=new Array(n);++e<n;)for(var o,s=-1,u=a[e]=new Array(o);++s<o;)u[s]=t[s][e];return a}},function(t,e,n){"use strict";var r=n(36),i=n(43),a=n(5),o=Object(r.a)();e.a=function(t,e){var n=e[0],r=e[1],s=[Object(a.t)(n),-Object(a.g)(n),0],u=0,l=0;o.reset();for(var c=0,h=t.length;c<h;++c)if(d=(f=t[c]).length)for(var f,d,p=f[d-1],g=p[0],v=p[1]/2+a.q,m=Object(a.t)(v),y=Object(a.g)(v),_=0;_<d;++_,g=x,m=S,y=T,p=b){var b=f[_],x=b[0],w=b[1]/2+a.q,S=Object(a.t)(w),T=Object(a.g)(w),O=x-g,M=O>=0?1:-1,k=M*O,C=k>a.o,E=m*S;if(o.add(Object(a.e)(E*M*Object(a.t)(k),y*T+E*Object(a.g)(k))),u+=C?O+M*a.w:O,C^g>=n^x>=n){var A=Object(i.c)(Object(i.a)(p),Object(i.a)(b));Object(i.e)(A);var I=Object(i.c)(s,A);Object(i.e)(I);var P=(C^O>=0?-1:1)*Object(a.c)(I[2]);(r>P||r===P&&(A[0]||A[1]))&&(l+=C^O>=0?1:-1)}}return(u<-a.i||u<a.i&&o<-a.i)^1&l}},function(t,e,n){"use strict";var r=n(174),i=[null,null],a={type:"LineString",coordinates:i};e.a=function(t,e){return i[0]=t,i[1]=e,Object(r.a)(a)}},function(t,e,n){"use strict";function r(){p.point=p.lineEnd=h.a}function i(t,e){e*=c.r,o=t*=c.r,s=Object(c.t)(e),u=Object(c.g)(e),p.point=a}function a(t,e){t*=c.r,e*=c.r;var n=Object(c.t)(e),r=Object(c.g)(e),i=Object(c.a)(t-o),a=Object(c.g)(i),l=r*Object(c.t)(i),h=u*n-s*r*a,f=s*n+u*r*a;d.add(Object(c.e)(Object(c.u)(l*l+h*h),f)),o=t,s=n,u=r}var o,s,u,l=n(36),c=n(5),h=n(25),f=n(30),d=Object(l.a)(),p={sphere:h.a,point:h.a,lineStart:function(){p.point=i,p.lineEnd=r},lineEnd:h.a,polygonStart:h.a,polygonEnd:h.a};e.a=function(t){return d.reset(),Object(f.a)(t,p),+d}},function(t,e,n){"use strict";var r=n(25),i=1/0,a=i,o=-i,s=o;e.a={point:function(t,e){t<i&&(i=t),t>o&&(o=t),e<a&&(a=e),e>s&&(s=e)},lineStart:r.a,lineEnd:r.a,polygonStart:r.a,polygonEnd:r.a,result:function(){var t=[[i,a],[o,s]];return o=s=-(a=i=1/0),t}}},function(t,e,n){"use strict";var r=n(94);e.a=function(){return Object(r.b)().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}},function(t,e,n){"use strict";function r(t){return t.length>1}function i(t,e){return((t=t.x)[0]<0?t[1]-s.l-s.i:s.l-t[1])-((e=e.x)[0]<0?e[1]-s.l-s.i:s.l-e[1])}var a=n(157),o=n(158),s=n(5),u=n(172),l=n(16);e.a=function(t,e,n,s){return function(c,h){function f(e,n){var r=c(e,n);t(e=r[0],n=r[1])&&h.point(e,n)}function d(t,e){var n=c(t,e);w.point(n[0],n[1])}function p(){k.point=d,w.lineStart()}function g(){k.point=f,w.lineEnd()}function v(t,e){x.push([t,e]);var n=c(t,e);O.point(n[0],n[1])}function m(){O.lineStart(),x=[]}function y(){v(x[0][0],x[0][1]),O.lineEnd();var t,e,n,i,a=O.clean(),o=T.result(),s=o.length;if(x.pop(),_.push(x),x=null,s)if(1&a){if((e=(n=o[0]).length-1)>0){for(M||(h.polygonStart(),M=!0),h.lineStart(),t=0;t<e;++t)h.point((i=n[t])[0],i[1]);h.lineEnd()}}else s>1&&2&a&&o.push(o.pop().concat(o.shift())),b.push(o.filter(r))}var _,b,x,w=e(h),S=c.invert(s[0],s[1]),T=Object(a.a)(),O=e(T),M=!1,k={point:f,lineStart:p,lineEnd:g,polygonStart:function(){k.point=v,k.lineStart=m,k.lineEnd=y,b=[],_=[]},polygonEnd:function(){k.point=f,k.lineStart=p,k.lineEnd=g,b=Object(l.merge)(b);var t=Object(u.a)(_,S);b.length?(M||(h.polygonStart(),M=!0),Object(o.a)(b,i,t,n,h)):t&&(M||(h.polygonStart(),M=!0),h.lineStart(),n(null,null,1,h),h.lineEnd()),M&&(h.polygonEnd(),M=!1),b=_=null},sphere:function(){h.polygonStart(),h.lineStart(),n(null,null,1,h),h.lineEnd(),h.polygonEnd()}};return k}}},function(t,e,n){"use strict";function r(t,e){return[t,e]}e.b=r;var i=n(21);r.invert=r,e.a=function(){return Object(i.a)(r).scale(152.63)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(350);n.d(e,"geoAiry",function(){return r.b}),n.d(e,"geoAiryRaw",function(){return r.a});var i=n(180);n.d(e,"geoAitoff",function(){return i.b}),n.d(e,"geoAitoffRaw",function(){return i.a});var a=n(351);n.d(e,"geoArmadillo",function(){return a.b}),n.d(e,"geoArmadilloRaw",function(){return a.a});var o=n(181);n.d(e,"geoAugust",function(){return o.b}),n.d(e,"geoAugustRaw",function(){return o.a});var s=n(352);n.d(e,"geoBaker",function(){return s.b}),n.d(e,"geoBakerRaw",function(){return s.a});var u=n(353);n.d(e,"geoBerghaus",function(){return u.b}),n.d(e,"geoBerghausRaw",function(){return u.a});var l=n(182);n.d(e,"geoBoggs",function(){return l.b}),n.d(e,"geoBoggsRaw",function(){return l.a});var c=n(354);n.d(e,"geoBonne",function(){return c.b}),n.d(e,"geoBonneRaw",function(){return c.a});var h=n(355);n.d(e,"geoBottomley",function(){return h.b}),n.d(e,"geoBottomleyRaw",function(){return h.a});var f=n(356);n.d(e,"geoBromley",function(){return f.b}),n.d(e,"geoBromleyRaw",function(){return f.a});var d=n(357);n.d(e,"geoChamberlin",function(){return d.c}),n.d(e,"geoChamberlinRaw",function(){return d.b}),n.d(e,"geoChamberlinAfrica",function(){return d.a});var p=n(98);n.d(e,"geoCollignon",function(){return p.b}),n.d(e,"geoCollignonRaw",function(){return p.a});var g=n(358);n.d(e,"geoCraig",function(){return g.b}),n.d(e,"geoCraigRaw",function(){return g.a});var v=n(359);n.d(e,"geoCraster",function(){return v.b}),n.d(e,"geoCrasterRaw",function(){return v.a});var m=n(183);n.d(e,"geoCylindricalEqualArea",function(){return m.b}),n.d(e,"geoCylindricalEqualAreaRaw",function(){return m.a});var y=n(360);n.d(e,"geoCylindricalStereographic",function(){return y.b}),n.d(e,"geoCylindricalStereographicRaw",function(){return y.a});var _=n(361);n.d(e,"geoEckert1",function(){return _.a}),n.d(e,"geoEckert1Raw",function(){return _.b});var b=n(362);n.d(e,"geoEckert2",function(){return b.a}),n.d(e,"geoEckert2Raw",function(){return b.b});var x=n(363);n.d(e,"geoEckert3",function(){return x.a}),n.d(e,"geoEckert3Raw",function(){return x.b});var w=n(364);n.d(e,"geoEckert4",function(){return w.a}),n.d(e,"geoEckert4Raw",function(){return w.b});var S=n(365);n.d(e,"geoEckert5",function(){return S.a}),n.d(e,"geoEckert5Raw",function(){return S.b});var T=n(366);n.d(e,"geoEckert6",function(){return T.a}),n.d(e,"geoEckert6Raw",function(){return T.b});var O=n(367);n.d(e,"geoEisenlohr",function(){return O.a}),n.d(e,"geoEisenlohrRaw",function(){return O.b});var M=n(368);n.d(e,"geoFahey",function(){return M.a}),n.d(e,"geoFaheyRaw",function(){return M.b});var k=n(369);n.d(e,"geoFoucaut",function(){return k.a}),n.d(e,"geoFoucautRaw",function(){return k.b});var C=n(370);n.d(e,"geoGilbert",function(){return C.a});var E=n(371);n.d(e,"geoGingery",function(){return E.a}),n.d(e,"geoGingeryRaw",function(){return E.b});var A=n(372);n.d(e,"geoGinzburg4",function(){return A.a}),n.d(e,"geoGinzburg4Raw",function(){return A.b});var I=n(373);n.d(e,"geoGinzburg5",function(){return I.a}),n.d(e,"geoGinzburg5Raw",function(){return I.b});var P=n(374);n.d(e,"geoGinzburg6",function(){return P.a}),n.d(e,"geoGinzburg6Raw",function(){return P.b});var L=n(375);n.d(e,"geoGinzburg8",function(){return L.a}),n.d(e,"geoGinzburg8Raw",function(){return L.b});var D=n(376);n.d(e,"geoGinzburg9",function(){return D.a}),n.d(e,"geoGinzburg9Raw",function(){return D.b});var j=n(184);n.d(e,"geoGringorten",function(){return j.a}),n.d(e,"geoGringortenRaw",function(){return j.b});var R=n(186);n.d(e,"geoGuyou",function(){return R.a}),n.d(e,"geoGuyouRaw",function(){return R.b});var N=n(378);n.d(e,"geoHammer",function(){return N.a}),n.d(e,"geoHammerRaw",function(){return N.b});var B=n(379);n.d(e,"geoHammerRetroazimuthal",function(){return B.a}),n.d(e,"geoHammerRetroazimuthalRaw",function(){return B.b});var F=n(380);n.d(e,"geoHealpix",function(){return F.a}),n.d(e,"geoHealpixRaw",function(){return F.b});var U=n(381);n.d(e,"geoHill",function(){return U.a}),n.d(e,"geoHillRaw",function(){return U.b});var z=n(187);n.d(e,"geoHomolosine",function(){return z.a}),n.d(e,"geoHomolosineRaw",function(){return z.b});var V=n(31);n.d(e,"geoInterrupt",function(){return V.a});var H=n(382);n.d(e,"geoInterruptedBoggs",function(){return H.a});var G=n(383);n.d(e,"geoInterruptedHomolosine",function(){return G.a});var W=n(384);n.d(e,"geoInterruptedMollweide",function(){return W.a});var q=n(385);n.d(e,"geoInterruptedMollweideHemispheres",function(){return q.a});var Y=n(386);n.d(e,"geoInterruptedSinuMollweide",function(){return Y.a});var X=n(387);n.d(e,"geoInterruptedSinusoidal",function(){return X.a});var $=n(388);n.d(e,"geoKavrayskiy7",function(){return $.a}),n.d(e,"geoKavrayskiy7Raw",function(){return $.b});var Z=n(389);n.d(e,"geoLagrange",function(){return Z.a}),n.d(e,"geoLagrangeRaw",function(){return Z.b});var Q=n(390);n.d(e,"geoLarrivee",function(){return Q.a}),n.d(e,"geoLarriveeRaw",function(){return Q.b});var K=n(391);n.d(e,"geoLaskowski",function(){return K.a}),n.d(e,"geoLaskowskiRaw",function(){return K.b});var J=n(392);n.d(e,"geoLittrow",function(){return J.a}),n.d(e,"geoLittrowRaw",function(){return J.b});var tt=n(393);n.d(e,"geoLoximuthal",function(){return tt.a}),n.d(e,"geoLoximuthalRaw",function(){return tt.b});var et=n(394);n.d(e,"geoMiller",function(){return et.a}),n.d(e,"geoMillerRaw",function(){return et.b});var nt=n(395);n.d(e,"geoModifiedStereographic",function(){return nt.a}),n.d(e,"geoModifiedStereographicRaw",function(){return nt.g}),n.d(e,"geoModifiedStereographicAlaska",function(){return nt.b}),n.d(e,"geoModifiedStereographicGs48",function(){return nt.c}),n.d(e,"geoModifiedStereographicGs50",function(){return nt.d}),n.d(e,"geoModifiedStereographicMiller",function(){return nt.f}),n.d(e,"geoModifiedStereographicLee",function(){return nt.e});var rt=n(26);n.d(e,"geoMollweide",function(){return rt.a}),n.d(e,"geoMollweideRaw",function(){return rt.d});var it=n(396);n.d(e,"geoMtFlatPolarParabolic",function(){return it.a}),n.d(e,"geoMtFlatPolarParabolicRaw",function(){return it.b});var at=n(397);n.d(e,"geoMtFlatPolarQuartic",function(){return at.a}),n.d(e,"geoMtFlatPolarQuarticRaw",function(){return at.b});var ot=n(398);n.d(e,"geoMtFlatPolarSinusoidal",function(){return ot.a}),n.d(e,"geoMtFlatPolarSinusoidalRaw",function(){return ot.b});var st=n(399);n.d(e,"geoNaturalEarth",function(){return st.a}),n.d(e,"geoNaturalEarthRaw",function(){return st.b});var ut=n(400);n.d(e,"geoNaturalEarth2",function(){return ut.a}),n.d(e,"geoNaturalEarth2Raw",function(){return ut.b});var lt=n(401);n.d(e,"geoNellHammer",function(){return lt.a}),n.d(e,"geoNellHammerRaw",function(){return lt.b});var ct=n(402);n.d(e,"geoPatterson",function(){return ct.a}),n.d(e,"geoPattersonRaw",function(){return ct.b});var ht=n(403);n.d(e,"geoPolyconic",function(){return ht.a}),n.d(e,"geoPolyconicRaw",function(){return ht.b});var ft=n(69);n.d(e,"geoPolyhedral",function(){return ft.a});var dt=n(405);n.d(e,"geoPolyhedralButterfly",function(){return dt.a});var pt=n(406);n.d(e,"geoPolyhedralCollignon",function(){return pt.a});var gt=n(407);n.d(e,"geoPolyhedralWaterman",function(){return gt.a});var vt=n(408);n.d(e,"geoProject",function(){return vt.a});var mt=n(412);n.d(e,"geoGringortenQuincuncial",function(){return mt.a});var yt=n(188);n.d(e,"geoPeirceQuincuncial",function(){return yt.a}),n.d(e,"geoPierceQuincuncial",function(){return yt.a});var _t=n(413);n.d(e,"geoQuantize",function(){return _t.a});var bt=n(101);n.d(e,"geoQuincuncial",function(){return bt.a});var xt=n(414);n.d(e,"geoRectangularPolyconic",function(){return xt.a}),n.d(e,"geoRectangularPolyconicRaw",function(){return xt.b});var wt=n(415);n.d(e,"geoRobinson",function(){return wt.a}),n.d(e,"geoRobinsonRaw",function(){return wt.b});var St=n(416);n.d(e,"geoSatellite",function(){return St.a}),n.d(e,"geoSatelliteRaw",function(){return St.b});var Tt=n(99);n.d(e,"geoSinuMollweide",function(){return Tt.a}),n.d(e,"geoSinuMollweideRaw",function(){return Tt.c});var Ot=n(46);n.d(e,"geoSinusoidal",function(){return Ot.a}),n.d(e,"geoSinusoidalRaw",function(){return Ot.b});var Mt=n(417);n.d(e,"geoStitch",function(){return Mt.a});var kt=n(418);n.d(e,"geoTimes",function(){return kt.a}),n.d(e,"geoTimesRaw",function(){return kt.b});var Ct=n(419);n.d(e,"geoTwoPointAzimuthal",function(){return Ct.a}),n.d(e,"geoTwoPointAzimuthalRaw",function(){return Ct.b}),n.d(e,"geoTwoPointAzimuthalUsa",function(){return Ct.c});var Et=n(420);n.d(e,"geoTwoPointEquidistant",function(){return Et.a}),n.d(e,"geoTwoPointEquidistantRaw",function(){return Et.b}),n.d(e,"geoTwoPointEquidistantUsa",function(){return Et.c});var At=n(421);n.d(e,"geoVanDerGrinten",function(){return At.a}),n.d(e,"geoVanDerGrintenRaw",function(){return At.b});var It=n(422);n.d(e,"geoVanDerGrinten2",function(){return It.a}),n.d(e,"geoVanDerGrinten2Raw",function(){return It.b});var Pt=n(423);n.d(e,"geoVanDerGrinten3",function(){return Pt.a}),n.d(e,"geoVanDerGrinten3Raw",function(){return Pt.b});var Lt=n(424);n.d(e,"geoVanDerGrinten4",function(){return Lt.a}),n.d(e,"geoVanDerGrinten4Raw",function(){return Lt.b});var Dt=n(425);n.d(e,"geoWagner4",function(){return Dt.a}),n.d(e,"geoWagner4Raw",function(){return Dt.b});var jt=n(426);n.d(e,"geoWagner6",function(){return jt.a}),n.d(e,"geoWagner6Raw",function(){return jt.b});var Rt=n(427);n.d(e,"geoWagner7",function(){return Rt.a}),n.d(e,"geoWagner7Raw",function(){return Rt.b});var Nt=n(428);n.d(e,"geoWiechel",function(){return Nt.a}),n.d(e,"geoWiechelRaw",function(){return Nt.b});var Bt=n(429);n.d(e,"geoWinkel3",function(){return Bt.a}),n.d(e,"geoWinkel3Raw",function(){return Bt.b})},function(t,e,n){"use strict";function r(t,e){var n=Object(a.h)(e),r=Object(a.z)(Object(a.b)(n*Object(a.h)(t/=2)));return[2*n*Object(a.y)(t)*r,Object(a.y)(e)*r]}e.a=r;var i=n(0),a=n(1);r.invert=function(t,e){if(!(t*t+4*e*e>a.s*a.s+a.k)){var n=t,r=e,i=25;do{var o,s=Object(a.y)(n),u=Object(a.y)(n/2),l=Object(a.h)(n/2),c=Object(a.y)(r),h=Object(a.h)(r),f=Object(a.y)(2*r),d=c*c,p=h*h,g=u*u,v=1-p*l*l,m=v?Object(a.b)(h*l)*Object(a.B)(o=1/v):o=0,y=2*m*h*u-t,_=m*c-e,b=o*(p*g+m*h*l*d),x=o*(.5*s*f-2*m*c*u),w=.25*o*(f*u-m*c*p*s),S=o*(d*l+m*g*h),T=x*w-S*b;if(!T)break;var O=(_*x-y*S)/T,M=(y*w-_*b)/T;n-=O,r-=M}while((Object(a.a)(O)>a.k||Object(a.a)(M)>a.k)&&--i>0);return[n,r]}},e.b=function(){return Object(i.geoProjection)(r).scale(152.63)}},function(t,e,n){"use strict";function r(t,e){var n=Object(a.F)(e/2),r=Object(a.B)(1-n*n),i=1+r*Object(a.h)(t/=2),o=Object(a.y)(t)*r/i,s=n/i,u=o*o,l=s*s;return[4/3*o*(3+u-3*l),4/3*s*(3+3*u-l)]}e.a=r;var i=n(0),a=n(1);r.invert=function(t,e){if(e*=3/8,!(t*=3/8)&&Object(a.a)(e)>1)return null;var n=1+t*t+e*e,r=Object(a.B)((n-Object(a.B)(n*n-4*e*e))/2),i=Object(a.e)(r)/3,o=r?Object(a.c)(Object(a.a)(e/r))/3:Object(a.d)(Object(a.a)(t))/3,s=Object(a.h)(i),u=Object(a.i)(o),l=u*u-s*s;return[2*Object(a.x)(t)*Object(a.g)(Object(a.A)(o)*s,.25-l),2*Object(a.x)(e)*Object(a.g)(u*Object(a.y)(i),.25+l)]},e.b=function(){return Object(i.geoProjection)(r).scale(66.1603)}},function(t,e,n){"use strict";function r(t,e){var n=Object(a.c)(o.s,e);return[s*t/(1/Object(o.h)(e)+u/Object(o.h)(n)),(e+o.D*Object(o.y)(n))/s]}e.a=r;var i=n(0),a=n(26),o=n(1),s=2.00276,u=1.11072;r.invert=function(t,e){var n,r,i=s*e,a=e<0?-o.u:o.u,l=25;do{r=i-o.D*Object(o.y)(a),a-=n=(Object(o.y)(2*a)+2*a-o.s*Object(o.y)(r))/(2*Object(o.h)(2*a)+2+o.s*Object(o.h)(r)*o.D*Object(o.h)(a))}while(Object(o.a)(n)>o.k&&--l>0);return r=i-o.D*Object(o.y)(a),[t*(1/Object(o.h)(r)+u/Object(o.h)(a))/s,r]},e.b=function(){return Object(i.geoProjection)(r).scale(160.857)}},function(t,e,n){"use strict";function r(t){function e(t,e){return[t*n,Object(i.y)(e)/n]}var n=Object(i.h)(t);return e.invert=function(t,e){return[t/n,Object(i.e)(e*n)]},e}e.a=r;var i=n(1),a=n(38);e.b=function(){return Object(a.a)(r).parallel(38.58).scale(195.044)}},function(t,e,n){"use strict";function r(t,e){var n=Object(a.x)(t),r=Object(a.x)(e),i=Object(a.h)(e),o=Object(a.h)(t)*i,s=Object(a.y)(t)*i,u=Object(a.y)(r*e);t=Object(a.a)(Object(a.g)(s,u)),e=Object(a.e)(o),Object(a.a)(t-a.o)>a.k&&(t%=a.o);var l=function(t,e){if(e===a.o)return[0,0];var n,r,i=Object(a.y)(e),o=i*i,s=o*o,u=1+s,l=1+3*s,c=1-s,h=Object(a.e)(1/Object(a.B)(u)),f=c+o*u*h,d=(1-i)/f,p=Object(a.B)(d),g=d*u,v=Object(a.B)(g),m=p*c;if(0===t)return[0,-(m+o*v)];var y,_=Object(a.h)(e),b=1/_,x=2*i*_,w=(-f*_-(-3*o+h*l)*x*(1-i))/(f*f),S=-b*x,T=-b*(o*u*w+d*l*x),O=-2*b*(c*(.5*w/p)-2*o*p*x),M=4*t/a.s;if(t>.222*a.s||e<a.s/4&&t>.175*a.s){if(n=(m+o*Object(a.B)(g*(1+s)-m*m))/(1+s),t>a.s/4)return[n,n];var k=n,C=.5*n;n=.5*(C+k),r=50;do{var E=n*(O+S*Object(a.B)(g-n*n))+T*Object(a.e)(n/v)-M;if(!E)break;E<0?C=n:k=n,n=.5*(C+k)}while(Object(a.a)(k-C)>a.k&&--r>0)}else{n=a.k,r=25;do{var A=n*n,I=Object(a.B)(g-A),P=O+S*I,L=n*P+T*Object(a.e)(n/v)-M;n-=y=I?L/(P+(T-S*A)/I):0}while(Object(a.a)(y)>a.k&&--r>0)}return[n,-m-o*Object(a.B)(g-n*n)]}(t>a.s/4?a.o-t:t,e);return t>a.s/4&&(u=l[0],l[0]=-l[1],l[1]=-u),l[0]*=n,l[1]*=-r,l}e.b=r;var i=n(0),a=n(1),o=n(185);r.invert=function(t,e){Object(a.a)(t)>1&&(t=2*Object(a.x)(t)-t),Object(a.a)(e)>1&&(e=2*Object(a.x)(e)-e);var n=Object(a.x)(t),r=Object(a.x)(e),i=-n*t,o=-r*e,s=o/i<1,u=function(t,e){for(var n=0,r=1,i=.5,o=50;;){var s=i*i,u=Object(a.B)(i),l=Object(a.e)(1/Object(a.B)(1+s)),c=1-s+i*(1+s)*l,h=(1-u)/c,f=Object(a.B)(h),d=h*(1+s),p=f*(1-s),g=d-t*t,v=Object(a.B)(g),m=e+p+i*v;if(Object(a.a)(r-n)<a.l||0==--o||0===m)break;m>0?n=i:r=i,i=.5*(n+r)}if(!o)return null;var y=Object(a.e)(u),_=Object(a.h)(y),b=1/_,x=2*u*_,w=(-c*_-(-3*i+l*(1+3*s))*x*(1-u))/(c*c);return[a.s/4*(t*(-2*b*(.5*w/f*(1-s)-2*i*f*x)+-b*x*v)+-b*(i*(1+s)*w+h*(1+3*s)*x)*Object(a.e)(t/Object(a.B)(d))),y]}(s?o:i,s?i:o),l=u[0],c=u[1],h=Object(a.h)(c);return s&&(l=-a.o-l),[n*(Object(a.g)(Object(a.y)(l)*h,-Object(a.y)(c))+a.s),r*Object(a.e)(Object(a.h)(l)*h)]},e.a=function(){return Object(i.geoProjection)(Object(o.a)(r)).scale(239.75)}},function(t,e,n){"use strict";var r=n(1);e.a=function(t){function e(e,i){var a=e>0?-.5:.5,o=t(e+a*r.s,i);return o[0]-=a*n,o}var n=t(r.o,0)[0]-t(-r.o,0)[0];return t.invert&&(e.invert=function(e,i){var a=e>0?-.5:.5,o=t.invert(e+a*n,i),s=o[0]-a*r.s;return s<-r.s?s+=2*r.s:s>r.s&&(s-=2*r.s),o[0]=s,o}),e}},function(t,e,n){"use strict";function r(t,e){var n=(o.D-1)/(o.D+1),r=Object(o.B)(1-n*n),i=Object(a.a)(o.o,r*r),s=Object(o.p)(Object(o.F)(o.s/4+Object(o.a)(e)/2)),u=Object(o.m)(-1*s)/Object(o.B)(n),l=function(t,e){var n=t*t,r=e+1,i=1-n-e*e;return[.5*((t>=0?o.o:-o.o)-Object(o.g)(i,2*t)),-.25*Object(o.p)(i*i+4*n)+.5*Object(o.p)(r*r+n)]}(u*Object(o.h)(-1*t),u*Object(o.y)(-1*t)),c=Object(a.b)(l[0],l[1],r*r);return[-c[1],(e>=0?1:-1)*(.5*i-c[0])]}e.b=r;var i=n(0),a=n(377),o=n(1),s=n(185);r.invert=function(t,e){var n=(o.D-1)/(o.D+1),r=Object(o.B)(1-n*n),i=Object(a.a)(o.o,r*r),s=Object(a.c)(.5*i-e,-t,r*r),u=function(t,e){var n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}(s[0],s[1]);return[Object(o.g)(u[1],u[0])/-1,2*Object(o.f)(Object(o.m)(-.5*Object(o.p)(n*u[0]*u[0]+n*u[1]*u[1])))-o.o]},e.a=function(){return Object(i.geoProjection)(Object(s.a)(r)).scale(151.496)}},function(t,e,n){"use strict";function r(t,e){return Object(a.a)(e)>u.b?((t=Object(o.d)(t,e))[1]-=e>0?u.d:-u.d,t):Object(s.b)(t,e)}e.b=r;var i=n(0),a=n(1),o=n(26),s=n(46),u=n(99);r.invert=function(t,e){return Object(a.a)(e)>u.b?o.d.invert(t,e+(e>0?u.d:-u.d)):s.b.invert(t,e)},e.a=function(){return Object(i.geoProjection)(r).scale(152.63)}},function(t,e,n){"use strict";var r=n(186),i=n(101);e.a=function(){return Object(i.a)(r.b).scale(111.48)}},function(t,e,n){"use strict";var r=n(0),i=n(1);e.a=function(t,e,n){var a=Object(r.geoInterpolate)(e,n),o=a(.5),s=Object(r.geoRotation)([-o[0],-o[1]])(e),u=a.distance/2,l=-Object(i.e)(Object(i.y)(s[1]*i.v)/Object(i.y)(u)),c=[-o[0],-o[1],-(s[0]>0?i.s-l:l)*i.j],h=Object(r.geoProjection)(t(u)).rotate(c),f=Object(r.geoRotation)(c),d=h.center;return delete h.rotate,h.center=function(t){return arguments.length?d(f(t)):f.invert(d())},h.clipAngle(90)}},function(t,e,n){var r;!function(e){"use strict";function i(){}function a(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function o(t){return function(){return this[t].apply(this,arguments)}}var s=i.prototype,u=e.EventEmitter;s.getListeners=function(t){var e,n,r=this._getEvents();if(t instanceof RegExp)for(n in e={},r)r.hasOwnProperty(n)&&t.test(n)&&(e[n]=r[n]);else e=r[t]||(r[t]=[]);return e},s.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},s.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&((e={})[t]=n),e||n},s.addListener=function(t,e){if(!function t(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&t(e.listener)}(e))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(t),i="object"==typeof e;for(n in r)r.hasOwnProperty(n)&&-1===a(r[n],e)&&r[n].push(i?e:{listener:e,once:!1});return this},s.on=o("addListener"),s.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},s.once=o("addOnceListener"),s.defineEvent=function(t){return this.getListeners(t),this},s.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},s.removeListener=function(t,e){var n,r,i=this.getListenersAsObject(t);for(r in i)i.hasOwnProperty(r)&&-1!==(n=a(i[r],e))&&i[r].splice(n,1);return this},s.off=o("removeListener"),s.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},s.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},s.manipulateListeners=function(t,e,n){var r,i,a=t?this.removeListener:this.addListener,o=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(r=n.length;r--;)a.call(this,e,n[r]);else for(r in e)e.hasOwnProperty(r)&&(i=e[r])&&("function"==typeof i?a.call(this,r,i):o.call(this,r,i));return this},s.removeEvent=function(t){var e,n=typeof t,r=this._getEvents();if("string"===n)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},s.removeAllListeners=o("removeEvent"),s.emitEvent=function(t,e){var n,r,i,a,o=this.getListenersAsObject(t);for(a in o)if(o.hasOwnProperty(a))for(n=o[a].slice(0),i=0;i<n.length;i++)!0===(r=n[i]).once&&this.removeListener(t,r.listener),r.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},s.trigger=o("emitEvent"),s.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},s.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},s._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},s._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return e.EventEmitter=u,i},void 0!==(r=(function(){return i}).call(e,n,e,t))&&(t.exports=r)}(this||{})},function(t,e,n){var r=n(102),i=n(192),a=n(61),o=n(453),s=n(454),u=n(457),l=n(458),c=n(459),h=n(461),f=n(195),d=n(462),p=n(197),g=n(466),v=n(467),m=n(476),y=n(3),_=n(89),b=n(15),x=n(11),w="[object Arguments]",S="[object Function]",T="[object Object]",O={};O[w]=O["[object Array]"]=O["[object ArrayBuffer]"]=O["[object DataView]"]=O["[object Boolean]"]=O["[object Date]"]=O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Map]"]=O["[object Number]"]=O[T]=O["[object RegExp]"]=O["[object Set]"]=O["[object String]"]=O["[object Symbol]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O["[object Error]"]=O[S]=O["[object WeakMap]"]=!1,t.exports=function t(e,n,M,k,C,E){var A,I=1&n,P=2&n,L=4&n;if(M&&(A=C?M(e,k,C,E):M(e)),void 0!==A)return A;if(!b(e))return e;var D=y(e);if(D){if(A=g(e),!I)return l(e,A)}else{var j=p(e),R=j==S||"[object GeneratorFunction]"==j;if(_(e))return u(e,I);if(j==T||j==w||R&&!C){if(A=P||R?{}:m(e),!I)return P?h(e,s(A,e)):c(e,o(A,e))}else{if(!O[j])return C?e:{};A=v(e,j,t,I)}}E||(E=new r);var N=E.get(e);if(N)return N;E.set(e,A);var B=L?P?d:f:P?keysIn:x,F=D?void 0:B(e);return i(F||e,function(r,i){F&&(r=e[i=r]),a(A,i,t(r,n,M,i,e,E))}),A}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(107),i=n(108),a=n(106),o=n(193),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,a(t)),t=i(t);return e}:o;t.exports=s},function(t,e,n){var r=n(196),i=n(106),a=n(11);t.exports=function(t){return r(t,a,i)}},function(t,e,n){var r=n(107),i=n(3);t.exports=function(t,e,n){var a=e(t);return i(t)?a:r(a,n(t))}},function(t,e,n){var r=n(463),i=n(103),a=n(464),o=n(198),s=n(465),u=n(23),l=n(147),c=l(r),h=l(i),f=l(a),d=l(o),p=l(s),g=u;(r&&"[object DataView]"!=g(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=g(new i)||a&&"[object Promise]"!=g(a.resolve())||o&&"[object Set]"!=g(new o)||s&&"[object WeakMap]"!=g(new s))&&(g=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case c:return"[object DataView]";case h:return"[object Map]";case f:return"[object Promise]";case d:return"[object Set]";case p:return"[object WeakMap]"}return e}),t.exports=g},function(t,e,n){var r=n(29)(n(18),"Set");t.exports=r},function(t,e,n){var r=n(18).Uint8Array;t.exports=r},function(t,e){t.exports=function(t,e,n,r){var i=-1,a=null==t?0:t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},function(t,e,n){var r=n(102),i=n(203);t.exports=function(t,e,n,a){var o=n.length,s=o,u=!a;if(null==t)return!s;for(t=Object(t);o--;){var l=n[o];if(u&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++o<s;){var c=(l=n[o])[0],h=t[c],f=l[1];if(u&&l[2]){if(void 0===h&&!(c in t))return!1}else{var d=new r;if(a)var p=a(h,f,c,t,e,d);if(!(void 0===p?i(f,h,3,a,d):p))return!1}}return!0}},function(t,e,n){var r=n(481),i=n(20);t.exports=function t(e,n,a,o,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,a,o,t,s))}},function(t,e,n){var r=n(110),i=n(484),a=n(111);t.exports=function(t,e,n,o,s,u){var l=1&n,c=t.length,h=e.length;if(c!=h&&!(l&&h>c))return!1;var f=u.get(t);if(f&&u.get(e))return f==e;var d=-1,p=!0,g=2&n?new r:void 0;for(u.set(t,e),u.set(e,t);++d<c;){var v=t[d],m=e[d];if(o)var y=l?o(m,v,d,e,t,u):o(v,m,d,t,e,u);if(void 0!==y){if(y)continue;p=!1;break}if(g){if(!i(e,function(t,e){if(!a(g,e)&&(v===t||s(v,t,n,o,u)))return g.push(e)})){p=!1;break}}else if(v!==m&&!s(v,m,n,o,u)){p=!1;break}}return u.delete(t),u.delete(e),p}},function(t,e,n){var r=n(206),i=n(11);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var a=e[n],o=t[a];e[n]=[a,o,r(o)]}return e}},function(t,e,n){var r=n(15);t.exports=function(t){return t==t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},function(t,e,n){var r=n(492);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(493),i=n(210);t.exports=function(t,e){return null!=t&&i(t,e,r)}},function(t,e,n){var r=n(76),i=n(88),a=n(3),o=n(63),s=n(87),u=n(51);t.exports=function(t,e,n){for(var l=-1,c=(e=r(e,t)).length,h=!1;++l<c;){var f=u(e[l]);if(!(h=null!=t&&n(t,f)))break;t=t[f]}return h||++l!=c?h:!!(c=null==t?0:t.length)&&s(c)&&o(f,c)&&(a(t)||i(t))}},function(t,e){t.exports=function(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}},function(t,e,n){var r=n(501)();t.exports=r},function(t,e,n){var r=n(42);t.exports=function(t){return"function"==typeof t?t:r}},function(t,e,n){var r=n(13),i=n(9),a=n(0),o=n(179),s=n(509);t.exports=function(t,e){if(r(t))return e?t:t();if(i(t)){if(a[t])return e?a[t]:a[t]();if(o[t])return e?o[t]:o[t]();if(s[t])return e?s[t]:s[t]()}return null}},function(t,e,n){"use strict";function r(){y.point=a}function i(){o(s,u)}function a(t,e){y.point=o,s=t,u=e,e*=d.r,l=t*=d.r,c=Object(d.g)(e=e/2+d.q),h=Object(d.t)(e)}function o(t,e){e=(e*=d.r)/2+d.q;var n=(t*=d.r)-l,r=n>=0?1:-1,i=r*n,a=Object(d.g)(e),o=Object(d.t)(e),s=h*o,u=c*a+s*Object(d.g)(i),f=s*r*Object(d.t)(i);v.add(Object(d.e)(f,u)),l=t,c=a,h=o}n.d(e,"a",function(){return v}),n.d(e,"b",function(){return y});var s,u,l,c,h,f=n(53),d=n(6),p=n(32),g=n(33),v=Object(f.a)(),m=Object(f.a)(),y={point:p.a,lineStart:p.a,lineEnd:p.a,polygonStart:function(){v.reset(),y.lineStart=r,y.lineEnd=i},polygonEnd:function(){var t=+v;m.add(t<0?d.w+t:t),this.lineStart=this.lineEnd=this.point=p.a},sphere:function(){m.add(d.w)}};e.c=function(t){return m.reset(),Object(g.a)(t,y),2*m}},function(t,e,n){"use strict";function r(t,e,n,r,o,u){if(n){var l=Object(s.g)(e),c=Object(s.t)(e),h=r*n;null==o?(o=e+r*s.w,u=e-h/2):(o=i(l,o),u=i(l,u),(r>0?o<u:o>u)&&(o+=r*s.w));for(var f,d=o;r>0?d>u:d<u;d-=h)f=Object(a.g)([l,-c*Object(s.g)(d),-c*Object(s.t)(d)]),t.point(f[0],f[1])}}function i(t,e){(e=Object(a.a)(e))[0]-=t,Object(a.e)(e);var n=Object(s.b)(-e[1]);return((-e[2]<0?-n:n)+s.w-s.i)%s.w}e.a=r;var a=n(54),o=n(513),s=n(6),u=n(114);e.b=function(){function t(){var t=i.apply(this,arguments),o=a.apply(this,arguments)*s.r,h=l.apply(this,arguments)*s.r;return e=[],n=Object(u.b)(-t[0]*s.r,-t[1]*s.r,0).invert,r(c,o,h,1),t={type:"Polygon",coordinates:[e]},e=n=null,t}var e,n,i=Object(o.a)([0,0]),a=Object(o.a)(90),l=Object(o.a)(6),c={point:function(t,r){e.push(t=n(t,r)),t[0]*=s.h,t[1]*=s.h}};return t.center=function(e){return arguments.length?(i="function"==typeof e?e:Object(o.a)([+e[0],+e[1]]),t):i},t.radius=function(e){return arguments.length?(a="function"==typeof e?e:Object(o.a)(+e),t):a},t.precision=function(e){return arguments.length?(l="function"==typeof e?e:Object(o.a)(+e),t):l},t}},function(t,e,n){"use strict";e.a=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}},function(t,e,n){"use strict";function r(t,e,n,r){function h(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function f(i,a,o,s){var u=0,l=0;if(null==i||(u=d(i,o))!==(l=d(a,o))||g(i,a)<0^o>0)do{s.point(0===u||3===u?t:n,u>1?r:e)}while((u=(u+o+4)%4)!==l);else s.point(a[0],a[1])}function d(r,a){return Object(i.a)(r[0]-t)<i.i?a>0?0:3:Object(i.a)(r[0]-n)<i.i?a>0?2:1:Object(i.a)(r[1]-e)<i.i?a>0?1:0:a>0?3:2}function p(t,e){return g(t.x,e.x)}function g(t,e){var n=d(t,1),r=d(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(i){function d(t,e){h(t,e)&&k.point(t,e)}function g(i,a){var s=h(i,a);if(m&&y.push([i,a]),O)_=i,b=a,x=s,O=!1,s&&(k.lineStart(),k.point(i,a));else if(s&&T)k.point(i,a);else{var u=[w=Math.max(c,Math.min(l,w)),S=Math.max(c,Math.min(l,S))],f=[i=Math.max(c,Math.min(l,i)),a=Math.max(c,Math.min(l,a))];Object(o.a)(u,f,t,e,n,r)?(T||(k.lineStart(),k.point(u[0],u[1])),k.point(f[0],f[1]),s||k.lineEnd(),M=!1):s&&(k.lineStart(),k.point(i,a),M=!1)}w=i,S=a,T=s}var v,m,y,_,b,x,w,S,T,O,M,k=i,C=Object(a.a)(),E={point:d,lineStart:function(){E.point=g,m&&m.push(y=[]),O=!0,T=!1,w=S=NaN},lineEnd:function(){v&&(g(_,b),x&&T&&C.rejoin(),v.push(C.result())),E.point=d,T&&k.lineEnd()},polygonStart:function(){k=C,v=[],m=[],M=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=m.length;n<i;++n)for(var a,o,s=m[n],u=1,l=s.length,c=s[0],h=c[0],f=c[1];u<l;++u)a=h,o=f,h=(c=s[u])[0],f=c[1],o<=r?f>r&&(h-a)*(r-o)>(f-o)*(t-a)&&++e:f<=r&&(h-a)*(r-o)<(f-o)*(t-a)&&--e;return e}(),n=M&&e,a=(v=Object(u.merge)(v)).length;(n||a)&&(i.polygonStart(),n&&(i.lineStart(),f(null,null,1,i),i.lineEnd()),a&&Object(s.a)(v,p,e,f,i),i.polygonEnd()),k=i,v=m=y=null}};return E}}e.a=r;var i=n(6),a=n(219),o=n(514),s=n(220),u=n(16),l=1e9,c=-l;e.b=function(){var t,e,n,i=0,a=0,o=960,s=500;return n={stream:function(n){return t&&e===n?t:t=r(i,a,o,s)(e=n)},extent:function(r){return arguments.length?(i=+r[0][0],a=+r[0][1],o=+r[1][0],s=+r[1][1],t=e=null,n):[[i,a],[o,s]]}}}},function(t,e,n){"use strict";var r=n(32);e.a=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:r.a,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}},function(t,e,n){"use strict";function r(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function i(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}var a=n(221);e.a=function(t,e,n,o,s){var u,l,c=[],h=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],o=t[e];if(Object(a.a)(i,o)){for(s.lineStart(),u=0;u<e;++u)s.point((i=t[u])[0],i[1]);s.lineEnd()}else c.push(n=new r(i,t,null,!0)),h.push(n.o=new r(i,null,n,!1)),c.push(n=new r(o,t,null,!1)),h.push(n.o=new r(o,null,n,!0))}}),c.length){for(h.sort(e),i(c),i(h),u=0,l=h.length;u<l;++u)h[u].e=n=!n;for(var f,d,p=c[0];;){for(var g=p,v=!0;g.v;)if((g=g.n)===p)return;f=g.z,s.lineStart();do{if(g.v=g.o.v=!0,g.e){if(v)for(u=0,l=f.length;u<l;++u)s.point((d=f[u])[0],d[1]);else o(g.x,g.n.x,1,s);g=g.n}else{if(v)for(u=(f=g.p.z).length-1;u>=0;--u)s.point((d=f[u])[0],d[1]);else o(g.x,g.p.x,-1,s);g=g.p}f=(g=g.o).z,v=!v}while(!g.v);s.lineEnd()}}}},function(t,e,n){"use strict";var r=n(6);e.a=function(t,e){return Object(r.a)(t[0]-e[0])<r.i&&Object(r.a)(t[1]-e[1])<r.i}},function(t,e,n){"use strict";function r(){p.point=p.lineEnd=h.a}function i(t,e){e*=c.r,o=t*=c.r,s=Object(c.t)(e),u=Object(c.g)(e),p.point=a}function a(t,e){t*=c.r,e*=c.r;var n=Object(c.t)(e),r=Object(c.g)(e),i=Object(c.a)(t-o),a=Object(c.g)(i),l=r*Object(c.t)(i),h=u*n-s*r*a,f=s*n+u*r*a;d.add(Object(c.e)(Object(c.u)(l*l+h*h),f)),o=t,s=n,u=r}var o,s,u,l=n(53),c=n(6),h=n(32),f=n(33),d=Object(l.a)(),p={sphere:h.a,point:h.a,lineStart:function(){p.point=i,p.lineEnd=r},lineEnd:h.a,polygonStart:h.a,polygonEnd:h.a};e.a=function(t){return d.reset(),Object(f.a)(t,p),+d}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";var r=n(32),i=1/0,a=i,o=-i,s=o;e.a={point:function(t,e){t<i&&(i=t),t>o&&(o=t),e<a&&(a=e),e>s&&(s=e)},lineStart:r.a,lineEnd:r.a,polygonStart:r.a,polygonEnd:r.a,result:function(){var t=[[i,a],[o,s]];return o=s=-(a=i=1/0),t}}},function(t,e,n){"use strict";var r=n(115);e.a=function(){return Object(r.b)().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}},function(t,e,n){"use strict";function r(t){return t.length>1}function i(t,e){return((t=t.x)[0]<0?t[1]-s.l-s.i:s.l-t[1])-((e=e.x)[0]<0?e[1]-s.l-s.i:s.l-e[1])}var a=n(219),o=n(220),s=n(6),u=n(524),l=n(16);e.a=function(t,e,n,s){return function(c,h){function f(e,n){var r=c(e,n);t(e=r[0],n=r[1])&&h.point(e,n)}function d(t,e){var n=c(t,e);w.point(n[0],n[1])}function p(){k.point=d,w.lineStart()}function g(){k.point=f,w.lineEnd()}function v(t,e){x.push([t,e]);var n=c(t,e);O.point(n[0],n[1])}function m(){O.lineStart(),x=[]}function y(){v(x[0][0],x[0][1]),O.lineEnd();var t,e,n,i,a=O.clean(),o=T.result(),s=o.length;if(x.pop(),_.push(x),x=null,s)if(1&a){if((e=(n=o[0]).length-1)>0){for(M||(h.polygonStart(),M=!0),h.lineStart(),t=0;t<e;++t)h.point((i=n[t])[0],i[1]);h.lineEnd()}}else s>1&&2&a&&o.push(o.pop().concat(o.shift())),b.push(o.filter(r))}var _,b,x,w=e(h),S=c.invert(s[0],s[1]),T=Object(a.a)(),O=e(T),M=!1,k={point:f,lineStart:p,lineEnd:g,polygonStart:function(){k.point=v,k.lineStart=m,k.lineEnd=y,b=[],_=[]},polygonEnd:function(){k.point=f,k.lineStart=p,k.lineEnd=g,b=Object(l.merge)(b);var t=Object(u.a)(_,S);b.length?(M||(h.polygonStart(),M=!0),Object(o.a)(b,i,t,n,h)):t&&(M||(h.polygonStart(),M=!0),h.lineStart(),n(null,null,1,h),h.lineEnd()),M&&(h.polygonEnd(),M=!1),b=_=null},sphere:function(){h.polygonStart(),h.lineStart(),n(null,null,1,h),h.lineEnd(),h.polygonEnd()}};return k}}},function(t,e,n){"use strict";function r(t,e,n){var r=e[1][0]-e[0][0],o=e[1][1]-e[0][1],s=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=s&&t.clipExtent(null),Object(i.a)(n,t.stream(a.a));var u=a.a.result(),l=Math.min(r/(u[1][0]-u[0][0]),o/(u[1][1]-u[0][1])),c=+e[0][0]+(r-l*(u[1][0]+u[0][0]))/2,h=+e[0][1]+(o-l*(u[1][1]+u[0][1]))/2;return null!=s&&t.clipExtent(s),t.scale(150*l).translate([c,h])}e.b=function(t){return function(e,n){return r(t,[[0,0],e],n)}},e.a=function(t){return function(e,n){return r(t,e,n)}};var i=n(33),a=n(224)},function(t,e,n){"use strict";function r(t,e){return[t,e]}e.b=r;var i=n(22);r.invert=r,e.a=function(){return Object(i.a)(r).scale(152.63)}},function(t,e,n){var r=n(77);t.exports=function(t){return null!=t&&t.length?r(t,1/0):[]}},function(t,e,n){"use strict";var r=n(231);t.exports=function(t){if(1===t.length)return 0;var e=r(t);return Math.sqrt(e)}},function(t,e,n){"use strict";var r=n(121);t.exports=function(t){if(0===t.length)throw new Error("variance requires at least one data point");return r(t,2)/t.length}},function(t,e,n){"use strict";t.exports=function(t){if(0===t.length)return 0;for(var e,n=t[0],r=0,i=1;i<t.length;i++)e=n+t[i],Math.abs(n)>=Math.abs(t[i])?r+=n-e+t[i]:r+=t[i]-e+n,n=e;return n+r}},function(t,e,n){"use strict";t.exports=function(t){return t.slice().sort(function(t,e){return t-e})}},function(t,e,n){"use strict";t.exports=function(t){if(0===t.length)throw new Error("mode requires at least one data point");if(1===t.length)return t[0];for(var e=t[0],n=NaN,r=0,i=1,a=1;a<t.length+1;a++)t[a]!==e?(i>r&&(r=i,n=e),i=1,e=t[a]):i++;return n}},function(t,e,n){"use strict";t.exports=function(t){if(0===t.length)throw new Error("min requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]<e&&(e=t[n]);return e}},function(t,e,n){"use strict";t.exports=function(t){if(0===t.length)throw new Error("max requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]);return e}},function(t,e,n){"use strict";var r=n(122);t.exports=function(t){return+r(t,.5)}},function(t,e,n){"use strict";var r=n(239);t.exports=function(t,e){var n=t.slice();return r(n.slice(),e)}},function(t,e,n){"use strict";t.exports=function(t,e){e=e||Math.random;for(var n,r,i=t.length;i>0;)r=Math.floor(e()*i--),n=t[i],t[i]=t[r],t[r]=n;return t}},function(t,e,n){"use strict";t.exports=function(t){for(var e,n=0,r=0;r<t.length;r++)0!==r&&t[r]===e||(e=t[r],n++);return n}},function(t,e,n){"use strict";var r=n(28);t.exports=function(t,e){if(t.length!==e.length)throw new Error("sampleCovariance requires samples with equal lengths");if(t.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var n=r(t),i=r(e),a=0,o=0;o<t.length;o++)a+=(t[o]-n)*(e[o]-i);return a/(t.length-1)}},function(t,e,n){"use strict";var r=n(124);t.exports=function(t){var e=r(t);return Math.sqrt(e)}},function(t,e,n){"use strict";t.exports=function(t,e,n,r){return(t*e+n*r)/(e+r)}},function(t,e,n){"use strict";function r(t){for(var e=t,n=t,r=1;r<15;r++)e+=n*=t*t/(2*r+1);return Math.round(1e4*(.5+e/i*Math.exp(-t*t/2)))/1e4}for(var i=Math.sqrt(2*Math.PI),a=[],o=0;o<=3.09;o+=.01)a.push(r(o));t.exports=a},function(t,e,n){"use strict";t.exports=function(t){var e=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),n=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*e)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/e)-(2/(Math.PI*e)+Math.log(1-t*t)/2));return t>=0?n:-n}},function(t,e){t.exports=function(t){for(var e=1/t,n=[],r=0;r<=1;r+=e)n.push(r);return n}},function(t,e){t.exports=function(t){return null==t}},function(t,e,n){function r(t,e,n){n.dataType=u;var r=a(t.features);return r.forEach(function(t){t.name=t.properties.name,t.longitude=[],t.latitude=[];var e=t.pathData=c(t);i(e)._path.forEach(function(e){t.longitude.push(e[1]),t.latitude.push(e[2])});var n=c.centroid(t);t.centroidX=n[0],t.centroidY=n[1]}),r}var i=n(249),a=n(75),o=n(0).geoPath,s=n(2),u=s.GEO,l=s.registerConnector,c=o();l("geo",r),l("geojson",r),l("GeoJSON",r),t.exports=r},function(t,e,n){function r(t){if(!(this instanceof r))return new r(t);this._path=o(t)?t:a(t),this._path=s(this._path),this._path=function(t){for(var e=[],n=["L",0,0],r=0,i=t.length;r<i;r++){var a=t[r];switch(a[0]){case"M":n=["L",a[1],a[2]],e.push(a);break;case"Z":e.push(n);break;default:e.push(a)}}return e}(this._path)}function i(t,e,n,r){var i=t-n,a=e-r;return Math.sqrt(i*i+a*a)}var a=n(601),o=n(602),s=n(603);t.exports=r,r.prototype.at=function(t,e){return this._walk(t,e).pos},r.prototype.length=function(){return this._walk(null).length},r.prototype._walk=function(t,e){var n=[0,0],r=[0,0,0],a=0;"number"==typeof t&&(t*=1.045);for(var o=0;o<this._path.length;o++){var s=this._path[o];if("M"===s[0]){if(n[0]=s[1],n[1]=s[2],0===t)return{length:a,pos:n}}else if("C"===s[0]){r[0]=n[0],r[1]=n[1],r[2]=a;for(var u=100,l=0;l<=u;l++){var c=function(t,e){return Math.pow(1-e,3)*n[0]+3*Math.pow(1-e,2)*e*t[1]+3*(1-e)*Math.pow(e,2)*t[3]+Math.pow(e,3)*t[5]}(s,f=l/u),h=function(t,e){return Math.pow(1-e,3)*n[1]+3*Math.pow(1-e,2)*e*t[2]+3*(1-e)*Math.pow(e,2)*t[4]+Math.pow(e,3)*t[6]}(s,f);if(a+=i(n[0],n[1],c,h),n[0]=c,n[1]=h,"number"==typeof t&&a>=t)return{length:a,pos:p=[n[0]*(1-(d=(a-t)/(a-r[2])))+r[0]*d,n[1]*(1-d)+r[1]*d]};r[0]=n[0],r[1]=n[1],r[2]=a}}else if("Q"===s[0])for(r[0]=n[0],r[1]=n[1],r[2]=a,u=100,l=0;l<=u;l++){var f=l/u;if(c=function(t,e){return Math.pow(1-e,2)*n[0]+2*(1-e)*e*t[1]+Math.pow(e,2)*t[3]}(s,f),h=function(t,e){return Math.pow(1-e,2)*n[1]+2*(1-e)*e*t[2]+Math.pow(e,2)*t[4]}(s,f),a+=i(n[0],n[1],c,h),n[0]=c,n[1]=h,"number"==typeof t&&a>=t)return{length:a,pos:p=[n[0]*(1-(d=(a-t)/(a-r[2])))+r[0]*d,n[1]*(1-d)+r[1]*d]};r[0]=n[0],r[1]=n[1],r[2]=a}else if("L"===s[0]){if(r[0]=n[0],r[1]=n[1],r[2]=a,a+=i(n[0],n[1],s[1],s[2]),n[0]=s[1],n[1]=s[2],"number"==typeof t&&a>=t){var d=(a-t)/(a-r[2]),p=[n[0]*(1-d)+r[0]*d,n[1]*(1-d)+r[1]*d];return{length:a,pos:p}}r[0]=n[0],r[1]=n[1],r[2]=a}}return{length:a/1.045,pos:n}}},function(t,e,n){"use strict";function r(t,e,n){var r=t.x,i=t.y,a=e.r+n.r,o=t.r+n.r,s=e.x-r,u=e.y-i,l=s*s+u*u;if(l){var c=.5+((o*=o)-(a*=a))/(2*l),h=Math.sqrt(Math.max(0,2*a*(o+l)-(o-=l)*o-a*a))/(2*l);n.x=r+c*s+h*u,n.y=i+c*u-h*s}else n.x=r+o,n.y=i}function i(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return i*i-1e-6>n*n+r*r}function a(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function o(t){this._=t,this.next=null,this.previous=null}function s(t){if(!(l=t.length))return 0;var e,n,s,l,c,h,f,d,p,g,v;if((e=t[0]).x=0,e.y=0,!(l>1))return e.r;if(e.x=-(n=t[1]).r,n.x=e.r,n.y=0,!(l>2))return e.r+n.r;r(n,e,s=t[2]),e=new o(e),n=new o(n),s=new o(s),e.next=s.previous=n,n.next=e.previous=s,s.next=n.previous=e;t:for(f=3;f<l;++f){r(e._,n._,s=t[f]),s=new o(s),d=n.next,p=e.previous,g=n._.r,v=e._.r;do{if(g<=v){if(i(d._,s._)){e.next=n=d,n.previous=e,--f;continue t}g+=d._.r,d=d.next}else{if(i(p._,s._)){(e=p).next=n,n.previous=e,--f;continue t}v+=p._.r,p=p.previous}}while(d!==p.next);for(s.previous=e,s.next=n,e.next=n.previous=n=s,c=a(e);(s=s.next)!==n;)(h=a(s))<c&&(e=s,c=h);n=e.next}for(e=[n._],s=n;(s=s.next)!==n;)e.push(s._);for(s=Object(u.a)(e),f=0;f<l;++f)(e=t[f]).x-=s.x,e.y-=s.y;return s.r}e.b=s;var u=n(251);e.a=function(t){return s(t),t}},function(t,e,n){"use strict";function r(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function i(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function a(t,e){for(var n=0;n<e.length;++n)if(!i(t,e[n]))return!1;return!0}function o(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,s=e.r,u=a-n,l=o-r,c=s-i,h=Math.sqrt(u*u+l*l);return{x:(n+a+u/h*c)/2,y:(r+o+l/h*c)/2,r:(h+i+s)/2}}function s(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,s=e.y,u=e.r,l=n.x,c=n.y,h=n.r,f=r-o,d=r-l,p=i-s,g=i-c,v=u-a,m=h-a,y=r*r+i*i-a*a,_=y-o*o-s*s+u*u,b=y-l*l-c*c+h*h,x=d*p-f*g,w=(p*b-g*_)/(2*x)-r,S=(g*v-p*m)/x,T=(d*_-f*b)/(2*x)-i,O=(f*m-d*v)/x,M=S*S+O*O-1,k=2*(a+w*S+T*O),C=w*w+T*T-a*a,E=-(M?(k+Math.sqrt(k*k-4*M*C))/(2*M):C/k);return{x:r+w+S*E,y:i+T+O*E,r:E}}var u=n(621);e.a=function(t){for(var e,n,l=0,c=(t=Object(u.a)(u.b.call(t))).length,h=[];l<c;)e=t[l],n&&i(n,e)?++l:(n=function(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return o(t[0],t[1]);case 3:return s(t[0],t[1],t[2])}}(h=function(t,e){var n,i;if(a(e,t))return[e];for(n=0;n<t.length;++n)if(r(e,t[n])&&a(o(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(r(o(t[n],t[i]),e)&&r(o(t[n],e),t[i])&&r(o(t[i],e),t[n])&&a(s(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}(h,e)),l=0);return n}},function(t,e,n){"use strict";e.a=function(){return 0},e.b=function(t){return function(){return t}}},function(t,e,n){"use strict";e.a=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}},function(t,e,n){"use strict";var r=n(130);e.a=function(t){function e(t){(t=a(t))[0]<o&&(o=t[0]),t[0]>u&&(u=t[0]),t[1]<s&&(s=t[1]),t[1]>l&&(l=t[1])}function n(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"Point":e(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(e)}}var i,a=Object(r.a)(t.transform),o=1/0,s=o,u=-o,l=-o;for(i in t.arcs.forEach(function(t){for(var e,n=-1,r=t.length;++n<r;)(e=a(t[n],n))[0]<o&&(o=e[0]),e[0]>u&&(u=e[0]),e[1]<s&&(s=e[1]),e[1]>l&&(l=e[1])}),t.objects)n(t.objects[i]);return[o,s,u,l]}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";e.a=function(t,e){function n(t,e){for(var n in t){var i=t[n];delete e[i.start],delete i.start,delete i.end,i.forEach(function(t){r[t<0?~t:t]=1}),o.push(i)}}var r={},i={},a={},o=[],s=-1;return e.forEach(function(n,r){var i,a=t.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=e[++s],e[s]=n,e[r]=i)}),e.forEach(function(e){var n,r,o=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}(e),s=o[0],u=o[1];if(n=a[s])if(delete a[n.end],n.push(e),n.end=u,r=i[u]){delete i[r.start];var l=r===n?n:n.concat(r);i[l.start=n.start]=a[l.end=r.end]=l}else i[n.start]=a[n.end]=n;else if(n=i[u])if(delete i[n.start],n.unshift(e),n.start=s,r=a[s]){delete a[r.end];var c=r===n?n:r.concat(n);i[c.start=r.start]=a[c.end=n.end]=c}else i[n.start]=a[n.end]=n;else i[(n=[e]).start=s]=a[n.end=u]=n}),n(a,i),n(i,a),e.forEach(function(t){r[t<0?~t:t]||o.push([t])}),o}},function(t,e,n){"use strict";var r=n(255);e.a=function(t){if(null==t)return r.a;var e,n,i=t.scale[0],a=t.scale[1],o=t.translate[0],s=t.translate[1];return function(t,r){r||(e=n=0);var u=2,l=t.length,c=new Array(l),h=Math.round((t[0]-o)/i),f=Math.round((t[1]-s)/a);for(c[0]=h-e,e=h,c[1]=f-n,n=f;u<l;)c[u]=t[u],++u;return c}}},function(t,e,n){var r=n(642);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},function(t,e){t.exports=function(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}},function(t,e){var n=Array.prototype.reverse;t.exports=function(t){return null==t?t:n.call(t)}},function(t,e,n){var r=n(120),i=n(24);t.exports=function(t,e){var n=-1,a=i(t)?Array(t.length):[];return r(t,function(t,r,i){a[++n]=e(t,r,i)}),a}},function(t,e,n){(function(t,r){var i;(function(){function a(t,e){return t.set(e[0],e[1]),t}function o(t,e){return t.add(e),t}function s(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function u(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function l(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function c(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}function h(t,e){return!(null==t||!t.length)&&_(t,e,0)>-1}function f(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function d(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function p(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function g(t,e,n,r){var i=-1,a=null==t?0:t.length;for(r&&a&&(n=t[++i]);++i<a;)n=e(n,t[i],i,t);return n}function v(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function m(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function y(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}function _(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):y(t,b,n)}function b(t){return t!=t}function x(t,e){var n=null==t?0:t.length;return n?O(t,e)/n:ht}function w(t){return function(e){return null==e?U:e[t]}}function S(t){return function(e){return null==t?U:t[e]}}function T(t,e,n,r,i){return i(t,function(t,i,a){n=r?(r=!1,t):e(n,t,i,a)}),n}function O(t,e){for(var n,r=-1,i=t.length;++r<i;){var a=e(t[r]);a!==U&&(n=n===U?a:n+a)}return n}function M(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function k(t){return function(e){return t(e)}}function C(t,e){return d(e,function(e){return t[e]})}function E(t,e){return t.has(e)}function A(t,e){for(var n=-1,r=t.length;++n<r&&_(e,t[n],0)>-1;);return n}function I(t,e){for(var n=t.length;n--&&_(e,t[n],0)>-1;);return n}function P(t){return"\\"+en[t]}function L(t){return $e.test(t)}function D(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function j(t,e){return function(n){return t(e(n))}}function R(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var o=t[n];o!==e&&o!==G||(t[n]=G,a[i++]=n)}return a}function N(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function B(t){return L(t)?function(t){for(var e=Ye.lastIndex=0;Ye.test(t);)++e;return e}(t):_n(t)}function F(t){return L(t)?function(t){return t.match(Ye)||[]}(t):function(t){return t.split("")}(t)}var U,z=200,V="Expected a function",H="__lodash_hash_undefined__",G="__lodash_placeholder__",W=1,q=2,Y=4,X=1,$=2,Z=1,Q=2,K=4,J=8,tt=16,et=32,nt=64,rt=128,it=256,at=512,ot=800,st=16,ut=1/0,lt=9007199254740991,ct=1.7976931348623157e308,ht=NaN,ft=4294967295,dt=ft-1,pt=ft>>>1,gt=[["ary",rt],["bind",Z],["bindKey",Q],["curry",J],["curryRight",tt],["flip",at],["partial",et],["partialRight",nt],["rearg",it]],vt="[object Arguments]",mt="[object Array]",yt="[object AsyncFunction]",_t="[object Boolean]",bt="[object Date]",xt="[object DOMException]",wt="[object Error]",St="[object Function]",Tt="[object GeneratorFunction]",Ot="[object Map]",Mt="[object Number]",kt="[object Null]",Ct="[object Object]",Et="[object Proxy]",At="[object RegExp]",It="[object Set]",Pt="[object String]",Lt="[object Symbol]",Dt="[object Undefined]",jt="[object WeakMap]",Rt="[object ArrayBuffer]",Nt="[object DataView]",Bt="[object Float32Array]",Ft="[object Float64Array]",Ut="[object Int8Array]",zt="[object Int16Array]",Vt="[object Int32Array]",Ht="[object Uint8Array]",Gt="[object Uint8ClampedArray]",Wt="[object Uint16Array]",qt="[object Uint32Array]",Yt=/\b__p \+= '';/g,Xt=/\b(__p \+=) '' \+/g,$t=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Zt=/&(?:amp|lt|gt|quot|#39);/g,Qt=/[&<>"']/g,Kt=RegExp(Zt.source),Jt=RegExp(Qt.source),te=/<%-([\s\S]+?)%>/g,ee=/<%([\s\S]+?)%>/g,ne=/<%=([\s\S]+?)%>/g,re=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ie=/^\w*$/,ae=/^\./,oe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,se=/[\\^$.*+?()[\]{}|]/g,ue=RegExp(se.source),le=/^\s+|\s+$/g,ce=/^\s+/,he=/\s+$/,fe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,de=/\{\n\/\* \[wrapped with (.+)\] \*/,pe=/,? & /,ge=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ve=/\\(\\)?/g,me=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ye=/\w*$/,_e=/^[-+]0x[0-9a-f]+$/i,be=/^0b[01]+$/i,xe=/^\[object .+?Constructor\]$/,we=/^0o[0-7]+$/i,Se=/^(?:0|[1-9]\d*)$/,Te=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Oe=/($^)/,Me=/['\n\r\u2028\u2029\\]/g,ke="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ce="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ee="["+Ce+"]",Ae="["+ke+"]",Ie="\\d+",Pe="[a-z\\xdf-\\xf6\\xf8-\\xff]",Le="[^\\ud800-\\udfff"+Ce+Ie+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",De="\\ud83c[\\udffb-\\udfff]",je="[^\\ud800-\\udfff]",Re="(?:\\ud83c[\\udde6-\\uddff]){2}",Ne="[\\ud800-\\udbff][\\udc00-\\udfff]",Be="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Fe="(?:"+Pe+"|"+Le+")",Ue="(?:"+Be+"|"+Le+")",ze="(?:"+Ae+"|"+De+")?",Ve="[\\ufe0e\\ufe0f]?"+ze+"(?:\\u200d(?:"+[je,Re,Ne].join("|")+")[\\ufe0e\\ufe0f]?"+ze+")*",He="(?:"+["[\\u2700-\\u27bf]",Re,Ne].join("|")+")"+Ve,Ge="(?:"+[je+Ae+"?",Ae,Re,Ne,"[\\ud800-\\udfff]"].join("|")+")",We=RegExp("['\u2019]","g"),qe=RegExp(Ae,"g"),Ye=RegExp(De+"(?="+De+")|"+Ge+Ve,"g"),Xe=RegExp([Be+"?"+Pe+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[Ee,Be,"$"].join("|")+")",Ue+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[Ee,Be+Fe,"$"].join("|")+")",Be+"?"+Fe+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Be+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Ie,He].join("|"),"g"),$e=RegExp("[\\u200d\\ud800-\\udfff"+ke+"\\ufe0e\\ufe0f]"),Ze=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qe=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ke=-1,Je={};Je[Bt]=Je[Ft]=Je[Ut]=Je[zt]=Je[Vt]=Je[Ht]=Je[Gt]=Je[Wt]=Je[qt]=!0,Je[vt]=Je[mt]=Je[Rt]=Je[_t]=Je[Nt]=Je[bt]=Je[wt]=Je[St]=Je[Ot]=Je[Mt]=Je[Ct]=Je[At]=Je[It]=Je[Pt]=Je[jt]=!1;var tn={};tn[vt]=tn[mt]=tn[Rt]=tn[Nt]=tn[_t]=tn[bt]=tn[Bt]=tn[Ft]=tn[Ut]=tn[zt]=tn[Vt]=tn[Ot]=tn[Mt]=tn[Ct]=tn[At]=tn[It]=tn[Pt]=tn[Lt]=tn[Ht]=tn[Gt]=tn[Wt]=tn[qt]=!0,tn[wt]=tn[St]=tn[jt]=!1;var en={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nn=parseFloat,rn=parseInt,an="object"==typeof t&&t&&t.Object===Object&&t,on="object"==typeof self&&self&&self.Object===Object&&self,sn=an||on||Function("return this")(),un="object"==typeof e&&e&&!e.nodeType&&e,ln=un&&"object"==typeof r&&r&&!r.nodeType&&r,cn=ln&&ln.exports===un,hn=cn&&an.process,fn=function(){try{return hn&&hn.binding&&hn.binding("util")}catch(t){}}(),dn=fn&&fn.isArrayBuffer,pn=fn&&fn.isDate,gn=fn&&fn.isMap,vn=fn&&fn.isRegExp,mn=fn&&fn.isSet,yn=fn&&fn.isTypedArray,_n=w("length"),bn=S({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),xn=S({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),wn=S({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Sn=function t(e){function n(t){if(Hi(t)&&!Ps(t)&&!(t instanceof S)){if(t instanceof i)return t;if(Ia.call(t,"__wrapped__"))return gi(t)}return new i(t)}function r(){}function i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=U}function S(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ft,this.__views__=[]}function ke(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ce(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ee(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ae(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Ee;++e<n;)this.add(t[e])}function Ie(t){var e=this.__data__=new Ce(t);this.size=e.size}function Pe(t,e){var n=Ps(t),r=!n&&Is(t),i=!n&&!r&&Ds(t),a=!n&&!r&&!i&&Fs(t),o=n||r||i||a,s=o?M(t.length,Oa):[],u=s.length;for(var l in t)!e&&!Ia.call(t,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ei(l,u))||s.push(l);return s}function Le(t){var e=t.length;return e?t[Gn(0,e-1)]:U}function De(t,e,n){(n===U||ji(t[e],n))&&(n!==U||e in t)||Be(t,e,n)}function je(t,e,n){var r=t[e];Ia.call(t,e)&&ji(r,n)&&(n!==U||e in t)||Be(t,e,n)}function Re(t,e){for(var n=t.length;n--;)if(ji(t[n][0],e))return n;return-1}function Ne(t,e){return t&&yr(e,ra(e),t)}function Be(t,e,n){"__proto__"==e&&$a?$a(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Fe(t,e){for(var n=-1,r=e.length,i=ya(r),a=null==t;++n<r;)i[n]=a?U:ea(t,e[n]);return i}function Ue(t,e,n){return t==t&&(n!==U&&(t=t<=n?t:n),e!==U&&(t=t>=e?t:e)),t}function ze(t,e,n,r,i,s){var l,c=e&W,h=e&q,f=e&Y;if(n&&(l=i?n(t,r,i,s):n(t)),l!==U)return l;if(!Vi(t))return t;var d=Ps(t);if(d){if(l=function(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&Ia.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!c)return mr(t,l)}else{var p=Vo(t),v=p==St||p==Tt;if(Ds(t))return hr(t,c);if(p==Ct||p==vt||v&&!i){if(l=h||v?{}:Jr(t),!c)return h?function(t,e){return yr(t,zo(t),e)}(t,function(e,n){return e&&yr(t,ia(t),e)}(l)):function(t,e){return yr(t,Uo(t),e)}(t,Ne(l,t))}else{if(!tn[p])return i?t:{};l=function(t,e,n,r){var i=t.constructor;switch(p){case Rt:return fr(t);case _t:case bt:return new i(+t);case Nt:return function(t,e){var n=r?fr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t);case Bt:case Ft:case Ut:case zt:case Vt:case Ht:case Gt:case Wt:case qt:return dr(t,r);case Ot:return function(t,e,n){return g(r?n(D(t),W):D(t),a,new t.constructor)}(t,0,n);case Mt:case Pt:return new i(t);case At:return function(t){var e=new t.constructor(t.source,ye.exec(t));return e.lastIndex=t.lastIndex,e}(t);case It:return function(t,e,n){return g(r?n(N(t),W):N(t),o,new t.constructor)}(t,0,n);case Lt:return function(t){return ko?Sa(ko.call(t)):{}}(t)}}(t,0,ze,c)}}s||(s=new Ie);var m=s.get(t);if(m)return m;s.set(t,l);var y=d?U:(f?h?Wr:Gr:h?ia:ra)(t);return u(y||t,function(r,i){y&&(r=t[i=r]),je(l,i,ze(r,e,n,i,t,s))}),l}function Ve(t,e,n){var r=n.length;if(null==t)return!r;for(t=Sa(t);r--;){var i=n[r],a=t[i];if(a===U&&!(i in t)||!(0,e[i])(a))return!1}return!0}function He(t,e,n){if("function"!=typeof t)throw new Ma(V);return Wo(function(){t.apply(U,n)},e)}function Ge(t,e,n,r){var i=-1,a=h,o=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=d(e,k(n))),r?(a=f,o=!1):e.length>=z&&(a=E,o=!1,e=new Ae(e));t:for(;++i<s;){var c=t[i],p=null==n?c:n(c);if(c=r||0!==c?c:0,o&&p==p){for(var g=l;g--;)if(e[g]===p)continue t;u.push(c)}else a(e,p,r)||u.push(c)}return u}function Ye(t,e,n){for(var r=-1,i=t.length;++r<i;){var a=t[r],o=e(a);if(null!=o&&(s===U?o==o&&!Yi(o):n(o,s)))var s=o,u=a}return u}function $e(t,e){var n=[];return Ao(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function en(t,e,n,r,i){var a=-1,o=t.length;for(n||(n=ti),i||(i=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?en(s,e-1,n,r,i):p(i,s):r||(i[i.length]=s)}return i}function an(t,e){return t&&Po(t,e,ra)}function on(t,e){return t&&Lo(t,e,ra)}function un(t,e){return c(e,function(e){return Fi(t[e])})}function ln(t,e){for(var n=0,r=(e=lr(e,t)).length;null!=t&&n<r;)t=t[di(e[n++])];return n&&n==r?t:U}function hn(t,e,n){var r=e(t);return Ps(t)?r:p(r,n(t))}function fn(t){return null==t?t===U?Dt:kt:Xa&&Xa in Sa(t)?function(t){var e=Ia.call(t,Xa),n=t[Xa];try{t[Xa]=U;var r=!0}catch(t){}var i=Da.call(t);return r&&(e?t[Xa]=n:delete t[Xa]),i}(t):function(t){return Da.call(t)}(t)}function _n(t,e){return t>e}function Tn(t,e){return null!=t&&Ia.call(t,e)}function On(t,e){return null!=t&&e in Sa(t)}function Mn(t,e,n){for(var r=n?f:h,i=t[0].length,a=t.length,o=a,s=ya(a),u=1/0,l=[];o--;){var c=t[o];o&&e&&(c=d(c,k(e))),u=so(c.length,u),s[o]=!n&&(e||i>=120&&c.length>=120)?new Ae(o&&c):U}c=t[0];var p=-1,g=s[0];t:for(;++p<i&&l.length<u;){var v=c[p],m=e?e(v):v;if(v=n||0!==v?v:0,!(g?E(g,m):r(l,m,n))){for(o=a;--o;){var y=s[o];if(!(y?E(y,m):r(t[o],m,n)))continue t}g&&g.push(m),l.push(v)}}return l}function kn(t,e,n){var r=null==(t=li(t,e=lr(e,t)))?t:t[di(bi(e))];return null==r?U:s(r,t,n)}function Cn(t){return Hi(t)&&fn(t)==vt}function En(t,e,n,r,i){return t===e||(null==t||null==e||!Hi(t)&&!Hi(e)?t!=t&&e!=e:function(t,e,n,r,i,a){var o=Ps(t),s=Ps(e),u=o?mt:Vo(t),l=s?mt:Vo(e),c=(u=u==vt?Ct:u)==Ct,h=(l=l==vt?Ct:l)==Ct,f=u==l;if(f&&Ds(t)){if(!Ds(e))return!1;o=!0,c=!1}if(f&&!c)return a||(a=new Ie),o||Fs(t)?Vr(t,e,n,r,i,a):function(t,e,n,r,i,a,o){switch(u){case Nt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Rt:return!(t.byteLength!=e.byteLength||!a(new Ua(t),new Ua(e)));case _t:case bt:case Mt:return ji(+t,+e);case wt:return t.name==e.name&&t.message==e.message;case At:case Pt:return t==e+"";case Ot:var s=D;case It:if(s||(s=N),t.size!=e.size&&!(r&X))return!1;var l=o.get(t);if(l)return l==e;r|=$,o.set(t,e);var c=Vr(s(t),s(e),r,i,a,o);return o.delete(t),c;case Lt:if(ko)return ko.call(t)==ko.call(e)}return!1}(t,e,0,n,r,i,a);if(!(n&X)){var d=c&&Ia.call(t,"__wrapped__"),p=h&&Ia.call(e,"__wrapped__");if(d||p){var g=d?t.value():t,v=p?e.value():e;return a||(a=new Ie),i(g,v,n,r,a)}}return!!f&&(a||(a=new Ie),function(t,e,n,r,i,a){var o=n&X,s=Gr(t),u=s.length;if(u!=Gr(e).length&&!o)return!1;for(var l=u;l--;){var c=s[l];if(!(o?c in e:Ia.call(e,c)))return!1}var h=a.get(t);if(h&&a.get(e))return h==e;var f=!0;a.set(t,e),a.set(e,t);for(var d=o;++l<u;){var p=t[c=s[l]],g=e[c];if(r)var v=o?r(g,p,c,e,t,a):r(p,g,c,t,e,a);if(!(v===U?p===g||i(p,g,n,r,a):v)){f=!1;break}d||(d="constructor"==c)}if(f&&!d){var m=t.constructor,y=e.constructor;m!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y)&&(f=!1)}return a.delete(t),a.delete(e),f}(t,e,n,r,i,a))}(t,e,n,r,En,i))}function An(t,e,n,r){var i=n.length,a=i,o=!r;if(null==t)return!a;for(t=Sa(t);i--;){var s=n[i];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<a;){var u=(s=n[i])[0],l=t[u],c=s[1];if(o&&s[2]){if(l===U&&!(u in t))return!1}else{var h=new Ie;if(r)var f=r(l,c,u,t,e,h);if(!(f===U?En(c,l,X|$,r,h):f))return!1}}return!0}function In(t){return!(!Vi(t)||La&&La in t)&&(Fi(t)?Na:xe).test(pi(t))}function Pn(t){return"function"==typeof t?t:null==t?ha:"object"==typeof t?Ps(t)?Nn(t[0],t[1]):Rn(t):ga(t)}function Ln(t){if(!ai(t))return ao(t);var e=[];for(var n in Sa(t))Ia.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Dn(t,e){return t<e}function jn(t,e){var n=-1,r=Ri(t)?ya(t.length):[];return Ao(t,function(t,i,a){r[++n]=e(t,i,a)}),r}function Rn(t){var e=Zr(t);return 1==e.length&&e[0][2]?si(e[0][0],e[0][1]):function(n){return n===t||An(n,t,e)}}function Nn(t,e){return ri(t)&&oi(e)?si(di(t),e):function(n){var r=ea(n,t);return r===U&&r===e?na(n,t):En(e,r,X|$)}}function Bn(t,e,n,r,i){t!==e&&Po(e,function(a,o){if(Vi(a))i||(i=new Ie),function(t,e,n,r,i,a,o){var s=t[n],u=e[n],l=o.get(u);if(l)De(t,n,l);else{var c=a?a(s,u,n+"",t,e,o):U,h=c===U;if(h){var f=Ps(u),d=!f&&Ds(u),p=!f&&!d&&Fs(u);c=u,f||d||p?Ps(s)?c=s:Ni(s)?c=mr(s):d?(h=!1,c=hr(u,!0)):p?(h=!1,c=dr(u,!0)):c=[]:Wi(u)||Is(u)?(c=s,Is(s)?c=Ji(s):(!Vi(s)||r&&Fi(s))&&(c=Jr(u))):h=!1}h&&(o.set(u,c),i(c,u,r,a,o),o.delete(u)),De(t,n,c)}}(t,e,o,n,Bn,r,i);else{var s=r?r(t[o],a,o+"",t,e,i):U;s===U&&(s=a),De(t,o,s)}},ia)}function Fn(t,e){var n=t.length;if(n)return ei(e+=e<0?n:0,n)?t[e]:U}function Un(t,e,n){var r=-1;return e=d(e.length?e:[ha],k(Xr())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(jn(t,function(t,n,i){return{criteria:d(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,o=i.length,s=n.length;++r<o;){var u=pr(i[r],a[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)})}function zn(t,e,n){for(var r=-1,i=e.length,a={};++r<i;){var o=e[r],s=ln(t,o);n(s,o)&&Yn(a,lr(o,t),s)}return a}function Vn(t,e,n,r){var i=r?function(t,e,n,r){for(var i=n-1,a=t.length;++i<a;)if(r(t[i],e))return i;return-1}:_,a=-1,o=e.length,s=t;for(t===e&&(e=mr(e)),n&&(s=d(t,k(n)));++a<o;)for(var u=0,l=e[a],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==t&&Wa.call(s,u,1),Wa.call(t,u,1);return t}function Hn(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==a){var a=i;ei(i)?Wa.call(t,i,1):er(t,i)}}return t}function Gn(t,e){return t+to(co()*(e-t+1))}function Wn(t,e){var n="";if(!t||e<1||e>lt)return n;do{e%2&&(n+=t),(e=to(e/2))&&(t+=t)}while(e);return n}function qn(t,e){return qo(ui(t,e,ha),t+"")}function Yn(t,e,n,r){if(!Vi(t))return t;for(var i=-1,a=(e=lr(e,t)).length,o=a-1,s=t;null!=s&&++i<a;){var u=di(e[i]),l=n;if(i!=o){var c=s[u];(l=r?r(c,u,s):U)===U&&(l=Vi(c)?c:ei(e[i+1])?[]:{})}je(s,u,l),s=s[u]}return t}function Xn(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=ya(i);++r<i;)a[r]=t[r+e];return a}function $n(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=pt){for(;r<i;){var a=r+i>>>1,o=t[a];null!==o&&!Yi(o)&&(n?o<=e:o<e)?r=a+1:i=a}return i}return Zn(t,e,ha,n)}function Zn(t,e,n,r){e=n(e);for(var i=0,a=null==t?0:t.length,o=e!=e,s=null===e,u=Yi(e),l=e===U;i<a;){var c=to((i+a)/2),h=n(t[c]),f=h!==U,d=null===h,p=h==h,g=Yi(h);if(o)var v=r||p;else v=l?p&&(r||f):s?p&&f&&(r||!d):u?p&&f&&!d&&(r||!g):!d&&!g&&(r?h<=e:h<e);v?i=c+1:a=c}return so(a,dt)}function Qn(t,e){for(var n=-1,r=t.length,i=0,a=[];++n<r;){var o=t[n],s=e?e(o):o;if(!n||!ji(s,u)){var u=s;a[i++]=0===o?0:o}}return a}function Kn(t){return"number"==typeof t?t:Yi(t)?ht:+t}function Jn(t){if("string"==typeof t)return t;if(Ps(t))return d(t,Jn)+"";if(Yi(t))return Co?Co.call(t):"";var e=t+"";return"0"==e&&1/t==-ut?"-0":e}function tr(t,e,n){var r=-1,i=h,a=t.length,o=!0,s=[],u=s;if(n)o=!1,i=f;else if(a>=z){var l=e?null:Bo(t);if(l)return N(l);o=!1,i=E,u=new Ae}else u=e?[]:s;t:for(;++r<a;){var c=t[r],d=e?e(c):c;if(c=n||0!==c?c:0,o&&d==d){for(var p=u.length;p--;)if(u[p]===d)continue t;e&&u.push(d),s.push(c)}else i(u,d,n)||(u!==s&&u.push(d),s.push(c))}return s}function er(t,e){return null==(t=li(t,e=lr(e,t)))||delete t[di(bi(e))]}function nr(t,e,n,r){return Yn(t,e,n(ln(t,e)),r)}function rr(t,e,n,r){for(var i=t.length,a=r?i:-1;(r?a--:++a<i)&&e(t[a],a,t););return n?Xn(t,r?0:a,r?a+1:i):Xn(t,r?a+1:0,r?i:a)}function ir(t,e){var n=t;return n instanceof S&&(n=n.value()),g(e,function(t,e){return e.func.apply(e.thisArg,p([t],e.args))},n)}function ar(t,e,n){var r=t.length;if(r<2)return r?tr(t[0]):[];for(var i=-1,a=ya(r);++i<r;)for(var o=t[i],s=-1;++s<r;)s!=i&&(a[i]=Ge(a[i]||o,t[s],e,n));return tr(en(a,1),e,n)}function or(t,e,n){for(var r=-1,i=t.length,a=e.length,o={};++r<i;)n(o,t[r],r<a?e[r]:U);return o}function sr(t){return Ni(t)?t:[]}function ur(t){return"function"==typeof t?t:ha}function lr(t,e){return Ps(t)?t:ri(t,e)?[t]:Yo(ta(t))}function cr(t,e,n){var r=t.length;return n=n===U?r:n,!e&&n>=r?t:Xn(t,e,n)}function hr(t,e){if(e)return t.slice();var n=t.length,r=za?za(n):new t.constructor(n);return t.copy(r),r}function fr(t){var e=new t.constructor(t.byteLength);return new Ua(e).set(new Ua(t)),e}function dr(t,e){var n=e?fr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function pr(t,e){if(t!==e){var n=t!==U,r=null===t,i=t==t,a=Yi(t),o=e!==U,s=null===e,u=e==e,l=Yi(e);if(!s&&!l&&!a&&t>e||a&&o&&u&&!s&&!l||r&&o&&u||!n&&u||!i)return 1;if(!r&&!a&&!l&&t<e||l&&n&&i&&!r&&!a||s&&n&&i||!o&&i||!u)return-1}return 0}function gr(t,e,n,r){for(var i=-1,a=t.length,o=n.length,s=-1,u=e.length,l=oo(a-o,0),c=ya(u+l),h=!r;++s<u;)c[s]=e[s];for(;++i<o;)(h||i<a)&&(c[n[i]]=t[i]);for(;l--;)c[s++]=t[i++];return c}function vr(t,e,n,r){for(var i=-1,a=t.length,o=-1,s=n.length,u=-1,l=e.length,c=oo(a-s,0),h=ya(c+l),f=!r;++i<c;)h[i]=t[i];for(var d=i;++u<l;)h[d+u]=e[u];for(;++o<s;)(f||i<a)&&(h[d+n[o]]=t[i++]);return h}function mr(t,e){var n=-1,r=t.length;for(e||(e=ya(r));++n<r;)e[n]=t[n];return e}function yr(t,e,n,r){var i=!n;n||(n={});for(var a=-1,o=e.length;++a<o;){var s=e[a],u=r?r(n[s],t[s],s,n,t):U;u===U&&(u=t[s]),i?Be(n,s,u):je(n,s,u)}return n}function _r(t,e){return function(n,r){var i=Ps(n)?function(t,e,n,r){for(var i=-1,a=null==t?0:t.length;++i<a;){var o=t[i];e(r,o,n(o),t)}return r}:function(t,e,n,r){return Ao(t,function(t,i,a){e(r,t,n(t),a)}),r},a=e?e():{};return i(n,t,Xr(r,2),a)}}function br(t){return qn(function(e,n){var r=-1,i=n.length,a=i>1?n[i-1]:U,o=i>2?n[2]:U;for(a=t.length>3&&"function"==typeof a?(i--,a):U,o&&ni(n[0],n[1],o)&&(a=i<3?U:a,i=1),e=Sa(e);++r<i;){var s=n[r];s&&t(e,s,r,a)}return e})}function xr(t,e){return function(n,r){if(null==n)return n;if(!Ri(n))return t(n,r);for(var i=n.length,a=e?i:-1,o=Sa(n);(e?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function wr(t){return function(e,n,r){for(var i=-1,a=Sa(e),o=r(e),s=o.length;s--;){var u=o[t?s:++i];if(!1===n(a[u],u,a))break}return e}}function Sr(t){return function(e){var n=L(e=ta(e))?F(e):U,r=n?n[0]:e.charAt(0),i=n?cr(n,1).join(""):e.slice(1);return r[t]()+i}}function Tr(t){return function(e){return g(la(ua(e).replace(We,"")),t,"")}}function Or(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Eo(t.prototype),r=t.apply(n,e);return Vi(r)?r:n}}function Mr(t){return function(e,n,r){var i=Sa(e);if(!Ri(e)){var a=Xr(n,3);e=ra(e),n=function(t){return a(i[t],t,i)}}var o=t(e,n,r);return o>-1?i[a?e[o]:o]:U}}function kr(t){return Hr(function(e){var n=e.length,r=n,a=i.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new Ma(V);if(a&&!s&&"wrapper"==qr(o))var s=new i([],!0)}for(r=s?r:n;++r<n;){var u=qr(o=e[r]),l="wrapper"==u?Fo(o):U;s=l&&ii(l[0])&&l[1]==(rt|J|et|it)&&!l[4].length&&1==l[9]?s[qr(l[0])].apply(s,l[3]):1==o.length&&ii(o)?s[u]():s.thru(o)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&Ps(r))return s.plant(r).value();for(var i=0,a=n?e[i].apply(this,t):r;++i<n;)a=e[i].call(this,a);return a}})}function Cr(t,e,n,r,i,a,o,s,u,l){var c=e&rt,h=e&Z,f=e&Q,d=e&(J|tt),p=e&at,g=f?U:Or(t);return function v(){for(var m=arguments.length,y=ya(m),_=m;_--;)y[_]=arguments[_];if(d)var b=Yr(v),x=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(y,b);if(r&&(y=gr(y,r,i,d)),a&&(y=vr(y,a,o,d)),m-=x,d&&m<l){var w=R(y,b);return jr(t,e,Cr,v.placeholder,n,y,w,s,u,l-m)}var S=h?n:this,T=f?S[t]:t;return m=y.length,s?y=function(t,e){for(var n=t.length,r=so(e.length,n),i=mr(t);r--;){var a=e[r];t[r]=ei(a,n)?i[a]:U}return t}(y,s):p&&m>1&&y.reverse(),c&&u<m&&(y.length=u),this&&this!==sn&&this instanceof v&&(T=g||Or(T)),T.apply(S,y)}}function Er(t,e){return function(n,r){return function(t,e,n,r){return an(t,function(t,i,a){e(r,n(t),i,a)}),r}(n,t,e(r),{})}}function Ar(t,e){return function(n,r){var i;if(n===U&&r===U)return e;if(n!==U&&(i=n),r!==U){if(i===U)return r;"string"==typeof n||"string"==typeof r?(n=Jn(n),r=Jn(r)):(n=Kn(n),r=Kn(r)),i=t(n,r)}return i}}function Ir(t){return Hr(function(e){return e=d(e,k(Xr())),qn(function(n){var r=this;return t(e,function(t){return s(t,r,n)})})})}function Pr(t,e){var n=(e=e===U?" ":Jn(e)).length;if(n<2)return n?Wn(e,t):e;var r=Wn(e,Ja(t/B(e)));return L(e)?cr(F(r),0,t).join(""):r.slice(0,t)}function Lr(t){return function(e,n,r){return r&&"number"!=typeof r&&ni(e,n,r)&&(n=r=U),e=$i(e),n===U?(n=e,e=0):n=$i(n),function(t,e,n,r){for(var i=-1,a=oo(Ja((e-t)/(n||1)),0),o=ya(a);a--;)o[r?a:++i]=t,t+=n;return o}(e,n,r=r===U?e<n?1:-1:$i(r),t)}}function Dr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Ki(e),n=Ki(n)),t(e,n)}}function jr(t,e,n,r,i,a,o,s,u,l){var c=e&J;e|=c?et:nt,(e&=~(c?nt:et))&K||(e&=~(Z|Q));var h=[t,e,i,c?a:U,c?o:U,c?U:a,c?U:o,s,u,l],f=n.apply(U,h);return ii(t)&&Go(f,h),f.placeholder=r,ci(f,t,e)}function Rr(t){var e=wa[t];return function(t,n){if(t=Ki(t),n=null==n?0:so(Zi(n),292)){var r=(ta(t)+"e").split("e");return+((r=(ta(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}function Nr(t){return function(e){var n=Vo(e);return n==Ot?D(e):n==It?function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}(e):function(t,e){return d(e,function(e){return[e,t[e]]})}(e,t(e))}}function Br(t,e,n,r,i,a,o,u){var l=e&Q;if(!l&&"function"!=typeof t)throw new Ma(V);var c=r?r.length:0;if(c||(e&=~(et|nt),r=i=U),o=o===U?o:oo(Zi(o),0),u=u===U?u:Zi(u),c-=i?i.length:0,e&nt){var h=r,f=i;r=i=U}var d=l?U:Fo(t),p=[t,e,n,r,i,h,f,a,o,u];if(d&&function(t,e){var n=t[1],r=e[1],i=n|r;if(!(i<(Z|Q|rt)||r==rt&&n==J||r==rt&&n==it&&t[7].length<=e[8]||r==(rt|it)&&e[7].length<=e[8]&&n==J))return t;r&Z&&(t[2]=e[2],i|=n&Z?0:K);var a=e[3];if(a){var o=t[3];t[3]=o?gr(o,a,e[4]):a,t[4]=o?R(t[3],G):e[4]}(a=e[5])&&(t[5]=(o=t[5])?vr(o,a,e[6]):a,t[6]=o?R(t[5],G):e[6]),(a=e[7])&&(t[7]=a),r&rt&&(t[8]=null==t[8]?e[8]:so(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(p,d),t=p[0],e=p[1],n=p[2],r=p[3],i=p[4],!(u=p[9]=p[9]===U?l?0:t.length:oo(p[9]-c,0))&&e&(J|tt)&&(e&=~(J|tt)),e&&e!=Z)g=e==J||e==tt?function(t,e,n){var r=Or(t);return function i(){for(var a=arguments.length,o=ya(a),u=a,l=Yr(i);u--;)o[u]=arguments[u];var c=a<3&&o[0]!==l&&o[a-1]!==l?[]:R(o,l);return(a-=c.length)<n?jr(t,e,Cr,i.placeholder,U,o,c,U,U,n-a):s(this&&this!==sn&&this instanceof i?r:t,this,o)}}(t,e,u):e!=et&&e!=(Z|et)||i.length?Cr.apply(U,p):function(t,e,n,r){var i=e&Z,a=Or(t);return function e(){for(var o=-1,u=arguments.length,l=-1,c=r.length,h=ya(c+u),f=this&&this!==sn&&this instanceof e?a:t;++l<c;)h[l]=r[l];for(;u--;)h[l++]=arguments[++o];return s(f,i?n:this,h)}}(t,e,n,r);else var g=function(t,e,n){var r=e&Z,i=Or(t);return function e(){return(this&&this!==sn&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return ci((d?Do:Go)(g,p),t,e)}function Fr(t,e,n,r){return t===U||ji(t,Ca[n])&&!Ia.call(r,n)?e:t}function Ur(t,e,n,r,i,a){return Vi(t)&&Vi(e)&&(a.set(e,t),Bn(t,e,U,Ur,a),a.delete(e)),t}function zr(t){return Wi(t)?U:t}function Vr(t,e,n,r,i,a){var o=n&X,s=t.length,u=e.length;if(s!=u&&!(o&&u>s))return!1;var l=a.get(t);if(l&&a.get(e))return l==e;var c=-1,h=!0,f=n&$?new Ae:U;for(a.set(t,e),a.set(e,t);++c<s;){var d=t[c],p=e[c];if(r)var g=o?r(p,d,c,e,t,a):r(d,p,c,t,e,a);if(g!==U){if(g)continue;h=!1;break}if(f){if(!v(e,function(t,e){if(!E(f,e)&&(d===t||i(d,t,n,r,a)))return f.push(e)})){h=!1;break}}else if(d!==p&&!i(d,p,n,r,a)){h=!1;break}}return a.delete(t),a.delete(e),h}function Hr(t){return qo(ui(t,U,yi),t+"")}function Gr(t){return hn(t,ra,Uo)}function Wr(t){return hn(t,ia,zo)}function qr(t){for(var e=t.name+"",n=bo[e],r=Ia.call(bo,e)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==t)return i.name}return e}function Yr(t){return(Ia.call(n,"placeholder")?n:t).placeholder}function Xr(){var t=n.iteratee||fa;return t=t===fa?Pn:t,arguments.length?t(arguments[0],arguments[1]):t}function $r(t,e){var n=t.__data__;return function(t){var n=typeof e;return"string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==e:null===e}()?n["string"==typeof e?"string":"hash"]:n.map}function Zr(t){for(var e=ra(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,oi(i)]}return e}function Qr(t,e){var n=function(t,e){return null==t?U:t[e]}(t,e);return In(n)?n:U}function Kr(t,e,n){for(var r=-1,i=(e=lr(e,t)).length,a=!1;++r<i;){var o=di(e[r]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++r!=i?a:!!(i=null==t?0:t.length)&&zi(i)&&ei(o,i)&&(Ps(t)||Is(t))}function Jr(t){return"function"!=typeof t.constructor||ai(t)?{}:Eo(Va(t))}function ti(t){return Ps(t)||Is(t)||!!(qa&&t&&t[qa])}function ei(t,e){return!!(e=null==e?lt:e)&&("number"==typeof t||Se.test(t))&&t>-1&&t%1==0&&t<e}function ni(t,e,n){if(!Vi(n))return!1;var r=typeof e;return!!("number"==r?Ri(n)&&ei(e,n.length):"string"==r&&e in n)&&ji(n[e],t)}function ri(t,e){if(Ps(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Yi(t))||ie.test(t)||!re.test(t)||null!=e&&t in Sa(e)}function ii(t){var e=qr(t),r=n[e];if("function"!=typeof r||!(e in S.prototype))return!1;if(t===r)return!0;var i=Fo(r);return!!i&&t===i[0]}function ai(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ca)}function oi(t){return t==t&&!Vi(t)}function si(t,e){return function(n){return null!=n&&n[t]===e&&(e!==U||t in Sa(n))}}function ui(t,e,n){return e=oo(e===U?t.length-1:e,0),function(){for(var r=arguments,i=-1,a=oo(r.length-e,0),o=ya(a);++i<a;)o[i]=r[e+i];i=-1;for(var u=ya(e+1);++i<e;)u[i]=r[i];return u[e]=n(o),s(t,this,u)}}function li(t,e){return e.length<2?t:ln(t,Xn(e,0,-1))}function ci(t,e,n){var r=e+"";return qo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(fe,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return u(gt,function(n){var r="_."+n[0];e&n[1]&&!h(t,r)&&t.push(r)}),t.sort()}(function(t){var e=r.match(de);return e?e[1].split(pe):[]}(),n)))}function hi(t){var e=0,n=0;return function(){var r=uo(),i=st-(r-n);if(n=r,i>0){if(++e>=ot)return arguments[0]}else e=0;return t.apply(U,arguments)}}function fi(t,e){var n=-1,r=t.length,i=r-1;for(e=e===U?r:e;++n<e;){var a=Gn(n,i),o=t[a];t[a]=t[n],t[n]=o}return t.length=e,t}function di(t){if("string"==typeof t||Yi(t))return t;var e=t+"";return"0"==e&&1/t==-ut?"-0":e}function pi(t){if(null!=t){try{return Aa.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function gi(t){if(t instanceof S)return t.clone();var e=new i(t.__wrapped__,t.__chain__);return e.__actions__=mr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function vi(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Zi(n);return i<0&&(i=oo(r+i,0)),y(t,Xr(e,3),i)}function mi(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==U&&(i=Zi(n),i=n<0?oo(r+i,0):so(i,r-1)),y(t,Xr(e,3),i,!0)}function yi(t){return null!=t&&t.length?en(t,1):[]}function _i(t){return t&&t.length?t[0]:U}function bi(t){var e=null==t?0:t.length;return e?t[e-1]:U}function xi(t,e){return t&&t.length&&e&&e.length?Vn(t,e):t}function wi(t){return null==t?t:ho.call(t)}function Si(t){if(!t||!t.length)return[];var e=0;return t=c(t,function(t){if(Ni(t))return e=oo(t.length,e),!0}),M(e,function(e){return d(t,w(e))})}function Ti(t,e){if(!t||!t.length)return[];var n=Si(t);return null==e?n:d(n,function(t){return s(e,U,t)})}function Oi(t){var e=n(t);return e.__chain__=!0,e}function Mi(t,e){return e(t)}function ki(t,e){return(Ps(t)?u:Ao)(t,Xr(e,3))}function Ci(t,e){return(Ps(t)?function(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}:Io)(t,Xr(e,3))}function Ei(t,e){return(Ps(t)?d:jn)(t,Xr(e,3))}function Ai(t,e,n){return e=n?U:e,Br(t,rt,U,U,U,U,e=t&&null==e?t.length:e)}function Ii(t,e){var n;if("function"!=typeof e)throw new Ma(V);return t=Zi(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=U),n}}function Pi(t,e,n){function r(e){var n=u,r=l;return u=l=U,p=e,h=t.apply(r,n)}function i(t){var n=t-d;return d===U||n>=e||n<0||v&&t-p>=c}function a(){var t=bs();if(i(t))return o(t);f=Wo(a,function(t){var n=e-(t-d);return v?so(n,c-(t-p)):n}(t))}function o(t){return f=U,m&&u?r(t):(u=l=U,h)}function s(){var t=bs(),n=i(t);if(u=arguments,l=this,d=t,n){if(f===U)return function(t){return p=t,f=Wo(a,e),g?r(t):h}(d);if(v)return f=Wo(a,e),r(d)}return f===U&&(f=Wo(a,e)),h}var u,l,c,h,f,d,p=0,g=!1,v=!1,m=!0;if("function"!=typeof t)throw new Ma(V);return e=Ki(e)||0,Vi(n)&&(g=!!n.leading,c=(v="maxWait"in n)?oo(Ki(n.maxWait)||0,e):c,m="trailing"in n?!!n.trailing:m),s.cancel=function(){f!==U&&No(f),p=0,u=d=l=f=U},s.flush=function(){return f===U?h:o(bs())},s}function Li(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ma(V);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Li.Cache||Ee),n}function Di(t){if("function"!=typeof t)throw new Ma(V);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function ji(t,e){return t===e||t!=t&&e!=e}function Ri(t){return null!=t&&zi(t.length)&&!Fi(t)}function Ni(t){return Hi(t)&&Ri(t)}function Bi(t){if(!Hi(t))return!1;var e=fn(t);return e==wt||e==xt||"string"==typeof t.message&&"string"==typeof t.name&&!Wi(t)}function Fi(t){if(!Vi(t))return!1;var e=fn(t);return e==St||e==Tt||e==yt||e==Et}function Ui(t){return"number"==typeof t&&t==Zi(t)}function zi(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=lt}function Vi(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Hi(t){return null!=t&&"object"==typeof t}function Gi(t){return"number"==typeof t||Hi(t)&&fn(t)==Mt}function Wi(t){if(!Hi(t)||fn(t)!=Ct)return!1;var e=Va(t);if(null===e)return!0;var n=Ia.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Aa.call(n)==ja}function qi(t){return"string"==typeof t||!Ps(t)&&Hi(t)&&fn(t)==Pt}function Yi(t){return"symbol"==typeof t||Hi(t)&&fn(t)==Lt}function Xi(t){if(!t)return[];if(Ri(t))return qi(t)?F(t):mr(t);if(Ya&&t[Ya])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[Ya]());var e=Vo(t);return(e==Ot?D:e==It?N:oa)(t)}function $i(t){return t?(t=Ki(t))===ut||t===-ut?(t<0?-1:1)*ct:t==t?t:0:0===t?t:0}function Zi(t){var e=$i(t),n=e%1;return e==e?n?e-n:e:0}function Qi(t){return t?Ue(Zi(t),0,ft):0}function Ki(t){if("number"==typeof t)return t;if(Yi(t))return ht;if(Vi(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Vi(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(le,"");var n=be.test(t);return n||we.test(t)?rn(t.slice(2),n?2:8):_e.test(t)?ht:+t}function Ji(t){return yr(t,ia(t))}function ta(t){return null==t?"":Jn(t)}function ea(t,e,n){var r=null==t?U:ln(t,e);return r===U?n:r}function na(t,e){return null!=t&&Kr(t,e,On)}function ra(t){return Ri(t)?Pe(t):Ln(t)}function ia(t){return Ri(t)?Pe(t,!0):function(t){if(!Vi(t))return function(t){var e=[];if(null!=t)for(var n in Sa(t))e.push(n);return e}(t);var e=ai(t),n=[];for(var r in t)("constructor"!=r||!e&&Ia.call(t,r))&&n.push(r);return n}(t)}function aa(t,e){if(null==t)return{};var n=d(Wr(t),function(t){return[t]});return e=Xr(e),zn(t,n,function(t,n){return e(t,n[0])})}function oa(t){return null==t?[]:C(t,ra(t))}function sa(t){return hu(ta(t).toLowerCase())}function ua(t){return(t=ta(t))&&t.replace(Te,bn).replace(qe,"")}function la(t,e,n){return t=ta(t),(e=n?U:e)===U?function(t){return Ze.test(t)}(t)?function(t){return t.match(Xe)||[]}(t):function(t){return t.match(ge)||[]}(t):t.match(e)||[]}function ca(t){return function(){return t}}function ha(t){return t}function fa(t){return Pn("function"==typeof t?t:ze(t,W))}function da(t,e,n){var r=ra(e),i=un(e,r);null!=n||Vi(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=un(e,ra(e)));var a=!(Vi(n)&&"chain"in n&&!n.chain),o=Fi(t);return u(i,function(n){var r=e[n];t[n]=r,o&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__);return(n.__actions__=mr(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,p([this.value()],arguments))})}),t}function pa(){}function ga(t){return ri(t)?w(di(t)):function(t){return function(e){return ln(e,t)}}(t)}function va(){return[]}function ma(){return!1}var ya=(e=null==e?sn:Sn.defaults(sn.Object(),e,Sn.pick(sn,Qe))).Array,_a=e.Date,ba=e.Error,xa=e.Function,wa=e.Math,Sa=e.Object,Ta=e.RegExp,Oa=e.String,Ma=e.TypeError,ka=ya.prototype,Ca=Sa.prototype,Ea=e["__core-js_shared__"],Aa=xa.prototype.toString,Ia=Ca.hasOwnProperty,Pa=0,La=function(){var t=/[^.]+$/.exec(Ea&&Ea.keys&&Ea.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Da=Ca.toString,ja=Aa.call(Sa),Ra=sn._,Na=Ta("^"+Aa.call(Ia).replace(se,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ba=cn?e.Buffer:U,Fa=e.Symbol,Ua=e.Uint8Array,za=Ba?Ba.allocUnsafe:U,Va=j(Sa.getPrototypeOf,Sa),Ha=Sa.create,Ga=Ca.propertyIsEnumerable,Wa=ka.splice,qa=Fa?Fa.isConcatSpreadable:U,Ya=Fa?Fa.iterator:U,Xa=Fa?Fa.toStringTag:U,$a=function(){try{var t=Qr(Sa,"defineProperty");return t({},"",{}),t}catch(t){}}(),Za=e.clearTimeout!==sn.clearTimeout&&e.clearTimeout,Qa=_a&&_a.now!==sn.Date.now&&_a.now,Ka=e.setTimeout!==sn.setTimeout&&e.setTimeout,Ja=wa.ceil,to=wa.floor,eo=Sa.getOwnPropertySymbols,no=Ba?Ba.isBuffer:U,ro=e.isFinite,io=ka.join,ao=j(Sa.keys,Sa),oo=wa.max,so=wa.min,uo=_a.now,lo=e.parseInt,co=wa.random,ho=ka.reverse,fo=Qr(e,"DataView"),po=Qr(e,"Map"),go=Qr(e,"Promise"),vo=Qr(e,"Set"),mo=Qr(e,"WeakMap"),yo=Qr(Sa,"create"),_o=mo&&new mo,bo={},xo=pi(fo),wo=pi(po),So=pi(go),To=pi(vo),Oo=pi(mo),Mo=Fa?Fa.prototype:U,ko=Mo?Mo.valueOf:U,Co=Mo?Mo.toString:U,Eo=function(){function t(){}return function(e){if(!Vi(e))return{};if(Ha)return Ha(e);t.prototype=e;var n=new t;return t.prototype=U,n}}();n.templateSettings={escape:te,evaluate:ee,interpolate:ne,variable:"",imports:{_:n}},(n.prototype=r.prototype).constructor=n,(i.prototype=Eo(r.prototype)).constructor=i,(S.prototype=Eo(r.prototype)).constructor=S,ke.prototype.clear=function(){this.__data__=yo?yo(null):{},this.size=0},ke.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ke.prototype.get=function(t){var e=this.__data__;if(yo){var n=e[t];return n===H?U:n}return Ia.call(e,t)?e[t]:U},ke.prototype.has=function(t){var e=this.__data__;return yo?e[t]!==U:Ia.call(e,t)},ke.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=yo&&e===U?H:e,this},Ce.prototype.clear=function(){this.__data__=[],this.size=0},Ce.prototype.delete=function(t){var e=this.__data__,n=Re(e,t);return!(n<0||(n==e.length-1?e.pop():Wa.call(e,n,1),--this.size,0))},Ce.prototype.get=function(t){var e=this.__data__,n=Re(e,t);return n<0?U:e[n][1]},Ce.prototype.has=function(t){return Re(this.__data__,t)>-1},Ce.prototype.set=function(t,e){var n=this.__data__,r=Re(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Ee.prototype.clear=function(){this.size=0,this.__data__={hash:new ke,map:new(po||Ce),string:new ke}},Ee.prototype.delete=function(t){var e=$r(this,t).delete(t);return this.size-=e?1:0,e},Ee.prototype.get=function(t){return $r(this,t).get(t)},Ee.prototype.has=function(t){return $r(this,t).has(t)},Ee.prototype.set=function(t,e){var n=$r(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Ae.prototype.add=Ae.prototype.push=function(t){return this.__data__.set(t,H),this},Ae.prototype.has=function(t){return this.__data__.has(t)},Ie.prototype.clear=function(){this.__data__=new Ce,this.size=0},Ie.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Ie.prototype.get=function(t){return this.__data__.get(t)},Ie.prototype.has=function(t){return this.__data__.has(t)},Ie.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Ce){var r=n.__data__;if(!po||r.length<z-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Ee(r)}return n.set(t,e),this.size=n.size,this};var Ao=xr(an),Io=xr(on,!0),Po=wr(),Lo=wr(!0),Do=_o?function(t,e){return _o.set(t,e),t}:ha,jo=$a?function(t,e){return $a(t,"toString",{configurable:!0,enumerable:!1,value:ca(e),writable:!0})}:ha,Ro=qn,No=Za||function(t){return sn.clearTimeout(t)},Bo=vo&&1/N(new vo([,-0]))[1]==ut?function(t){return new vo(t)}:pa,Fo=_o?function(t){return _o.get(t)}:pa,Uo=eo?function(t){return null==t?[]:(t=Sa(t),c(eo(t),function(e){return Ga.call(t,e)}))}:va,zo=eo?function(t){for(var e=[];t;)p(e,Uo(t)),t=Va(t);return e}:va,Vo=fn;(fo&&Vo(new fo(new ArrayBuffer(1)))!=Nt||po&&Vo(new po)!=Ot||go&&"[object Promise]"!=Vo(go.resolve())||vo&&Vo(new vo)!=It||mo&&Vo(new mo)!=jt)&&(Vo=function(t){var e=fn(t),n=e==Ct?t.constructor:U,r=n?pi(n):"";if(r)switch(r){case xo:return Nt;case wo:return Ot;case So:return"[object Promise]";case To:return It;case Oo:return jt}return e});var Ho=Ea?Fi:ma,Go=hi(Do),Wo=Ka||function(t,e){return sn.setTimeout(t,e)},qo=hi(jo),Yo=function(t){var e=Li(function(t){var e=[];return ae.test(t)&&e.push(""),t.replace(oe,function(t,n,r,i){e.push(r?i.replace(ve,"$1"):n||t)}),e},function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}(),Xo=qn(function(t,e){return Ni(t)?Ge(t,en(e,1,Ni,!0)):[]}),$o=qn(function(t,e){var n=bi(e);return Ni(n)&&(n=U),Ni(t)?Ge(t,en(e,1,Ni,!0),Xr(n,2)):[]}),Zo=qn(function(t,e){var n=bi(e);return Ni(n)&&(n=U),Ni(t)?Ge(t,en(e,1,Ni,!0),U,n):[]}),Qo=qn(function(t){var e=d(t,sr);return e.length&&e[0]===t[0]?Mn(e):[]}),Ko=qn(function(t){var e=bi(t),n=d(t,sr);return e===bi(n)?e=U:n.pop(),n.length&&n[0]===t[0]?Mn(n,Xr(e,2)):[]}),Jo=qn(function(t){var e=bi(t),n=d(t,sr);return(e="function"==typeof e?e:U)&&n.pop(),n.length&&n[0]===t[0]?Mn(n,U,e):[]}),ts=qn(xi),es=Hr(function(t,e){var n=null==t?0:t.length,r=Fe(t,e);return Hn(t,d(e,function(t){return ei(t,n)?+t:t}).sort(pr)),r}),ns=qn(function(t){return tr(en(t,1,Ni,!0))}),rs=qn(function(t){var e=bi(t);return Ni(e)&&(e=U),tr(en(t,1,Ni,!0),Xr(e,2))}),is=qn(function(t){var e=bi(t);return e="function"==typeof e?e:U,tr(en(t,1,Ni,!0),U,e)}),as=qn(function(t,e){return Ni(t)?Ge(t,e):[]}),os=qn(function(t){return ar(c(t,Ni))}),ss=qn(function(t){var e=bi(t);return Ni(e)&&(e=U),ar(c(t,Ni),Xr(e,2))}),us=qn(function(t){var e=bi(t);return e="function"==typeof e?e:U,ar(c(t,Ni),U,e)}),ls=qn(Si),cs=qn(function(t){var e=t.length,n=e>1?t[e-1]:U;return Ti(t,n="function"==typeof n?(t.pop(),n):U)}),hs=Hr(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,a=function(e){return Fe(e,t)};return!(e>1||this.__actions__.length)&&r instanceof S&&ei(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Mi,args:[a],thisArg:U}),new i(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(U),t})):this.thru(a)}),fs=_r(function(t,e,n){Ia.call(t,n)?++t[n]:Be(t,n,1)}),ds=Mr(vi),ps=Mr(mi),gs=_r(function(t,e,n){Ia.call(t,n)?t[n].push(e):Be(t,n,[e])}),vs=qn(function(t,e,n){var r=-1,i="function"==typeof e,a=Ri(t)?ya(t.length):[];return Ao(t,function(t){a[++r]=i?s(e,t,n):kn(t,e,n)}),a}),ms=_r(function(t,e,n){Be(t,n,e)}),ys=_r(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),_s=qn(function(t,e){if(null==t)return[];var n=e.length;return n>1&&ni(t,e[0],e[1])?e=[]:n>2&&ni(e[0],e[1],e[2])&&(e=[e[0]]),Un(t,en(e,1),[])}),bs=Qa||function(){return sn.Date.now()},xs=qn(function(t,e,n){var r=Z;if(n.length){var i=R(n,Yr(xs));r|=et}return Br(t,r,e,n,i)}),ws=qn(function(t,e,n){var r=Z|Q;if(n.length){var i=R(n,Yr(ws));r|=et}return Br(e,r,t,n,i)}),Ss=qn(function(t,e){return He(t,1,e)}),Ts=qn(function(t,e,n){return He(t,Ki(e)||0,n)});Li.Cache=Ee;var Os=Ro(function(t,e){var n=(e=1==e.length&&Ps(e[0])?d(e[0],k(Xr())):d(en(e,1),k(Xr()))).length;return qn(function(r){for(var i=-1,a=so(r.length,n);++i<a;)r[i]=e[i].call(this,r[i]);return s(t,this,r)})}),Ms=qn(function(t,e){var n=R(e,Yr(Ms));return Br(t,et,U,e,n)}),ks=qn(function(t,e){var n=R(e,Yr(ks));return Br(t,nt,U,e,n)}),Cs=Hr(function(t,e){return Br(t,it,U,U,U,e)}),Es=Dr(_n),As=Dr(function(t,e){return t>=e}),Is=Cn(function(){return arguments}())?Cn:function(t){return Hi(t)&&Ia.call(t,"callee")&&!Ga.call(t,"callee")},Ps=ya.isArray,Ls=dn?k(dn):function(t){return Hi(t)&&fn(t)==Rt},Ds=no||ma,js=pn?k(pn):function(t){return Hi(t)&&fn(t)==bt},Rs=gn?k(gn):function(t){return Hi(t)&&Vo(t)==Ot},Ns=vn?k(vn):function(t){return Hi(t)&&fn(t)==At},Bs=mn?k(mn):function(t){return Hi(t)&&Vo(t)==It},Fs=yn?k(yn):function(t){return Hi(t)&&zi(t.length)&&!!Je[fn(t)]},Us=Dr(Dn),zs=Dr(function(t,e){return t<=e}),Vs=br(function(t,e){if(ai(e)||Ri(e))yr(e,ra(e),t);else for(var n in e)Ia.call(e,n)&&je(t,n,e[n])}),Hs=br(function(t,e){yr(e,ia(e),t)}),Gs=br(function(t,e,n,r){yr(e,ia(e),t,r)}),Ws=br(function(t,e,n,r){yr(e,ra(e),t,r)}),qs=Hr(Fe),Ys=qn(function(t){return t.push(U,Fr),s(Gs,U,t)}),Xs=qn(function(t){return t.push(U,Ur),s(Js,U,t)}),$s=Er(function(t,e,n){t[e]=n},ca(ha)),Zs=Er(function(t,e,n){Ia.call(t,e)?t[e].push(n):t[e]=[n]},Xr),Qs=qn(kn),Ks=br(function(t,e,n){Bn(t,e,n)}),Js=br(function(t,e,n,r){Bn(t,e,n,r)}),tu=Hr(function(t,e){var n={};if(null==t)return n;var r=!1;e=d(e,function(e){return e=lr(e,t),r||(r=e.length>1),e}),yr(t,Wr(t),n),r&&(n=ze(n,W|q|Y,zr));for(var i=e.length;i--;)er(n,e[i]);return n}),eu=Hr(function(t,e){return null==t?{}:function(t,e){return zn(t,e,function(e,n){return na(t,n)})}(t,e)}),nu=Nr(ra),ru=Nr(ia),iu=Tr(function(t,e,n){return e=e.toLowerCase(),t+(n?sa(e):e)}),au=Tr(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),ou=Tr(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),su=Sr("toLowerCase"),uu=Tr(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),lu=Tr(function(t,e,n){return t+(n?" ":"")+hu(e)}),cu=Tr(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),hu=Sr("toUpperCase"),fu=qn(function(t,e){try{return s(t,U,e)}catch(t){return Bi(t)?t:new ba(t)}}),du=Hr(function(t,e){return u(e,function(e){e=di(e),Be(t,e,xs(t[e],t))}),t}),pu=kr(),gu=kr(!0),vu=qn(function(t,e){return function(n){return kn(n,t,e)}}),mu=qn(function(t,e){return function(n){return kn(t,n,e)}}),yu=Ir(d),_u=Ir(l),bu=Ir(v),xu=Lr(),wu=Lr(!0),Su=Ar(function(t,e){return t+e},0),Tu=Rr("ceil"),Ou=Ar(function(t,e){return t/e},1),Mu=Rr("floor"),ku=Ar(function(t,e){return t*e},1),Cu=Rr("round"),Eu=Ar(function(t,e){return t-e},0);return n.after=function(t,e){if("function"!=typeof e)throw new Ma(V);return t=Zi(t),function(){if(--t<1)return e.apply(this,arguments)}},n.ary=Ai,n.assign=Vs,n.assignIn=Hs,n.assignInWith=Gs,n.assignWith=Ws,n.at=qs,n.before=Ii,n.bind=xs,n.bindAll=du,n.bindKey=ws,n.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ps(t)?t:[t]},n.chain=Oi,n.chunk=function(t,e,n){e=(n?ni(t,e,n):e===U)?1:oo(Zi(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,a=0,o=ya(Ja(r/e));i<r;)o[a++]=Xn(t,i,i+=e);return o},n.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var a=t[e];a&&(i[r++]=a)}return i},n.concat=function(){var t=arguments.length;if(!t)return[];for(var e=ya(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return p(Ps(n)?mr(n):[n],en(e,1))},n.cond=function(t){var e=null==t?0:t.length,n=Xr();return t=e?d(t,function(t){if("function"!=typeof t[1])throw new Ma(V);return[n(t[0]),t[1]]}):[],qn(function(n){for(var r=-1;++r<e;){var i=t[r];if(s(i[0],this,n))return s(i[1],this,n)}})},n.conforms=function(t){return function(t){var e=ra(t);return function(n){return Ve(n,t,e)}}(ze(t,W))},n.constant=ca,n.countBy=fs,n.create=function(t,e){var n=Eo(t);return null==e?n:Ne(n,e)},n.curry=function t(e,n,r){var i=Br(e,J,U,U,U,U,U,n=r?U:n);return i.placeholder=t.placeholder,i},n.curryRight=function t(e,n,r){var i=Br(e,tt,U,U,U,U,U,n=r?U:n);return i.placeholder=t.placeholder,i},n.debounce=Pi,n.defaults=Ys,n.defaultsDeep=Xs,n.defer=Ss,n.delay=Ts,n.difference=Xo,n.differenceBy=$o,n.differenceWith=Zo,n.drop=function(t,e,n){var r=null==t?0:t.length;return r?Xn(t,(e=n||e===U?1:Zi(e))<0?0:e,r):[]},n.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Xn(t,0,(e=r-(e=n||e===U?1:Zi(e)))<0?0:e):[]},n.dropRightWhile=function(t,e){return t&&t.length?rr(t,Xr(e,3),!0,!0):[]},n.dropWhile=function(t,e){return t&&t.length?rr(t,Xr(e,3),!0):[]},n.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&ni(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=Zi(n))<0&&(n=-n>i?0:i+n),(r=r===U||r>i?i:Zi(r))<0&&(r+=i),r=n>r?0:Qi(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},n.filter=function(t,e){return(Ps(t)?c:$e)(t,Xr(e,3))},n.flatMap=function(t,e){return en(Ei(t,e),1)},n.flatMapDeep=function(t,e){return en(Ei(t,e),ut)},n.flatMapDepth=function(t,e,n){return n=n===U?1:Zi(n),en(Ei(t,e),n)},n.flatten=yi,n.flattenDeep=function(t){return null!=t&&t.length?en(t,ut):[]},n.flattenDepth=function(t,e){return null!=t&&t.length?en(t,e=e===U?1:Zi(e)):[]},n.flip=function(t){return Br(t,at)},n.flow=pu,n.flowRight=gu,n.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},n.functions=function(t){return null==t?[]:un(t,ra(t))},n.functionsIn=function(t){return null==t?[]:un(t,ia(t))},n.groupBy=gs,n.initial=function(t){return null!=t&&t.length?Xn(t,0,-1):[]},n.intersection=Qo,n.intersectionBy=Ko,n.intersectionWith=Jo,n.invert=$s,n.invertBy=Zs,n.invokeMap=vs,n.iteratee=fa,n.keyBy=ms,n.keys=ra,n.keysIn=ia,n.map=Ei,n.mapKeys=function(t,e){var n={};return e=Xr(e,3),an(t,function(t,r,i){Be(n,e(t,r,i),t)}),n},n.mapValues=function(t,e){var n={};return e=Xr(e,3),an(t,function(t,r,i){Be(n,r,e(t,r,i))}),n},n.matches=function(t){return Rn(ze(t,W))},n.matchesProperty=function(t,e){return Nn(t,ze(e,W))},n.memoize=Li,n.merge=Ks,n.mergeWith=Js,n.method=vu,n.methodOf=mu,n.mixin=da,n.negate=Di,n.nthArg=function(t){return t=Zi(t),qn(function(e){return Fn(e,t)})},n.omit=tu,n.omitBy=function(t,e){return aa(t,Di(Xr(e)))},n.once=function(t){return Ii(2,t)},n.orderBy=function(t,e,n,r){return null==t?[]:(Ps(e)||(e=null==e?[]:[e]),Ps(n=r?U:n)||(n=null==n?[]:[n]),Un(t,e,n))},n.over=yu,n.overArgs=Os,n.overEvery=_u,n.overSome=bu,n.partial=Ms,n.partialRight=ks,n.partition=ys,n.pick=eu,n.pickBy=aa,n.property=ga,n.propertyOf=function(t){return function(e){return null==t?U:ln(t,e)}},n.pull=ts,n.pullAll=xi,n.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Vn(t,e,Xr(n,2)):t},n.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Vn(t,e,U,n):t},n.pullAt=es,n.range=xu,n.rangeRight=wu,n.rearg=Cs,n.reject=function(t,e){return(Ps(t)?c:$e)(t,Di(Xr(e,3)))},n.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],a=t.length;for(e=Xr(e,3);++r<a;){var o=t[r];e(o,r,t)&&(n.push(o),i.push(r))}return Hn(t,i),n},n.rest=function(t,e){if("function"!=typeof t)throw new Ma(V);return qn(t,e=e===U?e:Zi(e))},n.reverse=wi,n.sampleSize=function(t,e,n){return e=(n?ni(t,e,n):e===U)?1:Zi(e),(Ps(t)?function(t,e){return fi(mr(t),Ue(e,0,t.length))}:function(t,e){var n=oa(t);return fi(n,Ue(e,0,n.length))})(t,e)},n.set=function(t,e,n){return null==t?t:Yn(t,e,n)},n.setWith=function(t,e,n,r){return r="function"==typeof r?r:U,null==t?t:Yn(t,e,n,r)},n.shuffle=function(t){return(Ps(t)?function(t){return fi(mr(t))}:function(t){return fi(oa(t))})(t)},n.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&ni(t,e,n)?(e=0,n=r):(e=null==e?0:Zi(e),n=n===U?r:Zi(n)),Xn(t,e,n)):[]},n.sortBy=_s,n.sortedUniq=function(t){return t&&t.length?Qn(t):[]},n.sortedUniqBy=function(t,e){return t&&t.length?Qn(t,Xr(e,2)):[]},n.split=function(t,e,n){return n&&"number"!=typeof n&&ni(t,e,n)&&(e=n=U),(n=n===U?ft:n>>>0)?(t=ta(t))&&("string"==typeof e||null!=e&&!Ns(e))&&!(e=Jn(e))&&L(t)?cr(F(t),0,n):t.split(e,n):[]},n.spread=function(t,e){if("function"!=typeof t)throw new Ma(V);return e=null==e?0:oo(Zi(e),0),qn(function(n){var r=n[e],i=cr(n,0,e);return r&&p(i,r),s(t,this,i)})},n.tail=function(t){var e=null==t?0:t.length;return e?Xn(t,1,e):[]},n.take=function(t,e,n){return t&&t.length?Xn(t,0,(e=n||e===U?1:Zi(e))<0?0:e):[]},n.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Xn(t,(e=r-(e=n||e===U?1:Zi(e)))<0?0:e,r):[]},n.takeRightWhile=function(t,e){return t&&t.length?rr(t,Xr(e,3),!1,!0):[]},n.takeWhile=function(t,e){return t&&t.length?rr(t,Xr(e,3)):[]},n.tap=function(t,e){return e(t),t},n.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Ma(V);return Vi(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Pi(t,e,{leading:r,maxWait:e,trailing:i})},n.thru=Mi,n.toArray=Xi,n.toPairs=nu,n.toPairsIn=ru,n.toPath=function(t){return Ps(t)?d(t,di):Yi(t)?[t]:mr(Yo(ta(t)))},n.toPlainObject=Ji,n.transform=function(t,e,n){var r=Ps(t),i=r||Ds(t)||Fs(t);if(e=Xr(e,4),null==n){var a=t&&t.constructor;n=i?r?new a:[]:Vi(t)&&Fi(a)?Eo(Va(t)):{}}return(i?u:an)(t,function(t,r,i){return e(n,t,r,i)}),n},n.unary=function(t){return Ai(t,1)},n.union=ns,n.unionBy=rs,n.unionWith=is,n.uniq=function(t){return t&&t.length?tr(t):[]},n.uniqBy=function(t,e){return t&&t.length?tr(t,Xr(e,2)):[]},n.uniqWith=function(t,e){return e="function"==typeof e?e:U,t&&t.length?tr(t,U,e):[]},n.unset=function(t,e){return null==t||er(t,e)},n.unzip=Si,n.unzipWith=Ti,n.update=function(t,e,n){return null==t?t:nr(t,e,ur(n))},n.updateWith=function(t,e,n,r){return r="function"==typeof r?r:U,null==t?t:nr(t,e,ur(n),r)},n.values=oa,n.valuesIn=function(t){return null==t?[]:C(t,ia(t))},n.without=as,n.words=la,n.wrap=function(t,e){return Ms(ur(e),t)},n.xor=os,n.xorBy=ss,n.xorWith=us,n.zip=ls,n.zipObject=function(t,e){return or(t||[],e||[],je)},n.zipObjectDeep=function(t,e){return or(t||[],e||[],Yn)},n.zipWith=cs,n.entries=nu,n.entriesIn=ru,n.extend=Hs,n.extendWith=Gs,da(n,n),n.add=Su,n.attempt=fu,n.camelCase=iu,n.capitalize=sa,n.ceil=Tu,n.clamp=function(t,e,n){return n===U&&(n=e,e=U),n!==U&&(n=(n=Ki(n))==n?n:0),e!==U&&(e=(e=Ki(e))==e?e:0),Ue(Ki(t),e,n)},n.clone=function(t){return ze(t,Y)},n.cloneDeep=function(t){return ze(t,W|Y)},n.cloneDeepWith=function(t,e){return ze(t,W|Y,e="function"==typeof e?e:U)},n.cloneWith=function(t,e){return ze(t,Y,e="function"==typeof e?e:U)},n.conformsTo=function(t,e){return null==e||Ve(t,e,ra(e))},n.deburr=ua,n.defaultTo=function(t,e){return null==t||t!=t?e:t},n.divide=Ou,n.endsWith=function(t,e,n){t=ta(t),e=Jn(e);var r=t.length,i=n=n===U?r:Ue(Zi(n),0,r);return(n-=e.length)>=0&&t.slice(n,i)==e},n.eq=ji,n.escape=function(t){return(t=ta(t))&&Jt.test(t)?t.replace(Qt,xn):t},n.escapeRegExp=function(t){return(t=ta(t))&&ue.test(t)?t.replace(se,"\\$&"):t},n.every=function(t,e,n){var r=Ps(t)?l:function(t,e){var n=!0;return Ao(t,function(t,r,i){return n=!!e(t,r,i)}),n};return n&&ni(t,e,n)&&(e=U),r(t,Xr(e,3))},n.find=ds,n.findIndex=vi,n.findKey=function(t,e){return m(t,Xr(e,3),an)},n.findLast=ps,n.findLastIndex=mi,n.findLastKey=function(t,e){return m(t,Xr(e,3),on)},n.floor=Mu,n.forEach=ki,n.forEachRight=Ci,n.forIn=function(t,e){return null==t?t:Po(t,Xr(e,3),ia)},n.forInRight=function(t,e){return null==t?t:Lo(t,Xr(e,3),ia)},n.forOwn=function(t,e){return t&&an(t,Xr(e,3))},n.forOwnRight=function(t,e){return t&&on(t,Xr(e,3))},n.get=ea,n.gt=Es,n.gte=As,n.has=function(t,e){return null!=t&&Kr(t,e,Tn)},n.hasIn=na,n.head=_i,n.identity=ha,n.includes=function(t,e,n,r){t=Ri(t)?t:oa(t),n=n&&!r?Zi(n):0;var i=t.length;return n<0&&(n=oo(i+n,0)),qi(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&_(t,e,n)>-1},n.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Zi(n);return i<0&&(i=oo(r+i,0)),_(t,e,i)},n.inRange=function(t,e,n){return e=$i(e),n===U?(n=e,e=0):n=$i(n),function(t,e,n){return t>=so(e,n)&&t<oo(e,n)}(t=Ki(t),e,n)},n.invoke=Qs,n.isArguments=Is,n.isArray=Ps,n.isArrayBuffer=Ls,n.isArrayLike=Ri,n.isArrayLikeObject=Ni,n.isBoolean=function(t){return!0===t||!1===t||Hi(t)&&fn(t)==_t},n.isBuffer=Ds,n.isDate=js,n.isElement=function(t){return Hi(t)&&1===t.nodeType&&!Wi(t)},n.isEmpty=function(t){if(null==t)return!0;if(Ri(t)&&(Ps(t)||"string"==typeof t||"function"==typeof t.splice||Ds(t)||Fs(t)||Is(t)))return!t.length;var e=Vo(t);if(e==Ot||e==It)return!t.size;if(ai(t))return!Ln(t).length;for(var n in t)if(Ia.call(t,n))return!1;return!0},n.isEqual=function(t,e){return En(t,e)},n.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:U)?n(t,e):U;return r===U?En(t,e,U,n):!!r},n.isError=Bi,n.isFinite=function(t){return"number"==typeof t&&ro(t)},n.isFunction=Fi,n.isInteger=Ui,n.isLength=zi,n.isMap=Rs,n.isMatch=function(t,e){return t===e||An(t,e,Zr(e))},n.isMatchWith=function(t,e,n){return n="function"==typeof n?n:U,An(t,e,Zr(e),n)},n.isNaN=function(t){return Gi(t)&&t!=+t},n.isNative=function(t){if(Ho(t))throw new ba("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return In(t)},n.isNil=function(t){return null==t},n.isNull=function(t){return null===t},n.isNumber=Gi,n.isObject=Vi,n.isObjectLike=Hi,n.isPlainObject=Wi,n.isRegExp=Ns,n.isSafeInteger=function(t){return Ui(t)&&t>=-lt&&t<=lt},n.isSet=Bs,n.isString=qi,n.isSymbol=Yi,n.isTypedArray=Fs,n.isUndefined=function(t){return t===U},n.isWeakMap=function(t){return Hi(t)&&Vo(t)==jt},n.isWeakSet=function(t){return Hi(t)&&"[object WeakSet]"==fn(t)},n.join=function(t,e){return null==t?"":io.call(t,e)},n.kebabCase=au,n.last=bi,n.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==U&&(i=(i=Zi(n))<0?oo(r+i,0):so(i,r-1)),e==e?function(t,e,n){for(var r=i+1;r--;)if(t[r]===e)return r;return r}(t,e):y(t,b,i,!0)},n.lowerCase=ou,n.lowerFirst=su,n.lt=Us,n.lte=zs,n.max=function(t){return t&&t.length?Ye(t,ha,_n):U},n.maxBy=function(t,e){return t&&t.length?Ye(t,Xr(e,2),_n):U},n.mean=function(t){return x(t,ha)},n.meanBy=function(t,e){return x(t,Xr(e,2))},n.min=function(t){return t&&t.length?Ye(t,ha,Dn):U},n.minBy=function(t,e){return t&&t.length?Ye(t,Xr(e,2),Dn):U},n.stubArray=va,n.stubFalse=ma,n.stubObject=function(){return{}},n.stubString=function(){return""},n.stubTrue=function(){return!0},n.multiply=ku,n.nth=function(t,e){return t&&t.length?Fn(t,Zi(e)):U},n.noConflict=function(){return sn._===this&&(sn._=Ra),this},n.noop=pa,n.now=bs,n.pad=function(t,e,n){t=ta(t);var r=(e=Zi(e))?B(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Pr(to(i),n)+t+Pr(Ja(i),n)},n.padEnd=function(t,e,n){t=ta(t);var r=(e=Zi(e))?B(t):0;return e&&r<e?t+Pr(e-r,n):t},n.padStart=function(t,e,n){t=ta(t);var r=(e=Zi(e))?B(t):0;return e&&r<e?Pr(e-r,n)+t:t},n.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),lo(ta(t).replace(ce,""),e||0)},n.random=function(t,e,n){if(n&&"boolean"!=typeof n&&ni(t,e,n)&&(e=n=U),n===U&&("boolean"==typeof e?(n=e,e=U):"boolean"==typeof t&&(n=t,t=U)),t===U&&e===U?(t=0,e=1):(t=$i(t),e===U?(e=t,t=0):e=$i(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=co();return so(t+i*(e-t+nn("1e-"+((i+"").length-1))),e)}return Gn(t,e)},n.reduce=function(t,e,n){var r=Ps(t)?g:T,i=arguments.length<3;return r(t,Xr(e,4),n,i,Ao)},n.reduceRight=function(t,e,n){var r=Ps(t)?function(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}:T,i=arguments.length<3;return r(t,Xr(e,4),n,i,Io)},n.repeat=function(t,e,n){return e=(n?ni(t,e,n):e===U)?1:Zi(e),Wn(ta(t),e)},n.replace=function(){var t=arguments,e=ta(t[0]);return t.length<3?e:e.replace(t[1],t[2])},n.result=function(t,e,n){var r=-1,i=(e=lr(e,t)).length;for(i||(i=1,t=U);++r<i;){var a=null==t?U:t[di(e[r])];a===U&&(r=i,a=n),t=Fi(a)?a.call(t):a}return t},n.round=Cu,n.runInContext=t,n.sample=function(t){return(Ps(t)?Le:function(t){return Le(oa(t))})(t)},n.size=function(t){if(null==t)return 0;if(Ri(t))return qi(t)?B(t):t.length;var e=Vo(t);return e==Ot||e==It?t.size:Ln(t).length},n.snakeCase=uu,n.some=function(t,e,n){var r=Ps(t)?v:function(t,e){var n;return Ao(t,function(t,r,i){return!(n=e(t,r,i))}),!!n};return n&&ni(t,e,n)&&(e=U),r(t,Xr(e,3))},n.sortedIndex=function(t,e){return $n(t,e)},n.sortedIndexBy=function(t,e,n){return Zn(t,e,Xr(n,2))},n.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=$n(t,e);if(r<n&&ji(t[r],e))return r}return-1},n.sortedLastIndex=function(t,e){return $n(t,e,!0)},n.sortedLastIndexBy=function(t,e,n){return Zn(t,e,Xr(n,2),!0)},n.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=$n(t,e,!0)-1;if(ji(t[n],e))return n}return-1},n.startCase=lu,n.startsWith=function(t,e,n){return t=ta(t),n=null==n?0:Ue(Zi(n),0,t.length),e=Jn(e),t.slice(n,n+e.length)==e},n.subtract=Eu,n.sum=function(t){return t&&t.length?O(t,ha):0},n.sumBy=function(t,e){return t&&t.length?O(t,Xr(e,2)):0},n.template=function(t,e,r){var i=n.templateSettings;r&&ni(t,e,r)&&(e=U),t=ta(t),e=Gs({},e,i,Fr);var a,o,s=Gs({},e.imports,i.imports,Fr),u=ra(s),l=C(s,u),c=0,h=e.interpolate||Oe,f="__p += '",d=Ta((e.escape||Oe).source+"|"+h.source+"|"+(h===ne?me:Oe).source+"|"+(e.evaluate||Oe).source+"|$","g"),p="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Ke+"]")+"\n";t.replace(d,function(e,n,r,i,s,u){return r||(r=i),f+=t.slice(c,u).replace(Me,P),n&&(a=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e}),f+="';\n";var g=e.variable;g||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(Yt,""):f).replace(Xt,"$1").replace($t,"$1;"),f="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=fu(function(){return xa(u,p+"return "+f).apply(U,l)});if(v.source=f,Bi(v))throw v;return v},n.times=function(t,e){if((t=Zi(t))<1||t>lt)return[];var n=ft,r=so(t,ft);e=Xr(e),t-=ft;for(var i=M(r,e);++n<t;)e(n);return i},n.toFinite=$i,n.toInteger=Zi,n.toLength=Qi,n.toLower=function(t){return ta(t).toLowerCase()},n.toNumber=Ki,n.toSafeInteger=function(t){return t?Ue(Zi(t),-lt,lt):0===t?t:0},n.toString=ta,n.toUpper=function(t){return ta(t).toUpperCase()},n.trim=function(t,e,n){if((t=ta(t))&&(n||e===U))return t.replace(le,"");if(!t||!(e=Jn(e)))return t;var r=F(t),i=F(e);return cr(r,A(r,i),I(r,i)+1).join("")},n.trimEnd=function(t,e,n){if((t=ta(t))&&(n||e===U))return t.replace(he,"");if(!t||!(e=Jn(e)))return t;var r=F(t);return cr(r,0,I(r,F(e))+1).join("")},n.trimStart=function(t,e,n){if((t=ta(t))&&(n||e===U))return t.replace(ce,"");if(!t||!(e=Jn(e)))return t;var r=F(t);return cr(r,A(r,F(e))).join("")},n.truncate=function(t,e){var n=30,r="...";if(Vi(e)){var i="separator"in e?e.separator:i;n="length"in e?Zi(e.length):n,r="omission"in e?Jn(e.omission):r}var a=(t=ta(t)).length;if(L(t)){var o=F(t);a=o.length}if(n>=a)return t;var s=n-B(r);if(s<1)return r;var u=o?cr(o,0,s).join(""):t.slice(0,s);if(i===U)return u+r;if(o&&(s+=u.length-s),Ns(i)){if(t.slice(s).search(i)){var l,c=u;for(i.global||(i=Ta(i.source,ta(ye.exec(i))+"g")),i.lastIndex=0;l=i.exec(c);)var h=l.index;u=u.slice(0,h===U?s:h)}}else if(t.indexOf(Jn(i),s)!=s){var f=u.lastIndexOf(i);f>-1&&(u=u.slice(0,f))}return u+r},n.unescape=function(t){return(t=ta(t))&&Kt.test(t)?t.replace(Zt,wn):t},n.uniqueId=function(t){var e=++Pa;return ta(t)+e},n.upperCase=cu,n.upperFirst=hu,n.each=ki,n.eachRight=Ci,n.first=_i,da(n,function(){var t={};return an(n,function(e,r){Ia.call(n.prototype,r)||(t[r]=e)}),t}(),{chain:!1}),n.VERSION="4.17.4",u(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){n[t].placeholder=n}),u(["drop","take"],function(t,e){S.prototype[t]=function(n){n=n===U?1:oo(Zi(n),0);var r=this.__filtered__&&!e?new S(this):this.clone();return r.__filtered__?r.__takeCount__=so(n,r.__takeCount__):r.__views__.push({size:so(n,ft),type:t+(r.__dir__<0?"Right":"")}),r},S.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),u(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;S.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Xr(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),u(["head","last"],function(t,e){var n="take"+(e?"Right":"");S.prototype[t]=function(){return this[n](1).value()[0]}}),u(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");S.prototype[t]=function(){return this.__filtered__?new S(this):this[n](1)}}),S.prototype.compact=function(){return this.filter(ha)},S.prototype.find=function(t){return this.filter(t).head()},S.prototype.findLast=function(t){return this.reverse().find(t)},S.prototype.invokeMap=qn(function(t,e){return"function"==typeof t?new S(this):this.map(function(n){return kn(n,t,e)})}),S.prototype.reject=function(t){return this.filter(Di(Xr(t)))},S.prototype.slice=function(t,e){t=Zi(t);var n=this;return n.__filtered__&&(t>0||e<0)?new S(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==U&&(n=(e=Zi(e))<0?n.dropRight(-e):n.take(e-t)),n)},S.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},S.prototype.toArray=function(){return this.take(ft)},an(S.prototype,function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),a=/^(?:head|last)$/.test(e),o=n[a?"take"+("last"==e?"Right":""):e],s=a||/^find/.test(e);o&&(n.prototype[e]=function(){var e=this.__wrapped__,u=a?[1]:arguments,l=e instanceof S,c=u[0],h=l||Ps(e),f=function(t){var e=o.apply(n,p([t],u));return a&&d?e[0]:e};h&&r&&"function"==typeof c&&1!=c.length&&(l=h=!1);var d=this.__chain__,g=s&&!d,v=l&&!this.__actions__.length;if(!s&&h){e=v?e:new S(this);var m=t.apply(e,u);return m.__actions__.push({func:Mi,args:[f],thisArg:U}),new i(m,d)}return g&&v?t.apply(this,u):(m=this.thru(f),g?a?m.value()[0]:m.value():m)})}),u(["pop","push","shift","sort","splice","unshift"],function(t){var e=ka[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);n.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var n=this.value();return e.apply(Ps(n)?n:[],t)}return this[r](function(n){return e.apply(Ps(n)?n:[],t)})}}),an(S.prototype,function(t,e){var r=n[e];if(r){var i=r.name+"";(bo[i]||(bo[i]=[])).push({name:e,func:r})}}),bo[Cr(U,Q).name]=[{name:"wrapper",func:U}],S.prototype.clone=function(){var t=new S(this.__wrapped__);return t.__actions__=mr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=mr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=mr(this.__views__),t},S.prototype.reverse=function(){if(this.__filtered__){var t=new S(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},S.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ps(t),r=e<0,i=n?t.length:0,a=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=so(e,t+o);break;case"takeRight":t=oo(t,e-o)}}return{start:t,end:e}}(0,i,this.__views__),o=a.start,s=a.end,u=s-o,l=r?s:o-1,c=this.__iteratees__,h=c.length,f=0,d=so(u,this.__takeCount__);if(!n||!r&&i==u&&d==u)return ir(t,this.__actions__);var p=[];t:for(;u--&&f<d;){for(var g=-1,v=t[l+=e];++g<h;){var m=c[g],y=m.type,_=(0,m.iteratee)(v);if(2==y)v=_;else if(!_){if(1==y)continue t;break t}}p[f++]=v}return p},n.prototype.at=hs,n.prototype.chain=function(){return Oi(this)},n.prototype.commit=function(){return new i(this.value(),this.__chain__)},n.prototype.next=function(){this.__values__===U&&(this.__values__=Xi(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?U:this.__values__[this.__index__++]}},n.prototype.plant=function(t){for(var e,n=this;n instanceof r;){var i=gi(n);i.__index__=0,i.__values__=U,e?a.__wrapped__=i:e=i;var a=i;n=n.__wrapped__}return a.__wrapped__=t,e},n.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof S){var e=t;return this.__actions__.length&&(e=new S(this)),(e=e.reverse()).__actions__.push({func:Mi,args:[wi],thisArg:U}),new i(e,this.__chain__)}return this.thru(wi)},n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=function(){return ir(this.__wrapped__,this.__actions__)},n.prototype.first=n.prototype.head,Ya&&(n.prototype[Ya]=function(){return this}),n}();sn._=Sn,(i=(function(){return Sn}).call(e,n,e,r))!==U&&(r.exports=i)}).call(this)}).call(e,n(146),n(65)(t))},function(t,e,n){var r=n(14),i=n(264);t.exports=function(t,e,n,r){return function(t,e,n,r){var a,o,s={},u=new i,l=function(t){var e=t.v!==a?t.v:t.w,r=s[e],i=n(t),l=o.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);l<r.distance&&(r.distance=l,r.predecessor=a,u.decrease(e,l))};for(t.nodes().forEach(function(t){var n=t===e?0:Number.POSITIVE_INFINITY;s[t]={distance:n},u.add(t,n)});u.size()>0&&(a=u.removeMin(),(o=s[a]).distance!==Number.POSITIVE_INFINITY);)r(a).forEach(l);return s}(t,String(e),n||a,r||function(e){return t.outEdges(e)})};var a=r.constant(1)},function(t,e,n){function r(){this._arr=[],this._keyIndices={}}var i=n(14);t.exports=r,r.prototype.size=function(){return this._arr.length},r.prototype.keys=function(){return this._arr.map(function(t){return t.key})},r.prototype.has=function(t){return i.has(this._keyIndices,t)},r.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},r.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},r.prototype.add=function(t,e){var n=this._keyIndices;if(t=String(t),!i.has(n,t)){var r=this._arr,a=r.length;return n[t]=a,r.push({key:t,priority:e}),this._decrease(a),!0}return!1},r.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},r.prototype.decrease=function(t,e){var n=this._keyIndices[t];if(e>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[n].priority+" New: "+e);this._arr[n].priority=e,this._decrease(n)},r.prototype._heapify=function(t){var e=this._arr,n=2*t,r=n+1,i=t;n<e.length&&(i=e[n].priority<e[i].priority?n:i,r<e.length&&(i=e[r].priority<e[i].priority?r:i),i!==t&&(this._swap(t,i),this._heapify(i)))},r.prototype._decrease=function(t){for(var e,n=this._arr,r=n[t].priority;0!==t&&!(n[e=t>>1].priority<r);)this._swap(t,e),t=e},r.prototype._swap=function(t,e){var n=this._arr,r=this._keyIndices,i=n[t],a=n[e];n[t]=a,n[e]=i,r[a.key]=t,r[i.key]=e}},function(t,e,n){var r=n(14);t.exports=function(t){function e(s){var u=a[s]={onStack:!0,lowlink:n,index:n++};if(i.push(s),t.successors(s).forEach(function(t){r.has(a,t)?a[t].onStack&&(u.lowlink=Math.min(u.lowlink,a[t].index)):(e(t),u.lowlink=Math.min(u.lowlink,a[t].lowlink))}),u.lowlink===u.index){var l,c=[];do{l=i.pop(),a[l].onStack=!1,c.push(l)}while(s!==l);o.push(c)}}var n=0,i=[],a={},o=[];return t.nodes().forEach(function(t){r.has(a,t)||e(t)}),o}},function(t,e,n){function r(t){var e={},n={},r=[];if(a.each(t.sinks(),function o(s){if(a.has(n,s))throw new i;a.has(e,s)||(n[s]=!0,e[s]=!0,a.each(t.predecessors(s),o),delete n[s],r.push(s))}),a.size(e)!==t.nodeCount())throw new i;return r}function i(){}var a=n(14);t.exports=r,r.CycleException=i},function(t,e,n){var r=n(14);t.exports=function(t,e,n){r.isArray(e)||(e=[e]);var i=(t.isDirected()?t.successors:t.neighbors).bind(t),a=[],o={};return r.each(e,function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);!function t(e,n,i,a,o,s){r.has(a,n)||(a[n]=!0,i||s.push(n),r.each(o(n),function(n){t(e,n,i,a,o,s)}),i&&s.push(n))}(t,e,"post"===n,o,i,a)}),a}},function(t,e,n){"use strict";var r=n(8),i=n(17).Graph,a=n(80).slack;t.exports=function(t){var e,n=new i({directed:!1}),o=t.nodes()[0],s=t.nodeCount();for(n.setNode(o,{});function(t,e){return r.forEach(t.nodes(),function n(i){r.forEach(e.nodeEdges(i),function(r){var o=r.v,s=i===o?r.w:o;t.hasNode(s)||a(e,r)||(t.setNode(s,{}),t.setEdge(i,s,{}),n(s))})}),t.nodeCount()}(n,t)<s;)e=function(t,e){return r.minBy(e.edges(),function(n){if(t.hasNode(n.v)!==t.hasNode(n.w))return a(e,n)})}(n,t),function(t,e,n){r.forEach(t.nodes(),function(t){e.node(t).rank+=n})}(n,t,n.hasNode(e.v)?a(t,e):-a(t,e));return n}},function(t,e,n){"use strict";function r(t){return t.target.depth}e.c=function(t){return t.depth},e.d=function(t,e){return e-1-t.height},e.b=function(t,e){return t.sourceLinks.length?t.depth:e-1},e.a=function(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?Object(i.min)(t.sourceLinks,r)-1:0};var i=n(16)},function(t,e,n){"use strict";var r=n(39),i=n(34),a=n(81),o=n(137),s=n(138);e.a=function(){function t(t){var e,i,a,o,s,g=t.length,v=!1,m=new Array(g),y=new Array(g);for(null==f&&(p=d(s=Object(r.path)())),e=0;e<=g;++e){if(!(e<g&&h(o=t[e],e,t))===v)if(v=!v)i=e,p.areaStart(),p.lineStart();else{for(p.lineEnd(),p.lineStart(),a=e-1;a>=i;--a)p.point(m[a],y[a]);p.lineEnd(),p.areaEnd()}v&&(m[e]=+n(o,e,t),y[e]=+l(o,e,t),p.point(u?+u(o,e,t):m[e],c?+c(o,e,t):y[e]))}if(s)return p=null,s+""||null}function e(){return Object(o.a)().defined(h).curve(d).context(f)}var n=s.a,u=null,l=Object(i.a)(0),c=s.b,h=Object(i.a)(!0),f=null,d=a.a,p=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:Object(i.a)(+e),u=null,t):n},t.x0=function(e){return arguments.length?(n="function"==typeof e?e:Object(i.a)(+e),t):n},t.x1=function(e){return arguments.length?(u=null==e?null:"function"==typeof e?e:Object(i.a)(+e),t):u},t.y=function(e){return arguments.length?(l="function"==typeof e?e:Object(i.a)(+e),c=null,t):l},t.y0=function(e){return arguments.length?(l="function"==typeof e?e:Object(i.a)(+e),t):l},t.y1=function(e){return arguments.length?(c=null==e?null:"function"==typeof e?e:Object(i.a)(+e),t):c},t.lineX0=t.lineY0=function(){return e().x(n).y(l)},t.lineY1=function(){return e().x(n).y(c)},t.lineX1=function(){return e().x(u).y(l)},t.defined=function(e){return arguments.length?(h="function"==typeof e?e:Object(i.a)(!!e),t):h},t.curve=function(e){return arguments.length?(d=e,null!=f&&(p=d(f)),t):d},t.context=function(e){return arguments.length?(null==e?f=p=null:p=d(f=e),t):f},t}},function(t,e,n){"use strict";function r(t){this._curve=t}function i(t){function e(e){return new r(t(e))}return e._curve=t,e}n.d(e,"a",function(){return a}),e.b=i;var a=i(n(81).a);r.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}}},function(t,e,n){"use strict";e.a=function(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(Object(r.b)(t)):e()._curve},t};var r=n(271);n(137)},function(t,e,n){"use strict";e.a=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=Array.prototype.slice},function(t,e,n){"use strict";var r=n(57);e.a={draw:function(t,e){var n=Math.sqrt(e/r.j);t.moveTo(n,0),t.arc(0,0,n,0,r.m)}}},function(t,e,n){"use strict";e.a={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}}},function(t,e,n){"use strict";var r=Math.sqrt(1/3),i=2*r;e.a={draw:function(t,e){var n=Math.sqrt(e/i),a=n*r;t.moveTo(0,-n),t.lineTo(a,0),t.lineTo(0,n),t.lineTo(-a,0),t.closePath()}}},function(t,e,n){"use strict";var r=n(57),i=Math.sin(r.j/10)/Math.sin(7*r.j/10),a=Math.sin(r.m/10)*i,o=-Math.cos(r.m/10)*i;e.a={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),i=a*n,s=o*n;t.moveTo(0,-n),t.lineTo(i,s);for(var u=1;u<5;++u){var l=r.m*u/5,c=Math.cos(l),h=Math.sin(l);t.lineTo(h*n,-c*n),t.lineTo(c*i-h*s,h*i+c*s)}t.closePath()}}},function(t,e,n){"use strict";e.a={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}}},function(t,e,n){"use strict";var r=Math.sqrt(3);e.a={draw:function(t,e){var n=-Math.sqrt(e/(3*r));t.moveTo(0,2*n),t.lineTo(-r*n,-n),t.lineTo(r*n,-n),t.closePath()}}},function(t,e,n){"use strict";var r=-.5,i=Math.sqrt(3)/2,a=1/Math.sqrt(12),o=3*(a/2+1);e.a={draw:function(t,e){var n=Math.sqrt(e/o),s=n/2,u=n*a,l=s,c=n*a+n,h=-l,f=c;t.moveTo(s,u),t.lineTo(l,c),t.lineTo(h,f),t.lineTo(r*s-i*u,i*s+r*u),t.lineTo(r*l-i*c,i*l+r*c),t.lineTo(r*h-i*f,i*h+r*f),t.lineTo(r*s+i*u,r*u-i*s),t.lineTo(r*l+i*c,r*c-i*l),t.lineTo(r*h+i*f,r*f-i*h),t.closePath()}}},function(t,e,n){"use strict";function r(t,e){this._context=t,this._k=(1-e)/6}e.a=r;var i=n(82),a=n(84);r.prototype={areaStart:i.a,areaEnd:i.a,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Object(a.b)(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return new r(t,e)}return n.tension=function(e){return t(+e)},n}(0)},function(t,e,n){"use strict";function r(t,e){this._context=t,this._k=(1-e)/6}e.a=r;var i=n(84);r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Object(i.b)(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return new r(t,e)}return n.tension=function(e){return t(+e)},n}(0)},function(t,e,n){"use strict";function r(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function i(t,e){return e[+(e.left!==t.site)]}function a(t,e){return e[+(e.left===t.site)]}e.c=function(t){return s.b[t.index]={site:t,halfedges:[]}},e.a=i,e.d=function(){for(var t,e,n,i,a=0,o=s.b.length;a<o;++a)if((t=s.b[a])&&(i=(e=t.halfedges).length)){var u=new Array(i),l=new Array(i);for(n=0;n<i;++n)u[n]=n,l[n]=r(t,s.e[e[n]]);for(u.sort(function(t,e){return l[e]-l[t]}),n=0;n<i;++n)l[n]=e[u[n]];for(n=0;n<i;++n)e[n]=l[n]}},e.b=function(t,e,n,r){var u,l,c,h,f,d,p,g,v,m,y,_,b=s.b.length,x=!0;for(u=0;u<b;++u)if(l=s.b[u]){for(c=l.site,h=(f=l.halfedges).length;h--;)s.e[f[h]]||f.splice(h,1);for(h=0,d=f.length;h<d;)y=(m=a(l,s.e[f[h]]))[0],_=m[1],g=(p=i(l,s.e[f[++h%d]]))[0],v=p[1],(Math.abs(y-g)>s.f||Math.abs(_-v)>s.f)&&(f.splice(h,0,s.e.push(Object(o.b)(c,m,Math.abs(y-t)<s.f&&r-_>s.f?[t,Math.abs(g-t)<s.f?v:r]:Math.abs(_-r)<s.f&&n-y>s.f?[Math.abs(v-r)<s.f?g:n,r]:Math.abs(y-n)<s.f&&_-e>s.f?[n,Math.abs(g-n)<s.f?v:e]:Math.abs(_-e)<s.f&&y-t>s.f?[Math.abs(v-e)<s.f?g:t,e]:null))-1),++d);d&&(x=!1)}if(x){var w,S,T,O=1/0;for(u=0,x=null;u<b;++u)(l=s.b[u])&&(T=(w=(c=l.site)[0]-t)*w+(S=c[1]-e)*S)<O&&(O=T,x=l);if(x){var M=[t,e],k=[t,r],C=[n,r],E=[n,e];x.halfedges.push(s.e.push(Object(o.b)(c=x.site,M,k))-1,s.e.push(Object(o.b)(c,k,C))-1,s.e.push(Object(o.b)(c,C,E))-1,s.e.push(Object(o.b)(c,E,M))-1)}}for(u=0;u<b;++u)(l=s.b[u])&&(l.halfedges.length||delete s.b[u])};var o=n(142),s=n(60)},function(t,e,n){"use strict";n.d(e,"c",function(){return r}),e.a=function(t){var e=t.P,n=t.N;if(e&&n){var s=e.site,u=t.site,l=n.site;if(s!==l){var c=u[0],h=u[1],f=s[0]-c,d=s[1]-h,p=l[0]-c,g=l[1]-h,v=2*(f*g-d*p);if(!(v>=-a.g)){var m=f*f+d*d,y=p*p+g*g,_=(g*m-d*y)/v,b=(f*y-p*m)/v,x=o.pop()||new function(){Object(i.a)(this),this.x=this.y=this.arc=this.site=this.cy=null};x.arc=t,x.site=u,x.x=_+c,x.y=(x.cy=b+h)+Math.sqrt(_*_+b*b),t.circle=x;for(var w=null,S=a.c._;S;)if(x.y<S.y||x.y===S.y&&x.x<=S.x){if(!S.L){w=S.P;break}S=S.L}else{if(!S.R){w=S;break}S=S.R}a.c.insert(w,x),w||(r=x)}}}},e.b=function(t){var e=t.circle;e&&(e.P||(r=e.N),a.c.remove(e),o.push(e),Object(i.a)(e),t.circle=null)};var r,i=n(141),a=n(60),o=[]},function(t,e){function n(t){return Math.abs(t)<=1?.5:0}t.exports={boxcar:n,cosine:function(t){return Math.abs(t)<=1?Math.PI/4*Math.cos(Math.PI/2*t):0},epanechnikov:function(t){return Math.abs(t)<1?.75*(1-t*t):0},gaussian:function(t){return.3989422804*Math.exp(-.5*t*t)},quartic:function(t){if(Math.abs(t)<1){var e=1-t*t;return.9375*e*e}return 0},triangular:function(t){var e=Math.abs(t);return e<1?1-e:0},tricube:function(t){return Math.abs(t)<1?70/81*function(t){var e=1-Math.pow(Math.abs(t),3);return Math.pow(e,3)}(t):0},triweight:function(t){if(Math.abs(t)<1){var e=1-t*t;return 35/32*e*e*e}return 0},uniform:n}},function(t,e,n){n(288),n(537),n(538),n(547),n(594),n(596),n(600),n(248),n(604),n(605),n(607),n(629),n(637),n(638),n(639),n(646),n(647),n(648),n(649),n(650),n(651),n(653),n(654),n(655),n(661),n(662),n(663),n(667),n(672),n(674),n(675),n(676),n(677),n(678),n(679),n(680),n(681),n(682),n(721),n(757),n(763),n(764),n(765),n(766),n(767),n(768),n(769),n(770),n(771),n(773),n(777),n(778),t.exports=n(2)},function(t,e,n){var r=n(4),i=n(0),a=i.geoArea,o=i.geoCentroid,s=i.geoContains,u=i.geoDistance,l=i.geoLength,c=n(179).geoProject,h=n(47),f=n(214);r(h.prototype,{geoArea:function(t){return a(t)},geoAreaByName:function(t){return a(this.geoFeatureByName(t))},geoCentroid:function(t){return o(t)},geoCentroidByName:function(t){return o(this.geoFeatureByName(t))},geoDistance:function(t,e){return u(t,e)},geoLength:function(t){return l(t)},geoLengthByName:function(t){return l(this.geoFeatureByName(t))},geoContains:function(t,e){return s(t,e)},geoFeatureByName:function(t){var e=void 0;return this.rows.some(function(n){return n.name===t&&(e=n,!0)}),e},geoFeatureByPosition:function(t){var e=void 0;return this.rows.some(function(n){return!!s(n,t)&&(e=n,!0)}),e},geoNameByPosition:function(t){var e=this.geoFeatureByPosition(t);if(e)return e.name},getGeoProjection:f,geoProject:function(t,e,n){return e=f(e,n),c(t,e)},geoProjectByName:function(t,e,n){return e=f(e,n),c(this.geoFeatureByName(t),e)},geoProjectPosition:function(t,e,n){return(e=f(e,n))(t)},geoProjectInvert:function(t,e,n){return(e=f(e,n)).invert(t)}})},function(t,e,n){var r=n(13),i=n(292),a=n(15),o=n(147),s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=RegExp("^"+u.toString.call(l.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!a(t)||i(t))&&(r(t)?c:s).test(o(t))}},function(t,e,n){var r=n(35),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=a.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=o.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(293),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(18)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(86),i=n(150);t.exports=function(t){return r(function(e,n){var r=-1,a=n.length,o=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(a--,o):void 0,s&&i(n[0],n[1],s)&&(o=a<3?void 0:o,a=1),e=Object(e);++r<a;){var u=n[r];u&&t(e,u,r,o)}return e})}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(298),i=n(144),a=n(42);t.exports=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:a},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=Date.now;t.exports=function(t){var e=0,r=0;return function(){var i=n(),a=16-(i-r);if(r=i,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(23),i=n(20);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(23),i=n(87),a=n(20),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(t){return a(t)&&i(t.length)&&!!o[r(t)]}},function(t,e,n){(function(t){var r=n(145),i="object"==typeof e&&e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,o=a&&a.exports===i&&r.process,s=function(){try{return o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=s}).call(e,n(65)(t))},function(t,e,n){var r=n(64),i=n(306),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e,n){var r=n(153)(Object.keys,Object);t.exports=r},function(t,e,n){"use strict";function r(t,e){x.push(w=[d=t,g=t]),e<p&&(p=e),e>v&&(v=e)}function i(t,e){var n=Object(O.a)([t*M.r,e*M.r]);if(b){var r=Object(O.c)(b,n),i=[r[1],-r[0],0],a=Object(O.c)(i,r);Object(O.e)(a),a=Object(O.g)(a);var o,s=t-m,u=s>0?1:-1,l=a[0]*M.h*u,h=Object(M.a)(s)>180;h^(u*m<l&&l<u*t)?(o=a[1]*M.h)>v&&(v=o):h^(u*m<(l=(l+360)%360-180)&&l<u*t)?(o=-a[1]*M.h)<p&&(p=o):(e<p&&(p=e),e>v&&(v=e)),h?t<m?c(d,t)>c(d,g)&&(g=t):c(t,g)>c(d,g)&&(d=t):g>=d?(t<d&&(d=t),t>g&&(g=t)):t>m?c(d,t)>c(d,g)&&(g=t):c(t,g)>c(d,g)&&(d=t)}else x.push(w=[d=t,g=t]);e<p&&(p=e),e>v&&(v=e),b=n,m=t}function a(){E.point=i}function o(){w[0]=d,w[1]=g,E.point=r,b=null}function s(t,e){if(b){var n=t-m;C.add(Object(M.a)(n)>180?n+(n>0?360:-360):n)}else y=t,_=e;T.b.point(t,e),i(t,e)}function u(){T.b.lineStart()}function l(){s(y,_),T.b.lineEnd(),Object(M.a)(C)>M.i&&(d=-(g=180)),w[0]=d,w[1]=g,b=null}function c(t,e){return(e-=t)<0?e+360:e}function h(t,e){return t[0]-e[0]}function f(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var d,p,g,v,m,y,_,b,x,w,S=n(36),T=n(154),O=n(43),M=n(5),k=n(30),C=Object(S.a)(),E={point:r,lineStart:a,lineEnd:o,polygonStart:function(){E.point=s,E.lineStart=u,E.lineEnd=l,C.reset(),T.b.polygonStart()},polygonEnd:function(){T.b.polygonEnd(),E.point=r,E.lineStart=a,E.lineEnd=o,T.a<0?(d=-(g=180),p=-(v=90)):C>M.i?v=90:C<-M.i&&(p=-90),w[0]=d,w[1]=g}};e.a=function(t){var e,n,r,i,a,o,s;if(v=g=-(d=p=1/0),x=[],Object(k.a)(t,E),n=x.length){for(x.sort(h),e=1,a=[r=x[0]];e<n;++e)f(r,(i=x[e])[0])||f(r,i[1])?(c(r[0],i[1])>c(r[0],r[1])&&(r[1]=i[1]),c(i[0],r[1])>c(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,e=0,r=a[n=a.length-1];e<=n;r=i,++e)(s=c(r[1],(i=a[e])[0]))>o&&(o=s,d=i[0],g=r[1])}return x=w=null,d===1/0||p===1/0?[[NaN,NaN],[NaN,NaN]]:[[d,p],[g,v]]}},function(t,e,n){"use strict";function r(t,e){t*=E.r,e*=E.r;var n=Object(E.g)(e);i(n*Object(E.g)(t),n*Object(E.t)(t),Object(E.t)(e))}function i(t,e,n){g+=(t-g)/++d,v+=(e-v)/d,m+=(n-m)/d}function a(){P.point=o}function o(t,e){t*=E.r,e*=E.r;var n=Object(E.g)(e);M=n*Object(E.g)(t),k=n*Object(E.t)(t),C=Object(E.t)(e),P.point=s,i(M,k,C)}function s(t,e){t*=E.r,e*=E.r;var n=Object(E.g)(e),r=n*Object(E.g)(t),a=n*Object(E.t)(t),o=Object(E.t)(e),s=Object(E.e)(Object(E.u)((s=k*o-C*a)*s+(s=C*r-M*o)*s+(s=M*a-k*r)*s),M*r+k*a+C*o);p+=s,y+=s*(M+(M=r)),_+=s*(k+(k=a)),b+=s*(C+(C=o)),i(M,k,C)}function u(){P.point=r}function l(){P.point=h}function c(){f(T,O),P.point=r}function h(t,e){T=t,O=e,t*=E.r,e*=E.r,P.point=f;var n=Object(E.g)(e);M=n*Object(E.g)(t),k=n*Object(E.t)(t),C=Object(E.t)(e),i(M,k,C)}function f(t,e){t*=E.r,e*=E.r;var n=Object(E.g)(e),r=n*Object(E.g)(t),a=n*Object(E.t)(t),o=Object(E.t)(e),s=k*o-C*a,u=C*r-M*o,l=M*a-k*r,c=Object(E.u)(s*s+u*u+l*l),h=Object(E.c)(c),f=c&&-h/c;x+=f*s,w+=f*u,S+=f*l,p+=h,y+=h*(M+(M=r)),_+=h*(k+(k=a)),b+=h*(C+(C=o)),i(M,k,C)}var d,p,g,v,m,y,_,b,x,w,S,T,O,M,k,C,E=n(5),A=n(25),I=n(30),P={sphere:A.a,point:r,lineStart:a,lineEnd:u,polygonStart:function(){P.lineStart=l,P.lineEnd=c},polygonEnd:function(){P.lineStart=a,P.lineEnd=u}};e.a=function(t){d=p=g=v=m=y=_=b=x=w=S=0,Object(I.a)(t,P);var e=x,n=w,r=S,i=e*e+n*n+r*r;return i<E.j&&(e=y,n=_,r=b,p<E.i&&(e=g,n=v,r=m),(i=e*e+n*n+r*r)<E.j)?[NaN,NaN]:[Object(E.e)(n,e)*E.h,Object(E.c)(r/Object(E.u)(i))*E.h]}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";e.a=function(t,e,n,r,i,a){var o,s=t[0],u=t[1],l=0,c=1,h=e[0]-s,f=e[1]-u;if(o=n-s,h||!(o>0)){if(o/=h,h<0){if(o<l)return;o<c&&(c=o)}else if(h>0){if(o>c)return;o>l&&(l=o)}if(o=i-s,h||!(o<0)){if(o/=h,h<0){if(o>c)return;o>l&&(l=o)}else if(h>0){if(o<l)return;o<c&&(c=o)}if(o=r-u,f||!(o>0)){if(o/=f,f<0){if(o<l)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>l&&(l=o)}if(o=a-u,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>l&&(l=o)}else if(f>0){if(o<l)return;o<c&&(c=o)}return l>0&&(t[0]=s+l*h,t[1]=u+l*f),c<1&&(e[0]=s+c*h,e[1]=u+c*f),!0}}}}}},function(t,e,n){"use strict";var r=n(162);e.a=function(t,e,n){var i,a,o,s,u=t.length,l=e.length,c=new Array(u*l);for(null==n&&(n=r.b),i=o=0;i<u;++i)for(s=t[i],a=0;a<l;++a,++o)c[o]=n(s,e[a]);return c}},function(t,e,n){"use strict";e.a=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}},function(t,e,n){"use strict";var r=n(166),i=n(160),a=n(314),o=n(165),s=n(315),u=n(167),l=n(168),c=n(169);e.a=function(){function t(t){var r,a,o=t.length,s=new Array(o);for(r=0;r<o;++r)s[r]=e(t[r],r,t);var c=n(s),f=c[0],d=c[1],p=h(s,f,d);Array.isArray(p)||(p=Object(l.c)(f,d,p),p=Object(u.a)(Math.ceil(f/p)*p,Math.floor(d/p)*p,p));for(var g=p.length;p[0]<=f;)p.shift(),--g;for(;p[g-1]>d;)p.pop(),--g;var v,m=new Array(g+1);for(r=0;r<=g;++r)(v=m[r]=[]).x0=r>0?p[r-1]:f,v.x1=r<g?p[r]:d;for(r=0;r<o;++r)f<=(a=s[r])&&a<=d&&m[Object(i.c)(p,a,0,g)].push(t[r]);return m}var e=s.a,n=o.a,h=c.a;return t.value=function(n){return arguments.length?(e="function"==typeof n?n:Object(a.a)(n),t):e},t.domain=function(e){return arguments.length?(n="function"==typeof e?e:Object(a.a)([e[0],e[1]]),t):n},t.thresholds=function(e){return arguments.length?(h="function"==typeof e?e:Array.isArray(e)?Object(a.a)(r.b.call(e)):Object(a.a)(e),t):h},t}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";var r=n(166),i=n(37),a=n(44),o=n(92);e.a=function(t,e,n){return t=r.a.call(t,a.a).sort(i.a),Math.ceil((n-e)/(2*(Object(o.a)(t,.75)-Object(o.a)(t,.25))*Math.pow(t.length,-1/3)))}},function(t,e,n){"use strict";var r=n(163);e.a=function(t,e,n){return Math.ceil((n-e)/(3.5*Object(r.a)(t)*Math.pow(t.length,-1/3)))}},function(t,e,n){"use strict";e.a=function(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&n>r&&(r=n);return r}},function(t,e,n){"use strict";var r=n(44);e.a=function(t,e){var n,i=t.length,a=i,o=-1,s=0;if(null==e)for(;++o<i;)isNaN(n=Object(r.a)(t[o]))?--a:s+=n;else for(;++o<i;)isNaN(n=Object(r.a)(e(t[o],o,t)))?--a:s+=n;if(a)return s/a}},function(t,e,n){"use strict";var r=n(37),i=n(44),a=n(92);e.a=function(t,e){var n,o=t.length,s=-1,u=[];if(null==e)for(;++s<o;)isNaN(n=Object(i.a)(t[s]))||u.push(n);else for(;++s<o;)isNaN(n=Object(i.a)(e(t[s],s,t)))||u.push(n);return Object(a.a)(u.sort(r.a),.5)}},function(t,e,n){"use strict";e.a=function(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--o]=r[e];return n}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r}},function(t,e,n){"use strict";var r=n(37);e.a=function(t,e){if(n=t.length){var n,i,a=0,o=0,s=t[o];for(null==e&&(e=r.a);++a<n;)(e(i=t[a],s)<0||0!==e(s,s))&&(s=i,o=a);return 0===e(s,s)?o:void 0}}},function(t,e,n){"use strict";e.a=function(t,e,n){for(var r,i,a=(null==n?t.length:n)-(e=null==e?0:+e);a;)i=Math.random()*a--|0,r=t[a+e],t[a+e]=t[i+e],t[i+e]=r;return t}},function(t,e,n){"use strict";e.a=function(t,e){var n,r=t.length,i=-1,a=0;if(null==e)for(;++i<r;)(n=+t[i])&&(a+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(a+=n);return a}},function(t,e,n){"use strict";var r=n(171);e.a=function(){return Object(r.a)(arguments)}},function(t,e,n){"use strict";function r(t,e){return!(!t||!d.hasOwnProperty(t.type))&&d[t.type](t,e)}function i(t,e){return 0===Object(c.a)(t,e)}function a(t,e){var n=Object(c.a)(t[0],t[1]);return Object(c.a)(t[0],e)+Object(c.a)(e,t[1])<=n+h.i}function o(t,e){return!!Object(l.a)(t.map(s),u(e))}function s(t){return(t=t.map(u)).pop(),t}function u(t){return[t[0]*h.r,t[1]*h.r]}var l=n(172),c=n(173),h=n(5),f={Feature:function(t,e){return r(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,a=n.length;++i<a;)if(r(n[i].geometry,e))return!0;return!1}},d={Sphere:function(){return!0},Point:function(t,e){return i(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)if(i(n[r],e))return!0;return!1},LineString:function(t,e){return a(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(a(n[r],e))return!0;return!1},Polygon:function(t,e){return o(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)if(o(n[r],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,a=n.length;++i<a;)if(r(n[i],e))return!0;return!1}};e.a=function(t,e){return(t&&f.hasOwnProperty(t.type)?f[t.type]:r)(t,e)}},function(t,e,n){"use strict";function r(t,e,n){var r=Object(o.range)(t,e-s.i,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function i(t,e,n){var r=Object(o.range)(t,e-s.i,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function a(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return Object(o.range)(Object(s.f)(l/b)*b,u,b).map(v).concat(Object(o.range)(Object(s.f)(d/x)*x,f,x).map(m)).concat(Object(o.range)(Object(s.f)(a/y)*y,n,y).filter(function(t){return Object(s.a)(t%b)>s.i}).map(p)).concat(Object(o.range)(Object(s.f)(h/_)*_,c,_).filter(function(t){return Object(s.a)(t%x)>s.i}).map(g))}var n,a,u,l,c,h,f,d,p,g,v,m,y=10,_=y,b=90,x=360,w=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[v(l).concat(m(f).slice(1),v(u).reverse().slice(1),m(d).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(d=+e[0][1],f=+e[1][1],(l=+e[0][0])>(u=+e[1][0])&&(e=l,l=u,u=e),d>f&&(e=d,d=f,f=e),t.precision(w)):[[l,d],[u,f]]},t.extentMinor=function(e){return arguments.length?(h=+e[0][1],c=+e[1][1],(a=+e[0][0])>(n=+e[1][0])&&(e=a,a=n,n=e),h>c&&(e=h,h=c,c=e),t.precision(w)):[[a,h],[n,c]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(b=+e[0],x=+e[1],t):[b,x]},t.stepMinor=function(e){return arguments.length?(y=+e[0],_=+e[1],t):[y,_]},t.precision=function(e){return arguments.length?(w=+e,p=r(h,c,90),g=i(a,n,w),v=r(d,f,90),m=i(l,u,w),t):w},t.extentMajor([[-180,-90+s.i],[180,90-s.i]]).extentMinor([[-180,-80-s.i],[180,80+s.i]])}e.a=a,e.b=function(){return a()()};var o=n(16),s=n(5)},function(t,e,n){"use strict";var r=n(5);e.a=function(t,e){var n=t[0]*r.r,i=t[1]*r.r,a=e[0]*r.r,o=e[1]*r.r,s=Object(r.g)(i),u=Object(r.t)(i),l=Object(r.g)(o),c=Object(r.t)(o),h=s*Object(r.g)(n),f=s*Object(r.t)(n),d=l*Object(r.g)(a),p=l*Object(r.t)(a),g=2*Object(r.c)(Object(r.u)(Object(r.m)(o-i)+s*l*Object(r.m)(a-n))),v=Object(r.t)(g),m=g?function(t){var e=Object(r.t)(t*=g)/v,n=Object(r.t)(g-t)/v,i=n*h+e*d,a=n*f+e*p,o=n*u+e*c;return[Object(r.e)(a,i)*r.h,Object(r.e)(o,Object(r.u)(i*i+a*a))*r.h]}:function(){return[n*r.h,i*r.h]};return m.distance=g,m}},function(t,e,n){"use strict";var r=n(93),i=n(30),a=n(331),o=n(175),s=n(332),u=n(333),l=n(334),c=n(335);e.a=function(t,e){function n(t){return t&&("function"==typeof d&&f.pointRadius(+d.apply(this,arguments)),Object(i.a)(t,h(f))),f.result()}var h,f,d=4.5;return n.area=function(t){return Object(i.a)(t,h(a.a)),a.a.result()},n.measure=function(t){return Object(i.a)(t,h(l.a)),l.a.result()},n.bounds=function(t){return Object(i.a)(t,h(o.a)),o.a.result()},n.centroid=function(t){return Object(i.a)(t,h(s.a)),s.a.result()},n.projection=function(e){return arguments.length?(h=null==e?(t=null,r.a):(t=e).stream,n):t},n.context=function(t){return arguments.length?(f=null==t?(e=null,new c.a):new u.a(e=t),"function"!=typeof d&&f.pointRadius(d),n):e},n.pointRadius=function(t){return arguments.length?(d="function"==typeof t?t:(f.pointRadius(+t),+t),n):d},n.projection(t).context(e)}},function(t,e,n){"use strict";function r(){v.point=i}function i(t,e){v.point=a,s=l=t,u=c=e}function a(t,e){g.add(c*t-l*e),l=t,c=e}function o(){a(s,u)}var s,u,l,c,h=n(36),f=n(5),d=n(25),p=Object(h.a)(),g=Object(h.a)(),v={point:d.a,lineStart:d.a,lineEnd:d.a,polygonStart:function(){v.lineStart=r,v.lineEnd=o},polygonEnd:function(){v.lineStart=v.lineEnd=v.point=d.a,p.add(Object(f.a)(g)),g.reset()},result:function(){var t=p/2;return p.reset(),t}};e.a=v},function(t,e,n){"use strict";function r(t,e){m+=t,y+=e,++_}function i(){M.point=a}function a(t,e){M.point=o,r(p=t,g=e)}function o(t,e){var n=t-p,i=e-g,a=Object(v.u)(n*n+i*i);b+=a*(p+t)/2,x+=a*(g+e)/2,w+=a,r(p=t,g=e)}function s(){M.point=r}function u(){M.point=c}function l(){h(f,d)}function c(t,e){M.point=h,r(f=p=t,d=g=e)}function h(t,e){var n=t-p,i=e-g,a=Object(v.u)(n*n+i*i);b+=a*(p+t)/2,x+=a*(g+e)/2,w+=a,S+=(a=g*t-p*e)*(p+t),T+=a*(g+e),O+=3*a,r(p=t,g=e)}var f,d,p,g,v=n(5),m=0,y=0,_=0,b=0,x=0,w=0,S=0,T=0,O=0,M={point:r,lineStart:i,lineEnd:s,polygonStart:function(){M.lineStart=u,M.lineEnd=l},polygonEnd:function(){M.point=r,M.lineStart=i,M.lineEnd=s},result:function(){var t=O?[S/O,T/O]:w?[b/w,x/w]:_?[m/_,y/_]:[NaN,NaN];return m=y=_=b=x=w=S=T=O=0,t}};e.a=M},function(t,e,n){"use strict";function r(t){this._context=t}e.a=r;var i=n(5),a=n(25);r.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,i.w)}},result:a.a}},function(t,e,n){"use strict";function r(t,e){p.point=i,o=u=t,s=l=e}function i(t,e){u-=t,l-=e,d.add(Object(h.u)(u*u+l*l)),u=t,l=e}var a,o,s,u,l,c=n(36),h=n(5),f=n(25),d=Object(c.a)(),p={point:f.a,lineStart:function(){p.point=r},lineEnd:function(){a&&i(o,s),p.point=f.a},polygonStart:function(){a=!0},polygonEnd:function(){a=null},result:function(){var t=+d;return d.reset(),t}};e.a=p},function(t,e,n){"use strict";function r(){this._string=[]}function i(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}e.a=r,r.prototype={_radius:4.5,_circle:i(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=i(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}}},function(t,e,n){"use strict";var r=n(177),i=n(5);e.a=Object(r.a)(function(){return!0},function(t){var e,n=NaN,r=NaN,a=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var u=o>0?i.o:-i.o,l=Object(i.a)(o-n);Object(i.a)(l-i.o)<i.i?(t.point(n,r=(r+s)/2>0?i.l:-i.l),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),e=0):a!==u&&l>=i.o&&(Object(i.a)(n-a)<i.i&&(n-=a*i.i),Object(i.a)(o-u)<i.i&&(o-=u*i.i),r=function(t,e,n,r){var a,o,s=Object(i.t)(t-n);return Object(i.a)(s)>i.i?Object(i.d)((Object(i.t)(e)*(o=Object(i.g)(r))*Object(i.t)(n)-Object(i.t)(r)*(a=Object(i.g)(e))*Object(i.t)(t))/(a*o*s)):(e+r)/2}(n,r,o,s),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(u,r),e=0),t.point(n=o,r=s),a=u},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var a;if(null==t)r.point(-i.o,a=n*i.l),r.point(0,a),r.point(i.o,a),r.point(i.o,0),r.point(i.o,-a),r.point(0,-a),r.point(-i.o,-a),r.point(-i.o,0),r.point(-i.o,a);else if(Object(i.a)(t[0]-e[0])>i.i){var o=t[0]<e[0]?i.o:-i.o;r.point(-o,a=n*o/2),r.point(0,a),r.point(o,a)}else r.point(e[0],e[1])},[-i.o,-i.l])},function(t,e,n){"use strict";var r=n(43),i=n(155),a=n(5),o=n(159),s=n(177);e.a=function(t,e){function n(t,e){return Object(a.g)(t)*Object(a.g)(e)>c}function u(t,e,n){var i=Object(r.a)(t),o=Object(r.a)(e),s=[1,0,0],u=Object(r.c)(i,o),l=Object(r.d)(u,u),h=u[0],f=l-h*h;if(!f)return!n&&t;var d=c*l/f,p=-c*h/f,g=Object(r.c)(s,u),v=Object(r.f)(s,d),m=Object(r.f)(u,p);Object(r.b)(v,m);var y=g,_=Object(r.d)(v,y),b=Object(r.d)(y,y),x=_*_-b*(Object(r.d)(v,v)-1);if(!(x<0)){var w=Object(a.u)(x),S=Object(r.f)(y,(-_-w)/b);if(Object(r.b)(S,v),S=Object(r.g)(S),!n)return S;var T,O=t[0],M=e[0],k=t[1],C=e[1];M<O&&(T=O,O=M,M=T);var E=M-O,A=Object(a.a)(E-a.o)<a.i;if(!A&&C<k&&(T=k,k=C,C=T),A||E<a.i?A?k+C>0^S[1]<(Object(a.a)(S[0]-O)<a.i?k:C):k<=S[1]&&S[1]<=C:E>a.o^(O<=S[0]&&S[0]<=M)){var I=Object(r.f)(y,(-_+w)/b);return Object(r.b)(I,v),[S,Object(r.g)(I)]}}}function l(e,n){var r=h?t:a.o-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var c=Object(a.g)(t),h=c>0,f=Object(a.a)(c)>a.i;return Object(s.a)(n,function(t){var e,r,i,s,c;return{lineStart:function(){s=i=!1,c=1},point:function(d,p){var g,v=[d,p],m=n(d,p),y=h?m?0:l(d,p):m?l(d+(d<0?a.o:-a.o),p):0;if(!e&&(s=i=m)&&t.lineStart(),m!==i&&(!(g=u(e,v))||Object(o.a)(e,g)||Object(o.a)(v,g))&&(v[0]+=a.i,v[1]+=a.i,m=n(v[0],v[1])),m!==i)c=0,m?(t.lineStart(),g=u(v,e),t.point(g[0],g[1])):(g=u(e,v),t.point(g[0],g[1]),t.lineEnd()),e=g;else if(f&&e&&h^m){var _;y&r||!(_=u(v,e,!0))||(c=0,h?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1])))}!m||e&&Object(o.a)(e,v)||t.point(v[0],v[1]),e=v,i=m,r=y},lineEnd:function(){i&&t.lineEnd(),e=null},clean:function(){return c|(s&&i)<<1}}},function(n,r,a,o){Object(i.a)(o,t,e,a,n,r)},h?[0,-t]:[-a.o,t-a.o])}},function(t,e,n){"use strict";var r=n(43),i=n(5),a=n(67),o=16,s=Object(i.g)(30*i.r);e.a=function(t,e){return+e?function(t,e){function n(r,a,o,u,l,c,h,f,d,p,g,v,m,y){var _=h-r,b=f-a,x=_*_+b*b;if(x>4*e&&m--){var w=u+p,S=l+g,T=c+v,O=Object(i.u)(w*w+S*S+T*T),M=Object(i.c)(T/=O),k=Object(i.a)(Object(i.a)(T)-1)<i.i||Object(i.a)(o-d)<i.i?(o+d)/2:Object(i.e)(S,w),C=t(k,M),E=C[0],A=C[1],I=E-r,P=A-a,L=b*I-_*P;(L*L/x>e||Object(i.a)((_*I+b*P)/x-.5)>.3||u*p+l*g+c*v<s)&&(n(r,a,o,u,l,c,E,A,k,w/=O,S/=O,T,m,y),y.point(E,A),n(E,A,k,w,S,T,h,f,d,p,g,v,m,y))}}return function(e){function i(n,r){n=t(n,r),e.point(n[0],n[1])}function a(){_=NaN,T.point=s,e.lineStart()}function s(i,a){var s=Object(r.a)([i,a]),u=t(i,a);n(_,b,y,x,w,S,_=u[0],b=u[1],y=i,x=s[0],w=s[1],S=s[2],o,e),e.point(_,b)}function u(){T.point=i,e.lineEnd()}function l(){a(),T.point=c,T.lineEnd=h}function c(t,e){s(f=t,e),d=_,p=b,g=x,v=w,m=S,T.point=s}function h(){n(_,b,y,x,w,S,d,p,f,g,v,m,o,e),T.lineEnd=u,u()}var f,d,p,g,v,m,y,_,b,x,w,S,T={point:i,lineStart:a,lineEnd:u,polygonStart:function(){e.polygonStart(),T.lineStart=l},polygonEnd:function(){e.polygonEnd(),T.lineStart=a}};return T}}(t,e):function(t){return Object(a.b)({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}},function(t,e,n){"use strict";e.a=function(t){function e(t,e){return[t*n,Object(r.t)(e)/n]}var n=Object(r.g)(t);return e.invert=function(t,e){return[t/n,Object(r.c)(e*n)]},e};var r=n(5)},function(t,e,n){"use strict";var r=n(5),i=n(176),a=n(94),o=n(96);e.a=function(){function t(t){var e=t[0],n=t[1];return h=null,u.point(e,n),h||(l.point(e,n),h)||(c.point(e,n),h)}function e(){return n=s=null,t}var n,s,u,l,c,h,f=Object(i.a)(),d=Object(a.b)().rotate([154,0]).center([-2,58.5]).parallels([55,65]),p=Object(a.b)().rotate([157,0]).center([-3,19.9]).parallels([8,18]),g={point:function(t,e){h=[t,e]}};return t.invert=function(t){var e=f.scale(),n=f.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?d:i>=.166&&i<.234&&r>=-.214&&r<-.115?p:f).invert(t)},t.stream=function(t){return n&&s===t?n:n=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([f.stream(s=t),d.stream(t),p.stream(t)])},t.precision=function(t){return arguments.length?(f.precision(t),d.precision(t),p.precision(t),e()):f.precision()},t.scale=function(e){return arguments.length?(f.scale(e),d.scale(.35*e),p.scale(e),t.translate(f.translate())):f.scale()},t.translate=function(t){if(!arguments.length)return f.translate();var n=f.scale(),i=+t[0],a=+t[1];return u=f.translate(t).clipExtent([[i-.455*n,a-.238*n],[i+.455*n,a+.238*n]]).stream(g),l=d.translate([i-.307*n,a+.201*n]).clipExtent([[i-.425*n+r.i,a+.12*n+r.i],[i-.214*n-r.i,a+.234*n-r.i]]).stream(g),c=p.translate([i-.205*n,a+.212*n]).clipExtent([[i-.214*n+r.i,a+.166*n+r.i],[i-.115*n-r.i,a+.234*n-r.i]]).stream(g),e()},t.fitExtent=function(e,n){return Object(o.a)(t,e,n)},t.fitSize=function(e,n){return Object(o.b)(t,e,n)},t.scale(1070)}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(5),i=n(45),a=n(21),o=Object(i.b)(function(t){return Object(r.u)(2/(1+t))});o.invert=Object(i.a)(function(t){return 2*Object(r.c)(t/2)}),e.b=function(){return Object(a.a)(o).scale(124.75).clipAngle(179.999)}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(5),i=n(45),a=n(21),o=Object(i.b)(function(t){return(t=Object(r.b)(t))&&t/Object(r.t)(t)});o.invert=Object(i.a)(function(t){return t}),e.b=function(){return Object(a.a)(o).scale(79.4188).clipAngle(179.999)}},function(t,e,n){"use strict";function r(t){return Object(a.v)((a.l+t)/2)}function i(t,e){function n(t,e){u>0?e<-a.l+a.i&&(e=-a.l+a.i):e>a.l-a.i&&(e=a.l-a.i);var n=u/Object(a.p)(r(e),o);return[n*Object(a.t)(o*t),u-n*Object(a.g)(o*t)]}var i=Object(a.g)(t),o=t===e?Object(a.t)(t):Object(a.n)(i/Object(a.g)(e))/Object(a.n)(r(e)/r(t)),u=i*Object(a.p)(r(t),o)/o;return o?(n.invert=function(t,e){var n=u-e,r=Object(a.s)(o)*Object(a.u)(t*t+n*n);return[Object(a.e)(t,Object(a.a)(n))/o*Object(a.s)(n),2*Object(a.d)(Object(a.p)(u/r,1/o))-a.l]},n):s.c}e.a=i;var a=n(5),o=n(95),s=n(97);e.b=function(){return Object(o.a)(i).scale(109.5).parallels([30,30])}},function(t,e,n){"use strict";function r(t,e){function n(t,e){var n=s-e,r=a*t;return[n*Object(i.t)(r),s-n*Object(i.g)(r)]}var r=Object(i.g)(t),a=t===e?Object(i.t)(t):(r-Object(i.g)(e))/(e-t),s=r/a+t;return Object(i.a)(a)<i.i?o.b:(n.invert=function(t,e){var n=s-e;return[Object(i.e)(t,Object(i.a)(n))/a*Object(i.s)(n),s-Object(i.s)(a)*Object(i.u)(t*t+n*n)]},n)}e.a=r;var i=n(5),a=n(95),o=n(178);e.b=function(){return Object(a.a)(r).scale(131.154).center([0,13.9389])}},function(t,e,n){"use strict";function r(t,e){var n=Object(i.g)(e),r=Object(i.g)(t)*n;return[n*Object(i.t)(t)/r,Object(i.t)(e)/r]}e.b=r;var i=n(5),a=n(45),o=n(21);r.invert=Object(a.a)(i.d),e.a=function(){return Object(o.a)(r).scale(144.049).clipAngle(60)}},function(t,e,n){"use strict";function r(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?a.a:Object(o.b)({point:function(i,a){this.stream.point(i*t+n,a*e+r)}})}var i=n(91),a=n(93),o=n(67),s=n(96);e.a=function(){function t(){return u=l=null,c}var e,n,o,u,l,c,h=1,f=0,d=0,p=1,g=1,v=a.a,m=null,y=a.a;return c={stream:function(t){return u&&l===t?u:u=v(y(l=t))},clipExtent:function(r){return arguments.length?(y=null==r?(m=e=n=o=null,a.a):Object(i.a)(m=+r[0][0],e=+r[0][1],n=+r[1][0],o=+r[1][1]),t()):null==m?null:[[m,e],[n,o]]},scale:function(e){return arguments.length?(v=r((h=+e)*p,h*g,f,d),t()):h},translate:function(e){return arguments.length?(v=r(h*p,h*g,f=+e[0],d=+e[1]),t()):[f,d]},reflectX:function(e){return arguments.length?(v=r(h*(p=e?-1:1),h*g,f,d),t()):p<0},reflectY:function(e){return arguments.length?(v=r(h*p,h*(g=e?-1:1),f,d),t()):g<0},fitExtent:function(t,e){return Object(s.a)(c,t,e)},fitSize:function(t,e){return Object(s.b)(c,t,e)}}}},function(t,e,n){"use strict";function r(t,e){return[Object(i.g)(e)*Object(i.t)(t),Object(i.t)(e)]}e.b=r;var i=n(5),a=n(45),o=n(21);r.invert=Object(a.a)(i.c),e.a=function(){return Object(o.a)(r).scale(249.5).clipAngle(90+i.i)}},function(t,e,n){"use strict";function r(t,e){var n=Object(i.g)(e),r=1+Object(i.g)(t)*n;return[n*Object(i.t)(t)/r,Object(i.t)(e)/r]}e.b=r;var i=n(5),a=n(45),o=n(21);r.invert=Object(a.a)(function(t){return 2*Object(i.d)(t)}),e.a=function(){return Object(o.a)(r).scale(250).clipAngle(142)}},function(t,e,n){"use strict";function r(t,e){return[Object(i.n)(Object(i.v)((i.l+e)/2)),-t]}e.b=r;var i=n(5),a=n(97);r.invert=function(t,e){return[-e,2*Object(i.d)(Object(i.k)(t))-i.l]},e.a=function(){var t=Object(a.b)(r),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}},function(t,e,n){"use strict";function r(t){function e(t,e){var n=Object(a.h)(t),i=Object(a.h)(e),o=Object(a.y)(e),s=i*n,u=-((1-s?Object(a.p)((1+s)/2)/(1-s):-.5)+r/(1+s));return[u*i*Object(a.y)(t),u*o]}var n=Object(a.F)(t/2),r=2*Object(a.p)(Object(a.h)(t/2))/(n*n);return e.invert=function(e,n){var i,o=Object(a.B)(e*e+n*n),s=-t/2,u=50;if(!o)return[0,0];do{var l=s/2,c=Object(a.h)(l),h=Object(a.y)(l),f=Object(a.F)(l),d=Object(a.p)(1/c);s-=i=(2/f*d-r*f-o)/(-d/(h*h)+1-r/(2*c*c))}while(Object(a.a)(i)>a.k&&--u>0);var p=Object(a.y)(s);return[Object(a.g)(e*p,o*Object(a.h)(s)),Object(a.e)(n*p/o)]},e}e.a=r;var i=n(0),a=n(1);e.b=function(){var t=a.o,e=Object(i.geoProjectionMutator)(r),n=e(t);return n.radius=function(n){return arguments.length?e(t=n*a.v):t*a.j},n.scale(179.976).clipAngle(147)}},function(t,e,n){"use strict";function r(t){function e(t,e){var u=Object(a.h)(e),l=Object(a.h)(t/=2);return[(1+u)*Object(a.y)(t),(i*e>-Object(a.g)(l,o)-.001?0:10*-i)+s+Object(a.y)(e)*r-(1+u)*n*l]}var n=Object(a.y)(t),r=Object(a.h)(t),i=t>=0?1:-1,o=Object(a.F)(i*t),s=(1+n-r)/2;return e.invert=function(t,e){var u=0,l=0,c=50;do{var h=Object(a.h)(u),f=Object(a.y)(u),d=Object(a.h)(l),p=Object(a.y)(l),g=1+d,v=g*f-t,m=s+p*r-g*n*h-e,y=g*h/2,_=-f*p,b=n*g*f/2,x=r*d+n*h*p,w=_*b-x*y,S=(m*_-v*x)/w/2,T=(v*b-m*y)/w;u-=S,l-=T}while((Object(a.a)(S)>a.k||Object(a.a)(T)>a.k)&&--c>0);return i*l>-Object(a.g)(Object(a.h)(u),o)-.001?[2*u,l]:null},e}e.a=r;var i=n(0),a=n(1);e.b=function(){var t=20*a.v,e=t>=0?1:-1,n=Object(a.F)(e*t),o=Object(i.geoProjectionMutator)(r),s=o(t),u=s.stream;return s.parallel=function(r){return arguments.length?(n=Object(a.F)((e=(t=r*a.v)>=0?1:-1)*t),o(t)):t*a.j},s.stream=function(r){var i=s.rotate(),o=u(r),l=(s.rotate([0,0]),u(r));return s.rotate(i),o.sphere=function(){l.polygonStart(),l.lineStart();for(var r=-180*e;e*r<180;r+=90*e)l.point(r,90*e);for(;e*(r-=t)>=-180;)l.point(r,e*-Object(a.g)(Object(a.h)(r*a.v/2),n)*a.j);l.lineEnd(),l.polygonEnd()},o},s.scale(218.695).center([0,28.0974])}},function(t,e,n){"use strict";function r(t,e){var n=Object(a.a)(e);return n<a.u?[t,Object(a.p)(Object(a.F)(a.u+e/2))]:[t*Object(a.h)(n)*(2*a.D-1/Object(a.y)(n)),Object(a.x)(e)*(2*a.D*(n-a.u)-Object(a.p)(Object(a.F)(n/2)))]}e.a=r;var i=n(0),a=n(1),o=Object(a.B)(8),s=Object(a.p)(1+a.D);r.invert=function(t,e){if((r=Object(a.a)(e))<s)return[t,2*Object(a.f)(Object(a.m)(e))-a.o];var n,r,i=a.u,u=25;do{var l=Object(a.h)(i/2),c=Object(a.F)(i/2);i-=n=(o*(i-a.u)-Object(a.p)(c)-r)/(o-l*l/(2*c))}while(Object(a.a)(n)>a.l&&--u>0);return[t/(Object(a.h)(i)*(o-1/Object(a.y)(i))),Object(a.x)(e)*i]},e.b=function(){return Object(i.geoProjection)(r).scale(112.314)}},function(t,e,n){"use strict";function r(t){function e(t,e){var r=Object(i.geoAzimuthalEquidistantRaw)(t,e);if(Object(a.a)(t)>a.o){var o=Object(a.g)(r[1],r[0]),s=Object(a.B)(r[0]*r[0]+r[1]*r[1]),u=n*Object(a.w)((o-a.o)/n)+a.o,l=Object(a.g)(Object(a.y)(o-=u),2-Object(a.h)(o));o=u+Object(a.e)(a.s/s*Object(a.y)(l))-l,r[0]=s*Object(a.h)(o),r[1]=s*Object(a.y)(o)}return r}var n=2*a.s/t;return e.invert=function(t,e){var r=Object(a.B)(t*t+e*e);if(r>a.o){var o=Object(a.g)(e,t),s=n*Object(a.w)((o-a.o)/n)+a.o,u=o>s?-1:1,l=r*Object(a.h)(s-o),c=1/Object(a.F)(u*Object(a.b)((l-a.s)/Object(a.B)(a.s*(a.s-2*l)+r*r)));o=s+2*Object(a.f)((c+u*Object(a.B)(c*c-3))/3),t=r*Object(a.h)(o),e=r*Object(a.y)(o)}return i.geoAzimuthalEquidistantRaw.invert(t,e)},e}e.a=r;var i=n(0),a=n(1);e.b=function(){var t=5,e=Object(i.geoProjectionMutator)(r),n=e(t),o=n.stream,s=-Object(a.h)(.01*a.v),u=Object(a.y)(.01*a.v);return n.lobes=function(n){return arguments.length?e(t=+n):t},n.stream=function(e){var r=n.rotate(),i=o(e),l=(n.rotate([0,0]),o(e));return n.rotate(r),i.sphere=function(){l.polygonStart(),l.lineStart();for(var e=0,n=360/t,r=2*a.s/t,i=90-180/t,o=a.o;e<t;++e,i-=n,o-=r)l.point(Object(a.g)(u*Object(a.h)(o),s)*a.j,Object(a.e)(u*Object(a.y)(o))*a.j),i<-90?(l.point(-90,-180-i-.01),l.point(-90,-180-i+.01)):(l.point(90,i+.01),l.point(90,i-.01));l.lineEnd(),l.polygonEnd()},i},n.scale(87.8076).center([0,17.1875]).clipAngle(179.999)}},function(t,e,n){"use strict";function r(t){function e(e,r){var i=n+t-r,o=i?e*Object(a.h)(r)/i:i;return[i*Object(a.y)(o),n-i*Object(a.h)(o)]}if(!t)return o.b;var n=1/Object(a.F)(t);return e.invert=function(e,r){var i=Object(a.B)(e*e+(r=n-r)*r),o=n+t-i;return[i/Object(a.h)(o)*Object(a.g)(e,r),o]},e}e.a=r;var i=n(38),a=n(1),o=n(46);e.b=function(){return Object(i.a)(r).scale(123.082).center([0,26.1441]).parallel(45)}},function(t,e,n){"use strict";function r(t){function e(e,n){var r=a.o-n,i=r?e*t*Object(a.y)(r)/r:r;return[r*Object(a.y)(i)/t,a.o-r*Object(a.h)(i)]}return e.invert=function(e,n){var r=e*t,i=a.o-n,o=Object(a.B)(r*r+i*i),s=Object(a.g)(r,i);return[(o?o/Object(a.y)(o):1)*s/t,a.o-o]},e}e.a=r;var i=n(0),a=n(1);e.b=function(){var t=.5,e=Object(i.geoProjectionMutator)(r),n=e(t);return n.fraction=function(n){return arguments.length?e(t=+n):t},n.scale(158.837)}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(1),a=n(26),o=Object(a.b)(1,4/i.s,i.s);e.b=function(){return Object(r.geoProjection)(o).scale(152.63)}},function(t,e,n){"use strict";function r(t,e,n,r,i,a){var o,s=Object(c.h)(a);if(Object(c.a)(t)>1||Object(c.a)(a)>1)o=Object(c.b)(n*i+e*r*s);else{var u=Object(c.y)(t/2),l=Object(c.y)(a/2);o=2*Object(c.e)(Object(c.B)(u*u+e*r*l*l))}return Object(c.a)(o)>c.k?[o,Object(c.g)(r*Object(c.y)(a),e*i-n*r*s)]:[0,0]}function i(t,e,n){return Object(c.b)((t*t+e*e-n*n)/(2*t*e))}function a(t){return t-2*c.s*Object(c.n)((t+c.s)/(2*c.s))}function o(t,e,n){for(var o,s=[[t[0],t[1],Object(c.y)(t[1]),Object(c.h)(t[1])],[e[0],e[1],Object(c.y)(e[1]),Object(c.h)(e[1])],[n[0],n[1],Object(c.y)(n[1]),Object(c.h)(n[1])]],u=s[2],l=0;l<3;++l,u=o)u.v=r((o=s[l])[1]-u[1],u[3],u[2],o[3],o[2],o[0]-u[0]),u.point=[0,0];var h=i(s[0].v[0],s[2].v[0],s[1].v[0]),f=i(s[0].v[0],s[1].v[0],s[2].v[0]),d=c.s-h;s[2].point[1]=0,s[0].point[0]=-(s[1].point[0]=s[0].v[0]/2);var p=[s[2].point[0]=s[0].point[0]+s[2].v[0]*Object(c.h)(h),2*(s[0].point[1]=s[1].point[1]=s[2].v[0]*Object(c.y)(h))];return function(t,e){var n,o=Object(c.y)(e),u=Object(c.h)(e),l=new Array(3);for(n=0;n<3;++n){var h=s[n];if(l[n]=r(e-h[1],h[3],h[2],u,o,t-h[0]),!l[n][0])return h.point;l[n][1]=a(l[n][1]-h.v[1])}var g=p.slice();for(n=0;n<3;++n){var v=i(s[n].v[0],l[n][0],l[2==n?0:n+1][0]);l[n][1]<0&&(v=-v),n?1==n?(v=f-v,g[0]-=l[n][0]*Object(c.h)(v),g[1]-=l[n][0]*Object(c.y)(v)):(v=d-v,g[0]+=l[n][0]*Object(c.h)(v),g[1]+=l[n][0]*Object(c.y)(v)):(g[0]+=l[n][0]*Object(c.h)(v),g[1]-=l[n][0]*Object(c.y)(v))}return g[0]/=3,g[1]/=3,g}}function s(t){return t[0]*=c.v,t[1]*=c.v,t}function u(t,e,n){var r=Object(l.geoCentroid)({type:"MultiPoint",coordinates:[t,e,n]}),i=[-r[0],-r[1]],a=Object(l.geoRotation)(i),u=Object(l.geoProjection)(o(s(a(t)),s(a(e)),s(a(n)))).rotate(i),c=u.center;return delete u.rotate,u.center=function(t){return arguments.length?c(a(t)):a.invert(c())},u.clipAngle(90)}e.b=o,e.a=function(){return u([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},e.c=u;var l=n(0),c=n(1)},function(t,e,n){"use strict";function r(t){function e(t,e){return[t,(t?t/Object(i.y)(t):1)*(Object(i.y)(e)*Object(i.h)(t)-n*Object(i.h)(e))]}var n=Object(i.F)(t);return e.invert=n?function(t,e){t&&(e*=Object(i.y)(t)/t);var r=Object(i.h)(t);return[t,2*Object(i.g)(Object(i.B)(r*r+n*n-e*e)-r,n-e)]}:function(t,e){return[t,Object(i.e)(t?e*Object(i.F)(t)/t:e)]},e}e.a=r;var i=n(1),a=n(38);e.b=function(){return Object(a.a)(r).scale(249.828).clipAngle(90)}},function(t,e,n){"use strict";function r(t,e){return[o*t*(2*Object(a.h)(2*e/3)-1)/a.E,o*a.E*Object(a.y)(e/3)]}e.a=r;var i=n(0),a=n(1),o=Object(a.B)(3);r.invert=function(t,e){var n=3*Object(a.e)(e/(o*a.E));return[a.E*t/(o*(2*Object(a.h)(2*n/3)-1)),n]},e.b=function(){return Object(i.geoProjection)(r).scale(156.19)}},function(t,e,n){"use strict";function r(t){function e(t,e){return[t*n,(1+n)*Object(i.F)(e/2)]}var n=Object(i.h)(t);return e.invert=function(t,e){return[t/n,2*Object(i.f)(e/(1+n))]},e}e.a=r;var i=n(1),a=n(38);e.b=function(){return Object(a.a)(r).scale(124.75)}},function(t,e,n){"use strict";function r(t,e){var n=Object(a.B)(8/(3*a.s));return[n*t*(1-Object(a.a)(e)/a.s),n*e]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){var n=Object(a.B)(8/(3*a.s)),r=e/n;return[t/(n*(1-Object(a.a)(r)/a.s)),r]},e.a=function(){return Object(i.geoProjection)(r).scale(165.664)}},function(t,e,n){"use strict";function r(t,e){var n=Object(a.B)(4-3*Object(a.y)(Object(a.a)(e)));return[2/Object(a.B)(6*a.s)*t*n,Object(a.x)(e)*Object(a.B)(2*a.s/3)*(2-n)]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){var n=2-Object(a.a)(e)/Object(a.B)(2*a.s/3);return[t*Object(a.B)(6*a.s)/(2*n),Object(a.x)(e)*Object(a.e)((4-n*n)/3)]},e.a=function(){return Object(i.geoProjection)(r).scale(165.664)}},function(t,e,n){"use strict";function r(t,e){var n=Object(a.B)(a.s*(4+a.s));return[2/n*t*(1+Object(a.B)(1-4*e*e/(a.s*a.s))),4/n*e]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){var n=Object(a.B)(a.s*(4+a.s))/2;return[t*n/(1+Object(a.B)(1-e*e*(4+a.s)/(4*a.s))),e*n/2]},e.a=function(){return Object(i.geoProjection)(r).scale(180.739)}},function(t,e,n){"use strict";function r(t,e){var n=(2+a.o)*Object(a.y)(e);e/=2;for(var r=0,i=1/0;r<10&&Object(a.a)(i)>a.k;r++){var o=Object(a.h)(e);e-=i=(e+Object(a.y)(e)*(o+2)-n)/(2*o*(1+o))}return[2/Object(a.B)(a.s*(4+a.s))*t*(1+Object(a.h)(e)),2*Object(a.B)(a.s/(4+a.s))*Object(a.y)(e)]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){var n=e*Object(a.B)((4+a.s)/a.s)/2,r=Object(a.e)(n),i=Object(a.h)(r);return[t/(2/Object(a.B)(a.s*(4+a.s))*(1+i)),Object(a.e)((r+n*(i+2))/(2+a.o))]},e.a=function(){return Object(i.geoProjection)(r).scale(180.739)}},function(t,e,n){"use strict";function r(t,e){return[t*(1+Object(a.h)(e))/Object(a.B)(2+a.s),2*e/Object(a.B)(2+a.s)]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){var n=Object(a.B)(2+a.s),r=e*n/2;return[n*t/(1+Object(a.h)(r)),r]},e.a=function(){return Object(i.geoProjection)(r).scale(173.044)}},function(t,e,n){"use strict";function r(t,e){for(var n=(1+a.o)*Object(a.y)(e),r=0,i=1/0;r<10&&Object(a.a)(i)>a.k;r++)e-=i=(e+Object(a.y)(e)-n)/(1+Object(a.h)(e));return n=Object(a.B)(2+a.s),[t*(1+Object(a.h)(e))/n,2*e/n]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){var n=1+a.o,r=Object(a.B)(n/2);return[2*t*r/(1+Object(a.h)(e*=r)),Object(a.e)((e+Object(a.y)(e))/n)]},e.a=function(){return Object(i.geoProjection)(r).scale(173.044)}},function(t,e,n){"use strict";function r(t,e){var n=Object(o.y)(t/=2),r=Object(o.h)(t),i=Object(o.B)(Object(o.h)(e)),a=Object(o.h)(e/=2),u=Object(o.y)(e)/(a+o.D*r*i),l=Object(o.B)(2/(1+u*u)),c=Object(o.B)((o.D*a+(r+n)*i)/(o.D*a+(r-n)*i));return[s*(l*(c-1/c)-2*Object(o.p)(c)),s*(l*u*(c+1/c)-2*Object(o.f)(u))]}e.b=r;var i=n(0),a=n(181),o=n(1),s=3+2*o.D;r.invert=function(t,e){if(!(n=a.a.invert(t/1.2,1.065*e)))return null;var n,r=n[0],i=n[1],u=20;t/=s,e/=s;do{var l=r/2,c=i/2,h=Object(o.y)(l),f=Object(o.h)(l),d=Object(o.y)(c),p=Object(o.h)(c),g=Object(o.h)(i),v=Object(o.B)(g),m=d/(p+o.D*f*v),y=m*m,_=Object(o.B)(2/(1+y)),b=(o.D*p+(f+h)*v)/(o.D*p+(f-h)*v),x=Object(o.B)(b),w=x-1/x,S=x+1/x,T=_*w-2*Object(o.p)(x)-t,O=_*m*S-2*Object(o.f)(m)-e,M=d&&o.C*v*h*y/d,k=(o.D*f*p+v)/(2*(p+o.D*f*v)*(p+o.D*f*v)*v),C=-.5*m*_*_*_,E=C*M,A=C*k,I=(I=2*p+o.D*v*(f-h))*I*x,P=(o.D*f*p*v+g)/I,L=-o.D*h*d/(v*I),D=w*E-2*P/x+_*(P+P/b),j=w*A-2*L/x+_*(L+L/b),R=m*S*E-2*M/(1+y)+_*S*M+_*m*(P-P/b),N=m*S*A-2*k/(1+y)+_*S*k+_*m*(L-L/b),B=j*R-N*D;if(!B)break;var F=(O*j-T*N)/B,U=(T*R-O*D)/B;r-=F,i=Object(o.q)(-o.o,Object(o.r)(o.o,i-U))}while((Object(o.a)(F)>o.k||Object(o.a)(U)>o.k)&&--u>0);return Object(o.a)(Object(o.a)(i)-o.o)<o.k?[0,i]:u&&[r,i]},e.a=function(){return Object(i.geoProjection)(r).scale(62.5271)}},function(t,e,n){"use strict";function r(t,e){var n=Object(a.F)(e/2);return[t*o*Object(a.B)(1-n*n),(1+o)*n]}e.b=r;var i=n(0),a=n(1),o=Object(a.h)(35*a.v);r.invert=function(t,e){var n=e/(1+o);return[t&&t/(o*Object(a.B)(1-n*n)),2*Object(a.f)(n)]},e.a=function(){return Object(i.geoProjection)(r).scale(137.152)}},function(t,e,n){"use strict";function r(t,e){var n=e/2,r=Object(a.h)(n);return[2*t/a.E*Object(a.h)(e)*r*r,a.E*Object(a.F)(n)]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){var n=Object(a.f)(e/a.E),r=Object(a.h)(n),i=2*n;return[t*a.E/2/(Object(a.h)(i)*r*r),i]},e.a=function(){return Object(i.geoProjection)(r).scale(135.264)}},function(t,e,n){"use strict";function r(t){return[t[0]/2,Object(o.e)(Object(o.F)(t[1]/2*o.v))*o.j]}function i(t){return[2*t[0],2*Object(o.f)(Object(o.y)(t[1]*o.v))*o.j]}var a=n(0),o=n(1);e.a=function(t){function e(t){return s(r(t))}function n(t){e[t]=function(n){return arguments.length?(s[t](n),e):s[t]()}}null==t&&(t=a.geoOrthographic);var s=t(),u=Object(a.geoEquirectangular)().scale(o.j).precision(0).clipAngle(null).translate([0,0]);return s.invert&&(e.invert=function(t){return i(s.invert(t))}),e.stream=function(t){var e=s.stream(t),n=u.stream({point:function(t,n){e.point(t/2,Object(o.e)(Object(o.F)(-n/2*o.v))*o.j)},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}});return n.sphere=e.sphere,n},e.rotate=function(t){return arguments.length?(u.rotate(t),e):u.rotate()},e.center=function(t){return arguments.length?(s.center(r(t)),e):i(s.center())},n("clipAngle"),n("clipExtent"),n("scale"),n("translate"),n("precision"),e.scale(249.5)}},function(t,e,n){"use strict";function r(t,e){function n(e,n){var l=Object(o.geoAzimuthalEquidistantRaw)(e,n),c=l[0],h=l[1],f=c*c+h*h;if(f>u){var d=Object(s.B)(f),p=Object(s.g)(h,c),g=r*Object(s.w)(p/r),v=p-g,m=t*Object(s.h)(v),y=(t*Object(s.y)(v)-v*Object(s.y)(m))/(s.o-m),_=i(v,y),b=(s.s-t)/a(_,m,s.s);c=d;var x,w=50;do{c-=x=(t+a(_,m,c)*b-d)/(_(c)*b)}while(Object(s.a)(x)>s.k&&--w>0);h=v*Object(s.y)(c),c<s.o&&(h-=y*(c-s.o));var S=Object(s.y)(g),T=Object(s.h)(g);l[0]=c*T-h*S,l[1]=c*S+h*T}return l}var r=2*s.s/e,u=t*t;return n.invert=function(e,n){var l=e*e+n*n;if(l>u){var c=Object(s.B)(l),h=Object(s.g)(n,e),f=r*Object(s.w)(h/r),d=h-f;e=c*Object(s.h)(d),n=c*Object(s.y)(d);for(var p=e-s.o,g=Object(s.y)(e),v=n/g,m=e<s.o?1/0:0,y=10;;){var _=t*Object(s.y)(v),b=t*Object(s.h)(v),x=Object(s.y)(b),w=s.o-b,S=(_-v*x)/w,T=i(v,S);if(Object(s.a)(m)<s.l||!--y)break;v-=m=(v*g-S*p-n)/(g-2*p*(w*(b+v*_*Object(s.h)(b)-x)-_*(_-v*x))/(w*w))}h=f+v,e=(c=t+a(T,b,e)*(s.s-t)/a(T,b,s.s))*Object(s.h)(h),n=c*Object(s.y)(h)}return o.geoAzimuthalEquidistantRaw.invert(e,n)},n}function i(t,e){return function(n){var r=t*Object(s.h)(n);return n<s.o&&(r-=e),Object(s.B)(1+r*r)}}function a(t,e,n){for(var r=(n-e)/50,i=t(e)+t(n),a=1,o=e;a<50;++a)i+=2*t(o+=r);return.5*i*r}e.b=r;var o=n(0),s=n(1);e.a=function(){var t=6,e=30*s.v,n=Object(s.h)(e),i=Object(s.y)(e),a=Object(o.geoProjectionMutator)(r),u=a(e,t),l=u.stream,c=-Object(s.h)(.01*s.v),h=Object(s.y)(.01*s.v);return u.radius=function(r){return arguments.length?(n=Object(s.h)(e=r*s.v),i=Object(s.y)(e),a(e,t)):e*s.j},u.lobes=function(n){return arguments.length?a(e,t=+n):t},u.stream=function(e){var r=u.rotate(),a=l(e),o=(u.rotate([0,0]),l(e));return u.rotate(r),a.sphere=function(){o.polygonStart(),o.lineStart();for(var e=0,r=2*s.s/t,a=0;e<t;++e,a-=r)o.point(Object(s.g)(h*Object(s.h)(a),c)*s.j,Object(s.e)(h*Object(s.y)(a))*s.j),o.point(Object(s.g)(i*Object(s.h)(a-r/2),n)*s.j,Object(s.e)(i*Object(s.y)(a-r/2))*s.j);o.lineEnd(),o.polygonEnd()},a},u.rotate([90,-40]).scale(91.7095).clipAngle(179.999)}},function(t,e,n){"use strict";n.d(e,"b",function(){return a});var r=n(0),i=n(68),a=Object(i.a)(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);e.a=function(){return Object(r.geoProjection)(a).scale(149.995)}},function(t,e,n){"use strict";n.d(e,"b",function(){return a});var r=n(0),i=n(68),a=Object(i.a)(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);e.a=function(){return Object(r.geoProjection)(a).scale(153.93)}},function(t,e,n){"use strict";n.d(e,"b",function(){return o});var r=n(0),i=n(68),a=n(1),o=Object(i.a)(5/6*a.s,-.62636,-.0344,0,1.3493,-.05524,0,.045);e.a=function(){return Object(r.geoProjection)(o).scale(130.945)}},function(t,e,n){"use strict";function r(t,e){var n=t*t,r=e*e;return[t*(1-.162388*r)*(.87-952426e-9*n*n),e*(1+r/12)]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){var n,r=t,i=e,o=50;do{var s=i*i;i-=n=(i*(1+s/12)-e)/(1+s/4)}while(Object(a.a)(n)>a.k&&--o>0);o=50,t/=1-.162388*s;do{var u=(u=r*r)*u;r-=n=(r*(.87-952426e-9*u)-t)/(.87-.00476213*u)}while(Object(a.a)(n)>a.k&&--o>0);return[r,i]},e.a=function(){return Object(i.geoProjection)(r).scale(131.747)}},function(t,e,n){"use strict";n.d(e,"b",function(){return a});var r=n(0),i=n(68),a=Object(i.a)(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);e.a=function(){return Object(r.geoProjection)(a).scale(131.087)}},function(t,e,n){"use strict";function r(t,e){var n,r,i,o,s;if(e<a.k)return[(o=Object(a.y)(t))-(n=e*(t-o*(r=Object(a.h)(t)))/4)*r,r+n*o,1-e*o*o/2,t-n];if(e>=1-a.k)return n=(1-e)/4,i=1/(r=Object(a.i)(t)),[(o=Object(a.G)(t))+n*((s=r*Object(a.A)(t))-t)/(r*r),i-n*o*i*(s-t),i+n*o*i*(s+t),2*Object(a.f)(Object(a.m)(t))-a.o+n*(s-t)/r];var u=[1,0,0,0,0,0,0,0,0],l=[Object(a.B)(e),0,0,0,0,0,0,0,0],c=0;for(r=Object(a.B)(1-e),s=1;Object(a.a)(l[c]/u[c])>a.k&&c<8;)n=u[c++],l[c]=(n-r)/2,u[c]=(n+r)/2,r=Object(a.B)(n*r),s*=2;i=s*u[c]*t;do{o=l[c]*Object(a.y)(r=i)/u[c],i=(Object(a.e)(o)+i)/2}while(--c);return[Object(a.y)(i),o=Object(a.h)(i),o/Object(a.h)(i-r),i]}function i(t,e){if(!e)return t;if(1===e)return Object(a.p)(Object(a.F)(t/2+a.u));for(var n=1,r=Object(a.B)(1-e),i=Object(a.B)(e),o=0;Object(a.a)(i)>a.k;o++){if(t%a.s){var s=Object(a.f)(r*Object(a.F)(t)/n);s<0&&(s+=a.s),t+=s+~~(t/a.s)*a.s}else t+=t;i=(n+r)/2,r=Object(a.B)(n*r),i=((n=i)-r)/2}return t/(Object(a.t)(2,o)*n)}e.c=function(t,e,n){var i,a,o;return t?(i=r(t,n),e?(a=r(e,1-n),[[i[0]*a[2]/(o=a[1]*a[1]+n*i[0]*i[0]*a[0]*a[0]),i[1]*i[2]*a[0]*a[1]/o],[i[1]*a[1]/o,-i[0]*i[2]*a[0]*a[2]/o],[i[2]*a[1]*a[2]/o,-n*i[0]*i[1]*a[0]/o]]):[[i[0],0],[i[1],0],[i[2],0]]):[[0,(a=r(e,1-n))[0]/a[1]],[1/a[1],0],[a[2]/a[1],0]]},e.b=function(t,e,n){var r=Object(a.a)(t),o=Object(a.a)(e),s=Object(a.A)(o);if(r){var u=1/Object(a.y)(r),l=1/(Object(a.F)(r)*Object(a.F)(r)),c=-(l+n*(s*s*u*u)-1+n),h=(n-1)*l,f=(-c+Object(a.B)(c*c-4*h))/2;return[i(Object(a.f)(1/Object(a.B)(f)),n)*Object(a.x)(t),i(Object(a.f)(Object(a.B)((f/l-1)/n)),1-n)*Object(a.x)(e)]}return[0,i(Object(a.f)(s),1-n)*Object(a.x)(e)]},e.a=i;var a=n(1)},function(t,e,n){"use strict";function r(t,e){function n(n,r){var i=Object(a.geoAzimuthalEqualAreaRaw)(n/e,r);return i[0]*=t,i}return arguments.length<2&&(e=t),1===e?a.geoAzimuthalEqualAreaRaw:e===1/0?i:(n.invert=function(n,r){var i=a.geoAzimuthalEqualAreaRaw.invert(n/t,r);return i[0]*=e,i},n)}function i(t,e){return[t*Object(o.h)(e)/Object(o.h)(e/=2),2*Object(o.y)(e)]}e.b=r;var a=n(0),o=n(1);i.invert=function(t,e){var n=2*Object(o.e)(e/2);return[t*Object(o.h)(n/2)/Object(o.h)(n),n]},e.a=function(){var t=2,e=Object(a.geoProjectionMutator)(r),n=e(t);return n.coefficient=function(n){return arguments.length?e(t=+n):t},n.scale(169.529)}},function(t,e,n){"use strict";function r(t){function e(t,e){var i=a(t,e);t=i[0],e=i[1];var s=Object(o.y)(e),u=Object(o.h)(e),l=Object(o.h)(t),c=Object(o.b)(n*s+r*u*l),h=Object(o.y)(c),f=Object(o.a)(h)>o.k?c/h:1;return[f*r*Object(o.y)(t),(Object(o.a)(t)>o.o?f:-f)*(n*u-r*s*l)]}var n=Object(o.y)(t),r=Object(o.h)(t),a=i(t);return a.invert=i(-t),e.invert=function(t,e){var r=Object(o.B)(t*t+e*e),i=-Object(o.y)(r),s=Object(o.h)(r),u=r*s,l=-e*i,c=r*n,h=Object(o.B)(u*u+l*l-c*c),f=Object(o.g)(u*c+l*h,l*c-u*h),d=(r>o.o?-1:1)*Object(o.g)(t*i,r*Object(o.h)(f)*s+e*Object(o.y)(f)*i);return a.invert(d,f)},e}function i(t){var e=Object(o.y)(t),n=Object(o.h)(t);return function(t,r){var i=Object(o.h)(r),a=Object(o.h)(t)*i,s=Object(o.y)(t)*i,u=Object(o.y)(r);return[Object(o.g)(s,a*n-u*e),Object(o.e)(u*n+a*e)]}}e.b=r;var a=n(0),o=n(1);e.a=function(){var t=0,e=Object(a.geoProjectionMutator)(r),n=e(t),i=n.rotate,s=n.stream,u=Object(a.geoCircle)();return n.parallel=function(r){if(!arguments.length)return t*o.j;var i=n.rotate();return e(t=r*o.v).rotate(i)},n.rotate=function(e){return arguments.length?(i.call(n,[e[0],e[1]-t*o.j]),u.center([-e[0],-e[1]]),n):((e=i.call(n))[1]+=t*o.j,e)},n.stream=function(t){return(t=s(t)).sphere=function(){t.polygonStart();var e,n=u.radius(89.99)().coordinates[0],r=n.length-1,i=-1;for(t.lineStart();++i<r;)t.point((e=n[i])[0],e[1]);for(t.lineEnd(),r=(n=u.radius(90.01)().coordinates[0]).length-1,t.lineStart();--i>=0;)t.point((e=n[i])[0],e[1]);t.lineEnd(),t.polygonEnd()},t},n.scale(79.4187).parallel(45).clipAngle(179.999)}},function(t,e,n){"use strict";function r(t){function e(e,l){var p,g=Object(u.a)(l);if(g>n){var v=Object(u.r)(t-1,Object(u.q)(0,Object(u.n)((e+u.s)/h)));e+=u.s*(t-1)/t-v*h,(p=Object(o.a)(e,g))[0]=p[0]*u.H/r-u.H*(t-1)/(2*t)+v*u.H/t,p[1]=i+4*(p[1]-a)*s/u.H,l<0&&(p[1]=-p[1])}else p=c(e,l);return p[0]*=f,p[1]/=d,p}var n=l*u.v,r=Object(o.a)(u.s,n)[0]-Object(o.a)(-u.s,n)[0],i=c(0,n)[1],a=Object(o.a)(0,n)[1],s=u.E-a,h=u.H/t,f=4/u.H,d=i+s*s*4/u.H;return e.invert=function(e,n){e/=f,n*=d;var l=Object(u.a)(n);if(l>i){var p=Object(u.r)(t-1,Object(u.q)(0,Object(u.n)((e+u.s)/h))),g=o.a.invert(e=(e+u.s*(t-1)/t-p*h)*r/u.H,.25*(l-i)*u.H/s+a);return g[0]-=u.s*(t-1)/t-p*h,n<0&&(g[1]=-g[1]),g}return c.invert(e,n)},e}e.b=r;var i=n(16),a=n(0),o=n(98),s=n(183),u=n(1),l=41+48/36+37/3600,c=Object(s.a)(0);e.a=function(){var t=4,e=Object(a.geoProjectionMutator)(r),n=e(t),o=n.stream;return n.lobes=function(n){return arguments.length?e(t=+n):t},n.stream=function(e){var r=n.rotate(),s=o(e),u=(n.rotate([0,0]),o(e));return n.rotate(r),s.sphere=function(){Object(a.geoStream)(function(t){return{type:"Polygon",coordinates:[Object(i.range)(-180,180+t/2,t).map(function(t,e){return[t,1&e?90-1e-6:l]}).concat(Object(i.range)(180,-180-t/2,-t).map(function(t,e){return[t,1&e?1e-6-90:-l]}))]}}(180/t),u)},s},n.scale(239.75)}},function(t,e,n){"use strict";function r(t){function e(e,i){var h,f,d=1-Object(a.y)(i);if(d&&d<2){var p,g=a.o-i,v=25;do{var m=Object(a.y)(g),y=Object(a.h)(g),_=o+Object(a.g)(m,r-y),b=1+c-2*r*y;g-=p=(g-l*o-r*m+b*_-.5*d*n)/(2*r*m*_)}while(Object(a.a)(p)>a.l&&--v>0);h=s*Object(a.B)(b),f=e*_/a.s}else h=s*(t+d),f=e*o/a.s;return[h*Object(a.y)(f),u-h*Object(a.h)(f)]}var n,r=1+t,i=Object(a.y)(1/r),o=Object(a.e)(i),s=2*Object(a.B)(a.s/(n=a.s+4*o*r)),u=.5*s*(r+Object(a.B)(t*(2+t))),l=t*t,c=r*r;return e.invert=function(t,e){var i=t*t+(e-=u)*e,h=(1+c-i/(s*s))/(2*r),f=Object(a.b)(h),d=Object(a.y)(f),p=o+Object(a.g)(d,r-h);return[Object(a.e)(t/Object(a.B)(i))*a.s/p,Object(a.e)(1-2*(f-l*o-r*d+(1+c-2*r*h)*p)/n)]},e}e.b=r;var i=n(0),a=n(1);e.a=function(){var t=1,e=Object(i.geoProjectionMutator)(r),n=e(t);return n.ratio=function(n){return arguments.length?e(t=+n):t},n.scale(167.774).center([0,18.67])}},function(t,e,n){"use strict";var r=n(182),i=n(31),a=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];e.a=function(){return Object(i.a)(r.a,a).scale(160.857)}},function(t,e,n){"use strict";var r=n(187),i=n(31),a=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];e.a=function(){return Object(i.a)(r.b,a).scale(152.63)}},function(t,e,n){"use strict";var r=n(26),i=n(31),a=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];e.a=function(){return Object(i.a)(r.d,a).scale(169.529)}},function(t,e,n){"use strict";var r=n(26),i=n(31),a=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];e.a=function(){return Object(i.a)(r.d,a).scale(169.529).rotate([20,0])}},function(t,e,n){"use strict";var r=n(99),i=n(31),a=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];e.a=function(){return Object(i.a)(r.c,a).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}},function(t,e,n){"use strict";var r=n(46),i=n(31),a=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];e.a=function(){return Object(i.a)(r.b,a).scale(152.63).rotate([-20,0])}},function(t,e,n){"use strict";function r(t,e){return[3/a.H*t*Object(a.B)(a.s*a.s/3-e*e),e]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){return[a.H/3*t/Object(a.B)(a.s*a.s/3-e*e),e]},e.a=function(){return Object(i.geoProjection)(r).scale(158.837)}},function(t,e,n){"use strict";function r(t){function e(e,n){if(Object(a.a)(Object(a.a)(n)-a.o)<a.k)return[0,n<0?-2:2];var r=Object(a.y)(n),i=Object(a.t)((1+r)/(1-r),t/2),o=.5*(i+1/i)+Object(a.h)(e*=t);return[2*Object(a.y)(e)/o,(i-1/i)/o]}return e.invert=function(e,n){var r=Object(a.a)(n);if(Object(a.a)(r-2)<a.k)return e?null:[0,Object(a.x)(n)*a.o];if(r>2)return null;var i=(e/=2)*e,o=(n/=2)*n,s=2*n/(1+i+o);return s=Object(a.t)((1+s)/(1-s),1/t),[Object(a.g)(2*e,1-i-o)/t,Object(a.e)((s-1)/(s+1))]},e}e.b=r;var i=n(0),a=n(1);e.a=function(){var t=.5,e=Object(i.geoProjectionMutator)(r),n=e(t);return n.spacing=function(n){return arguments.length?e(t=+n):t},n.scale(124.75)}},function(t,e,n){"use strict";function r(t,e){return[t*(1+Object(a.B)(Object(a.h)(e)))/2,e/(Object(a.h)(e/2)*Object(a.h)(t/6))]}e.b=r;var i=n(0),a=n(1),o=a.s/a.D;r.invert=function(t,e){var n=Object(a.a)(t),r=Object(a.a)(e),i=a.k,s=a.o;r<o?s*=r/o:i+=6*Object(a.b)(o/r);for(var u=0;u<25;u++){var l=Object(a.y)(s),c=Object(a.B)(Object(a.h)(s)),h=Object(a.y)(s/2),f=Object(a.h)(s/2),d=Object(a.y)(i/6),p=Object(a.h)(i/6),g=.5*i*(1+c)-n,v=s/(f*p)-r,m=c?-.25*i*l/c:0,y=.5*(1+c),_=(1+.5*s*h/f)/(f*p),b=s/f*(d/6)/(p*p),x=m*b-_*y,w=(g*b-v*y)/x,S=(v*m-g*_)/x;if(s-=w,i-=S,Object(a.a)(w)<a.k&&Object(a.a)(S)<a.k)break}return[t<0?-i:i,e<0?-s:s]},e.a=function(){return Object(i.geoProjection)(r).scale(97.2672)}},function(t,e,n){"use strict";function r(t,e){var n=t*t,r=e*e;return[t*(.975534+r*(-.0143059*n-.119161+-.0547009*r)),e*(1.00384+n*(.0802894+-.02855*r+199025e-9*n)+r*(.0998909+-.0491032*r))]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){var n=Object(a.x)(t)*a.s,r=e/2,i=50;do{var o=n*n,s=r*r,u=n*r,l=n*(.975534+s*(-.0143059*o-.119161+-.0547009*s))-t,c=r*(1.00384+o*(.0802894+-.02855*s+199025e-9*o)+s*(.0998909+-.0491032*s))-e,h=.975534-s*(.119161+3*o*.0143059+.0547009*s),f=-u*(.238322+.2188036*s+.0286118*o),d=u*(.1605788+7961e-7*o+-.0571*s),p=1.00384+o*(.0802894+199025e-9*o)+s*(3*(.0998909-.02855*o)-.245516*s),g=f*d-p*h,v=(c*f-l*p)/g,m=(l*d-c*h)/g;n-=v,r-=m}while((Object(a.a)(v)>a.k||Object(a.a)(m)>a.k)&&--i>0);return i&&[n,r]},e.a=function(){return Object(i.geoProjection)(r).scale(139.98)}},function(t,e,n){"use strict";function r(t,e){return[Object(a.y)(t)/Object(a.h)(e),Object(a.F)(e)*Object(a.h)(t)]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){var n=t*t,r=e*e,i=r+1,o=t?a.C*Object(a.B)((i-Object(a.B)(n*n+2*n*(r-1)+i*i))/n+1):1/Object(a.B)(i);return[Object(a.e)(t*o),Object(a.x)(e)*Object(a.b)(o)]},e.a=function(){return Object(i.geoProjection)(r).scale(144.049).clipAngle(89.999)}},function(t,e,n){"use strict";function r(t){function e(e,i){var o=i-t,s=Object(a.a)(o)<a.k?e*n:Object(a.a)(s=a.u+i/2)<a.k||Object(a.a)(Object(a.a)(s)-a.o)<a.k?0:e*o/Object(a.p)(Object(a.F)(s)/r);return[s,o]}var n=Object(a.h)(t),r=Object(a.F)(a.u+t/2);return e.invert=function(e,i){var o,s=i+t;return[Object(a.a)(i)<a.k?e/n:Object(a.a)(o=a.u+s/2)<a.k||Object(a.a)(Object(a.a)(o)-a.o)<a.k?0:e*Object(a.p)(Object(a.F)(o)/r)/i,s]},e}e.b=r;var i=n(38),a=n(1);e.a=function(){return Object(i.a)(r).parallel(40).scale(158.837)}},function(t,e,n){"use strict";function r(t,e){return[t,1.25*Object(a.p)(Object(a.F)(a.u+.4*e))]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){return[t,2.5*Object(a.f)(Object(a.m)(.8*e))-.625*a.s]},e.a=function(){return Object(i.geoProjection)(r).scale(108.318)}},function(t,e,n){"use strict";function r(t){function e(e,r){for(var i,a=Object(o.h)(r),s=2/(1+a*Object(o.h)(e)),u=s*a*Object(o.y)(e),l=s*Object(o.y)(r),c=n,h=t[c],f=h[0],d=h[1];--c>=0;)f=(h=t[c])[0]+u*(i=f)-l*d,d=h[1]+u*d+l*i;return[f=u*(i=f)-l*d,d=u*d+l*i]}var n=t.length-1;return e.invert=function(e,r){var i=20,a=e,s=r;do{for(var u,l=n,c=t[l],h=c[0],f=c[1],d=0,p=0;--l>=0;)d=h+a*(u=d)-s*p,p=f+a*p+s*u,h=(c=t[l])[0]+a*(u=h)-s*f,f=c[1]+a*f+s*u;var g,v,m=(d=h+a*(u=d)-s*p)*d+(p=f+a*p+s*u)*p;a-=g=((h=a*(u=h)-s*f-e)*d+(f=a*f+s*u-r)*p)/m,s-=v=(f*d-h*p)/m}while(Object(o.a)(g)+Object(o.a)(v)>o.k*o.k&&--i>0);if(i){var y=Object(o.B)(a*a+s*s),_=2*Object(o.f)(.5*y),b=Object(o.y)(_);return[Object(o.g)(a*b,y*Object(o.h)(_)),y?Object(o.e)(s*b/y):0]}},e}function i(t,e){var n=Object(a.geoProjection)(r(t)).rotate(e).clipAngle(90),i=Object(a.geoRotation)(e),o=n.center;return delete n.rotate,n.center=function(t){return arguments.length?o(i(t)):i.invert(o())},n}e.g=r,e.b=function(){return i(s,[152,-64]).scale(1500).center([-160.908,62.4864]).clipAngle(25)},e.c=function(){return i(u,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},e.d=function(){return i(l,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},e.f=function(){return i(c,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},e.e=function(){return i(h,[165,10]).scale(250).clipAngle(130).center([-165,-10])},e.a=i;var a=n(0),o=n(1),s=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],u=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],l=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],c=[[.9245,0],[0,0],[.01943,0]],h=[[.721316,0],[0,0],[-.00881625,-.00617325]]},function(t,e,n){"use strict";function r(t,e){var n=Object(a.e)(7*Object(a.y)(e)/(3*o));return[o*t*(2*Object(a.h)(2*n/3)-1)/s,9*Object(a.y)(n/3)/s]}e.b=r;var i=n(0),a=n(1),o=Object(a.B)(6),s=Object(a.B)(7);r.invert=function(t,e){var n=3*Object(a.e)(e*s/9);return[t*s/(o*(2*Object(a.h)(2*n/3)-1)),Object(a.e)(3*Object(a.y)(n)*o/7)]},e.a=function(){return Object(i.geoProjection)(r).scale(164.859)}},function(t,e,n){"use strict";function r(t,e){for(var n,r=(1+a.C)*Object(a.y)(e),i=e,o=0;o<25&&(i-=n=(Object(a.y)(i/2)+Object(a.y)(i)-r)/(.5*Object(a.h)(i/2)+Object(a.h)(i)),!(Object(a.a)(n)<a.k));o++);return[t*(1+2*Object(a.h)(i)/Object(a.h)(i/2))/(3*a.D),2*Object(a.B)(3)*Object(a.y)(i/2)/Object(a.B)(2+a.D)]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){var n=e*Object(a.B)(2+a.D)/(2*Object(a.B)(3)),r=2*Object(a.e)(n);return[3*a.D*t/(1+2*Object(a.h)(r)/Object(a.h)(r/2)),Object(a.e)((n+Object(a.y)(r))/(1+a.C))]},e.a=function(){return Object(i.geoProjection)(r).scale(188.209)}},function(t,e,n){"use strict";function r(t,e){for(var n,r=Object(a.B)(6/(4+a.s)),i=(1+a.s/4)*Object(a.y)(e),o=e/2,s=0;s<25&&(o-=n=(o/2+Object(a.y)(o)-i)/(.5+Object(a.h)(o)),!(Object(a.a)(n)<a.k));s++);return[r*(.5+Object(a.h)(o))*t/1.5,r*o]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){var n=Object(a.B)(6/(4+a.s)),r=e/n;return Object(a.a)(Object(a.a)(r)-a.o)<a.k&&(r=r<0?-a.o:a.o),[1.5*t/(n*(.5+Object(a.h)(r))),Object(a.e)((r/2+Object(a.y)(r))/(1+a.s/4))]},e.a=function(){return Object(i.geoProjection)(r).scale(166.518)}},function(t,e,n){"use strict";function r(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){var n,r=e,i=25;do{var o=r*r,s=o*o;r-=n=(r*(1.007226+o*(.015085+s*(.028874*o-.044475-.005916*s)))-e)/(1.007226+o*(.045255+s*(.259866*o-.311325-.005916*11*s)))}while(Object(a.a)(n)>a.k&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},e.a=function(){return Object(i.geoProjection)(r).scale(175.295)}},function(t,e,n){"use strict";function r(t,e){var n=e*e,r=n*n,i=n*r;return[t*(.84719-.13063*n+i*i*(.05494*n-.04515-.02326*r+.00331*i)),e*(1.01183+r*r*(.01926*n-.02625-.00396*r))]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){var n,r,i,o,s=e,u=25;do{s-=n=(s*(1.01183+(i=(r=s*s)*r)*i*(.01926*r-.02625-.00396*i))-e)/(1.01183+i*i*(.21186*r-.23625+-.05148*i))}while(Object(a.a)(n)>a.l&&--u>0);return[t/(.84719-.13063*(r=s*s)+(o=r*(i=r*r))*o*(.05494*r-.04515-.02326*i+.00331*o)),s]},e.a=function(){return Object(i.geoProjection)(r).scale(175.295)}},function(t,e,n){"use strict";function r(t,e){return[t*(1+Object(a.h)(e))/2,2*(e-Object(a.F)(e/2))]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){for(var n=e/2,r=0,i=1/0;r<10&&Object(a.a)(i)>a.k;++r){var o=Object(a.h)(e/2);e-=i=(e-Object(a.F)(e/2)-n)/(1-.5/(o*o))}return[2*t/(1+Object(a.h)(e)),e]},e.a=function(){return Object(i.geoProjection)(r).scale(152.63)}},function(t,e,n){"use strict";function r(t,e){var n=e*e;return[t,e*(o+n*n*(s+n*(u+l*n)))]}e.b=r;var i=n(0),a=n(1),o=1.0148,s=.23185,u=-.14499,l=.02406,c=o,h=5*s,f=7*u,d=9*l;r.invert=function(t,e){e>1.790857183?e=1.790857183:e<-1.790857183&&(e=-1.790857183);var n,r=e;do{var i=r*r;r-=n=(r*(o+i*i*(s+i*(u+l*i)))-e)/(c+i*i*(h+i*(f+d*i)))}while(Object(a.a)(n)>a.k);return[t,r]},e.a=function(){return Object(i.geoProjection)(r).scale(139.319)}},function(t,e,n){"use strict";function r(t,e){if(Object(a.a)(e)<a.k)return[t,0];var n=Object(a.F)(e),r=t*Object(a.y)(e);return[Object(a.y)(r)/n,e+(1-Object(a.h)(r))/n]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){if(Object(a.a)(e)<a.k)return[t,0];var n,r=t*t+e*e,i=.5*e,o=10;do{var s=Object(a.F)(i),u=1/Object(a.h)(i),l=r-2*e*i+i*i;i-=n=(s*l+2*(i-e))/(2+l*u*u+2*(i-e)*s)}while(Object(a.a)(n)>a.k&&--o>0);return s=Object(a.F)(i),[(Object(a.a)(e)<Object(a.a)(i+1/s)?Object(a.e)(t*s):Object(a.x)(t)*(Object(a.b)(Object(a.a)(t*s))+a.o))/Object(a.y)(i),i]},e.a=function(){return Object(i.geoProjection)(r).scale(103.74)}},function(t,e,n){"use strict";function r(t,e){return[t[0]*e[0]+t[1]*e[3],t[0]*e[1]+t[1]*e[4],t[0]*e[2]+t[1]*e[5]+t[2],t[3]*e[0]+t[4]*e[3],t[3]*e[1]+t[4]*e[4],t[3]*e[2]+t[4]*e[5]+t[5]]}function i(t,e){return[t[0]-e[0],t[1]-e[1]]}function a(t){return Object(o.B)(t[0]*t[0]+t[1]*t[1])}e.b=function(t){var e=1/(t[0]*t[4]-t[1]*t[3]);return[e*t[4],-e*t[1],e*(t[1]*t[5]-t[2]*t[4]),-e*t[3],e*t[0],e*(t[2]*t[3]-t[0]*t[5])]},e.c=r;var o=n(1);e.a=function(t,e){var n=i(t[1],t[0]),s=i(e[1],e[0]),u=function(t,e){return Object(o.g)(t[0]*e[1]-t[1]*e[0],t[0]*e[0]+t[1]*e[1])}(n,s),l=a(n)/a(s);return r([1,0,t[0][0],0,1,t[0][1]],r([l,0,0,0,l,0],r([Object(o.h)(u),Object(o.y)(u),0,-Object(o.y)(u),Object(o.h)(u),0],[1,0,-e[0][0],0,1,-e[0][1]])))}},function(t,e,n){"use strict";var r=n(0),i=n(1),a=n(69),o=n(100);e.a=function(t){t=t||function(t){var e=Object(r.geoCentroid)({type:"MultiPoint",coordinates:t});return Object(r.geoGnomonic)().scale(1).translate([0,0]).rotate([-e[0],-e[1]])};var e=o.a.map(function(e){return{face:e,project:t(e)}});return[-1,0,0,1,0,1,4,5].forEach(function(t,n){var r=e[t];r&&(r.children||(r.children=[])).push(e[n])}),Object(a.a)(e[0],function(t,n){return e[t<-i.s/2?n<0?6:4:t<0?n<0?2:0:t<i.s/2?n<0?3:1:n<0?7:5]}).scale(101.858).center([0,45])}},function(t,e,n){"use strict";function r(t,e){var n=Object(a.a)(t,e);return[n[0]*l,n[1]]}var i=n(0),a=n(98),o=n(1),s=n(69),u=n(100),l=2/Object(o.B)(3);r.invert=function(t,e){return a.a.invert(t/l,e)},e.a=function(t){t=t||function(t){var e=Object(i.geoCentroid)({type:"MultiPoint",coordinates:t});return Object(i.geoProjection)(r).translate([0,0]).scale(1).rotate(e[1]>0?[-e[0],0]:[180-e[0],180])};var e=u.a.map(function(e){return{face:e,project:t(e)}});return[-1,0,0,1,0,1,4,5].forEach(function(t,n){var r=e[t];r&&(r.children||(r.children=[])).push(e[n])}),Object(s.a)(e[0],function(t,n){return e[t<-o.s/2?n<0?6:4:t<0?n<0?2:0:t<o.s/2?n<0?3:1:n<0?7:5]}).scale(121.906).center([0,48.5904])}},function(t,e,n){"use strict";function r(t,e){for(var n=0,r=t.length,i=0;n<r;++n)i+=t[n]*e[n];return i}function i(t){return[Object(s.g)(t[1],t[0])*s.j,Object(s.e)(Object(s.q)(-1,Object(s.r)(1,t[2])))*s.j]}function a(t){var e=t[0]*s.v,n=t[1]*s.v,r=Object(s.h)(n);return[r*Object(s.h)(e),r*Object(s.y)(e),Object(s.y)(n)]}var o=n(0),s=n(1),u=n(69),l=n(100);e.a=function(t){t=t||function(t){var e=6===t.length?Object(o.geoCentroid)({type:"MultiPoint",coordinates:t}):t[0];return Object(o.geoGnomonic)().scale(1).translate([0,0]).rotate([-e[0],-e[1]])};var e=l.a.map(function(t){for(var e,n=t.map(a),r=n.length,o=n[r-1],s=[],u=0;u<r;++u)s.push(i([.9486832980505138*o[0]+.31622776601683794*(e=n[u])[0],.9486832980505138*o[1]+.31622776601683794*e[1],.9486832980505138*o[2]+.31622776601683794*e[2]]),i([.9486832980505138*e[0]+.31622776601683794*o[0],.9486832980505138*e[1]+.31622776601683794*o[1],.9486832980505138*e[2]+.31622776601683794*o[2]])),o=e;return s}),n=[],c=[-1,0,0,1,0,1,4,5];e.forEach(function(t,r){for(var i=l.a[r],o=i.length,s=n[r]=[],u=0;u<o;++u)e.push([i[u],t[(2*u+2)%(2*o)],t[(2*u+1)%(2*o)]]),c.push(r),s.push(function(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}(a(t[(2*u+2)%(2*o)]),a(t[(2*u+1)%(2*o)])))});var h=e.map(function(e){return{project:t(e),face:e}});return c.forEach(function(t,e){var n=h[t];n&&(n.children||(n.children=[])).push(h[e])}),Object(u.a)(h[0],function(t,e){var i=Object(s.h)(e),a=[i*Object(s.h)(t),i*Object(s.y)(t),Object(s.y)(e)],o=t<-s.s/2?e<0?6:4:t<0?e<0?2:0:t<s.s/2?e<0?3:1:e<0?7:5,u=n[o];return h[r(u[0],a)<0?8+3*o:r(u[1],a)<0?8+3*o+1:r(u[2],a)<0?8+3*o+2:o]}).scale(110.625).center([0,45])}},function(t,e,n){"use strict";function r(t,e){return{type:"FeatureCollection",features:t.features.map(function(t){return i(t,e)})}}function i(t,e){return{type:"Feature",id:t.id,properties:t.properties,geometry:a(t.geometry,e)}}function a(t,e){if(!t)return null;if("GeometryCollection"===t.type)return function(t,e){return{type:"GeometryCollection",geometries:t.geometries.map(function(t){return a(t,e)})}}(t,e);var n;switch(t.type){case"Point":case"MultiPoint":n=f;break;case"LineString":case"MultiLineString":n=d;break;case"Polygon":case"MultiPolygon":case"Sphere":n=p;break;default:return null}return Object(o.geoStream)(t,e(n)),n.result()}var o=n(0),s=n(409),u=n(410),l=n(411);e.a=function(t,e){var n,o=e.stream;if(!o)throw new Error("invalid projection");switch(t&&t.type){case"Feature":n=i;break;case"FeatureCollection":n=r;break;default:n=a}return n(t,o)};var c=[],h=[],f={point:function(t,e){c.push([t,e])},result:function(){var t=c.length?c.length<2?{type:"Point",coordinates:c[0]}:{type:"MultiPoint",coordinates:c}:null;return c=[],t}},d={lineStart:s.a,point:function(t,e){c.push([t,e])},lineEnd:function(){c.length&&(h.push(c),c=[])},result:function(){var t=h.length?h.length<2?{type:"LineString",coordinates:h[0]}:{type:"MultiLineString",coordinates:h}:null;return h=[],t}},p={polygonStart:s.a,lineStart:s.a,point:function(t,e){c.push([t,e])},lineEnd:function(){var t=c.length;if(t){do{c.push(c[0].slice())}while(++t<4);h.push(c),c=[]}},polygonEnd:s.a,result:function(){if(!h.length)return null;var t=[],e=[];return h.forEach(function(n){Object(u.a)(n)?t.push([n]):e.push(n)}),e.forEach(function(e){var n=e[0];t.some(function(t){if(Object(l.a)(t[0],n))return t.push(e),!0})||t.push([e])}),h=[],t.length?t.length>1?{type:"MultiPolygon",coordinates:t}:{type:"Polygon",coordinates:t[0]}:null}}},function(t,e,n){"use strict";e.a=function(){}},function(t,e,n){"use strict";e.a=function(t){if((e=t.length)<4)return!1;for(var e,n=0,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return r<=0}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=e[0],r=e[1],i=!1,a=0,o=t.length,s=o-1;a<o;s=a++){var u=t[a],l=u[0],c=u[1],h=t[s],f=h[1];c>r^f>r&&n<(h[0]-l)*(r-c)/(f-c)+l&&(i=!i)}return i}},function(t,e,n){"use strict";var r=n(184),i=n(101);e.a=function(){return Object(i.a)(r.b).scale(176.423)}},function(t,e,n){"use strict";e.a=function(t,e){function n(t){var n=t.length,r=2,i=new Array(n);for(i[0]=+t[0].toFixed(e),i[1]=+t[1].toFixed(e);r<n;)i[r]=t[r],++r;return i}function r(t){return t.map(n)}function i(t){return t.map(r)}function a(t){if(null==t)return t;var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(a)};break;case"Point":e={type:"Point",coordinates:n(t.coordinates)};break;case"MultiPoint":case"LineString":e={type:t.type,coordinates:r(t.coordinates)};break;case"MultiLineString":case"Polygon":e={type:t.type,coordinates:i(t.coordinates)};break;case"MultiPolygon":e={type:"MultiPolygon",coordinates:t.coordinates.map(i)};break;default:return t}return null!=t.bbox&&(e.bbox=t.bbox),e}function o(t){var e={type:"Feature",properties:t.properties,geometry:a(t.geometry)};return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),e}if(!(0<=(e=+e)&&e<=20))throw new Error("invalid digits");if(null!=t)switch(t.type){case"Feature":return o(t);case"FeatureCollection":var s={type:"FeatureCollection",features:t.features.map(o)};return null!=t.bbox&&(s.bbox=t.bbox),s;default:return a(t)}return t}},function(t,e,n){"use strict";function r(t){function e(e,r){var a=n?Object(i.F)(e*n/2)/n:e/2;if(!r)return[2*a,-t];var o=2*Object(i.f)(a*Object(i.y)(r)),s=1/Object(i.F)(r);return[Object(i.y)(o)*s,r+(1-Object(i.h)(o))*s-t]}var n=Object(i.y)(t);return e.invert=function(e,r){if(Object(i.a)(r+=t)<i.k)return[n?2*Object(i.f)(n*e/2)/n:e,0];var a,o=e*e+r*r,s=0,u=10;do{var l=Object(i.F)(s),c=1/Object(i.h)(s),h=o-2*r*s+s*s;s-=a=(l*h+2*(s-r))/(2+h*c*c+2*(s-r)*l)}while(Object(i.a)(a)>i.k&&--u>0);var f=e*(l=Object(i.F)(s)),d=Object(i.F)(Object(i.a)(r)<Object(i.a)(s+1/l)?.5*Object(i.e)(f):.5*Object(i.b)(f)+i.s/4)/Object(i.y)(s);return[n?2*Object(i.f)(n*d)/n:2*d,s]},e}e.b=r;var i=n(1),a=n(38);e.a=function(){return Object(a.a)(r).scale(131.215)}},function(t,e,n){"use strict";function r(t,e){var n,r=Object(a.r)(18,36*Object(a.a)(e)/a.s),i=Object(a.n)(r),s=r-i,u=(n=o[i])[0],l=n[1],c=(n=o[++i])[0],h=n[1],f=(n=o[Object(a.r)(19,++i)])[0],d=n[1];return[t*(c+s*(f-u)/2+s*s*(f-2*c+u)/2),(e>0?a.o:-a.o)*(h+s*(d-l)/2+s*s*(d-2*h+l)/2)]}e.b=r;var i=n(0),a=n(1),o=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];o.forEach(function(t){t[1]*=1.0144}),r.invert=function(t,e){var n=e/a.o,r=90*n,i=Object(a.r)(18,Object(a.a)(r/5)),s=Object(a.q)(0,Object(a.n)(i));do{var u=o[s][1],l=o[s+1][1],c=o[Object(a.r)(19,s+2)][1],h=c-u,f=c-2*l+u,d=2*(Object(a.a)(n)-l)/h,p=f/h,g=d*(1-p*d*(1-2*p*d));if(g>=0||1===s){r=(e>=0?5:-5)*(g+i);var v,m=50;do{g=(i=Object(a.r)(18,Object(a.a)(r)/5))-(s=Object(a.n)(i)),u=o[s][1],l=o[s+1][1],c=o[Object(a.r)(19,s+2)][1],r-=(v=(e>=0?a.o:-a.o)*(l+g*(c-u)/2+g*g*(c-2*l+u)/2)-e)*a.j}while(Object(a.a)(v)>a.l&&--m>0);break}}while(--s>=0);var y=o[s][0],_=o[s+1][0],b=o[Object(a.r)(19,s+2)][0];return[t/(_+g*(b-y)/2+g*g*(b-2*_+y)/2),r*a.v]},e.a=function(){return Object(i.geoProjection)(r).scale(152.63)}},function(t,e,n){"use strict";function r(t,e){function n(e,n){var a=r(e,n),s=a[1],u=s*o/(t-1)+i;return[a[0]*i/u,s/u]}var r=function(t){function e(e,n){var r=Object(a.h)(n),i=(t-1)/(t-r*Object(a.h)(e));return[i*r*Object(a.y)(e),i*Object(a.y)(n)]}return e.invert=function(e,n){var r=e*e+n*n,i=Object(a.B)(r),o=(t-Object(a.B)(1-r*(t+1)/(t-1)))/((t-1)/i+i/(t-1));return[Object(a.g)(e*o,i*Object(a.B)(1-o*o)),i?Object(a.e)(n*o/i):0]},e}(t);if(!e)return r;var i=Object(a.h)(e),o=Object(a.y)(e);return n.invert=function(e,n){var a=(t-1)/(t-1-n*o);return r.invert(a*e,a*n*i)},n}e.b=r;var i=n(0),a=n(1);e.a=function(){var t=2,e=0,n=Object(i.geoProjectionMutator)(r),o=n(t,e);return o.distance=function(r){return arguments.length?n(t=+r,e):t},o.tilt=function(r){return arguments.length?n(t,e=r*a.v):e*a.j},o.scale(432.147).clipAngle(Object(a.b)(1/t)*a.j-1e-6)}},function(t,e,n){"use strict";function r(t){return t.length>0}function i(t){return t===v||t===y?[0,t]:[f,function(t){return Math.floor(t*h)/h}(t)]}function a(t){var e=t[0],n=t[1],r=!1;return e<=d?(e=f,r=!0):e>=g&&(e=p,r=!0),n<=m?(n=v,r=!0):n>=_&&(n=y,r=!0),r?[e,n]:t}function o(t){return t.map(a)}function s(t,e,n){for(var r=0,o=t.length;r<o;++r){var s=t[r].slice();n.push({index:-1,polygon:e,ring:s});for(var u=0,l=s.length;u<l;++u){var c=s[u],h=c[0],f=c[1];if(h<=d||h>=g||f<=m||f>=_){s[u]=a(c);for(var p=u+1;p<l;++p){var v=s[p],y=v[0],b=v[1];if(y>d&&y<g&&b>m&&b<_)break}if(p===u+1)continue;if(u){var x={index:-1,polygon:e,ring:s.slice(0,u+1)};x.ring[x.ring.length-1]=i(f),n[n.length-1]=x}else n.pop();if(p>=l)break;n.push({index:-1,polygon:e,ring:s=s.slice(p-1)}),s[0]=i(s[0][1]),u=-1,l=s.length}}}}function u(t){var e,n,r,i,a,o,s=t.length,u={},l={};for(e=0;e<s;++e)(r=(n=t[e]).ring[0])[0]!==(a=n.ring[n.ring.length-1])[0]||r[1]!==a[1]?(n.index=e,u[r]=l[a]=n):(n.polygon.push(n.ring),t[e]=null);for(e=0;e<s;++e)if(n=t[e]){if(i=l[r=n.ring[0]],o=u[a=n.ring[n.ring.length-1]],delete u[r],delete l[a],r[0]===a[0]&&r[1]===a[1]){n.polygon.push(n.ring);continue}i?(delete l[r],delete u[i.ring[0]],i.ring.pop(),t[i.index]=null,n={index:-1,polygon:i.polygon,ring:i.ring.concat(n.ring)},i===o?n.polygon.push(n.ring):(n.index=s++,t.push(u[n.ring[0]]=l[n.ring[n.ring.length-1]]=n))):o?(delete u[a],delete l[o.ring[o.ring.length-1]],n.ring.pop(),n={index:s++,polygon:o.polygon,ring:n.ring.concat(o.ring)},t[o.index]=null,t.push(u[n.ring[0]]=l[n.ring[n.ring.length-1]]=n)):(n.ring.push(n.ring[0]),n.polygon.push(n.ring))}}function l(t){var e={type:"Feature",geometry:c(t.geometry)};return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}function c(t){if(null==t)return t;var e,n,i,l;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(c)};break;case"Point":e={type:"Point",coordinates:a(t.coordinates)};break;case"MultiPoint":case"LineString":e={type:t.type,coordinates:o(t.coordinates)};break;case"MultiLineString":e={type:"MultiLineString",coordinates:t.coordinates.map(o)};break;case"Polygon":var h=[];s(t.coordinates,h,n=[]),u(n),e={type:"Polygon",coordinates:h};break;case"MultiPolygon":n=[],i=-1,l=t.coordinates.length;for(var f=new Array(l);++i<l;)s(t.coordinates[i],f[i]=[],n);u(n),e={type:"MultiPolygon",coordinates:f.filter(r)};break;default:return t}return null!=t.bbox&&(e.bbox=t.bbox),e}var h=1e4,f=-180,d=f+1e-4,p=180,g=p-1e-4,v=-90,m=v+1e-4,y=90,_=y-1e-4;e.a=function(t){if(null==t)return t;switch(t.type){case"Feature":return l(t);case"FeatureCollection":var e={type:"FeatureCollection",features:t.features.map(l)};return null!=t.bbox&&(e.bbox=t.bbox),e;default:return c(t)}}},function(t,e,n){"use strict";function r(t,e){var n=Object(a.F)(e/2),r=Object(a.y)(a.u*n);return[t*(.74482-.34588*r*r),1.70711*n]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){var n=e/1.70711,r=Object(a.y)(a.u*n);return[t/(.74482-.34588*r*r),2*Object(a.f)(n)]},e.a=function(){return Object(i.geoProjection)(r).scale(146.153)}},function(t,e,n){"use strict";function r(t){function e(t,e){var r=Object(a.geoGnomonicRaw)(t,e);return r[0]*=n,r}var n=Object(o.h)(t);return e.invert=function(t,e){return a.geoGnomonicRaw.invert(t/n,e)},e}function i(t,e){return Object(s.a)(r,t,e)}e.b=r,e.c=function(){return i([-158,21.5],[-77,39]).clipAngle(60).scale(400)},e.a=i;var a=n(0),o=n(1),s=n(189)},function(t,e,n){"use strict";function r(t){function e(e,a){var s=Object(o.b)(Object(o.h)(a)*Object(o.h)(e-n)),u=Object(o.b)(Object(o.h)(a)*Object(o.h)(e-r));return[((s*=s)-(u*=u))/(2*t),(a<0?-1:1)*Object(o.B)(4*i*u-(i-s+u)*(i-s+u))/(2*t)]}if(!(t*=2))return a.geoAzimuthalEquidistantRaw;var n=-t/2,r=-n,i=t*t,s=Object(o.F)(r),u=.5/Object(o.y)(r);return e.invert=function(t,e){var i,a,l=e*e,c=Object(o.h)(Object(o.B)(l+(i=t+n)*i)),h=Object(o.h)(Object(o.B)(l+(i=t+r)*i));return[Object(o.g)(a=c-h,i=(c+h)*s),(e<0?-1:1)*Object(o.b)(Object(o.B)(i*i+a*a)*u)]},e}function i(t,e){return Object(s.a)(r,t,e)}e.b=r,e.c=function(){return i([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},e.a=i;var a=n(0),o=n(1),s=n(189)},function(t,e,n){"use strict";function r(t,e){if(Object(a.a)(e)<a.k)return[t,0];var n=Object(a.a)(e/a.o),r=Object(a.e)(n);if(Object(a.a)(t)<a.k||Object(a.a)(Object(a.a)(e)-a.o)<a.k)return[0,Object(a.x)(e)*a.s*Object(a.F)(r/2)];var i=Object(a.h)(r),o=Object(a.a)(a.s/t-t/a.s)/2,s=o*o,u=i/(n+i-1),l=u*(2/n-1),c=l*l,h=c+s,f=u-c,d=s+u;return[Object(a.x)(t)*a.s*(o*f+Object(a.B)(s*f*f-h*(u*u-c)))/h,Object(a.x)(e)*a.s*(l*d-o*Object(a.B)((s+1)*h-d*d))/h]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){if(Object(a.a)(e)<a.k)return[t,0];if(Object(a.a)(t)<a.k)return[0,a.o*Object(a.y)(2*Object(a.f)(e/a.s))];var n=(t/=a.s)*t,r=(e/=a.s)*e,i=n+r,o=i*i,s=-Object(a.a)(e)*(1+i),u=s-2*r+n,l=-2*s+1+2*r+o,c=r/l+(2*u*u*u/(l*l*l)-9*s*u/(l*l))/27,h=(s-u*u/(3*l))/l,f=2*Object(a.B)(-h/3),d=Object(a.b)(3*c/(h*f))/3;return[a.s*(i-1+Object(a.B)(1+2*(n-r)+o))/(2*t),Object(a.x)(e)*a.s*(-f*Object(a.h)(d+a.s/3)-u/(3*l))]},e.a=function(){return Object(i.geoProjection)(r).scale(79.4183)}},function(t,e,n){"use strict";function r(t,e){if(Object(a.a)(e)<a.k)return[t,0];var n=Object(a.a)(e/a.o),r=Object(a.e)(n);if(Object(a.a)(t)<a.k||Object(a.a)(Object(a.a)(e)-a.o)<a.k)return[0,Object(a.x)(e)*a.s*Object(a.F)(r/2)];var i=Object(a.h)(r),o=Object(a.a)(a.s/t-t/a.s)/2,s=o*o,u=i*(Object(a.B)(1+s)-o*i)/(1+s*n*n);return[Object(a.x)(t)*a.s*u,Object(a.x)(e)*a.s*Object(a.B)(1-u*(2*o+u))]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){if(!t)return[0,a.o*Object(a.y)(2*Object(a.f)(e/a.s))];var n=Object(a.a)(t/a.s),r=(1-n*n-(e/=a.s)*e)/(2*n),i=r*r,o=Object(a.B)(i+1);return[Object(a.x)(t)*a.s*(o-r),Object(a.x)(e)*a.o*Object(a.y)(2*Object(a.g)(Object(a.B)((1-2*r*n)*(r+o)-n),Object(a.B)(o+r+n)))]},e.a=function(){return Object(i.geoProjection)(r).scale(79.4183)}},function(t,e,n){"use strict";function r(t,e){if(Object(a.a)(e)<a.k)return[t,0];var n=e/a.o,r=Object(a.e)(n);if(Object(a.a)(t)<a.k||Object(a.a)(Object(a.a)(e)-a.o)<a.k)return[0,a.s*Object(a.F)(r/2)];var i=(a.s/t-t/a.s)/2,o=n/(1+Object(a.h)(r));return[a.s*(Object(a.x)(t)*Object(a.B)(i*i+1-o*o)-i),a.s*o]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){if(!e)return[t,0];var n=e/a.s,r=(a.s*a.s*(1-n*n)-t*t)/(2*a.s*t);return[t?a.s*(Object(a.x)(t)*Object(a.B)(r*r+1)-r):0,a.o*Object(a.y)(2*Object(a.f)(n))]},e.a=function(){return Object(i.geoProjection)(r).scale(79.4183)}},function(t,e,n){"use strict";function r(t,e){if(!e)return[t,0];var n=Object(a.a)(e);if(!t||n===a.o)return[0,e];var r=n/a.o,i=r*r,o=(8*r-i*(i+2)-5)/(2*i*(r-1)),s=o*o,u=r*o,l=i+s+2*u,c=r+3*o,h=t/a.o,f=h+1/h,d=Object(a.x)(Object(a.a)(t)-a.o)*Object(a.B)(f*f-4),p=d*d,g=l*(i+s*p-1)+(1-i)*(i*(c*c+4*s)+12*u*s+4*s*s),v=(d*(l+s-1)+2*Object(a.B)(g))/(4*l+p);return[Object(a.x)(t)*a.o*v,Object(a.x)(e)*a.o*Object(a.B)(1+d*Object(a.a)(v)-v*v)]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){var n;if(!t||!e)return[t,e];e/=a.s;var r=Object(a.x)(t)*t/a.o,i=(r*r-1+4*e*e)/Object(a.a)(r),o=i*i,s=2*e,u=50;do{var l=s*s,c=(8*s-l*(l+2)-5)/(2*l*(s-1)),h=(3*s-l*s-10)/(2*l*s),f=c*c,d=s*c,p=s+c,g=p*p,v=s+3*c,m=g*(l+f*o-1)+(1-l)*(l*(v*v+4*f)+f*(12*d+4*f)),y=-2*p*(4*d*f+(1-4*l+3*l*l)*(1+h)+f*(14*l-6-o+(8*l-8-2*o)*h)+d*(12*l-8+(10*l-10-o)*h)),_=Object(a.B)(m);s-=n=(i*(g+f-1)+2*_-r*(4*g+o))/(i*(2*c*h+2*p*(1+h))+y/_-8*p*(i*(-1+f+g)+2*_)*(1+h)/(o+4*g))}while(n>a.k&&--u>0);return[Object(a.x)(t)*(Object(a.B)(i*i+4)+i)*a.s/4,a.o*s]},e.a=function(){return Object(i.geoProjection)(r).scale(127.16)}},function(t,e,n){"use strict";n.d(e,"b",function(){return u});var r=n(0),i=n(1),a=n(26),o=4*i.s+3*Object(i.B)(3),s=2*Object(i.B)(2*i.s*Object(i.B)(3)/o),u=Object(a.b)(s*Object(i.B)(3)/i.s,s,o/6);e.a=function(){return Object(r.geoProjection)(u).scale(176.84)}},function(t,e,n){"use strict";function r(t,e){return[t*Object(a.B)(1-3*e*e/(a.s*a.s)),e]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){return[t/Object(a.B)(1-3*e*e/(a.s*a.s)),e]},e.a=function(){return Object(i.geoProjection)(r).scale(152.63)}},function(t,e,n){"use strict";function r(t,e){var n=.90631*Object(a.y)(e),r=Object(a.B)(1-n*n),i=Object(a.B)(2/(1+r*Object(a.h)(t/=3)));return[2.66723*r*i*Object(a.y)(t),1.24104*n*i]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){var n=t/2.66723,r=e/1.24104,i=Object(a.B)(n*n+r*r),o=2*Object(a.e)(i/2);return[3*Object(a.g)(t*Object(a.F)(o),2.66723*i),i&&Object(a.e)(e*Object(a.y)(o)/(1.24104*.90631*i))]},e.a=function(){return Object(i.geoProjection)(r).scale(172.632)}},function(t,e,n){"use strict";function r(t,e){var n=Object(a.h)(e),r=Object(a.h)(t)*n,i=1-r,o=Object(a.h)(t=Object(a.g)(Object(a.y)(t)*n,-Object(a.y)(e))),s=Object(a.y)(t);return[s*(n=Object(a.B)(1-r*r))-o*i,-o*n-s*i]}e.b=r;var i=n(0),a=n(1);r.invert=function(t,e){var n=(t*t+e*e)/-2,r=Object(a.B)(-n*(2+n)),i=e*n+t*r,o=t*n-e*r,s=Object(a.B)(o*o+i*i);return[Object(a.g)(r*i,s*(1+n)),s?-Object(a.e)(r*o/s):0]},e.a=function(){return Object(i.geoProjection)(r).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)}},function(t,e,n){"use strict";function r(t,e){var n=Object(a.a)(t,e);return[(n[0]+t/o.o)/2,(n[1]+e)/2]}e.b=r;var i=n(0),a=n(180),o=n(1);r.invert=function(t,e){var n=t,r=e,i=25;do{var a,s=Object(o.h)(r),u=Object(o.y)(r),l=Object(o.y)(2*r),c=u*u,h=s*s,f=Object(o.y)(n),d=Object(o.h)(n/2),p=Object(o.y)(n/2),g=p*p,v=1-h*d*d,m=v?Object(o.b)(s*d)*Object(o.B)(a=1/v):a=0,y=.5*(2*m*s*p+n/o.o)-t,_=.5*(m*u+r)-e,b=.5*a*(h*g+m*s*d*c)+.5/o.o,x=a*(f*l/4-m*u*p),w=.125*a*(l*p-m*u*h*f),S=.5*a*(c*d+m*g*s)+.5,T=x*w-S*b,O=(_*x-y*S)/T,M=(y*w-_*b)/T;n-=O,r-=M}while((Object(o.a)(O)>o.k||Object(o.a)(M)>o.k)&&--i>0);return[n,r]},e.a=function(){return Object(i.geoProjection)(r).scale(158.837)}},function(t,e,n){var r=n(191);t.exports=function(t){return r(t,4)}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(71),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},function(t,e,n){var r=n(71);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(71);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(71);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(70);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(70),i=n(103),a=n(104);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(o)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(442),i=n(70),a=n(103);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},function(t,e,n){function r(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=n(443),a=n(444),o=n(445),s=n(446),u=n(447);r.prototype.clear=i,r.prototype.delete=a,r.prototype.get=o,r.prototype.has=s,r.prototype.set=u,t.exports=r},function(t,e,n){var r=n(72);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(72),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(72),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(72);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,n){var r=n(73);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(73);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(73);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(73);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(41),i=n(11);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(41),i=n(105);t.exports=function(t,e){return t&&r(e,i(e),t)}},function(t,e,n){var r=n(15),i=n(64),a=n(456),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return a(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&o.call(t,s))&&n.push(s);return n}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},function(t,e,n){(function(t){var r=n(18),i="object"==typeof e&&e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,o=a&&a.exports===i?r.Buffer:void 0,s=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}}).call(e,n(65)(t))},function(t,e){t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},function(t,e,n){var r=n(41),i=n(106);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}},function(t,e,n){var r=n(41),i=n(194);t.exports=function(t,e){return r(t,i(t),e)}},function(t,e,n){var r=n(196),i=n(194),a=n(105);t.exports=function(t){return r(t,a,i)}},function(t,e,n){var r=n(29)(n(18),"DataView");t.exports=r},function(t,e,n){var r=n(29)(n(18),"Promise");t.exports=r},function(t,e,n){var r=n(29)(n(18),"WeakMap");t.exports=r},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&n.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},function(t,e,n){var r=n(109),i=n(468),a=n(469),o=n(471),s=n(472),u=n(474),l=n(475);t.exports=function(t,e,n,c){var h=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new h(+t);case"[object DataView]":return i(t,c);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return l(t,c);case"[object Map]":return a(t,c,n);case"[object Number]":case"[object String]":return new h(t);case"[object RegExp]":return o(t);case"[object Set]":return s(t,c,n);case"[object Symbol]":return u(t)}}},function(t,e,n){var r=n(109);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},function(t,e,n){var r=n(470),i=n(200),a=n(201);t.exports=function(t,e,n){var o=e?n(a(t),1):a(t);return i(o,r,new t.constructor)}},function(t,e){t.exports=function(t,e){return t.set(e[0],e[1]),t}},function(t,e){var n=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,n.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,n){var r=n(473),i=n(200),a=n(74);t.exports=function(t,e,n){var o=e?n(a(t),1):a(t);return i(o,r,new t.constructor)}},function(t,e){t.exports=function(t,e){return t.add(e),t}},function(t,e,n){var r=n(35),i=r?r.prototype:void 0,a=i?i.valueOf:void 0;t.exports=function(t){return a?Object(a.call(t)):{}}},function(t,e,n){var r=n(109);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},function(t,e,n){var r=n(477),i=n(108),a=n(64);t.exports=function(t){return"function"!=typeof t.constructor||a(t)?{}:r(i(t))}},function(t,e,n){var r=n(15),i=Object.create,a=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=a},function(t,e,n){var r=n(479)(n(497));t.exports=r},function(t,e,n){var r=n(48),i=n(24),a=n(11);t.exports=function(t){return function(e,n,o){var s=Object(e);if(!i(e)){var u=r(n,3);e=a(e),n=function(t){return u(s[t],t,s)}}var l=t(e,n,o);return l>-1?s[u?e[l]:l]:void 0}}},function(t,e,n){var r=n(202),i=n(205),a=n(207);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(102),i=n(204),a=n(485),o=n(486),s=n(197),u=n(3),l=n(89),c=n(152),h="[object Arguments]",f="[object Array]",d="[object Object]",p=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,g,v,m){var y=u(t),_=u(e),b=y?f:s(t),x=_?f:s(e),w=(b=b==h?d:b)==d,S=(x=x==h?d:x)==d,T=b==x;if(T&&l(t)){if(!l(e))return!1;y=!0,w=!1}if(T&&!w)return m||(m=new r),y||c(t)?i(t,e,n,g,v,m):a(t,e,b,n,g,v,m);if(!(1&n)){var O=w&&p.call(t,"__wrapped__"),M=S&&p.call(e,"__wrapped__");if(O||M){var k=O?t.value():t,C=M?e.value():e;return m||(m=new r),v(k,C,n,g,m)}}return!!T&&(m||(m=new r),o(t,e,n,g,v,m))}},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e,n){var r=n(35),i=n(199),a=n(62),o=n(204),s=n(201),u=n(74),l=r?r.prototype:void 0,c=l?l.valueOf:void 0;t.exports=function(t,e,n,r,l,h,f){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var d=s;case"[object Set]":if(d||(d=u),t.size!=e.size&&!(1&r))return!1;var p=f.get(t);if(p)return p==e;r|=2,f.set(t,e);var g=o(d(t),d(e),r,l,h,f);return f.delete(t),g;case"[object Symbol]":if(c)return c.call(t)==c.call(e)}return!1}},function(t,e,n){var r=n(195),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,a,o,s){var u=1&n,l=r(t),c=l.length;if(c!=r(e).length&&!u)return!1;for(var h=c;h--;){var f=l[h];if(!(u?f in e:i.call(e,f)))return!1}var d=s.get(t);if(d&&s.get(e))return d==e;var p=!0;s.set(t,e),s.set(e,t);for(var g=u;++h<c;){var v=t[f=l[h]],m=e[f];if(a)var y=u?a(m,v,f,e,t,s):a(v,m,f,t,e,s);if(!(void 0===y?v===m||o(v,m,n,a,s):y)){p=!1;break}g||(g="constructor"==f)}if(p&&!g){var _=t.constructor,b=e.constructor;_!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b)&&(p=!1)}return s.delete(t),s.delete(e),p}},function(t,e,n){var r=n(203),i=n(488),a=n(209),o=n(113),s=n(206),u=n(207),l=n(51);t.exports=function(t,e){return o(t)&&s(e)?u(l(t),e):function(n){var o=i(n,t);return void 0===o&&o===e?a(n,t):r(e,o,3)}}},function(t,e,n){var r=n(112);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e,n){var r=/^\./,i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=n(490)(function(t){var e=[];return r.test(t)&&e.push(""),t.replace(i,function(t,n,r,i){e.push(r?i.replace(a,"$1"):n||t)}),e});t.exports=o},function(t,e,n){var r=n(491);t.exports=function(t){var e=r(t,function(t){return 500===n.size&&n.clear(),t}),n=e.cache;return e}},function(t,e,n){function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(a);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(r.Cache||i),n}var i=n(104),a="Expected a function";r.Cache=i,t.exports=r},function(t,e,n){var r=n(35),i=n(50),a=n(3),o=n(49),s=r?r.prototype:void 0,u=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(a(e))return i(e,t)+"";if(o(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(495),i=n(496),a=n(113),o=n(51);t.exports=function(t){return a(t)?r(o(t)):i(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(112);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e,n){var r=n(211),i=n(48),a=n(498),o=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var u=null==n?0:a(n);return u<0&&(u=o(s+u,0)),r(t,i(e,3),u)}},function(t,e,n){var r=n(499);t.exports=function(t){var e=r(t),n=e%1;return e==e?n?e-n:e:0}},function(t,e,n){var r=n(500);t.exports=function(t){return t?(t=r(t))===1/0||t===-1/0?1.7976931348623157e308*(t<0?-1:1):t==t?t:0:0===t?t:0}},function(t,e,n){var r=n(15),i=n(49),a=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,l=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var n=s.test(t);return n||u.test(t)?l(t.slice(2),n?2:8):o.test(t)?NaN:+t}},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,a=Object(e),o=r(e),s=o.length;s--;){var u=o[t?s:++i];if(!1===n(a[u],u,a))break}return e}}},function(t,e,n){var r=n(202),i=n(205);t.exports=function(t,e){return t===e||r(t,e,i(e))}},function(t,e,n){var r=n(504),i=n(209);t.exports=function(t,e){return r(t,e,function(e,n){return i(t,n)})}},function(t,e,n){var r=n(112),i=n(505),a=n(76);t.exports=function(t,e,n){for(var o=-1,s=e.length,u={};++o<s;){var l=e[o],c=r(t,l);n(c,l)&&i(u,a(l,t),c)}return u}},function(t,e,n){var r=n(61),i=n(76),a=n(63),o=n(15),s=n(51);t.exports=function(t,e,n,u){if(!o(t))return t;for(var l=-1,c=(e=i(e,t)).length,h=c-1,f=t;null!=f&&++l<c;){var d=s(e[l]),p=n;if(l!=h){var g=f[d];void 0===(p=u?u(g,d,f):void 0)&&(p=o(g)?g:a(e[l+1])?[]:{})}r(f,d,p),f=f[d]}return t}},function(t,e,n){var r=n(507),i=n(148),a=n(149);t.exports=function(t){return a(i(t,void 0,r),t+"")}},function(t,e,n){var r=n(77);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},function(t,e,n){var r=n(35),i=n(88),a=n(3),o=r?r.isConcatSpreadable:void 0;t.exports=function(t){return a(t)||i(t)||!!(o&&t&&t[o])}},function(t,e,n){!function(t,e,n){"use strict";function r(){}function i(t,n,r){var i=n[1][0]-n[0][0],a=n[1][1]-n[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),e.geoStream(r,t.stream(h));var s=h.result(),u=Math.min(i/(s[1][0]-s[0][0]),a/(s[1][1]-s[0][1])),l=+n[0][0]+(i-u*(s[1][0]+s[0][0]))/2,c=+n[0][1]+(a-u*(s[1][1]+s[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*u).translate([l,c])}function a(t,e,n){return i(t,[[0,0],e],n)}var o=1e-6,s=1/0,u=s,l=-s,c=l,h={point:function(t,e){t<s&&(s=t),t>l&&(l=t),e<u&&(u=e),e>c&&(c=e)},lineStart:r,lineEnd:r,polygonStart:r,polygonEnd:r,result:function(){var t=[[s,u],[l,c]];return l=c=-(u=s=1/0),t}};t.geoAlbersUsa=function(){function t(t){var e=t[0],n=t[1];return f=null,l.point(e,n),f||(c.point(e,n),f)||(h.point(e,n),f)}function r(){return s=u=null,t}var s,u,l,c,h,f,d=e.geoAlbers(),p=e.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),g=e.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),v={point:function(t,e){f=[t,e]}};return t.invert=function(t){var e=d.scale(),n=d.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?p:i>=.166&&i<.234&&r>=-.214&&r<-.115?g:d).invert(t)},t.stream=function(t){return s&&u===t?s:s=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([d.stream(u=t),p.stream(t),g.stream(t)])},t.precision=function(t){return arguments.length?(d.precision(t),p.precision(t),g.precision(t),r()):d.precision()},t.scale=function(e){return arguments.length?(d.scale(e),p.scale(.35*e),g.scale(e),t.translate(d.translate())):d.scale()},t.translate=function(t){if(!arguments.length)return d.translate();var e=d.scale(),n=+t[0],i=+t[1];return l=d.translate(t).clipExtent([[n-.455*e,i-.238*e],[n+.455*e,i+.238*e]]).stream(v),c=p.translate([n-.307*e,i+.201*e]).clipExtent([[n-.425*e+o,i+.12*e+o],[n-.214*e-o,i+.234*e-o]]).stream(v),h=g.translate([n-.205*e,i+.212*e]).clipExtent([[n-.214*e+o,i+.166*e+o],[n-.115*e-o,i+.234*e-o]]).stream(v),r()},t.fitExtent=function(e,n){return i(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e=d([-102.91,26.3]),n=d([-104,27.5]),r=d([-108,29.1]),i=d([-110,29.1]),a=d([-110,26.7]),o=d([-112.8,27.6]),s=d([-114.3,30.6]),u=d([-119.3,30.1]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.moveTo(a[0],a[1]),t.lineTo(o[0],o[1]),t.lineTo(s[0],s[1]),t.lineTo(u[0],u[1])},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(1070)},t.geoAlbersUsaTerritories=function(){function t(t){var e=t[0],n=t[1];return g=null,l.point(e,n),g||(c.point(e,n),g)||(h.point(e,n),g)||(f.point(e,n),g)||(d.point(e,n),g)||(p.point(e,n),g)}function r(){return s=u=null,t}var s,u,l,c,h,f,d,p,g,v=e.geoAlbers(),m=e.geoConicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),y=e.geoConicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),_=e.geoConicEqualArea().rotate([66,0]).center([0,18]).parallels([8,18]),b=e.geoEquirectangular().rotate([173,14]),x=e.geoEquirectangular().rotate([-145,-16.8]),w={point:function(t,e){g=[t,e]}};return t.invert=function(t){var e=v.scale(),n=v.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?m:i>=.166&&i<.234&&r>=-.214&&r<-.115?y:i>=.2064&&i<.2413&&r>=.312&&r<.385?_:i>=.09&&i<.1197&&r>=-.4243&&r<-.3232?b:i>=-.0518&&i<.0895&&r>=-.4243&&r<-.3824?x:v).invert(t)},t.stream=function(t){return s&&u===t?s:s=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([v.stream(u=t),m.stream(t),y.stream(t),_.stream(t),b.stream(t),x.stream(t)])},t.precision=function(t){return arguments.length?(v.precision(t),m.precision(t),y.precision(t),_.precision(t),b.precision(t),x.precision(t),r()):v.precision()},t.scale=function(e){return arguments.length?(v.scale(e),m.scale(.35*e),y.scale(e),_.scale(e),b.scale(2*e),x.scale(e),t.translate(v.translate())):v.scale()},t.translate=function(t){if(!arguments.length)return v.translate();var e=v.scale(),n=+t[0],i=+t[1];return l=v.translate(t).clipExtent([[n-.455*e,i-.238*e],[n+.455*e,i+.238*e]]).stream(w),c=m.translate([n-.307*e,i+.201*e]).clipExtent([[n-.425*e+o,i+.12*e+o],[n-.214*e-o,i+.233*e-o]]).stream(w),h=y.translate([n-.205*e,i+.212*e]).clipExtent([[n-.214*e+o,i+.166*e+o],[n-.115*e-o,i+.233*e-o]]).stream(w),f=_.translate([n+.35*e,i+.224*e]).clipExtent([[n+.312*e+o,i+.2064*e+o],[n+.385*e-o,i+.233*e-o]]).stream(w),d=b.translate([n-.492*e,i+.09*e]).clipExtent([[n-.4243*e+o,i+.0903*e+o],[n-.3233*e-o,i+.1197*e-o]]).stream(w),p=x.translate([n-.408*e,i+.018*e]).clipExtent([[n-.4244*e+o,i-.0519*e+o],[n-.3824*e-o,i+.0895*e-o]]).stream(w),r()},t.fitExtent=function(e,n){return i(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e=v([-110.4641,28.2805]),n=v([-104.0597,28.9528]),r=v([-103.7049,25.1031]),i=v([-109.8337,24.4531]),a=v([-124.4745,28.1407]),o=v([-110.931,30.8844]),s=v([-109.8337,24.4531]),u=v([-122.4628,21.8562]),l=v([-76.8579,25.1544]),c=v([-72.429,24.2097]),h=v([-72.8265,22.7056]),f=v([-77.1852,23.6392]),d=v([-125.0093,29.7791]),p=v([-118.5193,31.3262]),g=v([-118.064,29.6912]),m=v([-124.4369,28.169]),y=v([-128.1314,37.4582]),_=v([-125.2132,38.214]),b=v([-122.3616,30.5115]),x=v([-125.0315,29.8211]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),t.moveTo(a[0],a[1]),t.lineTo(o[0],o[1]),t.lineTo(s[0],s[1]),t.lineTo(s[0],s[1]),t.lineTo(u[0],u[1]),t.closePath(),t.moveTo(l[0],l[1]),t.lineTo(c[0],c[1]),t.lineTo(h[0],h[1]),t.lineTo(h[0],h[1]),t.lineTo(f[0],f[1]),t.closePath(),t.moveTo(d[0],d[1]),t.lineTo(p[0],p[1]),t.lineTo(g[0],g[1]),t.lineTo(g[0],g[1]),t.lineTo(m[0],m[1]),t.closePath(),t.moveTo(y[0],y[1]),t.lineTo(_[0],_[1]),t.lineTo(b[0],b[1]),t.lineTo(b[0],b[1]),t.lineTo(x[0],x[1]),t.closePath()},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(1070)},t.geoConicConformalSpain=function(){function t(t){var e=t[0],n=t[1];return h=null,l.point(e,n),h||(c.point(e,n),h)}function r(){return s=u=null,t}var s,u,l,c,h,f=e.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),d=e.geoConicConformal().rotate([5,-38.6]).parallels([0,60]),p={point:function(t,e){h=[t,e]}};return t.invert=function(t){var e=f.scale(),n=f.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.05346&&i<.0897&&r>=-.13388&&r<-.0322?d:f).invert(t)},t.stream=function(t){return s&&u===t?s:s=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([f.stream(u=t),d.stream(t)])},t.precision=function(t){return arguments.length?(f.precision(t),d.precision(t),r()):f.precision()},t.scale=function(e){return arguments.length?(f.scale(e),d.scale(e),t.translate(f.translate())):f.scale()},t.translate=function(t){if(!arguments.length)return f.translate();var e=f.scale(),n=+t[0],i=+t[1];return l=f.translate(t).clipExtent([[n-.06857*e,i-.1288*e],[n+.13249*e,i+.06*e]]).stream(p),c=d.translate([n+.1*e,i-.094*e]).clipExtent([[n-.1331*e+o,i+.053457*e+o],[n-.0354*e-o,i+.08969*e-o]]).stream(p),r()},t.fitExtent=function(e,n){return i(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e=f([-14.034675,34.965007]),n=f([-7.4208899,35.536988]),r=f([-7.3148275,33.54359]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1])},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(2700)},t.geoConicConformalPortugal=function(){function t(t){var e=t[0],n=t[1];return f=null,l.point(e,n),f||(c.point(e,n),f)||(h.point(e,n),f)}function r(){return s=u=null,t}var s,u,l,c,h,f,d=e.geoConicConformal().rotate([10,-39.3]).parallels([0,60]),p=e.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),g=e.geoConicConformal().rotate([27.8,-38.6]).parallels([0,60]),v={point:function(t,e){f=[t,e]}};return t.invert=function(t){var e=d.scale(),n=d.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.0093&&i<.03678&&r>=-.03875&&r<-.0116?p:i>=-.0412&&i<.0091&&r>=-.07782&&r<-.01166?g:d).invert(t)},t.stream=function(t){return s&&u===t?s:s=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([d.stream(u=t),p.stream(t),g.stream(t)])},t.precision=function(t){return arguments.length?(d.precision(t),p.precision(t),g.precision(t),r()):d.precision()},t.scale=function(e){return arguments.length?(d.scale(e),p.scale(e),g.scale(.6*e),t.translate(d.translate())):d.scale()},t.translate=function(t){if(!arguments.length)return d.translate();var e=d.scale(),n=+t[0],i=+t[1];return l=d.translate(t).clipExtent([[n-.0115*e,i-.1138*e],[n+.2105*e,i+.0673*e]]).stream(v),c=p.translate([n-.0265*e,i+.025*e]).clipExtent([[n-.0388*e+o,i+.0093*e+o],[n-.0116*e-o,i+.0368*e-o]]).stream(v),h=g.translate([n-.045*e,i+-.02*e]).clipExtent([[n-.0778*e+o,i-.0413*e+o],[n-.0117*e-o,i+.0091*e-o]]).stream(v),r()},t.fitExtent=function(e,n){return i(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e=d([-12.8351,38.7113]),n=d([-10.8482,38.7633]),r=d([-10.8181,37.2072]),i=d([-12.7345,37.1573]),a=d([-16.0753,41.4436]),o=d([-10.9168,41.6861]),s=d([-10.8557,38.7747]),u=d([-15.6728,38.5505]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),t.moveTo(a[0],a[1]),t.lineTo(o[0],o[1]),t.lineTo(s[0],s[1]),t.lineTo(s[0],s[1]),t.lineTo(u[0],u[1]),t.closePath()},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(4200)},t.geoMercatorEcuador=function(){function t(t){var e=t[0],n=t[1];return h=null,l.point(e,n),h||(c.point(e,n),h)}function r(){return s=u=null,t}var s,u,l,c,h,f=e.geoMercator().rotate([80,1.5]),d=e.geoMercator().rotate([90.73,1]),p={point:function(t,e){h=[t,e]}};return t.invert=function(t){var e=f.scale(),n=f.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=-.0676&&i<-.026&&r>=-.0857&&r<-.0263?d:f).invert(t)},t.stream=function(t){return s&&u===t?s:s=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([f.stream(u=t),d.stream(t)])},t.precision=function(t){return arguments.length?(f.precision(t),d.precision(t),r()):f.precision()},t.scale=function(e){return arguments.length?(f.scale(e),d.scale(e),t.translate(f.translate())):f.scale()},t.translate=function(t){if(!arguments.length)return f.translate();var e=f.scale(),n=+t[0],i=+t[1];return l=f.translate(t).clipExtent([[n-.0262*e,i-.0734*e],[n+.1741*e,i+.079*e]]).stream(p),c=d.translate([n-.06*e,i-.04*e]).clipExtent([[n-.0857*e+o,i-.0676*e+o],[n-.0263*e-o,i-.026*e-o]]).stream(p),r()},t.fitExtent=function(e,n){return i(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e=f([-84.9032,2.3757]),n=f([-81.5047,2.3708]),r=f([-81.5063,-.01]),i=f([-84.9086,-.005]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath()},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(3500)},t.geoTransverseMercatorChile=function(){function t(t){var e=t[0],n=t[1];return d=null,l.point(e,n),d||(c.point(e,n),d)||(h.point(e,n),d)||(f.point(e,n),d)}function r(){return s=u=null,t}var s,u,l,c,h,f,d,p=e.geoTransverseMercator().rotate([72,37]),g=e.geoStereographic().rotate([72,0]),v=e.geoMercator().rotate([80,33.5]),m=e.geoMercator().rotate([110,25]),y={point:function(t,e){d=[t,e]}};return t.invert=function(t){var e=p.scale(),n=p.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.2582&&i<.32&&r>=-.1036&&r<-.087?g:i>=-.01298&&i<.0133&&r>=-.11396&&r<-.05944?v:i>=.01539&&i<.03911&&r>=-.089&&r<-.0588?m:p).invert(t)},t.stream=function(t){return s&&u===t?s:s=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([p.stream(u=t),g.stream(t),v.stream(t),m.stream(t)])},t.precision=function(t){return arguments.length?(p.precision(t),g.precision(t),v.precision(t),m.precision(t),r()):p.precision()},t.scale=function(e){return arguments.length?(p.scale(e),g.scale(.15*e),v.scale(1.5*e),m.scale(1.5*e),t.translate(p.translate())):p.scale()},t.translate=function(t){if(!arguments.length)return p.translate();var e=p.scale(),n=+t[0],i=+t[1];return l=p.translate(t).clipExtent([[n-.059*e,i-.3835*e],[n+.4498*e,i+.3375*e]]).stream(y),c=g.translate([n-.087*e,i+.17*e]).clipExtent([[n-.1166*e+o,i+.2582*e+o],[n-.06*e-o,i+.32*e-o]]).stream(y),h=v.translate([n-.092*e,i-0*e]).clipExtent([[n-.114*e+o,i-.013*e+o],[n-.0594*e-o,i+.0133*e-o]]).stream(y),f=m.translate([n-.089*e,i-.0265*e]).clipExtent([[n-.089*e+o,i+.0154*e+o],[n-.0588*e-o,i+.0391*e-o]]).stream(y),r()},t.fitExtent=function(e,n){return i(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e=p([-82.6999,-51.3043]),n=p([-77.5442,-51.6631]),r=p([-78.0254,-55.186]),i=p([-83.6106,-54.7785]),a=p([-80.0638,-35.984]),o=p([-76.2153,-36.1811]),s=p([-76.2994,-37.6839]),u=p([-80.2231,-37.4757]),l=p([-78.442,-37.706]),c=p([-76.263,-37.8054]),h=p([-76.344,-39.1595]),f=p([-78.5638,-39.0559]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),t.moveTo(a[0],a[1]),t.lineTo(o[0],o[1]),t.lineTo(s[0],s[1]),t.lineTo(s[0],s[1]),t.lineTo(u[0],u[1]),t.closePath(),t.moveTo(l[0],l[1]),t.lineTo(c[0],c[1]),t.lineTo(h[0],h[1]),t.lineTo(h[0],h[1]),t.lineTo(f[0],f[1]),t.closePath()},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(700)},t.geoConicEquidistantJapan=function(){function t(t){var e=t[0],n=t[1];return f=null,l.point(e,n),f||(c.point(e,n),f)||(h.point(e,n),f)}function r(){return s=u=null,t}var s,u,l,c,h,f,d=e.geoConicEquidistant().rotate([-136,-22]).parallels([40,34]),p=e.geoConicEquidistant().rotate([-146,-26]).parallels([40,34]),g=e.geoConicEquidistant().rotate([-126,-19]).parallels([40,34]),v={point:function(t,e){f=[t,e]}};return t.invert=function(t){var e=d.scale(),n=d.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=-.10925&&i<-.02701&&r>=-.135&&r<-.0397?p:i>=.04713&&i<.11138&&r>=-.03986&&r<.051?g:d).invert(t)},t.stream=function(t){return s&&u===t?s:s=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([d.stream(u=t),p.stream(t),g.stream(t)])},t.precision=function(t){return arguments.length?(d.precision(t),p.precision(t),g.precision(t),r()):d.precision()},t.scale=function(e){return arguments.length?(d.scale(e),p.scale(e),g.scale(.7*e),t.translate(d.translate())):d.scale()},t.translate=function(t){if(!arguments.length)return d.translate();var e=d.scale(),n=+t[0],i=+t[1];return l=d.translate(t).clipExtent([[n-.1352*e,i-.1091*e],[n+.117*e,i+.098*e]]).stream(v),c=p.translate([n-.0425*e,i-.005*e]).clipExtent([[n-.135*e+o,i-.1093*e+o],[n-.0397*e-o,i-.027*e-o]]).stream(v),h=g.translate(t).clipExtent([[n-.0399*e+o,i+.0471*e+o],[n+.051*e-o,i+.1114*e-o]]).stream(v),r()},t.fitExtent=function(e,n){return i(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e=d([126.01320483689143,41.621090310215585]),n=d([133.04304387025903,42.15087523707186]),r=d([133.3021766080688,37.43975444725098]),i=d([126.87889168628224,36.95488945159779]),a=d([132.9,29.8]),o=d([134,33]),s=d([139.3,33.2]),u=d([139.16,30.5]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),t.moveTo(a[0],a[1]),t.lineTo(o[0],o[1]),t.lineTo(s[0],s[1]),t.lineTo(u[0],u[1])},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(2200)},t.geoConicConformalFrance=function(){function t(t){var e=t[0],n=t[1];return x=null,l.point(e,n),x||(c.point(e,n),x)||(h.point(e,n),x)||(f.point(e,n),x)||(d.point(e,n),x)||(p.point(e,n),x)||(g.point(e,n),x)||(v.point(e,n),x)||(m.point(e,n),x)||(y.point(e,n),x)||(_.point(e,n),x)||(b.point(e,n),x)}function r(){return s=u=null,t}var s,u,l,c,h,f,d,p,g,v,m,y,_,b,x,w=e.geoConicConformal().rotate([-3,-46.2]).parallels([0,60]),S=e.geoMercator().center([-53.2,3.9]),T=e.geoMercator().center([-61.03,14.67]),O=e.geoMercator().center([-61.46,16.14]),M=e.geoMercator().center([-62.85,17.92]),k=e.geoMercator().center([-56.23,46.93]),C=e.geoMercator().center([45.16,-12.8]),E=e.geoMercator().center([55.52,-21.13]),A=e.geoMercator().center([165.8,-21.07]),I=e.geoMercator().center([-178.1,-14.3]),P=e.geoMercator().center([-150.55,-17.11]),L=e.geoMercator().center([-150.55,-17.11]),D={point:function(t,e){x=[t,e]}};return t.invert=function(t){var e=w.scale(),n=w.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.029&&i<.0864&&r>=-.14&&r<-.0996?S:i>=0&&i<.029&&r>=-.14&&r<-.0996?T:i>=-.032&&i<0&&r>=-.14&&r<-.0996?O:i>=-.052&&i<-.032&&r>=-.14&&r<-.0996?M:i>=-.076&&i<.052&&r>=-.14&&r<-.0996?k:i>=-.076&&i<-.052&&r>=.0967&&r<.1371?C:i>=-.052&&i<-.02&&r>=.0967&&r<.1371?E:i>=-.02&&i<.012&&r>=.0967&&r<.1371?A:i>=.012&&i<.033&&r>=.0967&&r<.1371?I:i>=.033&&i<.0864&&r>=.0967&&r<.1371?P:w).invert(t)},t.stream=function(t){return s&&u===t?s:s=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([w.stream(u=t),S.stream(t),T.stream(t),O.stream(t),M.stream(t),k.stream(t),C.stream(t),E.stream(t),A.stream(t),I.stream(t),P.stream(t),L.stream(t)])},t.precision=function(t){return arguments.length?(w.precision(t),S.precision(t),T.precision(t),O.precision(t),M.precision(t),k.precision(t),C.precision(t),E.precision(t),A.precision(t),I.precision(t),P.precision(t),L.precision(t),r()):w.precision()},t.scale=function(e){return arguments.length?(w.scale(e),S.scale(.6*e),T.scale(1.6*e),O.scale(1.4*e),M.scale(5*e),k.scale(1.3*e),C.scale(1.6*e),E.scale(1.2*e),A.scale(.3*e),I.scale(2.7*e),P.scale(.5*e),L.scale(.06*e),t.translate(w.translate())):w.scale()},t.translate=function(t){if(!arguments.length)return w.translate();var e=w.scale(),n=+t[0],i=+t[1];return l=w.translate(t).clipExtent([[n-.0996*e,i-.0908*e],[n+.0967*e,i+.0864*e]]).stream(D),c=S.translate([n-.12*e,i+.0575*e]).clipExtent([[n-.14*e+o,i+.029*e+o],[n-.0996*e-o,i+.0864*e-o]]).stream(D),h=T.translate([n-.12*e,i+.013*e]).clipExtent([[n-.14*e+o,i+0*e+o],[n-.0996*e-o,i+.029*e-o]]).stream(D),f=O.translate([n-.12*e,i-.014*e]).clipExtent([[n-.14*e+o,i-.032*e+o],[n-.0996*e-o,i+0*e-o]]).stream(D),d=M.translate([n-.12*e,i-.044*e]).clipExtent([[n-.14*e+o,i-.052*e+o],[n-.0996*e-o,i-.032*e-o]]).stream(D),p=k.translate([n-.12*e,i-.065*e]).clipExtent([[n-.14*e+o,i-.076*e+o],[n-.0996*e-o,i-.052*e-o]]).stream(D),g=C.translate([n+.117*e,i-.064*e]).clipExtent([[n+.0967*e+o,i-.076*e+o],[n+.1371*e-o,i-.052*e-o]]).stream(D),v=E.translate([n+.116*e,i-.0355*e]).clipExtent([[n+.0967*e+o,i-.052*e+o],[n+.1371*e-o,i-.02*e-o]]).stream(D),m=A.translate([n+.116*e,i-.0048*e]).clipExtent([[n+.0967*e+o,i-.02*e+o],[n+.1371*e-o,i+.012*e-o]]).stream(D),y=I.translate([n+.116*e,i+.022*e]).clipExtent([[n+.0967*e+o,i+.012*e+o],[n+.1371*e-o,i+.033*e-o]]).stream(D),b=L.translate([n+.11*e,i+.045*e]).clipExtent([[n+.0967*e+o,i+.033*e+o],[n+.1371*e-o,i+.06*e-o]]).stream(D),_=P.translate([n+.115*e,i+.075*e]).clipExtent([[n+.0967*e+o,i+.06*e+o],[n+.1371*e-o,i+.0864*e-o]]).stream(D),r()},t.fitExtent=function(e,n){return i(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e,n,r,i;e=w([-7.938886725111036,43.7219460918835]),n=w([-4.832080896458295,44.12930268549372]),r=w([-4.205299743793263,40.98096346967365]),i=w([-7.071796453126152,40.610037319181444]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([-8.42751373617692,45.32889452553031]),n=w([-5.18599305777107,45.7566442062976]),r=w([-4.832080905154431,44.129302726751426]),i=w([-7.938886737126192,43.72194613263854]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([-9.012656899657046,47.127733821030176]),n=w([-5.6105244772793155,47.579777861410626]),r=w([-5.185993067168585,45.756644248170346]),i=w([-8.427513749141811,45.32889456686326]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([-9.405747558985553,48.26506375557457]),n=w([-5.896175018439575,48.733352850851624]),r=w([-5.610524487556043,47.57977790393761]),i=w([-9.012656913808351,47.127733862971255]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([-9.908436061346974,49.642448789505856]),n=w([-6.262026716233124,50.131426841787174]),r=w([-5.896175029331232,48.73335289377258]),i=w([-9.40574757396393,48.26506379787767]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([11.996907706504462,50.16039028163579]),n=w([15.649907879773343,49.68279246765253]),r=w([15.156712840526632,48.30371557625831]),i=w([11.64122661754411,48.761078240546816]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([11.641226606955788,48.7610781975889]),n=w([15.156712825832164,48.30371553390465]),r=w([14.549932166241172,46.4866532486199]),i=w([11.204443787952183,46.91899233914248]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([11.204443778297161,46.918992296823646]),n=w([14.549932152815039,46.486653206856396]),r=w([13.994409796764009,44.695833444323256]),i=w([10.805306599253848,45.105133870684924]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([10.805306590412085,45.10513382903308]),n=w([13.99440978444733,44.695833403183606]),r=w([13.654633799024392,43.53552468558152]),i=w([10.561516803980956,43.930671459798624]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([10.561516795617383,43.93067141859757]),n=w([13.654633787361952,43.5355246448671]),r=w([12.867691604239901,40.640701985019405]),i=w([9.997809515987688,41.00288343254471]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([10.8,42.4]),n=w([12.8,42.13]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1])},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(2700)},t.geoConicConformalEurope=function(){function t(t){var e=t[0],n=t[1];return x=null,l.point(e,n),x||(h.point(e,n),x)||(m.point(e,n),x)||(c.point(e,n),x)||(v.point(e,n),x)||(g.point(e,n),x)||(y.point(e,n),x)||(_.point(e,n),x)||(b.point(e,n),x)||(f.point(e,n),x)||(d.point(e,n),x)||(p.point(e,n),x)}function r(){return s=u=null,t}var s,u,l,c,h,f,d,p,g,v,m,y,_,b,x,w=e.geoConicConformal().rotate([-10,-53]).parallels([0,60]),S=e.geoMercator().center([-61.46,16.14]),T=e.geoMercator().center([-53.2,3.9]),O=e.geoConicConformal().rotate([27.8,-38.9]).parallels([0,60]),M=e.geoConicConformal().rotate([25.43,-37.398]).parallels([0,60]),k=e.geoConicConformal().rotate([31.17,-39.539]).parallels([0,60]),C=e.geoConicConformal().rotate([17,-32.7]).parallels([0,60]),E=e.geoConicConformal().rotate([16,-28.5]).parallels([0,60]),A=e.geoMercator().center([-61.03,14.67]),I=e.geoMercator().center([45.16,-12.8]),P=e.geoMercator().center([55.52,-21.13]),L=e.geoConicConformal().rotate([-14.4,-35.95]).parallels([0,60]),D={point:function(t,e){x=[t,e]}};return t.invert=function(t){var e=w.scale(),n=w.translate(),r=(t[0]-(n[0]+.08*e))/e,i=(t[1]-n[1])/e;return(i>=-.31&&i<-.24&&r>=.14&&r<.24?S:i>=-.24&&i<-.17&&r>=.14&&r<.24?T:i>=-.17&&i<-.12&&r>=.21&&r<.24?M:i>=-.17&&i<-.14&&r>=.14&&r<.165?k:i>=-.17&&i<-.1&&r>=.14&&r<.24?O:i>=-.1&&i<-.03&&r>=.14&&r<.24?C:i>=-.03&&i<.04&&r>=.14&&r<.24?E:i>=-.31&&i<-.24&&r>=.24&&r<.34?A:i>=-.24&&i<-.17&&r>=.24&&r<.34?I:i>=-.17&&i<-.1&&r>=.24&&r<.34?P:i>=-.1&&i<-.03&&r>=.24&&r<.34?L:w).invert(t)},t.stream=function(t){return s&&u===t?s:s=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([w.stream(u=t),T.stream(t),A.stream(t),S.stream(t),E.stream(t),C.stream(t),I.stream(t),P.stream(t),L.stream(t),O.stream(t),M.stream(t),k.stream(t)])},t.precision=function(t){return arguments.length?(w.precision(t),T.precision(t),A.precision(t),S.precision(t),E.precision(t),C.precision(t),I.precision(t),P.precision(t),L.precision(t),O.precision(t),M.precision(t),k.precision(t),r()):w.precision()},t.scale=function(e){return arguments.length?(w.scale(e),S.scale(3*e),T.scale(.8*e),A.scale(3.5*e),P.scale(2.7*e),O.scale(2*e),M.scale(2*e),k.scale(2*e),C.scale(3*e),E.scale(e),I.scale(5.5*e),L.scale(6*e),t.translate(w.translate())):w.scale()},t.translate=function(t){if(!arguments.length)return w.translate();var e=w.scale(),n=+t[0],i=+t[1];return l=w.translate([n-.08*e,i]).clipExtent([[n-.51*e,i-.33*e],[n+.5*e,i+.33*e]]).stream(D),c=S.translate([n+.19*e,i-.275*e]).clipExtent([[n+.14*e+o,i-.31*e+o],[n+.24*e-o,i-.24*e-o]]).stream(D),h=T.translate([n+.19*e,i-.205*e]).clipExtent([[n+.14*e+o,i-.24*e+o],[n+.24*e-o,i-.17*e-o]]).stream(D),f=O.translate([n+.19*e,i-.135*e]).clipExtent([[n+.14*e+o,i-.17*e+o],[n+.24*e-o,i-.1*e-o]]).stream(D),d=M.translate([n+.225*e,i-.147*e]).clipExtent([[n+.21*e+o,i-.17*e+o],[n+.24*e-o,i-.12*e-o]]).stream(D),p=k.translate([n+.153*e,i-.15*e]).clipExtent([[n+.14*e+o,i-.17*e+o],[n+.165*e-o,i-.14*e-o]]).stream(D),g=C.translate([n+.19*e,i-.065*e]).clipExtent([[n+.14*e+o,i-.1*e+o],[n+.24*e-o,i-.03*e-o]]).stream(D),v=E.translate([n+.19*e,i+.005*e]).clipExtent([[n+.14*e+o,i-.03*e+o],[n+.24*e-o,i+.04*e-o]]).stream(D),m=A.translate([n+.29*e,i-.275*e]).clipExtent([[n+.24*e+o,i-.31*e+o],[n+.34*e-o,i-.24*e-o]]).stream(D),y=I.translate([n+.29*e,i-.205*e]).clipExtent([[n+.24*e+o,i-.24*e+o],[n+.34*e-o,i-.17*e-o]]).stream(D),_=P.translate([n+.29*e,i-.135*e]).clipExtent([[n+.24*e+o,i-.17*e+o],[n+.34*e-o,i-.1*e-o]]).stream(D),b=L.translate([n+.29*e,i-.065*e]).clipExtent([[n+.24*e+o,i-.1*e+o],[n+.34*e-o,i-.03*e-o]]).stream(D),r()},t.fitExtent=function(e,n){return i(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e,n,r,i;e=w([42.45755610828648,63.343658547914934]),n=w([52.65837266667029,59.35045080290929]),r=w([47.19754502247785,56.12653496548117]),i=w([37.673034273363044,59.61638268506111]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([59.41110754003403,62.35069727399336]),n=w([66.75050228640794,57.11797303636038]),r=w([60.236065725110436,54.63331433818992]),i=w([52.65837313153311,59.350450804599355]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([48.81091130080243,66.93353402634641]),n=w([59.41110730654679,62.35069740653086]),r=w([52.6583728974441,59.3504509222445]),i=w([42.45755631675751,63.34365868805821]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([31.054198418446475,52.1080673766184]),n=w([39.09869284884117,49.400700047190554]),r=w([36.0580811499175,46.02944174908498]),i=w([28.690508588835726,48.433126979386415]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([33.977877745912025,55.849945501331]),n=w([42.75328432167726,52.78455122462353]),r=w([39.09869297540224,49.400700176148625]),i=w([31.05419851807008,52.10806751810923]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([52.658372900759296,59.35045068526415]),n=w([60.23606549583304,54.63331423800264]),r=w([54.6756370953122,51.892298789399455]),i=w([47.19754524788189,56.126534861222794]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([47.19754506082455,56.126534735591456]),n=w([54.675636900123514,51.892298681337095]),r=w([49.94448648951486,48.98775484983285]),i=w([42.75328468716108,52.78455126060818]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([42.75328453416769,52.78455113209101]),n=w([49.94448632339758,48.98775473706457]),r=w([45.912339990394315,45.99361784987003]),i=w([39.09869317356607,49.40070009378711]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([37.673034114296634,59.61638254183119]),n=w([47.197544835420544,56.126534839849846]),r=w([42.75328447467064,52.78455135314068]),i=w([33.977877870363905,55.849945644671145]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([44.56748486446032,57.26489367845818]),r=w([43.9335791193588,53.746540942601726]),i=w([43,56]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=w([37.673034114296634,59.61638254183119]),n=w([40.25902691953466,58.83002044222639]),r=w([38.458270492742024,57.26232178028002]),i=w([35.97754948030156,58.00266637992386]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath()},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(750)},t.geoMercatorMalaysia=function(){function t(t){var e=t[0],n=t[1];return h=null,l.point(e,n),h||(c.point(e,n),h)}function r(){return s=u=null,t}var s,u,l,c,h,f=e.geoMercator().center([105.25,4]),d=e.geoMercator().center([118.65,2.86]),p={point:function(t,e){h=[t,e]}};return t.invert=function(t){var e=f.scale(),n=f.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=-.0521&&i<.0229&&r>=-.0111&&r<.1?d:f).invert(t)},t.stream=function(t){return s&&u===t?s:s=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([f.stream(u=t),d.stream(t)])},t.precision=function(t){return arguments.length?(f.precision(t),d.precision(t),r()):f.precision()},t.scale=function(e){return arguments.length?(f.scale(e),d.scale(.615*e),t.translate(f.translate())):f.scale()},t.translate=function(t){if(!arguments.length)return f.translate();var e=f.scale(),n=+t[0],i=+t[1];return l=f.translate(t).clipExtent([[n-.11*e,i-.0521*e],[n-.0111*e,i+.0521*e]]).stream(p),c=d.translate([n+.09*e,i-0*e]).clipExtent([[n-.0111*e+o,i-.0521*e+o],[n+.1*e-o,i+.024*e-o]]).stream(p),r()},t.fitExtent=function(e,n){return i(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e=f([106.3214,2.0228]),n=f([105.1843,2.3761]),r=f([104.2151,3.3618]),i=f([104.215,4.5651]);t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1])},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(4800)},t.geoMercatorEquatorialGuinea=function(){function t(t){var e=t[0],n=t[1];return f=null,l.point(e,n),f||(c.point(e,n),f)||(h.point(e,n),f)}function r(){return s=u=null,t}var s,u,l,c,h,f,d=e.geoMercator().rotate([-9.5,-1.5]),p=e.geoMercator().rotate([-8.6,-3.5]),g=e.geoMercator().rotate([-5.6,1.45]),v={point:function(t,e){f=[t,e]}};return t.invert=function(t){var e=d.scale(),n=d.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=-.02&&i<0&&r>=-.038&&r<-.005?p:i>=0&&i<.02&&r>=-.038&&r<-.005?g:d).invert(t)},t.stream=function(t){return s&&u===t?s:s=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([d.stream(u=t),p.stream(t),g.stream(t)])},t.precision=function(t){return arguments.length?(d.precision(t),p.precision(t),g.precision(t),r()):d.precision()},t.scale=function(e){return arguments.length?(d.scale(e),p.scale(1.5*e),g.scale(4*e),t.translate(d.translate())):d.scale()},t.translate=function(t){if(!arguments.length)return d.translate();var e=d.scale(),n=+t[0],i=+t[1];return l=d.translate(t).clipExtent([[n-.005*e,i-.02*e],[n+.038*e,i+.02*e]]).stream(v),c=p.translate([n-.025*e,i-.01*e]).clipExtent([[n-.038*e+o,i-.02*e+o],[n-.005*e-o,i+0*e-o]]).stream(v),h=g.translate([n-.025*e,i+.01*e]).clipExtent([[n-.038*e+o,i-0*e+o],[n-.005*e-o,i+.02*e-o]]).stream(v),r()},t.fitExtent=function(e,n){return i(t,e,n)},t.fitSize=function(e,n){return a(t,e,n)},t.drawCompositionBorders=function(t){var e,n,r,i;e=d([9.21327272751682,2.645820439454123]),n=d([11.679126293239872,2.644755519268689]),r=d([11.676845389029227,.35307824637606433]),i=d([9.213572917774014,.35414205204417754]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=d([7.320873711543669,2.64475551449975]),n=d([9.213272722738658,2.645820434679803]),r=d([9.213422896480349,1.4999812505283054]),i=d([7.322014760520787,1.4989168878985566]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath(),e=d([7.3220147605302905,1.4989168783492766]),n=d([9.213422896481598,1.499981240979021]),r=d([9.213572912999604,.354142056817247]),i=d([7.323154615739809,.353078251154504]),t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),t.lineTo(r[0],r[1]),t.lineTo(i[0],i[1]),t.closePath()},t.getCompositionBorders=function(){var t=n.path();return this.drawCompositionBorders(t),t.toString()},t.scale(12e3)},Object.defineProperty(t,"__esModule",{value:!0})}(e,n(510),n(39))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(215);n.d(e,"geoArea",function(){return r.c});var i=n(511);n.d(e,"geoBounds",function(){return i.a});var a=n(512);n.d(e,"geoCentroid",function(){return a.a});var o=n(216);n.d(e,"geoCircle",function(){return o.b});var s=n(218);n.d(e,"geoClipExtent",function(){return s.b});var u=n(515);n.d(e,"geoDistance",function(){return u.a});var l=n(516);n.d(e,"geoGraticule",function(){return l.a});var c=n(517);n.d(e,"geoInterpolate",function(){return c.a});var h=n(222);n.d(e,"geoLength",function(){return h.a});var f=n(518);n.d(e,"geoPath",function(){return f.a});var d=n(225);n.d(e,"geoAlbers",function(){return d.a});var p=n(527);n.d(e,"geoAlbersUsa",function(){return p.a});var g=n(528);n.d(e,"geoAzimuthalEqualArea",function(){return g.b}),n.d(e,"geoAzimuthalEqualAreaRaw",function(){return g.a});var v=n(529);n.d(e,"geoAzimuthalEquidistant",function(){return v.b}),n.d(e,"geoAzimuthalEquidistantRaw",function(){return v.a});var m=n(530);n.d(e,"geoConicConformal",function(){return m.b}),n.d(e,"geoConicConformalRaw",function(){return m.a});var y=n(115);n.d(e,"geoConicEqualArea",function(){return y.b}),n.d(e,"geoConicEqualAreaRaw",function(){return y.a});var _=n(531);n.d(e,"geoConicEquidistant",function(){return _.b}),n.d(e,"geoConicEquidistantRaw",function(){return _.a});var b=n(228);n.d(e,"geoEquirectangular",function(){return b.a}),n.d(e,"geoEquirectangularRaw",function(){return b.b});var x=n(532);n.d(e,"geoGnomonic",function(){return x.a}),n.d(e,"geoGnomonicRaw",function(){return x.b});var w=n(22);n.d(e,"geoProjection",function(){return w.a}),n.d(e,"geoProjectionMutator",function(){return w.b});var S=n(118);n.d(e,"geoMercator",function(){return S.a}),n.d(e,"geoMercatorRaw",function(){return S.c});var T=n(533);n.d(e,"geoOrthographic",function(){return T.a}),n.d(e,"geoOrthographicRaw",function(){return T.b});var O=n(534);n.d(e,"geoStereographic",function(){return O.a}),n.d(e,"geoStereographicRaw",function(){return O.b});var M=n(535);n.d(e,"geoTransverseMercator",function(){return M.a}),n.d(e,"geoTransverseMercatorRaw",function(){return M.b});var k=n(114);n.d(e,"geoRotation",function(){return k.a});var C=n(33);n.d(e,"geoStream",function(){return C.a});var E=n(117);n.d(e,"geoTransform",function(){return E.a})},function(t,e,n){"use strict";function r(t,e){x.push(w=[d=t,g=t]),e<p&&(p=e),e>v&&(v=e)}function i(t,e){var n=Object(O.a)([t*M.r,e*M.r]);if(b){var i=Object(O.c)(b,n),a=[i[1],-i[0],0],o=Object(O.c)(a,i);Object(O.e)(o),o=Object(O.g)(o);var s,u=t-m,l=u>0?1:-1,h=o[0]*M.h*l,f=Object(M.a)(u)>180;f^(l*m<h&&h<l*t)?(s=o[1]*M.h)>v&&(v=s):f^(l*m<(h=(h+360)%360-180)&&h<l*t)?(s=-o[1]*M.h)<p&&(p=s):(e<p&&(p=e),e>v&&(v=e)),f?t<m?c(d,t)>c(d,g)&&(g=t):c(t,g)>c(d,g)&&(d=t):g>=d?(t<d&&(d=t),t>g&&(g=t)):t>m?c(d,t)>c(d,g)&&(g=t):c(t,g)>c(d,g)&&(d=t)}else r(t,e);b=n,m=t}function a(){E.point=i}function o(){w[0]=d,w[1]=g,E.point=r,b=null}function s(t,e){if(b){var n=t-m;C.add(Object(M.a)(n)>180?n+(n>0?360:-360):n)}else y=t,_=e;T.b.point(t,e),i(t,e)}function u(){T.b.lineStart()}function l(){s(y,_),T.b.lineEnd(),Object(M.a)(C)>M.i&&(d=-(g=180)),w[0]=d,w[1]=g,b=null}function c(t,e){return(e-=t)<0?e+360:e}function h(t,e){return t[0]-e[0]}function f(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var d,p,g,v,m,y,_,b,x,w,S=n(53),T=n(215),O=n(54),M=n(6),k=n(33),C=Object(S.a)(),E={point:r,lineStart:a,lineEnd:o,polygonStart:function(){E.point=s,E.lineStart=u,E.lineEnd=l,C.reset(),T.b.polygonStart()},polygonEnd:function(){T.b.polygonEnd(),E.point=r,E.lineStart=a,E.lineEnd=o,T.a<0?(d=-(g=180),p=-(v=90)):C>M.i?v=90:C<-M.i&&(p=-90),w[0]=d,w[1]=g}};e.a=function(t){var e,n,r,i,a,o,s;if(v=g=-(d=p=1/0),x=[],Object(k.a)(t,E),n=x.length){for(x.sort(h),e=1,a=[r=x[0]];e<n;++e)f(r,(i=x[e])[0])||f(r,i[1])?(c(r[0],i[1])>c(r[0],r[1])&&(r[1]=i[1]),c(i[0],r[1])>c(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,e=0,r=a[n=a.length-1];e<=n;r=i,++e)(s=c(r[1],(i=a[e])[0]))>o&&(o=s,d=i[0],g=r[1])}return x=w=null,d===1/0||p===1/0?[[NaN,NaN],[NaN,NaN]]:[[d,p],[g,v]]}},function(t,e,n){"use strict";function r(t,e){t*=E.r,e*=E.r;var n=Object(E.g)(e);i(n*Object(E.g)(t),n*Object(E.t)(t),Object(E.t)(e))}function i(t,e,n){g+=(t-g)/++d,v+=(e-v)/d,m+=(n-m)/d}function a(){P.point=o}function o(t,e){t*=E.r,e*=E.r;var n=Object(E.g)(e);M=n*Object(E.g)(t),k=n*Object(E.t)(t),C=Object(E.t)(e),P.point=s,i(M,k,C)}function s(t,e){t*=E.r,e*=E.r;var n=Object(E.g)(e),r=n*Object(E.g)(t),a=n*Object(E.t)(t),o=Object(E.t)(e),s=Object(E.e)(Object(E.u)((s=k*o-C*a)*s+(s=C*r-M*o)*s+(s=M*a-k*r)*s),M*r+k*a+C*o);p+=s,y+=s*(M+(M=r)),_+=s*(k+(k=a)),b+=s*(C+(C=o)),i(M,k,C)}function u(){P.point=r}function l(){P.point=h}function c(){f(T,O),P.point=r}function h(t,e){T=t,O=e,t*=E.r,e*=E.r,P.point=f;var n=Object(E.g)(e);M=n*Object(E.g)(t),k=n*Object(E.t)(t),C=Object(E.t)(e),i(M,k,C)}function f(t,e){t*=E.r,e*=E.r;var n=Object(E.g)(e),r=n*Object(E.g)(t),a=n*Object(E.t)(t),o=Object(E.t)(e),s=k*o-C*a,u=C*r-M*o,l=M*a-k*r,c=Object(E.u)(s*s+u*u+l*l),h=M*r+k*a+C*o,f=c&&-Object(E.b)(h)/c,d=Object(E.e)(c,h);x+=f*s,w+=f*u,S+=f*l,p+=d,y+=d*(M+(M=r)),_+=d*(k+(k=a)),b+=d*(C+(C=o)),i(M,k,C)}var d,p,g,v,m,y,_,b,x,w,S,T,O,M,k,C,E=n(6),A=n(32),I=n(33),P={sphere:A.a,point:r,lineStart:a,lineEnd:u,polygonStart:function(){P.lineStart=l,P.lineEnd=c},polygonEnd:function(){P.lineStart=a,P.lineEnd=u}};e.a=function(t){d=p=g=v=m=y=_=b=x=w=S=0,Object(I.a)(t,P);var e=x,n=w,r=S,i=e*e+n*n+r*r;return i<E.j&&(e=y,n=_,r=b,p<E.i&&(e=g,n=v,r=m),(i=e*e+n*n+r*r)<E.j)?[NaN,NaN]:[Object(E.e)(n,e)*E.h,Object(E.c)(r/Object(E.u)(i))*E.h]}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";e.a=function(t,e,n,r,i,a){var o,s=t[0],u=t[1],l=0,c=1,h=e[0]-s,f=e[1]-u;if(o=n-s,h||!(o>0)){if(o/=h,h<0){if(o<l)return;o<c&&(c=o)}else if(h>0){if(o>c)return;o>l&&(l=o)}if(o=i-s,h||!(o<0)){if(o/=h,h<0){if(o>c)return;o>l&&(l=o)}else if(h>0){if(o<l)return;o<c&&(c=o)}if(o=r-u,f||!(o>0)){if(o/=f,f<0){if(o<l)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>l&&(l=o)}if(o=a-u,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>l&&(l=o)}else if(f>0){if(o<l)return;o<c&&(c=o)}return l>0&&(t[0]=s+l*h,t[1]=u+l*f),c<1&&(e[0]=s+c*h,e[1]=u+c*f),!0}}}}}},function(t,e,n){"use strict";var r=n(222),i=[null,null],a={type:"LineString",coordinates:i};e.a=function(t,e){return i[0]=t,i[1]=e,Object(r.a)(a)}},function(t,e,n){"use strict";function r(t,e,n){var r=Object(a.range)(t,e-o.i,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function i(t,e,n){var r=Object(a.range)(t,e-o.i,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}var a=n(16),o=n(6);e.a=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return Object(a.range)(Object(o.f)(l/b)*b,u,b).map(v).concat(Object(a.range)(Object(o.f)(d/x)*x,f,x).map(m)).concat(Object(a.range)(Object(o.f)(s/y)*y,n,y).filter(function(t){return Object(o.a)(t%b)>o.i}).map(p)).concat(Object(a.range)(Object(o.f)(h/_)*_,c,_).filter(function(t){return Object(o.a)(t%x)>o.i}).map(g))}var n,s,u,l,c,h,f,d,p,g,v,m,y=10,_=y,b=90,x=360,w=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[v(l).concat(m(f).slice(1),v(u).reverse().slice(1),m(d).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(d=+e[0][1],f=+e[1][1],(l=+e[0][0])>(u=+e[1][0])&&(e=l,l=u,u=e),d>f&&(e=d,d=f,f=e),t.precision(w)):[[l,d],[u,f]]},t.extentMinor=function(e){return arguments.length?(h=+e[0][1],c=+e[1][1],(s=+e[0][0])>(n=+e[1][0])&&(e=s,s=n,n=e),h>c&&(e=h,h=c,c=e),t.precision(w)):[[s,h],[n,c]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(b=+e[0],x=+e[1],t):[b,x]},t.stepMinor=function(e){return arguments.length?(y=+e[0],_=+e[1],t):[y,_]},t.precision=function(e){return arguments.length?(w=+e,p=r(h,c,90),g=i(s,n,w),v=r(d,f,90),m=i(l,u,w),t):w},t.extentMajor([[-180,-90+o.i],[180,90-o.i]]).extentMinor([[-180,-80-o.i],[180,80+o.i]])}},function(t,e,n){"use strict";var r=n(6);e.a=function(t,e){var n=t[0]*r.r,i=t[1]*r.r,a=e[0]*r.r,o=e[1]*r.r,s=Object(r.g)(i),u=Object(r.t)(i),l=Object(r.g)(o),c=Object(r.t)(o),h=s*Object(r.g)(n),f=s*Object(r.t)(n),d=l*Object(r.g)(a),p=l*Object(r.t)(a),g=2*Object(r.c)(Object(r.u)(Object(r.m)(o-i)+s*l*Object(r.m)(a-n))),v=Object(r.t)(g),m=g?function(t){var e=Object(r.t)(t*=g)/v,n=Object(r.t)(g-t)/v,i=n*h+e*d,a=n*f+e*p,o=n*u+e*c;return[Object(r.e)(a,i)*r.h,Object(r.e)(o,Object(r.u)(i*i+a*a))*r.h]}:function(){return[n*r.h,i*r.h]};return m.distance=g,m}},function(t,e,n){"use strict";var r=n(223),i=n(33),a=n(519),o=n(224),s=n(520),u=n(521),l=n(522);e.a=function(){function t(t){return t&&("function"==typeof f&&h.pointRadius(+f.apply(this,arguments)),Object(i.a)(t,n(h))),h.result()}var e,n,c,h,f=4.5;return t.area=function(t){return Object(i.a)(t,n(a.a)),a.a.result()},t.bounds=function(t){return Object(i.a)(t,n(o.a)),o.a.result()},t.centroid=function(t){return Object(i.a)(t,n(s.a)),s.a.result()},t.projection=function(i){return arguments.length?(n=null==(e=i)?r.a:i.stream,t):e},t.context=function(e){return arguments.length?(h=null==(c=e)?new l.a:new u.a(e),"function"!=typeof f&&h.pointRadius(f),t):c},t.pointRadius=function(e){return arguments.length?(f="function"==typeof e?e:(h.pointRadius(+e),+e),t):f},t.projection(null).context(null)}},function(t,e,n){"use strict";function r(){v.point=i}function i(t,e){v.point=a,s=l=t,u=c=e}function a(t,e){g.add(c*t-l*e),l=t,c=e}function o(){a(s,u)}var s,u,l,c,h=n(53),f=n(6),d=n(32),p=Object(h.a)(),g=Object(h.a)(),v={point:d.a,lineStart:d.a,lineEnd:d.a,polygonStart:function(){v.lineStart=r,v.lineEnd=o},polygonEnd:function(){v.lineStart=v.lineEnd=v.point=d.a,p.add(Object(f.a)(g)),g.reset()},result:function(){var t=p/2;return p.reset(),t}};e.a=v},function(t,e,n){"use strict";function r(t,e){m+=t,y+=e,++_}function i(){M.point=a}function a(t,e){M.point=o,r(p=t,g=e)}function o(t,e){var n=t-p,i=e-g,a=Object(v.u)(n*n+i*i);b+=a*(p+t)/2,x+=a*(g+e)/2,w+=a,r(p=t,g=e)}function s(){M.point=r}function u(){M.point=c}function l(){h(f,d)}function c(t,e){M.point=h,r(f=p=t,d=g=e)}function h(t,e){var n=t-p,i=e-g,a=Object(v.u)(n*n+i*i);b+=a*(p+t)/2,x+=a*(g+e)/2,w+=a,S+=(a=g*t-p*e)*(p+t),T+=a*(g+e),O+=3*a,r(p=t,g=e)}var f,d,p,g,v=n(6),m=0,y=0,_=0,b=0,x=0,w=0,S=0,T=0,O=0,M={point:r,lineStart:i,lineEnd:s,polygonStart:function(){M.lineStart=u,M.lineEnd=l},polygonEnd:function(){M.point=r,M.lineStart=i,M.lineEnd=s},result:function(){var t=O?[S/O,T/O]:w?[b/w,x/w]:_?[m/_,y/_]:[NaN,NaN];return m=y=_=b=x=w=S=T=O=0,t}};e.a=M},function(t,e,n){"use strict";function r(t){this._context=t}e.a=r;var i=n(6),a=n(32);r.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,i.w)}},result:a.a}},function(t,e,n){"use strict";function r(){this._string=[]}function i(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}e.a=r,r.prototype={_circle:i(4.5),pointRadius:function(t){return this._circle=i(t),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}}}},function(t,e,n){"use strict";var r=n(226),i=n(6);e.a=Object(r.a)(function(){return!0},function(t){var e,n=NaN,r=NaN,a=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,s){var u=o>0?i.o:-i.o,l=Object(i.a)(o-n);Object(i.a)(l-i.o)<i.i?(t.point(n,r=(r+s)/2>0?i.l:-i.l),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),e=0):a!==u&&l>=i.o&&(Object(i.a)(n-a)<i.i&&(n-=a*i.i),Object(i.a)(o-u)<i.i&&(o-=u*i.i),r=function(t,e,n,r){var a,o,s=Object(i.t)(t-n);return Object(i.a)(s)>i.i?Object(i.d)((Object(i.t)(e)*(o=Object(i.g)(r))*Object(i.t)(n)-Object(i.t)(r)*(a=Object(i.g)(e))*Object(i.t)(t))/(a*o*s)):(e+r)/2}(n,r,o,s),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(u,r),e=0),t.point(n=o,r=s),a=u},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var a;if(null==t)r.point(-i.o,a=n*i.l),r.point(0,a),r.point(i.o,a),r.point(i.o,0),r.point(i.o,-a),r.point(0,-a),r.point(-i.o,-a),r.point(-i.o,0),r.point(-i.o,a);else if(Object(i.a)(t[0]-e[0])>i.i){var o=t[0]<e[0]?i.o:-i.o;r.point(-o,a=n*o/2),r.point(0,a),r.point(o,a)}else r.point(e[0],e[1])},[-i.o,-i.l])},function(t,e,n){"use strict";var r=n(53),i=n(54),a=n(6),o=Object(r.a)();e.a=function(t,e){var n=e[0],r=e[1],s=[Object(a.t)(n),-Object(a.g)(n),0],u=0,l=0;o.reset();for(var c=0,h=t.length;c<h;++c)if(d=(f=t[c]).length)for(var f,d,p=f[d-1],g=p[0],v=p[1]/2+a.q,m=Object(a.t)(v),y=Object(a.g)(v),_=0;_<d;++_,g=x,m=S,y=T,p=b){var b=f[_],x=b[0],w=b[1]/2+a.q,S=Object(a.t)(w),T=Object(a.g)(w),O=x-g,M=O>=0?1:-1,k=M*O,C=k>a.o,E=m*S;if(o.add(Object(a.e)(E*M*Object(a.t)(k),y*T+E*Object(a.g)(k))),u+=C?O+M*a.w:O,C^g>=n^x>=n){var A=Object(i.c)(Object(i.a)(p),Object(i.a)(b));Object(i.e)(A);var I=Object(i.c)(s,A);Object(i.e)(I);var P=(C^O>=0?-1:1)*Object(a.c)(I[2]);(r>P||r===P&&(A[0]||A[1]))&&(l+=C^O>=0?1:-1)}}return(u<-a.i||u<a.i&&o<-a.i)^1&l}},function(t,e,n){"use strict";var r=n(54),i=n(216),a=n(6),o=n(221),s=n(226);e.a=function(t,e){function n(t,e){return Object(a.g)(t)*Object(a.g)(e)>c}function u(t,e,n){var i=Object(r.a)(t),o=Object(r.a)(e),s=[1,0,0],u=Object(r.c)(i,o),l=Object(r.d)(u,u),h=u[0],f=l-h*h;if(!f)return!n&&t;var d=c*l/f,p=-c*h/f,g=Object(r.c)(s,u),v=Object(r.f)(s,d),m=Object(r.f)(u,p);Object(r.b)(v,m);var y=g,_=Object(r.d)(v,y),b=Object(r.d)(y,y),x=_*_-b*(Object(r.d)(v,v)-1);if(!(x<0)){var w=Object(a.u)(x),S=Object(r.f)(y,(-_-w)/b);if(Object(r.b)(S,v),S=Object(r.g)(S),!n)return S;var T,O=t[0],M=e[0],k=t[1],C=e[1];M<O&&(T=O,O=M,M=T);var E=M-O,A=Object(a.a)(E-a.o)<a.i;if(!A&&C<k&&(T=k,k=C,C=T),A||E<a.i?A?k+C>0^S[1]<(Object(a.a)(S[0]-O)<a.i?k:C):k<=S[1]&&S[1]<=C:E>a.o^(O<=S[0]&&S[0]<=M)){var I=Object(r.f)(y,(-_+w)/b);return Object(r.b)(I,v),[S,Object(r.g)(I)]}}}function l(e,n){var r=h?t:a.o-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var c=Object(a.g)(t),h=c>0,f=Object(a.a)(c)>a.i;return Object(s.a)(n,function(t){var e,r,i,s,c;return{lineStart:function(){s=i=!1,c=1},point:function(d,p){var g,v=[d,p],m=n(d,p),y=h?m?0:l(d,p):m?l(d+(d<0?a.o:-a.o),p):0;if(!e&&(s=i=m)&&t.lineStart(),m!==i&&(g=u(e,v),(Object(o.a)(e,g)||Object(o.a)(v,g))&&(v[0]+=a.i,v[1]+=a.i,m=n(v[0],v[1]))),m!==i)c=0,m?(t.lineStart(),g=u(v,e),t.point(g[0],g[1])):(g=u(e,v),t.point(g[0],g[1]),t.lineEnd()),e=g;else if(f&&e&&h^m){var _;y&r||!(_=u(v,e,!0))||(c=0,h?(t.lineStart(),t.point(_[0][0],_[0][1]),t.point(_[1][0],_[1][1]),t.lineEnd()):(t.point(_[1][0],_[1][1]),t.lineEnd(),t.lineStart(),t.point(_[0][0],_[0][1])))}!m||e&&Object(o.a)(e,v)||t.point(v[0],v[1]),e=v,i=m,r=y},lineEnd:function(){i&&t.lineEnd(),e=null},clean:function(){return c|(s&&i)<<1}}},function(n,r,a,o){Object(i.a)(o,t,e,a,n,r)},h?[0,-t]:[-a.o,t-a.o])}},function(t,e,n){"use strict";var r=n(54),i=n(6),a=n(117),o=16,s=Object(i.g)(30*i.r);e.a=function(t,e){return+e?function(t,e){function n(r,a,o,u,l,c,h,f,d,p,g,v,m,y){var _=h-r,b=f-a,x=_*_+b*b;if(x>4*e&&m--){var w=u+p,S=l+g,T=c+v,O=Object(i.u)(w*w+S*S+T*T),M=Object(i.c)(T/=O),k=Object(i.a)(Object(i.a)(T)-1)<i.i||Object(i.a)(o-d)<i.i?(o+d)/2:Object(i.e)(S,w),C=t(k,M),E=C[0],A=C[1],I=E-r,P=A-a,L=b*I-_*P;(L*L/x>e||Object(i.a)((_*I+b*P)/x-.5)>.3||u*p+l*g+c*v<s)&&(n(r,a,o,u,l,c,E,A,k,w/=O,S/=O,T,m,y),y.point(E,A),n(E,A,k,w,S,T,h,f,d,p,g,v,m,y))}}return function(e){function i(n,r){n=t(n,r),e.point(n[0],n[1])}function a(){_=NaN,T.point=s,e.lineStart()}function s(i,a){var s=Object(r.a)([i,a]),u=t(i,a);n(_,b,y,x,w,S,_=u[0],b=u[1],y=i,x=s[0],w=s[1],S=s[2],o,e),e.point(_,b)}function u(){T.point=i,e.lineEnd()}function l(){a(),T.point=c,T.lineEnd=h}function c(t,e){s(f=t,e),d=_,p=b,g=x,v=w,m=S,T.point=s}function h(){n(_,b,y,x,w,S,d,p,f,g,v,m,o,e),T.lineEnd=u,u()}var f,d,p,g,v,m,y,_,b,x,w,S,T={point:i,lineStart:a,lineEnd:u,polygonStart:function(){e.polygonStart(),T.lineStart=l},polygonEnd:function(){e.polygonEnd(),T.lineStart=a}};return T}}(t,e):function(t){return Object(a.b)({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}},function(t,e,n){"use strict";var r=n(6),i=n(225),a=n(115),o=n(227);e.a=function(){function t(t){var e=t[0],n=t[1];return c=null,s.point(e,n),c||(u.point(e,n),c)||(l.point(e,n),c)}var e,n,s,u,l,c,h=Object(i.a)(),f=Object(a.b)().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=Object(a.b)().rotate([157,0]).center([-3,19.9]).parallels([8,18]),p={point:function(t,e){c=[t,e]}};return t.invert=function(t){var e=h.scale(),n=h.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?f:i>=.166&&i<.234&&r>=-.214&&r<-.115?d:h).invert(t)},t.stream=function(t){return e&&n===t?e:e=function(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}([h.stream(n=t),f.stream(t),d.stream(t)])},t.precision=function(e){return arguments.length?(h.precision(e),f.precision(e),d.precision(e),t):h.precision()},t.scale=function(e){return arguments.length?(h.scale(e),f.scale(.35*e),d.scale(e),t.translate(h.translate())):h.scale()},t.translate=function(e){if(!arguments.length)return h.translate();var n=h.scale(),i=+e[0],a=+e[1];return s=h.translate(e).clipExtent([[i-.455*n,a-.238*n],[i+.455*n,a+.238*n]]).stream(p),u=f.translate([i-.307*n,a+.201*n]).clipExtent([[i-.425*n+r.i,a+.12*n+r.i],[i-.214*n-r.i,a+.234*n-r.i]]).stream(p),l=d.translate([i-.205*n,a+.212*n]).clipExtent([[i-.214*n+r.i,a+.166*n+r.i],[i-.115*n-r.i,a+.234*n-r.i]]).stream(p),t},t.fitExtent=Object(o.a)(t),t.fitSize=Object(o.b)(t),t.scale(1070)}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(6),i=n(55),a=n(22),o=Object(i.b)(function(t){return Object(r.u)(2/(1+t))});o.invert=Object(i.a)(function(t){return 2*Object(r.c)(t/2)}),e.b=function(){return Object(a.a)(o).scale(124.75).clipAngle(179.999)}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(6),i=n(55),a=n(22),o=Object(i.b)(function(t){return(t=Object(r.b)(t))&&t/Object(r.t)(t)});o.invert=Object(i.a)(function(t){return t}),e.b=function(){return Object(a.a)(o).scale(79.4188).clipAngle(179.999)}},function(t,e,n){"use strict";function r(t){return Object(a.v)((a.l+t)/2)}function i(t,e){function n(t,e){u>0?e<-a.l+a.i&&(e=-a.l+a.i):e>a.l-a.i&&(e=a.l-a.i);var n=u/Object(a.p)(r(e),o);return[n*Object(a.t)(o*t),u-n*Object(a.g)(o*t)]}var i=Object(a.g)(t),o=t===e?Object(a.t)(t):Object(a.n)(i/Object(a.g)(e))/Object(a.n)(r(e)/r(t)),u=i*Object(a.p)(r(t),o)/o;return o?(n.invert=function(t,e){var n=u-e,r=Object(a.s)(o)*Object(a.u)(t*t+n*n);return[Object(a.e)(t,n)/o,2*Object(a.d)(Object(a.p)(u/r,1/o))-a.l]},n):s.c}e.a=i;var a=n(6),o=n(116),s=n(118);e.b=function(){return Object(o.a)(i).scale(109.5).parallels([30,30])}},function(t,e,n){"use strict";function r(t,e){function n(t,e){var n=s-e,r=a*t;return[n*Object(i.t)(r),s-n*Object(i.g)(r)]}var r=Object(i.g)(t),a=t===e?Object(i.t)(t):(r-Object(i.g)(e))/(e-t),s=r/a+t;return Object(i.a)(a)<i.i?o.b:(n.invert=function(t,e){var n=s-e;return[Object(i.e)(t,n)/a,s-Object(i.s)(a)*Object(i.u)(t*t+n*n)]},n)}e.a=r;var i=n(6),a=n(116),o=n(228);e.b=function(){return Object(a.a)(r).scale(131.154).center([0,13.9389])}},function(t,e,n){"use strict";function r(t,e){var n=Object(i.g)(e),r=Object(i.g)(t)*n;return[n*Object(i.t)(t)/r,Object(i.t)(e)/r]}e.b=r;var i=n(6),a=n(55),o=n(22);r.invert=Object(a.a)(i.d),e.a=function(){return Object(o.a)(r).scale(144.049).clipAngle(60)}},function(t,e,n){"use strict";function r(t,e){return[Object(i.g)(e)*Object(i.t)(t),Object(i.t)(e)]}e.b=r;var i=n(6),a=n(55),o=n(22);r.invert=Object(a.a)(i.c),e.a=function(){return Object(o.a)(r).scale(249.5).clipAngle(90+i.i)}},function(t,e,n){"use strict";function r(t,e){var n=Object(i.g)(e),r=1+Object(i.g)(t)*n;return[n*Object(i.t)(t)/r,Object(i.t)(e)/r]}e.b=r;var i=n(6),a=n(55),o=n(22);r.invert=Object(a.a)(function(t){return 2*Object(i.d)(t)}),e.a=function(){return Object(o.a)(r).scale(250).clipAngle(142)}},function(t,e,n){"use strict";function r(t,e){return[Object(i.n)(Object(i.v)((i.l+e)/2)),-t]}e.b=r;var i=n(6),a=n(118);r.invert=function(t,e){return[-e,2*Object(i.d)(Object(i.k)(t))-i.l]},e.a=function(){var t=Object(a.b)(r),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}},function(t,e,n){"use strict";function r(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function i(){return new r}var a=Math.PI,o=2*a,s=o-1e-6;r.prototype=i.prototype={constructor:r,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){var o=this._x1,s=this._y1,u=(n=+n)-(t=+t),l=(r=+r)-(e=+e),c=o-t,h=s-e,f=c*c+h*h;if((i=+i)<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>1e-6)if(Math.abs(h*u-l*c)>1e-6&&i){var d=n-o,p=r-s,g=u*u+l*l,v=d*d+p*p,m=Math.sqrt(g),y=Math.sqrt(f),_=i*Math.tan((a-Math.acos((g+f-v)/(2*m*y)))/2),b=_/y,x=_/m;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*c)+","+(e+b*h)),this._+="A"+i+","+i+",0,0,"+ +(h*d>c*p)+","+(this._x1=t+x*u)+","+(this._y1=e+x*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,u){t=+t,e=+e;var l=(n=+n)*Math.cos(r),c=n*Math.sin(r),h=t+l,f=e+c,d=1^u,p=u?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+h+","+f:(Math.abs(this._x1-h)>1e-6||Math.abs(this._y1-f)>1e-6)&&(this._+="L"+h+","+f),n&&(p<0&&(p=p%o+o),p>s?this._+="A"+n+","+n+",0,1,"+d+","+(t-l)+","+(e-c)+"A"+n+","+n+",0,1,"+d+","+(this._x1=h)+","+(this._y1=f):p>1e-6&&(this._+="A"+n+","+n+",0,"+ +(p>=a)+","+d+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},e.a=i},function(t,e,n){var r=n(4),i=n(47);r(i.prototype,{getAllNodes:function(){var t=[];return this.root.each(function(e){t.push(e)}),t},getAllLinks:function(){for(var t=[],e=[this.root],n=void 0;n=e.pop();){var r=n.children;r&&r.forEach(function(r){t.push({source:n,target:r}),e.push(r)})}return t}}),r(i.prototype,{getAllEdges:i.prototype.getAllLinks})},function(t,e,n){var r=n(4),i=n(119),a=n(19);r(n(47).prototype,{partition:function(){return a(this.rows,arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],arguments.length>1&&void 0!==arguments[1]?arguments[1]:[])},group:function(t,e){var n=this.partition(t,e);return i(n)},groups:function(t,e){return this.group(t,e)}})},function(t,e,n){var r=n(50);t.exports=function(t,e){return r(e,function(e){return t[e]})}},function(t,e,n){var r=n(85),i=n(541),a=Object.prototype.hasOwnProperty,o=i(function(t,e,n){a.call(t,n)?t[n].push(e):r(t,n,[e])});t.exports=o},function(t,e,n){var r=n(542),i=n(543),a=n(48),o=n(3);t.exports=function(t,e){return function(n,s){var u=o(n)?r:i,l=e?e():{};return u(n,t,a(s,2),l)}}},function(t,e){t.exports=function(t,e,n,r){for(var i=-1,a=null==t?0:t.length;++i<a;){var o=t[i];e(r,o,n(o),t)}return r}},function(t,e,n){var r=n(120);t.exports=function(t,e,n,i){return r(t,function(t,r,a){e(i,t,n(t),a)}),i}},function(t,e,n){var r=n(212),i=n(11);t.exports=function(t,e){return t&&r(t,e,i)}},function(t,e,n){var r=n(24);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var a=n.length,o=e?a:-1,s=Object(n);(e?o--:++o<a)&&!1!==i(s[o],o,s););return n}}},function(t,e,n){var r=n(3),i=n(13),a=n(9);t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=void 0;return i(e)?n=e:r(e)?n=function(t,n){for(var r=0;r<e.length;r++){var i=e[r];if(t[i]<n[i])return-1;if(t[i]>n[i])return 1}return 0}:a(e)&&(n=function(t,n){return t[e]<n[e]?-1:t[e]>n[e]?1:0}),t.sort(n)}},function(t,e,n){function r(t,e){var n=t.getColumn(e);return o(n)&&o(n[0])&&(n=a(n)),n}var i=n(4),a=n(229),o=n(3),s=n(27),u=n(47),l=n(246);n(125).STATISTICS_METHODS.forEach(function(t){u.prototype[t]=function(e){return s[t](r(this,e))}});var c=s.quantile;i(u.prototype,{average:u.prototype.mean,quantile:function(t,e){return c(r(this,t),e)},quantiles:function(t,e){var n=r(this,t);return e.map(function(t){return c(n,t)})},quantilesByFraction:function(t,e){return this.quantiles(t,l(e))},range:function(t){return[this.min(t),this.max(t)]},extent:function(t){return this.range(t)}})},function(t,e,n){"use strict";t.exports=function(t){var e,n,r=t.length;if(1===r)e=0,n=t[0][1];else{for(var i,a,o,s=0,u=0,l=0,c=0,h=0;h<r;h++)s+=a=(i=t[h])[0],u+=o=i[1],l+=a*a,c+=a*o;n=u/r-(e=(r*c-s*u)/(r*l-s*s))*s/r}return{m:e,b:n}}},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.b+t.m*e}}},function(t,e,n){"use strict";t.exports=function(t,e){if(t.length<2)return 1;for(var n,r=0,i=0;i<t.length;i++)r+=t[i][1];n=r/t.length;for(var a=0,o=0;o<t.length;o++)a+=Math.pow(n-t[o][1],2);for(var s=0,u=0;u<t.length;u++)s+=Math.pow(t[u][1]-e(t[u][0]),2);return 1-s/a}},function(t,e,n){"use strict";var r=n(233),i=n(234);t.exports=function(t){return i(r(t))}},function(t,e,n){"use strict";t.exports=function(t){for(var e,n=new Map,r=0,i=0;i<t.length;i++){var a=n.get(t[i]);void 0===a?a=1:a++,a>r&&(e=t[i],r=a),n.set(t[i],a)}if(0===r)throw new Error("mode requires at last one data point");return e}},function(t,e,n){"use strict";t.exports=function(t){return t[0]}},function(t,e,n){"use strict";t.exports=function(t){return t[t.length-1]}},function(t,e,n){"use strict";t.exports=function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}},function(t,e,n){"use strict";t.exports=function(t){for(var e=1,n=0;n<t.length;n++)e*=t[n];return e}},function(t,e,n){"use strict";function r(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}t.exports=function t(e,n,i,a){for(i=i||0,a=a||e.length-1;a>i;){if(a-i>600){var o=a-i+1,s=n-i+1,u=Math.log(o),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(o-l)/o);s-o/2<0&&(c*=-1),t(e,n,Math.max(i,Math.floor(n-s*l/o+c)),Math.min(a,Math.floor(n+(o-s)*l/o+c)))}var h=e[n],f=i,d=a;for(r(e,i,n),e[a]>h&&r(e,i,a);f<d;){for(r(e,f,d),f++,d--;e[f]<h;)f++;for(;e[d]>h;)d--}e[i]===h?r(e,i,d):r(e,++d,a),d<=n&&(i=d+1),n<=d&&(a=d-1)}}},function(t,e,n){"use strict";var r=n(122);t.exports=function(t){var e=r(t,.75),n=r(t,.25);if("number"==typeof e&&"number"==typeof n)return e-n}},function(t,e,n){"use strict";var r=n(237);t.exports=function(t){for(var e=r(t),n=[],i=0;i<t.length;i++)n.push(Math.abs(t[i]-e));return r(n)}},function(t,e,n){"use strict";t.exports=function(t,e){var n=[];if(e<1)throw new Error("chunk size must be a positive number");if(Math.floor(e)!==e)throw new Error("chunk size must be an integer");for(var r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}},function(t,e,n){"use strict";t.exports=function(t,e,n){if(0===t.length)return[];n=n||Math.random;for(var r=t.length,i=[],a=0;a<e;a++){var o=Math.floor(n()*r);i.push(t[o])}return i}},function(t,e,n){"use strict";var r=n(238);t.exports=function(t,e,n){return r(t,n).slice(0,e)}},function(t,e,n){"use strict";function r(t,e){for(var n=[],r=0;r<t;r++){for(var i=[],a=0;a<e;a++)i.push(0);n.push(i)}return n}function i(t,e,n,r){var i;if(t>0){var a=(n[e]-n[t-1])/(e-t+1);i=r[e]-r[t-1]-(e-t+1)*a*a}else i=r[e]-n[e]*n[e]/(e+1);return i<0?0:i}function a(t,e,n,r,o,s,u){if(!(t>e)){var l=Math.floor((t+e)/2);r[n][l]=r[n-1][l-1],o[n][l]=l;var c=n;t>n&&(c=Math.max(c,o[n][t-1]||0)),c=Math.max(c,o[n-1][l]||0);var h=l-1;e<r.length-1&&(h=Math.min(h,o[n][e+1]||0));for(var f,d,p,g=h;g>=c&&!((f=i(g,l,s,u))+r[n-1][c-1]>=r[n][l]);--g)(d=i(c,l,s,u)+r[n-1][c-1])<r[n][l]&&(r[n][l]=d,o[n][l]=c),c++,(p=f+r[n-1][g-1])<r[n][l]&&(r[n][l]=p,o[n][l]=g);a(t,l-1,n,r,o,s,u),a(l+1,e,n,r,o,s,u)}}var o=n(240),s=n(233);t.exports=function(t,e){if(e>t.length)throw new Error("cannot generate more classes than there are data values");var n=s(t);if(1===o(n))return[n];var u=r(e,n.length),l=r(e,n.length);!function(t,e,n){for(var r,o=e[0].length,s=t[Math.floor(o/2)],u=[],l=[],c=0;c<o;++c)r=t[c]-s,0===c?(u.push(r),l.push(r*r)):(u.push(u[c-1]+r),l.push(l[c-1]+r*r)),e[0][c]=i(0,c,u,l),n[0][c]=0;for(var h=1;h<e.length;++h)a(h<e.length-1?h:o-1,o-1,h,e,n,u,l)}(n,u,l);for(var c=[],h=l[0].length-1,f=l.length-1;f>=0;f--){var d=l[f][h];c[f]=n.slice(d,h+1),f>0&&(h=d-1)}return c}},function(t,e,n){"use strict";var r=n(236),i=n(235);t.exports=function(t,e){if(t.length<2)return t;for(var n=i(t),a=r(t),o=[n],s=(a-n)/e,u=1;u<e;u++)o.push(o[0]+s*u);return o.push(a),o}},function(t,e,n){"use strict";var r=n(241),i=n(242);t.exports=function(t,e){return r(t,e)/i(t)/i(e)}},function(t,e,n){"use strict";var r=n(28);t.exports=function(t){if(t.length<3)throw new Error("sampleSkewness requires at least three data points");for(var e,n=r(t),i=0,a=0,o=0;o<t.length;o++)i+=(e=t[o]-n)*e,a+=e*e*e;var s=Math.sqrt(i/(t.length-1)),u=t.length;return u*a/((u-1)*(u-2)*Math.pow(s,3))}},function(t,e,n){"use strict";var r=n(28);t.exports=function(t){var e=t.length;if(e<4)throw new Error("sampleKurtosis requires at least four data points");for(var n,i=r(t),a=0,o=0,s=0;s<e;s++)a+=(n=t[s]-i)*n,o+=n*n*n*n;return(e-1)/((e-2)*(e-3))*(e*(e+1)*o/(a*a)-3*(e-1))}},function(t,e,n){"use strict";t.exports=function(t){for(var e=new Array(t.length),n=[t.slice()],r=0;r<t.length;r++)e[r]=0;for(r=0;r<t.length;)if(e[r]<r){var i=0;r%2!=0&&(i=e[r]);var a=t[i];t[i]=t[r],t[r]=a,n.push(t.slice()),e[r]++,r=0}else e[r]=0,r++;return n}},function(t,e,n){"use strict";t.exports=function t(e,n){var r,i,a,o,s=[];for(r=0;r<e.length;r++)if(1===n)s.push([e[r]]);else for(a=t(e.slice(r+1,e.length),n-1),i=0;i<a.length;i++)(o=a[i]).unshift(e[r]),s.push(o);return s}},function(t,e,n){"use strict";t.exports=function t(e,n){for(var r=[],i=0;i<e.length;i++)if(1===n)r.push([e[i]]);else for(var a=t(e.slice(i,e.length),n-1),o=0;o<a.length;o++)r.push([e[i]].concat(a[o]));return r}},function(t,e,n){"use strict";t.exports=function(t,e,n){return t+(n-t)/(e+1)}},function(t,e,n){"use strict";var r=n(243);t.exports=function(t,e,n,i,a,o){var s=r(e,n,a,o);return(n*(t+Math.pow(e-s,2))+o*(i+Math.pow(a-s,2)))/(n+o)}},function(t,e,n){"use strict";t.exports=function(t){if(0===t.length)throw new Error("geometricMean requires at least one data point");for(var e=1,n=0;n<t.length;n++){if(t[n]<=0)throw new Error("geometricMean requires only positive numbers as input");e*=t[n]}return Math.pow(e,1/t.length)}},function(t,e,n){"use strict";t.exports=function(t){if(0===t.length)throw new Error("harmonicMean requires at least one data point");for(var e=0,n=0;n<t.length;n++){if(t[n]<=0)throw new Error("harmonicMean requires only positive numbers as input");e+=1/t[n]}return t.length/e}},function(t,e,n){"use strict";var r=n(123);t.exports=function(t){return r(t,.5)}},function(t,e,n){"use strict";t.exports=function(t,e,n){return(t*e-n)/(e-1)}},function(t,e,n){"use strict";t.exports=function(t){if(0===t.length)throw new Error("rootMeanSquare requires at least one data point");for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n],2);return Math.sqrt(e/t.length)}},function(t,e,n){"use strict";var r=n(230),i=n(28);t.exports=function(t,e){return(i(t)-e)/(r(t)/Math.sqrt(t.length))}},function(t,e,n){"use strict";var r=n(28),i=n(124);t.exports=function(t,e,n){var a=t.length,o=e.length;if(!a||!o)return null;n||(n=0);var s=r(t),u=r(e),l=i(t),c=i(e);return"number"==typeof s&&"number"==typeof u&&"number"==typeof l&&"number"==typeof c?(s-u-n)/Math.sqrt(((a-1)*l+(o-1)*c)/(a+o-2)*(1/a+1/o)):void 0}},function(t,e,n){"use strict";function r(){this.totalCount=0,this.data={}}r.prototype.train=function(t,e){for(var n in this.data[e]||(this.data[e]={}),t){var r=t[n];void 0===this.data[e][n]&&(this.data[e][n]={}),void 0===this.data[e][n][r]&&(this.data[e][n][r]=0),this.data[e][n][r]++}this.totalCount++},r.prototype.score=function(t){var e,n={};for(var r in t){var i=t[r];for(e in this.data)n[e]={},n[e][r+"_"+i]=this.data[e][r]?(this.data[e][r][i]||0)/this.totalCount:0}var a={};for(e in n)for(var o in a[e]=0,n[e])a[e]+=n[e][o];return a},t.exports=r},function(t,e,n){"use strict";function r(){this.weights=[],this.bias=0}r.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var e=0,n=0;n<this.weights.length;n++)e+=this.weights[n]*t[n];return(e+=this.bias)>0?1:0},r.prototype.train=function(t,e){if(0!==e&&1!==e)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var n=this.predict(t);if(n!==e){for(var r=e-n,i=0;i<this.weights.length;i++)this.weights[i]+=r*t[i];this.bias+=r}return this},t.exports=r},function(t,e,n){"use strict";t.exports=function(t){if(t<0)throw new Error("factorial requires a non-negative value");if(Math.floor(t)!==t)throw new Error("factorial requires an integer input");for(var e=1,n=2;n<=t;n++)e*=n;return e}},function(t,e,n){"use strict";t.exports=function(t){if(t<0||t>1)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-t,t]}},function(t,e,n){"use strict";var r=n(78);t.exports=function(t,e){if(!(e<0||e>1||t<=0||t%1!=0)){var n=0,i=0,a=[],o=1;do{a[n]=o*Math.pow(e,n)*Math.pow(1-e,t-n),i+=a[n],o=o*(t-++n+1)/n}while(i<1-r);return a}}},function(t,e,n){"use strict";var r=n(78);t.exports=function(t){if(!(t<=0)){var e=0,n=0,i=[],a=1;do{i[e]=Math.exp(-t)*Math.pow(t,e)/a,n+=i[e],a*=++e}while(n<1-r);return i}}},function(t,e,n){"use strict";var r=n(28),i=n(587);t.exports=function(t,e,n){for(var a,o=0,s=e(r(t)),u=[],l=[],c=0;c<t.length;c++)void 0===u[t[c]]&&(u[t[c]]=0),u[t[c]]++;for(c=0;c<u.length;c++)void 0===u[c]&&(u[c]=0);for(a in s)a in u&&(l[+a]=s[a]*t.length);for(a=l.length-1;a>=0;a--)l[a]<3&&(l[a-1]+=l[a],l.pop(),u[a-1]+=u[a],u.pop());for(a=0;a<u.length;a++)o+=Math.pow(u[a]-l[a],2)/l[a];return i[u.length-1-1][n]<o}},function(t,e,n){"use strict";t.exports={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}}},function(t,e,n){"use strict";t.exports=function(t,e,n){return(t-e)/n}},function(t,e,n){"use strict";var r=n(244);t.exports=function(t){var e=Math.abs(t),n=Math.min(Math.round(100*e),r.length-1);return t>=0?r[n]:+(1-r[n]).toFixed(4)}},function(t,e,n){"use strict";t.exports=function(t){var e=1/(1+.5*Math.abs(t)),n=e*Math.exp(-Math.pow(t,2)-1.26551223+1.00002368*e+.37409196*Math.pow(e,2)+.09678418*Math.pow(e,3)-.18628806*Math.pow(e,4)+.27886807*Math.pow(e,5)-1.13520398*Math.pow(e,6)+1.48851587*Math.pow(e,7)-.82215223*Math.pow(e,8)+.17087277*Math.pow(e,9));return t>=0?1-n:n-1}},function(t,e,n){"use strict";var r=n(78),i=n(245);t.exports=function(t){return 0===t?t=r:t>=1&&(t=1-r),Math.sqrt(2)*i(2*t-1)}},function(t,e,n){"use strict";var r=n(593);t.exports=function(t,e,n,i,a){if("function"!=typeof t)throw new TypeError("func must be a function");for(var o=0;o<i;o++){var s=(e+n)/2;if(0===t(s)||Math.abs((n-e)/2)<a)return s;r(t(s))===r(t(e))?e=s:n=s}throw new Error("maximum number of iterations exceeded")}},function(t,e,n){"use strict";t.exports=function(t){if("number"==typeof t)return t<0?-1:0===t?0:1;throw new TypeError("not a number")}},function(t,e,n){var r=n(9),i=n(75);(0,n(2).registerConnector)("default",function(t,e){if(r(t)&&(t=e.getView(t)),!t)throw new TypeError("Invalid dataView");return i(t.rows)})},function(t,e,n){var r=n(208),i=0;t.exports=function(t){var e=++i;return r(t)+e}},function(t,e,n){var r=n(9),i=n(597),a=i.dsvFormat,o=i.csvParse,s=i.tsvParse,u=n(2).registerConnector;u("dsv",function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).delimiter||",";if(!r(e))throw new TypeError("Invalid delimiter: must be a string!");return a(e).parse(t)}),u("csv",function(t){return o(t)}),u("tsv",function(t){return s(t)})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(126);n.d(e,"dsvFormat",function(){return r.a});var i=n(598);n.d(e,"csvParse",function(){return i.c}),n.d(e,"csvParseRows",function(){return i.d}),n.d(e,"csvFormat",function(){return i.a}),n.d(e,"csvFormatRows",function(){return i.b});var a=n(599);n.d(e,"tsvParse",function(){return a.c}),n.d(e,"tsvParseRows",function(){return a.d}),n.d(e,"tsvFormat",function(){return a.a}),n.d(e,"tsvFormatRows",function(){return a.b})},function(t,e,n){"use strict";n.d(e,"c",function(){return a}),n.d(e,"d",function(){return o}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return u});var r=n(126),i=Object(r.a)(","),a=i.parse,o=i.parseRows,s=i.format,u=i.formatRows},function(t,e,n){"use strict";n.d(e,"c",function(){return a}),n.d(e,"d",function(){return o}),n.d(e,"a",function(){return s}),n.d(e,"b",function(){return u});var r=n(126),i=Object(r.a)("\t"),a=i.parse,o=i.parseRows,s=i.format,u=i.formatRows},function(t,e,n){function r(t,e){e.dataType="geo-graticule";var n=i().lines();return n.map(function(t,e){return t.index=""+e,t}),e.rows=n,n}var i=n(0).geoGraticule;(0,n(2).registerConnector)("geo-graticule",r),t.exports=r},function(t,e){t.exports=function(t){var e=[];return t.replace(r,function(t,r,a){var o=r.toLowerCase();for(a=function(t){var e=a.match(i);return e?e.map(Number):[]}(),"m"==o&&a.length>2&&(e.push([r].concat(a.splice(0,2))),o="l",r="m"==r?"l":"L");;){if(a.length==n[o])return a.unshift(r),e.push(a);if(a.length<n[o])throw new Error("malformed path data");e.push([r].concat(a.splice(0,n[o])))}}),e};var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},r=/([astvzqmhlc])([^astvzqmhlc]*)/gi,i=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){t.exports=function(t){var e=0,n=0,r=0,i=0;return t.map(function(t){var a=(t=t.slice())[0],o=a.toUpperCase();if(a!=o)switch(t[0]=o,a){case"a":t[6]+=r,t[7]+=i;break;case"v":t[1]+=i;break;case"h":t[1]+=r;break;default:for(var s=1;s<t.length;)t[s++]+=r,t[s++]+=i}switch(o){case"Z":r=e,i=n;break;case"H":r=t[1];break;case"V":i=t[1];break;case"M":r=e=t[1],i=n=t[2];break;default:r=t[t.length-2],i=t[t.length-1]}return t})}},function(t,e,n){function r(t,e,n){e=i({},l,e),n.dataType=s;var r=e.nodes,o=e.edges;if(r&&!a(r))throw new TypeError("Invalid nodes: must be a function!");if(o&&!a(o))throw new TypeError("Invalid edges: must be a function!");return n.rows=n.graph={nodes:r(t),edges:o(t)},i(n,n.graph),n.rows}var i=n(4),a=n(13),o=n(2),s=o.GRAPH,u=o.registerConnector,l={nodes:function(t){return t.nodes},edges:function(t){return t.edges}};u("graph",r),u("diagram",r)},function(t,e,n){function r(t){return t.cx=t.x,t.cy=t.y,t.x=[],t.y=[],t.vertices.forEach(function(e){t.x.push(e.x+t.cx),t.y.push(e.y+t.cy)}),t}function i(t,e,n){n.dataType=h;var i=e=a({},d,e),s=i.width,c=i.height,f=o(t);n._HexJSON=f;var p=n._GridHexJSON=u(f),g=n.rows=l(f,s,c).map(r);return n._gridRows=l(p,s,c).map(r),g}var a=n(4),o=n(75),s=n(606),u=s.getGridForHexJSON,l=s.renderHexJSON,c=n(2),h=c.HEX,f=c.registerConnector,d={width:1,height:1};f("hex",i),f("hexjson",i),f("hex-json",i),f("HexJSON",i),t.exports=i},function(t,e,n){!function(t,e){"use strict";t.renderHexJSON=function(t,n,r){var i,a=t.layout,o=[];Object.keys(t.hexes).forEach(function(e){t.hexes[e].key=e,o.push(t.hexes[e])});var s=e.max(o,function(t){return+t.q}),u=e.min(o,function(t){return+t.q}),l=e.max(o,function(t){return+t.r}),c=e.min(o,function(t){return+t.r}),h=s-u+1,f=l-c+1,d=(i=e.min("odd-r"===a||"even-r"===a?[n/((h+.5)*Math.sqrt(3)),r/(1.5*(f+1/3))]:[r/((f+.5)*Math.sqrt(3)),n/(1.5*(h+1/3))]))*Math.sqrt(3),p=[],g=function(t){var e="";return p.forEach(function(t){e+=t.x+","+t.y+" "}),e.substring(0,e.length-1)}();return o.forEach(function(t){t.qc=t.q-u,t.rc=l-t.r,t.x=function(t,e,n,r){var i=0;switch(e){case"odd-r":i=t.qc*n+(t.rc%2==1?n:n/2);break;case"even-r":i=t.qc*n+(t.rc%2==0?n:n/2);break;case"odd-q":case"even-q":i=t.qc*r*1.5+r}return i}(t,a,d,i),t.y=function(t,e,n,r){var i=0;switch(e){case"odd-r":case"even-r":i=t.rc*r*1.5+r;break;case"odd-q":i=t.rc*n+(t.qc%2==1?n:n/2);break;case"even-q":i=t.rc*n+(t.qc%2==0?n:n/2)}return i}(t,a,d,i),t.vertices=p,t.points=g}),o},t.getGridForHexJSON=function(t){var n={};n.layout=t.layout,n.hexes={};var r=[];Object.keys(t.hexes).forEach(function(e){r.push(t.hexes[e])});var i,a,o=e.max(r,function(t){return+t.q}),s=e.min(r,function(t){return+t.q}),u=e.max(r,function(t){return+t.r}),l=e.min(r,function(t){return+t.r});for(i=s;i<=o;i++)for(a=l;a<=u;a++)n.hexes["Q"+i+"R"+a]={q:i,r:a};return n},Object.defineProperty(t,"__esModule",{value:!0})}(e,n(16))},function(t,e,n){function r(t,e,n){n.dataType=s;var r=e&&e.children?e.children:null;if(r&&!i(r))throw new TypeError("Invalid children: must be a function!");return n.rows=n.root=e.pureData?t:a(t,r),t}var i=n(13),a=n(40).hierarchy,o=n(2),s=o.HIERARCHY,u=o.registerConnector;u("hierarchy",r),u("tree",r)},function(t,e,n){"use strict";function r(t,e){return t.parent===e.parent?1:2}function i(t,e){return t+e.x}function a(t,e){return Math.max(t,e.y)}e.a=function(){function t(t){var r,u=0;t.eachAfter(function(t){var n=t.children;n?(t.x=function(t){return t.reduce(i,0)/t.length}(n),t.y=1+n.reduce(a,0)):(t.x=r?u+=e(t,r):0,t.y=0,r=t)});var l=function(t){for(var e;e=t.children;)t=e[0];return t}(t),c=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(t),h=l.x-e(l,c)/2,f=c.x+e(c,l)/2;return t.eachAfter(s?function(e){e.x=(e.x-t.x)*n,e.y=(t.y-e.y)*o}:function(e){e.x=(e.x-h)/(f-h)*n,e.y=(1-(t.y?e.y/t.y:1))*o})}var e=r,n=1,o=1,s=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(e){return arguments.length?(s=!1,n=+e[0],o=+e[1],t):s?null:[n,o]},t.nodeSize=function(e){return arguments.length?(s=!0,n=+e[0],o=+e[1],t):s?[n,o]:null},t}},function(t,e,n){"use strict";function r(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}e.a=function(){return this.eachAfter(r)}},function(t,e,n){"use strict";e.a=function(t){var e,n,r,i,a=this,o=[a];do{for(e=o.reverse(),o=[];a=e.pop();)if(t(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length);return this}},function(t,e,n){"use strict";e.a=function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this}},function(t,e,n){"use strict";e.a=function(t){for(var e,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)a.push(e[n]);for(;i=o.pop();)t(i);return this}},function(t,e,n){"use strict";e.a=function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}},function(t,e,n){"use strict";e.a=function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}},function(t,e,n){"use strict";e.a=function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)r.push(e=e.parent);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}},function(t,e,n){"use strict";e.a=function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}},function(t,e,n){"use strict";e.a=function(){var t=[];return this.each(function(e){t.push(e)}),t}},function(t,e,n){"use strict";e.a=function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}},function(t,e,n){"use strict";e.a=function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}},function(t,e,n){"use strict";function r(t){return Math.sqrt(t.value)}function i(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function a(t,e){return function(n){if(r=n.children){var r,i,a,o=r.length,u=t(n)*e||0;if(u)for(i=0;i<o;++i)r[i].r+=u;if(a=Object(s.b)(r),u)for(i=0;i<o;++i)r[i].r-=u;n.r=a+u}}}function o(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}var s=n(250),u=n(128),l=n(252);e.a=function(){function t(t){return t.x=n/2,t.y=s/2,e?t.eachBefore(i(e)).eachAfter(a(c,.5)).eachBefore(o(1)):t.eachBefore(i(r)).eachAfter(a(l.a,1)).eachAfter(a(c,t.r/Math.min(n,s))).eachBefore(o(Math.min(n,s)/(2*t.r))),t}var e=null,n=1,s=1,c=l.a;return t.radius=function(n){return arguments.length?(e=Object(u.a)(n),t):e},t.size=function(e){return arguments.length?(n=+e[0],s=+e[1],t):[n,s]},t.padding=function(e){return arguments.length?(c="function"==typeof e?e:Object(l.b)(+e),t):c},t}},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),e.a=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t};var r=Array.prototype.slice},function(t,e,n){"use strict";var r=n(253),i=n(56);e.a=function(){function t(t){var s=t.height+1;return t.x0=t.y0=a,t.x1=e,t.y1=n/s,t.eachBefore(function(t,e){return function(n){n.children&&Object(i.a)(n,n.x0,t*(n.depth+1)/e,n.x1,t*(n.depth+2)/e);var r=n.x0,o=n.y0,s=n.x1-a,u=n.y1-a;s<r&&(r=s=(r+s)/2),u<o&&(o=u=(o+u)/2),n.x0=r,n.y0=o,n.x1=s,n.y1=u}}(n,s)),o&&t.eachBefore(r.a),t}var e=1,n=1,a=0,o=!1;return t.round=function(e){return arguments.length?(o=!!e,t):o},t.size=function(r){return arguments.length?(e=+r[0],n=+r[1],t):[e,n]},t.padding=function(e){return arguments.length?(a=+e,t):a},t}},function(t,e,n){"use strict";function r(t){return t.id}function i(t){return t.parentId}var a=n(128),o=n(127),s="$",u={depth:-1},l={};e.a=function(){function t(t){var r,i,a,c,h,f,d,p=t.length,g=new Array(p),v={};for(i=0;i<p;++i)h=g[i]=new o.a(r=t[i]),null!=(f=e(r,i,t))&&(f+="")&&(v[d=s+(h.id=f)]=d in v?l:h);for(i=0;i<p;++i)if(h=g[i],null!=(f=n(t[i],i,t))&&(f+="")){if(!(c=v[s+f]))throw new Error("missing: "+f);if(c===l)throw new Error("ambiguous: "+f);c.children?c.children.push(h):c.children=[h],h.parent=c}else{if(a)throw new Error("multiple roots");a=h}if(!a)throw new Error("no root");if(a.parent=u,a.eachBefore(function(t){t.depth=t.parent.depth+1,--p}).eachBefore(o.b),a.parent=null,p>0)throw new Error("cycle");return a}var e=r,n=i;return t.id=function(n){return arguments.length?(e=Object(a.b)(n),t):e},t.parentId=function(e){return arguments.length?(n=Object(a.b)(e),t):n},t}},function(t,e,n){"use strict";function r(t,e){return t.parent===e.parent?1:2}function i(t){var e=t.children;return e?e[0]:t.t}function a(t){var e=t.children;return e?e[e.length-1]:t.t}function o(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function s(t,e,n){return t.a.parent===e.parent?t.a:n}function u(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}var l=n(127);u.prototype=Object.create(l.a.prototype),e.a=function(){function t(t){var r=function(t){for(var e,n,r,i,a,o=new u(t,0),s=[o];e=s.pop();)if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=e.children[i]=new u(r[i],i)),n.parent=e;return(o.parent=new u(null,0)).children=[o],o}(t);if(r.eachAfter(e),r.parent.m=-r.z,r.eachBefore(n),d)t.eachBefore(l);else{var i=t,a=t,o=t;t.eachBefore(function(t){t.x<i.x&&(i=t),t.x>a.x&&(a=t),t.depth>o.depth&&(o=t)});var s=i===a?1:c(i,a)/2,p=s-i.x,g=h/(a.x+s+p),v=f/(o.depth||1);t.eachBefore(function(t){t.x=(t.x+p)*g,t.y=t.depth*v})}return t}function e(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e){!function(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(t);var u=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+c(t._,r._),t.m=t.z-u):t.z=u}else r&&(t.z=r.z+c(t._,r._));t.parent.A=function(t,e,n){if(e){for(var r,u=t,l=t,h=e,f=u.parent.children[0],d=u.m,p=l.m,g=h.m,v=f.m;h=a(h),u=i(u),h&&u;)f=i(f),(l=a(l)).a=t,(r=h.z+g-u.z-d+c(h._,u._))>0&&(o(s(h,t,n),t,r),d+=r,p+=r),g+=h.m,d+=u.m,v+=f.m,p+=l.m;h&&!a(l)&&(l.t=h,l.m+=g-p),u&&!i(f)&&(f.t=u,f.m+=d-v,n=t)}return n}(t,r,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function l(t){t.x*=h,t.y=t.depth*f}var c=r,h=1,f=1,d=null;return t.separation=function(e){return arguments.length?(c=e,t):c},t.size=function(e){return arguments.length?(d=!1,h=+e[0],f=+e[1],t):d?null:[h,f]},t.nodeSize=function(e){return arguments.length?(d=!0,h=+e[0],f=+e[1],t):d?[h,f]:null},t}},function(t,e,n){"use strict";var r=n(253),i=n(129),a=n(128),o=n(252);e.a=function(){function t(t){return t.x0=t.y0=0,t.x1=u,t.y1=l,t.eachBefore(e),c=[0],s&&t.eachBefore(r.a),t}function e(t){var e=c[t.depth],r=t.x0+e,i=t.y0+e,a=t.x1-e,o=t.y1-e;a<r&&(r=a=(r+a)/2),o<i&&(i=o=(i+o)/2),t.x0=r,t.y0=i,t.x1=a,t.y1=o,t.children&&(e=c[t.depth+1]=h(t)/2,r+=g(t)-e,i+=f(t)-e,a-=d(t)-e,o-=p(t)-e,a<r&&(r=a=(r+a)/2),o<i&&(i=o=(i+o)/2),n(t,r,i,a,o))}var n=i.a,s=!1,u=1,l=1,c=[0],h=o.a,f=o.a,d=o.a,p=o.a,g=o.a;return t.round=function(e){return arguments.length?(s=!!e,t):s},t.size=function(e){return arguments.length?(u=+e[0],l=+e[1],t):[u,l]},t.tile=function(e){return arguments.length?(n=Object(a.b)(e),t):n},t.padding=function(e){return arguments.length?t.paddingInner(e).paddingOuter(e):t.paddingInner()},t.paddingInner=function(e){return arguments.length?(h="function"==typeof e?e:Object(o.b)(+e),t):h},t.paddingOuter=function(e){return arguments.length?t.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):t.paddingTop()},t.paddingTop=function(e){return arguments.length?(f="function"==typeof e?e:Object(o.b)(+e),t):f},t.paddingRight=function(e){return arguments.length?(d="function"==typeof e?e:Object(o.b)(+e),t):d},t.paddingBottom=function(e){return arguments.length?(p="function"==typeof e?e:Object(o.b)(+e),t):p},t.paddingLeft=function(e){return arguments.length?(g="function"==typeof e?e:Object(o.b)(+e),t):g},t}},function(t,e,n){"use strict";e.a=function(t,e,n,r,i){var a,o,s=t.children,u=s.length,l=new Array(u+1);for(l[0]=o=a=0;a<u;++a)l[a+1]=o+=s[a].value;!function t(e,n,r,i,a,o,u){if(e>=n-1){var c=s[e];return c.x0=i,c.y0=a,c.x1=o,void(c.y1=u)}for(var h=l[e],f=r/2+h,d=e+1,p=n-1;d<p;){var g=d+p>>>1;l[g]<f?d=g+1:p=g}f-l[d-1]<l[d]-f&&e+1<d&&--d;var v=l[d]-h,m=r-v;if(o-i>u-a){var y=(i*m+o*v)/r;t(e,d,v,i,a,y,u),t(d,n,m,y,a,o,u)}else{var _=(a*m+u*v)/r;t(e,d,v,i,a,o,_),t(d,n,m,i,_,o,u)}}(0,u,t.value,e,n,r,i)}},function(t,e,n){"use strict";var r=n(56),i=n(79);e.a=function(t,e,n,a,o){(1&t.depth?i.a:r.a)(t,e,n,a,o)}},function(t,e,n){"use strict";var r=n(56),i=n(79),a=n(129);e.a=function t(e){function n(t,n,o,s,u){if((l=t._squarify)&&l.ratio===e)for(var l,c,h,f,d,p=-1,g=l.length,v=t.value;++p<g;){for(h=(c=l[p]).children,f=c.value=0,d=h.length;f<d;++f)c.value+=h[f].value;c.dice?Object(r.a)(c,n,o,s,o+=(u-o)*c.value/v):Object(i.a)(c,n,o,n+=(s-n)*c.value/v,u),v-=c.value}else t._squarify=l=Object(a.c)(e,t,n,o,s,u),l.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(a.b)},function(t,e,n){function r(t,e,n){var r=e.object;if(!i(r))throw new TypeError("Invalid object: must be a string!");var s=a(t,t.objects[r]);return o(s,e,n)}var i=n(9),a=n(630).feature,o=n(248),s=n(2).registerConnector;s("topojson",r),s("TopoJSON",r)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(254);n.d(e,"bbox",function(){return r.a});var i=n(131);n.d(e,"feature",function(){return i.a});var a=n(632);n.d(e,"mesh",function(){return a.a}),n.d(e,"meshArcs",function(){return a.b});var o=n(633);n.d(e,"merge",function(){return o.a}),n.d(e,"mergeArcs",function(){return o.b});var s=n(634);n.d(e,"neighbors",function(){return s.a});var u=n(636);n.d(e,"quantize",function(){return u.a});var l=n(130);n.d(e,"transform",function(){return l.a});var c=n(257);n.d(e,"untransform",function(){return c.a})},function(t,e,n){"use strict";e.a=function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}},function(t,e,n){"use strict";function r(t,e,n){var r,i,o;if(arguments.length>1)r=function(t,e,n){function r(t){var e=t<0?~t:t;(u[e]||(u[e]=[])).push({i:t,g:o})}function i(t){t.forEach(r)}function a(t){t.forEach(i)}var o,s=[],u=[];return function t(e){switch(o=e,e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":i(e.arcs);break;case"MultiLineString":case"Polygon":a(e.arcs);break;case"MultiPolygon":!function(t){t.forEach(a)}(e.arcs)}}(e),u.forEach(null==n?function(t){s.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&s.push(t[0].i)}),s}(0,e,n);else for(i=0,r=new Array(o=t.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:Object(a.a)(t,r)}}e.b=r;var i=n(131),a=n(256);e.a=function(t){return Object(i.b)(t,r.apply(this,arguments))}},function(t,e,n){"use strict";function r(t,e){function n(t){t.forEach(function(e){e.forEach(function(e){(o[e=e<0?~e:e]||(o[e]=[])).push(t)})}),s.push(t)}function r(e){return function(t){for(var e,n=-1,r=t.length,i=t[r-1],a=0;++n<r;)a+=(e=i)[0]*(i=t[n])[1]-e[1]*i[0];return Math.abs(a)}(Object(i.b)(t,{type:"Polygon",arcs:[e]}).coordinates[0])}var o={},s=[],u=[];return e.forEach(function t(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"Polygon":n(e.arcs);break;case"MultiPolygon":e.arcs.forEach(n)}}),s.forEach(function(t){if(!t._){var e=[],n=[t];for(t._=1,u.push(e);t=n.pop();)e.push(t),t.forEach(function(t){t.forEach(function(t){o[t<0?~t:t].forEach(function(t){t._||(t._=1,n.push(t))})})})}}),s.forEach(function(t){delete t._}),{type:"MultiPolygon",arcs:u.map(function(e){var n,i=[];if(e.forEach(function(t){t.forEach(function(t){t.forEach(function(t){o[t<0?~t:t].length<2&&i.push(t)})})}),(n=(i=Object(a.a)(t,i)).length)>1)for(var s,u,l=1,c=r(i[0]);l<n;++l)(s=r(i[l]))>c&&(u=i[0],i[0]=i[l],i[l]=u,c=s);return i})}}e.b=r;var i=n(131),a=n(256);e.a=function(t){return Object(i.b)(t,r.apply(this,arguments))}},function(t,e,n){"use strict";var r=n(635);e.a=function(t){function e(t,e){t.forEach(function(t){t<0&&(t=~t);var n=i[t];n?n.push(e):i[t]=[e]})}function n(t,n){t.forEach(function(t){e(t,n)})}var i={},a=t.map(function(){return[]}),o={LineString:e,MultiLineString:n,Polygon:n,MultiPolygon:function(t,e){t.forEach(function(t){n(t,e)})}};for(var s in t.forEach(function t(e,n){"GeometryCollection"===e.type?e.geometries.forEach(function(e){t(e,n)}):e.type in o&&o[e.type](e.arcs,n)}),i)for(var u=i[s],l=u.length,c=0;c<l;++c)for(var h=c+1;h<l;++h){var f,d=u[c],p=u[h];(f=a[d])[s=Object(r.a)(f,p)]!==p&&f.splice(s,0,p),(f=a[p])[s=Object(r.a)(f,d)]!==d&&f.splice(s,0,d)}return a}},function(t,e,n){"use strict";e.a=function(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;t[i]<e?n=i+1:r=i}return n}},function(t,e,n){"use strict";var r=n(254),i=n(257);e.a=function(t,e){function n(t){return d(t)}function a(t){var e;switch(t.type){case"GeometryCollection":e={type:"GeometryCollection",geometries:t.geometries.map(a)};break;case"Point":e={type:"Point",coordinates:n(t.coordinates)};break;case"MultiPoint":e={type:"MultiPoint",coordinates:t.coordinates.map(n)};break;default:return t}return null!=t.id&&(e.id=t.id),null!=t.bbox&&(e.bbox=t.bbox),null!=t.properties&&(e.properties=t.properties),e}if(t.transform)throw new Error("already quantized");if(e&&e.scale)h=t.bbox;else{if(!((o=Math.floor(e))>=2))throw new Error("n must be \u22652");var o,s=(h=t.bbox||Object(r.a)(t))[0],u=h[1],l=h[2],c=h[3];e={scale:[l-s?(l-s)/(o-1):1,c-u?(c-u)/(o-1):1],translate:[s,u]}}var h,f,d=Object(i.a)(e),p=t.objects,g={};for(f in p)g[f]=a(p[f]);return{type:"Topology",bbox:h,transform:e,objects:g,arcs:t.arcs.map(function(t){var e,n=0,r=1,i=t.length,a=new Array(i);for(a[0]=d(t[0],0);++n<i;)((e=d(t[n],n))[0]||e[1])&&(a[r++]=e);return 1===r&&(a[r++]=[0,0]),a.length=r,a})}}},function(t,e,n){(0,n(2).registerTransform)("default",function(t){return t})},function(t,e,n){(0,n(2).registerTransform)("filter",function(t){t.rows=t.rows.filter((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).callback||function(t){return!!t})})},function(t,e,n){var r=n(4),i=n(640),a=n(52),o=n(2).registerTransform,s=n(7).getFields,u={fields:[],key:"key",retains:[],value:"value"};o("fold",function(t,e){var n=t.getColumnNames();e=r({},u,e);var o=s(e);0===o.length&&(console.warn("warning: option fields is not specified, will fold all columns."),o=n);var l=e.key,c=e.value,h=e.retains;0===h.length&&(h=i(n,o));var f=[];t.rows.forEach(function(t){o.forEach(function(e){var n=a(t,h);n[l]=e,n[c]=t[e],f.push(n)})}),t.rows=f})},function(t,e,n){var r=n(641),i=n(77),a=n(86),o=n(645),s=a(function(t,e){return o(t)?r(t,i(e,1,o,!0)):[]});t.exports=s},function(t,e,n){var r=n(110),i=n(258),a=n(259),o=n(50),s=n(90),u=n(111);t.exports=function(t,e,n,l){var c=-1,h=i,f=!0,d=t.length,p=[],g=e.length;if(!d)return p;n&&(e=o(e,s(n))),l?(h=a,f=!1):e.length>=200&&(h=u,f=!1,e=new r(e));t:for(;++c<d;){var v=t[c],m=null==n?v:n(v);if(v=l||0!==v?v:0,f&&m==m){for(var y=g;y--;)if(e[y]===m)continue t;p.push(v)}else h(e,m,l)||p.push(v)}return p}},function(t,e,n){var r=n(211),i=n(643),a=n(644);t.exports=function(t,e,n){return e==e?a(t,e,n):r(t,i,n)}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}},function(t,e,n){var r=n(24),i=n(20);t.exports=function(t){return i(t)&&r(t)}},function(t,e,n){(0,n(2).registerTransform)("map",function(t){t.rows=t.rows.map((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).callback||function(t){return t})})},function(t,e,n){function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=i({},u,e),t.rows=a(o(t.rows,e.groupBy,e.orderBy))}var i=n(4),a=n(119),o=n(19),s=n(2).registerTransform,u={groupBy:[],orderBy:[]};s("partition",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=i({},u,e),t.rows=o(t.rows,e.groupBy,e.orderBy)}),s("group",r),s("groups",r)},function(t,e,n){var r=n(4),i=n(12),a=n(3),o=n(9),s=n(27).sum,u=n(19),l=n(2).registerTransform,c=n(7).getField,h={groupBy:[],as:"_percent"};l("percent",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=r({},h,e);var n=c(e),l=e.dimension,f=e.groupBy,d=e.as;if(!o(l))throw new TypeError("Invalid dimension: must be a string!");if(a(d)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),d=d[0]),!o(d))throw new TypeError("Invalid as: must be a string!");var p=[],g=u(t.rows,f);i(g,function(t){var e=s(t.map(function(t){return t[n]}));0===e&&console.warn("Invalid data: total sum of field "+n+" is 0!");var r=u(t,[l]);i(r,function(t){var r=s(t.map(function(t){return t[n]})),i=t[0],a=i[l];i[n]=r,i[l]=a,i[d]=0===e?0:r/e,p.push(i)})}),t.rows=p})},function(t,e,n){var r=n(52),i=n(2).registerTransform,a=n(7).getFields;i("pick",function(t){var e=a(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t.getColumnNames());t.rows=t.rows.map(function(t){return r(t,e)})})},function(t,e,n){var r=n(4),i=n(12),a=n(3),o=n(9),s=n(19),u=n(2).registerTransform,l=n(7).getField,c={groupBy:[],as:"_proportion"};u("proportion",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=r({},c,e);var n=l(e),u=e.dimension,h=e.groupBy,f=e.as;if(!o(u))throw new TypeError("Invalid dimension: must be a string!");if(a(f)&&(console.warn("Invalid as: must be a string, will use the first element of the array specified."),f=f[0]),!o(f))throw new TypeError("Invalid as: must be a string!");var d=[],p=s(t.rows,h);i(p,function(t){var e=t.length,r=s(t,[u]);i(r,function(t){var r=t.length,i=t[0],a=i[u];i[n]=r,i[u]=a,i[f]=r/e,d.push(i)})}),t.rows=d})},function(t,e,n){function r(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).map||{},n={};a(e)&&i(e,function(t,e){o(t)&&o(e)&&(n[e]=t)}),t.rows.forEach(function(t){i(e,function(e,n){var r=t[n];delete t[n],t[e]=r})})}var i=n(12),a=n(652),o=n(9),s=n(2).registerTransform;s("rename",r),s("rename-fields",r)},function(t,e,n){var r=n(23),i=n(108),a=n(20),o=Function.prototype,s=Object.prototype,u=o.toString,l=s.hasOwnProperty,c=u.call(Object);t.exports=function(t){if(!a(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==c}},function(t,e,n){var r=n(260);(0,n(2).registerTransform)("reverse",function(t){t.rows=r(t.rows)})},function(t,e,n){(0,n(2).registerTransform)("sort",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getColumnName(0);t.rows.sort(e.callback||function(t,e){return t[n]-e[n]})})},function(t,e,n){function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=u(e,[t.getColumnName(0)]);if(!i(n))throw new TypeError("Invalid fields: must be an array with strings!");t.rows=o(t.rows,n);var r=e.order;if(r&&-1===l.indexOf(r))throw new TypeError("Invalid order: "+r+" must be one of "+l.join(", "));"DESC"===r&&(t.rows=a(t.rows))}var i=n(3),a=n(260),o=n(656),s=n(2).registerTransform,u=n(7).getFields,l=["ASC","DESC"];s("sort-by",r),s("sortBy",r)},function(t,e,n){var r=n(77),i=n(657),a=n(86),o=n(150),s=a(function(t,e){if(null==t)return[];var n=e.length;return n>1&&o(t,e[0],e[1])?e=[]:n>2&&o(e[0],e[1],e[2])&&(e=[e[0]]),i(t,r(e,1),[])});t.exports=s},function(t,e,n){var r=n(50),i=n(48),a=n(261),o=n(658),s=n(90),u=n(659),l=n(42);t.exports=function(t,e,n){var c=-1;e=r(e.length?e:[l],s(i));var h=a(t,function(t,n,i){return{criteria:r(e,function(e){return e(t)}),index:++c,value:t}});return o(h,function(t,e){return u(t,e,n)})}},function(t,e){t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},function(t,e,n){var r=n(660);t.exports=function(t,e,n){for(var i=-1,a=t.criteria,o=e.criteria,s=a.length,u=n.length;++i<s;){var l=r(a[i],o[i]);if(l)return i>=u?l:l*("desc"==n[i]?-1:1)}return t.index-e.index}},function(t,e,n){var r=n(49);t.exports=function(t,e){if(t!==e){var n=void 0!==t,i=null===t,a=t==t,o=r(t),s=void 0!==e,u=null===e,l=e==e,c=r(e);if(!u&&!c&&!o&&t>e||o&&s&&l&&!u&&!c||i&&s&&l||!n&&l||!a)return 1;if(!i&&!o&&!c&&t<e||c&&n&&a&&!i&&!o||u&&n&&a||!s&&a||!l)return-1}return 0}},function(t,e,n){var r=n(2).registerTransform,i=n(7).getFields;r("subset",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.startRowIndex||0,r=e.endRowIndex||t.rows.length-1,a=i(e,t.getColumnNames());t.rows=t.getSubset(n,r,a)})},function(t,e,n){function r(t,e){var n=t.map(function(t){return t});return e.forEach(function(t){var e=n.indexOf(t);e>-1&&n.splice(e,1)}),n}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=a({},l,e);var n=t.rows,i=e.groupBy,u=e.orderBy,c=s(n,i,u),h=0,f=[];o(c,function(t){t.length>h&&(h=t.length,f=t)});var d=[],p={};if(f.forEach(function(t){var e=u.map(function(e){return t[e]}).join("-");d.push(e),p[e]=t}),"order"===e.fillBy){var g=f[0],v=[],m={};n.forEach(function(t){var e=u.map(function(e){return t[e]}).join("-");-1===v.indexOf(e)&&(v.push(e),m[e]=t)}),r(v,d).forEach(function(t){var e={};i.forEach(function(t){e[t]=g[t]}),u.forEach(function(n){e[n]=m[t][n]}),n.push(e),f.push(e),d.push(t),p[t]=e}),h=f.length}o(c,function(t){if(t!==f&&t.length<h){var e=t[0],a=[];t.forEach(function(t){a.push(u.map(function(e){return t[e]}).join("-"))}),r(d,a).some(function(r,a){if(a>=h-t.length)return!0;var o=p[r],s={};return i.forEach(function(t){s[t]=e[t]}),u.forEach(function(t){s[t]=o[t]}),n.push(s),!1})}})}var a=n(4),o=n(12),s=n(19),u=n(2).registerTransform,l={fillBy:"group",groupBy:[],orderBy:[]};u("fill-rows",i),u("fillRows",i)},function(t,e,n){function r(t){return t.filter(function(t){return!u(t)})}var i=n(4),a=n(12),o=n(664),s=n(13),u=n(666),l=n(9),c=n(27),h=n(19),f=n(2).registerTransform,d=n(7).getField,p={groupBy:[]},g=["mean","median","max","min"],v={};g.forEach(function(t){v[t]=function(e,n){return c[t](n)}}),v.value=function(t,e,n){return n},f("impute",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.rows;e=i({},p,e);var c=d(e),f=e.method,m=e.groupBy;if(!f)throw new TypeError("Invalid method!");if("value"===f&&!o(e,"value"))throw new TypeError("Invalid value: it is nil.");var y=r(t.getColumn(c)),_=h(n,m);a(_,function(t){var n=r(t.map(function(t){return t[c]}));0===n.length&&(n=y),t.forEach(function(r){if(u(r[c]))if(s(f))r[c]=f(r,n,e.value,t);else{if(!l(f))throw new TypeError("Invalid method: must be a function or one of "+g.join(", "));r[c]=v[f](r,n,e.value)}})})})},function(t,e,n){var r=n(665),i=n(210);t.exports=function(t,e){return null!=t&&i(t,e,r)}},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t,e){return null!=t&&n.call(t,e)}},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,n){function r(t,e){e=i({},v,e);var n=t.rows,r=e.groupBy,a=g(e);if(!s(a))throw new TypeError("Invalid fields: it must be an array with one or more strings!");var l=e.as||[];u(l)&&(l=[l]);var c=e.operations;u(c)&&(c=[c]);var h=[m];if(s(c)&&c.length||(console.warn('operations is not defined, will use [ "count" ] directly.'),l=c=h),1!==c.length||c[0]!==m){if(c.length!==a.length)throw new TypeError("Invalid operations: it's length must be the same as fields!");if(l.length!==a.length)throw new TypeError("Invalid as: it's length must be the same as fields!")}var d=f(n,r),p=[];o(d,function(t){var e=t[0];c.forEach(function(n,r){e[l[r]]=y[n](t,a[r])}),p.push(e)}),t.rows=p}var i=n(4),a=n(229),o=n(12),s=n(3),u=n(9),l=n(11),c=n(668),h=n(27),f=n(19),d=n(2).registerTransform,p=n(125).STATISTICS_METHODS,g=n(7).getFields,v={as:[],fields:[],groupBy:[],operations:[]},m="count",y={count:function(t){return t.length},distinct:function(t,e){return c(t.map(function(t){return t[e]})).length}};p.forEach(function(t){y[t]=function(e,n){var r=e.map(function(t){return t[n]});return s(r)&&s(r[0])&&(r=a(r)),h[t](r)}}),y.average=y.mean,d("aggregate",r),d("summary",r),t.exports={VALID_AGGREGATES:l(y)}},function(t,e,n){var r=n(669);t.exports=function(t){return t&&t.length?r(t):[]}},function(t,e,n){var r=n(110),i=n(258),a=n(259),o=n(111),s=n(670),u=n(74);t.exports=function(t,e,n){var l=-1,c=i,h=t.length,f=!0,d=[],p=d;if(n)f=!1,c=a;else if(h>=200){var g=e?null:s(t);if(g)return u(g);f=!1,c=o,p=new r}else p=e?[]:d;t:for(;++l<h;){var v=t[l],m=e?e(v):v;if(v=n||0!==v?v:0,f&&m==m){for(var y=p.length;y--;)if(p[y]===m)continue t;e&&p.push(m),d.push(v)}else c(p,m,n)||(p!==d&&p.push(m),d.push(v))}return d}},function(t,e,n){var r=n(198),i=n(671),a=n(74),o=r&&1/a(new r([,-0]))[1]==1/0?function(t){return new r(t)}:i;t.exports=o},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(4),i=n(3),a=n(132),o=n(673),s=n(133),u=n(2).registerTransform,l=n(7).getFields,c=n(134).silverman,h={as:["x","y"],method:"linear",order:2,precision:2},f=["linear","exponential","logarithmic","power","polynomial"];u("regression",function(t,e){e=r({},h,e);var n=l(e);if(!i(n)||2!==n.length)throw new TypeError("invalid fields: must be an array of 2 strings.");var u=n[0],d=n[1],p=e.method;if(-1===f.indexOf(p))throw new TypeError("invalid method: "+p+". Must be one of "+f.join(", "));var g=t.rows.map(function(t){return[t[u],t[d]]}),v=o[p](g,e),m=e.extent;i(m)&&2===m.length||(m=t.range(u));var y=e.bandwidth;(!a(y)||y<=0)&&(y=c(t.getColumn(u)));var _=s(m,y),b=[],x=e.as,w=x[0],S=x[1];_.forEach(function(t){var e={},n=v.predict(t),r=n[1];e[w]=n[0],e[S]=r,isFinite(r)&&b.push(e)}),t.rows=b}),t.exports={REGRESSION_METHODS:f}},function(t,e,n){var r,i;void 0!==(i="function"==typeof(r=function(t){"use strict";function e(t,e){var n=[],r=[];t.forEach(function(t,i){null!==t[1]&&(r.push(t),n.push(e[i]))});var i=r.reduce(function(t,e){return t+e[1]},0)/r.length,a=r.reduce(function(t,e){var n=e[1]-i;return t+n*n},0);return 1-r.reduce(function(t,e,r){var i=e[1]-n[r][1];return t+i*i},0)/a}function n(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i={order:2,precision:2,period:null},a={linear:function(t,r){for(var i=[0,0,0,0,0],a=0,o=0;o<t.length;o++)null!==t[o][1]&&(a++,i[0]+=t[o][0],i[1]+=t[o][1],i[2]+=t[o][0]*t[o][0],i[3]+=t[o][0]*t[o][1],i[4]+=t[o][1]*t[o][1]);var s=a*i[2]-i[0]*i[0],u=0===s?0:n((a*i[3]-i[0]*i[1])/s,r.precision),l=n(i[1]/a-u*i[0]/a,r.precision),c=function(t){return[n(t,r.precision),n(u*t+l,r.precision)]},h=t.map(function(t){return c(t[0])});return{points:h,predict:c,equation:[u,l],r2:n(e(t,h),r.precision),string:0===l?"y = "+u+"x":"y = "+u+"x + "+l}},exponential:function(t,r){for(var i=[0,0,0,0,0,0],a=0;a<t.length;a++)null!==t[a][1]&&(i[0]+=t[a][0],i[1]+=t[a][1],i[2]+=t[a][0]*t[a][0]*t[a][1],i[3]+=t[a][1]*Math.log(t[a][1]),i[4]+=t[a][0]*t[a][1]*Math.log(t[a][1]),i[5]+=t[a][0]*t[a][1]);var o=i[1]*i[2]-i[5]*i[5],s=Math.exp((i[2]*i[3]-i[5]*i[4])/o),u=(i[1]*i[4]-i[5]*i[3])/o,l=n(s,r.precision),c=n(u,r.precision),h=function(t){return[n(t,r.precision),n(l*Math.exp(c*t),r.precision)]},f=t.map(function(t){return h(t[0])});return{points:f,predict:h,equation:[l,c],string:"y = "+l+"e^("+c+"x)",r2:n(e(t,f),r.precision)}},logarithmic:function(t,r){for(var i=[0,0,0,0],a=t.length,o=0;o<a;o++)null!==t[o][1]&&(i[0]+=Math.log(t[o][0]),i[1]+=t[o][1]*Math.log(t[o][0]),i[2]+=t[o][1],i[3]+=Math.pow(Math.log(t[o][0]),2));var s=n((a*i[1]-i[2]*i[0])/(a*i[3]-i[0]*i[0]),r.precision),u=n((i[2]-s*i[0])/a,r.precision),l=function(t){return[n(t,r.precision),n(n(u+s*Math.log(t),r.precision),r.precision)]},c=t.map(function(t){return l(t[0])});return{points:c,predict:l,equation:[u,s],string:"y = "+u+" + "+s+" ln(x)",r2:n(e(t,c),r.precision)}},power:function(t,r){for(var i=[0,0,0,0,0],a=t.length,o=0;o<a;o++)null!==t[o][1]&&(i[0]+=Math.log(t[o][0]),i[1]+=Math.log(t[o][1])*Math.log(t[o][0]),i[2]+=Math.log(t[o][1]),i[3]+=Math.pow(Math.log(t[o][0]),2));var s=(a*i[1]-i[0]*i[2])/(a*i[3]-Math.pow(i[0],2)),u=n(Math.exp((i[2]-s*i[0])/a),r.precision),l=n(s,r.precision),c=function(t){return[n(t,r.precision),n(n(u*Math.pow(t,l),r.precision),r.precision)]},h=t.map(function(t){return c(t[0])});return{points:h,predict:c,equation:[u,l],string:"y = "+u+"x^"+l,r2:n(e(t,h),r.precision)}},polynomial:function(t,r){for(var i=[],a=[],o=0,s=0,u=t.length,l=r.order+1,c=0;c<l;c++){for(var h=0;h<u;h++)null!==t[h][1]&&(o+=Math.pow(t[h][0],c)*t[h][1]);i.push(o),o=0;for(var f=[],d=0;d<l;d++){for(var p=0;p<u;p++)null!==t[p][1]&&(s+=Math.pow(t[p][0],c+d));f.push(s),s=0}a.push(f)}a.push(i);for(var g=function(t,e){for(var n=t,r=t.length-1,i=[e],a=0;a<r;a++){for(var o=a,s=a+1;s<r;s++)Math.abs(n[a][s])>Math.abs(n[a][o])&&(o=s);for(var u=a;u<r+1;u++){var l=n[u][a];n[u][a]=n[u][o],n[u][o]=l}for(var c=a+1;c<r;c++)for(var h=r;h>=a;h--)n[h][c]-=n[h][a]*n[a][c]/n[a][a]}for(var f=r-1;f>=0;f--){for(var d=0,p=f+1;p<r;p++)d+=n[p][f]*i[p];i[f]=(n[r][f]-d)/n[f][f]}return i}(a,l).map(function(t){return n(t,r.precision)}),v=function(t){return[n(t,r.precision),n(g.reduce(function(e,n,r){return e+n*Math.pow(t,r)},0),r.precision)]},m=t.map(function(t){return v(t[0])}),y="y = ",_=g.length-1;_>=0;_--)y+=_>1?g[_]+"x^"+_+" + ":1===_?g[_]+"x + ":g[_];return{string:y,points:m,predict:v,equation:[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(g)).reverse(),r2:n(e(t,m),r.precision)}}};t.exports=Object.keys(a).reduce(function(t,e){return r({_round:n},t,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},e,function(t,n){return a[e](t,r({},i,n))}))},{})})?r.apply(e,[t]):r)&&(t.exports=i)},function(t,e,n){function r(t,e,n,r){return Math.sqrt((t-n)*(t-n)+(e-r)*(e-r))}function i(t,e,n){e/=2;var r=Math.floor((t-n)/e);return[e*(r+(1===Math.abs(r%2)?1:0))+n,e*(r+(1===Math.abs(r%2)?0:1))+n]}function a(t,e){e=o({},h,e);var n=c(e);if(!u(n)||2!==n.length)throw new TypeError("Invalid fields: it must be an array with 2 strings!");var a=n[0],l=n[1],d=t.range(a),g=t.range(l),v=d[1]-d[0],m=g[1]-g[0],y=e.binWidth||[];if(2!==y.length){var _=e.bins,b=_[0],x=_[1];if(b<=0||x<=0)throw new TypeError("Invalid bins: must be an array with two positive numbers (e.g. [ 30, 30 ])!");y=[v/b,m/x]}var w=e.offset,S=w[0],T=w[1],O=3*y[0]/(f*y[1]),M=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],a={},o=e[0],s=e[1],u=n[0],l=n[1];return t.forEach(function(t){var e=t[0],n=t[1],c=i(e,o,u),h=c[0],f=c[1],d=i(n,s,l),p=d[0],g=d[1],v=void 0,m=void 0,y=void 0;r(e,n,h,p)<r(e,n,f,g)?(v="x"+h+"y"+p,m=h,y=p):(v="x"+f+"y"+g,m=f,y=g),a[v]=a[v]||{x:m,y:y,count:0},a[v].count++}),a}(t.rows.map(function(t){return[t[a],O*t[l]]}),[y[0],O*y[1]],[S,O*T]),k=e.as,C=k[0],E=k[1],A=k[2];if(!C||!E||!A)throw new TypeError('Invalid as: it must be an array with three elements (e.g. [ "x", "y", "count" ])!');var I=y[0]/f,P=p.map(function(t){return[Math.sin(t)*I,-Math.cos(t)*I]}),L=[],D=0;e.sizeByCount&&s(M,function(t){t.count>D&&(D=t.count)}),s(M,function(t){var n=t.x,r=t.y,i={};i[A]=t.count,e.sizeByCount?(i[C]=P.map(function(e){return n+t.count/D*e[0]}),i[E]=P.map(function(e){return(r+t.count/D*e[1])/O})):(i[C]=P.map(function(t){return n+t[0]}),i[E]=P.map(function(t){return(r+t[1])/O})),L.push(i)}),t.rows=L}var o=n(4),s=n(12),u=n(3),l=n(2).registerTransform,c=n(7).getFields,h={as:["x","y","count"],bins:[30,30],offset:[0,0],sizeByCount:!1},f=Math.sqrt(3),d=Math.PI/3,p=[0,d,2*d,3*d,4*d,5*d];l("bin.hexagon",a),l("bin.hex",a),l("hexbin",a)},function(t,e,n){function r(t,e){e=i({},c,e);var n=l(e);if(0!==t.rows.length){var r=t.range(n),u=r[1]-r[0],h=e.binWidth;if(!h){var f=e.bins;if(f<=0)throw new TypeError("Invalid bins: it must be a positive number!");h=u/f}var d=e.offset%h,p=[],g=e.groupBy,v=s(t.rows,g);a(v,function(t){var r={};t.map(function(t){return t[n]}).forEach(function(t){var e=function(t,e,n){var r=Math.floor((t-n)/e);return[r*e+n,(r+1)*e+n]}(t,h,d),n=e[0],i=e[1],a=n+"-"+i;r[a]=r[a]||{x0:n,x1:i,count:0},r[a].count++});var s=e.as,u=s[0],l=s[1];if(!u||!l)throw new TypeError('Invalid as: it must be an array with 2 elements (e.g. [ "x", "count" ])!');var c=o(t[0],g);a(r,function(t){var e=i({},c);e[u]=[t.x0,t.x1],e[l]=t.count,p.push(e)})}),t.rows=p}}var i=n(4),a=n(12),o=n(52),s=n(19),u=n(2).registerTransform,l=n(7).getField,c={as:["x","count"],bins:30,offset:0,groupBy:[]};u("bin.histogram",r),u("bin.dot",r)},function(t,e,n){var r=n(4),i=n(12),a=n(3),o=n(9),s=n(27).quantile,u=n(19),l=n(246),c=n(2).registerTransform,h=n(7).getField,f={as:"_bin",groupBy:[],fraction:4};c("bin.quantile",function(t,e){e=r({},f,e);var n=h(e),c=e.as;if(!o(c))throw new TypeError('Invalid as: it must be a string (e.g. "_bin")!');var d=e.p,p=e.fraction;a(d)&&0!==d.length||(d=l(p));var g=u(t.rows,e.groupBy),v=[];i(g,function(t){var e=t[0],r=t.map(function(t){return t[n]}),i=d.map(function(t){return s(r,t)});e[c]=i,v.push(e)}),t.rows=v})},function(t,e,n){function r(t,e,n){var r=Math.floor((t-n)/e);return[r*e+n,(r+1)*e+n]}function i(t,e){e=a({},l,e);var n=u(e),i=n[0],s=n[1];if(!i||!s)throw new TypeError("Invalid fields: must be an array with 2 strings!");var c=t.range(i),h=t.range(s),f=c[1]-c[0],d=h[1]-h[0],p=e.binWidth||[];if(2!==p.length){var g=e.bins,v=g[0],m=g[1];if(v<=0||m<=0)throw new TypeError("Invalid bins: must be an array with 2 positive numbers (e.g. [ 30, 30 ])!");p=[f/v,d/m]}var y=t.rows.map(function(t){return[t[i],t[s]]}),_={},b=e.offset,x=b[0],w=b[1];y.forEach(function(t){var e=r(t[0],p[0],x),n=e[0],i=e[1],a=r(t[1],p[1],w),o=a[0],s=a[1],u=n+"-"+i+"-"+o+"-"+s;_[u]=_[u]||{x0:n,x1:i,y0:o,y1:s,count:0},_[u].count++});var S=[],T=e.as,O=T[0],M=T[1],k=T[2];if(!O||!M||!k)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "count" ])!');if(e.sizeByCount){var C=0;o(_,function(t){t.count>C&&(C=t.count)}),o(_,function(t){var e=t.x0,n=t.x1,r=t.y0,i=t.y1,a=t.count,o=a/C,s=(e+n)/2,u=(r+i)/2,l=(n-e)*o/2,c=(i-r)*o/2,h=s-l,f=s+l,d=u-c,p=u+c,g={};g[O]=[h,f,f,h],g[M]=[d,d,p,p],g[k]=a,S.push(g)})}else o(_,function(t){var e={};e[O]=[t.x0,t.x1,t.x1,t.x0],e[M]=[t.y0,t.y0,t.y1,t.y1],e[k]=t.count,S.push(e)});t.rows=S}var a=n(4),o=n(12),s=n(2).registerTransform,u=n(7).getFields,l={as:["x","y","count"],bins:[30,30],offset:[0,0],sizeByCount:!1};s("bin.rectangle",i),s("bin.rect",i)},function(t,e,n){var r=n(4),i=n(3),a=n(9),o=n(2).registerTransform,s=n(7).getField,u={as:["_centroid_x","_centroid_y"]};o("geo.centroid",function(t,e){e=r({},u,e);var n=s(e),o=e.geoView||e.geoDataView;if(a(o)&&(o=t.dataSet.getView(o)),!o||"geo"!==o.dataType)throw new TypeError("Invalid geoView: must be a DataView of GEO dataType!");var l=e.as;if(!i(l)||2!==l.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "cX", "cY" ])!');var c=l[0],h=l[1];t.rows.forEach(function(t){var e=o.geoFeatureByName(t[n]);e&&(o._projectedAs?(t[c]=e[o._projectedAs[2]],t[h]=e[o._projectedAs[3]]):(t[c]=e.centroidX,t[h]=e.centroidY))})})},function(t,e,n){var r=n(4),i=n(0),a=n(249),o=n(3),s=n(2).registerTransform,u=n(214),l=i.geoPath,c={as:["_x","_y","_centroid_x","_centroid_y"]};s("geo.projection",function(t,e){if("geo"!==t.dataType&&"geo-graticule"!==t.dataType)throw new TypeError("Invalid dataView: this transform is for Geo data only!");var n=(e=r({},c,e)).projection;if(!n)throw new TypeError("Invalid projection!");n=u(n);var i=l(n),s=e.as;if(!o(s)||4!==s.length)throw new TypeError('Invalid as: it must be an array with 4 strings (e.g. [ "x", "y", "cX", "cY" ])!');t._projectedAs=s;var h=s[0],f=s[1],d=s[2],p=s[3];t.rows.forEach(function(t){t[h]=[],t[f]=[];var e=i(t);if(e){a(e)._path.forEach(function(e){t[h].push(e[1]),t[f].push(e[2])});var n=i.centroid(t);t[d]=n[0],t[p]=n[1]}}),t.rows=t.rows.filter(function(t){return 0!==t[h].length})})},function(t,e,n){var r=n(4),i=n(3),a=n(9),o=n(2).registerTransform,s=n(7).getField,u={as:["_x","_y"]};o("geo.region",function(t,e){e=r({},u,e);var n=s(e),o=e.geoView||e.geoDataView;if(a(o)&&(o=t.dataSet.getView(o)),!o||"geo"!==o.dataType)throw new TypeError("Invalid geoView: must be a DataView of GEO dataType!");var l=e.as;if(!i(l)||2!==l.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var c=l[0],h=l[1];t.rows.forEach(function(t){var e=o.geoFeatureByName(t[n]);e&&(o._projectedAs?(t[c]=e[o._projectedAs[0]],t[h]=e[o._projectedAs[1]]):(t[c]=e.longitude,t[h]=e.latitude))})})},function(t,e,n){function r(t,e){e=i({},c,e);var n={},r=t.nodes,l=t.edges;o(r)&&0!==r.length||(r=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.forEach(function(t){var r=e.edgeSource(t),i=e.edgeTarget(t);n[r]||(n[r]={id:r}),n[i]||(n[i]={id:i})}),s(n)}(l,e,n)),r.forEach(function(t){var r=e.id(t);n[r]=t}),function(t,e,n){a(t,function(t,r){t.inEdges=e.filter(function(t){return""+n.target(t)==""+r}),t.outEdges=e.filter(function(t){return""+n.source(t)==""+r}),t.edges=t.outEdges.concat(t.inEdges),t.frequency=t.edges.length,t.value=0,t.inEdges.forEach(function(e){t.value+=n.targetWeight(e)}),t.outEdges.forEach(function(e){t.value+=n.sourceWeight(e)})})}(n,l,e),function(t,e){var n={weight:function(t,e){return e.value-t.value},frequency:function(t,e){return e.frequency-t.frequency},id:function(t,n){return(""+e.id(t)).localeCompare(""+e.id(n))}}[e.sortBy];!n&&u(e.sortBy)&&(n=e.sortBy),n&&t.sort(n)}(r,e),function(t,e){var n=t.length;if(!n)throw new TypeError("Invalid nodes: it's empty!");if(e.weight){var r=e.marginRatio;if(r<0||r>=1)throw new TypeError("Invalid marginRatio: it must be in range [0, 1)!");var i=r/(2*n),a=e.thickness;if(a<=0||a>=1)throw new TypeError("Invalid thickness: it must be in range (0, 1)!");var o=0;t.forEach(function(t){o+=t.value}),t.forEach(function(t){t.weight=t.value/o,t.width=t.weight*(1-r),t.height=a}),t.forEach(function(n,r){for(var o=0,s=r-1;s>=0;s--)o+=t[s].width+2*i;var u=n.minX=i+o,l=n.maxX=n.minX+n.width,c=n.minY=e.y-a/2,h=n.maxY=c+a;n.x=[u,l,l,u],n.y=[c,c,h,h]})}else{var s=1/n;t.forEach(function(t,n){t.x=(n+.5)*s,t.y=e.y})}}(r,e),function(t,e,n){if(n.weight){var r={};a(t,function(t,e){r[e]=t.value}),e.forEach(function(e){var i=n.source(e),a=n.target(e),o=t[i],s=t[a];if(o&&s){var u=r[i],l=n.sourceWeight(e),c=o.minX+(o.value-u)/o.value*o.width,h=c+l/o.value*o.width;r[i]-=l;var f=r[a],d=n.targetWeight(e),p=s.minX+(s.value-f)/s.value*s.width,g=p+d/s.value*s.width;r[a]-=d;var v=n.y;e.x=[c,h,p,g],e.y=[v,v,v,v]}})}else e.forEach(function(e){var r=t[n.source(e)],i=t[n.target(e)];r&&i&&(e.x=[r.x,i.x],e.y=[r.y,i.y])})}(n,l,e),t.nodes=r,t.edges=l}var i=n(4),a=n(12),o=n(3),s=n(119),u=n(13),l=n(2).registerTransform,c={y:0,thickness:.05,weight:!1,marginRatio:.1,id:function(t){return t.id},source:function(t){return t.source},target:function(t){return t.target},sourceWeight:function(t){return t.value||1},targetWeight:function(t){return t.value||1},sortBy:null};l("diagram.arc",r),l("arc",r)},function(t,e,n){function r(t,e){e=i({},s,e);var n=new a.graphlib.Graph;n.setGraph({}),n.setDefaultEdgeLabel(function(){return{}}),t.nodes.forEach(function(t){var r=e.nodeId?e.nodeId(t):t.id;t.height||t.width||(t.height=t.width=e.edgesep),n.setNode(r,t)}),t.edges.forEach(function(t){n.setEdge(e.source(t),e.target(t))}),a.layout(n);var r=[],o=[];n.nodes().forEach(function(t){var e=n.node(t),i=e.x,a=e.y,o=e.height,s=e.width;e.x=[i-s/2,i+s/2,i+s/2,i-s/2],e.y=[a+o/2,a+o/2,a-o/2,a-o/2],r.push(e)}),n.edges().forEach(function(t){var e=n.edge(t).points,r={};r.x=e.map(function(t){return t.x}),r.y=e.map(function(t){return t.y}),o.push(r)}),t.nodes=r,t.edges=o}var i=n(4),a=n(683),o=n(2).registerTransform,s={rankdir:"TB",align:"TB",nodesep:50,edgesep:10,ranksep:50,source:function(t){return t.source},target:function(t){return t.target}};o("diagram.dagre",r),o("dagre",r)},function(t,e,n){t.exports={graphlib:n(17),layout:n(697),debug:n(719),util:{time:n(10).time,notime:n(10).notime},version:n(720)}},function(t,e,n){var r=n(685);t.exports={Graph:r.Graph,json:n(687),alg:n(688),version:r.version}},function(t,e,n){t.exports={Graph:n(135),version:n(686)}},function(t,e){t.exports="2.1.5"},function(t,e,n){var r=n(14),i=n(135);t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:function(t){return r.map(t.nodes(),function(e){var n=t.node(e),i=t.parent(e),a={v:e};return r.isUndefined(n)||(a.value=n),r.isUndefined(i)||(a.parent=i),a})}(t),edges:function(t){return r.map(t.edges(),function(e){var n=t.edge(e),i={v:e.v,w:e.w};return r.isUndefined(e.name)||(i.name=e.name),r.isUndefined(n)||(i.value=n),i})}(t)};return r.isUndefined(t.graph())||(e.value=r.clone(t.graph())),e},read:function(t){var e=new i(t.options).setGraph(t.value);return r.each(t.nodes,function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)}),r.each(t.edges,function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)}),e}}},function(t,e,n){t.exports={components:n(689),dijkstra:n(263),dijkstraAll:n(690),findCycles:n(691),floydWarshall:n(692),isAcyclic:n(693),postorder:n(694),preorder:n(695),prim:n(696),tarjan:n(265),topsort:n(266)}},function(t,e,n){var r=n(14);t.exports=function(t){function e(a){r.has(i,a)||(i[a]=!0,n.push(a),r.each(t.successors(a),e),r.each(t.predecessors(a),e))}var n,i={},a=[];return r.each(t.nodes(),function(t){n=[],e(t),n.length&&a.push(n)}),a}},function(t,e,n){var r=n(263),i=n(14);t.exports=function(t,e,n){return i.transform(t.nodes(),function(i,a){i[a]=r(t,a,e,n)},{})}},function(t,e,n){var r=n(14),i=n(265);t.exports=function(t){return r.filter(i(t),function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])})}},function(t,e,n){var r=n(14);t.exports=function(t,e,n){return function(t,e,n){var r={},i=t.nodes();return i.forEach(function(t){r[t]={},r[t][t]={distance:0},i.forEach(function(e){t!==e&&(r[t][e]={distance:Number.POSITIVE_INFINITY})}),n(t).forEach(function(n){var i=n.v===t?n.w:n.v,a=e(n);r[t][i]={distance:a,predecessor:t}})}),i.forEach(function(t){var e=r[t];i.forEach(function(n){var a=r[n];i.forEach(function(n){var r=e[n],i=a[n],o=a[t].distance+r.distance;o<i.distance&&(i.distance=o,i.predecessor=r.predecessor)})})}),r}(t,e||i,n||function(e){return t.outEdges(e)})};var i=r.constant(1)},function(t,e,n){var r=n(266);t.exports=function(t){try{r(t)}catch(t){if(t instanceof r.CycleException)return!1;throw t}return!0}},function(t,e,n){var r=n(267);t.exports=function(t,e){return r(t,e,"post")}},function(t,e,n){var r=n(267);t.exports=function(t,e){return r(t,e,"pre")}},function(t,e,n){var r=n(14),i=n(135),a=n(264);t.exports=function(t,e){function n(t){var n=t.v===o?t.w:t.v,r=l.priority(n);if(void 0!==r){var i=e(t);i<r&&(u[n]=o,l.decrease(n,i))}}var o,s=new i,u={},l=new a;if(0===t.nodeCount())return s;r.each(t.nodes(),function(t){l.add(t,Number.POSITIVE_INFINITY),s.setNode(t)}),l.decrease(t.nodes()[0],0);for(var c=!1;l.size()>0;){if(o=l.removeMin(),r.has(u,o))s.setEdge(o,u[o]);else{if(c)throw new Error("Input graph is not connected: "+t);c=!0}t.nodeEdges(o).forEach(n)}return s}},function(t,e,n){"use strict";function r(t,e){return a.mapValues(a.pick(t,e),Number)}function i(t){var e={};return a.forEach(t,function(t,n){e[n.toLowerCase()]=t}),e}var a=n(8),o=n(698),s=n(701),u=n(702),l=n(10).normalizeRanks,c=n(704),h=n(10).removeEmptyRanks,f=n(705),d=n(706),p=n(707),g=n(708),v=n(717),m=n(10),y=n(17).Graph;t.exports=function(t,e){var n=e&&e.debugTiming?m.time:m.notime;n("layout",function(){var e=n("  buildLayoutGraph",function(){return function(t){var e=new y({multigraph:!0,compound:!0}),n=i(t.graph());return e.setGraph(a.merge({},b,r(n,_),a.pick(n,x))),a.forEach(t.nodes(),function(n){var o=i(t.node(n));e.setNode(n,a.defaults(r(o,w),S)),e.setParent(n,t.parent(n))}),a.forEach(t.edges(),function(n){var o=i(t.edge(n));e.setEdge(n,a.merge({},O,r(o,T),a.pick(o,M)))}),e}(t)});n("  runLayout",function(){!function(t,e){e("    makeSpaceForEdgeLabels",function(){!function(t){var e=t.graph();e.ranksep/=2,a.forEach(t.edges(),function(n){var r=t.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)})}(t)}),e("    removeSelfEdges",function(){!function(t){a.forEach(t.edges(),function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}(t)}),e("    acyclic",function(){o.run(t)}),e("    nestingGraph.run",function(){f.run(t)}),e("    rank",function(){u(m.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){!function(t){a.forEach(t.edges(),function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e:e};m.addDummyNode(t,"edge-proxy",i,"_ep")}})}(t)}),e("    removeEmptyRanks",function(){h(t)}),e("    nestingGraph.cleanup",function(){f.cleanup(t)}),e("    normalizeRanks",function(){l(t)}),e("    assignRankMinMax",function(){!function(t){var e=0;a.forEach(t.nodes(),function(n){var r=t.node(n);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,e=a.max(e,r.maxRank))}),t.graph().maxRank=e}(t)}),e("    removeEdgeLabelProxies",function(){!function(t){a.forEach(t.nodes(),function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))})}(t)}),e("    normalize.run",function(){s.run(t)}),e("    parentDummyChains",function(){c(t)}),e("    addBorderSegments",function(){d(t)}),e("    order",function(){g(t)}),e("    insertSelfEdges",function(){!function(t){var e=m.buildLayerMatrix(t);a.forEach(e,function(e){var n=0;a.forEach(e,function(e,r){var i=t.node(e);i.order=r+n,a.forEach(i.selfEdges,function(e){m.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:r+ ++n,e:e.e,label:e.label},"_se")}),delete i.selfEdges})})}(t)}),e("    adjustCoordinateSystem",function(){p.adjust(t)}),e("    position",function(){v(t)}),e("    positionSelfEdges",function(){!function(t){a.forEach(t.nodes(),function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,a=r.y,o=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{x:i+o,y:a},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],n.label.x=n.x,n.label.y=n.y}})}(t)}),e("    removeBorderNodes",function(){!function(t){a.forEach(t.nodes(),function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(a.last(n.borderLeft)),s=t.node(a.last(n.borderRight));n.width=Math.abs(s.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}}),a.forEach(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}(t)}),e("    normalize.undo",function(){s.undo(t)}),e("    fixupEdgeLabelCoords",function(){!function(t){a.forEach(t.edges(),function(e){var n=t.edge(e);if(a.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}})}(t)}),e("    undoCoordinateSystem",function(){p.undo(t)}),e("    translateGraph",function(){!function(t){function e(t){var e=t.x,a=t.y,s=t.width,u=t.height;n=Math.min(n,e-s/2),r=Math.max(r,e+s/2),i=Math.min(i,a-u/2),o=Math.max(o,a+u/2)}var n=Number.POSITIVE_INFINITY,r=0,i=Number.POSITIVE_INFINITY,o=0,s=t.graph(),u=s.marginx||0,l=s.marginy||0;a.forEach(t.nodes(),function(n){e(t.node(n))}),a.forEach(t.edges(),function(n){var r=t.edge(n);a.has(r,"x")&&e(r)}),n-=u,i-=l,a.forEach(t.nodes(),function(e){var r=t.node(e);r.x-=n,r.y-=i}),a.forEach(t.edges(),function(e){var r=t.edge(e);a.forEach(r.points,function(t){t.x-=n,t.y-=i}),a.has(r,"x")&&(r.x-=n),a.has(r,"y")&&(r.y-=i)}),s.width=r-n+u,s.height=o-i+l}(t)}),e("    assignNodeIntersects",function(){!function(t){a.forEach(t.edges(),function(e){var n,r,i=t.edge(e),a=t.node(e.v),o=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=o,r=a),i.points.unshift(m.intersectRect(a,n)),i.points.push(m.intersectRect(o,r))})}(t)}),e("    reversePoints",function(){!function(t){a.forEach(t.edges(),function(e){var n=t.edge(e);n.reversed&&n.points.reverse()})}(t)}),e("    acyclic.undo",function(){o.undo(t)})}(e,n)}),n("  updateInputGraph",function(){!function(t,e){a.forEach(t.nodes(),function(n){var r=t.node(n),i=e.node(n);r&&(r.x=i.x,r.y=i.y,e.children(n).length&&(r.width=i.width,r.height=i.height))}),a.forEach(t.edges(),function(n){var r=t.edge(n),i=e.edge(n);r.points=i.points,a.has(i,"x")&&(r.x=i.x,r.y=i.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)})})};var _=["nodesep","edgesep","ranksep","marginx","marginy"],b={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},x=["acyclicer","ranker","rankdir","align"],w=["width","height"],S={width:0,height:0},T=["minlen","weight","width","height","labeloffset"],O={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},M=["labelpos"]},function(t,e,n){"use strict";var r=n(8),i=n(699);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?i(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],n={},i={};return r.forEach(t.nodes(),function a(o){r.has(i,o)||(i[o]=!0,n[o]=!0,r.forEach(t.outEdges(o),function(t){r.has(n,t.w)?e.push(t):a(t.w)}),delete n[o])}),e}(t);r.forEach(e,function(e){var n=t.edge(e);t.removeEdge(e),n.forwardName=e.name,n.reversed=!0,t.setEdge(e.w,e.v,n,r.uniqueId("rev"))})},undo:function(t){r.forEach(t.edges(),function(e){var n=t.edge(e);if(n.reversed){t.removeEdge(e);var r=n.forwardName;delete n.reversed,delete n.forwardName,t.setEdge(e.w,e.v,n,r)}})}}},function(t,e,n){function r(t,e,n,r,o){var s=o?[]:void 0;return a.forEach(t.inEdges(r.v),function(r){var a=t.edge(r),u=t.node(r.v);o&&s.push({v:r.v,w:r.w}),u.out-=a,i(e,n,u)}),a.forEach(t.outEdges(r.v),function(r){var a=t.edge(r),o=t.node(r.w);o.in-=a,i(e,n,o)}),t.removeNode(r.v),s}function i(t,e,n){n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)}var a=n(8),o=n(17).Graph,s=n(700);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var n=function(t,e){var n=new o,r=0,u=0;a.forEach(t.nodes(),function(t){n.setNode(t,{v:t,in:0,out:0})}),a.forEach(t.edges(),function(t){var i=n.edge(t.v,t.w)||0,a=e(t);n.setEdge(t.v,t.w,i+a),u=Math.max(u,n.node(t.v).out+=a),r=Math.max(r,n.node(t.w).in+=a)});var l=a.range(u+r+3).map(function(){return new s}),c=r+1;return a.forEach(n.nodes(),function(t){i(l,c,n.node(t))}),{graph:n,buckets:l,zeroIdx:c}}(t,e||u),l=function(t,e,n){for(var i,a=[],o=e[e.length-1],s=e[0];t.nodeCount();){for(;i=s.dequeue();)r(t,e,n,i);for(;i=o.dequeue();)r(t,e,n,i);if(t.nodeCount())for(var u=e.length-2;u>0;--u)if(i=e[u].dequeue()){a=a.concat(r(t,e,n,i,!0));break}}return a}(n.graph,n.buckets,n.zeroIdx);return a.flatten(a.map(l,function(e){return t.outEdges(e.v,e.w)}),!0)};var u=a.constant(1)},function(t,e){function n(){var t={};t._next=t._prev=t,this._sentinel=t}function r(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function i(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=n,n.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return r(e),e},n.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&r(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},n.prototype.toString=function(){for(var t=[],e=this._sentinel,n=e._prev;n!==e;)t.push(JSON.stringify(n,i)),n=n._prev;return"["+t.join(", ")+"]"}},function(t,e,n){"use strict";var r=n(8),i=n(10);t.exports={run:function(t){t.graph().dummyChains=[],r.forEach(t.edges(),function(e){!function(t,e){var n=e.v,r=t.node(n).rank,a=e.w,o=t.node(a).rank,s=e.name,u=t.edge(e),l=u.labelRank;if(o!==r+1){var c,h,f;for(t.removeEdge(e),f=0,++r;r<o;++f,++r)u.points=[],c=i.addDummyNode(t,"edge",h={width:0,height:0,edgeLabel:u,edgeObj:e,rank:r},"_d"),r===l&&(h.width=u.width,h.height=u.height,h.dummy="edge-label",h.labelpos=u.labelpos),t.setEdge(n,c,{weight:u.weight},s),0===f&&t.graph().dummyChains.push(c),n=c;t.setEdge(n,a,{weight:u.weight},s)}}(t,e)})},undo:function(t){r.forEach(t.graph().dummyChains,function(e){var n,r=t.node(e),i=r.edgeLabel;for(t.setEdge(r.edgeObj,i);r.dummy;)n=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),r=t.node(e=n)})}}},function(t,e,n){"use strict";function r(t){o(t)}var i=n(80).longestPath,a=n(268),o=n(703);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":r(t);break;case"tight-tree":!function(t){i(t),a(t)}(t);break;case"longest-path":s(t);break;default:r(t)}};var s=i},function(t,e,n){"use strict";function r(t){t=m(t),p(t);var e,n=f(t);for(o(n),i(n,t);e=s(n);)l(n,t,e,u(n,t,e))}function i(t,e){var n=v(t,t.nodes());n=n.slice(0,n.length-1),h.forEach(n,function(n){!function(t,e,n){var r=t.node(n).parent;t.edge(n,r).cutvalue=a(t,e,n)}(t,e,n)})}function a(t,e,n){var r=t.node(n).parent,i=!0,a=e.edge(n,r),o=0;return a||(i=!1,a=e.edge(r,n)),o=a.weight,h.forEach(e.nodeEdges(n),function(a){var s=a.v===n,u=s?a.w:a.v;if(u!==r){var l=s===i,c=e.edge(a).weight;if(o+=l?c:-c,function(t,e,n){return t.hasEdge(e,u)}(t,n)){var h=t.edge(n,u).cutvalue;o+=l?-h:h}}}),o}function o(t,e){arguments.length<2&&(e=t.nodes()[0]),function t(e,n,r,i,a){var o=r,s=e.node(i);return n[i]=!0,h.forEach(e.neighbors(i),function(a){h.has(n,a)||(r=t(e,n,r,a,i))}),s.low=o,s.lim=r++,a?s.parent=a:delete s.parent,r}(t,{},1,e)}function s(t){return h.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function u(t,e,n){var r=n.v,i=n.w;e.hasEdge(r,i)||(r=n.w,i=n.v);var a=t.node(r),o=t.node(i),s=a,u=!1;a.lim>o.lim&&(s=o,u=!0);var l=h.filter(e.edges(),function(e){return u===c(0,t.node(e.v),s)&&u!==c(0,t.node(e.w),s)});return h.minBy(l,function(t){return d(e,t)})}function l(t,e,n,r){t.removeEdge(n.v,n.w),t.setEdge(r.v,r.w,{}),o(t),i(t,e),function(t,e){var n=h.find(t.nodes(),function(t){return!e.node(t).parent}),r=g(t,n);r=r.slice(1),h.forEach(r,function(n){var r=t.node(n).parent,i=e.edge(n,r),a=!1;i||(i=e.edge(r,n),a=!0),e.node(n).rank=e.node(r).rank+(a?i.minlen:-i.minlen)})}(t,e)}function c(t,e,n){return n.low<=e.lim&&e.lim<=n.lim}var h=n(8),f=n(268),d=n(80).slack,p=n(80).longestPath,g=n(17).alg.preorder,v=n(17).alg.postorder,m=n(10).simplify;t.exports=r,r.initLowLimValues=o,r.initCutValues=i,r.calcCutValue=a,r.leaveEdge=s,r.enterEdge=u,r.exchangeEdges=l},function(t,e,n){var r=n(8);t.exports=function(t){var e=function(t){var e={},n=0;return r.forEach(t.children(),function i(a){var o=n;r.forEach(t.children(a),i),e[a]={low:o,lim:n++}}),e}(t);r.forEach(t.graph().dummyChains,function(n){for(var r=t.node(n),i=r.edgeObj,a=function(t,e,n,r){var i,a,o=[],s=[],u=Math.min(e[n].low,e[r].low),l=Math.max(e[n].lim,e[r].lim);i=n;do{i=t.parent(i),o.push(i)}while(i&&(e[i].low>u||l>e[i].lim));for(a=i,i=r;(i=t.parent(i))!==a;)s.push(i);return{path:o.concat(s.reverse()),lca:a}}(t,e,i.v,i.w),o=a.path,s=a.lca,u=0,l=o[u],c=!0;n!==i.w;){if(r=t.node(n),c){for(;(l=o[u])!==s&&t.node(l).maxRank<r.rank;)u++;l===s&&(c=!1)}if(!c){for(;u<o.length-1&&t.node(l=o[u+1]).minRank<=r.rank;)u++;l=o[u]}t.setParent(n,l),n=t.successors(n)[0]}})}},function(t,e,n){function r(t,e,n,o,s,u,l){var c=t.children(l);if(c.length){var h=a.addBorderNode(t,"_bt"),f=a.addBorderNode(t,"_bb"),d=t.node(l);t.setParent(h,l),d.borderTop=h,t.setParent(f,l),d.borderBottom=f,i.forEach(c,function(i){r(t,e,n,o,s,u,i);var a=t.node(i),c=a.borderTop?a.borderTop:i,d=a.borderBottom?a.borderBottom:i,p=a.borderTop?o:2*o,g=c!==d?1:s-u[l]+1;t.setEdge(h,c,{weight:p,minlen:g,nestingEdge:!0}),t.setEdge(d,f,{weight:p,minlen:g,nestingEdge:!0})}),t.parent(l)||t.setEdge(e,h,{weight:0,minlen:s+u[l]})}else l!==e&&t.setEdge(e,l,{weight:0,minlen:n})}var i=n(8),a=n(10);t.exports={run:function(t){var e=a.addDummyNode(t,"root",{},"_root"),n=function(t){function e(r,a){var o=t.children(r);o&&o.length&&i.forEach(o,function(t){e(t,a+1)}),n[r]=a}var n={};return i.forEach(t.children(),function(t){e(t,1)}),n}(t),o=i.max(i.values(n))-1,s=2*o+1;t.graph().nestingRoot=e,i.forEach(t.edges(),function(e){t.edge(e).minlen*=s});var u=function(t){return i.reduce(t.edges(),function(e,n){return e+t.edge(n).weight},0)}(t)+1;i.forEach(t.children(),function(i){r(t,e,s,u,o,n,i)}),t.graph().nodeRankFactor=s},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,i.forEach(t.edges(),function(e){t.edge(e).nestingEdge&&t.removeEdge(e)})}}},function(t,e,n){function r(t,e,n,r,i,o){var s=i[e][o-1],u=a.addDummyNode(t,"border",{width:0,height:0,rank:o,borderType:e},n);i[e][o]=u,t.setParent(u,r),s&&t.setEdge(s,u,{weight:1})}var i=n(8),a=n(10);t.exports=function(t){i.forEach(t.children(),function e(n){var a=t.children(n),o=t.node(n);if(a.length&&i.forEach(a,e),i.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var s=o.minRank,u=o.maxRank+1;s<u;++s)r(t,"borderLeft","_bl",n,o,s),r(t,"borderRight","_br",n,o,s)}})}},function(t,e,n){"use strict";function r(t){s.forEach(t.nodes(),function(e){i(t.node(e))}),s.forEach(t.edges(),function(e){i(t.edge(e))})}function i(t){var e=t.width;t.width=t.height,t.height=e}function a(t){t.y=-t.y}function o(t){var e=t.x;t.x=t.y,t.y=e}var s=n(8);t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||r(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){s.forEach(t.nodes(),function(e){a(t.node(e))}),s.forEach(t.edges(),function(e){var n=t.edge(e);s.forEach(n.points,a),s.has(n,"y")&&a(n)})}(t),"lr"!==e&&"rl"!==e||(function(t){s.forEach(t.nodes(),function(e){o(t.node(e))}),s.forEach(t.edges(),function(e){var n=t.edge(e);s.forEach(n.points,o),s.has(n,"x")&&o(n)})}(t),r(t))}}},function(t,e,n){"use strict";function r(t,e,n){return a.map(e,function(e){return l(t,e,n)})}function i(t,e){a.forEach(e,function(e){a.forEach(e,function(e,n){t.node(e).order=n})})}var a=n(8),o=n(709),s=n(710),u=n(711),l=n(715),c=n(716),h=n(17).Graph,f=n(10);t.exports=function(t){var e=f.maxRank(t),n=r(t,a.range(1,e+1),"inEdges"),l=r(t,a.range(e-1,-1,-1),"outEdges"),d=o(t);i(t,d);for(var p,g=Number.POSITIVE_INFINITY,v=0,m=0;m<4;++v,++m){!function(t,e){var n=new h;a.forEach(t,function(t){var r=t.graph().root,i=u(t,r,n,e);a.forEach(i.vs,function(e,n){t.node(e).order=n}),c(t,n,i.vs)})}(v%2?n:l,v%4>=2),d=f.buildLayerMatrix(t);var y=s(t,d);y<g&&(m=0,p=a.cloneDeep(d),g=y)}i(t,p)}},function(t,e,n){"use strict";var r=n(8);t.exports=function(t){var e={},n=r.filter(t.nodes(),function(e){return!t.children(e).length}),i=r.max(r.map(n,function(e){return t.node(e).rank})),a=r.map(r.range(i+1),function(){return[]}),o=r.sortBy(n,function(e){return t.node(e).rank});return r.forEach(o,function n(i){if(!r.has(e,i)){e[i]=!0;var o=t.node(i);a[o.rank].push(i),r.forEach(t.successors(i),n)}}),a}},function(t,e,n){"use strict";var r=n(8);t.exports=function(t,e){for(var n=0,i=1;i<e.length;++i)n+=function(t,e,n){for(var i=r.zipObject(n,r.map(n,function(t,e){return e})),a=r.flatten(r.map(e,function(e){return r.chain(t.outEdges(e)).map(function(e){return{pos:i[e.w],weight:t.edge(e).weight}}).sortBy("pos").value()}),!0),o=1;o<n.length;)o<<=1;var s=2*o-1;o-=1;var u=r.map(new Array(s),function(){return 0}),l=0;return r.forEach(a.forEach(function(t){var e=t.pos+o;u[e]+=t.weight;for(var n=0;e>0;)e%2&&(n+=u[e+1]),u[e=e-1>>1]+=t.weight;l+=t.weight*n})),l}(t,e[i-1],e[i]);return n}},function(t,e,n){var r=n(8),i=n(712),a=n(713),o=n(714);t.exports=function t(e,n,s,u){var l=e.children(n),c=e.node(n),h=c?c.borderLeft:void 0,f=c?c.borderRight:void 0,d={};h&&(l=r.filter(l,function(t){return t!==h&&t!==f}));var p=i(e,l);r.forEach(p,function(n){if(e.children(n.v).length){var i=t(e,n.v,s,u);d[n.v]=i,r.has(i,"barycenter")&&function(t,e){r.isUndefined(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}(n,i)}});var g=a(p,s);!function(t,e){r.forEach(g,function(t){t.vs=r.flatten(t.vs.map(function(t){return e[t]?e[t].vs:t}),!0)})}(0,d);var v=o(g,u);if(h&&(v.vs=r.flatten([h,v.vs,f],!0),e.predecessors(h).length)){var m=e.node(e.predecessors(h)[0]),y=e.node(e.predecessors(f)[0]);r.has(v,"barycenter")||(v.barycenter=0,v.weight=0),v.barycenter=(v.barycenter*v.weight+m.order+y.order)/(v.weight+2),v.weight+=2}return v}},function(t,e,n){var r=n(8);t.exports=function(t,e){return r.map(e,function(e){var n=t.inEdges(e);if(n.length){var i=r.reduce(n,function(e,n){var r=t.edge(n),i=t.node(n.v);return{sum:e.sum+r.weight*i.order,weight:e.weight+r.weight}},{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}return{v:e}})}},function(t,e,n){"use strict";var r=n(8);t.exports=function(t,e){var n={};return r.forEach(t,function(t,e){var i=n[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};r.isUndefined(t.barycenter)||(i.barycenter=t.barycenter,i.weight=t.weight)}),r.forEach(e.edges(),function(t){var e=n[t.v],i=n[t.w];r.isUndefined(e)||r.isUndefined(i)||(i.indegree++,e.out.push(n[t.w]))}),function(t){function e(t){return function(e){e.merged||(r.isUndefined(e.barycenter)||r.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var n=0,r=0;t.weight&&(n+=t.barycenter*t.weight,r+=t.weight),e.weight&&(n+=e.barycenter*e.weight,r+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=n/r,t.weight=r,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function n(e){return function(n){n.in.push(e),0==--n.indegree&&t.push(n)}}for(var i=[];t.length;){var a=t.pop();i.push(a),r.forEach(a.in.reverse(),e(a)),r.forEach(a.out,n(a))}return r.chain(i).filter(function(t){return!t.merged}).map(function(t){return r.pick(t,["vs","i","barycenter","weight"])}).value()}(r.filter(n,function(t){return!t.indegree}))}},function(t,e,n){function r(t,e,n){for(var r;e.length&&(r=i.last(e)).i<=n;)e.pop(),t.push(r.vs),n++;return n}var i=n(8),a=n(10);t.exports=function(t,e){var n=a.partition(t,function(t){return i.has(t,"barycenter")}),o=n.lhs,s=i.sortBy(n.rhs,function(t){return-t.i}),u=[],l=0,c=0,h=0;o.sort(function(t){return function(e,n){return e.barycenter<n.barycenter?-1:e.barycenter>n.barycenter?1:t?n.i-e.i:e.i-n.i}}(!!e)),h=r(u,s,h),i.forEach(o,function(t){h+=t.vs.length,u.push(t.vs),l+=t.barycenter*t.weight,c+=t.weight,h=r(u,s,h)});var f={vs:i.flatten(u,!0)};return c&&(f.barycenter=l/c,f.weight=c),f}},function(t,e,n){var r=n(8),i=n(17).Graph;t.exports=function(t,e,n){var a=function(t){for(var e;t.hasNode(e=r.uniqueId("_root")););return e}(t),o=new i({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(e){return t.node(e)});return r.forEach(t.nodes(),function(i){var s=t.node(i),u=t.parent(i);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(o.setNode(i),o.setParent(i,u||a),r.forEach(t[n](i),function(e){var n=e.v===i?e.w:e.v,a=o.edge(n,i),s=r.isUndefined(a)?0:a.weight;o.setEdge(n,i,{weight:t.edge(e).weight+s})}),r.has(s,"minRank")&&o.setNode(i,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))}),o}},function(t,e,n){var r=n(8);t.exports=function(t,e,n){var i,a={};r.forEach(n,function(n){for(var r,o,s=t.parent(n);s;){if((r=t.parent(s))?(o=a[r],a[r]=s):(o=i,i=s),o&&o!==s)return void e.setEdge(o,s);s=r}})}},function(t,e,n){"use strict";var r=n(8),i=n(10),a=n(718).positionX;t.exports=function(t){(function(t){var e=i.buildLayerMatrix(t),n=t.graph().ranksep,a=0;r.forEach(e,function(e){var i=r.max(r.map(e,function(e){return t.node(e).height}));r.forEach(e,function(e){t.node(e).y=a+i/2}),a+=i+n})})(t=i.asNonCompoundGraph(t)),r.forEach(a(t),function(e,n){t.node(n).x=e})}},function(t,e,n){"use strict";function r(t,e){var n={};return f.reduce(e,function(e,r){var i=0,o=0,s=e.length,u=f.last(r);return f.forEach(r,function(e,l){var c=function(t,e){if(t.node(e).dummy)return f.find(t.predecessors(e),function(e){return t.node(e).dummy})}(t,e),h=c?t.node(c).order:s;(c||e===u)&&(f.forEach(r.slice(o,l+1),function(e){f.forEach(t.predecessors(e),function(r){var o=t.node(r),s=o.order;!(s<i||h<s)||o.dummy&&t.node(e).dummy||a(n,r,e)})}),o=l+1,i=h)}),r}),n}function i(t,e){function n(e,n,i,o,s){var u;f.forEach(f.range(n,i),function(n){t.node(u=e[n]).dummy&&f.forEach(t.predecessors(u),function(e){var n=t.node(e);n.dummy&&(n.order<o||n.order>s)&&a(r,e,u)})})}var r={};return f.reduce(e,function(e,r){var i,a=-1,o=0;return f.forEach(r,function(s,u){if("border"===t.node(s).dummy){var l=t.predecessors(s);l.length&&(i=t.node(l[0]).order,n(r,o,u,a,i),o=u,a=i)}n(r,o,r.length,i,e.length)}),r}),r}function a(t,e,n){if(e>n){var r=e;e=n,n=r}var i=t[e];i||(t[e]=i={}),i[n]=!0}function o(t,e,n){if(e>n){var r=e;e=n,n=r}return f.has(t[e],n)}function s(t,e,n,r){var i={},a={},s={};return f.forEach(e,function(t){f.forEach(t,function(t,e){i[t]=t,a[t]=t,s[t]=e})}),f.forEach(e,function(t){var e=-1;f.forEach(t,function(t){var u=r(t);if(u.length)for(var l=((u=f.sortBy(u,function(t){return s[t]})).length-1)/2,c=Math.floor(l),h=Math.ceil(l);c<=h;++c){var d=u[c];a[t]===t&&e<s[d]&&!o(n,t,d)&&(a[d]=t,a[t]=i[t]=i[d],e=s[d])}})}),{root:i,align:a}}function u(t,e,n,r,i){function a(t,e){for(var n=s.nodes(),r=n.pop(),i={};r;)i[r]?t(r):(i[r]=!0,n.push(r),n=n.concat(e(r))),r=n.pop()}var o={},s=function(t,e,n,r){var i=new d,a=t.graph(),o=function(t,e,n){return function(r,i,a){var o,s=r.node(i),u=r.node(a),l=0;if(l+=s.width/2,f.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":o=-s.width/2;break;case"r":o=s.width/2}if(o&&(l+=n?o:-o),o=0,l+=(s.dummy?e:t)/2,l+=(u.dummy?e:t)/2,l+=u.width/2,f.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":o=u.width/2;break;case"r":o=-u.width/2}return o&&(l+=n?o:-o),o=0,l}}(a.nodesep,a.edgesep,r);return f.forEach(e,function(e){var r;f.forEach(e,function(e){var a=n[e];if(i.setNode(a),r){var s=n[r],u=i.edge(s,a);i.setEdge(s,a,Math.max(o(t,e,r),u||0))}r=e})}),i}(t,e,n,i),u=i?"borderLeft":"borderRight";return a(function(t){o[t]=s.inEdges(t).reduce(function(t,e){return Math.max(t,o[e.v]+s.edge(e))},0)},f.bind(s.predecessors,s)),a(function(e){var n=s.outEdges(e).reduce(function(t,e){return Math.min(t,o[e.w]-s.edge(e))},Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==u&&(o[e]=Math.max(o[e],n))},f.bind(s.successors,s)),f.forEach(r,function(t){o[t]=o[n[t]]}),o}function l(t,e){return f.minBy(f.values(e),function(e){var n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return f.forIn(e,function(e,i){var a=function(t,e){return t.node(i).width}(t)/2;n=Math.max(e+a,n),r=Math.min(e-a,r)}),n-r})}function c(t,e){var n=f.values(e),r=f.min(n),i=f.max(n);f.forEach(["u","d"],function(n){f.forEach(["l","r"],function(a){var o,s=n+a,u=t[s];if(u!==e){var l=f.values(u);(o="l"===a?r-f.min(l):i-f.max(l))&&(t[s]=f.mapValues(u,function(t){return t+o}))}})})}function h(t,e){return f.mapValues(t.ul,function(n,r){if(e)return t[e.toLowerCase()][r];var i=f.sortBy(f.map(t,r));return(i[1]+i[2])/2})}var f=n(8),d=n(17).Graph,p=n(10);t.exports={positionX:function(t){var e,n=p.buildLayerMatrix(t),a=f.merge(r(t,n),i(t,n)),o={};f.forEach(["u","d"],function(r){e="u"===r?n:f.values(n).reverse(),f.forEach(["l","r"],function(n){"r"===n&&(e=f.map(e,function(t){return f.values(t).reverse()}));var i=f.bind("u"===r?t.predecessors:t.successors,t),l=s(0,e,a,i),c=u(t,e,l.root,l.align,"r"===n);"r"===n&&(c=f.mapValues(c,function(t){return-t})),o[r+n]=c})});var d=l(t,o);return c(o,d),h(o,t.graph().align)},findType1Conflicts:r,findType2Conflicts:i,addConflict:a,hasConflict:o,verticalAlignment:s,horizontalCompaction:u,alignCoordinates:c,findSmallestWidthAlignment:l,balance:h}},function(t,e,n){var r=n(8),i=n(10),a=n(17).Graph;t.exports={debugOrdering:function(t){var e=i.buildLayerMatrix(t),n=new a({compound:!0,multigraph:!0}).setGraph({});return r.forEach(t.nodes(),function(e){n.setNode(e,{label:e}),n.setParent(e,"layer"+t.node(e).rank)}),r.forEach(t.edges(),function(t){n.setEdge(t.v,t.w,{},t.name)}),r.forEach(e,function(t,e){n.setNode("layer"+e,{rank:"same"}),r.reduce(t,function(t,e){return n.setEdge(t,e,{style:"invis"}),e})}),n}}},function(t,e){t.exports="0.8.2"},function(t,e,n){function r(t,e){e=i({},g,e);var n=null;a(e.nodeAlign)?n=p[e.nodeAlign]:o(e.nodeAlign)&&(n=e.nodeAlign);var r=u().links(function(t){return t.edges}).nodeWidth(e.nodeWidth).nodePadding(e.nodePadding).extent([[0,0],[1,1]]);o(e.nodeId)&&r.nodeId(e.nodeId),n&&r.nodeAlign(n),r(t),t.nodes.forEach(function(t){var e=t.x0,n=t.x1,r=t.y0,i=t.y1;t.x=[e,n,n,e],t.y=[r,r,i,i]}),t.edges.forEach(function(t){var e=t.source.x1,n=t.target.x0;t.x=[e,e,n,n];var r=t.width/2;t.y=[t.y0+r,t.y0-r,t.y1+r,t.y1-r]})}var i=n(4),a=n(9),o=n(13),s=n(722),u=s.sankey,l=s.sankeyLeft,c=s.sankeyRight,h=s.sankeyCenter,f=s.sankeyJustify,d=n(2).registerTransform,p={sankeyLeft:l,sankeyRight:c,sankeyCenter:h,sankeyJustify:f},g={value:function(t){return t.value},source:function(t){return t.source},target:function(t){return t.target},nodeAlign:"sankeyJustify",nodeWidth:.02,nodePadding:.02};d("diagram.sankey",r),d("sankey",r)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(723);n.d(e,"sankey",function(){return r.a});var i=n(269);n.d(e,"sankeyCenter",function(){return i.a}),n.d(e,"sankeyLeft",function(){return i.c}),n.d(e,"sankeyRight",function(){return i.d}),n.d(e,"sankeyJustify",function(){return i.b});var a=n(731);n.d(e,"sankeyLinkHorizontal",function(){return a.a})},function(t,e,n){"use strict";function r(t,e){return a(t.source,e.source)||t.index-e.index}function i(t,e){return a(t.target,e.target)||t.index-e.index}function a(t,e){return t.y0-e.y0}function o(t){return t.value}function s(t){return(t.y0+t.y1)/2}function u(t){return s(t.source)*t.value}function l(t){return s(t.target)*t.value}function c(t){return t.index}function h(t){return t.nodes}function f(t){return t.links}function d(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var p=n(16),g=n(724),v=n(269),m=n(730);e.a=function(){function t(){var t={nodes:O.apply(null,arguments),links:M.apply(null,arguments)};return function(t){t.nodes.forEach(function(t,e){t.index=e,t.sourceLinks=[],t.targetLinks=[]});var e=Object(g.a)(t.nodes,S);t.links.forEach(function(t,n){t.index=n;var r=t.source,i=t.target;"object"!=typeof r&&(r=t.source=d(e,r)),"object"!=typeof i&&(i=t.target=d(e,i)),r.sourceLinks.push(t),i.targetLinks.push(t)})}(t),function(t){t.nodes.forEach(function(t){t.value=Math.max(Object(p.sum)(t.sourceLinks,o),Object(p.sum)(t.targetLinks,o))})}(t),function(t){var e,r,i;for(e=t.nodes,r=[],i=0;e.length;++i,e=r,r=[])e.forEach(function(t){t.depth=i,t.sourceLinks.forEach(function(t){r.indexOf(t.target)<0&&r.push(t.target)})});for(e=t.nodes,r=[],i=0;e.length;++i,e=r,r=[])e.forEach(function(t){t.height=i,t.targetLinks.forEach(function(t){r.indexOf(t.source)<0&&r.push(t.source)})});var a=(_-n-x)/(i-1);t.nodes.forEach(function(t){t.x1=(t.x0=n+Math.max(0,Math.min(i-1,Math.floor(T.call(null,t,i))))*a)+x})}(t),function(t){function e(){n.forEach(function(t){var e,n,r,i=y,o=t.length;for(t.sort(a),r=0;r<o;++r)(n=i-(e=t[r]).y0)>0&&(e.y0+=n,e.y1+=n),i=e.y1+w;if((n=i-w-b)>0)for(i=e.y0-=n,e.y1-=n,r=o-2;r>=0;--r)(n=(e=t[r]).y1+w-i)>0&&(e.y0-=n,e.y1-=n),i=e.y0})}var n=Object(g.b)().key(function(t){return t.x0}).sortKeys(p.ascending).entries(t.nodes).map(function(t){return t.values});(function(){var e=Object(p.min)(n,function(t){return(b-y-(t.length-1)*w)/Object(p.sum)(t,o)});n.forEach(function(t){t.forEach(function(t,n){t.y1=(t.y0=n)+t.value*e})}),t.links.forEach(function(t){t.width=t.value*e})})(),e();for(var r=1,i=k;i>0;--i)!function(t){n.slice().reverse().forEach(function(e){e.forEach(function(e){if(e.sourceLinks.length){var n=(Object(p.sum)(e.sourceLinks,l)/Object(p.sum)(e.sourceLinks,o)-s(e))*t;e.y0+=n,e.y1+=n}})})}(r*=.99),e(),function(t){n.forEach(function(e){e.forEach(function(e){if(e.targetLinks.length){var n=(Object(p.sum)(e.targetLinks,u)/Object(p.sum)(e.targetLinks,o)-s(e))*t;e.y0+=n,e.y1+=n}})})}(r),e()}(t),e(t),t}function e(t){t.nodes.forEach(function(t){t.sourceLinks.sort(i),t.targetLinks.sort(r)}),t.nodes.forEach(function(t){var e=t.y0,n=e;t.sourceLinks.forEach(function(t){t.y0=e+t.width/2,e+=t.width}),t.targetLinks.forEach(function(t){t.y1=n+t.width/2,n+=t.width})})}var n=0,y=0,_=1,b=1,x=24,w=8,S=c,T=v.b,O=h,M=f,k=32;return t.update=function(t){return e(t),t},t.nodeId=function(e){return arguments.length?(S="function"==typeof e?e:Object(m.a)(e),t):S},t.nodeAlign=function(e){return arguments.length?(T="function"==typeof e?e:Object(m.a)(e),t):T},t.nodeWidth=function(e){return arguments.length?(x=+e,t):x},t.nodePadding=function(e){return arguments.length?(w=+e,t):w},t.nodes=function(e){return arguments.length?(O="function"==typeof e?e:Object(m.a)(e),t):O},t.links=function(e){return arguments.length?(M="function"==typeof e?e:Object(m.a)(e),t):M},t.size=function(e){return arguments.length?(n=y=0,_=+e[0],b=+e[1],t):[_-n,b-y]},t.extent=function(e){return arguments.length?(n=+e[0][0],_=+e[1][0],y=+e[0][1],b=+e[1][1],t):[[n,y],[_,b]]},t.iterations=function(e){return arguments.length?(k=+e,t):k},t}},function(t,e,n){"use strict";var r=n(725);n.d(e,"b",function(){return r.a}),n(726);var i=n(136);n.d(e,"a",function(){return i.a}),n(727),n(728),n(729)},function(t,e,n){"use strict";function r(){return{}}function i(t,e,n){t[e]=n}function a(){return Object(s.a)()}function o(t,e,n){t.set(e,n)}var s=n(136);e.a=function(){function t(r,i,a,o){if(i>=l.length)return null!=e&&r.sort(e),null!=n?n(r):r;for(var u,c,h,f=-1,d=r.length,p=l[i++],g=Object(s.a)(),v=a();++f<d;)(h=g.get(u=p(c=r[f])+""))?h.push(c):g.set(u,[c]);return g.each(function(e,n){o(v,n,t(e,i,a,o))}),v}var e,n,u,l=[],c=[];return u={object:function(e){return t(e,0,r,i)},map:function(e){return t(e,0,a,o)},entries:function(e){return function t(e,r){if(++r>l.length)return e;var i,a=c[r-1];return null!=n&&r>=l.length?i=e.entries():(i=[],e.each(function(e,n){i.push({key:n,values:t(e,r)})})),null!=a?i.sort(function(t,e){return a(t.key,e.key)}):i}(t(e,0,a,o),0)},key:function(t){return l.push(t),u},sortKeys:function(t){return c[l.length-1]=t,u},sortValues:function(t){return e=t,u},rollup:function(t){return n=t,u}}}},function(t,e,n){"use strict";function r(){}var i=n(136),a=i.a.prototype;r.prototype=(function(t,e){var n=new r;if(t instanceof r)t.each(function(t){n.add(t)});else if(t){var i=-1,a=t.length;if(null==e)for(;++i<a;)n.add(t[i]);else for(;++i<a;)n.add(e(t[i],i,t))}return n}).prototype={constructor:r,has:a.has,add:function(t){return this[i.b+(t+="")]=t,this},remove:a.remove,clear:a.clear,values:a.keys,size:a.size,empty:a.empty,each:a.each}},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";function r(t){return[t.source.x1,t.y0]}function i(t){return[t.target.x0,t.y1]}var a=n(732);e.a=function(){return Object(a.a)().source(r).target(i)}},function(t,e,n){"use strict";n(733),n(270),n(137),n(734),n(737),n(272),n(273);var r=n(738);n.d(e,"a",function(){return r.a}),n(739),n(275),n(276),n(277),n(279),n(278),n(280),n(281),n(740),n(741),n(83),n(742),n(282),n(283),n(84),n(743),n(744),n(139),n(745),n(81),n(746),n(747),n(748),n(749),n(750),n(751),n(58),n(752),n(753),n(140),n(754),n(755),n(59),n(756)},function(t,e,n){"use strict";n(39),n(34),n(57)},function(t,e,n){"use strict";n(34),n(735),n(736),n(57)},function(t,e,n){"use strict";e.a=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}},function(t,e,n){"use strict";e.a=function(t){return t}},function(t,e,n){"use strict";n(271),n(270),n(272)},function(t,e,n){"use strict";function r(t){return t.source}function i(t){return t.target}function a(t,e,n,r,i){t.moveTo(e,n),t.bezierCurveTo(e=(e+r)/2,n,e,i,r,i)}e.a=function(){return function(t){function e(){var e,r=s.a.call(arguments),i=n.apply(this,r),u=a.apply(this,r);if(f||(f=e=Object(o.path)()),t(f,+c.apply(this,(r[0]=i,r)),+h.apply(this,r),+c.apply(this,(r[0]=u,r)),+h.apply(this,r)),e)return f=null,e+""||null}var n=r,a=i,c=l.a,h=l.b,f=null;return e.source=function(t){return arguments.length?(n=t,e):n},e.target=function(t){return arguments.length?(a=t,e):a},e.x=function(t){return arguments.length?(c="function"==typeof t?t:Object(u.a)(+t),e):c},e.y=function(t){return arguments.length?(h="function"==typeof t?t:Object(u.a)(+t),e):h},e.context=function(t){return arguments.length?(f=null==t?null:t,e):f},e}(a)};var o=n(39),s=n(274),u=n(34),l=n(138);n(273)},function(t,e,n){"use strict";n(39),n(275),n(276),n(277),n(278),n(279),n(280),n(281),n(34)},function(t,e,n){"use strict";n(82),n(83)},function(t,e,n){"use strict";n(83)},function(t,e,n){"use strict";function r(t,e){this._basis=new i.a(t),this._beta=e}var i=n(83);r.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],a=e[0],o=t[n]-i,s=e[n]-a,u=-1;++u<=n;)this._basis.point(this._beta*t[u]+(1-this._beta)*(i+(r=u/n)*o),this._beta*e[u]+(1-this._beta)*(a+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}},function t(e){function n(t){return 1===e?new i.a(t):new r(t,e)}return n.beta=function(e){return t(+e)},n}(.85)},function(t,e,n){"use strict";function r(t,e){this._context=t,this._alpha=e}var i=n(282),a=n(82),o=n(139);r.prototype={areaStart:a.a,areaEnd:a.a,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Object(o.a)(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return e?new r(t,e):new i.a(t,0)}return n.alpha=function(e){return t(+e)},n}(.5)},function(t,e,n){"use strict";function r(t,e){this._context=t,this._alpha=e}var i=n(283),a=n(139);r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Object(a.a)(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}},function t(e){function n(t){return e?new r(t,e):new i.a(t,0)}return n.alpha=function(e){return t(+e)},n}(.5)},function(t,e,n){"use strict";n(82)},function(t,e,n){"use strict";function r(t){return t<0?-1:1}function i(t,e,n){var i=t._x1-t._x0,a=e-t._x1,o=(t._y1-t._y0)/(i||a<0&&-0),s=(n-t._y1)/(a||i<0&&-0),u=(o*a+s*i)/(i+a);return(r(o)+r(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(u))||0}function a(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function o(t,e,n){var r=t._x0,i=t._x1,a=t._y1,o=(i-r)/3;t._context.bezierCurveTo(r+o,t._y0+o*e,i-o,a-o*n,i,a)}function s(t){this._context=t}function u(t){this._context=t}s.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:o(this,this._t0,a(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,o(this,a(this,n=i(this,t,e)),n);break;default:o(this,this._t0,n=i(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},((function(t){this._context=new u(t)}).prototype=Object.create(s.prototype)).point=function(t,e){s.prototype.point.call(this,e,t)},u.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}}},function(t,e,n){"use strict"},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(274),n(34),n(58),n(59)},function(t,e,n){"use strict";n(58)},function(t,e,n){"use strict"},function(t,e,n){"use strict";n(58)},function(t,e,n){"use strict";n(58)},function(t,e,n){"use strict";n(140)},function(t,e,n){"use strict";n(59),n(140)},function(t,e,n){"use strict";n(59)},function(t,e,n){function r(t,e){var n=(e=i({},l,e)).as;if(!o(n)||2!==n.length)throw new TypeError("Invalid as: must be an array with two strings!");var r=n[0],s=n[1],c=u(e);if(!o(c)&&2!==c.length)throw new TypeError("Invalid fields: must be an array with two strings!");var h=c[0],f=c[1],d=t.rows,p=d.map(function(t){return[t[h],t[f]]}),g=a.voronoi();e.extend&&g.extent(e.extend),e.size&&g.size(e.size);var v=g(p).polygons();d.forEach(function(t,e){var n=v[e].filter(function(t){return!!t});t[r]=n.map(function(t){return t[0]}),t[s]=n.map(function(t){return t[1]})})}var i=n(4),a=n(758),o=n(3),s=n(2).registerTransform,u=n(7).getFields,l={as:["_x","_y"]};s("diagram.voronoi",r),s("voronoi",r)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(759);n.d(e,"voronoi",function(){return r.a})},function(t,e,n){"use strict";var r=n(760),i=n(761),a=n(60);e.a=function(){function t(t){return new a.d(t.map(function(r,i){var o=[Math.round(e(r,i,t)/a.f)*a.f,Math.round(n(r,i,t)/a.f)*a.f];return o.index=i,o.data=r,o}),o)}var e=i.a,n=i.b,o=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:Object(r.a)(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Object(r.a)(+e),t):n},t.extent=function(e){return arguments.length?(o=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):o&&[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},t.size=function(e){return arguments.length?(o=null==e?null:[[0,0],[+e[0],+e[1]]],t):o&&[o[1][0]-o[0][0],o[1][1]-o[0][1]]},t}},function(t,e,n){"use strict";e.a=function(t){return function(){return t}}},function(t,e,n){"use strict";e.a=function(t){return t[0]},e.b=function(t){return t[1]}},function(t,e,n){"use strict";function r(t){var e=h.pop()||new function(){Object(o.a)(this),this.edge=this.site=this.circle=null};return e.site=t,e}function i(t){Object(u.b)(t),c.a.remove(t),h.push(t),Object(o.a)(t)}function a(t,e){var n=t.site,r=n[0],i=n[1],a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;var s=(n=o.site)[0],u=n[1],l=u-e;if(!l)return s;var c=s-r,h=1/a-1/l,f=c/l;return h?(-f+Math.sqrt(f*f-2*h*(c*c/(-2*l)-u+l/2+i-a/2)))/h+r:(r+s)/2}e.b=function(t){var e=t.circle,n=e.x,r=e.cy,a=[n,r],o=t.P,s=t.N,h=[t];i(t);for(var f=o;f.circle&&Math.abs(n-f.circle.x)<c.f&&Math.abs(r-f.circle.cy)<c.f;)o=f.P,h.unshift(f),i(f),f=o;h.unshift(f),Object(u.b)(f);for(var d=s;d.circle&&Math.abs(n-d.circle.x)<c.f&&Math.abs(r-d.circle.cy)<c.f;)s=d.N,h.push(d),i(d),d=s;h.push(d),Object(u.b)(d);var p,g=h.length;for(p=1;p<g;++p)d=h[p],f=h[p-1],Object(l.d)(d.edge,f.site,d.site,a);f=h[0],(d=h[g-1]).edge=Object(l.c)(f.site,d.site,null,a),Object(u.a)(f),Object(u.a)(d)},e.a=function(t){for(var e,n,i,o,h=t[0],f=t[1],d=c.a._;d;)if((i=a(d,f)-h)>c.f)d=d.L;else{if(!((o=h-function(t,e){var n=t.N;if(n)return a(n,e);var r=t.site;return r[1]===e?r[0]:1/0}(d,f))>c.f)){i>-c.f?(e=d.P,n=d):o>-c.f?(e=d,n=d.N):e=n=d;break}if(!d.R){e=d;break}d=d.R}Object(s.c)(t);var p=r(t);if(c.a.insert(e,p),e||n){if(e===n)return Object(u.b)(e),n=r(e.site),c.a.insert(p,n),p.edge=n.edge=Object(l.c)(e.site,p.site),Object(u.a)(e),void Object(u.a)(n);if(n){Object(u.b)(e),Object(u.b)(n);var g=e.site,v=g[0],m=g[1],y=t[0]-v,_=t[1]-m,b=n.site,x=b[0]-v,w=b[1]-m,S=2*(y*w-_*x),T=y*y+_*_,O=x*x+w*w,M=[(w*T-_*O)/S+v,(y*O-x*T)/S+m];Object(l.d)(n.edge,g,b,M),p.edge=Object(l.c)(g,t,null,M),n.edge=Object(l.c)(t,b,null,M),Object(u.a)(e),Object(u.a)(n)}else p.edge=Object(l.c)(e.site,p.site)}};var o=n(141),s=n(284),u=n(285),l=n(142),c=n(60),h=[]},function(t,e,n){function r(t,e){if(t.dataType!==u)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var n=t.root,r=(e=i({},h,e)).as;if(!o(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var s=void 0;try{s=c(e)}catch(t){console.warn(t)}s&&n.sum(function(t){return t[s]});var l=a.cluster();l.size(e.size),e.nodeSize&&l.nodeSize(e.nodeSize),e.separation&&l.separation(e.separation),l(n);var f=r[0],d=r[1];n.each(function(t){t[f]=t.x,t[d]=t.y})}var i=n(4),a=n(40),o=n(3),s=n(2),u=s.HIERARCHY,l=s.registerTransform,c=n(7).getField,h={field:"value",size:[1,1],nodeSize:null,separation:null,as:["x","y"]};l("hierarchy.cluster",r),l("dendrogram",r)},function(t,e,n){function r(t,e){var n=t.root;if(e=Object.assign({},u,e),t.dataType!==o)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");t.root=i.compactBox(n,e)}var i=n(143),a=n(2),o=a.HIERARCHY,s=a.registerTransform,u={};s("hierarchy.compact-box",r),s("compact-box-tree",r),s("non-layered-tidy-tree",r),s("mindmap-logical",r)},function(t,e,n){function r(t,e){var n=t.root;if(e=Object.assign({},u,e),t.dataType!==o)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");t.root=i.dendrogram(n,e)}var i=n(143),a=n(2),o=a.HIERARCHY,s=a.registerTransform,u={};s("hierarchy.dendrogram",r),s("dendrogram",r)},function(t,e,n){function r(t,e){var n=t.root;if(e=Object.assign({},u,e),t.dataType!==o)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");t.root=i.indented(n,e)}var i=n(143),a=n(2),o=a.HIERARCHY,s=a.registerTransform,u={};s("hierarchy.indented",r),s("indented-tree",r)},function(t,e,n){function r(t,e){if(t.dataType!==u)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var n=t.root,r=(e=i({},h,e)).as;if(!o(r)||3!==r.length)throw new TypeError('Invalid as: it must be an array with 3 strings (e.g. [ "x", "y", "r" ])!');var s=void 0;try{s=c(e)}catch(t){console.warn(t)}s&&n.sum(function(t){return t[s]}).sort(function(t,e){return e[s]-t[s]});var l=a.pack();l.size(e.size),e.padding&&l.padding(e.padding),l(n);var f=r[0],d=r[1],p=r[2];n.each(function(t){t[f]=t.x,t[d]=t.y,t[p]=t.r})}var i=n(4),a=n(40),o=n(3),s=n(2),u=s.HIERARCHY,l=s.registerTransform,c=n(7).getField,h={field:"value",size:[1,1],padding:0,as:["x","y","r"]};l("hierarchy.pack",r),l("hierarchy.circle-packing",r),l("circle-packing",r)},function(t,e,n){function r(t,e){if(t.dataType!==u)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var n=t.root,r=(e=i({},h,e)).as;if(!o(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var s=void 0;try{s=c(e)}catch(t){console.warn(t)}s&&n.sum(function(t){return t[s]});var l=a.partition();l.size(e.size).round(e.round).padding(e.padding),l(n);var f=r[0],d=r[1];n.each(function(t){t[f]=[t.x0,t.x1,t.x1,t.x0],t[d]=[t.y1,t.y1,t.y0,t.y0],["x0","x1","y0","y1"].forEach(function(e){-1===r.indexOf(e)&&delete t[e]})})}var i=n(4),a=n(40),o=n(3),s=n(2),u=s.HIERARCHY,l=s.registerTransform,c=n(7).getField,h={field:"value",size:[1,1],round:!1,padding:0,sort:!0,as:["x","y"]};l("hierarchy.partition",r),l("adjacency",r)},function(t,e,n){function r(t,e){if(t.dataType!==u)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var n=t.root,r=(e=i({},h,e)).as;if(!o(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var s=void 0;try{s=c(e)}catch(t){console.warn(t)}s&&n.sum(function(t){return t[s]});var l=a.tree();l.size(e.size),e.nodeSize&&l.nodeSize(e.nodeSize),e.separation&&l.separation(e.separation),l(n);var f=r[0],d=r[1];n.each(function(t){t[f]=t.x,t[d]=t.y})}var i=n(4),a=n(40),o=n(3),s=n(2),u=s.HIERARCHY,l=s.registerTransform,c=n(7).getField,h={field:"value",size:[1,1],nodeSize:null,separation:null,as:["x","y"]};l("hierarchy.tree",r),l("tree",r)},function(t,e,n){function r(t,e){if(t.dataType!==u)throw new TypeError("Invalid DataView: This transform is for Hierarchy data only!");var n=t.root,r=(e=i({},h,e)).as;if(!o(r)||2!==r.length)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');var s=void 0;try{s=c(e)}catch(t){console.warn(t)}s&&n.sum(function(t){return t[s]});var l=a.treemap();l.tile(a[e.tile]).size(e.size).round(e.round).padding(e.padding).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft),l(n);var f=r[0],d=r[1];n.each(function(t){t[f]=[t.x0,t.x1,t.x1,t.x0],t[d]=[t.y1,t.y1,t.y0,t.y0],["x0","x1","y0","y1"].forEach(function(e){-1===r.indexOf(e)&&delete t[e]})})}var i=n(4),a=n(40),o=n(3),s=n(2),u=s.HIERARCHY,l=s.registerTransform,c=n(7).getField,h={field:"value",tile:"treemapSquarify",size:[1,1],round:!1,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,as:["x","y"]};l("hierarchy.treemap",r),l("treemap",r)},function(t,e,n){function r(t,e){e=i({},l,e);var n=s();["font","fontSize","padding","rotate","size","spiral","timeInterval"].forEach(function(t){e[t]&&n[t](e[t])});var r=u(e),o=r[0],c=r[1];if(!a(o)||!a(c))throw new TypeError('Invalid fields: must be an array with 2 strings (e.g. [ "text", "value" ])!');var h=t.rows.map(function(t){return t.text=t[o],t.value=t[c],t});n.words(h),e.imageMask&&n.createMask(e.imageMask);var f=n.start(),d=f._tags,p=f._bounds;d.forEach(function(t){t.x+=e.size[0]/2,t.y+=e.size[1]/2});var g=e.size,v=g[0],m=g[1],y=f.hasImage;d.push({text:"",value:0,x:y?0:p[0].x,y:y?0:p[0].y,opacity:0}),d.push({text:"",value:0,x:y?v:p[1].x,y:y?m:p[1].y,opacity:0}),t.rows=d,t._tagCloud=f}var i=n(4),a=n(9),o=n(2).registerTransform,s=n(772),u=n(7).getFields,l={fields:["text","value"],font:function(){return"serif"},padding:1,size:[500,500],spiral:"archimedean",timeInterval:500};o("tag-cloud",r),o("word-cloud",r)},function(t,e){function n(t){return t.text}function r(){return"serif"}function i(){return"normal"}function a(t){return t.value}function o(){return 90*~~(2*Math.random())}function s(){return 1}function u(t,e,n,r){if(!e.sprite){var i=t.context,a=t.ratio;i.clearRect(0,0,(m<<5)/a,y/a);var o=0,s=0,u=0,l=n.length;for(--r;++r<l;){e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/a)+"px "+e.font;var c=i.measureText(e.text+"m").width*a,h=e.size<<1;if(e.rotate){var f=Math.sin(e.rotate*v),d=Math.cos(e.rotate*v),p=c*d,g=c*f,_=h*d,b=h*f;c=Math.max(Math.abs(p+b),Math.abs(p-b))+31>>5<<5,h=~~Math.max(Math.abs(g+_),Math.abs(g-_))}else c=c+31>>5<<5;if(h>u&&(u=h),o+c>=m<<5&&(o=0,s+=u,u=0),s+h>=y)break;i.translate((o+(c>>1))/a,(s+(h>>1))/a),e.rotate&&i.rotate(e.rotate*v),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=c,e.height=h,e.xoff=o,e.yoff=s,e.x1=c>>1,e.y1=h>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,o+=c}for(var x=i.getImageData(0,0,(m<<5)/a,y/a).data,w=[];--r>=0;)if((e=n[r]).hasText){for(var S=e.width,T=S>>5,O=e.y1-e.y0,M=0;M<O*T;M++)w[M]=0;if(null==(o=e.xoff))return;s=e.yoff;for(var k=0,C=-1,E=0;E<O;E++){for(var A=0;A<S;A++){var I=x[(s+E)*(m<<5)+(o+A)<<2]?1<<31-A%32:0;w[T*E+(A>>5)]|=I,k|=I}k?C=E:(e.y0++,O--,E--,s++)}e.y1=e.y0+C,e.sprite=w.slice(0,(e.y1-e.y0)*T)}}}function l(t,e,n){for(var r=t.sprite,i=t.width>>5,a=t.x-(i<<4),o=127&a,s=32-o,u=t.y1-t.y0,l=(t.y+t.y0)*(n>>=5)+(a>>5),c=void 0,h=0;h<u;h++){c=0;for(var f=0;f<=i;f++)if((c<<s|(f<i?(c=r[h*i+f])>>>o:0))&e[l+f])return!0;l+=n}return!1}function c(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function h(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function f(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function d(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function p(){return document.createElement("canvas")}function g(t){return"function"==typeof t?t:function(){return t}}var v=Math.PI/180,m=64,y=2048,_={archimedean:f,rectangular:function(t){var e=4*t[0]/t[1],n=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:n+=e;break;case 1:r+=4;break;case 2:n-=e;break;default:r-=4}return[n,r]}}};t.exports=function(){var t=[256,256],e=n,v=r,b=a,x=i,w=i,S=o,T=s,O=f,M=[],k=1/0,C=Math.random,E=p,A={canvas:function(t){return arguments.length?(E=g(t),A):E},start:function(){var n=t[0],r=t[1],i=function(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(m<<5)/e,t.height=y/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}(E()),a=A.board?A.board:d((t[0]>>5)*t[1]),o=M.length,s=[],f=M.map(function(t,n){return t.text=e.call(this,t,n),t.font=v.call(this,t,n),t.style=x.call(this,t,n),t.weight=w.call(this,t,n),t.rotate=S.call(this,t,n),t.size=~~b.call(this,t,n),t.padding=T.call(this,t,n),t}).sort(function(t,e){return e.size-t.size}),p=-1,g=A.board?[{x:0,y:0},{x:n,y:r}]:null;return function(){for(var e=Date.now();Date.now()-e<k&&++p<o;){var d=f[p];d.x=n*(C()+.5)>>1,d.y=r*(C()+.5)>>1,u(i,d,f,p),d.hasText&&function(e,n,r){for(var i=n.x,a=n.y,o=Math.sqrt(t[0]*t[0]+t[1]*t[1]),s=O(t),u=C()<.5?1:-1,c=void 0,f=-u,d=void 0,p=void 0;(c=s(f+=u))&&(d=~~c[0],p=~~c[1],!(Math.min(Math.abs(d),Math.abs(p))>=o));)if(n.x=i+d,n.y=a+p,!(n.x+n.x0<0||n.y+n.y0<0||n.x+n.x1>t[0]||n.y+n.y1>t[1])&&(!r||!l(n,e,t[0]))&&(!r||h(n,r))){for(var g=n.sprite,v=n.width>>5,m=t[0]>>5,y=n.x-(v<<4),_=127&y,b=32-_,x=n.y1-n.y0,w=void 0,S=(n.y+n.y0)*m+(y>>5),T=0;T<x;T++){w=0;for(var M=0;M<=v;M++)e[S+M]|=w<<b|(M<v?(w=g[T*v+M])>>>_:0);S+=m}return delete n.sprite,!0}return!1}(a,d,g)&&(s.push(d),g?A.hasImage||c(g,d):g=[{x:d.x+d.x0,y:d.y+d.y0},{x:d.x+d.x1,y:d.y+d.y1}],d.x-=t[0]>>1,d.y-=t[1]>>1)}A._tags=s,A._bounds=g}(),A},createMask:function(e){var n=document.createElement("canvas"),r=t[0],i=t[1],a=r>>5,o=d((r>>5)*i);n.width=r,n.height=i;var s=n.getContext("2d");s.drawImage(e,0,0,e.width,e.height,0,0,r,i);for(var u=s.getImageData(0,0,r,i).data,l=0;l<i;l++)for(var c=0;c<r;c++){var h=l*r+c<<2;o[a*l+(c>>5)]|=u[h]>=250&&u[h+1]>=250&&u[h+2]>=250?1<<31-c%32:0}A.board=o,A.hasImage=!0},timeInterval:function(t){return arguments.length?(k=null==t?1/0:t,A):k},words:function(t){return arguments.length?(M=t,A):M},size:function(e){return arguments.length?(t=[+e[0],+e[1]],A):t},font:function(t){return arguments.length?(v=g(t),A):v},fontStyle:function(t){return arguments.length?(x=g(t),A):x},fontWeight:function(t){return arguments.length?(w=g(t),A):w},rotate:function(t){return arguments.length?(S=g(t),A):S},text:function(t){return arguments.length?(e=g(t),A):e},spiral:function(t){return arguments.length?(O=_[t]||t,A):O},fontSize:function(t){return arguments.length?(b=g(t),A):b},padding:function(t){return arguments.length?(T=g(t),A):T},random:function(t){return arguments.length?(C=t,A):C}};return A}},function(t,e,n){var r=n(4),i=n(774),a=n(12),o=n(11),s=n(776),u=n(52),l=n(27).sum,c=n(19),h=n(2).registerTransform,f=n(7).getFields,d={fields:["name","value"],rows:5,size:[1,1],scale:1,groupBy:[],maxCount:1e3,gapRatio:.1,as:["x","y"]};h("waffle",function(t,e){e=r({},d,e);var n=f(e),h=n[0],p=n[1],g=e.as,v=g[0],m=g[1],y=e.groupBy,_=c(t.rows,y),b=o(_),x=e.size,w=x[0],S=e.maxCount,T=x[1]/b.length,O=e.rows,M=e.gapRatio,k=[],C=e.scale,E=0,A=0;a(_,function(t){var e=l(s(t,function(t){return t[p]})),n=Math.ceil(e*C/O);e*C>S&&(C=S/e,n=Math.ceil(e*C/O)),A=w/n}),a(_,function(t){var e=[E*T,(E+1)*T],n=(e[1]-e[0])*(1-M)/O,r=0,a=0;i(t,function(t){for(var i=Math.round(t[p]*C),o=0;o<i;o++){a===O&&(a=0,r++);var s=u(t,[h,p].concat(y));s[v]=r*A+A/2,s[m]=a*n+n/2+e[0],s._wStep=A,s._hStep=n,a++,k.push(s)}}),E+=1}),t.rows=k})},function(t,e,n){t.exports=n(775)},function(t,e,n){var r=n(192),i=n(120),a=n(213),o=n(3);t.exports=function(t,e){return(o(t)?r:i)(t,a(e))}},function(t,e,n){var r=n(50),i=n(48),a=n(261),o=n(3);t.exports=function(t,e){return(o(t)?r:a)(t,i(e,3))}},function(t,e,n){function r(t,e){e=i({},g,e);var n=d(e);if(!a(n)||2!==n.length)throw new TypeError("invalid fields: must be an array of 2 strings!");var r=e.as,l=r[0],f=r[1],m=r[2];if(!u(l)||!u(f)||!u(m))throw new TypeError("invalid as: must be an array of 3 strings!");var y=e.method;if(u(y)){if(-1===v.indexOf(y))throw new TypeError("invalid method: "+y+". Must be one of "+v.join(", "));y=h[y]}if(!o(y))throw new TypeError("invalid method: kernel method must be a function!");var _=n[0],b=n[1],x=e.extent,w=x[0],S=x[1];a(w)&&a(S)||(w=t.range(_),S=t.range(b));var T=e.bandwidth,O=T[0],M=T[1];(!s(O)||O<=0||!s(M)||M<=0)&&(O=p(t.getColumn(_)),M=p(t.getColumn(b)));for(var k=c(w,O),C=c(S,M),E=t.rows.length,A=[],I=0;I<k.length;I++)for(var P=0;P<C.length;P++){for(var L=0,D=k[I],j=C[P],R=0;R<E;R++)L+=y((D-t.rows[R][_])/O)*y((j-t.rows[R][b])/M);var N=1/(E*O*M)*L,B={};B[l]=D,B[f]=j,B[m]=N,A.push(B)}t.rows=A}var i=n(4),a=n(3),o=n(13),s=n(132),u=n(9),l=n(11),c=n(133),h=n(286),f=n(2).registerTransform,d=n(7).getFields,p=n(134).silverman,g={as:["x","y","z"],method:"gaussian",extent:[],bandwidth:[]},v=l(h);f("kernel-smooth.density",r),f("kernel.density",r),t.exports={KERNEL_METHODS:v}},function(t,e,n){function r(t){return function(e){return o(e)?e.map(function(e){return t(e)}):t(e)}}function i(t,e){e=a({},y,e);var n=v(e);if(!o(n)||1!==n.length&&2!==n.length)throw new TypeError("invalid fields: must be an array of 1 or 2 strings!");var i=e.as,h=i[0],g=i[1];if(!c(h)||!c(g))throw new TypeError("invalid as: must be an array of 2 strings!");var b=e.method;if(c(b)){if(-1===_.indexOf(b))throw new TypeError("invalid method: "+b+". Must be one of "+_.join(", "));b=p[b]}if(!s(b))throw new TypeError("invalid method: kernel method must be a function!");var x=n[0],w=n[1],S=t.getColumn(x),T=e.extent;o(T)||(T=t.range(x));var O=e.bandwidth;(!l(O)||O<=0)&&(O=m(S));var M=d(T,O),k=S.length,C=(function(t,e,n,r){return t((r-n)/e)}).bind(null,b,O),E=void 0;if(u(w))E=r(function(t){var e=S.map(function(e){return C(t,e)}),n=f(e),r=k*O;return n&&r?n/r:0});else{var A=t.getColumn(w);E=r(function(t){var e=S.map(function(e){return C(t,e)}),n=f(e.map(function(t,e){return t*A[e]})),r=f(e);return n&&r?n/r:0})}var I=M.map(function(t){var e={};return e[h]=t,e[g]=E(t),e});t.rows=I}var a=n(4),o=n(3),s=n(13),u=n(247),l=n(132),c=n(9),h=n(11),f=n(27).sum,d=n(133),p=n(286),g=n(2).registerTransform,v=n(7).getFields,m=n(134).silverman,y={as:["x","y"],method:"gaussian"},_=h(p);g("kernel-smooth.regression",i),g("kernel.regression",i),t.exports={KERNEL_METHODS:_}}])}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Slider=e():t.Slider=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){var r=n(1);window&&!window.G2&&console.err("Please load the G2 script first!"),t.exports=r},function(t,e,n){var r=n(2),i=window&&window.G2,a=i.Chart,o=i.Util,s=i.Global,u=i.G.Canvas,l=o.DomUtil,c=function(t){return"number"==typeof t},h=function(){function t(t){this._initProps(),o.deepMix(this,t);var e=this.container;if(!e)throw new Error("Please specify the container for the Slider!");this.domContainer=o.isString(e)?document.getElementById(e):e,this.handleStyle=o.mix({width:this.height,height:this.height},this.handleStyle),"auto"===this.width&&window.addEventListener("resize",o.wrapBehavior(this,"_initForceFitEvent"))}var e=t.prototype;return e._initProps=function(){this.height=26,this.width="auto",this.padding=s.plotCfg.padding,this.container=null,this.xAxis=null,this.yAxis=null,this.fillerStyle={fill:"#BDCCED",fillOpacity:.3},this.backgroundStyle={stroke:"#CCD6EC",fill:"#CCD6EC",fillOpacity:.3,lineWidth:1},this.range=[0,100],this.layout="horizontal",this.textStyle={fill:"#545454"},this.handleStyle={img:"https://gw.alipayobjects.com/zos/rmsportal/QXtfhORGlDuRvLXFzpsQ.png",width:5},this.backgroundChart={type:["area"],color:"#CCD6EC"}},e._initForceFitEvent=function(){var t=setTimeout(o.wrapBehavior(this,"forceFit"),200);clearTimeout(this.resizeTimer),this.resizeTimer=t},e.forceFit=function(){if(this&&!this.destroyed){var t=l.getWidth(this.domContainer);if(t!==this.domWidth){var e=this.canvas;e.changeSize(t,this.height),this.bgChart&&this.bgChart.changeWidth(t),e.clear(),this._initWidth(),this._initSlider(),this._bindEvent(),e.draw()}}},e._initWidth=function(){var t;t="auto"===this.width?l.getWidth(this.domContainer):this.width,this.domWidth=t;var e=o.toAllPadding(this.padding);"horizontal"===this.layout?(this.plotWidth=t-e[1]-e[3],this.plotPadding=e[3],this.plotHeight=this.height):"vertical"===this.layout&&(this.plotWidth=this.width,this.plotHeight=this.height-e[0]-e[2],this.plotPadding=e[0])},e.render=function(){this._initWidth(),this._initCanvas(),this._initBackground(),this._initSlider(),this._bindEvent(),this.canvas.draw()},e.changeData=function(t){this.data=t,this.repaint()},e.destroy=function(){clearTimeout(this.resizeTimer),this.rangeElement.off("sliderchange"),this.bgChart&&this.bgChart.destroy(),this.canvas.destroy();for(var t=this.domContainer;t.hasChildNodes();)t.removeChild(t.firstChild);window.removeEventListener("resize",o.getWrapBehavior(this,"_initForceFitEvent")),this.destroyed=!0},e.clear=function(){this.canvas.clear(),this.bgChart&&this.bgChart.destroy(),this.bgChart=null,this.scale=null,this.canvas.draw()},e.repaint=function(){this.clear(),this.render()},e._initCanvas=function(){var t=new u({width:this.domWidth,height:this.height,containerDOM:this.domContainer,capture:!1}),e=t.get("el");e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.zIndex=3,this.canvas=t},e._initBackground=function(){var t,e=this.data,n=this.xAxis,r=this.yAxis,i=o.deepMix(((t={})[""+n]={range:[0,1]},t),this.scales);if(!e)throw new Error("Please specify the data!");if(!n)throw new Error("Please specify the xAxis!");if(!r)throw new Error("Please specify the yAxis!");var s=this.backgroundChart,u=s.type,l=s.color;o.isArray(u)||(u=[u]);var c=o.toAllPadding(this.padding),h=new a({container:this.container,width:this.domWidth,height:this.height,padding:[0,c[1],0,c[3]],animate:!1});h.source(e),h.scale(i),h.axis(!1),h.tooltip(!1),h.legend(!1),o.each(u,function(t){h[t]().position(n+"*"+r).color(l).opacity(1)}),h.render(),this.bgChart=h,this.scale="horizontal"===this.layout?h.getXScale():h.getYScales()[0],"vertical"===this.layout&&h.destroy()},e._initRange=function(){var t=this.startRadio,e=this.endRadio,n=this.start,r=this.end,i=this.scale,a=0,o=1;c(t)?a=t:n&&(a=i.scale(i.translate(n))),c(e)?o=e:r&&(o=i.scale(i.translate(r)));var s=this.minSpan,u=this.maxSpan,l=0;if("time"===i.type||"timeCat"===i.type){var h=i.values;l=h[h.length-1]-h[0]}else i.isLinear&&(l=i.max-i.min);l&&s&&(this.minRange=s/l*100),l&&u&&(this.maxRange=u/l*100);var f=[100*a,100*o];return this.range=f,f},e._getHandleValue=function(t){var e=this.range,n=e[1]/100,r=this.scale;return"min"===t?this.start?this.start:r.invert(e[0]/100):this.end?this.end:r.invert(n)},e._initSlider=function(){var t=this.canvas,e=this._initRange(),n=this.scale,i=t.addGroup(r,{middleAttr:this.fillerStyle,range:e,minRange:this.minRange,maxRange:this.maxRange,layout:this.layout,width:this.plotWidth,height:this.plotHeight,backgroundStyle:this.backgroundStyle,textStyle:this.textStyle,handleStyle:this.handleStyle,minText:n.getText(this._getHandleValue("min")),maxText:n.getText(this._getHandleValue("max"))});"horizontal"===this.layout?i.translate(this.plotPadding,0):"vertical"===this.layout&&i.translate(0,this.plotPadding),this.rangeElement=i},e._bindEvent=function(){var t=this;t.rangeElement.on("sliderchange",function(e){var n=e.range;t._updateElement(n[0]/100,n[1]/100)})},e._updateElement=function(t,e){var n=this.scale,r=this.rangeElement,i=r.get("minTextElement"),a=r.get("maxTextElement"),o=n.invert(t),s=n.invert(e),u=n.getText(o),l=n.getText(s);i.attr("text",u),a.attr("text",l),this.start=u,this.end=l,this.onChange&&this.onChange({startText:u,endText:l,startValue:o,endValue:s,startRadio:t,endRadio:e})},t}();t.exports=h},function(t,e){var n=window&&window.G2,r=n.Util,i=r.DomUtil,a=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){return{range:null,middleAttr:null,backgroundElement:null,minHandleElement:null,maxHandleElement:null,middleHandleElement:null,currentTarget:null,layout:"vertical",width:null,height:null,pageX:null,pageY:null}},n._initHandle=function(t){var e,n,i,a=this.addGroup(),o=this.get("layout"),s=this.get("handleStyle"),u=s.img,l=s.width,c=s.height;if("horizontal"===o){var h=s.width;n=a.addShape("Image",{attrs:{x:-h/2,y:0,width:h,height:c,img:u,cursor:i="ew-resize"}}),e=a.addShape("Text",{attrs:r.mix({x:"min"===t?-(h/2+5):h/2+5,y:c/2,textAlign:"min"===t?"end":"start",textBaseline:"middle",text:this.get("min"===t?"minText":"maxText"),cursor:i},this.get("textStyle"))})}else n=a.addShape("Image",{attrs:{x:0,y:-c/2,width:l,height:c,img:u,cursor:i="ns-resize"}}),e=a.addShape("Text",{attrs:r.mix({x:l/2,y:"min"===t?c/2+5:-(c/2+5),textAlign:"center",textBaseline:"middle",text:this.get("min"===t?"minText":"maxText"),cursor:i},this.get("textStyle"))});return this.set(t+"TextElement",e),this.set(t+"IconElement",n),a},n._initSliderBackground=function(){var t=this.addGroup();return t.initTransform(),t.translate(0,0),t.addShape("Rect",{attrs:r.mix({x:0,y:0,width:this.get("width"),height:this.get("height")},this.get("backgroundStyle"))}),t},n._beforeRenderUI=function(){var t=this._initSliderBackground(),e=this._initHandle("min"),n=this._initHandle("max"),r=this.addShape("rect",{attrs:this.get("middleAttr")});this.set("middleHandleElement",r),this.set("minHandleElement",e),this.set("maxHandleElement",n),this.set("backgroundElement",t),t.set("zIndex",0),r.set("zIndex",1),e.set("zIndex",2),n.set("zIndex",2),r.attr("cursor","move"),this.sort()},n._renderUI=function(){"horizontal"===this.get("layout")?this._renderHorizontal():this._renderVertical()},n._transform=function(t){var e=this.get("range"),n=e[0]/100,r=e[1]/100,i=this.get("width"),a=this.get("height"),o=this.get("minHandleElement"),s=this.get("maxHandleElement"),u=this.get("middleHandleElement");o.resetMatrix?(o.resetMatrix(),s.resetMatrix()):(o.initTransform(),s.initTransform()),"horizontal"===t?(u.attr({x:i*n,y:0,width:(r-n)*i,height:a}),o.translate(n*i,0),s.translate(r*i,0)):(u.attr({x:0,y:a*(1-r),width:i,height:(r-n)*a}),o.translate(0,(1-n)*a),s.translate(0,(1-r)*a))},n._renderHorizontal=function(){this._transform("horizontal")},n._renderVertical=function(){this._transform("vertical")},n._bindUI=function(){this.on("mousedown",r.wrapBehavior(this,"_onMouseDown"))},n._isElement=function(t,e){var n=this.get(e);return t===n||!!n.isGroup&&n.get("children").indexOf(t)>-1},n._getRange=function(t,e){var n=t+e;return(n=n>100?100:n)<0?0:n},n._limitRange=function(t,e,n){n[0]=this._getRange(t,n[0]),n[1]=n[0]+e,n[1]>100&&(n[1]=100,n[0]=n[1]-e)},n._updateStatus=function(t,e){var n=this.get("x"===t?"width":"height");t=r.upperFirst(t);var i=this.get("range"),a=this.get("page"+t),o=this.get("currentTarget"),s=this.get("rangeStash"),u="vertical"===this.get("layout")?-1:1,l=e["page"+t],c=(l-a)/n*100*u,h=this.get("minRange"),f=this.get("maxRange");i[1]<=i[0]?(this._isElement(o,"minHandleElement")||this._isElement(o,"maxHandleElement"))&&(i[0]=this._getRange(c,i[0]),i[1]=this._getRange(c,i[0])):(this._isElement(o,"minHandleElement")&&(i[0]=this._getRange(c,i[0]),h&&i[1]-i[0]<=h&&this._limitRange(c,h,i),f&&i[1]-i[0]>=f&&this._limitRange(c,f,i)),this._isElement(o,"maxHandleElement")&&(i[1]=this._getRange(c,i[1]),h&&i[1]-i[0]<=h&&this._limitRange(c,h,i),f&&i[1]-i[0]>=f&&this._limitRange(c,f,i))),this._isElement(o,"middleHandleElement")&&this._limitRange(c,s[1]-s[0],i),this.emit("sliderchange",{range:i}),this.set("page"+t,l),this._renderUI(),this.get("canvas").draw()},n._onMouseDown=function(t){var e=t.currentTarget,n=t.event,r=this.get("range");n.stopPropagation(),n.preventDefault(),this.set("pageX",n.pageX),this.set("pageY",n.pageY),this.set("currentTarget",e),this.set("rangeStash",[r[0],r[1]]),this._bindCanvasEvents()},n._bindCanvasEvents=function(){var t=this.get("canvas").get("containerDOM");this.onMouseMoveListener=i.addEventListener(t,"mousemove",r.wrapBehavior(this,"_onCanvasMouseMove")),this.onMouseUpListener=i.addEventListener(t,"mouseup",r.wrapBehavior(this,"_onCanvasMouseUp")),this.onMouseLeaveListener=i.addEventListener(t,"mouseleave",r.wrapBehavior(this,"_onCanvasMouseUp"))},n._onCanvasMouseMove=function(t){"horizontal"===this.get("layout")?this._updateStatus("x",t):this._updateStatus("y",t)},n._onCanvasMouseUp=function(){this._removeDocumentEvents()},n._removeDocumentEvents=function(){this.onMouseMoveListener.remove(),this.onMouseUpListener.remove(),this.onMouseLeaveListener.remove()},e}(n.G.Group);t.exports=a}])}),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Ajv=t()}(function(){return function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){return i(e[o][1][t]||t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){"use strict";var r=e.exports=function(){this._cache={}};r.prototype.put=function(t,e){this._cache[t]=e},r.prototype.get=function(t){return this._cache[t]},r.prototype.del=function(t){delete this._cache[t]},r.prototype.clear=function(){this._cache={}}},{}],2:[function(t,e,n){"use strict";var r=t("./error_classes").MissingRef;e.exports=function t(e,n,i){var a=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof n&&(i=n,n=void 0);var o=s(e).then(function(){var t=a._addSchema(e,void 0,n);return t.validate||function(t){try{return a._compile(t)}catch(e){if(e instanceof r)return function(e){var i=e.missingSchema;if(l(i))throw new Error("Schema "+i+" is loaded but "+e.missingRef+" cannot be resolved");var o=a._loadingSchemas[i];return o||(o=a._loadingSchemas[i]=a._opts.loadSchema(i)).then(u,u),o.then(function(t){if(!l(i))return s(t).then(function(){l(i)||a.addSchema(t,i,void 0,n)})}).then(function(){return function t(e){try{return a._compile(e)}catch(i){if(i instanceof r)return function(r){var i=r.missingSchema;if(l(i))throw new Error("Schema "+i+" is loaded but "+r.missingRef+" cannot be resolved");var o=a._loadingSchemas[i];return o||(o=a._loadingSchemas[i]=a._opts.loadSchema(i)).then(u,u),o.then(function(t){if(!l(i))return s(t).then(function(){l(i)||a.addSchema(t,i,void 0,n)})}).then(function(){return t(e)});function u(){delete a._loadingSchemas[i]}function l(t){return a._refs[t]||a._schemas[t]}}(i);throw i}}(t)});function u(){delete a._loadingSchemas[i]}function l(t){return a._refs[t]||a._schemas[t]}}(e);throw e}}(t)});return i&&o.then(function(t){i(null,t)},i),o;function s(e){var n=e.$schema;return n&&!a.getSchema(n)?t.call(a,{$ref:n},!0):Promise.resolve()}}},{"./error_classes":3}],3:[function(t,e,n){"use strict";var r=t("./resolve");function i(t,e,n){this.message=n||i.message(t,e),this.missingRef=r.url(t,e),this.missingSchema=r.normalizeId(r.fullPath(this.missingRef))}function a(t){return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}e.exports={Validation:a(function(t){this.message="validation failed",this.errors=t,this.ajv=this.validation=!0}),MissingRef:a(i)},i.message=function(t,e){return"can't resolve reference "+e+" from id "+t}},{"./resolve":6}],4:[function(t,e,n){"use strict";var r=t("./util"),i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,a=[0,31,28,31,30,31,30,31,31,30,31,30,31],o=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,s=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,u=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,l=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,c=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,h=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,f=/^(?:\/(?:[^~/]|~0|~1)*)*$/,d=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,p=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function g(t){return r.copy(g[t="full"==t?"full":"fast"])}function v(t){var e=t.match(i);if(!e)return!1;var n=+e[2],r=+e[3];return n>=1&&n<=12&&r>=1&&r<=(2==n&&function(t){return t%4==0&&(t%100!=0||t%400==0)}(+e[1])?29:a[n])}function m(t,e){var n=t.match(o);if(!n)return!1;var r=n[1],i=n[2],a=n[3];return(r<=23&&i<=59&&a<=59||23==r&&59==i&&60==a)&&(!e||n[5])}e.exports=g,g.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":l,url:c,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:s,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:x,uuid:h,"json-pointer":f,"json-pointer-uri-fragment":d,"relative-json-pointer":p},g.full={date:v,time:m,"date-time":function(t){var e=t.split(y);return 2==e.length&&v(e[0])&&m(e[1],!0)},uri:function(t){return _.test(t)&&u.test(t)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":l,url:c,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&''*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:function(t){return t.length<=255&&s.test(t)},ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:x,uuid:h,"json-pointer":f,"json-pointer-uri-fragment":d,"relative-json-pointer":p};var y=/t|\s/i,_=/\/|:/,b=/[^\\]\\Z/;function x(t){if(b.test(t))return!1;try{return new RegExp(t),!0}catch(t){return!1}}},{"./util":10}],5:[function(t,e,n){"use strict";var r=t("./resolve"),i=t("./util"),a=t("./error_classes"),o=t("fast-json-stable-stringify"),s=t("../dotjs/validate"),u=i.ucs2length,l=t("fast-deep-equal"),c=a.Validation;function h(t,e,n){for(var r=0;r<this._compilations.length;r++){var i=this._compilations[r];if(i.schema==t&&i.root==e&&i.baseId==n)return r}return-1}function f(t,e){return"var pattern"+t+" = new RegExp("+i.toQuotedString(e[t])+");"}function d(t){return"var default"+t+" = defaults["+t+"];"}function p(t,e){return void 0===e[t]?"":"var refVal"+t+" = refVal["+t+"];"}function g(t){return"var customRule"+t+" = customRules["+t+"];"}function v(t,e){if(!t.length)return"";for(var n="",r=0;r<t.length;r++)n+=e(r,t);return n}e.exports=function t(e,n,m,y){var _=this,b=this._opts,x=[void 0],w={},S=[],T={},O=[],M={},k=[],C=(function(t,e,n){var r=h.call(this,t,e,n);return r>=0?{index:r,compiling:!0}:(this._compilations[r=this._compilations.length]={schema:t,root:e,baseId:n},{index:r,compiling:!1})}).call(this,e,n=n||{schema:e,refVal:x,refs:w},y),E=this._compilations[C.index];if(C.compiling)return E.callValidate=function t(){var e=E.validate,n=e.apply(this,arguments);return t.errors=e.errors,n};var A=this._formats,I=this.RULES;try{var P=D(e,n,m,y);E.validate=P;var L=E.callValidate;return L&&(L.schema=P.schema,L.errors=null,L.refs=P.refs,L.refVal=P.refVal,L.root=P.root,L.$async=P.$async,b.sourceCode&&(L.source=P.source)),P}finally{(function(t,e,n){var r=h.call(this,t,e,n);r>=0&&this._compilations.splice(r,1)}).call(this,e,n,y)}function D(e,o,h,m){var y=!o||o&&o.schema==e;if(o.schema!=n.schema)return t.call(_,e,o,h,m);var T,M=!0===e.$async,C=s({isTop:!0,schema:e,isRoot:y,baseId:m,root:o,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:a.MissingRef,RULES:I,validate:s,util:i,resolve:r,resolveRef:j,usePattern:B,useDefault:F,useCustomRule:U,opts:b,formats:A,logger:_.logger,self:_});C=v(x,p)+v(S,f)+v(O,d)+v(k,g)+C,b.processCode&&(C=b.processCode(C));try{T=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",C)(_,I,A,n,x,O,k,l,u,c),x[0]=T}catch(t){throw _.logger.error("Error compiling schema, function code:",C),t}return T.schema=e,T.errors=null,T.refs=w,T.refVal=x,T.root=y?T:o,M&&(T.$async=!0),!0===b.sourceCode&&(T.source={code:C,patterns:S,defaults:O}),T}function j(e,i,a){i=r.url(e,i);var o,s,u=w[i];if(void 0!==u)return N(o=x[u],s="refVal["+u+"]");if(!a&&n.refs){var l=n.refs[i];if(void 0!==l)return s=R(i,o=n.refVal[l]),N(o,s)}s=R(i);var c=r.call(_,D,n,i);if(void 0===c){var h=m&&m[i];h&&(c=r.inlineRef(h,b.inlineRefs)?h:t.call(_,h,n,m,e))}if(void 0!==c)return function(t,e){x[w[t]]=e}(i,c),N(c,s);!function(t){delete w[t]}(i)}function R(t,e){var n=x.length;return x[n]=e,w[t]=n,"refVal"+n}function N(t,e){return"object"==typeof t||"boolean"==typeof t?{code:e,schema:t,inline:!0}:{code:e,$async:t&&!!t.$async}}function B(t){var e=T[t];return void 0===e&&(e=T[t]=S.length,S[e]=t),"pattern"+e}function F(t){switch(typeof t){case"boolean":case"number":return""+t;case"string":return i.toQuotedString(t);case"object":if(null===t)return"null";var e=o(t),n=M[e];return void 0===n&&(n=M[e]=O.length,O[n]=t),"default"+n}}function U(t,e,n,r){var i=t.definition.validateSchema;if(i&&!1!==_._opts.validateSchema&&!i(e)){var a="keyword schema is invalid: "+_.errorsText(i.errors);if("log"!=_._opts.validateSchema)throw new Error(a);_.logger.error(a)}var o,s=t.definition.compile,u=t.definition.inline,l=t.definition.macro;if(s)o=s.call(_,e,n,r);else if(l)o=l.call(_,e,n,r),!1!==b.validateSchema&&_.validateSchema(o,!0);else if(u)o=u.call(_,r,t.keyword,e,n);else if(!(o=t.definition.validate))return;if(void 0===o)throw new Error('custom keyword "'+t.keyword+'"failed to compile');var c=k.length;return k[c]=o,{code:"customRule"+c,validate:o}}}},{"../dotjs/validate":37,"./error_classes":3,"./resolve":6,"./util":10,"fast-deep-equal":41,"fast-json-stable-stringify":42}],6:[function(t,e,n){"use strict";var r=t("uri-js"),i=t("fast-deep-equal"),a=t("./util"),o=t("./schema_obj"),s=t("json-schema-traverse");function u(t,e,n){var r=this._refs[n];if("string"==typeof r){if(!this._refs[r])return u.call(this,t,e,r);r=this._refs[r]}if((r=r||this._schemas[n])instanceof o)return d(r.schema,this._opts.inlineRefs)?r.schema:r.validate||this._compile(r);var i,a,s,c=l.call(this,e,n);return c&&(i=c.schema,e=c.root,s=c.baseId),i instanceof o?a=i.validate||t.call(this,i.schema,e,void 0,s):void 0!==i&&(a=d(i,this._opts.inlineRefs)?i:t.call(this,i,e,void 0,s)),a}function l(t,e){var n=r.parse(e),i=g(n),a=p(this._getId(t.schema));if(0===Object.keys(t.schema).length||i!==a){var s=m(i),u=this._refs[s];if("string"==typeof u)return(function(t,e,n){var r=l.call(this,t,e);if(r){var i=r.schema,a=r.baseId;t=r.root;var o=this._getId(i);return o&&(a=y(a,o)),h.call(this,n,a,i,t)}}).call(this,t,u,n);if(u instanceof o)u.validate||this._compile(u),t=u;else{if(!((u=this._schemas[s])instanceof o))return;if(u.validate||this._compile(u),s==m(e))return{schema:u,root:t,baseId:a};t=u}if(!t.schema)return;a=p(this._getId(t.schema))}return h.call(this,n,a,t.schema,t)}e.exports=u,u.normalizeId=m,u.fullPath=p,u.url=y,u.ids=function(t){var e=m(this._getId(t)),n={"":e},o={"":p(e,!1)},u={},l=this;return s(t,{allKeys:!0},function(t,e,s,c,h,f,d){if(""!==e){var p=l._getId(t),g=n[c],v=o[c]+"/"+h;if(void 0!==d&&(v+="/"+("number"==typeof d?d:a.escapeFragment(d))),"string"==typeof p){p=g=m(g?r.resolve(g,p):p);var y=l._refs[p];if("string"==typeof y&&(y=l._refs[y]),y&&y.schema){if(!i(t,y.schema))throw new Error('id "'+p+'" resolves to more than one schema')}else if(p!=m(v))if("#"==p[0]){if(u[p]&&!i(t,u[p]))throw new Error('id "'+p+'" resolves to more than one schema');u[p]=t}else l._refs[p]=v}n[e]=g,o[e]=v}}),u},u.inlineRef=d,u.schema=l;var c=a.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function h(t,e,n,r){if(t.fragment=t.fragment||"","/"==t.fragment.slice(0,1)){for(var i=t.fragment.split("/"),o=1;o<i.length;o++){var s=i[o];if(s){if(void 0===(n=n[s=a.unescapeFragment(s)]))break;var u;if(!c[s]&&((u=this._getId(n))&&(e=y(e,u)),n.$ref)){var h=y(e,n.$ref),f=l.call(this,r,h);f&&(n=f.schema,r=f.root,e=f.baseId)}}}return void 0!==n&&n!==r.schema?{schema:n,root:r,baseId:e}:void 0}}var f=a.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function d(t,e){return!1!==e&&(void 0===e||!0===e?function t(e){var n;if(Array.isArray(e)){for(var r=0;r<e.length;r++)if("object"==typeof(n=e[r])&&!t(n))return!1}else for(var i in e){if("$ref"==i)return!1;if("object"==typeof(n=e[i])&&!t(n))return!1}return!0}(t):e?function t(e){var n,r=0;if(Array.isArray(e)){for(var i=0;i<e.length;i++)if("object"==typeof(n=e[i])&&(r+=t(n)),r==1/0)return 1/0}else for(var a in e){if("$ref"==a)return 1/0;if(f[a])r++;else if("object"==typeof(n=e[a])&&(r+=t(n)+1),r==1/0)return 1/0}return r}(t)<=e:void 0)}function p(t,e){return!1!==e&&(t=m(t)),g(r.parse(t))}function g(t){return r.serialize(t).split("#")[0]+"#"}var v=/#\/?$/;function m(t){return t?t.replace(v,""):""}function y(t,e){return e=m(e),r.resolve(t,e)}},{"./schema_obj":8,"./util":10,"fast-deep-equal":41,"json-schema-traverse":43,"uri-js":44}],7:[function(t,e,n){"use strict";var r=t("../dotjs"),i=t("./util").toHash;e.exports=function(){var t=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],e=["type","$comment"];return t.all=i(e),t.types=i(["number","integer","string","array","object","boolean","null"]),t.forEach(function(n){n.rules=n.rules.map(function(n){var i;if("object"==typeof n){var a=Object.keys(n)[0];i=n[a],n=a,i.forEach(function(n){e.push(n),t.all[n]=!0})}return e.push(n),t.all[n]={keyword:n,code:r[n],implements:i}}),t.all.$comment={keyword:"$comment",code:r.$comment},n.type&&(t.types[n.type]=n)}),t.keywords=i(e.concat(["$schema","$id","id","$data","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),t.custom={},t}},{"../dotjs":26,"./util":10}],8:[function(t,e,n){"use strict";var r=t("./util");e.exports=function(t){r.copy(t,this)}},{"./util":10}],9:[function(t,e,n){"use strict";e.exports=function(t){for(var e,n=0,r=t.length,i=0;i<r;)n++,(e=t.charCodeAt(i++))>=55296&&e<=56319&&i<r&&56320==(64512&(e=t.charCodeAt(i)))&&i++;return n}},{}],10:[function(t,e,n){"use strict";function r(t,e,n){var r=n?" !== ":" === ",i=n?" || ":" && ",a=n?"!":"",o=n?"":"!";switch(t){case"null":return e+r+"null";case"array":return a+"Array.isArray("+e+")";case"object":return"("+a+e+i+"typeof "+e+r+'"object"'+i+o+"Array.isArray("+e+"))";case"integer":return"(typeof "+e+r+'"number"'+i+o+"("+e+" % 1)"+i+e+r+e+")";default:return"typeof "+e+r+'"'+t+'"'}}e.exports={copy:function(t,e){for(var n in e=e||{},t)e[n]=t[n];return e},checkDataType:r,checkDataTypes:function(t,e){switch(t.length){case 1:return r(t[0],e,!0);default:var n="",i=a(t);for(var o in i.array&&i.object&&(n=i.null?"(":"(!"+e+" || ",n+="typeof "+e+' !== "object")',delete i.null,delete i.array,delete i.object),i.number&&delete i.integer,i)n+=(n?" && ":"")+r(o,e,!0);return n}},coerceToTypes:function(t,e){if(Array.isArray(e)){for(var n=[],r=0;r<e.length;r++){var a=e[r];i[a]?n[n.length]=a:"array"===t&&"array"===a&&(n[n.length]=a)}if(n.length)return n}else{if(i[e])return[e];if("array"===t&&"array"===e)return["array"]}},toHash:a,getProperty:u,escapeQuotes:l,equal:t("fast-deep-equal"),ucs2length:t("./ucs2length"),varOccurences:function(t,e){var n=t.match(new RegExp(e+="[^0-9]","g"));return n?n.length:0},varReplace:function(t,e,n){return e+="([^0-9])",n=n.replace(/\$/g,"$$$$"),t.replace(new RegExp(e,"g"),n+"$1")},cleanUpCode:function(t){return t.replace(c,"").replace(h,"").replace(f,"if (!($1))")},finalCleanUpCode:function(t,e){var n=t.match(d);return n&&2==n.length&&(t=e?t.replace(g,"").replace(y,_):t.replace(p,"").replace(v,m)),(n=t.match(b))&&3===n.length?t.replace(x,""):t},schemaHasRules:function(t,e){if("boolean"==typeof t)return!t;for(var n in t)if(e[n])return!0},schemaHasRulesExcept:function(t,e,n){if("boolean"==typeof t)return!t&&"not"!=n;for(var r in t)if(r!=n&&e[r])return!0},toQuotedString:w,getPathExpr:function(t,e,n,r){return O(t,n?"'/' + "+e+(r?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):r?"'[' + "+e+" + ']'":"'[\\'' + "+e+" + '\\']'")},getPath:function(t,e,n){return O(t,w(n?"/"+M(e):u(e)))},getData:function(t,e,n){var r,i,a,o;if(""===t)return"rootData";if("/"==t[0]){if(!S.test(t))throw new Error("Invalid JSON-pointer: "+t);i=t,a="rootData"}else{if(!(o=t.match(T)))throw new Error("Invalid JSON-pointer: "+t);if(r=+o[1],"#"==(i=o[2])){if(r>=e)throw new Error("Cannot access property/index "+r+" levels up, current level is "+e);return n[e-r]}if(r>e)throw new Error("Cannot access data "+r+" levels up, current level is "+e);if(a="data"+(e-r||""),!i)return a}for(var s=a,l=i.split("/"),c=0;c<l.length;c++){var h=l[c];h&&(s+=" && "+(a+=u(k(h))))}return s},unescapeFragment:function(t){return k(decodeURIComponent(t))},unescapeJsonPointer:k,escapeFragment:function(t){return encodeURIComponent(M(t))},escapeJsonPointer:M};var i=a(["string","number","integer","boolean","null"]);function a(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=!0;return e}var o=/^[a-z$_][a-z$_0-9]*$/i,s=/'|\\/g;function u(t){return"number"==typeof t?"["+t+"]":o.test(t)?"."+t:"['"+l(t)+"']"}function l(t){return t.replace(s,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var c=/else\s*{\s*}/g,h=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,f=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g,d=/[^v.]errors/g,p=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,g=/var errors = 0;|var vErrors = null;/g,v="return errors === 0;",m="validate.errors = null; return true;",y=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,_="return data;",b=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,x=/if \(rootData === undefined\) rootData = data;/;function w(t){return"'"+l(t)+"'"}var S=/^\/(?:[^~]|~0|~1)*$/,T=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function O(t,e){return'""'==t?e:(t+" + "+e).replace(/' \+ '/g,"")}function M(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}function k(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}},{"./ucs2length":9,"fast-deep-equal":41}],11:[function(t,e,n){"use strict";var r=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(t,e){for(var n=0;n<e.length;n++){t=JSON.parse(JSON.stringify(t));var i,a=e[n].split("/"),o=t;for(i=1;i<a.length;i++)o=o[a[i]];for(i=0;i<r.length;i++){var s=r[i],u=o[s];u&&(o[s]={anyOf:[u,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]})}}return t}},{}],12:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r,i=" ",a=t.level,o=t.dataLevel,s=t.schema[e],u=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,h="data"+(o||""),f=t.opts.$data&&s&&s.$data;f?(i+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",r="schema"+a):r=s;var d="maximum"==e,p=d?"exclusiveMaximum":"exclusiveMinimum",g=t.schema[p],v=t.opts.$data&&g&&g.$data,m=d?"<":">",y=d?">":"<",_=void 0;if(v){var b,x=t.util.getData(g.$data,o,t.dataPathArr),w="exclusive"+a,S="exclType"+a,T="exclIsNumber"+a,O="' + "+(k="op"+a)+" + '";i+=" var schemaExcl"+a+" = "+x+"; ",i+=" var "+w+"; var "+S+" = typeof "+(x="schemaExcl"+a)+"; if ("+S+" != 'boolean' && "+S+" != 'undefined' && "+S+" != 'number') { ",_=p,(b=b||[]).push(i),i="",!1!==t.createErrors?(i+=" { keyword: '"+(_||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: {} ",!1!==t.opts.messages&&(i+=" , message: '"+p+" should be boolean' "),t.opts.verbose&&(i+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var M=i;i=b.pop(),i+=!t.compositeRule&&c?t.async?" throw new ValidationError(["+M+"]); ":" validate.errors = ["+M+"]; return false; ":" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } else if ( ",f&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" "+S+" == 'number' ? ( ("+w+" = "+r+" === undefined || "+x+" "+m+"= "+r+") ? "+h+" "+y+"= "+x+" : "+h+" "+y+" "+r+" ) : ( ("+w+" = "+x+" === true) ? "+h+" "+y+"= "+r+" : "+h+" "+y+" "+r+" ) || "+h+" !== "+h+") { var op"+a+" = "+w+" ? '"+m+"' : '"+m+"='; ",void 0===s&&(_=p,l=t.errSchemaPath+"/"+p,r=x,f=v)}else if(O=m,(T="number"==typeof g)&&f){var k="'"+O+"'";i+=" if ( ",f&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" ( "+r+" === undefined || "+g+" "+m+"= "+r+" ? "+h+" "+y+"= "+g+" : "+h+" "+y+" "+r+" ) || "+h+" !== "+h+") { "}else T&&void 0===s?(w=!0,_=p,l=t.errSchemaPath+"/"+p,r=g,y+="="):(T&&(r=Math[d?"min":"max"](g,s)),g===(!T||r)?(w=!0,_=p,l=t.errSchemaPath+"/"+p,y+="="):(w=!1,O+="=")),k="'"+O+"'",i+=" if ( ",f&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" "+h+" "+y+" "+r+" || "+h+" !== "+h+") { ";return _=_||e,(b=b||[]).push(i),i="",!1!==t.createErrors?(i+=" { keyword: '"+(_||"_limit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { comparison: "+k+", limit: "+r+", exclusive: "+w+" } ",!1!==t.opts.messages&&(i+=" , message: 'should be "+O+" ",i+=f?"' + "+r:r+"'"),t.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ",M=i,i=b.pop(),i+=!t.compositeRule&&c?t.async?" throw new ValidationError(["+M+"]); ":" validate.errors = ["+M+"]; return false; ":" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",c&&(i+=" else { "),i}},{}],13:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r,i=" ",a=t.level,o=t.dataLevel,s=t.schema[e],u=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,h="data"+(o||""),f=t.opts.$data&&s&&s.$data;f?(i+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",r="schema"+a):r=s,i+="if ( ",f&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" "+h+".length "+("maxItems"==e?">":"<")+" "+r+") { ";var d=e,p=p||[];p.push(i),i="",!1!==t.createErrors?(i+=" { keyword: '"+(d||"_limitItems")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { limit: "+r+" } ",!1!==t.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxItems"==e?"more":"fewer",i+=" than ",i+=f?"' + "+r+" + '":""+s,i+=" items' "),t.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var g=i;return i=p.pop(),i+=!t.compositeRule&&c?t.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",c&&(i+=" else { "),i}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r,i=" ",a=t.level,o=t.dataLevel,s=t.schema[e],u=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,h="data"+(o||""),f=t.opts.$data&&s&&s.$data;f?(i+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",r="schema"+a):r=s,i+="if ( ",f&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=!1===t.opts.unicode?" "+h+".length ":" ucs2length("+h+") ",i+=" "+("maxLength"==e?">":"<")+" "+r+") { ";var d=e,p=p||[];p.push(i),i="",!1!==t.createErrors?(i+=" { keyword: '"+(d||"_limitLength")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { limit: "+r+" } ",!1!==t.opts.messages&&(i+=" , message: 'should NOT be ",i+="maxLength"==e?"longer":"shorter",i+=" than ",i+=f?"' + "+r+" + '":""+s,i+=" characters' "),t.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var g=i;return i=p.pop(),i+=!t.compositeRule&&c?t.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",c&&(i+=" else { "),i}},{}],15:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r,i=" ",a=t.level,o=t.dataLevel,s=t.schema[e],u=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,h="data"+(o||""),f=t.opts.$data&&s&&s.$data;f?(i+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",r="schema"+a):r=s,i+="if ( ",f&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),i+=" Object.keys("+h+").length "+("maxProperties"==e?">":"<")+" "+r+") { ";var d=e,p=p||[];p.push(i),i="",!1!==t.createErrors?(i+=" { keyword: '"+(d||"_limitProperties")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { limit: "+r+" } ",!1!==t.opts.messages&&(i+=" , message: 'should NOT have ",i+="maxProperties"==e?"more":"fewer",i+=" than ",i+=f?"' + "+r+" + '":""+s,i+=" properties' "),t.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var g=i;return i=p.pop(),i+=!t.compositeRule&&c?t.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",c&&(i+=" else { "),i}},{}],16:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=" ",i=t.schema[e],a=t.schemaPath+t.util.getProperty(e),o=t.errSchemaPath+"/"+e,s=!t.opts.allErrors,u=t.util.copy(t),l="";u.level++;var c="valid"+u.level,h=u.baseId,f=!0,d=i;if(d)for(var p,g=-1,v=d.length-1;g<v;)p=d[g+=1],t.util.schemaHasRules(p,t.RULES.all)&&(f=!1,u.schema=p,u.schemaPath=a+"["+g+"]",u.errSchemaPath=o+"/"+g,r+="  "+t.validate(u)+" ",u.baseId=h,s&&(r+=" if ("+c+") { ",l+="}"));return s&&(r+=f?" if (true) { ":" "+l.slice(0,-1)+" "),t.util.cleanUpCode(r)}},{}],17:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=" ",i=t.level,a=t.dataLevel,o=t.schema[e],s=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(a||""),h="valid"+i,f="errs__"+i,d=t.util.copy(t),p="";d.level++;var g="valid"+d.level;if(o.every(function(e){return t.util.schemaHasRules(e,t.RULES.all)})){var v=d.baseId;r+=" var "+f+" = errors; var "+h+" = false;  ";var m=t.compositeRule;t.compositeRule=d.compositeRule=!0;var y=o;if(y)for(var _,b=-1,x=y.length-1;b<x;)_=y[b+=1],d.schema=_,d.schemaPath=s+"["+b+"]",d.errSchemaPath=u+"/"+b,r+="  "+t.validate(d)+" ",d.baseId=v,r+=" "+h+" = "+h+" || "+g+"; if (!"+h+") { ",p+="}";t.compositeRule=d.compositeRule=m,r+=" "+p+" if (!"+h+") {   var err =   ",!1!==t.createErrors?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: {} ",!1!==t.opts.messages&&(r+=" , message: 'should match some schema in anyOf' "),t.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(r+=t.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } ",t.opts.allErrors&&(r+=" } "),r=t.util.cleanUpCode(r)}else l&&(r+=" if (true) { ");return r}},{}],18:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=" ",i=t.errSchemaPath+"/"+e,a=t.util.toQuotedString(t.schema[e]);return!0===t.opts.$comment?r+=" console.log("+a+");":"function"==typeof t.opts.$comment&&(r+=" self._opts.$comment("+a+", "+t.util.toQuotedString(i)+", validate.root.schema);"),r}},{}],19:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=" ",i=t.level,a=t.dataLevel,o=t.schema[e],s=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(a||""),h="valid"+i,f=t.opts.$data&&o&&o.$data;f&&(r+=" var schema"+i+" = "+t.util.getData(o.$data,a,t.dataPathArr)+"; "),f||(r+=" var schema"+i+" = validate.schema"+s+";"),r+="var "+h+" = equal("+c+", schema"+i+"); if (!"+h+") {   ";var d=d||[];d.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { allowedValue: schema"+i+" } ",!1!==t.opts.messages&&(r+=" , message: 'should be equal to constant' "),t.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var p=r;return r=d.pop(),r+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",l&&(r+=" else { "),r}},{}],20:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=" ",i=t.level,a=t.dataLevel,o=t.schema[e],s=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(a||""),h="valid"+i,f="errs__"+i,d=t.util.copy(t);d.level++;var p="valid"+d.level,g="i"+i,v=d.dataLevel=t.dataLevel+1,m="data"+v,y=t.baseId,_=t.util.schemaHasRules(o,t.RULES.all);if(r+="var "+f+" = errors;var "+h+";",_){var b=t.compositeRule;t.compositeRule=d.compositeRule=!0,d.schema=o,d.schemaPath=s,d.errSchemaPath=u,r+=" var "+p+" = false; for (var "+g+" = 0; "+g+" < "+c+".length; "+g+"++) { ",d.errorPath=t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers,!0);var x=c+"["+g+"]";d.dataPathArr[v]=g;var w=t.validate(d);d.baseId=y,t.util.varOccurences(w,m)<2?r+=" "+t.util.varReplace(w,m,x)+" ":r+=" var "+m+" = "+x+"; "+w+" ",r+=" if ("+p+") break; }  ",t.compositeRule=d.compositeRule=b,r+="  if (!"+p+") {"}else r+=" if ("+c+".length == 0) {";var S=S||[];S.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: {} ",!1!==t.opts.messages&&(r+=" , message: 'should contain a valid item' "),t.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var T=r;return r=S.pop(),r+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+T+"]); ":" validate.errors = ["+T+"]; return false; ":" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",_&&(r+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; } "),t.opts.allErrors&&(r+=" } "),t.util.cleanUpCode(r)}},{}],21:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r,i,a=" ",o=t.level,s=t.dataLevel,u=t.schema[e],l=t.schemaPath+t.util.getProperty(e),c=t.errSchemaPath+"/"+e,h=!t.opts.allErrors,f="data"+(s||""),d="valid"+o,p="errs__"+o,g=t.opts.$data&&u&&u.$data;g?(a+=" var schema"+o+" = "+t.util.getData(u.$data,s,t.dataPathArr)+"; ",i="schema"+o):i=u;var v,m,y,_,b,x="definition"+o,w=this.definition,S="";if(g&&w.$data){var T=w.validateSchema;a+=" var "+x+" = RULES.custom['"+e+"'].definition; var "+(b="keywordValidate"+o)+" = "+x+".validate;"}else{if(!(_=t.useCustomRule(this,u,t.schema,t)))return;i="validate.schema"+l,b=_.code,v=w.compile,m=w.inline,y=w.macro}var O=b+".errors",M="i"+o,k="ruleErr"+o,C=w.async;if(C&&!t.async)throw new Error("async keyword in sync schema");if(m||y||(a+=O+" = null;"),a+="var "+p+" = errors;var "+d+";",g&&w.$data&&(S+="}",a+=" if ("+i+" === undefined) { "+d+" = true; } else { ",T&&(S+="}",a+=" "+d+" = "+x+".validateSchema("+i+"); if ("+d+") { ")),m)a+=w.statements?" "+_.validate+" ":" "+d+" = "+_.validate+"; ";else if(y){var E=t.util.copy(t);S="",E.level++;var A="valid"+E.level;E.schema=_.validate,E.schemaPath="";var I=t.compositeRule;t.compositeRule=E.compositeRule=!0;var P=t.validate(E).replace(/validate\.schema/g,b);t.compositeRule=E.compositeRule=I,a+=" "+P}else{(R=R||[]).push(a),a="",a+="  "+b+".call( ",a+=t.opts.passContext?"this":"self",a+=v||!1===w.schema?" , "+f+" ":" , "+i+" , "+f+" , validate.schema"+t.schemaPath+" ",a+=" , (dataPath || '')",'""'!=t.errorPath&&(a+=" + "+t.errorPath);var L=s?"data"+(s-1||""):"parentData",D=s?t.dataPathArr[s]:"parentDataProperty",j=a+=" , "+L+" , "+D+" , rootData )  ";a=R.pop(),!1===w.errors?(a+=" "+d+" = ",C&&(a+="await "),a+=j+"; "):a+=C?" var "+(O="customErrors"+o)+" = null; try { "+d+" = await "+j+"; } catch (e) { "+d+" = false; if (e instanceof ValidationError) "+O+" = e.errors; else throw e; } ":" "+O+" = null; "+d+" = "+j+"; "}if(w.modifying&&(a+=" if ("+L+") "+f+" = "+L+"["+D+"];"),a+=""+S,w.valid)h&&(a+=" if (true) { ");else{var R;a+=" if ( ",void 0===w.valid?(a+=" !",a+=y?""+A:""+d):a+=" "+!w.valid+" ",a+=") { ",r=this.keyword,(R=R||[]).push(a),a="",(R=R||[]).push(a),a="",!1!==t.createErrors?(a+=" { keyword: '"+(r||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { keyword: '"+this.keyword+"' } ",!1!==t.opts.messages&&(a+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),t.opts.verbose&&(a+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),a+=" } "):a+=" {} ";var N=a;a=R.pop();var B=a+=!t.compositeRule&&h?t.async?" throw new ValidationError(["+N+"]); ":" validate.errors = ["+N+"]; return false; ":" var err = "+N+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";a=R.pop(),m?w.errors?"full"!=w.errors&&(a+="  for (var "+M+"="+p+"; "+M+"<errors; "+M+"++) { var "+k+" = vErrors["+M+"]; if ("+k+".dataPath === undefined) "+k+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+k+".schemaPath === undefined) { "+k+'.schemaPath = "'+c+'"; } ',t.opts.verbose&&(a+=" "+k+".schema = "+i+"; "+k+".data = "+f+"; "),a+=" } "):!1===w.errors?a+=" "+B+" ":(a+=" if ("+p+" == errors) { "+B+" } else {  for (var "+M+"="+p+"; "+M+"<errors; "+M+"++) { var "+k+" = vErrors["+M+"]; if ("+k+".dataPath === undefined) "+k+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+k+".schemaPath === undefined) { "+k+'.schemaPath = "'+c+'"; } ',t.opts.verbose&&(a+=" "+k+".schema = "+i+"; "+k+".data = "+f+"; "),a+=" } } "):y?(a+="   var err =   ",!1!==t.createErrors?(a+=" { keyword: '"+(r||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { keyword: '"+this.keyword+"' } ",!1!==t.opts.messages&&(a+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),t.opts.verbose&&(a+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),a+=" } "):a+=" {} ",a+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&h&&(a+=t.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; ")):!1===w.errors?a+=" "+B+" ":(a+=" if (Array.isArray("+O+")) { if (vErrors === null) vErrors = "+O+"; else vErrors = vErrors.concat("+O+"); errors = vErrors.length;  for (var "+M+"="+p+"; "+M+"<errors; "+M+"++) { var "+k+" = vErrors["+M+"]; if ("+k+".dataPath === undefined) "+k+".dataPath = (dataPath || '') + "+t.errorPath+";  "+k+'.schemaPath = "'+c+'";  ',t.opts.verbose&&(a+=" "+k+".schema = "+i+"; "+k+".data = "+f+"; "),a+=" } } else { "+B+" } "),a+=" } ",h&&(a+=" else { ")}return a}},{}],22:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=" ",i=t.level,a=t.dataLevel,o=t.schema[e],s=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(a||""),h="errs__"+i,f=t.util.copy(t),d="";f.level++;var p="valid"+f.level,g={},v={},m=t.opts.ownProperties;for(x in o){var y=o[x],_=Array.isArray(y)?v:g;_[x]=y}r+="var "+h+" = errors;";var b=t.errorPath;for(var x in r+="var missing"+i+";",v)if((_=v[x]).length){if(r+=" if ( "+c+t.util.getProperty(x)+" !== undefined ",m&&(r+=" && Object.prototype.hasOwnProperty.call("+c+", '"+t.util.escapeQuotes(x)+"') "),l){r+=" && ( ";var w=_;if(w)for(var S=-1,T=w.length-1;S<T;)A=w[S+=1],S&&(r+=" || "),r+=" ( ( "+(D=c+(L=t.util.getProperty(A)))+" === undefined ",m&&(r+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+t.util.escapeQuotes(A)+"') "),r+=") && (missing"+i+" = "+t.util.toQuotedString(t.opts.jsonPointers?A:L)+") ) ";r+=")) {  ";var O="missing"+i,M="' + "+O+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(b,O,!0):b+" + "+O);var k=k||[];k.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { property: '"+t.util.escapeQuotes(x)+"', missingProperty: '"+M+"', depsCount: "+_.length+", deps: '"+t.util.escapeQuotes(1==_.length?_[0]:_.join(", "))+"' } ",!1!==t.opts.messages&&(r+=" , message: 'should have ",r+=1==_.length?"property "+t.util.escapeQuotes(_[0]):"properties "+t.util.escapeQuotes(_.join(", ")),r+=" when property "+t.util.escapeQuotes(x)+" is present' "),t.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var C=r;r=k.pop(),r+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+C+"]); ":" validate.errors = ["+C+"]; return false; ":" var err = "+C+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var E=_;if(E)for(var A,I=-1,P=E.length-1;I<P;){A=E[I+=1];var L=t.util.getProperty(A),D=(M=t.util.escapeQuotes(A),c+L);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(b,A,t.opts.jsonPointers)),r+=" if ( "+D+" === undefined ",m&&(r+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+t.util.escapeQuotes(A)+"') "),r+=") {  var err =   ",!1!==t.createErrors?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { property: '"+t.util.escapeQuotes(x)+"', missingProperty: '"+M+"', depsCount: "+_.length+", deps: '"+t.util.escapeQuotes(1==_.length?_[0]:_.join(", "))+"' } ",!1!==t.opts.messages&&(r+=" , message: 'should have ",r+=1==_.length?"property "+t.util.escapeQuotes(_[0]):"properties "+t.util.escapeQuotes(_.join(", ")),r+=" when property "+t.util.escapeQuotes(x)+" is present' "),t.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",l&&(d+="}",r+=" else { ")}t.errorPath=b;var j=f.baseId;for(var x in g)t.util.schemaHasRules(y=g[x],t.RULES.all)&&(r+=" "+p+" = true; if ( "+c+t.util.getProperty(x)+" !== undefined ",m&&(r+=" && Object.prototype.hasOwnProperty.call("+c+", '"+t.util.escapeQuotes(x)+"') "),r+=") { ",f.schema=y,f.schemaPath=s+t.util.getProperty(x),f.errSchemaPath=u+"/"+t.util.escapeFragment(x),r+="  "+t.validate(f)+" ",f.baseId=j,r+=" }  ",l&&(r+=" if ("+p+") { ",d+="}"));return l&&(r+="   "+d+" if ("+h+" == errors) {"),t.util.cleanUpCode(r)}},{}],23:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=" ",i=t.level,a=t.dataLevel,o=t.schema[e],s=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(a||""),h="valid"+i,f=t.opts.$data&&o&&o.$data;f&&(r+=" var schema"+i+" = "+t.util.getData(o.$data,a,t.dataPathArr)+"; ");var d="i"+i,p="schema"+i;f||(r+=" var "+p+" = validate.schema"+s+";"),r+="var "+h+";",f&&(r+=" if (schema"+i+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+i+")) "+h+" = false; else {"),r+=h+" = false;for (var "+d+"=0; "+d+"<"+p+".length; "+d+"++) if (equal("+c+", "+p+"["+d+"])) { "+h+" = true; break; }",f&&(r+="  }  "),r+=" if (!"+h+") {   ";var g=g||[];g.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { allowedValues: schema"+i+" } ",!1!==t.opts.messages&&(r+=" , message: 'should be equal to one of the allowed values' "),t.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var v=r;return r=g.pop(),r+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+v+"]); ":" validate.errors = ["+v+"]; return false; ":" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",l&&(r+=" else { "),r}},{}],24:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=" ",i=t.level,a=t.dataLevel,o=t.schema[e],s=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(a||"");if(!1===t.opts.format)return l&&(r+=" if (true) { "),r;var h,f=t.opts.$data&&o&&o.$data;f?(r+=" var schema"+i+" = "+t.util.getData(o.$data,a,t.dataPathArr)+"; ",h="schema"+i):h=o;var d=t.opts.unknownFormats,p=Array.isArray(d);if(f)r+=" var "+(g="format"+i)+" = formats["+h+"]; var "+(v="isObject"+i)+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+(m="formatType"+i)+" = "+v+" && "+g+".type || 'string'; if ("+v+") { ",t.async&&(r+=" var async"+i+" = "+g+".async; "),r+=" "+g+" = "+g+".validate; } if (  ",f&&(r+=" ("+h+" !== undefined && typeof "+h+" != 'string') || "),r+=" (","ignore"!=d&&(r+=" ("+h+" && !"+g+" ",p&&(r+=" && self._opts.unknownFormats.indexOf("+h+") == -1 "),r+=") || "),r+=" ("+g+" && "+m+" == '"+n+"' && !(typeof "+g+" == 'function' ? ",r+=t.async?" (async"+i+" ? await "+g+"("+c+") : "+g+"("+c+")) ":" "+g+"("+c+") ",r+=" : "+g+".test("+c+"))))) {";else{var g;if(!(g=t.formats[o])){if("ignore"==d)return t.logger.warn('unknown format "'+o+'" ignored in schema at path "'+t.errSchemaPath+'"'),l&&(r+=" if (true) { "),r;if(p&&d.indexOf(o)>=0)return l&&(r+=" if (true) { "),r;throw new Error('unknown format "'+o+'" is used in schema at path "'+t.errSchemaPath+'"')}var v,m=(v="object"==typeof g&&!(g instanceof RegExp)&&g.validate)&&g.type||"string";if(v){var y=!0===g.async;g=g.validate}if(m!=n)return l&&(r+=" if (true) { "),r;if(y){if(!t.async)throw new Error("async format in sync schema");r+=" if (!(await "+(_="formats"+t.util.getProperty(o)+".validate")+"("+c+"))) { "}else{r+=" if (! ";var _="formats"+t.util.getProperty(o);v&&(_+=".validate"),r+="function"==typeof g?" "+_+"("+c+") ":" "+_+".test("+c+") ",r+=") { "}}var b=b||[];b.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { format:  ",r+=f?""+h:""+t.util.toQuotedString(o),r+="  } ",!1!==t.opts.messages&&(r+=" , message: 'should match format \"",r+=f?"' + "+h+" + '":""+t.util.escapeQuotes(o),r+="\"' "),t.opts.verbose&&(r+=" , schema:  ",r+=f?"validate.schema"+s:""+t.util.toQuotedString(o),r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var x=r;return r=b.pop(),r+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+x+"]); ":" validate.errors = ["+x+"]; return false; ":" var err = "+x+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",l&&(r+=" else { "),r}},{}],25:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=" ",i=t.level,a=t.dataLevel,o=t.schema[e],s=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(a||""),h="valid"+i,f="errs__"+i,d=t.util.copy(t);d.level++;var p="valid"+d.level,g=t.schema.then,v=t.schema.else,m=void 0!==g&&t.util.schemaHasRules(g,t.RULES.all),y=void 0!==v&&t.util.schemaHasRules(v,t.RULES.all),_=d.baseId;if(m||y){var b;d.createErrors=!1,d.schema=o,d.schemaPath=s,d.errSchemaPath=u,r+=" var "+f+" = errors; var "+h+" = true;  ";var x=t.compositeRule;t.compositeRule=d.compositeRule=!0,r+="  "+t.validate(d)+" ",d.baseId=_,d.createErrors=!0,r+="  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }  ",t.compositeRule=d.compositeRule=x,m?(r+=" if ("+p+") {  ",d.schema=t.schema.then,d.schemaPath=t.schemaPath+".then",d.errSchemaPath=t.errSchemaPath+"/then",r+="  "+t.validate(d)+" ",d.baseId=_,r+=" "+h+" = "+p+"; ",m&&y?r+=" var "+(b="ifClause"+i)+" = 'then'; ":b="'then'",r+=" } ",y&&(r+=" else { ")):r+=" if (!"+p+") { ",y&&(d.schema=t.schema.else,d.schemaPath=t.schemaPath+".else",d.errSchemaPath=t.errSchemaPath+"/else",r+="  "+t.validate(d)+" ",d.baseId=_,r+=" "+h+" = "+p+"; ",m&&y?r+=" var "+(b="ifClause"+i)+" = 'else'; ":b="'else'",r+=" } "),r+=" if (!"+h+") {   var err =   ",!1!==t.createErrors?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { failingKeyword: "+b+" } ",!1!==t.opts.messages&&(r+=" , message: 'should match \"' + "+b+" + '\" schema' "),t.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(r+=t.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),r+=" }   ",l&&(r+=" else { "),r=t.util.cleanUpCode(r)}else l&&(r+=" if (true) { ");return r}},{}],26:[function(t,e,n){"use strict";e.exports={$ref:t("./ref"),allOf:t("./allOf"),anyOf:t("./anyOf"),$comment:t("./comment"),const:t("./const"),contains:t("./contains"),dependencies:t("./dependencies"),enum:t("./enum"),format:t("./format"),if:t("./if"),items:t("./items"),maximum:t("./_limit"),minimum:t("./_limit"),maxItems:t("./_limitItems"),minItems:t("./_limitItems"),maxLength:t("./_limitLength"),minLength:t("./_limitLength"),maxProperties:t("./_limitProperties"),minProperties:t("./_limitProperties"),multipleOf:t("./multipleOf"),not:t("./not"),oneOf:t("./oneOf"),pattern:t("./pattern"),properties:t("./properties"),propertyNames:t("./propertyNames"),required:t("./required"),uniqueItems:t("./uniqueItems"),validate:t("./validate")}},{"./_limit":12,"./_limitItems":13,"./_limitLength":14,"./_limitProperties":15,"./allOf":16,"./anyOf":17,"./comment":18,"./const":19,"./contains":20,"./dependencies":22,"./enum":23,"./format":24,"./if":25,"./items":27,"./multipleOf":28,"./not":29,"./oneOf":30,"./pattern":31,"./properties":32,"./propertyNames":33,"./ref":34,"./required":35,"./uniqueItems":36,"./validate":37}],27:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=" ",i=t.level,a=t.dataLevel,o=t.schema[e],s=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(a||""),h="valid"+i,f="errs__"+i,d=t.util.copy(t),p="";d.level++;var g="valid"+d.level,v="i"+i,m=d.dataLevel=t.dataLevel+1,y="data"+m,_=t.baseId;if(r+="var "+f+" = errors;var "+h+";",Array.isArray(o)){var b=t.schema.additionalItems;if(!1===b){r+=" "+h+" = "+c+".length <= "+o.length+"; ";var x=u;u=t.errSchemaPath+"/additionalItems",r+="  if (!"+h+") {   ";var w=w||[];w.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { limit: "+o.length+" } ",!1!==t.opts.messages&&(r+=" , message: 'should NOT have more than "+o.length+" items' "),t.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var S=r;r=w.pop(),r+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+S+"]); ":" validate.errors = ["+S+"]; return false; ":" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",u=x,l&&(p+="}",r+=" else { ")}var T=o;if(T)for(var O,M=-1,k=T.length-1;M<k;)if(O=T[M+=1],t.util.schemaHasRules(O,t.RULES.all)){r+=" "+g+" = true; if ("+c+".length > "+M+") { ";var C=c+"["+M+"]";d.schema=O,d.schemaPath=s+"["+M+"]",d.errSchemaPath=u+"/"+M,d.errorPath=t.util.getPathExpr(t.errorPath,M,t.opts.jsonPointers,!0),d.dataPathArr[m]=M;var E=t.validate(d);d.baseId=_,t.util.varOccurences(E,y)<2?r+=" "+t.util.varReplace(E,y,C)+" ":r+=" var "+y+" = "+C+"; "+E+" ",r+=" }  ",l&&(r+=" if ("+g+") { ",p+="}")}"object"==typeof b&&t.util.schemaHasRules(b,t.RULES.all)&&(d.schema=b,d.schemaPath=t.schemaPath+".additionalItems",d.errSchemaPath=t.errSchemaPath+"/additionalItems",r+=" "+g+" = true; if ("+c+".length > "+o.length+") {  for (var "+v+" = "+o.length+"; "+v+" < "+c+".length; "+v+"++) { ",d.errorPath=t.util.getPathExpr(t.errorPath,v,t.opts.jsonPointers,!0),C=c+"["+v+"]",d.dataPathArr[m]=v,E=t.validate(d),d.baseId=_,t.util.varOccurences(E,y)<2?r+=" "+t.util.varReplace(E,y,C)+" ":r+=" var "+y+" = "+C+"; "+E+" ",l&&(r+=" if (!"+g+") break; "),r+=" } }  ",l&&(r+=" if ("+g+") { ",p+="}"))}else t.util.schemaHasRules(o,t.RULES.all)&&(d.schema=o,d.schemaPath=s,d.errSchemaPath=u,r+="  for (var "+v+" = 0; "+v+" < "+c+".length; "+v+"++) { ",d.errorPath=t.util.getPathExpr(t.errorPath,v,t.opts.jsonPointers,!0),C=c+"["+v+"]",d.dataPathArr[m]=v,E=t.validate(d),d.baseId=_,t.util.varOccurences(E,y)<2?r+=" "+t.util.varReplace(E,y,C)+" ":r+=" var "+y+" = "+C+"; "+E+" ",l&&(r+=" if (!"+g+") break; "),r+=" }");return l&&(r+=" "+p+" if ("+f+" == errors) {"),t.util.cleanUpCode(r)}},{}],28:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r,i=" ",a=t.level,o=t.dataLevel,s=t.schema[e],u=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,h="data"+(o||""),f=t.opts.$data&&s&&s.$data;f?(i+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",r="schema"+a):r=s,i+="var division"+a+";if (",f&&(i+=" "+r+" !== undefined && ( typeof "+r+" != 'number' || "),i+=" (division"+a+" = "+h+" / "+r+", ",i+=t.opts.multipleOfPrecision?" Math.abs(Math.round(division"+a+") - division"+a+") > 1e-"+t.opts.multipleOfPrecision+" ":" division"+a+" !== parseInt(division"+a+") ",i+=" ) ",f&&(i+="  )  "),i+=" ) {   ";var d=d||[];d.push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { multipleOf: "+r+" } ",!1!==t.opts.messages&&(i+=" , message: 'should be multiple of ",i+=f?"' + "+r:r+"'"),t.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var p=i;return i=d.pop(),i+=!t.compositeRule&&c?t.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",c&&(i+=" else { "),i}},{}],29:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=" ",i=t.level,a=t.dataLevel,o=t.schema[e],s=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(a||""),h="errs__"+i,f=t.util.copy(t);f.level++;var d="valid"+f.level;if(t.util.schemaHasRules(o,t.RULES.all)){f.schema=o,f.schemaPath=s,f.errSchemaPath=u,r+=" var "+h+" = errors;  ";var p,g=t.compositeRule;t.compositeRule=f.compositeRule=!0,f.createErrors=!1,f.opts.allErrors&&(p=f.opts.allErrors,f.opts.allErrors=!1),r+=" "+t.validate(f)+" ",f.createErrors=!0,p&&(f.opts.allErrors=p),t.compositeRule=f.compositeRule=g,r+=" if ("+d+") {   ";var v=v||[];v.push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: {} ",!1!==t.opts.messages&&(r+=" , message: 'should NOT be valid' "),t.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var m=r;r=v.pop(),r+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",t.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",!1!==t.createErrors?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: {} ",!1!==t.opts.messages&&(r+=" , message: 'should NOT be valid' "),t.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(r+=" if (false) { ");return r}},{}],30:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=" ",i=t.level,a=t.dataLevel,o=t.schema[e],s=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(a||""),h="valid"+i,f="errs__"+i,d=t.util.copy(t),p="";d.level++;var g="valid"+d.level,v=d.baseId,m="prevValid"+i,y="passingSchemas"+i;r+="var "+f+" = errors , "+m+" = false , "+h+" = false , "+y+" = null; ";var _=t.compositeRule;t.compositeRule=d.compositeRule=!0;var b=o;if(b)for(var x,w=-1,S=b.length-1;w<S;)x=b[w+=1],t.util.schemaHasRules(x,t.RULES.all)?(d.schema=x,d.schemaPath=s+"["+w+"]",d.errSchemaPath=u+"/"+w,r+="  "+t.validate(d)+" ",d.baseId=v):r+=" var "+g+" = true; ",w&&(r+=" if ("+g+" && "+m+") { "+h+" = false; "+y+" = ["+y+", "+w+"]; } else { ",p+="}"),r+=" if ("+g+") { "+h+" = "+m+" = true; "+y+" = "+w+"; }";return t.compositeRule=d.compositeRule=_,r+=p+"if (!"+h+") {   var err =   ",!1!==t.createErrors?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { passingSchemas: "+y+" } ",!1!==t.opts.messages&&(r+=" , message: 'should match exactly one schema in oneOf' "),t.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(r+=t.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),r+="} else {  errors = "+f+"; if (vErrors !== null) { if ("+f+") vErrors.length = "+f+"; else vErrors = null; }",t.opts.allErrors&&(r+=" } "),r}},{}],31:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r,i=" ",a=t.level,o=t.dataLevel,s=t.schema[e],u=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,h="data"+(o||""),f=t.opts.$data&&s&&s.$data;f?(i+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",r="schema"+a):r=s;var d=f?"(new RegExp("+r+"))":t.usePattern(s);i+="if ( ",f&&(i+=" ("+r+" !== undefined && typeof "+r+" != 'string') || "),i+=" !"+d+".test("+h+") ) {   ";var p=p||[];p.push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { pattern:  ",i+=f?""+r:""+t.util.toQuotedString(s),i+="  } ",!1!==t.opts.messages&&(i+=" , message: 'should match pattern \"",i+=f?"' + "+r+" + '":""+t.util.escapeQuotes(s),i+="\"' "),t.opts.verbose&&(i+=" , schema:  ",i+=f?"validate.schema"+u:""+t.util.toQuotedString(s),i+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var g=i;return i=p.pop(),i+=!t.compositeRule&&c?t.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+="} ",c&&(i+=" else { "),i}},{}],32:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=" ",i=t.level,a=t.dataLevel,o=t.schema[e],s=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(a||""),h="errs__"+i,f=t.util.copy(t),d="";f.level++;var p="valid"+f.level,g="key"+i,v="idx"+i,m=f.dataLevel=t.dataLevel+1,y="data"+m,_="dataProperties"+i,b=Object.keys(o||{}),x=t.schema.patternProperties||{},w=Object.keys(x),S=t.schema.additionalProperties,T=b.length||w.length,O=!1===S,M="object"==typeof S&&Object.keys(S).length,k=t.opts.removeAdditional,C=O||M||k,E=t.opts.ownProperties,A=t.baseId,I=t.schema.required;if(I&&(!t.opts.$data||!I.$data)&&I.length<t.opts.loopRequired)var P=t.util.toHash(I);if(r+="var "+h+" = errors;var "+p+" = true;",E&&(r+=" var "+_+" = undefined;"),C){if(r+=E?" "+_+" = "+_+" || Object.keys("+c+"); for (var "+v+"=0; "+v+"<"+_+".length; "+v+"++) { var "+g+" = "+_+"["+v+"]; ":" for (var "+g+" in "+c+") { ",T){if(r+=" var isAdditional"+i+" = !(false ",b.length)if(b.length>8)r+=" || validate.schema"+s+".hasOwnProperty("+g+") ";else{var L=b;if(L)for(var D=-1,j=L.length-1;D<j;)X=L[D+=1],r+=" || "+g+" == "+t.util.toQuotedString(X)+" "}if(w.length){var R=w;if(R)for(var N=-1,B=R.length-1;N<B;)rt=R[N+=1],r+=" || "+t.usePattern(rt)+".test("+g+") "}r+=" ); if (isAdditional"+i+") { "}if("all"==k)r+=" delete "+c+"["+g+"]; ";else{var F=t.errorPath,U="' + "+g+" + '";if(t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers)),O)if(k)r+=" delete "+c+"["+g+"]; ";else{r+=" "+p+" = false; ";var z=u;u=t.errSchemaPath+"/additionalProperties",(tt=tt||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { additionalProperty: '"+U+"' } ",!1!==t.opts.messages&&(r+=" , message: '",r+=t.opts._errorDataPathProperty?"is an invalid additional property":"should NOT have additional properties",r+="' "),t.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var V=r;r=tt.pop(),r+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+V+"]); ":" validate.errors = ["+V+"]; return false; ":" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=z,l&&(r+=" break; ")}else if(M)if("failing"==k){r+=" var "+h+" = errors;  ";var H=t.compositeRule;t.compositeRule=f.compositeRule=!0,f.schema=S,f.schemaPath=t.schemaPath+".additionalProperties",f.errSchemaPath=t.errSchemaPath+"/additionalProperties",f.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers);var G=c+"["+g+"]";f.dataPathArr[m]=g;var W=t.validate(f);f.baseId=A,t.util.varOccurences(W,y)<2?r+=" "+t.util.varReplace(W,y,G)+" ":r+=" var "+y+" = "+G+"; "+W+" ",r+=" if (!"+p+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+c+"["+g+"]; }  ",t.compositeRule=f.compositeRule=H}else f.schema=S,f.schemaPath=t.schemaPath+".additionalProperties",f.errSchemaPath=t.errSchemaPath+"/additionalProperties",f.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers),G=c+"["+g+"]",f.dataPathArr[m]=g,W=t.validate(f),f.baseId=A,t.util.varOccurences(W,y)<2?r+=" "+t.util.varReplace(W,y,G)+" ":r+=" var "+y+" = "+G+"; "+W+" ",l&&(r+=" if (!"+p+") break; ");t.errorPath=F}T&&(r+=" } "),r+=" }  ",l&&(r+=" if ("+p+") { ",d+="}")}var q=t.opts.useDefaults&&!t.compositeRule;if(b.length){var Y=b;if(Y)for(var X,$=-1,Z=Y.length-1;$<Z;){if(X=Y[$+=1],t.util.schemaHasRules(ot=o[X],t.RULES.all)){var Q=t.util.getProperty(X),K=(G=c+Q,q&&void 0!==ot.default);if(f.schema=ot,f.schemaPath=s+Q,f.errSchemaPath=u+"/"+t.util.escapeFragment(X),f.errorPath=t.util.getPath(t.errorPath,X,t.opts.jsonPointers),f.dataPathArr[m]=t.util.toQuotedString(X),W=t.validate(f),f.baseId=A,t.util.varOccurences(W,y)<2){W=t.util.varReplace(W,y,G);var J=G}else J=y,r+=" var "+y+" = "+G+"; ";if(K)r+=" "+W+" ";else{if(P&&P[X]){r+=" if ( "+J+" === undefined ",E&&(r+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+t.util.escapeQuotes(X)+"') "),r+=") { "+p+" = false; ",F=t.errorPath,z=u;var tt,et=t.util.escapeQuotes(X);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(F,X,t.opts.jsonPointers)),u=t.errSchemaPath+"/required",(tt=tt||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+et+"' } ",!1!==t.opts.messages&&(r+=" , message: '",r+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+et+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",V=r,r=tt.pop(),r+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+V+"]); ":" validate.errors = ["+V+"]; return false; ":" var err = "+V+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u=z,t.errorPath=F,r+=" } else { "}else l?(r+=" if ( "+J+" === undefined ",E&&(r+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+t.util.escapeQuotes(X)+"') "),r+=") { "+p+" = true; } else { "):(r+=" if ("+J+" !== undefined ",E&&(r+=" &&   Object.prototype.hasOwnProperty.call("+c+", '"+t.util.escapeQuotes(X)+"') "),r+=" ) { ");r+=" "+W+" } "}}l&&(r+=" if ("+p+") { ",d+="}")}}if(w.length){var nt=w;if(nt)for(var rt,it=-1,at=nt.length-1;it<at;){var ot;rt=nt[it+=1],t.util.schemaHasRules(ot=x[rt],t.RULES.all)&&(f.schema=ot,f.schemaPath=t.schemaPath+".patternProperties"+t.util.getProperty(rt),f.errSchemaPath=t.errSchemaPath+"/patternProperties/"+t.util.escapeFragment(rt),r+=E?" "+_+" = "+_+" || Object.keys("+c+"); for (var "+v+"=0; "+v+"<"+_+".length; "+v+"++) { var "+g+" = "+_+"["+v+"]; ":" for (var "+g+" in "+c+") { ",r+=" if ("+t.usePattern(rt)+".test("+g+")) { ",f.errorPath=t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers),G=c+"["+g+"]",f.dataPathArr[m]=g,W=t.validate(f),f.baseId=A,t.util.varOccurences(W,y)<2?r+=" "+t.util.varReplace(W,y,G)+" ":r+=" var "+y+" = "+G+"; "+W+" ",l&&(r+=" if (!"+p+") break; "),r+=" } ",l&&(r+=" else "+p+" = true; "),r+=" }  ",l&&(r+=" if ("+p+") { ",d+="}"))}}return l&&(r+=" "+d+" if ("+h+" == errors) {"),t.util.cleanUpCode(r)}},{}],33:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=" ",i=t.level,a=t.dataLevel,o=t.schema[e],s=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(a||""),h="errs__"+i,f=t.util.copy(t);f.level++;var d="valid"+f.level;if(r+="var "+h+" = errors;",t.util.schemaHasRules(o,t.RULES.all)){f.schema=o,f.schemaPath=s,f.errSchemaPath=u;var p="key"+i,g="idx"+i,v="i"+i,m="' + "+p+" + '",y="data"+(f.dataLevel=t.dataLevel+1),_="dataProperties"+i,b=t.opts.ownProperties,x=t.baseId;b&&(r+=" var "+_+" = undefined; "),r+=b?" "+_+" = "+_+" || Object.keys("+c+"); for (var "+g+"=0; "+g+"<"+_+".length; "+g+"++) { var "+p+" = "+_+"["+g+"]; ":" for (var "+p+" in "+c+") { ",r+=" var startErrs"+i+" = errors; ";var w=p,S=t.compositeRule;t.compositeRule=f.compositeRule=!0;var T=t.validate(f);f.baseId=x,t.util.varOccurences(T,y)<2?r+=" "+t.util.varReplace(T,y,w)+" ":r+=" var "+y+" = "+w+"; "+T+" ",t.compositeRule=f.compositeRule=S,r+=" if (!"+d+") { for (var "+v+"=startErrs"+i+"; "+v+"<errors; "+v+"++) { vErrors["+v+"].propertyName = "+p+"; }   var err =   ",!1!==t.createErrors?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { propertyName: '"+m+"' } ",!1!==t.opts.messages&&(r+=" , message: 'property name \\'"+m+"\\' is invalid' "),t.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(r+=t.async?" throw new ValidationError(vErrors); ":" validate.errors = vErrors; return false; "),l&&(r+=" break; "),r+=" } }"}return l&&(r+="  if ("+h+" == errors) {"),t.util.cleanUpCode(r)}},{}],34:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r,i,a=" ",o=t.dataLevel,s=t.schema[e],u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(o||""),h="valid"+t.level;if("#"==s||"#/"==s)t.isRoot?(r=t.async,i="validate"):(r=!0===t.root.schema.$async,i="root.refVal[0]");else{var f=t.resolveRef(t.baseId,s,t.isRoot);if(void 0===f){var d=t.MissingRefError.message(t.baseId,s);if("fail"==t.opts.missingRefs){t.logger.error(d),(m=m||[]).push(a),a="",!1!==t.createErrors?(a+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { ref: '"+t.util.escapeQuotes(s)+"' } ",!1!==t.opts.messages&&(a+=" , message: 'can\\'t resolve reference "+t.util.escapeQuotes(s)+"' "),t.opts.verbose&&(a+=" , schema: "+t.util.toQuotedString(s)+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),a+=" } "):a+=" {} ";var p=a;a=m.pop(),a+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+p+"]); ":" validate.errors = ["+p+"]; return false; ":" var err = "+p+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(a+=" if (false) { ")}else{if("ignore"!=t.opts.missingRefs)throw new t.MissingRefError(t.baseId,s,d);t.logger.warn(d),l&&(a+=" if (true) { ")}}else if(f.inline){var g=t.util.copy(t);g.level++;var v="valid"+g.level;g.schema=f.schema,g.schemaPath="",g.errSchemaPath=s,a+=" "+t.validate(g).replace(/validate\.schema/g,f.code)+" ",l&&(a+=" if ("+v+") { ")}else r=!0===f.$async||t.async&&!1!==f.$async,i=f.code}if(i){var m;(m=m||[]).push(a),a="",a+=t.opts.passContext?" "+i+".call(this, ":" "+i+"( ",a+=" "+c+", (dataPath || '')",'""'!=t.errorPath&&(a+=" + "+t.errorPath);var y=a+=" , "+(o?"data"+(o-1||""):"parentData")+" , "+(o?t.dataPathArr[o]:"parentDataProperty")+", rootData)  ";if(a=m.pop(),r){if(!t.async)throw new Error("async schema referenced by sync schema");l&&(a+=" var "+h+"; "),a+=" try { await "+y+"; ",l&&(a+=" "+h+" = true; "),a+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",l&&(a+=" "+h+" = false; "),a+=" } ",l&&(a+=" if ("+h+") { ")}else a+=" if (!"+y+") { if (vErrors === null) vErrors = "+i+".errors; else vErrors = vErrors.concat("+i+".errors); errors = vErrors.length; } ",l&&(a+=" else { ")}return a}},{}],35:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=" ",i=t.level,a=t.dataLevel,o=t.schema[e],s=t.schemaPath+t.util.getProperty(e),u=t.errSchemaPath+"/"+e,l=!t.opts.allErrors,c="data"+(a||""),h="valid"+i,f=t.opts.$data&&o&&o.$data;f&&(r+=" var schema"+i+" = "+t.util.getData(o.$data,a,t.dataPathArr)+"; ");var d="schema"+i;if(!f)if(o.length<t.opts.loopRequired&&t.schema.properties&&Object.keys(t.schema.properties).length){var p=[],g=o;if(g)for(var v,m=-1,y=g.length-1;m<y;){v=g[m+=1];var _=t.schema.properties[v];_&&t.util.schemaHasRules(_,t.RULES.all)||(p[p.length]=v)}}else p=o;if(f||p.length){var b=t.errorPath,x=f||p.length>=t.opts.loopRequired,w=t.opts.ownProperties;if(l)if(r+=" var missing"+i+"; ",x){f||(r+=" var "+d+" = validate.schema"+s+"; ");var S="' + "+(E="schema"+i+"["+(k="i"+i)+"]")+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(b,E,t.opts.jsonPointers)),r+=" var "+h+" = true; ",f&&(r+=" if (schema"+i+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+i+")) "+h+" = false; else {"),r+=" for (var "+k+" = 0; "+k+" < "+d+".length; "+k+"++) { "+h+" = "+c+"["+d+"["+k+"]] !== undefined ",w&&(r+=" &&   Object.prototype.hasOwnProperty.call("+c+", "+d+"["+k+"]) "),r+="; if (!"+h+") break; } ",f&&(r+="  }  "),r+="  if (!"+h+") {   ",(O=O||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==t.opts.messages&&(r+=" , message: '",r+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+S+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ";var T=r;r=O.pop(),r+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+T+"]); ":" validate.errors = ["+T+"]; return false; ":" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var O,M=p;if(M)for(var k=-1,C=M.length-1;k<C;)I=M[k+=1],k&&(r+=" || "),r+=" ( ( "+(j=c+(D=t.util.getProperty(I)))+" === undefined ",w&&(r+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+t.util.escapeQuotes(I)+"') "),r+=") && (missing"+i+" = "+t.util.toQuotedString(t.opts.jsonPointers?I:D)+") ) ";r+=") {  ",S="' + "+(E="missing"+i)+" + '",t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(b,E,!0):b+" + "+E),(O=O||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==t.opts.messages&&(r+=" , message: '",r+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+S+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",T=r,r=O.pop(),r+=!t.compositeRule&&l?t.async?" throw new ValidationError(["+T+"]); ":" validate.errors = ["+T+"]; return false; ":" var err = "+T+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(x){var E;f||(r+=" var "+d+" = validate.schema"+s+"; "),S="' + "+(E="schema"+i+"["+(k="i"+i)+"]")+" + '",t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(b,E,t.opts.jsonPointers)),f&&(r+=" if ("+d+" && !Array.isArray("+d+")) {  var err =   ",!1!==t.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==t.opts.messages&&(r+=" , message: '",r+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+S+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+d+" !== undefined) { "),r+=" for (var "+k+" = 0; "+k+" < "+d+".length; "+k+"++) { if ("+c+"["+d+"["+k+"]] === undefined ",w&&(r+=" || ! Object.prototype.hasOwnProperty.call("+c+", "+d+"["+k+"]) "),r+=") {  var err =   ",!1!==t.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==t.opts.messages&&(r+=" , message: '",r+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+S+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",f&&(r+="  }  ")}else{var A=p;if(A)for(var I,P=-1,L=A.length-1;P<L;){I=A[P+=1];var D=t.util.getProperty(I),j=(S=t.util.escapeQuotes(I),c+D);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(b,I,t.opts.jsonPointers)),r+=" if ( "+j+" === undefined ",w&&(r+=" || ! Object.prototype.hasOwnProperty.call("+c+", '"+t.util.escapeQuotes(I)+"') "),r+=") {  var err =   ",!1!==t.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { missingProperty: '"+S+"' } ",!1!==t.opts.messages&&(r+=" , message: '",r+=t.opts._errorDataPathProperty?"is a required property":"should have required property \\'"+S+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+s+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+c+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t.errorPath=b}else l&&(r+=" if (true) {");return r}},{}],36:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r,i=" ",a=t.level,o=t.dataLevel,s=t.schema[e],u=t.schemaPath+t.util.getProperty(e),l=t.errSchemaPath+"/"+e,c=!t.opts.allErrors,h="data"+(o||""),f="valid"+a,d=t.opts.$data&&s&&s.$data;if(d?(i+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",r="schema"+a):r=s,(s||d)&&!1!==t.opts.uniqueItems){d&&(i+=" var "+f+"; if ("+r+" === false || "+r+" === undefined) "+f+" = true; else if (typeof "+r+" != 'boolean') "+f+" = false; else { "),i+=" var i = "+h+".length , "+f+" = true , j; if (i > 1) { ";var p=t.schema.items&&t.schema.items.type,g=Array.isArray(p);!p||"object"==p||"array"==p||g&&(p.indexOf("object")>=0||p.indexOf("array")>=0)?i+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+h+"[i], "+h+"[j])) { "+f+" = false; break outer; } } } ":(i+=" var itemIndices = {}, item; for (;i--;) { var item = "+h+"[i]; ",i+=" if ("+t.util["checkDataType"+(g?"s":"")](p,"item",!0)+") continue; ",g&&(i+=" if (typeof item == 'string') item = '\"' + item; "),i+=" if (typeof itemIndices[item] == 'number') { "+f+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "),i+=" } ",d&&(i+="  }  "),i+=" if (!"+f+") {   ";var v=v||[];v.push(i),i="",!1!==t.createErrors?(i+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(l)+" , params: { i: i, j: j } ",!1!==t.opts.messages&&(i+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),t.opts.verbose&&(i+=" , schema:  ",i+=d?"validate.schema"+u:""+s,i+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),i+=" } "):i+=" {} ";var m=i;i=v.pop(),i+=!t.compositeRule&&c?t.async?" throw new ValidationError(["+m+"]); ":" validate.errors = ["+m+"]; return false; ":" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",i+=" } ",c&&(i+=" else { ")}else c&&(i+=" if (true) { ");return i}},{}],37:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r="",i=!0===t.schema.$async,a=t.util.schemaHasRulesExcept(t.schema,t.RULES.all,"$ref"),o=t.self._getId(t.schema);if(t.isTop&&(r+=" var validate = ",i&&(t.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",o&&(t.opts.sourceCode||t.opts.processCode)&&(r+=" /*# sourceURL="+o+" */ ")),"boolean"==typeof t.schema||!a&&!t.schema.$ref){var s=t.level,u=t.dataLevel,l=t.schema["false schema"],c=t.schemaPath+t.util.getProperty("false schema"),h=t.errSchemaPath+"/false schema",f=!t.opts.allErrors,d="data"+(u||""),p="valid"+s;if(!1===t.schema){t.isTop?f=!0:r+=" var "+p+" = false; ",(V=V||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: {} ",!1!==t.opts.messages&&(r+=" , message: 'boolean schema is false' "),t.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ";var g=r;r=V.pop(),r+=!t.compositeRule&&f?t.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else r+=t.isTop?i?" return data; ":" validate.errors = null; return true; ":" var "+p+" = true; ";return t.isTop&&(r+=" }; return validate; "),r}if(t.isTop){var v=t.isTop;s=t.level=0,u=t.dataLevel=0,d="data",t.rootId=t.resolve.fullPath(t.self._getId(t.root.schema)),t.baseId=t.baseId||t.rootId,delete t.isTop,t.dataPathArr=[void 0],r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{if(s=t.level,d="data"+((u=t.dataLevel)||""),o&&(t.baseId=t.resolve.url(t.baseId,o)),i&&!t.async)throw new Error("async schema in sync schema");r+=" var errs_"+s+" = errors;"}p="valid"+s,f=!t.opts.allErrors;var m="",y="",_=t.schema.type,b=Array.isArray(_);if(b&&1==_.length&&(_=_[0],b=!1),t.schema.$ref&&a){if("fail"==t.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+t.errSchemaPath+'" (see option extendRefs)');!0!==t.opts.extendRefs&&(a=!1,t.logger.warn('$ref: keywords ignored in schema at path "'+t.errSchemaPath+'"'))}if(t.schema.$comment&&t.opts.$comment&&(r+=" "+t.RULES.all.$comment.code(t,"$comment")),_){if(t.opts.coerceTypes)var x=t.util.coerceToTypes(t.opts.coerceTypes,_);var w=t.RULES.types[_];if(x||b||!0===w||w&&!X(w)){if(c=t.schemaPath+".type",h=t.errSchemaPath+"/type",c=t.schemaPath+".type",h=t.errSchemaPath+"/type",r+=" if ("+t.util[b?"checkDataTypes":"checkDataType"](_,d,!0)+") { ",x){var S="dataType"+s,T="coerced"+s;r+=" var "+S+" = typeof "+d+"; ","array"==t.opts.coerceTypes&&(r+=" if ("+S+" == 'object' && Array.isArray("+d+")) "+S+" = 'array'; "),r+=" var "+T+" = undefined; ";var O="",M=x;if(M)for(var k,C=-1,E=M.length-1;C<E;)k=M[C+=1],C&&(r+=" if ("+T+" === undefined) { ",O+="}"),"array"==t.opts.coerceTypes&&"array"!=k&&(r+=" if ("+S+" == 'array' && "+d+".length == 1) { "+T+" = "+d+" = "+d+"[0]; "+S+" = typeof "+d+";  } "),"string"==k?r+=" if ("+S+" == 'number' || "+S+" == 'boolean') "+T+" = '' + "+d+"; else if ("+d+" === null) "+T+" = ''; ":"number"==k||"integer"==k?(r+=" if ("+S+" == 'boolean' || "+d+" === null || ("+S+" == 'string' && "+d+" && "+d+" == +"+d+" ","integer"==k&&(r+=" && !("+d+" % 1)"),r+=")) "+T+" = +"+d+"; "):"boolean"==k?r+=" if ("+d+" === 'false' || "+d+" === 0 || "+d+" === null) "+T+" = false; else if ("+d+" === 'true' || "+d+" === 1) "+T+" = true; ":"null"==k?r+=" if ("+d+" === '' || "+d+" === 0 || "+d+" === false) "+T+" = null; ":"array"==t.opts.coerceTypes&&"array"==k&&(r+=" if ("+S+" == 'string' || "+S+" == 'number' || "+S+" == 'boolean' || "+d+" == null) "+T+" = ["+d+"]; ");r+=" "+O+" if ("+T+" === undefined) {   ",(V=V||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: { type: '",r+=b?""+_.join(","):""+_,r+="' } ",!1!==t.opts.messages&&(r+=" , message: 'should be ",r+=b?""+_.join(","):""+_,r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",g=r,r=V.pop(),r+=!t.compositeRule&&f?t.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  ";var A=u?"data"+(u-1||""):"parentData";r+=" "+d+" = "+T+"; ",u||(r+="if ("+A+" !== undefined)"),r+=" "+A+"["+(u?t.dataPathArr[u]:"parentDataProperty")+"] = "+T+"; } "}else(V=V||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: { type: '",r+=b?""+_.join(","):""+_,r+="' } ",!1!==t.opts.messages&&(r+=" , message: 'should be ",r+=b?""+_.join(","):""+_,r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",g=r,r=V.pop(),r+=!t.compositeRule&&f?t.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";r+=" } "}}if(t.schema.$ref&&!a)r+=" "+t.RULES.all.$ref.code(t,"$ref")+" ",f&&(r+=" } if (errors === ",r+=v?"0":"errs_"+s,r+=") { ",y+="}");else{var I=t.RULES;if(I)for(var P=-1,L=I.length-1;P<L;)if(X(w=I[P+=1])){if(w.type&&(r+=" if ("+t.util.checkDataType(w.type,d)+") { "),t.opts.useDefaults&&!t.compositeRule)if("object"==w.type&&t.schema.properties){l=t.schema.properties;var D=Object.keys(l);if(D)for(var j,R=-1,N=D.length-1;R<N;)void 0!==(F=l[j=D[R+=1]]).default&&(r+="  if ("+(z=d+t.util.getProperty(j))+" === undefined) "+z+" = ",r+="shared"==t.opts.useDefaults?" "+t.useDefault(F.default)+" ":" "+JSON.stringify(F.default)+" ",r+="; ")}else if("array"==w.type&&Array.isArray(t.schema.items)){var B=t.schema.items;if(B){C=-1;for(var F,U=B.length-1;C<U;){var z;void 0!==(F=B[C+=1]).default&&(r+="  if ("+(z=d+"["+C+"]")+" === undefined) "+z+" = ",r+="shared"==t.opts.useDefaults?" "+t.useDefault(F.default)+" ":" "+JSON.stringify(F.default)+" ",r+="; ")}}}var V,H=w.rules;if(H)for(var G,W=-1,q=H.length-1;W<q;)if($(G=H[W+=1])){var Y=G.code(t,G.keyword,w.type);Y&&(r+=" "+Y+" ",f&&(m+="}"))}f&&(r+=" "+m+" ",m=""),w.type&&(r+=" } ",_&&_===w.type&&!x)&&(r+=" else { ",c=t.schemaPath+".type",h=t.errSchemaPath+"/type",(V=V||[]).push(r),r="",!1!==t.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(h)+" , params: { type: '",r+=b?""+_.join(","):""+_,r+="' } ",!1!==t.opts.messages&&(r+=" , message: 'should be ",r+=b?""+_.join(","):""+_,r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+d+" "),r+=" } "):r+=" {} ",g=r,r=V.pop(),r+=!t.compositeRule&&f?t.async?" throw new ValidationError(["+g+"]); ":" validate.errors = ["+g+"]; return false; ":" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "),f&&(r+=" if (errors === ",r+=v?"0":"errs_"+s,r+=") { ",y+="}")}}function X(t){for(var e=t.rules,n=0;n<e.length;n++)if($(e[n]))return!0}function $(e){return void 0!==t.schema[e.keyword]||e.implements&&function(e){for(var n=e.implements,r=0;r<n.length;r++)if(void 0!==t.schema[n[r]])return!0}(e)}return f&&(r+=" "+y+" "),v?(i?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+p+" = errors === errs_"+s+";",r=t.util.cleanUpCode(r),v&&(r=t.util.finalCleanUpCode(r,i)),r}},{}],38:[function(t,e,n){"use strict";var r=/^[a-z_$][a-z0-9_$-]*$/i,i=t("./dotjs/custom");e.exports={add:function(t,e){var n=this.RULES;if(n.keywords[t])throw new Error("Keyword "+t+" is already defined");if(!r.test(t))throw new Error("Keyword "+t+" is not a valid identifier");if(e){if(e.macro&&void 0!==e.valid)throw new Error('"valid" option cannot be used with macro keywords');var a=e.type;if(Array.isArray(a)){var o,s=a.length;for(o=0;o<s;o++)h(a[o]);for(o=0;o<s;o++)c(t,a[o],e)}else a&&h(a),c(t,a,e);var u=!0===e.$data&&this._opts.$data;if(u&&!e.validate)throw new Error('$data support: "validate" function is not defined');var l=e.metaSchema;l&&(u&&(l={anyOf:[l,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]}),e.validateSchema=this.compile(l,!0))}function c(t,e,r){for(var a,o=0;o<n.length;o++){var s=n[o];if(s.type==e){a=s;break}}a||n.push(a={type:e,rules:[]});var u={keyword:t,definition:r,custom:!0,code:i,implements:r.implements};a.rules.push(u),n.custom[t]=u}function h(t){if(!n.types[t])throw new Error("Unknown type "+t)}return n.keywords[t]=n.all[t]=!0,this},get:function(t){var e=this.RULES.custom[t];return e?e.definition:this.RULES.keywords[t]||!1},remove:function(t){var e=this.RULES;delete e.keywords[t],delete e.all[t],delete e.custom[t];for(var n=0;n<e.length;n++)for(var r=e[n].rules,i=0;i<r.length;i++)if(r[i].keyword==t){r.splice(i,1);break}return this}}},{"./dotjs/custom":21}],39:[function(t,e,n){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}},{}],40:[function(t,e,n){e.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}},{}],41:[function(t,e,n){"use strict";var r=Array.isArray,i=Object.keys,a=Object.prototype.hasOwnProperty;e.exports=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){var o,s,u,l=r(e),c=r(n);if(l&&c){if((s=e.length)!=n.length)return!1;for(o=s;0!=o--;)if(!t(e[o],n[o]))return!1;return!0}if(l!=c)return!1;var h=e instanceof Date,f=n instanceof Date;if(h!=f)return!1;if(h&&f)return e.getTime()==n.getTime();var d=e instanceof RegExp,p=n instanceof RegExp;if(d!=p)return!1;if(d&&p)return e.toString()==n.toString();var g=i(e);if((s=g.length)!==i(n).length)return!1;for(o=s;0!=o--;)if(!a.call(n,g[o]))return!1;for(o=s;0!=o--;)if(!t(e[u=g[o]],n[u]))return!1;return!0}return e!=e&&n!=n}},{}],42:[function(t,e,n){"use strict";e.exports=function(t,e){e||(e={}),"function"==typeof e&&(e={cmp:e});var n,r="boolean"==typeof e.cycles&&e.cycles,i=e.cmp&&(n=e.cmp,function(t){return function(e,r){return n({key:e,value:t[e]},{key:r,value:t[r]})}}),a=[];return function t(e){if(e&&e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!=typeof e)return JSON.stringify(e);var n,o;if(Array.isArray(e)){for(o="[",n=0;n<e.length;n++)n&&(o+=","),o+=t(e[n])||"null";return o+"]"}if(null===e)return"null";if(-1!==a.indexOf(e)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=a.push(e)-1,u=Object.keys(e).sort(i&&i(e));for(o="",n=0;n<u.length;n++){var l=u[n],c=t(e[l]);c&&(o&&(o+=","),o+=JSON.stringify(l)+":"+c)}return a.splice(s,1),"{"+o+"}"}}(t)}},{}],43:[function(t,e,n){"use strict";var r=e.exports=function(t,e,n){"function"==typeof e&&(n=e,e={}),function t(e,n,i,a,o,s,u,l,c){if(i&&"object"==typeof i&&!Array.isArray(i))for(var h in n(i,a,o,s,u,l,c),i){var f=i[h];if(Array.isArray(f)){if(h in r.arrayKeywords)for(var d=0;d<f.length;d++)t(e,n,f[d],a+"/"+h+"/"+d,o,a,h,i,d)}else if(h in r.propsKeywords){if(f&&"object"==typeof f)for(var p in f)t(e,n,f[p],a+"/"+h+"/"+p.replace(/~/g,"~0").replace(/\//g,"~1"),o,a,h,i,p)}else(h in r.keywords||e.allKeys&&!(h in r.skipKeywords))&&t(e,n,f,a+"/"+h,o,a,h,i)}}(e,n,t,"",t)};r.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},r.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},r.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},r.skipKeywords={enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},{}],44:[function(t,e,n){!function(t){"use strict";function e(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(e.length>1){e[0]=e[0].slice(0,-1);for(var r=e.length-1,i=1;i<r;++i)e[i]=e[i].slice(1,-1);return e[r]=e[r].slice(1),e.join("")}return e[0]}function n(t){return"(?:"+t+")"}function r(t){return void 0===t?"undefined":null===t?"null":Object.prototype.toString.call(t).split(" ").pop().split("]").shift().toLowerCase()}function i(t){return t.toUpperCase()}function a(t){var r=e("[0-9]","[A-Fa-f]"),i=n(n("%[EFef]"+r+"%"+r+r+"%"+r+r)+"|"+n("%[89A-Fa-f]"+r+"%"+r+r)+"|"+n("%"+r+r)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",o=e("[\\:\\/\\?\\#\\[\\]\\@]",a),s=t?"[\\uE000-\\uF8FF]":"[]",u=e("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",t?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),l=n("[A-Za-z]"+e("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),c=n(n(i+"|"+e(u,a,"[\\:]"))+"*"),h=(n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("[1-9][0-9]")+"|[0-9]"),n(n("25[0-5]")+"|"+n("2[0-4][0-9]")+"|"+n("1[0-9][0-9]")+"|"+n("0?[1-9][0-9]")+"|0?0?[0-9]")),f=n(h+"\\."+h+"\\."+h+"\\."+h),d=n(r+"{1,4}"),p=n(n(d+"\\:"+d)+"|"+f),g=n([n(n(d+"\\:")+"{6}"+p),n("\\:\\:"+n(d+"\\:")+"{5}"+p),n(n(d)+"?\\:\\:"+n(d+"\\:")+"{4}"+p),n(n(n(d+"\\:")+"{0,1}"+d)+"?\\:\\:"+n(d+"\\:")+"{3}"+p),n(n(n(d+"\\:")+"{0,2}"+d)+"?\\:\\:"+n(d+"\\:")+"{2}"+p),n(n(n(d+"\\:")+"{0,3}"+d)+"?\\:\\:"+d+"\\:"+p),n(n(n(d+"\\:")+"{0,4}"+d)+"?\\:\\:"+p),n(n(n(d+"\\:")+"{0,5}"+d)+"?\\:\\:"+d),n(n(n(d+"\\:")+"{0,6}"+d)+"?\\:\\:")].join("|")),v=n(n(u+"|"+i)+"+"),m=(n(g+"\\%25"+v),n("\\["+n(n(g+n("\\%25|\\%(?!"+r+"{2})")+v)+"|"+g+"|"+n("[vV]"+r+"+\\."+e(u,a,"[\\:]")+"+"))+"\\]")),y=n(n(i+"|"+e(u,a))+"*"),_=n(m+"|"+f+"(?!"+y+")|"+y),b=n("[0-9]*"),x=n(n(c+"@")+"?"+_+n("\\:"+b)+"?"),w=n(i+"|"+e(u,a,"[\\:\\@]")),S=n(w+"*"),T=n(w+"+"),O=n(n(i+"|"+e(u,a,"[\\@]"))+"+"),M=n(n("\\/"+S)+"*"),k=n("\\/"+n(T+M)+"?"),C=n(O+M),E=n(T+M),A="(?!"+w+")",I=(n(M+"|"+k+"|"+C+"|"+E+"|"+A),n(n(w+"|"+e("[\\/\\?]",s))+"*")),P=n(n(w+"|[\\/\\?]")+"*"),L=n(n("\\/\\/"+x+M)+"|"+k+"|"+E+"|"+A);return n(n(l+"\\:"+L+n("\\?"+I)+"?"+n("\\#"+P)+"?")+"|"+n(n(n("\\/\\/"+x+M)+"|"+k+"|"+C+"|"+A)+n("\\?"+I)+"?"+n("\\#"+P)+"?")),n(l+"\\:"+L+n("\\?"+I)+"?"),n(n("\\/\\/("+n("("+c+")@")+"?("+_+")"+n("\\:("+b+")")+"?)")+"?("+M+"|"+k+"|"+E+"|"+A+")"),n("\\?("+I+")"),n("\\#("+P+")"),n(n("\\/\\/("+n("("+c+")@")+"?("+_+")"+n("\\:("+b+")")+"?)")+"?("+M+"|"+k+"|"+C+"|"+A+")"),n("\\?("+I+")"),n("\\#("+P+")"),n(n("\\/\\/("+n("("+c+")@")+"?("+_+")"+n("\\:("+b+")")+"?)")+"?("+M+"|"+k+"|"+E+"|"+A+")"),n("\\?("+I+")"),n("\\#("+P+")"),n("("+c+")@"),n("\\:("+b+")"),{NOT_SCHEME:new RegExp(e("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(e("[^\\%\\:]",u,a),"g"),NOT_HOST:new RegExp(e("[^\\%\\[\\]\\:]",u,a),"g"),NOT_PATH:new RegExp(e("[^\\%\\/\\:\\@]",u,a),"g"),NOT_PATH_NOSCHEME:new RegExp(e("[^\\%\\/\\@]",u,a),"g"),NOT_QUERY:new RegExp(e("[^\\%]",u,a,"[\\:\\@\\/\\?]",s),"g"),NOT_FRAGMENT:new RegExp(e("[^\\%]",u,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(e("[^]",u,a),"g"),UNRESERVED:new RegExp(u,"g"),OTHER_CHARS:new RegExp(e("[^\\%]",u,o),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+g+")"+n(n("\\%25|\\%(?!"+r+"{2})")+"("+v+")")+"?\\]?$")}}var o=a(!1),s=a(!0),u=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=2147483647,c=/^xn--/,h=/[^\0-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,g=String.fromCharCode;function v(t){throw new RangeError(d[t])}function m(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]);var i=function(t,e){for(var n=[],r=t.length;r--;)n[r]=e(t[r]);return n}((t=t.replace(f,".")).split("."),e).join(".");return r+i}function y(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var a=t.charCodeAt(n++);56320==(64512&a)?e.push(((1023&i)<<10)+(1023&a)+65536):(e.push(i),n--)}else e.push(i)}return e}var _=function(t,e){return t+22+75*(t<26)-((0!=e)<<5)},b=function(t,e,n){var r=0;for(t=n?p(t/700):t>>1,t+=p(t/e);t>455;r+=36)t=p(t/35);return p(r+36*t/(t+38))},x=function(t){var e,n=[],r=t.length,i=0,a=128,o=72,s=t.lastIndexOf("-");s<0&&(s=0);for(var u=0;u<s;++u)t.charCodeAt(u)>=128&&v("not-basic"),n.push(t.charCodeAt(u));for(var c=s>0?s+1:0;c<r;){for(var h=i,f=1,d=36;;d+=36){c>=r&&v("invalid-input");var g=(e=t.charCodeAt(c++))-48<10?e-22:e-65<26?e-65:e-97<26?e-97:36;(g>=36||g>p((l-i)/f))&&v("overflow"),i+=g*f;var m=d<=o?1:d>=o+26?26:d-o;if(g<m)break;var y=36-m;f>p(l/y)&&v("overflow"),f*=y}var _=n.length+1;o=b(i-h,_,0==h),p(i/_)>l-a&&v("overflow"),a+=p(i/_),i%=_,n.splice(i++,0,a)}return String.fromCodePoint.apply(String,n)},w=function(t){var e=[],n=(t=y(t)).length,r=128,i=0,a=72,o=!0,s=!1,u=void 0;try{for(var c,h=t[Symbol.iterator]();!(o=(c=h.next()).done);o=!0){var f=c.value;f<128&&e.push(g(f))}}catch(t){s=!0,u=t}finally{try{!o&&h.return&&h.return()}finally{if(s)throw u}}var d=e.length,m=d;for(d&&e.push("-");m<n;){var x=l,w=!0,S=!1,T=void 0;try{for(var O,M=t[Symbol.iterator]();!(w=(O=M.next()).done);w=!0){var k=O.value;k>=r&&k<x&&(x=k)}}catch(t){S=!0,T=t}finally{try{!w&&M.return&&M.return()}finally{if(S)throw T}}var C=m+1;x-r>p((l-i)/C)&&v("overflow"),i+=(x-r)*C,r=x;var E=!0,A=!1,I=void 0;try{for(var P,L=t[Symbol.iterator]();!(E=(P=L.next()).done);E=!0){var D=P.value;if(D<r&&++i>l&&v("overflow"),D==r){for(var j=i,R=36;;R+=36){var N=R<=a?1:R>=a+26?26:R-a;if(j<N)break;var B=j-N,F=36-N;e.push(g(_(N+B%F,0))),j=p(B/F)}e.push(g(_(j,0))),a=b(i,C,m==d),i=0,++m}}}catch(t){A=!0,I=t}finally{try{!E&&L.return&&L.return()}finally{if(A)throw I}}++i,++r}return e.join("")},S={version:"2.1.0",ucs2:{decode:y,encode:function(t){return String.fromCodePoint.apply(String,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t))}},decode:x,encode:w,toASCII:function(t){return m(t,function(t){return h.test(t)?"xn--"+w(t):t})},toUnicode:function(t){return m(t,function(t){return c.test(t)?x(t.slice(4).toLowerCase()):t})}},T={};function O(t){var e=t.charCodeAt(0);return e<16?"%0"+e.toString(16).toUpperCase():e<128?"%"+e.toString(16).toUpperCase():e<2048?"%"+(e>>6|192).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase():"%"+(e>>12|224).toString(16).toUpperCase()+"%"+(e>>6&63|128).toString(16).toUpperCase()+"%"+(63&e|128).toString(16).toUpperCase()}function M(t){for(var e="",n=0,r=t.length;n<r;){var i=parseInt(t.substr(n+1,2),16);if(i<128)e+=String.fromCharCode(i),n+=3;else if(i>=194&&i<224){if(r-n>=6){var a=parseInt(t.substr(n+4,2),16);e+=String.fromCharCode((31&i)<<6|63&a)}else e+=t.substr(n,6);n+=6}else if(i>=224){if(r-n>=9){var o=parseInt(t.substr(n+4,2),16),s=parseInt(t.substr(n+7,2),16);e+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}else e+=t.substr(n,9);n+=9}else e+=t.substr(n,3),n+=3}return e}function k(t,e){function n(t){var n=M(t);return n.match(e.UNRESERVED)?n:t}return t.scheme&&(t.scheme=String(t.scheme).replace(e.PCT_ENCODED,n).toLowerCase().replace(e.NOT_SCHEME,"")),void 0!==t.userinfo&&(t.userinfo=String(t.userinfo).replace(e.PCT_ENCODED,n).replace(e.NOT_USERINFO,O).replace(e.PCT_ENCODED,i)),void 0!==t.host&&(t.host=String(t.host).replace(e.PCT_ENCODED,n).toLowerCase().replace(e.NOT_HOST,O).replace(e.PCT_ENCODED,i)),void 0!==t.path&&(t.path=String(t.path).replace(e.PCT_ENCODED,n).replace(t.scheme?e.NOT_PATH:e.NOT_PATH_NOSCHEME,O).replace(e.PCT_ENCODED,i)),void 0!==t.query&&(t.query=String(t.query).replace(e.PCT_ENCODED,n).replace(e.NOT_QUERY,O).replace(e.PCT_ENCODED,i)),void 0!==t.fragment&&(t.fragment=String(t.fragment).replace(e.PCT_ENCODED,n).replace(e.NOT_FRAGMENT,O).replace(e.PCT_ENCODED,i)),t}function C(t){return t.replace(/^0*(.*)/,"$1")||"0"}function E(t,e){var n=t.match(e.IPV4ADDRESS)||[],r=u(n,2)[1];return r?r.split(".").map(C).join("."):t}function A(t,e){var n=t.match(e.IPV6ADDRESS)||[],r=u(n,3),i=r[1],a=r[2];if(i){for(var o=i.toLowerCase().split("::").reverse(),s=u(o,2),l=s[0],c=s[1],h=c?c.split(":").map(C):[],f=l.split(":").map(C),d=e.IPV4ADDRESS.test(f[f.length-1]),p=d?7:8,g=f.length-p,v=Array(p),m=0;m<p;++m)v[m]=h[m]||f[g+m]||"";d&&(v[p-1]=E(v[p-1],e));var y=v.reduce(function(t,e,n){if(!e||"0"===e){var r=t[t.length-1];r&&r.index+r.length===n?r.length++:t.push({index:n,length:1})}return t},[]).sort(function(t,e){return e.length-t.length})[0],_=void 0;if(y&&y.length>1){var b=v.slice(0,y.index),x=v.slice(y.index+y.length);_=b.join(":")+"::"+x.join(":")}else _=v.join(":");return a&&(_+="%"+a),_}return t}var I=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,P=void 0==="".match(/(){0}/)[1];function L(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=!1!==e.iri?s:o;"suffix"===e.reference&&(t=(e.scheme?e.scheme+":":"")+"//"+t);var i=t.match(I);if(i){P?(n.scheme=i[1],n.userinfo=i[3],n.host=i[4],n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=i[7],n.fragment=i[8],isNaN(n.port)&&(n.port=i[5])):(n.scheme=i[1]||void 0,n.userinfo=-1!==t.indexOf("@")?i[3]:void 0,n.host=-1!==t.indexOf("//")?i[4]:void 0,n.port=parseInt(i[5],10),n.path=i[6]||"",n.query=-1!==t.indexOf("?")?i[7]:void 0,n.fragment=-1!==t.indexOf("#")?i[8]:void 0,isNaN(n.port)&&(n.port=t.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),n.host&&(n.host=A(E(n.host,r),r)),n.reference=void 0!==n.scheme||void 0!==n.userinfo||void 0!==n.host||void 0!==n.port||n.path||void 0!==n.query?void 0===n.scheme?"relative":void 0===n.fragment?"absolute":"uri":"same-document",e.reference&&"suffix"!==e.reference&&e.reference!==n.reference&&(n.error=n.error||"URI is not a "+e.reference+" reference.");var a=T[(e.scheme||n.scheme||"").toLowerCase()];if(e.unicodeSupport||a&&a.unicodeSupport)k(n,r);else{if(n.host&&(e.domainHost||a&&a.domainHost))try{n.host=S.toASCII(n.host.replace(r.PCT_ENCODED,M).toLowerCase())}catch(t){n.error=n.error||"Host's domain name can not be converted to ASCII via punycode: "+t}k(n,o)}a&&a.parse&&a.parse(n,e)}else n.error=n.error||"URI can not be parsed.";return n}var D=/^\.\.?\//,j=/^\/\.(\/|$)/,R=/^\/\.\.(\/|$)/,N=/^\/?(?:.|\n)*?(?=\/|$)/;function B(t){for(var e=[];t.length;)if(t.match(D))t=t.replace(D,"");else if(t.match(j))t=t.replace(j,"/");else if(t.match(R))t=t.replace(R,"/"),e.pop();else if("."===t||".."===t)t="";else{var n=t.match(N);if(!n)throw new Error("Unexpected dot segment condition");var r=n[0];t=t.slice(r.length),e.push(r)}return e.join("")}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.iri?s:o,r=[],i=T[(e.scheme||t.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(t,e),t.host)if(n.IPV6ADDRESS.test(t.host));else if(e.domainHost||i&&i.domainHost)try{t.host=e.iri?S.toUnicode(t.host):S.toASCII(t.host.replace(n.PCT_ENCODED,M).toLowerCase())}catch(n){t.error=t.error||"Host's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+n}k(t,n),"suffix"!==e.reference&&t.scheme&&(r.push(t.scheme),r.push(":"));var a=function(t,e){var n=!1!==e.iri?s:o,r=[];return void 0!==t.userinfo&&(r.push(t.userinfo),r.push("@")),void 0!==t.host&&r.push(A(E(String(t.host),n),n).replace(n.IPV6ADDRESS,function(t,e,n){return"["+e+(n?"%25"+n:"")+"]"})),"number"==typeof t.port&&(r.push(":"),r.push(t.port.toString(10))),r.length?r.join(""):void 0}(t,e);if(void 0!==a&&("suffix"!==e.reference&&r.push("//"),r.push(a),t.path&&"/"!==t.path.charAt(0)&&r.push("/")),void 0!==t.path){var u=t.path;e.absolutePath||i&&i.absolutePath||(u=B(u)),void 0===a&&(u=u.replace(/^\/\//,"/%2F")),r.push(u)}return void 0!==t.query&&(r.push("?"),r.push(t.query)),void 0!==t.fragment&&(r.push("#"),r.push(t.fragment)),r.join("")}function U(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};return arguments[3]||(t=L(F(t,n),n),e=L(F(e,n),n)),!(n=n||{}).tolerant&&e.scheme?(r.scheme=e.scheme,r.userinfo=e.userinfo,r.host=e.host,r.port=e.port,r.path=B(e.path||""),r.query=e.query):(void 0!==e.userinfo||void 0!==e.host||void 0!==e.port?(r.userinfo=e.userinfo,r.host=e.host,r.port=e.port,r.path=B(e.path||""),r.query=e.query):(e.path?("/"===e.path.charAt(0)?r.path=B(e.path):(r.path=void 0===t.userinfo&&void 0===t.host&&void 0===t.port||t.path?t.path?t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:e.path:"/"+e.path,r.path=B(r.path)),r.query=e.query):(r.path=t.path,r.query=void 0!==e.query?e.query:t.query),r.userinfo=t.userinfo,r.host=t.host,r.port=t.port),r.scheme=t.scheme),r.fragment=e.fragment,r}function z(t,e){return t&&t.toString().replace(e&&e.iri?s.PCT_ENCODED:o.PCT_ENCODED,M)}var V={scheme:"http",domainHost:!0,parse:function(t,e){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t},serialize:function(t,e){return t.port!==("https"!==String(t.scheme).toLowerCase()?80:443)&&""!==t.port||(t.port=void 0),t.path||(t.path="/"),t}},H={scheme:"https",domainHost:V.domainHost,parse:V.parse,serialize:V.serialize},G={},W="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",q="[0-9A-Fa-f]",Y=n(n("%[EFef][0-9A-Fa-f]%"+q+q+"%"+q+q)+"|"+n("%[89A-Fa-f][0-9A-Fa-f]%"+q+q)+"|"+n("%"+q+q)),X=e("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),$=new RegExp(W,"g"),Z=new RegExp(Y,"g"),Q=new RegExp(e("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',X),"g"),K=new RegExp(e("[^]",W,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),J=K;function tt(t){var e=M(t);return e.match($)?e:t}var et={scheme:"mailto",parse:function(t,e){var n=t,r=n.to=n.path?n.path.split(","):[];if(n.path=void 0,n.query){for(var i=!1,a={},o=n.query.split("&"),s=0,u=o.length;s<u;++s){var l=o[s].split("=");switch(l[0]){case"to":for(var c=l[1].split(","),h=0,f=c.length;h<f;++h)r.push(c[h]);break;case"subject":n.subject=z(l[1],e);break;case"body":n.body=z(l[1],e);break;default:i=!0,a[z(l[0],e)]=z(l[1],e)}}i&&(n.headers=a)}n.query=void 0;for(var d=0,p=r.length;d<p;++d){var g=r[d].split("@");if(g[0]=z(g[0]),e.unicodeSupport)g[1]=z(g[1],e).toLowerCase();else try{g[1]=S.toASCII(z(g[1],e).toLowerCase())}catch(t){n.error=n.error||"Email address's domain name can not be converted to ASCII via punycode: "+t}r[d]=g.join("@")}return n},serialize:function(t,e){var n,r=t,a=void 0!==(n=t.to)&&null!==n?n instanceof Array?n:"number"!=typeof n.length||n.split||n.setInterval||n.call?[n]:Array.prototype.slice.call(n):[];if(a){for(var o=0,s=a.length;o<s;++o){var u=String(a[o]),l=u.lastIndexOf("@"),c=u.slice(0,l).replace(Z,tt).replace(Z,i).replace(Q,O),h=u.slice(l+1);try{h=e.iri?S.toUnicode(h):S.toASCII(z(h,e).toLowerCase())}catch(t){r.error=r.error||"Email address's domain name can not be converted to "+(e.iri?"Unicode":"ASCII")+" via punycode: "+t}a[o]=c+"@"+h}r.path=a.join(",")}var f=t.headers=t.headers||{};t.subject&&(f.subject=t.subject),t.body&&(f.body=t.body);var d=[];for(var p in f)f[p]!==G[p]&&d.push(p.replace(Z,tt).replace(Z,i).replace(K,O)+"="+f[p].replace(Z,tt).replace(Z,i).replace(J,O));return d.length&&(r.query=d.join("&")),r}},nt=/^([^\:]+)\:(.*)/,rt={scheme:"urn",parse:function(t,e){var n=t.path&&t.path.match(nt),r=t;if(n){var i=e.scheme||r.scheme||"urn",a=n[1].toLowerCase(),o=n[2],s=T[i+":"+(e.nid||a)];r.nid=a,r.nss=o,r.path=void 0,s&&(r=s.parse(r,e))}else r.error=r.error||"URN can not be parsed.";return r},serialize:function(t,e){var n=t.nid,r=T[(e.scheme||t.scheme||"urn")+":"+(e.nid||n)];r&&(t=r.serialize(t,e));var i=t;return i.path=(n||e.nid)+":"+t.nss,i}},it=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,at={scheme:"urn:uuid",parse:function(t,e){var n=t;return n.uuid=n.nss,n.nss=void 0,e.tolerant||n.uuid&&n.uuid.match(it)||(n.error=n.error||"UUID is not valid."),n},serialize:function(t,e){var n=t;return n.nss=(t.uuid||"").toLowerCase(),n}};T[V.scheme]=V,T[H.scheme]=H,T[et.scheme]=et,T[rt.scheme]=rt,T[at.scheme]=at,t.SCHEMES=T,t.pctEncChar=O,t.pctDecChars=M,t.parse=L,t.removeDotSegments=B,t.serialize=F,t.resolveComponents=U,t.resolve=function(t,e,n){var r=function(t,e){var n={scheme:"null"};if(e)for(var r in e)n[r]=e[r];return n}(0,n);return F(U(L(t,r),L(e,r),r,!0),r)},t.normalize=function(t,e){return"string"==typeof t?t=F(L(t,e),e):"object"===r(t)&&(t=L(F(t,e),e)),t},t.equal=function(t,e,n){return"string"==typeof t?t=F(L(t,n),n):"object"===r(t)&&(t=F(t,n)),"string"==typeof e?e=F(L(e,n),n):"object"===r(e)&&(e=F(e,n)),t===e},t.escapeComponent=function(t,e){return t&&t.toString().replace(e&&e.iri?s.ESCAPE:o.ESCAPE,O)},t.unescapeComponent=z,Object.defineProperty(t,"__esModule",{value:!0})}("object"==typeof n&&void 0!==e?n:this.URI=this.URI||{})},{}],ajv:[function(t,e,n){"use strict";var r=t("./compile"),i=t("./compile/resolve"),a=t("./cache"),o=t("./compile/schema_obj"),s=t("fast-json-stable-stringify"),u=t("./compile/formats"),l=t("./compile/rules"),c=t("./data"),h=t("./compile/util");e.exports=m,m.prototype.validate=function(t,e){var n;if("string"==typeof t){if(!(n=this.getSchema(t)))throw new Error('no schema with key or ref "'+t+'"')}else{var r=this._addSchema(t);n=r.validate||this._compile(r)}var i=n(e);return!0!==n.$async&&(this.errors=n.errors),i},m.prototype.compile=function(t,e){var n=this._addSchema(t,void 0,e);return n.validate||this._compile(n)},m.prototype.addSchema=function(t,e,n,r){if(Array.isArray(t)){for(var a=0;a<t.length;a++)this.addSchema(t[a],void 0,n,r);return this}var o=this._getId(t);if(void 0!==o&&"string"!=typeof o)throw new Error("schema id must be string");return S(this,e=i.normalizeId(e||o)),this._schemas[e]=this._addSchema(t,n,r,!0),this},m.prototype.addMetaSchema=function(t,e,n){return this.addSchema(t,e,n,!0),this},m.prototype.validateSchema=function(t,e){var n,r=t.$schema;if(void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(!(r=r||this._opts.defaultMeta||(n=this._opts.meta,this._opts.defaultMeta="object"==typeof n?this._getId(n)||n:this.getSchema(p)?p:void 0,this._opts.defaultMeta)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var i,a=this._formats.uri;this._formats.uri="function"==typeof a?this._schemaUriFormatFunc:this._schemaUriFormat;try{i=this.validate(r,t)}finally{this._formats.uri=a}if(!i&&e){var o="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(o);this.logger.error(o)}return i},m.prototype.getSchema=function(t){var e=y(this,t);switch(typeof e){case"object":return e.validate||this._compile(e);case"string":return this.getSchema(e);case"undefined":return function(t,e){var n=i.schema.call(t,{schema:{}},e);if(n){var a=n.schema,s=n.root,u=n.baseId,l=r.call(t,a,s,void 0,u);return t._fragments[e]=new o({ref:e,fragment:!0,schema:a,root:s,baseId:u,validate:l}),l}}(this,t)}},m.prototype.removeSchema=function(t){if(t instanceof RegExp)return _(this,this._schemas,t),_(this,this._refs,t),this;switch(typeof t){case"undefined":return _(this,this._schemas),_(this,this._refs),this._cache.clear(),this;case"string":var e=y(this,t);return e&&this._cache.del(e.cacheKey),delete this._schemas[t],delete this._refs[t],this;case"object":var n=this._opts.serialize,r=n?n(t):t;this._cache.del(r);var a=this._getId(t);a&&(a=i.normalizeId(a),delete this._schemas[a],delete this._refs[a])}return this},m.prototype.addFormat=function(t,e){return"string"==typeof e&&(e=new RegExp(e)),this._formats[t]=e,this},m.prototype.errorsText=function(t,e){if(!(t=t||this.errors))return"No errors";for(var n=void 0===(e=e||{}).separator?", ":e.separator,r=void 0===e.dataVar?"data":e.dataVar,i="",a=0;a<t.length;a++){var o=t[a];o&&(i+=r+o.dataPath+" "+o.message+n)}return i.slice(0,-n.length)},m.prototype._addSchema=function(t,e,n,r){if("object"!=typeof t&&"boolean"!=typeof t)throw new Error("schema should be object or boolean");var a=this._opts.serialize,s=a?a(t):t,u=this._cache.get(s);if(u)return u;r=r||!1!==this._opts.addUsedSchema;var l=i.normalizeId(this._getId(t));l&&r&&S(this,l);var c,h=!1!==this._opts.validateSchema&&!e;h&&!(c=l&&l==i.normalizeId(t.$schema))&&this.validateSchema(t,!0);var f=i.ids.call(this,t),d=new o({id:l,schema:t,localRefs:f,cacheKey:s,meta:n});return"#"!=l[0]&&r&&(this._refs[l]=d),this._cache.put(s,d),h&&c&&this.validateSchema(t,!0),d},m.prototype._compile=function(t,e){if(t.compiling)return t.validate=a,a.schema=t.schema,a.errors=null,a.root=e||a,!0===t.schema.$async&&(a.$async=!0),a;var n,i;t.compiling=!0,t.meta&&(n=this._opts,this._opts=this._metaOpts);try{i=r.call(this,t.schema,e,t.localRefs)}catch(e){throw delete t.validate,e}finally{t.compiling=!1,t.meta&&(this._opts=n)}return t.validate=i,t.refs=i.refs,t.refVal=i.refVal,t.root=i.root,i;function a(){var e=t.validate,n=e.apply(this,arguments);return a.errors=e.errors,n}},m.prototype.compileAsync=t("./compile/async");var f=t("./keyword");m.prototype.addKeyword=f.add,m.prototype.getKeyword=f.get,m.prototype.removeKeyword=f.remove;var d=t("./compile/error_classes");m.ValidationError=d.Validation,m.MissingRefError=d.MissingRef,m.$dataMetaSchema=c;var p="http://json-schema.org/draft-07/schema",g=["removeAdditional","useDefaults","coerceTypes"],v=["/properties"];function m(e){if(!(this instanceof m))return new m(e);e=this._opts=h.copy(e)||{},function(t){var e=t._opts.logger;if(!1===e)t.logger={log:T,warn:T,error:T};else{if(void 0===e&&(e=console),!("object"==typeof e&&e.log&&e.warn&&e.error))throw new Error("logger must implement log, warn and error methods");t.logger=e}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=u(e.format);var n=this._schemaUriFormat=this._formats["uri-reference"];this._schemaUriFormatFunc=function(t){return n.test(t)},this._cache=e.cache||new a,this._loadingSchemas={},this._compilations=[],this.RULES=l(),this._getId=function(t){switch(t.schemaId){case"auto":return w;case"id":return b;default:return x}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=s),this._metaOpts=function(t){for(var e=h.copy(t._opts),n=0;n<g.length;n++)delete e[g[n]];return e}(this),e.formats&&function(t){for(var e in t._opts.formats)t.addFormat(e,t._opts.formats[e])}(this),function(e){var n;if(e._opts.$data&&(n=t("./refs/data.json"),e.addMetaSchema(n,n.$id,!0)),!1!==e._opts.meta){var r=t("./refs/json-schema-draft-07.json");e._opts.$data&&(r=c(r,v)),e.addMetaSchema(r,p,!0),e._refs["http://json-schema.org/schema"]=p}}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),function(t){var e=t._opts.schemas;if(e)if(Array.isArray(e))t.addSchema(e);else for(var n in e)t.addSchema(e[n],n)}(this)}function y(t,e){return e=i.normalizeId(e),t._schemas[e]||t._refs[e]||t._fragments[e]}function _(t,e,n){for(var r in e){var i=e[r];i.meta||n&&!n.test(r)||(t._cache.del(i.cacheKey),delete e[r])}}function b(t){return t.$id&&this.logger.warn("schema $id ignored",t.$id),t.id}function x(t){return t.id&&this.logger.warn("schema id ignored",t.id),t.$id}function w(t){if(t.$id&&t.id&&t.$id!=t.id)throw new Error("schema $id is different from id");return t.$id||t.id}function S(t,e){if(t._schemas[e]||t._refs[e])throw new Error('schema with key or id "'+e+'" already exists')}function T(){}},{"./cache":1,"./compile":5,"./compile/async":2,"./compile/error_classes":3,"./compile/formats":4,"./compile/resolve":6,"./compile/rules":7,"./compile/schema_obj":8,"./compile/util":10,"./data":11,"./keyword":38,"./refs/data.json":39,"./refs/json-schema-draft-07.json":40,"fast-json-stable-stringify":42}]},{},[])("ajv")}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.QRious=e()}(this,function(){"use strict";function t(t,n){var i;return"function"==typeof Object.create?i=Object.create(t):(r.prototype=t,i=new r,r.prototype=null),n&&e(!0,i,n),i}function e(t,e,n){for(var r,o,s=0,u=(n=a.call(arguments,2)).length;s<u;s++)for(r in o=n[s])t&&!i.call(o,r)||(e[r]=o[r])}function n(){}var r=function(){},i=Object.prototype.hasOwnProperty,a=Array.prototype.slice;n.class_="Nevis",n.super_=Object,n.extend=function(n,r,i,a){var o=this;return"string"!=typeof n&&(a=i,i=r,r=n,n=null),"function"!=typeof r&&(a=i,i=r,r=function(){return o.apply(this,arguments)}),e(!1,r,o,a),r.prototype=t(o.prototype,i),r.prototype.constructor=r,r.class_=n||o.class_,r.super_=o,r};var o=n,s=o.extend(function(t,e,n){this.qrious=t,this.element=e,this.element.qrious=t,this.enabled=Boolean(n)},{draw:function(t){},getElement:function(){return this.enabled||(this.enabled=!0,this.render()),this.element},getModuleSize:function(t){var e=this.qrious,n=Math.floor((e.size-2*(e.padding||0))/t.width);return Math.max(1,n)},getOffset:function(t){var e=this.qrious,n=e.padding;if(null!=n)return n;var r=this.getModuleSize(t),i=Math.floor((e.size-r*t.width)/2);return Math.max(0,i)},render:function(t){this.enabled&&(this.resize(),this.reset(),this.draw(t))},reset:function(){},resize:function(){}}),u=s.extend({draw:function(t){var e,n,r=this.qrious,i=this.getModuleSize(t),a=this.getOffset(t),o=this.element.getContext("2d");for(o.fillStyle=r.foreground,o.globalAlpha=r.foregroundAlpha,e=0;e<t.width;e++)for(n=0;n<t.width;n++)t.buffer[n*t.width+e]&&o.fillRect(i*e+a,i*n+a,i,i)},reset:function(){var t=this.qrious,e=this.element.getContext("2d"),n=t.size;e.lineWidth=1,e.clearRect(0,0,n,n),e.fillStyle=t.background,e.globalAlpha=t.backgroundAlpha,e.fillRect(0,0,n,n)},resize:function(){var t=this.element;t.width=t.height=this.qrious.size}}),l=o.extend(null,{BLOCK:[0,11,15,19,23,27,31,16,18,20,22,24,26,28,20,22,24,24,26,28,28,22,24,24,26,26,28,28,24,24,26,26,26,28,28,24,26,26,26,28,28]}),c=o.extend(null,{BLOCKS:[1,0,19,7,1,0,16,10,1,0,13,13,1,0,9,17,1,0,34,10,1,0,28,16,1,0,22,22,1,0,16,28,1,0,55,15,1,0,44,26,2,0,17,18,2,0,13,22,1,0,80,20,2,0,32,18,2,0,24,26,4,0,9,16,1,0,108,26,2,0,43,24,2,2,15,18,2,2,11,22,2,0,68,18,4,0,27,16,4,0,19,24,4,0,15,28,2,0,78,20,4,0,31,18,2,4,14,18,4,1,13,26,2,0,97,24,2,2,38,22,4,2,18,22,4,2,14,26,2,0,116,30,3,2,36,22,4,4,16,20,4,4,12,24,2,2,68,18,4,1,43,26,6,2,19,24,6,2,15,28,4,0,81,20,1,4,50,30,4,4,22,28,3,8,12,24,2,2,92,24,6,2,36,22,4,6,20,26,7,4,14,28,4,0,107,26,8,1,37,22,8,4,20,24,12,4,11,22,3,1,115,30,4,5,40,24,11,5,16,20,11,5,12,24,5,1,87,22,5,5,41,24,5,7,24,30,11,7,12,24,5,1,98,24,7,3,45,28,15,2,19,24,3,13,15,30,1,5,107,28,10,1,46,28,1,15,22,28,2,17,14,28,5,1,120,30,9,4,43,26,17,1,22,28,2,19,14,28,3,4,113,28,3,11,44,26,17,4,21,26,9,16,13,26,3,5,107,28,3,13,41,26,15,5,24,30,15,10,15,28,4,4,116,28,17,0,42,26,17,6,22,28,19,6,16,30,2,7,111,28,17,0,46,28,7,16,24,30,34,0,13,24,4,5,121,30,4,14,47,28,11,14,24,30,16,14,15,30,6,4,117,30,6,14,45,28,11,16,24,30,30,2,16,30,8,4,106,26,8,13,47,28,7,22,24,30,22,13,15,30,10,2,114,28,19,4,46,28,28,6,22,28,33,4,16,30,8,4,122,30,22,3,45,28,8,26,23,30,12,28,15,30,3,10,117,30,3,23,45,28,4,31,24,30,11,31,15,30,7,7,116,30,21,7,45,28,1,37,23,30,19,26,15,30,5,10,115,30,19,10,47,28,15,25,24,30,23,25,15,30,13,3,115,30,2,29,46,28,42,1,24,30,23,28,15,30,17,0,115,30,10,23,46,28,10,35,24,30,19,35,15,30,17,1,115,30,14,21,46,28,29,19,24,30,11,46,15,30,13,6,115,30,14,23,46,28,44,7,24,30,59,1,16,30,12,7,121,30,12,26,47,28,39,14,24,30,22,41,15,30,6,14,121,30,6,34,47,28,46,10,24,30,2,64,15,30,17,4,122,30,29,14,46,28,49,10,24,30,24,46,15,30,4,18,122,30,13,32,46,28,48,14,24,30,42,32,15,30,20,4,117,30,40,7,47,28,43,22,24,30,10,67,15,30,19,6,118,30,18,31,47,28,34,34,24,30,20,61,15,30],FINAL_FORMAT:[30660,29427,32170,30877,26159,25368,27713,26998,21522,20773,24188,23371,17913,16590,20375,19104,13663,12392,16177,14854,9396,8579,11994,11245,5769,5054,7399,6608,1890,597,3340,2107],LEVELS:{L:1,M:2,Q:3,H:4}}),h=o.extend(null,{EXPONENT:[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,0],LOG:[255,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175]}),f=o.extend(null,{BLOCK:[3220,1468,2713,1235,3062,1890,2119,1549,2344,2936,1117,2583,1330,2470,1667,2249,2028,3780,481,4011,142,3098,831,3445,592,2517,1776,2234,1951,2827,1070,2660,1345,3177]}),d=o.extend(function(t){var e,n,r,i,a,o=t.value.length;for(this._badness=[],this._level=c.LEVELS[t.level],this._polynomial=[],this._value=t.value,this._version=0,this._stringBuffer=[];this._version<40&&(this._version++,r=4*(this._level-1)+16*(this._version-1),i=c.BLOCKS[r++],a=c.BLOCKS[r++],e=c.BLOCKS[r++],n=c.BLOCKS[r],!(o<=(r=e*(i+a)+a-3+(this._version<=9)))););this._dataBlock=e,this._eccBlock=n,this._neccBlock1=i,this._neccBlock2=a;var s=this.width=17+4*this._version;this.buffer=d._createArray(s*s),this._ecc=d._createArray(e+(e+n)*(i+a)+a),this._mask=d._createArray((s*(s+1)+1)/2),this._insertFinders(),this._insertAlignments(),this.buffer[8+s*(s-8)]=1,this._insertTimingGap(),this._reverseMask(),this._insertTimingRowAndColumn(),this._insertVersion(),this._syncMask(),this._convertBitStream(o),this._calculatePolynomial(),this._appendEccToData(),this._interleaveBlocks(),this._pack(),this._finish()},{_addAlignment:function(t,e){var n,r=this.buffer,i=this.width;for(r[t+i*e]=1,n=-2;n<2;n++)r[t+n+i*(e-2)]=1,r[t-2+i*(e+n+1)]=1,r[t+2+i*(e+n)]=1,r[t+n+1+i*(e+2)]=1;for(n=0;n<2;n++)this._setMask(t-1,e+n),this._setMask(t+1,e-n),this._setMask(t-n,e-1),this._setMask(t+n,e+1)},_appendData:function(t,e,n,r){var i,a,o,s=this._polynomial,u=this._stringBuffer;for(a=0;a<r;a++)u[n+a]=0;for(a=0;a<e;a++){if(255!==(i=h.LOG[u[t+a]^u[n]]))for(o=1;o<r;o++)u[n+o-1]=u[n+o]^h.EXPONENT[d._modN(i+s[r-o])];else for(o=n;o<n+r;o++)u[o]=u[o+1];u[n+r-1]=255===i?0:h.EXPONENT[d._modN(i+s[0])]}},_appendEccToData:function(){var t,e=0,n=this._dataBlock,r=this._calculateMaxLength(),i=this._eccBlock;for(t=0;t<this._neccBlock1;t++)this._appendData(e,n,r,i),e+=n,r+=i;for(t=0;t<this._neccBlock2;t++)this._appendData(e,n+1,r,i),e+=n+1,r+=i},_applyMask:function(t){var e,n,r,i,a=this.buffer,o=this.width;switch(t){case 0:for(i=0;i<o;i++)for(r=0;r<o;r++)r+i&1||this._isMasked(r,i)||(a[r+i*o]^=1);break;case 1:for(i=0;i<o;i++)for(r=0;r<o;r++)1&i||this._isMasked(r,i)||(a[r+i*o]^=1);break;case 2:for(i=0;i<o;i++)for(e=0,r=0;r<o;r++,e++)3===e&&(e=0),e||this._isMasked(r,i)||(a[r+i*o]^=1);break;case 3:for(n=0,i=0;i<o;i++,n++)for(3===n&&(n=0),e=n,r=0;r<o;r++,e++)3===e&&(e=0),e||this._isMasked(r,i)||(a[r+i*o]^=1);break;case 4:for(i=0;i<o;i++)for(e=0,n=i>>1&1,r=0;r<o;r++,e++)3===e&&(e=0,n=!n),n||this._isMasked(r,i)||(a[r+i*o]^=1);break;case 5:for(n=0,i=0;i<o;i++,n++)for(3===n&&(n=0),e=0,r=0;r<o;r++,e++)3===e&&(e=0),(r&i&1)+!(!e|!n)||this._isMasked(r,i)||(a[r+i*o]^=1);break;case 6:for(n=0,i=0;i<o;i++,n++)for(3===n&&(n=0),e=0,r=0;r<o;r++,e++)3===e&&(e=0),(r&i&1)+(e&&e===n)&1||this._isMasked(r,i)||(a[r+i*o]^=1);break;case 7:for(n=0,i=0;i<o;i++,n++)for(3===n&&(n=0),e=0,r=0;r<o;r++,e++)3===e&&(e=0),(e&&e===n)+(r+i&1)&1||this._isMasked(r,i)||(a[r+i*o]^=1)}},_calculateMaxLength:function(){return this._dataBlock*(this._neccBlock1+this._neccBlock2)+this._neccBlock2},_calculatePolynomial:function(){var t,e,n=this._eccBlock,r=this._polynomial;for(r[0]=1,t=0;t<n;t++){for(r[t+1]=1,e=t;e>0;e--)r[e]=r[e]?r[e-1]^h.EXPONENT[d._modN(h.LOG[r[e]]+t)]:r[e-1];r[0]=h.EXPONENT[d._modN(h.LOG[r[0]]+t)]}for(t=0;t<=n;t++)r[t]=h.LOG[r[t]]},_checkBadness:function(){var t,e,n,r,i,a=0,o=this._badness,s=this.buffer,u=this.width;for(i=0;i<u-1;i++)for(r=0;r<u-1;r++)(s[r+u*i]&&s[r+1+u*i]&&s[r+u*(i+1)]&&s[r+1+u*(i+1)]||!(s[r+u*i]||s[r+1+u*i]||s[r+u*(i+1)]||s[r+1+u*(i+1)]))&&(a+=d.N2);var l=0;for(i=0;i<u;i++){for(n=0,o[0]=0,t=0,r=0;r<u;r++)t===(e=s[r+u*i])?o[n]++:o[++n]=1,l+=(t=e)?1:-1;a+=this._getBadness(n)}l<0&&(l=-l);var c=0,h=l;for(h+=h<<2,h<<=1;h>u*u;)h-=u*u,c++;for(a+=c*d.N4,r=0;r<u;r++){for(n=0,o[0]=0,t=0,i=0;i<u;i++)t===(e=s[r+u*i])?o[n]++:o[++n]=1,t=e;a+=this._getBadness(n)}return a},_convertBitStream:function(t){var e,n,r=this._ecc,i=this._version;for(n=0;n<t;n++)r[n]=this._value.charCodeAt(n);var a=this._stringBuffer=r.slice(),o=this._calculateMaxLength();t>=o-2&&(t=o-2,i>9&&t--);var s=t;if(i>9){for(a[s+2]=0,a[s+3]=0;s--;)a[s+3]|=255&(e=a[s])<<4,a[s+2]=e>>4;a[2]|=255&t<<4,a[1]=t>>4,a[0]=64|t>>12}else{for(a[s+1]=0,a[s+2]=0;s--;)a[s+2]|=255&(e=a[s])<<4,a[s+1]=e>>4;a[1]|=255&t<<4,a[0]=64|t>>4}for(s=t+3-(i<10);s<o;)a[s++]=236,a[s++]=17},_getBadness:function(t){var e,n=0,r=this._badness;for(e=0;e<=t;e++)r[e]>=5&&(n+=d.N1+r[e]-5);for(e=3;e<t-1;e+=2)r[e-2]===r[e+2]&&r[e+2]===r[e-1]&&r[e-1]===r[e+1]&&3*r[e-1]===r[e]&&(0===r[e-3]||e+3>t||3*r[e-3]>=4*r[e]||3*r[e+3]>=4*r[e])&&(n+=d.N3);return n},_finish:function(){this._stringBuffer=this.buffer.slice();var t,e,n=0,r=3e4;for(e=0;e<8&&(this._applyMask(e),(t=this._checkBadness())<r&&(r=t,n=e),7!==n);e++)this.buffer=this._stringBuffer.slice();n!==e&&this._applyMask(n),r=c.FINAL_FORMAT[n+(this._level-1<<3)];var i=this.buffer,a=this.width;for(e=0;e<8;e++,r>>=1)1&r&&(i[a-1-e+8*a]=1,e<6?i[8+a*e]=1:i[8+a*(e+1)]=1);for(e=0;e<7;e++,r>>=1)1&r&&(i[8+a*(a-7+e)]=1,e?i[6-e+8*a]=1:i[7+8*a]=1)},_interleaveBlocks:function(){var t,e,n=this._dataBlock,r=this._ecc,i=this._eccBlock,a=0,o=this._calculateMaxLength(),s=this._neccBlock1,u=this._neccBlock2,l=this._stringBuffer;for(t=0;t<n;t++){for(e=0;e<s;e++)r[a++]=l[t+e*n];for(e=0;e<u;e++)r[a++]=l[s*n+t+e*(n+1)]}for(e=0;e<u;e++)r[a++]=l[s*n+t+e*(n+1)];for(t=0;t<i;t++)for(e=0;e<s+u;e++)r[a++]=l[o+t+e*i];this._stringBuffer=r},_insertAlignments:function(){var t,e,n,r=this._version,i=this.width;if(r>1)for(t=l.BLOCK[r],n=i-7;;){for(e=i-7;e>t-3&&(this._addAlignment(e,n),!(e<t));)e-=t;if(n<=t+9)break;this._addAlignment(6,n-=t),this._addAlignment(n,6)}},_insertFinders:function(){var t,e,n,r,i=this.buffer,a=this.width;for(t=0;t<3;t++){for(e=0,r=0,1===t&&(e=a-7),2===t&&(r=a-7),i[r+3+a*(e+3)]=1,n=0;n<6;n++)i[r+n+a*e]=1,i[r+a*(e+n+1)]=1,i[r+6+a*(e+n)]=1,i[r+n+1+a*(e+6)]=1;for(n=1;n<5;n++)this._setMask(r+n,e+1),this._setMask(r+1,e+n+1),this._setMask(r+5,e+n),this._setMask(r+n+1,e+5);for(n=2;n<4;n++)i[r+n+a*(e+2)]=1,i[r+2+a*(e+n+1)]=1,i[r+4+a*(e+n)]=1,i[r+n+1+a*(e+4)]=1}},_insertTimingGap:function(){var t,e,n=this.width;for(e=0;e<7;e++)this._setMask(7,e),this._setMask(n-8,e),this._setMask(7,e+n-7);for(t=0;t<8;t++)this._setMask(t,7),this._setMask(t+n-8,7),this._setMask(t,n-8)},_insertTimingRowAndColumn:function(){var t,e=this.buffer,n=this.width;for(t=0;t<n-14;t++)1&t?(this._setMask(8+t,6),this._setMask(6,8+t)):(e[8+t+6*n]=1,e[6+n*(8+t)]=1)},_insertVersion:function(){var t,e,n,r,i=this.buffer,a=this._version,o=this.width;if(a>6)for(t=f.BLOCK[a-7],e=17,n=0;n<6;n++)for(r=0;r<3;r++,e--)1&(e>11?a>>e-12:t>>e)?(i[5-n+o*(2-r+o-11)]=1,i[2-r+o-11+o*(5-n)]=1):(this._setMask(5-n,2-r+o-11),this._setMask(2-r+o-11,5-n))},_isMasked:function(t,e){var n=d._getMaskBit(t,e);return 1===this._mask[n]},_pack:function(){var t,e,n,r=1,i=1,a=this.width,o=a-1,s=a-1,u=(this._dataBlock+this._eccBlock)*(this._neccBlock1+this._neccBlock2)+this._neccBlock2;for(e=0;e<u;e++)for(t=this._stringBuffer[e],n=0;n<8;n++,t<<=1){128&t&&(this.buffer[o+a*s]=1);do{i?o--:(o++,r?0!==s?s--:(r=!r,6==(o-=2)&&(o--,s=9)):s!==a-1?s++:(r=!r,6==(o-=2)&&(o--,s-=8))),i=!i}while(this._isMasked(o,s))}},_reverseMask:function(){var t,e,n=this.width;for(t=0;t<9;t++)this._setMask(t,8);for(t=0;t<8;t++)this._setMask(t+n-8,8),this._setMask(8,t);for(e=0;e<7;e++)this._setMask(8,e+n-7)},_setMask:function(t,e){var n=d._getMaskBit(t,e);this._mask[n]=1},_syncMask:function(){var t,e,n=this.width;for(e=0;e<n;e++)for(t=0;t<=e;t++)this.buffer[t+n*e]&&this._setMask(t,e)}},{_createArray:function(t){var e,n=[];for(e=0;e<t;e++)n[e]=0;return n},_getMaskBit:function(t,e){var n;return t>e&&(n=t,t=e,e=n),n=e,n+=e*e,(n>>=1)+t},_modN:function(t){for(;t>=255;)t=((t-=255)>>8)+(255&t);return t},N1:3,N2:3,N3:40,N4:10}),p=d,g=s.extend({draw:function(){this.element.src=this.qrious.toDataURL()},reset:function(){this.element.src=""},resize:function(){var t=this.element;t.width=t.height=this.qrious.size}}),v=o.extend(function(t,e,n,r){this.name=t,this.modifiable=Boolean(e),this.defaultValue=n,this._valueTransformer=r},{transform:function(t){var e=this._valueTransformer;return"function"==typeof e?e(t,this):t}}),m=o.extend(null,{abs:function(t){return null!=t?Math.abs(t):null},hasOwn:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},noop:function(){},toUpperCase:function(t){return null!=t?t.toUpperCase():null}}),y=o.extend(function(t){this.options={},t.forEach(function(t){this.options[t.name]=t},this)},{exists:function(t){return null!=this.options[t]},get:function(t,e){return y._get(this.options[t],e)},getAll:function(t){var e,n=this.options,r={};for(e in n)m.hasOwn(n,e)&&(r[e]=y._get(n[e],t));return r},init:function(t,e,n){var r,i;for(r in"function"!=typeof n&&(n=m.noop),this.options)m.hasOwn(this.options,r)&&(y._set(i=this.options[r],i.defaultValue,e),y._createAccessor(i,e,n));this._setAll(t,e,!0)},set:function(t,e,n){return this._set(t,e,n)},setAll:function(t,e){return this._setAll(t,e)},_set:function(t,e,n,r){var i=this.options[t];if(!i)throw new Error("Invalid option: "+t);if(!i.modifiable&&!r)throw new Error("Option cannot be modified: "+t);return y._set(i,e,n)},_setAll:function(t,e,n){if(!t)return!1;var r,i=!1;for(r in t)m.hasOwn(t,r)&&this._set(r,t[r],e,n)&&(i=!0);return i}},{_createAccessor:function(t,e,n){var r={get:function(){return y._get(t,e)}};t.modifiable&&(r.set=function(r){y._set(t,r,e)&&n(r,t)}),Object.defineProperty(e,t.name,r)},_get:function(t,e){return e["_"+t.name]},_set:function(t,e,n){var r="_"+t.name,i=n[r],a=t.transform(null!=e?e:t.defaultValue);return n[r]=a,a!==i}}),_=y,b=o.extend(function(){this._services={}},{getService:function(t){var e=this._services[t];if(!e)throw new Error("Service is not being managed with name: "+t);return e},setService:function(t,e){if(this._services[t])throw new Error("Service is already managed with name: "+t);e&&(this._services[t]=e)}}),x=new _([new v("background",!0,"white"),new v("backgroundAlpha",!0,1,m.abs),new v("element"),new v("foreground",!0,"black"),new v("foregroundAlpha",!0,1,m.abs),new v("level",!0,"L",m.toUpperCase),new v("mime",!0,"image/png"),new v("padding",!0,null,m.abs),new v("size",!0,100,m.abs),new v("value",!0,"")]),w=new b,S=o.extend(function(t){x.init(t,this,this.update.bind(this));var e=x.get("element",this),n=w.getService("element"),r=e&&n.isCanvas(e)?e:n.createCanvas(),i=e&&n.isImage(e)?e:n.createImage();this._canvasRenderer=new u(this,r,!0),this._imageRenderer=new g(this,i,i===e),this.update()},{get:function(){return x.getAll(this)},set:function(t){x.setAll(t,this)&&this.update()},toDataURL:function(t){return this.canvas.toDataURL(t||this.mime)},update:function(){var t=new p({level:this.level,value:this.value});this._canvasRenderer.render(t),this._imageRenderer.render(t)}},{use:function(t){w.setService(t.getName(),t)}});Object.defineProperties(S.prototype,{canvas:{get:function(){return this._canvasRenderer.getElement()}},image:{get:function(){return this._imageRenderer.getElement()}}});var T=S,O=o.extend({getName:function(){}}).extend({createCanvas:function(){},createImage:function(){},getName:function(){return"element"},isCanvas:function(t){},isImage:function(t){}}).extend({createCanvas:function(){return document.createElement("canvas")},createImage:function(){return document.createElement("img")},isCanvas:function(t){return t instanceof HTMLCanvasElement},isImage:function(t){return t instanceof HTMLImageElement}});return T.use(new O),T});